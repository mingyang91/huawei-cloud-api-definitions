{"base_path":"/","components":null,"consumes":"[\"application/json\"]","definitions":{"CandidateIntention":{"description":"","properties":{"candidate_confidence":{"description":"候选意图置信度。","format":"double","type":"number"},"candidate_intention":{"description":"候选意图。","type":"string"}},"required":["candidate_confidence","candidate_intention"]},"ChatAnswers":{"description":"","properties":{"answer":{"description":"答案。","type":"string"},"score":{"description":"闲聊的置信度,范围:0.0~1.0  0.0表示兜底回复","format":"float","type":"number"}},"required":["answer"]},"CurrentSlot":{"description":"","properties":{"slot_id":{"description":"槽位ID。","type":"string"},"slot_identification":{"description":"槽位标识。","type":"string"},"slot_name":{"description":"槽位名称。","type":"string"},"slot_values":{"description":"槽位值。","items":{"$ref":"#/definitions/SlotValue","description":""},"type":"array"}},"required":["slot_id","slot_name","slot_values"]},"ErrorResp":{"description":"Bad Request","properties":{"error_code":{"description":"调用失败时的错误码。\n调用成功时无此字段。","type":"string"},"error_msg":{"description":"调用失败时的错误信息。\n调用成功时无此字段。","type":"string"}},"required":["error_code","error_msg"]},"Frame":{"description":"","properties":{"candidate_words":{"description":"候选词。","items":{"description":"","type":"string"},"type":"array"},"confidence":{"description":"命中意图置信度。","format":"double","type":"number"},"current_slots":{"description":"当前槽位列表。","items":{"$ref":"#/definitions/CurrentSlot","description":""},"type":"array"},"flow_complete":{"description":"对话流程是否完成。","type":"boolean"},"history_slots":{"description":"历史槽位列表。","items":{"$ref":"#/definitions/HistorySlot","description":""},"type":"array"},"intention":{"description":"意图","type":"string"},"intention_alias":{"description":"意图名称","type":"string"},"reply":{"description":"机器人回复。","type":"string"},"task_complete":{"description":"任务是否完成。","type":"boolean"}},"required":["confidence","current_slots","flow_complete","history_slots","intention","intention_alias","reply","task_complete"]},"HistorySlot":{"description":"","properties":{"slot_identification":{"description":"用户设置的槽位标识。","type":"string"},"slot_name":{"description":"槽位名称。","type":"string"},"slot_values":{"description":"槽信息。","items":{"$ref":"#/definitions/HistorySlotWord","description":""},"type":"array"}},"required":["slot_identification","slot_name"]},"HistorySlotWord":{"description":"","properties":{"norm_word":{"description":"归一化后的词","type":"string"},"word":{"description":"词","type":"string"}},"required":["norm_word","word"]},"PostQaSessionReq":{"description":"","properties":{"chat_enable":{"default":true,"description":"默认true\ntrue:使用内部闲聊语料进行兜底\nfalse:不使用闲聊兜底","type":"boolean"},"extends":{"$ref":"#/definitions/SessionExtends","description":"扩展参数。"},"question":{"description":"用户输入。","type":"string"},"user_id":{"description":"用户id,在日志中用于标识不通用户,可以为任意String。","type":"string"}},"required":["question"]},"PostQaSessionResp":{"description":"","properties":{"chat_answers":{"$ref":"#/definitions/ChatAnswers","description":"闲聊型机器人回复。"},"qabot_answers":{"$ref":"#/definitions/QaBotAnswers","description":"问答型机器人回复。"},"reply_type":{"description":"回复类型:\n0   问答型机器人回复。\n1   任务型机器人回复。\n2   闲聊回复。","format":"int32","type":"integer"},"request_id":{"description":"请求ID。","type":"string"},"taskbot_answers":{"$ref":"#/definitions/TaskBotAnswers","description":"任务型机器人回复。"}},"required":["reply_type"]},"QaBotAnswer":{"description":"","properties":{"answer":{"description":"知识库答案,包含该字段的回答为直接回答,未包含该字段的是推荐回答。","type":"string"},"domain":{"description":"所属领域。","type":"string"},"qa_pair_id":{"description":"问答对ID。","type":"string"},"score":{"description":"相似度得分,精确到小数点后3位。","format":"double","type":"number"},"st_question":{"description":"标准问题。","type":"string"},"top_score_question":{"description":"最高评分的扩展问或标准问,当关闭内部阈值处理时返回。","type":"string"}}},"QaBotAnswers":{"description":"","properties":{"answers":{"description":"问答机器人回复。","items":{"$ref":"#/definitions/QaBotAnswer","description":""},"type":"array"},"request_id":{"description":"请求ID。","type":"string"}},"required":["request_id"]},"RelatedIntention":{"description":"","properties":{"confidence":{"description":"意图置信度。","format":"double","type":"number"},"intention":{"description":"意图名称。","type":"string"}},"required":["intention"]},"SessionExtends":{"description":"","properties":{"domain_ids":{"description":"领域列表,多个领域用分号隔开。如果设置了领域且领域不为空,就从这些领域中匹配答案,否则就从该用户的全部知识库匹配答案。\n\n当前最多支持10个领域。\n","items":{"description":"","type":"string"},"maxItems":10,"type":"array"},"source":{"description":"问题来源\n其他支持用户自定义,最终体现在问答日志里","type":"string"},"tag_ids":{"$ref":"#/definitions/Tag","description":"待匹配的答案标签id列表"}}},"SkillResponse":{"description":"","properties":{"candidate":{"$ref":"#/definitions/CandidateIntention","description":"候选意图。"},"frame":{"$ref":"#/definitions/Frame","description":"命中意图回复"},"locked":{"description":"技能是否锁定。","type":"boolean"},"related_intenions":{"description":"相关意图信息。","items":{"$ref":"#/definitions/RelatedIntention","description":""},"type":"array"},"skill_id":{"description":"技能ID。","type":"string"},"skill_version":{"description":"技能模型版本。","type":"string"}},"required":["candidate","frame","locked","related_intenions","skill_id","skill_version"]},"SlotValue":{"description":"","properties":{"begin_position":{"description":"词的起始位置。","format":"int32","type":"integer"},"end_position":{"description":"词的结束位置。","format":"int32","type":"integer"},"norm_word":{"description":"归一化后的标准词。","type":"string"},"word":{"description":"词。","type":"string"}},"required":["begin_position","end_position","norm_word","word"]},"Tag":{"description":"","properties":{"should":{"description":"必须要包含其中之一的答案标签id列表","items":{"description":"","type":"string"},"type":"array"}}},"TaskBotAnswers":{"description":"","properties":{"answer":{"description":"答案。","type":"string"},"skill_id":{"description":"技能ID。","type":"string"},"skill_responses":{"description":"技能回复信息。","items":{"$ref":"#/definitions/SkillResponse","description":""},"type":"array"}},"required":["answer","skill_id","skill_responses"]}},"description":null,"group_id":"afdd5824ea9744af89d9deb2587e3541","host":"cbs-ext.cn-north-4.myhuaweicloud.com","id":"07c5caf8c797479e964fd973065e1f09","info_version":"v1","method":"post","name":"ExecuteSession","parameters":{},"paths":{"/v1/{project_id}/qabots/{qabot_id}/sessions/{session_id}":{"post":{"consumes":[],"deprecated":true,"description":"问答会话API由开启会话、处理会话、关闭会话三个接口组成。用户可通过调用该接口与机器人进行会话。该接口即将下线,请优先使用问答机器人API接口进行调用。","operationId":"ExecuteSession","parameters":[{"description":"来自公有云的Project ID,用于资源隔离。获取方式请参见获取项目编码。","in":"path","name":"project_id","required":true,"type":"string","x-order":1},{"description":"机器人标识符。","in":"path","name":"qabot_id","required":true,"type":"string","x-order":2},{"description":"用户Token。\n\n通过调用IAM服务获取用户Token接口获取(响应消息头中X-Subject-Token的值)。","in":"header","name":"X-Auth-Token","required":true,"type":"string","x-order":3},{"description":"会话标识符。","in":"path","name":"session_id","required":true,"type":"string","x-order":4},{"description":"请求体。","in":"body","name":"body","required":true,"schema":{"$ref":"#/definitions/PostQaSessionReq"},"x-order":5}],"produces":[],"responses":{"200":{"description":"OK","examples":{"application/json":{"qabot_answers":{"answers":[{"answer":"桌面云打不开了","domain":"桌面云","qa_pair_id":"305cd440-ab4f-4704-9b30-ffa4e82a5606","score":1,"st_question":"桌面云打不开"}],"request_id":"0a1b12ad-8448-4c95-8c13-fb199762f4511583841605901"},"reply_type":0},"application/json-1":{"reply_type":1,"taskbot_answers":{"answer":"请问您需要查询哪里的天气?","log_id":"ac0b79d1-b92e-47fe-84b5-3d3eed83b8c1","skill_id":"b7b16fc3-0946-46f7-8c70-b954b4fdb736","skill_responses":[{"candidate":{"candidate_confidence":0},"frame":{"candidate_words":[],"confidence":0.9339861716638148,"current_slots":[],"history_slots":[],"intention":"weather_query","reply":"请问您需要查询哪里的天气?","task_complete":false},"skill_id":"b7b16fc3-0946-46f7-8c70-b954b4fdb736","skill_version":"v8"},{"candidate":{"candidate_confidence":0},"frame":{"candidate_words":[],"confidence":0,"current_slots":[],"history_slots":[],"reply":"对不起,我没明白,请再多教我一些吧","task_complete":true},"skill_id":"9eece064-bdb5-43cb-8e0f-8c19a929e25c","skill_version":"v13"}]}},"application/json-2":{"chat_answers":{"answer":"美好的一天祝您一切顺利"},"reply_type":2}},"schema":{"$ref":"#/definitions/PostQaSessionResp"}},"400":{"description":"Bad Request","examples":{"application/json":{"error_code":"CBS.0011","error_msg":"auth failed"}},"schema":{"$ref":"#/definitions/ErrorResp"}}},"summary":"处理会话","tags":["问答会话"],"x-apiexplorer-hide":"N","x-constraint":"","x-is-registered":"Y","x-name":"处理会话","x-open-region-cloud":"hc","x-order":7,"x-publishpath":"","x-request-examples-1":{"question":"桌面云打不开了"},"x-request-examples-description-1":"","x-request-examples-text-1":"{\n    \"question\": \"桌面云打不开了\"\n}","x-request-examples-url-1":"https://{endpoint}/v1/{project_id}/qabots/{qabot_id}/sessions/{session_id}","x-scope":"Deprecated","x-support-sdk":"Y"}}},"product_short":"CBS","region_id":"cn-north-4","schemes":["HTTPS"],"security_definitions":null,"summary":"处理会话","tags":"问答会话","uri":null,"version":"2.0"}