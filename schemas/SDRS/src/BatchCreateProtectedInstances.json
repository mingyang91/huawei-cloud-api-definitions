{"base_path":"/","components":null,"consumes":"[\"application/json;charset=UTF-8\"]","definitions":{"BatchCreateProtectedInstancesRequestBody":{"description":"批量创建保护实例请求数据接口","properties":{"protected_instances":{"$ref":"#/definitions/BatchCreateProtectedInstancesRequestParams","description":"保护实例信息"}},"required":["protected_instances"]},"BatchCreateProtectedInstancesRequestParams":{"description":"批量创建保护实例请求数据接口","properties":{"cluster_id":{"description":"专属分布式存储池ID。当容灾站点磁盘选择专属分布式存储时指定该字段。","type":"string"},"dedicated_host_id":{"description":"专属主机id,此属性仅在tenancy值为dedicated时有效。若不指定此属性,系统将自动分配租户可以自动放置弹性云服务器的专属主机。","type":"string"},"description":{"description":"保护实例的描述,最大支持长度为64个字符。不能包含左尖括号(<)或右尖括号(>)。","maxLength":64,"minLength":1,"type":"string"},"name_prefix":{"description":"保护实例的名称前缀,批量创建保护实例时,为区分不同保护实例,创建过程中系统会自动在名称后加\"-0001\"的类似标记,故此时名称的长度为[1-59]个字符。只包含中文字符、英文字母(a~z、A~Z)、数字(0~9)、小数点(.)、下划线(_)、中划线(-)。","maxLength":59,"minLength":1,"type":"string","x-ctc":"N","x-hc":"Y","x-hk":"Y","x-is_admin":"False","x-is_inner_param":"False","x-obc":"Y","x-otc":"Y","x-tlf":"N"},"primary_subnet_id":{"description":"容灾站点云服务器主网卡所在的子网subnetID,与neutron_network_id字段值一致。","type":"string"},"server_group_id":{"description":"需要加入的保护组ID。","type":"string"},"servers":{"description":"用于创建保护实例的云服务器信息列表。","items":{"$ref":"#/definitions/ServerInfo"},"type":"array"},"tags":{"description":"标签列表。","items":{"$ref":"#/definitions/ResourceTag"},"type":"array"},"tenancy":{"default":"shared","description":"在专属主机或共享池中创建容灾站点云服务器,默认为在共享池中创建。值为:shared或dedicated。shared:表示共享池。dedicated:表示专属主机。","enum":["shared","dedicated"],"type":"string"}},"required":["name_prefix","server_group_id","servers"]},"ErrorInfo":{"description":"失败返回信息","properties":{"code":{"description":"错误码","type":"string"},"message":{"description":"错误信息","type":"string"}},"required":["code","message"]},"JobFailResponse":{"description":"Job失败返回","properties":{"error":{"$ref":"#/definitions/ErrorInfo","description":"失败返回结构"}}},"JobSuccessResponse":{"description":"Job成功返回","properties":{"job_id":{"description":"成功返回jobId信息","type":"string"}},"required":["job_id"]},"ResourceTag":{"description":"单个标签资源结构","properties":{"key":{"description":"键。同一资源的key值不能重复。最大长度为36个UNICODE字符。key不能为空,不允许为空字符串。不能包含以下字符:非打印字符ASCII(0-31)特殊字符“*”,“<”,“>”,“\\”,“=”,“,”,“|”,“/”键。不能为空。对于同一资源键值唯一。","type":"string"},"value":{"description":"值。最大长度为43个UNICODE字符。value不能为空,可以为空字符串。不能包含以下字符:非打印字符ASCII(0-31)特殊字符“*”,“<”,“>”,“\\”,“=”,“,”,“|”,“/”。长度不超过43个字符。","type":"string"}},"required":["key","value"]},"ServerInfo":{"description":"批量创建保护实例虚拟机信息","properties":{"flavorRef":{"description":"指定的容灾站点云服务器的flavor ID。","type":"string"},"server_id":{"description":"指定的生产站点云服务器ID。","type":"string"}},"required":["server_id"]}},"description":null,"group_id":"10d28b86a3b24bb2a48fbb2befd68709","host":"sdrs.cn-north-4.myhuaweicloud.com","id":"a58e13016bc54a16a6a50f9638776c82","info_version":"v1","method":"post","name":"BatchCreateProtectedInstances","parameters":{},"paths":{"/v1/{project_id}/protected-instances/batch":{"post":{"consumes":[],"deprecated":false,"description":"典型场景:没有特殊操作场景\n接口功能:批量创建保护实例。保护实例创建完成后,系统默认容灾站点云服务器名称与生产站点云服务器名称相同,但ID不同。","operationId":"BatchCreateProtectedInstances","parameters":[{"description":"项目ID。","in":"path","name":"project_id","required":true,"type":"string","x-order":1},{"description":"批量创建保护实例请求体","in":"body","name":"BatchCreateProtectedInstancesRequestBody","required":true,"schema":{"$ref":"#/definitions/BatchCreateProtectedInstancesRequestBody"},"x-order":2},{"description":"用户Token。通过调用IAM服务获取用户Token接口获取(响应消息头中X-Subject-Token的值)","in":"header","name":"X-Auth-Token","required":true,"type":"string","x-hc":"Y","x-hk":"Y","x-is_admin":"False","x-is_inner_param":"False","x-obc":"Y","x-order":3,"x-otc":"Y"}],"produces":[],"responses":{"202":{"description":"Accepted","examples":{"application/json":{"job_id":"0000000062db92d70162db9d200f00bb"}},"schema":{"$ref":"#/definitions/JobSuccessResponse"}},"400":{"description":"Bad Request","examples":{"application/json":{"error":{"code":"SDRS.1305","message":"Server already used to create a protected instance"}}},"schema":{"$ref":"#/definitions/JobFailResponse"}},"401":{"description":"Unauthorized","schema":{"$ref":"#/definitions/JobFailResponse"}},"403":{"description":"Forbidden","schema":{"$ref":"#/definitions/JobFailResponse"}},"404":{"description":"Not Found","schema":{"$ref":"#/definitions/JobFailResponse"}},"405":{"description":"Method Not Allowed","schema":{"$ref":"#/definitions/JobFailResponse"}},"406":{"description":"Not Acceptable","schema":{"$ref":"#/definitions/JobFailResponse"}},"407":{"description":"Proxy Authentication Required","schema":{"$ref":"#/definitions/JobFailResponse"}},"408":{"description":"Request Timeout","schema":{"$ref":"#/definitions/JobFailResponse"}},"409":{"description":"Conflict","schema":{"$ref":"#/definitions/JobFailResponse"}},"500":{"description":"Internal Server Error","schema":{"$ref":"#/definitions/JobFailResponse"}},"501":{"description":"Not Implemented","schema":{"$ref":"#/definitions/JobFailResponse"}},"502":{"description":"Bad Gateway","schema":{"$ref":"#/definitions/JobFailResponse"}},"503":{"description":"Service Unavailable","schema":{"$ref":"#/definitions/JobFailResponse"}},"504":{"description":"Gateway Timeout","schema":{"$ref":"#/definitions/JobFailResponse"}}},"summary":"批量创建保护实例","tags":["保护实例"],"x-apigateway-auth-type":"","x-apigateway-match-mode":"","x-apigateway-request-type":"","x-call_frequency":"","x-constraint":"接口约束:\n保护组的状态为available或者protected;\n云服务器不能挂载共享云硬盘;\n云服务器不能已经被创建保护实例;\n云服务器必须与保护组在同一个VPC;\n由弹性伸缩组伸缩时所创建的云服务器,在对该云服务器做容灾保护后,当弹性伸缩组缩容时,不支持对该云服务器执行删除操作。\n创建保护实例时,如果生产站点服务器为Windows云服务器且设置为密钥方式登录,请确保生产站点服务器使用的密钥对存在,否则可能导致云平台无法创建容灾站点云服务器,从而导致创建保护实例失败(如果生产站点云服务器对应的密钥对已被删除,请重新创建相同名称的密钥对)。\n创建保护实例时,选择的生产站点云服务器如果加入了企业项目,保护实例创建成功后,容灾站点云服务器不会自动加入企业项目,如有需要请手动将容灾站点云服务器加入到企业项目。\n创建保护实例完成并对生产站点的云服务器做容灾保护后,生产站点云服务器中的“主机名”、“云服务器名称”、“安全组”、“委托”、“云服务器组”、“标签”和“自动恢复”配置项修改不会再自动同步到容灾站点的云服务器上。您可以在控制台页面上手动将这些配置项的修改添加到容灾站点的云服务器上。","x-ctc":"N","x-first_open_time":"2019-07-30","x-flow_control_group":"CreateProtectedInstances","x-hc":"Y","x-hk":"Y","x-hybridcloud":false,"x-in_cli":"","x-is_calling":"Y","x-is_registered":"Y","x-multi_tenant_flow_time":1,"x-multi_tenant_flow_value":600,"x-name":"批量创建保护实例","x-obc":"Y","x-order":14,"x-otc":"Y","x-publishpath":"","x-request-examples-1":{"protected_instances":{"description":"my description","name_prefix":"test_protected_instance_name","primary_subnet_id":"a32217fh-3413-c313-6342-3124d3491502","server_group_id":"523ab8ad-3759-4933-9436-4cf4ebb20867","servers":[{"flavorRef":"c3.medium.2","server_id":"403b603d-1d91-42cc-a357-81f3c2daf43f"},{"server_id":"8f5dd226-6cc0-4fe8-9786-b8b3359b234b"}],"tags":[{"key":"test","value":"aaaaa"}]}},"x-request-examples-description-1":"","x-request-examples-text-1":"{\n\t\"protected_instances\": {\n\t\t\"name_prefix\": \"test_protected_instance_name\",\n\t\t\"description\": \"my description\",\n\t\t\"server_group_id\": \"523ab8ad-3759-4933-9436-4cf4ebb20867\",\n\t\t\"primary_subnet_id\": \"a32217fh-3413-c313-6342-3124d3491502\",\n\t\t\"servers\": [{\n\t\t\t\"server_id\": \"403b603d-1d91-42cc-a357-81f3c2daf43f\",\n\t\t\t\"flavorRef\": \"c3.medium.2\"\n\t\t}, {\n\t\t\t\"server_id\": \"8f5dd226-6cc0-4fe8-9786-b8b3359b234b\"\n\t\t}],\n\t\t\"tags\": [{\n\t\t\t\"key\": \"test\",\n\t\t\t\"value\": \"aaaaa\"\n\t\t}]\n\t}\n}\n","x-request-examples-url-1":"POST https://{Endpoint}/v1/{project_id}/protected-instances/batch","x-scope":"Commercial","x-source":"SelfDeveloped","x-source_url":"","x-support-sdk":"Y","x-tenant_flow_time":1,"x-tenant_flow_value":300,"x-timeout":"200s","x-tlf":"N","x-un_cli":"","x-version":"v1"}}},"product_short":"SDRS","region_id":"cn-north-4","schemes":["HTTPS"],"security_definitions":null,"summary":"批量创建保护实例","tags":"保护实例","uri":null,"version":"2.0"}