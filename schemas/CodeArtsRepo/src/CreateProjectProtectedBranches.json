{"base_path":null,"components":{"parameters":{"X-Auth-Token":{"description":"**参数解释:**\n用户Token。 通过调用IAM服务[获取用户Token](https://support.huaweicloud.com/api-iam/iam_30_0001.html)接口获取(响应消息头中X-Subject-Token的值)。\n **约束限制:**\n必传。\n **取值范围:**\n字符串长度不少于1,不超过10万。\n**默认取值:**\n不涉及。","explode":false,"in":"header","name":"X-Auth-Token","required":true,"schema":{"maxLength":100000,"minLength":1,"type":"string"},"style":"simple"},"project_id":{"description":"**参数解释:**\n项目的32位uuid,项目唯一标识,通过[查询项目列表](https://support.huaweicloud.com/api-projectman/ListProjectsV4.html)接口查询项目列表获取。\n**取值范围:**\n字符串长度32。","explode":false,"in":"path","name":"project_id","required":true,"schema":{"maxLength":32,"minLength":32,"type":"string"},"style":"simple"}},"schemas":{"ForceActionEnableDto":{"properties":{"enable":{"description":"**参数解释:**\n强制操作是否开启。","type":"boolean"},"name":{"description":"**参数解释:**\n强制操作名称。\n**取值范围:**\n字符串长度不少于1,不超过1000。","maxLength":1000,"minLength":1,"type":"string"}},"type":"object"},"ProjectProtectedActionResultApiDto":{"properties":{"action":{"description":"**参数解释:**\n事件名称。\n**取值范围:**\n字符串长度不少于1,不超过1000。","maxLength":1000,"minLength":1,"type":"string"},"addition_switchers":{"description":"**参数解释:**\n操作选择列表。","items":{"$ref":"#/components/schemas/ForceActionEnableDto"},"maxItems":1000,"minItems":0,"type":"array"},"enable":{"description":"**参数解释:**\n是否启用。","type":"boolean"},"roles":{"description":"**参数解释:**\n角色列表。","items":{"$ref":"#/components/schemas/RoleBasicDto"},"maxItems":1000,"minItems":0,"type":"array"},"user_teams":{"description":"**参数解释:**\n成员组列表。","items":{"$ref":"#/components/schemas/UserTeamBasicDto"},"maxItems":1000,"minItems":0,"type":"array"},"users":{"description":"**参数解释:**\n用户列表。","items":{"$ref":"#/components/schemas/UserBasicDto"},"maxItems":1000,"minItems":0,"type":"array"}},"type":"object"},"ProjectProtectedBranchApiDto":{"properties":{"actions":{"description":"**参数解释:**\n事件列表。","items":{"$ref":"#/components/schemas/ProjectProtectedActionResultApiDto"},"maxItems":1000,"minItems":0,"type":"array"},"id":{"description":"**参数解释:**\n保护分支唯一标识。","maximum":2147483647,"minimum":1,"type":"integer"},"name":{"description":"**参数解释:**\n保护分支名称\n**取值范围:**\n字符串长度不少于1,不超过1000。","maxLength":1000,"minLength":1,"type":"string"}},"type":"object"},"ProtectedActionBasicApiDto":{"properties":{"action":{"description":"**参数解释:**\n事件名称。\n**取值范围:push 提交,merge 合并**\n字符串长度不少于1,不超过1000。","enum":["push","merge"],"maxLength":1000,"minLength":1,"type":"string"},"addition_switchers":{"description":"**参数解释:**\n操作选择列表。","items":{"$ref":"#/components/schemas/ForceActionEnableDto"},"maxItems":1000,"minItems":0,"type":"array"},"enable":{"description":"**参数解释:**\n是否启用。","type":"boolean"},"related_role_ids":{"description":"**参数解释:**\n关联角色ID列表。\n**约束限制:**\n不涉及。\n**取值范围:**\n不涉及。\n**默认取值:**\n不涉及。","items":{"maxLength":1000,"minLength":1,"type":"string"},"maxItems":1000,"minItems":0,"type":"array"},"user_ids":{"description":"**参数解释:**\n用户ID列表。\n**约束限制:**\n不涉及。\n**取值范围:**\nInteger\n**默认取值:**\n不涉及。","items":{"format":"int32","maximum":2147483647,"minimum":1,"type":"integer"},"maxItems":1000,"minItems":0,"type":"array"},"user_team_ids":{"description":"**参数解释:**\n成员组ID列表。\n**约束限制:**\n不涉及。\n**取值范围:**\n不涉及。\n**默认取值:**\n不涉及。","items":{"format":"int32","maximum":2147483647,"minimum":1,"type":"integer"},"maxItems":1000,"minItems":0,"type":"array"}},"type":"object"},"ProtectedBranchBodyApiDto":{"properties":{"actions":{"description":"**参数解释:**\n事件列表。","items":{"$ref":"#/components/schemas/ProtectedActionBasicApiDto"},"maxItems":1000,"minItems":0,"type":"array"},"name":{"description":"**参数解释:**\n保护分支名称。\n**取值范围**\n字符串长度不少于1,不超过1000。","maxLength":1000,"minLength":1,"type":"string"}},"required":["name"],"type":"object"},"RoleBasicDto":{"properties":{"chinese_name":{"description":"**参数解释:**\n角色中文名称。\n**取值范围:**\n字符串长度不少于1,不超过1000。","maxLength":1000,"minLength":1,"type":"string"},"id":{"description":"**参数解释:**\n角色唯一标识。","maximum":2147483647,"minimum":1,"type":"integer"},"name":{"description":"**参数解释:**\n角色名称。\n**取值范围:**\n字符串长度不少于1,不超过1000。","maxLength":1000,"minLength":1,"type":"string"},"related_role_id":{"description":"**参数解释:**\n角色id。\n**取值范围:**\n字符串长度不少于1,不超过1000。","maxLength":1000,"minLength":1,"type":"string"}},"type":"object"},"UserBasicDto":{"allOf":[{"$ref":"#/components/schemas/UserSafeDto"},{"properties":{"avatar_path":{"description":"用户头像路径","type":"string"},"avatar_url":{"description":"用户头像url","type":"string"},"email":{"description":"用户邮箱","type":"string"},"error_message":{"description":"**参数解释:**\n部分查询接口校验到传参里的用户权限不足或不存在时,返回该用户但该字段不为空用于提示。","type":"string"},"name_cn":{"description":"用户中文名称","type":"string"},"nick_name":{"description":"用户昵称","type":"string"},"service_license_status":{"description":"服务级权限状态 0:停用 1:启用","type":"integer"},"state":{"description":"**参数解释:**\n用户状态。\n**取值范围:**\n- active: 可用账户。\n- blocked: 被锁定用户。\n- error: 未查询到该用户。","enum":["active","blocked","error"],"type":"string"},"tenant_name":{"description":"租户名称","type":"string"},"web_url":{"description":"用户个人首页","type":"string"}}}],"description":"用户信息","type":"object"},"UserSafeDto":{"description":"**参数解释:**\n用户基础信息。","properties":{"id":{"description":"**参数解释:**\n用户id。","format":"int32","maximum":2147483647,"minimum":1,"type":"integer"},"name":{"description":"**参数解释:**\n用户名称。","maxLength":255,"minLength":1,"type":"string"},"username":{"description":"**参数解释:**\n用户名。","maxLength":255,"minLength":1,"type":"string"}},"type":"object"},"UserTeamBasicDto":{"properties":{"id":{"description":"**参数解释:**\n用户组ID。\n**取值范围:**\n1-2147483647","readOnly":true,"type":"integer"},"name":{"description":"**参数解释:**\n用户组名称。\n**取值范围:**\n不涉及。","readOnly":true,"type":"string"}},"type":"object"}}},"consumes":"","definitions":null,"description":null,"group_id":"925c097b283b4428b3be97ce59d6d8f3","host":"codehub-ext.cn-north-4.myhuaweicloud.com","id":"b4bef8211dcf4eddab69a3b90f0c88a5","info_version":"v4","method":"post","name":"CreateProjectProtectedBranches","parameters":null,"paths":{"/v4/projects/{project_id}/protected-branches":{"post":{"description":"创建项目下保护分支","operationId":"CreateProjectProtectedBranches","parameters":[{"$ref":"#/components/parameters/X-Auth-Token"},{"$ref":"#/components/parameters/project_id"}],"requestBody":{"content":{"application/json":{"example":{"actions":[{"action":"push","enable":true,"related_role_ids":["6115a3ddd9044e288c558d1ae827a732","8425999e92974f2980b76b08ad423aa1","f2464b129b064a6a988734a73c3f366b","24f72d0b611746c3a43da596ea5065f5"],"user_ids":[9124],"user_team_ids":[247]},{"action":"merge","enable":true,"related_role_ids":["Administrator","8425999e92974f2980b76b08ad423aa1","f2464b129b064a6a988734a73c3f366b","24f72d0b611746c3a43da596ea5065f5"],"user_ids":[9124],"user_team_ids":[247]}]},"schema":{"$ref":"#/components/schemas/ProtectedBranchBodyApiDto"}}},"description":"创建项目下保护分支","required":true},"responses":{"200":{"content":{"application/json":{"example":{"actions":[{"action":"push","addition_switchers":[{"enable":false,"name":"allowed_force_push"}],"enable":true,"roles":[{"chinese_name":"管理员","id":35471438,"name":"Administrator","related_role_id":"e134545ad4724ea0b77a00a0fec5cd4c"}],"user_teams":[{"id":312,"name":"team1"}],"users":[{"avatar_path":null,"avatar_url":null,"email":null,"error_message":null,"id":9087,"name":"test11","name_cn":null,"nick_name":"","state":"blocked","tenant_name":"devcloud_codehub_l00314597_01","username":"04ef19ad5eaf4b8c9cf2451d3536202d","web_url":null}]},{"action":"merge","addition_switchers":null,"enable":true,"roles":[],"user_teams":[],"users":[]}],"id":260,"name":"212"},"schema":{"$ref":"#/components/schemas/ProjectProtectedBranchApiDto"}}},"description":"项目下保护分支详情"}},"summary":"创建项目下保护分支","tags":["ProtectedBranch"],"x-api-framework":"RestfulAPI","x-api-highrisk":"N","x-api-position":"Region_ZONE","x-api-type":"open-api","x-api-user":"IAM_User","x-is-registered":"Y","x-open-region-cloud":"hws,hws_hk,hws_eu","x-request-examples-1":{"actions":[{"action":"push","enable":true,"related_role_ids":["6115a3ddd9044e288c558d1ae827a732","8425999e92974f2980b76b08ad423aa1","f2464b129b064a6a988734a73c3f366b","24f72d0b611746c3a43da596ea5065f5"],"user_ids":[9124],"user_team_ids":[247]},{"action":"merge","enable":true,"related_role_ids":["Administrator","8425999e92974f2980b76b08ad423aa1","f2464b129b064a6a988734a73c3f366b","24f72d0b611746c3a43da596ea5065f5"],"user_ids":[9124],"user_team_ids":[247]}],"name":"212"},"x-request-examples-description-1":"创建项目下保护分支","x-request-examples-text-1":{"actions":[{"action":"push","enable":true,"related_role_ids":["6115a3ddd9044e288c558d1ae827a732","8425999e92974f2980b76b08ad423aa1","f2464b129b064a6a988734a73c3f366b","24f72d0b611746c3a43da596ea5065f5"],"user_ids":[9124],"user_team_ids":[247]},{"action":"merge","enable":true,"related_role_ids":["Administrator","8425999e92974f2980b76b08ad423aa1","f2464b129b064a6a988734a73c3f366b","24f72d0b611746c3a43da596ea5065f5"],"user_ids":[9124],"user_team_ids":[247]}],"name":"212"},"x-request-examples-url-1":"POST https://{endpoint}/v4/projects/3132f98fb2c44430ba68f356af3a8e0d/protected-branche","x-sec-auditlog":"N","x-sec-upload-download":0,"x-support-sdk":"Y"}}},"product_short":"CodeArtsRepo","region_id":"cn-north-4","schemes":["HTTPS"],"security_definitions":null,"summary":"创建项目下保护分支","tags":"ProtectedBranch","uri":null,"version":"3.0.1"}