{"base_path":null,"components":{"parameters":{"AuthToken":{"description":"租户token","in":"header","name":"X-Auth-Token","required":false,"schema":{"maxLength":65534,"minLength":0,"type":"string"}}},"responses":{"BadRequestResponse":{"content":{"application/json":{"example":{"error_code":"common.01000001","error_msg":"failed to read http request, please check your input, code: 400, reason: Type mismatch., cause: TypeMismatchException"},"schema":{"$ref":"#/components/schemas/ErrorMessage"}}},"description":"Bad request error"},"ForbiddenResponse":{"content":{"application/json":{"example":{"error":{"code":"403","message":"X-Auth-Token is invalid in the request","title":"Forbidden"},"error_code":403,"error_msg":"X-Auth-Token is invalid in the request","title":"Forbidden"}}},"description":"Forbidden error"},"GetAgencyResponse":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/AgencyBody"}}},"description":"查询委托响应体"},"InternalErrorResponse":{"content":{"application/json":{"example":{"error_code":"common.00000500","error_msg":"internal error"},"schema":{"$ref":"#/components/schemas/ErrorMessage"}}},"description":"Internal error"},"NotFoundResponse":{"content":{"application/json":{"example":{"error_code":"common.01000001","error_msg":"response status exception, code: 404"},"schema":{"$ref":"#/components/schemas/ErrorMessage"}}},"description":"Not found error"},"RequestTimeoutResponse":{"content":{"application/json":{"example":{"error_code":"common.00000408","error_msg":"timeout exception occurred"},"schema":{"$ref":"#/components/schemas/ErrorMessage"}}},"description":"Request timeout error"},"UnauthorizedResponse":{"content":{"application/json":{"example":{"error_code":"APIG.1002","error_msg":"Incorrect token or token resolution failed"},"schema":{"$ref":"#/components/schemas/ErrorMessage"}}},"description":"Unauthorized error"}},"schemas":{"AgencyBody":{"description":"查询委托结果","properties":{"agency_name":{"description":"委托名称","example":"admin_trust","maxLength":128,"minLength":1,"type":"string"},"agency_policies":{"description":"委托策略列表。","items":{"$ref":"#/components/schemas/AgencyPolicy"},"maxItems":100,"minItems":1,"type":"array"},"authorized":{"description":"授权与否。如果用户的服务委托权限包含系统所需要的委托权限返回true,否则返回false。","example":true,"type":"boolean"}},"required":["agency_name","authorized","agency_policies"],"type":"object"},"AgencyPolicy":{"description":"委托中授权的权限策略","properties":{"actions":{"description":"权限列表","example":["lakeformation:instance:show"],"items":{"example":"lakeformation:instance:show","maxLength":128,"minLength":0,"type":"string"},"maxItems":1000,"minItems":0,"type":"array"},"description":{"description":"策略描述","example":"使用Fabric过程中需要获取一些必要的权限","maxLength":128,"minLength":0,"type":"string"},"is_enable":{"description":"是否已开启。","example":true,"type":"boolean"},"is_required":{"description":"是否是必需的。","example":false,"type":"boolean"},"policy_type":{"description":"权限类型列表,使用Fabric的功能,可能需要授权一些权限策略,可以在policy_types中加入策略类型来授权权限。FABRIC_COMMON_POLICY:基础通用服务相关权限策略,是委托必需的权限策略;FABRIC_SMN_POLICY:消息通知功能相关权限策略,用来将系统通知消息转发到SMN;FABRIC_LAKEFORMATION_POLICY:LakeFormation功能相关权限策略;FABRIC_AOM_POLICY:AOM功能相关权限策略。","enum":["FABRIC_COMMON_POLICY","FABRIC_SMN_POLICY","FABRIC_LAKEFORMATION_POLICY","FABRIC_AOM_POLICY"],"example":"FABRIC_COMMON_POLICY","maxLength":128,"minLength":0,"type":"string"}},"required":["policy_type","is_required","is_enable","actions","description"],"type":"object"},"ErrorMessage":{"description":"失败时返回的错误对象","properties":{"error_code":{"description":"错误码","maxLength":36,"minLength":8,"type":"string"},"error_msg":{"description":"错误描述","maxLength":512,"minLength":2,"type":"string"},"solution_msg":{"description":"解决方案描述","maxLength":4096,"minLength":0,"type":"string"}},"required":["error_code","error_msg"],"type":"object"}}},"consumes":"","definitions":null,"description":null,"group_id":"f38f5f71f3f949409a5d2e01306df7ba","host":"fabric.cn-north-4.myhuaweicloud.com","id":"10a546ba21ee412594198f5382039ba4","info_version":"v1","method":"get","name":"ListAgency","parameters":null,"paths":{"/v1/agency":{"get":{"description":"查询用用户服务委托详情是否满足系统所需权限。","operationId":"ListAgency","parameters":[{"$ref":"#/components/parameters/AuthToken"},{"description":"策略类型。支持模糊匹配","in":"query","name":"policy_type","required":false,"schema":{"example":"FABRIC_LAKEFORMATION_POLICY","maxLength":64,"minLength":0,"type":"string"}}],"responses":{"200":{"$ref":"#/components/responses/GetAgencyResponse"},"400":{"$ref":"#/components/responses/BadRequestResponse"},"401":{"$ref":"#/components/responses/UnauthorizedResponse"},"403":{"$ref":"#/components/responses/ForbiddenResponse"},"404":{"$ref":"#/components/responses/NotFoundResponse"},"408":{"$ref":"#/components/responses/RequestTimeoutResponse"},"500":{"$ref":"#/components/responses/InternalErrorResponse"}},"summary":"查询服务委托","tags":["Agency"],"x-apiexplorer-hide":"N","x-apigw-publish":"Y","x-enable-auth-anno":{"type":"iam-token"},"x-iam-auth-meta-anno":{"abacAction":"","authContextInitializerName":"defaultIamAuthContextInitializer","authLevel":"TOKEN","model":"v5-pkitoken","needAbacCheck":false,"needApigwJwtAuthCheck":true,"needCbcCheck":false,"needRbacCheck":false,"needResourceTagCheck":false,"rbac":"te_admin"},"x-is-registered":"Y","x-openapi-hide":"N","x-support-sdk":"Y"}}},"product_short":"DataArtsFabric","region_id":"cn-north-4","schemes":["HTTPS"],"security_definitions":null,"summary":"查询服务委托","tags":"Agency","uri":null,"version":"3.0.3"}