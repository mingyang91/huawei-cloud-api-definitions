{"base_path":null,"components":{"headers":{"RequestId":{"description":"Header field of the request ID number for task tracking. Format: request_uuid-timestamp-hostname.","schema":{"type":"string"}}},"parameters":{"AuthToken":{"description":"租户token","in":"header","name":"X-Auth-Token","required":false,"schema":{"maxLength":65534,"minLength":0,"type":"string"}},"EndpointId":{"description":"Endpoint的ID","in":"path","name":"endpoint_id","required":true,"schema":{"example":"0b5633ba2b904511ad514346f4d23d4b","pattern":"^[0-9a-zA-Z-]{1,36}$","type":"string"}},"WorkspaceId":{"description":"Workspace的ID","in":"path","name":"workspace_id","required":true,"schema":{"example":"0b5633ba2b904511ad514346f4d23d4b","pattern":"^[0-9a-zA-Z-]{1,36}$","type":"string"}}},"responses":{"BadRequestResponse":{"content":{"application/json":{"example":{"error_code":"common.01000001","error_msg":"failed to read http request, please check your input, code: 400, reason: Type mismatch., cause: TypeMismatchException"},"schema":{"$ref":"#/components/schemas/ErrorMessage"}}},"description":"Bad request error"},"ForbiddenResponse":{"content":{"application/json":{"example":{"error":{"code":"403","message":"X-Auth-Token is invalid in the request","title":"Forbidden"},"error_code":403,"error_msg":"X-Auth-Token is invalid in the request","title":"Forbidden"}}},"description":"Forbidden error"},"InternalErrorResponse":{"content":{"application/json":{"example":{"error_code":"common.00000500","error_msg":"internal error"},"schema":{"$ref":"#/components/schemas/ErrorMessage"}}},"description":"Internal error"},"RequestTimeoutResponse":{"content":{"application/json":{"example":{"error_code":"common.00000408","error_msg":"timeout exception occurred"},"schema":{"$ref":"#/components/schemas/ErrorMessage"}}},"description":"Request timeout error"},"ShowEndpoint":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/EndpointInfo"}}},"description":"查询endpioint详情的响应","headers":{"X-request-id":{"$ref":"#/components/headers/RequestId"}}},"UnauthorizedResponse":{"content":{"application/json":{"example":{"error_code":"APIG.1002","error_msg":"Incorrect token or token resolution failed"},"schema":{"$ref":"#/components/schemas/ErrorMessage"}}},"description":"Unauthorized error"}},"schemas":{"CapId":{"description":"CapId,32~36位的英文、数字、短横组合","example":"0b5633ba2b904511ad514346f4d23d4b","pattern":"^[0-9a-zA-Z-]{32,36}$","type":"string"},"CapRef":{"description":"CAP信息","properties":{"cap_id":{"$ref":"#/components/schemas/CapId"},"version_id":{"$ref":"#/components/schemas/CapVersionId"}},"type":"object"},"CapVersionId":{"description":"CapVersionId,32~36位的英文、数字、短横组合","example":"0b5633ba2b904511ad514346f4d23d4b","pattern":"^[0-9a-zA-Z-]{32,36}$","type":"string"},"CreateTime":{"description":"创建时间","example":"2023-05-30T12:24:30.401Z","format":"date-time","type":"string"},"Description":{"description":"描述信息","example":"description","maxLength":1024,"minLength":0,"pattern":"^[^!<>=&\"']*$","properties":{},"type":"string"},"EndpointBriefInfo":{"allOf":[{"$ref":"#/components/schemas/VisibilityBody"},{"properties":{"cap":{"$ref":"#/components/schemas/CapRef"},"create_time":{"$ref":"#/components/schemas/CreateTime"},"description":{"$ref":"#/components/schemas/ResourceDescription"},"error_code":{"description":"失败状态时的错误编码","maxLength":36,"minLength":0,"type":"string"},"error_msg":{"description":"失败状态时的错误信息","maxLength":1024,"minLength":0,"type":"string"},"id":{"$ref":"#/components/schemas/EndpointId"},"name":{"$ref":"#/components/schemas/EndpointName"},"owner":{"$ref":"#/components/schemas/User"},"ray_resource":{"$ref":"#/components/schemas/RayResourceInfo"},"reserved_resource":{"$ref":"#/components/schemas/ReservedResource"},"status":{"$ref":"#/components/schemas/EndpointStatus"},"type":{"$ref":"#/components/schemas/EndpointType"},"update_time":{"$ref":"#/components/schemas/UpdateTime"}},"required":["id","name","type","status","create_time","update_time","owner"],"type":"object"}],"description":"Endpoint简要信息"},"EndpointId":{"description":"Endpoint Id,32~36位的英文、数字、短横组合。","example":"0b5633ba2b904511ad514346f4d23d4b","pattern":"^[0-9a-zA-Z-]{32,36}$","type":"string"},"EndpointInfo":{"allOf":[{"$ref":"#/components/schemas/EndpointBriefInfo"},{"properties":{"business_engine_instance_ids":{"description":"引擎实例id列表","items":{"maxLength":36,"minLength":1,"type":"string"},"maxItems":2,"minItems":0,"type":"array"},"log_config":{"$ref":"#/components/schemas/LogConfigInfo"},"urls":{"description":"调用地址","items":{"$ref":"#/components/schemas/Url"},"maxItems":100,"minItems":0,"type":"array"}},"type":"object"}],"description":"Endpoint详细信息"},"EndpointName":{"description":"一个Endpoint名称,只能包含中文、字母、数字、下划线、中划线、点、空格","example":"endpoint1","maxLength":128,"minLength":1,"pattern":"^[a-zA-Z0-9.\\u4e00-\\u9fa5_\\-\\ ]*$","type":"string"},"EndpointStatus":{"description":"状态。可选值如下:\nCREATING:创建中\nRUNNING:运行中\nCREATE_FAILED:创建失败\nDELETING:删除中\nDELETED:已删除\nUPDATING: 更新中\nUPDATE_FAILED:升级失败\nDELETE_FAILED:创建失败\nFROZEN:冻结\nINACTIVE:未开通(公共EP)","enum":["CREATING","RUNNING","CREATE_FAILED","DELETING","DELETED","UPDATING","UPDATE_FAILED","DELETE_FAILED","FROZEN","INACTIVE"],"properties":{},"type":"string"},"EndpointType":{"description":"Endpoint的类型\n - service:Service EP,代表一个可接收Service请求资源组\n - ray:Ray on k8s的EP,代表一个Ray集群\n - inference:推理的EP,代表一个推理函数实例\n - job:Job EP,代表一个可接收Job请求资源组","enum":["service","ray","inference","job"],"example":"job","properties":{},"type":"string"},"ErrorMessage":{"description":"失败时返回的错误对象","properties":{"error_code":{"description":"错误码","maxLength":36,"minLength":8,"type":"string"},"error_msg":{"description":"错误描述","maxLength":512,"minLength":2,"type":"string"},"solution_msg":{"description":"解决方案描述","maxLength":4096,"minLength":0,"type":"string"}},"required":["error_code","error_msg"],"type":"object"},"HeadGroupSpec":{"description":"Ray Head配置","properties":{"spec_code":{"$ref":"#/components/schemas/SpecCode"}},"type":"object"},"HeadNodeResourceDemand":{"description":"headNode资源需求量配置","properties":{"spec_code":{"$ref":"#/components/schemas/SpecCode"}},"required":["spec_code"],"type":"object"},"LogConfig":{"description":"Ray日志配置","properties":{"enable_lts_log":{"description":"是否开启日志并记录到LTS,默认不开启","example":"","type":"boolean"},"enable_obs_log":{"default":false,"description":"是否开启日志转储到OBS,默认不开启\n开启的时候需要先开启日志记录到LTS,否则无法开启。","type":"boolean"},"obs_path":{"description":"日志存储的OBS路径","maxLength":1024,"minLength":0,"type":"string"}},"type":"object"},"LogConfigInfo":{"allOf":[{"$ref":"#/components/schemas/LogConfig"},{"properties":{"log_group_id":{"description":"日志组ID","maxLength":36,"minLength":32,"type":"string"},"log_streams":{"description":"日志流ID集合","items":{"$ref":"#/components/schemas/LogStream"},"maxItems":100,"minItems":1,"type":"array"}},"type":"object"}],"description":"日志配置的详细信息"},"LogStream":{"description":"日志流信息","properties":{"log_stream_id":{"description":"日志流ID","maxLength":36,"minLength":32,"type":"string"},"log_stream_name":{"description":"日志流名称","maxLength":128,"minLength":1,"type":"string"}},"type":"object"},"RayResource":{"description":"Ray资源配置","properties":{"head_group_spec":{"$ref":"#/components/schemas/HeadGroupSpec"},"worker_group_spec":{"description":"Ray worker group配置","items":{"$ref":"#/components/schemas/WorkerGroupSpec"},"maxItems":10,"minItems":1,"type":"array"}},"type":"object"},"RayResourceInfo":{"allOf":[{"$ref":"#/components/schemas/RayResource"}],"description":"Ray资源配置"},"RayResourceInput":{"description":"创建ray集群的资源配置","properties":{"head_node_resource":{"$ref":"#/components/schemas/HeadNodeResourceDemand"},"work_node_resources":{"description":"工作节点资源配置","items":{"$ref":"#/components/schemas/WorkNodeResourceDemand"},"maxItems":10,"minItems":1,"type":"array"}},"required":["head_node_resource","work_node_resources"],"type":"object"},"ReservedResource":{"description":"通用预留资源","properties":{"apu":{"$ref":"#/components/schemas/ResourceDef"},"dpu":{"$ref":"#/components/schemas/ResourceDef"},"mu":{"$ref":"#/components/schemas/ResourceDemand"}},"type":"object"},"ResourceDef":{"properties":{"max_num":{"description":"最大资源量,不填默认为预热资源量,即不使用弹性资源","example":100,"format":"int32","maximum":1000,"minimum":1,"type":"integer"},"spec_code":{"description":"资源规格编码,从查询规格列表ListSpecs接口获取","example":"dpu.d1x","pattern":"^[0-9a-zA-Z.]{1,40}$","type":"string"},"warm_up_num":{"description":"预热资源量","example":1,"format":"int32","maximum":1000,"minimum":1,"type":"integer"}},"required":["spec_code","warm_up_num"],"type":"object"},"ResourceDemand":{"description":"资源需求量配置","properties":{"max":{"description":"最大数","format":"int32","minimum":1,"type":"integer"},"min":{"description":"最小数","format":"int32","minimum":0,"type":"integer"},"spec_code":{"$ref":"#/components/schemas/SpecCode"}},"required":["spec_code","min","max"],"type":"object"},"ResourceDescription":{"description":"描述信息","example":"description","maxLength":1000,"pattern":"^[^!<>=&\"']*$","type":"string"},"SpecCode":{"description":"资源规格,从规格列表查询获取。","maxLength":64,"minLength":1,"type":"string"},"UpdateEndpointRequestBody":{"properties":{"cap":{"$ref":"#/components/schemas/CapRef"},"description":{"$ref":"#/components/schemas/Description"},"name":{"$ref":"#/components/schemas/EndpointName"},"ray_resource":{"$ref":"#/components/schemas/RayResourceInput"},"reserved_resource":{"$ref":"#/components/schemas/ReservedResource"}},"type":"object"},"UpdateTime":{"description":"更新时间","example":"2023-05-30T12:24:30.401Z","format":"date-time","type":"string"},"Url":{"description":"Url信息","properties":{"address":{"description":"Url地址","pattern":"^[^!<>=&\"']{0,1024}$","type":"string"},"name":{"description":"Url名称,其中ApiInvoke表示endpoint相关功能restful接口,其他名称的意义可以从cap信息中获取","pattern":"^[^!<>=&\"']{1,64}$","type":"string"},"token":{"description":"Token","pattern":"^[^!<>=&\"']{0,10240}$","type":"string"},"type":{"description":"类型,PUBLIC为公网地址,PRIVATE为内网地址","enum":["PRIVATE","PUBLIC"],"type":"string"}},"type":"object"},"User":{"description":"租户信息","properties":{"domain_id":{"description":"账号ID","example":"0b5633ba2b904511ad514346f4d23d4b","pattern":"^[0-9a-zA-Z-]{1,36}$","type":"string"},"domain_name":{"description":"账户名称","maxLength":64,"minLength":0,"type":"string"},"user_id":{"description":"用户ID","example":"0b5633ba2b904511ad514346f4d23d4b","pattern":"^[0-9a-zA-Z-]{1,36}$","type":"string"},"user_name":{"description":"用户名称","maxLength":64,"minLength":0,"type":"string"}},"type":"object"},"VisibilityBody":{"description":"可见性:\n - PRIVATE:私有\n - PUBLIC:公共\n 默认为PRIVATE","properties":{"visibility":{"default":"PRIVATE","description":"可见性:\n - PRIVATE:私有\n - PUBLIC:公共\n 默认为PRIVATE","maxLength":10,"minLength":2,"pattern":"PUBLIC|PRIVATE","type":"string"}},"type":"object"},"WorkNodeResourceDemand":{"description":"ray集群工作节点资源需求量","properties":{"name":{"description":"资源配置名称","example":"cpuGroup1","maxLength":32,"minLength":0,"pattern":"[a-z0-9]([-a-z0-9]*[a-z0-9])?(\\.[a-z0-9]([-a-z0-9]*[a-z0-9])?)*","type":"string"},"resource":{"$ref":"#/components/schemas/ResourceDemand"}},"required":["name","resource"],"type":"object"},"WorkerGroupSpec":{"description":"Ray worker配置信息","properties":{"max_replicas":{"description":"最大副本数","format":"int32","maximum":10000,"minimum":1,"type":"integer"},"min_replicas":{"description":"最小副本数","format":"int32","maximum":10000,"minimum":0,"type":"integer"},"name":{"description":"名称","maxLength":128,"minLength":0,"pattern":"^[a-zA-Z0-9_-]+$","type":"string"},"spec_code":{"$ref":"#/components/schemas/SpecCode"}},"type":"object"}}},"consumes":"","definitions":null,"description":null,"group_id":"f38f5f71f3f949409a5d2e01306df7ba","host":"fabric.cn-north-4.myhuaweicloud.com","id":"c0b02b3b762a4d329a9bc9ef74f9a6c0","info_version":"v1","method":"put","name":"UpdateEndpoint","parameters":null,"paths":{"/v1/workspaces/{workspace_id}/endpoints/{endpoint_id}":{"put":{"description":"修改Endpoint","operationId":"UpdateEndpoint","parameters":[{"$ref":"#/components/parameters/AuthToken"},{"$ref":"#/components/parameters/WorkspaceId"},{"$ref":"#/components/parameters/EndpointId"}],"requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/UpdateEndpointRequestBody"}}},"description":"更新Endpoint的请求体","required":true},"responses":{"202":{"$ref":"#/components/responses/ShowEndpoint"},"400":{"$ref":"#/components/responses/BadRequestResponse"},"401":{"$ref":"#/components/responses/UnauthorizedResponse"},"403":{"$ref":"#/components/responses/ForbiddenResponse"},"408":{"$ref":"#/components/responses/RequestTimeoutResponse"},"500":{"$ref":"#/components/responses/InternalErrorResponse"}},"summary":"修改Endpoint","tags":["Endpoint"],"x-apiexplorer-hide":"N","x-apigw-publish":"Y","x-codegen-request-body-name":"UpdateEndpointRequestBody","x-cts-meta-anno":{"isAsyncApi":"false","resourceType":"endpoint","traceName":"updateEndpoint"},"x-enable-auth-anno":{"type":"iam-token"},"x-iam-auth-meta-anno":{"abacAction":"DataArtsFabric:endpoint:alter","authContextInitializerName":"endpointIamAuthContextInitializer","authLevel":"INSTANCE_LIST","model":"v5-pkitoken","needAbacCheck":true,"needAbacResourceCheck":true,"needApigwJwtAuthCheck":true,"needCbcCheck":true,"needResourceTagCheck":false,"opType":"guessByHttpMethod","rbac":"te_admin","supportAllGrantedEps":false},"x-is-registered":"Y","x-openapi-hide":"N","x-order":3,"x-support-sdk":"Y"}}},"product_short":"DataArtsFabric","region_id":"cn-north-4","schemes":["HTTPS"],"security_definitions":null,"summary":"修改Endpoint","tags":"Endpoint","uri":null,"version":"3.0.3"}