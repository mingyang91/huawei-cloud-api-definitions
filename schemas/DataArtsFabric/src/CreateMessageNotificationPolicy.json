{"base_path":null,"components":{"parameters":{"AuthToken":{"description":"租户token","in":"header","name":"X-Auth-Token","required":false,"schema":{"maxLength":65534,"minLength":0,"type":"string"}},"WorkspaceId":{"description":"Workspace的ID","in":"path","name":"workspace_id","required":true,"schema":{"example":"0b5633ba2b904511ad514346f4d23d4b","pattern":"^[0-9a-zA-Z-]{1,36}$","type":"string"}}},"responses":{"BadRequestResponse":{"content":{"application/json":{"example":{"error_code":"common.01000001","error_msg":"failed to read http request, please check your input, code: 400, reason: Type mismatch., cause: TypeMismatchException"},"schema":{"$ref":"#/components/schemas/ErrorMessage"}}},"description":"Bad request error"},"CreateMessageNotificationPolicyResponse":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/MessageNotificationPolicy"}}},"description":""},"ForbiddenResponse":{"content":{"application/json":{"example":{"error":{"code":"403","message":"X-Auth-Token is invalid in the request","title":"Forbidden"},"error_code":403,"error_msg":"X-Auth-Token is invalid in the request","title":"Forbidden"}}},"description":"Forbidden error"},"InternalErrorResponse":{"content":{"application/json":{"example":{"error_code":"common.00000500","error_msg":"internal error"},"schema":{"$ref":"#/components/schemas/ErrorMessage"}}},"description":"Internal error"},"NotFoundResponse":{"content":{"application/json":{"example":{"error_code":"common.01000001","error_msg":"response status exception, code: 404"},"schema":{"$ref":"#/components/schemas/ErrorMessage"}}},"description":"Not found error"},"RequestTimeoutResponse":{"content":{"application/json":{"example":{"error_code":"common.00000408","error_msg":"timeout exception occurred"},"schema":{"$ref":"#/components/schemas/ErrorMessage"}}},"description":"Request timeout error"},"UnauthorizedResponse":{"content":{"application/json":{"example":{"error_code":"APIG.1002","error_msg":"Incorrect token or token resolution failed"},"schema":{"$ref":"#/components/schemas/ErrorMessage"}}},"description":"Unauthorized error"}},"schemas":{"CreateMessageNotificationPolicy":{"properties":{"message_type":{"description":"消息类型。job:任务执行结果。","enum":["job"],"example":"job","type":"string"},"name_pattern":{"default":"*","description":"名称样式,用来匹配消息类型中所有符合该样式的消息。比如,message_type设置为job,name_pattern设置为ray_job*,表示匹配到所有以\"ray_job\"开头的job发出的消息。","example":"ray_job*","maxLength":1024,"minLength":0,"type":"string"},"notification_types":{"description":"通知类型。SUCCESS:成功通知;FAILED:失败通知","example":"[SUCCESS,FAILED]","items":{"enum":["SUCCESS","FAILED"],"example":"SUCCESS","type":"string"},"maxItems":2,"minItems":1,"type":"array"},"topic_urn":{"description":"消息通知主题。","example":"smn:topic:xxxxxxx","maxLength":1024,"minLength":0,"type":"string"}},"required":["message_type","name_pattern","notification_types","topic_urn"],"type":"object"},"CreateMessageNotificationPolicyRequestBody":{"description":"创建消息通知策略请求体","properties":{"message_notification_policy_list":{"description":"消息通知策略","items":{"$ref":"#/components/schemas/CreateMessageNotificationPolicy"},"maxItems":1000,"minItems":0,"type":"array"}},"required":["message_notification_policy_list"],"type":"object"},"ErrorMessage":{"description":"失败时返回的错误对象","properties":{"error_code":{"description":"错误码","maxLength":36,"minLength":8,"type":"string"},"error_msg":{"description":"错误描述","maxLength":512,"minLength":2,"type":"string"},"solution_msg":{"description":"解决方案描述","maxLength":4096,"minLength":0,"type":"string"}},"required":["error_code","error_msg"],"type":"object"},"MessageNotificationPolicy":{"description":"消息通知策略","properties":{"id":{"description":"id","example":"ray_job_123456789","maxLength":1024,"minLength":0,"type":"string"},"message_type":{"description":"消息类型。job:任务执行结果。","enum":["job"],"example":"job","type":"string"},"name_pattern":{"description":"名称样式,用来匹配消息类型中所有符合该样式的消息。比如,message_type设置为job,name_pattern设置为ray_job*,表示匹配到所有以\"ray_job\"开头的job发出的消息。","example":"ray_job*","maxLength":1024,"minLength":0,"type":"string"},"notification_types":{"description":"通知类型。SUCCESS:成功通知;FAILED:失败通知","example":"[SUCCESS,FAILED]","items":{"enum":["SUCCESS","FAILED"],"example":"SUCCESS","type":"string"},"maxItems":2,"minItems":1,"type":"array"},"topic_urn":{"description":"消息通知主题。","example":"smn:topic:xxxxxxx","maxLength":1024,"minLength":0,"type":"string"}},"required":["id","message_type","name_pattern","notification_types","topic_urn"],"type":"object"}}},"consumes":"","definitions":null,"description":null,"group_id":"f38f5f71f3f949409a5d2e01306df7ba","host":"fabric.cn-north-4.myhuaweicloud.com","id":"8e2468a43280447eb5b875168c56ea90","info_version":"v1","method":"post","name":"CreateMessageNotificationPolicy","parameters":null,"paths":{"/v1/workspaces/{workspace_id}/messages":{"post":{"description":"创建消息通知策略","operationId":"CreateMessageNotificationPolicy","parameters":[{"$ref":"#/components/parameters/WorkspaceId"},{"$ref":"#/components/parameters/AuthToken"}],"requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CreateMessageNotificationPolicyRequestBody"}}},"description":"创建消息通知策略请求体","required":true},"responses":{"200":{"$ref":"#/components/responses/CreateMessageNotificationPolicyResponse"},"400":{"$ref":"#/components/responses/BadRequestResponse"},"401":{"$ref":"#/components/responses/UnauthorizedResponse"},"403":{"$ref":"#/components/responses/ForbiddenResponse"},"404":{"$ref":"#/components/responses/NotFoundResponse"},"408":{"$ref":"#/components/responses/RequestTimeoutResponse"},"500":{"$ref":"#/components/responses/InternalErrorResponse"}},"summary":"创建消息通知策略","tags":["Message"],"x-apiexplorer-hide":"N","x-apigw-publish":"Y","x-cts-meta-anno":{"isAsyncApi":"false","resourceType":"messageNotificationPolicy","traceName":"createMessageNotificationPolicy"},"x-iam-auth-meta-anno":{"abacAction":"DataArtsFabric:workspace:createMessagePolicy","authContextInitializerName":"workspaceIamAuthContextInitializer","authLevel":"INSTANCE","model":"v5-pkitoken","needAbacCheck":true,"needAbacResourceCheck":true,"needApigwJwtAuthCheck":true,"needCbcCheck":true,"needResourceTagCheck":true,"opType":"guessByHttpMethod","rbac":"te_admin","supportAllGrantedEps":false},"x-iam-auth-param-anno":{"instanceId":"workspace_id"},"x-is-registered":"Y","x-openapi-hide":"N","x-support-sdk":"Y"}}},"product_short":"DataArtsFabric","region_id":"cn-north-4","schemes":["HTTPS"],"security_definitions":null,"summary":"创建消息通知策略","tags":"Message","uri":null,"version":"3.0.3"}