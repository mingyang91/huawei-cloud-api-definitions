{"base_path":"/","components":null,"consumes":"[\"application/json\",\"application/json; charset=UTF-8\"]","definitions":{"ErrorResponse":{"properties":{"error_code":{"description":"错误码。\n","type":"string"},"error_msg":{"description":"错误描述。\n","type":"string"}},"type":"object"},"File_addr":{"description":"媒资存储参数信息。","properties":{"bucket":{"description":"OBS的bucket名称。","type":"string"},"location":{"description":"桶所在的区域名, 如“华北-北京四”的区域名为“cn-north-4”,创建的桶所在区域必须和点播服务所在区域保持一致。","type":"string"},"object":{"description":"文件的存储路径。","type":"string"}},"required":["bucket","location","object"]},"PublishAssetFromObsReq":{"allOf":[{"$ref":"#/definitions/VideoTypeRef"},{"properties":{"input":{"$ref":"#/definitions/File_addr"},"output_bucket":{"description":"输出桶名,“**storage_mode**”为1时必选。","type":"string"},"output_path":{"description":"输出路径名,“**storage_mode**”为1时必选。","type":"string"},"storage_mode":{"default":0,"description":"存储模式。\n\n取值如下:\n- 0:表示视频拷贝到点播桶。\n- 1:表示视频存储在租户桶。\n\n默认值:0","type":"integer"}},"required":["input"],"type":"object"}],"description":""},"PublishAssetFromObsRsp":{"properties":{"asset_id":{"description":"媒资ID\n","type":"string"}},"type":"object"},"Review":{"description":"媒资审核参数","properties":{"interval":{"description":"截图检测时间间隔,取值范围为[0,100],该参数在请求参数中忽略。","type":"integer"},"politics":{"description":"鉴政内容检测置信度,取值范围为[0,100],该参数在请求参数中忽略。 置信度越高,说明审核结果越可信。未开启或设置为0时,表示未进行此项检测。","type":"integer"},"porn":{"description":"鉴黄内容的检测置信度,取值范围为[0,100],该参数在请求参数中忽略。 置信度越高,说明审核结果越可信。未开启或设置为0时,表示未进行此项检测。","type":"integer"},"template_id":{"description":"审核模板ID。您可以在视频点播控制台配置审核模板后获取,具体请参见[审核设置](https://support.huaweicloud.com/usermanual-vod/vod_01_0057.html)。","type":"string"},"terrorism":{"description":"鉴恐内容的检测置信度,取值范围为[0,100],该参数在请求参数中忽略。 置信度越高,说明审核结果越可信。未开启或设置为0时,表示未进行此项检测。","type":"integer"}}},"Thumbnail":{"description":"截图参数","properties":{"aspect_ratio":{"default":0,"description":"纵横比,图像缩放方式。\n\n取值如下:\n- 0:自适应(保持原有宽高比)。\n- 1:16:9。\n\n默认值:0。","type":"integer"},"cover_position":{"description":"该值表示指定第几张截图作为封面。\n\n默认值:1。","type":"integer"},"dots":{"description":"**type**取值为dots时必填。指定时间截图时的时间点数组。","items":{"type":"integer"},"type":"array"},"format":{"default":1,"description":"截图文件格式。\n\n取值如下:\n- 1:jpg。\n\n默认值:1 。","type":"integer"},"max_length":{"description":"截图最长边的尺寸。\n\n单位:像素。\n\n宽边尺寸按照该尺寸与原始视频像素等比缩放计算。","type":"integer"},"quantity":{"description":"**type**取值为quantity时必填。 按照指定张数,根据视频时长等分视频截图。\n取值范围:[1,10]之间的整数。","format":"int32","maximum":10,"minimum":1,"type":"integer"},"quantity_time":{"description":"**type**取值为quantity时选填。 按照指定时间间隔取指定张数截图。\n取值范围:[0,2147483647]之间的整数。","format":"int32","maximum":2147483647,"minimum":0,"type":"integer"},"time":{"description":"根据时间间隔采样时的时间间隔值。单位:秒。\n**type**取值为time时。\n默认值:12\n取值范围:[0,100]之间的整数。","format":"int32","maximum":100,"minimum":0,"type":"integer"},"type":{"description":"截图类型。\n\n取值如下:\n- time:每次进行截图的间隔时间。\n- dots: 按照指定的时间点截图。\n- quantity: 按照指定张数,根据视频时长等分视频截图。","enum":["time","dots","quantity"],"type":"string"}},"required":["type"]},"VideoTypeRef":{"properties":{"auto_encrypt":{"default":0,"description":"是否自动加密。\n\n取值如下:\n- 0:表示不加密。\n- 1:表示需要加密。\n\n默认值:0。\n\n若设置为需要加密,则必须配置转码模板,且转码的输出格式是HLS。","format":"int32","maximum":1,"minimum":0,"type":"integer"},"auto_preheat":{"description":"是否自动预热到CDN。\n\n取值如下:\n- 0:表示不自动预热。\n- 1:表示自动预热。\n\n默认值:0。","type":"integer"},"auto_publish":{"default":1,"description":"是否自动发布。\n\n取值如下:\n- 0:表示不自动发布。\n- 1:表示自动发布。\n\n默认值:1。","format":"int32","maximum":1,"minimum":0,"type":"integer"},"category_id":{"description":"媒资分类ID。\n\n您可以调用[创建媒资分类](https://support.huaweicloud.com/api-vod/vod_04_0028.html)接口或在点播控制台的[分类设置](https://support.huaweicloud.com/usermanual-vod/vod010006.html)中创建对应的媒资分类,并获取分类ID。\n\n> 若不设置或者设置为-1,则上传的音视频归类到系统预置的“其它”分类中。","type":"integer"},"description":{"description":"视频描述,长度不超过1024个字节。","maxLength":1024,"type":"string"},"review":{"$ref":"#/definitions/Review"},"tags":{"description":"视频标签。\n\n单个标签不超过16个字节,最多不超过16个标签。\n\n多个用逗号分隔,UTF8编码。","type":"string"},"template_group_name":{"description":"转码模板组名称。\n\n若不为空,则使用指定的转码模板对上传的音视频进行转码,您可以在视频点播控制台配置转码模板,具体请参见[转码设置](https://support.huaweicloud.com/usermanual-vod/vod_01_0072.html)。\n\n>\n若同时设置了“**template_group_name**”和“**workflow_name**”字段,则“**template_group_name**”字段生效。","maxLength":128,"type":"string"},"thumbnail":{"$ref":"#/definitions/Thumbnail"},"title":{"description":"媒资标题,长度不超过128个字节,UTF-8编码。","maxLength":128,"minLength":1,"type":"string"},"video_type":{"description":"转存的音视频文件类型。\n\n取值如下:\n- 视频文件:MP4、TS、MOV、MXF、MPG、FLV、WMV、AVI、M4V、F4V、MPEG、3GP、ASF、MKV、HLS\n- 音频文件:MP3、OGG、WAV、WMA、APE、FLAC、AAC、AC3、MMF、AMR、M4A、M4R、WV、MP2\n\n若上传格式为音频文件,则不支持转码、添加水印和字幕。\n\n> 当**video_type**选择HLS时,**storage_mode**(存储模式)需选择存储在租户桶,且输出路径设置为和输入路径在同一个目录。","enum":["MP4","TS","MOV","MXF","MPG","FLV","WMV","AVI","M4V","F4V","MPEG","3GP","ASF","MKV","HLS","MP3","OGG","WAV","WMA","APE","FLAC","AAC","AC3","MMF","AMR","M4A","M4R","WV","MP2","RMVB","WEBM"],"type":"string"},"workflow_name":{"description":"工作流名称。\n\n若不为空,则使用指定的工作流对上传的音视频进行处理,您可以在视频点播控制台配置工作流,具体请参见[工作流设置](https://support.huaweicloud.com/usermanual-vod/vod010041.html)。","type":"string"}},"required":["video_type","title"]}},"description":null,"group_id":"910d42c390184883b1dac70100139fe5","host":"vod.cn-north-4.myhuaweicloud.com","id":"81bba82052c04c2697f2c845608f393a","info_version":"v1","method":"post","name":"PublishAssetFromObs","parameters":{"xAuthToken":{"description":"用户Token,使用Token鉴权方式时必选。\n\n通过调用IAM服务获取用户Token接口获取(响应消息头中X-Subject-Token的值)。\n","in":"header","maxLength":16384,"minLength":0,"name":"X-Auth-Token","required":false,"type":"string"},"xSdkDate":{"description":"使用AK/SK方式认证时必选,请求的发生时间。\n","in":"header","maxLength":256,"minLength":1,"name":"X-Sdk-Date","required":false,"type":"string","x-example":"20191115T033655Z"}},"paths":{"/v1.0/{project_id}/asset/reproduction":{"post":{"description":"若您在使用点播服务前,已经在OBS桶中存储了音视频文件,您可以使用该接口将存储在OBS桶中的音视频文件转存到点播服务中,使用点播服务的音视频管理功能。调用该接口前,您需要调用[桶授权](https://support.huaweicloud.com/api-vod/vod_04_0199.html)接口,将存储音视频文件的OBS桶授权给点播服务。","operationId":"PublishAssetFromObs","parameters":[{"$ref":"#/parameters/xAuthToken"},{"$ref":"#/parameters/xSdkDate"},{"description":"项目ID,获取方法请参考[获取项目ID](https://support.huaweicloud.com/usermanual-vod/vod_01_0058.html)","in":"path","maxLength":64,"minLength":1,"name":"project_id","required":true,"type":"string","x-example":"70b76xxxxxx34253880af501cdxxxxxx"},{"description":"从OBS一键发布媒资","in":"body","name":"PublishAssetFromObsReq","required":true,"schema":{"$ref":"#/definitions/PublishAssetFromObsReq"}}],"responses":{"200":{"description":"处理成功返回。","examples":{"application/json":{"asset_id":"f488337c31c8e4622f1590735b134c65"}},"schema":{"$ref":"#/definitions/PublishAssetFromObsRsp"}},"400":{"description":"处理失败返回。","examples":{"application/json":{"error_code":"VOD.10003","error_msg":"The specified key does not exist."}},"schema":{"$ref":"#/definitions/ErrorResponse"}}},"summary":"创建媒资:OBS转存方式","tags":["媒资上传"],"x-apiexplorer-hide":"N","x-constraint":"由于不同区域的云服务不能互连,所以待转存的OBS桶和点播服务必须在同一区域,如“华北-北京四”OBS桶中的音视频只能转存到“华北-北京四”点播服务中。","x-external-api":true,"x-is-registered":"Y","x-publishpath":"vod_04_0201","x-request-examples-1":{"auto_publish":1,"input":{"bucket":"bucket_name","location":"cn-north-4","object":"test/hls/test_video.m3u8"},"output_bucket":"bucket_name","output_path":"test/hls","storage_mode":1,"title":"tittle","video_type":"HLS"},"x-request-examples-2":{"auto_publish":1,"bucket":"bucket","category_id":-1,"description":"des","input":null,"location":"cn-north-4","object":"path","tags":"test","template_group_name":"tempName","title":"title","video_type":"MP4"},"x-request-examples-description-1":"HLS视频转存示例(ts文件需和m3u8文件在同一目录下)","x-request-examples-description-2":"OBS转存示例","x-request-examples-text-1":{"auto_publish":1,"input":{"bucket":"bucket_name","location":"cn-north-4","object":"test/hls/test_video.m3u8"},"output_bucket":"bucket_name","output_path":"test/hls","storage_mode":1,"title":"tittle","video_type":"HLS"},"x-request-examples-text-2":{"auto_publish":1,"bucket":"bucket","category_id":-1,"description":"des","input":null,"location":"cn-north-4","object":"path","tags":"test","template_group_name":"tempName","title":"title","video_type":"MP4"},"x-request-examples-url-1":"POST https://{endpoint}/v1.0/{project_id}/asset/reproduction","x-request-examples-url-2":"POST https://{endpoint}/v1.0/{project_id}/asset/reproduction","x-support-sdk":"Y"}}},"product_short":"VOD","region_id":"cn-north-4","schemes":["HTTPS"],"security_definitions":null,"summary":"创建媒资:OBS转存方式","tags":"媒资上传","uri":null,"version":"2.0"}