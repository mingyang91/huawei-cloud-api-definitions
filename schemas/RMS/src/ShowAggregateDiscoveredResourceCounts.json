{"base_path":null,"components":{"parameters":{"AuthToken":{"description":"用户Token。\n获取Token,请参考《统一身份认证服务API参考》的“获取用户Token”章节。请求响应成功后在响应消息头中包含的“X-Subject-Token”的值即为Token值。","in":"header","name":"X-Auth-Token","required":true,"schema":{"type":"string"}},"DomainId":{"description":"帐号ID","in":"path","name":"domain_id","required":true,"schema":{"maxLength":36,"pattern":"[\\w-]+","type":"string"}}},"schemas":{"AggregateDiscoveredResourceCountsRequest":{"description":"查询聚合器中帐号资源计数请求体。","properties":{"aggregator_id":{"description":"资源聚合器ID。","maxLength":256,"minLength":1,"pattern":"[\\w-]+","type":"string"},"filter":{"$ref":"#/components/schemas/ResourceCountsFilters"},"group_by_key":{"description":"用于对资源计数进行分组的键(RESOURCE_TYPE | ACCOUNT_ID)。","maxLength":16,"minLength":1,"pattern":"[\\w-]+","type":"string"}},"required":["aggregator_id","group_by_key"],"type":"object"},"ErrorResp":{"description":"异常错误","properties":{"error_code":{"description":"错误码","type":"string"},"error_msg":{"description":"错误消息内容","type":"string"}},"type":"object"},"GroupedResourceCount":{"properties":{"group_name":{"description":"分组名称。","type":"string"},"resource_count":{"description":"资源数量。","type":"integer"}},"type":"object"},"GroupedResourceCountsListResp":{"properties":{"group_by_key":{"description":"资源计数进行分组的键。","type":"string"},"grouped_resource_counts":{"description":"分组资源计数的列表。","items":{"$ref":"#/components/schemas/GroupedResourceCount"},"type":"array"},"total_discovered_resources":{"description":"指定过滤器的资源聚合器中存在的资源总数。","type":"integer"}},"type":"object"},"ResourceCountsFilters":{"description":"资源计数过滤器。","properties":{"account_id":{"description":"帐号ID。","maxLength":36,"minLength":1,"pattern":"[\\w-]+","type":"string"},"region_id":{"description":"区域ID。","maxLength":32,"minLength":1,"pattern":"[\\w-]+","type":"string"},"resource_type":{"description":"资源类型。","maxLength":32,"minLength":1,"pattern":"[\\w-]+","type":"string"}},"type":"object"}}},"consumes":"","definitions":null,"description":null,"group_id":"71684d03de7545d7bdc1ae5caf95614f","host":"rms.myhuaweicloud.com","id":"4c4da4a65b5042e8818bd356dcc2132a","info_version":"v1","method":"post","name":"ShowAggregateDiscoveredResourceCounts","parameters":null,"paths":{"/v1/resource-manager/domains/{domain_id}/aggregators/aggregate-data/aggregate-discovered-resource-counts":{"post":{"description":"查询聚合器中帐号资源的计数,支持通过过滤器和GroupByKey来统计资源数量。","operationId":"ShowAggregateDiscoveredResourceCounts","parameters":[{"$ref":"#/components/parameters/AuthToken"},{"$ref":"#/components/parameters/DomainId"}],"requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/AggregateDiscoveredResourceCountsRequest"}}},"description":"请求参数。"},"responses":{"200":{"content":{"application/json":{"example":{"group_by_key":"DOMAIN","grouped_resource_counts":[{"group_name":"3fd23817bd85480e8dc4f520075de348","resource_count":23}],"total_discovered_resources":23},"schema":{"$ref":"#/components/schemas/GroupedResourceCountsListResp"}}},"description":"操作成功。"},"400":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorResp"}}},"description":"输入参数不合法。"},"403":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorResp"}}},"description":"用户认证失败或无操作权限。"},"500":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorResp"}}},"description":"服务器内部错误。"}},"security":[{"AccessKeyAuth":[]}],"summary":"查询聚合器中帐号资源的计数","tags":["Aggregator"],"x-is-registered":"Y","x-open-region-cloud":"hws,hws_hk","x-order":11,"x-request-examples-1":{"aggregator_id":"7ca3447830bd49c9b630a99680eaf90f","group_by_key":"DOMAIN"},"x-request-examples-description-1":"查询聚合器中帐号资源的计数。","x-request-examples-url-1":"POST https://{endpoint}/v1/resource-manager/domains/{domain_id}/aggregators/aggregate-data/aggregate-discovered-resource-counts","x-support-sdk":"Y"}}},"product_short":"RMS","region_id":"cn-north-4","schemes":["HTTPS"],"security_definitions":null,"summary":"查询聚合器中帐号资源的计数","tags":"聚合器","uri":null,"version":"3.0.0"}