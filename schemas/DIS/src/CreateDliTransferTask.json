{"base_path":"/","components":null,"consumes":"[\"application/json;charset=UTF-8\"]","definitions":{"CommonDestinationDescriptor":{"description":"转储任务请求体公共部分。","properties":{"agency_name":{"description":"在统一身份认证服务(IAM)中创建委托的名称,DIS需要获取IAM委托信息去访问您指定的资源。创建委托的参数设置如下:\n- 委托类型:云服务\n- 云服务:DIS\n- 持续时间:永久\n- “所属区域”为“全局服务”,“项目”为“对象存储服务”对应的“策略”包含“Tenant Administrator”。\n如果已经创建过委托,可以使用IAM服务提供的查询委托列表接口,获取有效可用的委托名称。\n取值范围:长度不超过64位,且不可配置为空。\n\n如果有在Console控制台使用转储任务,会提示自动创建委托,自动创建的委托名称为:dis_admin_agency","maxLength":64,"type":"string","x-example":"dis_admin_agency"},"consumer_strategy":{"default":"LATEST","description":"偏移量。\n\n- LATEST:最大偏移量,即获取最新的数据。\n- TRIM_HORIZON:最小偏移量,即读取最早的数据。","enum":["LATEST","TRIM_HORIZON"],"type":"string"},"deliver_time_interval":{"default":300,"description":"根据用户配置的时间,周期性的将数据导入OBS,若某个时间段内无数据,则此时间段不会生成打包文件。\n\n单位:秒","format":"int32","maximum":900,"minimum":30,"type":"integer"},"task_name":{"description":"转储任务的名称。  任务名称由英文字母、数字、中划线和下划线组成。长度为1~64个字符。","type":"string","x-example":"new-task"}},"required":["task_name","agency_name","deliver_time_interval"]},"CreateDliTransferTaskReq":{"properties":{"destination_type":{"default":"NOWHERE","description":"转储任务类型。\n\n- OBS:转储到OBS\n- MRS:转储到MRS\n- DLI:转储到DLI\n- CLOUDTABLE:转储到CloudTable\n- DWS:转储到DWS","enum":["DLI"],"example":"OBS","type":"string"},"dli_destination_descriptor":{"$ref":"#/definitions/DliDestinationDescriptorRequest"}},"required":["destination_type"]},"DliDestinationDescriptorRequest":{"allOf":[{"$ref":"#/definitions/CommonDestinationDescriptor"},{"properties":{"dli_database_name":{"description":"存储该通道数据的DLI数据库名称。","type":"string"},"dli_table_name":{"description":"存储该通道数据的DLI表名称。\n\n说明:\n\n仅支持数据位置为DLI的表,且用户需具有该表的插入权限。","type":"string"},"file_prefix":{"description":"临时存储该通道数据的OBS桶下的自定义目录,多级目录可用“/”进行分隔,不可以“/”开头。\n\n取值范围:英文字母、数字、下划线和斜杠,最大长度为50个字符。\n\n默认配置为空。","type":"string"},"obs_bucket_path":{"description":"临时存储该通道数据的OBS桶名称。","type":"string"},"retry_duration":{"description":"用户数据导入DLI失败的失效重试时间。重试时间超过该配置项配置的值,则将转储失败的数据备份至“OBS桶/ file_prefix/dli_error”目录下。\n取值范围:0~7200。\n单位:秒。\n默认配置为1800。\n配置为“0”表示DIS服务不会在转储失败时进行重试。","type":"string"}},"required":["dli_database_name","dli_table_name","obs_bucket_path"],"type":"object"}],"description":"转储目的地为DLI的参数列表。"}},"description":null,"group_id":"367dcf62e4d848d7920b0d0fb440978c","host":"dis.cn-north-4.myhuaweicloud.com","id":"f53e8cb9ed344ef786c329de1bba38d6","info_version":"v2","method":"post","name":"CreateDliTransferTask","parameters":{},"paths":{"/v2/{project_id}/streams/{stream_name}/transfer-tasks":{"post":{"consumes":["application/json"],"description":"本接口用于添加DLI转储任务。","operationId":"CreateDliTransferTask","parameters":[{"description":"项目ID。","in":"path","name":"project_id","required":true,"type":"string","x-example":"2b31ed520xxxxxxebedb6e57xxxxxxxx","x-order":2},{"description":"用户Token。\n\n通过调用IAM服务获取用户Token接口获取(响应消息头中X-Subject-Token的值)。","in":"header","name":"X-Auth-Token","required":true,"type":"string","x-example":"MIIDkgYJKoZIhvcNAQcCoIIDgzCCXXXXX...","x-order":1},{"description":"已创建的通道名称。","in":"path","maxLength":60,"name":"stream_name","required":true,"type":"string","x-example":"new-stream"},{"description":"CreateDliTransferTaskRequestBody","in":"body","name":"CreateDliTransferTaskRequestBody","required":true,"schema":{"$ref":"#/definitions/CreateDliTransferTaskReq"}}],"produces":["application/json"],"responses":{"201":{"description":"正常返回"}},"security":[{"aksk":[]}],"summary":"添加DLI转储任务","tags":["转储任务管理"],"x-request-examples-4":{"destination_type":"DLI","dli_destination_descriptor":{"agency_name":"dis_admin_agency","consumer_strategy":"LATEST","deliver_time_interval":300,"dli_database_name":"dlidatabasename","dli_table_name":"dlitablename","file_prefix":"","obs_bucket_path":"obsbucket","retry_duration ":300,"task_name":"dlitask"}},"x-request-examples-description-4":"添加DLI转储任务","x-request-examples-url-4":"POST https://{Endpoint}/v2/{project_id}/streams/{stream_name}/transfer-tasks","x-scope":"Commercial","x-support-sdk":"N","x-version":"v2"}}},"product_short":"DIS","region_id":"cn-north-4","schemes":["HTTPS"],"security_definitions":{"aksk":{"type":"basic"},"petstore_auth":{"authorizationUrl":"http://petstore.swagger.io/oauth/dialog","flow":"implicit","scopes":{"read:pets":"read your pets","write:pets":"modify pets in your account"},"type":"oauth2"},"token":{"in":"header","name":"X-Auth-Token","type":"apiKey"}},"summary":"添加DLI转储任务","tags":"转储任务管理","uri":null,"version":"2.0"}