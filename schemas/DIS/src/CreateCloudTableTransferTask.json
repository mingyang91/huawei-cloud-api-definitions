{"base_path":"/","components":null,"consumes":"[\"application/json;charset=UTF-8\"]","definitions":{"CloudtableDestinationDescriptorRequest":{"allOf":[{"$ref":"#/definitions/CommonDestinationDescriptor"},{"properties":{"backup_file_prefix":{"description":"用户数据转储CloudTable服务失败时,可选择将转储失败的数据备份至OBS服务,此参数为OBS桶下的自定义目录,多级目录可用“/”进行分隔,不可以“/”开头。\n\n取值范围:英文字母、数字和下划线。\n\n最大长度:最大长度为50个字符。\n\n默认配置为空。","type":"string"},"cloudtable_cluster_id":{"description":"存储该通道数据的CloudTable集群ID。\n\n如果选择转储OpenTSDB,则集群必须开启OpenTSDB。","type":"string"},"cloudtable_cluster_name":{"description":"存储该通道数据的CloudTable集群名称。\n\n如果选择转储OpenTSDB,则集群必须开启OpenTSDB。","type":"string"},"cloudtable_row_key_delimiter":{"description":"转储HBase的rowkey分隔符,用于分隔生成rowKey的用户数据。取值范围:”, ”、 ”. ”、 ”|”、 ”; ”、 ”\\”、 ”-”、 ”_”、 ”~”\n\n缺省值:”.”","type":"string"},"cloudtable_schema":{"$ref":"#/definitions/CloudtableSchema"},"cloudtable_table_name":{"description":"转储HBase时必选,表示存储该通道数据的CloudTable集群HBase表名称。","type":"string"},"obs_backup_bucket_path":{"description":"用户数据转储CloudTable服务失败时,可选择将转储失败的数据备份至OBS服务,此参数为OBS服务的桶名称。","type":"string"},"opentsdb_schema":{"description":"转储OpenTSDB时必选,与“cloudtable_schema”二选一,表示CloudTable集群OpenTSDB数据的Schema配置。用于将通道内的JSON数据进行格式转换并导入Cloudtable的OpenTSDB。","items":{"$ref":"#/definitions/OpenTSDBSchema"},"type":"array"},"retry_duration":{"description":"用户数据导入CloudTable服务失败的失效重试时间。超出此时效,转储CloudTable失败的数据将备份至“OBS桶/ backup_file_prefix /cloudtable_error”或“OBS桶/ backup_file_prefix /opentsdb_error”目录下。\n\n取值范围: 0~7200。\n\n单位:秒。\n\n默认配置为1800。","type":"string"}},"required":["cloudtable_cluster_name","cloudtable_cluster_id"],"type":"object"}],"description":"转储目的地为CloudTable的参数列表。","xml":{"name":"CloudtableDestinationDescriptorRequest"}},"CloudtableSchema":{"description":"转储HBase时必选,与“opentsdb_schema”二选一,表示CloudTable集群HBase数据的Schema配置。用于将通道内的JSON数据进行格式转换并导入Cloudtable的HBase表中。","properties":{"columns":{"description":"CloudTable集群HBase数据列的Schema配置,用于将通道内的JSON数据生成HBase数据的列。\n\n取值范围:1~4096。","items":{"$ref":"#/definitions/Column"},"type":"array"},"row_key":{"description":"CloudTable集群HBase数据rowkey的Schema配置,用于将通道内的JSON数据生成HBase数据的rowkey。\n\n取值范围:1~64。","items":{"$ref":"#/definitions/RowKey"},"type":"array"}},"required":["row_key","columns"],"xml":{"name":"CloudtableSchema"}},"Column":{"properties":{"column_family_name":{"description":"存储该通道数据的HBase表数据的列族名称。","type":"string"},"column_name":{"description":"存储该通道数据的HBase表数据的列名称。\n\n取值范围:1~32,只能包含英文字母、数字和下划线。","type":"string"},"type":{"description":"通道内JSON数据的JSON属性的类型名称。","enum":["Bigint","Double","Boolean","Timestamp","String","Decimal"],"type":"string"},"value":{"description":"通道内JSON数据的JSON属性名,用于生成HBase数据的列值。","type":"string"}},"required":["column_family_name","column_name","value","type"],"xml":{"name":"SchemaField"}},"CommonDestinationDescriptor":{"description":"转储任务请求体公共部分。","properties":{"agency_name":{"description":"在统一身份认证服务(IAM)中创建委托的名称,DIS需要获取IAM委托信息去访问您指定的资源。创建委托的参数设置如下:\n- 委托类型:云服务\n- 云服务:DIS\n- 持续时间:永久\n- “所属区域”为“全局服务”,“项目”为“对象存储服务”对应的“策略”包含“Tenant Administrator”。\n如果已经创建过委托,可以使用IAM服务提供的查询委托列表接口,获取有效可用的委托名称。\n取值范围:长度不超过64位,且不可配置为空。\n\n如果有在Console控制台使用转储任务,会提示自动创建委托,自动创建的委托名称为:dis_admin_agency","maxLength":64,"type":"string","x-example":"dis_admin_agency"},"consumer_strategy":{"default":"LATEST","description":"偏移量。\n\n- LATEST:最大偏移量,即获取最新的数据。\n- TRIM_HORIZON:最小偏移量,即读取最早的数据。","enum":["LATEST","TRIM_HORIZON"],"type":"string"},"deliver_time_interval":{"default":300,"description":"根据用户配置的时间,周期性的将数据导入OBS,若某个时间段内无数据,则此时间段不会生成打包文件。\n\n单位:秒","format":"int32","maximum":900,"minimum":30,"type":"integer"},"task_name":{"description":"转储任务的名称。  任务名称由英文字母、数字、中划线和下划线组成。长度为1~64个字符。","type":"string","x-example":"new-task"}},"required":["task_name","agency_name","deliver_time_interval"]},"CreateCloudTableTransferTaskReq":{"properties":{"cloudtable_destination_descriptor":{"$ref":"#/definitions/CloudtableDestinationDescriptorRequest"},"destination_type":{"default":"NOWHERE","description":"转储任务类型。\n\n- OBS:转储到OBS\n- MRS:转储到MRS\n- DLI:转储到DLI\n- CLOUDTABLE:转储到CloudTable\n- DWS:转储到DWS","enum":["CLOUDTABLE"],"example":"OBS","type":"string"}},"required":["destination_type"]},"OpenTSDBMetric":{"properties":{"type":{"description":"- Constant表示metric为常量value的值。\n- String表示metric为通道内用户数据对应JSON属性的取值,且该JOSN属性的取值为String。","enum":["Constant","String"],"type":"string"},"value":{"description":"常量或通道内用户数据的JSON属性名称。\n\n取值范围:1~32,只能包含英文字母、数字和点。","type":"string"}},"required":["type","value"]},"OpenTSDBSchema":{"description":"转储OpenTSDB时必选,与“cloudtable_schema”二选一,表示CloudTable集群OpenTSDB数据的Schema配置。用于将通道内的JSON数据进行格式转换并导入Cloudtable的OpenTSDB。","properties":{"metric":{"description":"CloudTable集群OpenTSDB数据metric的Schema配置,用于将通道内的JSON数据进行格式转换生成OpenTSDB数据的metric。","items":{"$ref":"#/definitions/OpenTSDBMetric"},"type":"array"},"tags":{"description":"CloudTable集群OpenTSDB数据tags的Schema配置,用于将通道内的JSON数据进行格式转换生成OpenTSDB数据的tags。","items":{"$ref":"#/definitions/OpenTSDBTags"},"type":"array"},"timestamp":{"$ref":"#/definitions/OpenTSDBTimestamp"},"value":{"$ref":"#/definitions/OpenTSDBValue"}},"required":["metric","timestamp","value","tags"],"xml":{"name":"OpenTSDBSchema"}},"OpenTSDBTags":{"properties":{"name":{"description":"存储该通道数据的OpenTSDB数据的tag名称。\n\n取值范围:1~32,只能包含英文字母、数字和下划线。","type":"string"},"type":{"description":"通道内用户JSON数据对应JSON属性的类型名称。\n\n取值范围:\n\n- Bigint\n- Double\n- Boolean\n- Timestamp\n- String\n- Decimal","type":"string"},"value":{"description":"常量或通道内用户数据的JSON属性名称。\n\n取值范围:1~32,只能包含英文字母、数字和下划线。","type":"string"}},"required":["name","type","value"]},"OpenTSDBTimestamp":{"description":"CloudTable集群OpenTSDB 数据timestamp的Schema配置,用于将通道内的JSON数据进行格式转换生成OpenTSDB数据的timestamp。","properties":{"format":{"description":"“type”为“String”类型时必选。表示通道内用户数据对应JSON属性的取值为Date格式,需要根据format字段进行数据格式转换生成OpenTSDB的timestamp。\n\n取值范围:\n\n- yyyy/MM/dd HH:mm:ss\n- MM/dd/yyyy HH:mm:ss\n- dd/MM/yyyy HH:mm:ss\n- yyyy-MM-dd HH:mm:ss\n- MM-dd-yyyy HH:mm:ss\n- dd-MM-yyyy HH:mm:ss","type":"string"},"type":{"description":"- Timestamp类型表示通道内用户数据对应JSON属性的取值为Timestamp类型,不需要进行数据格式转换就可以生成OpenTSDB的timestamp。\n- String类型表示通道内用户数据对应JSON属性的取值为Date格式,需要进行数据格式转换才能生成OpenTSDB的timestamp。","type":"string"},"value":{"description":"通道内用户数据的JSON属性名称。\n\n取值范围:1~32,只能包含英文字母、数字和下划线。","type":"string"}},"required":["type","value","format"]},"OpenTSDBValue":{"description":"CloudTable集群OpenTSDB 数据value的Schema配置,用于将通道内的JSON数据进行格式转换生成OpenTSDB 数据的value。","properties":{"type":{"description":"通道内用户JSON数据对应JSON属性的类型名称。\n\n取值范围:\n\n- Bigint\n- Double\n- Boolean\n- Timestamp\n- String\n- Decimal","type":"string"},"value":{"description":"常量或通道内用户数据的JSON属性名称。\n\n取值范围:1~32,只能包含英文字母、数字和下划线。","type":"string"}},"required":["type","value"]},"RowKey":{"properties":{"type":{"description":"通道内JSON数据的JSON属性的类型名称。","enum":["Bigint","Double","Boolean","Timestamp","String","Decimal"],"type":"string"},"value":{"description":"通道内JSON数据的JSON属性名,用于生成HBase数据的rowkey。","type":"string"}},"required":["value","type"]}},"description":null,"group_id":"367dcf62e4d848d7920b0d0fb440978c","host":"dis.cn-north-4.myhuaweicloud.com","id":"ad9afd690b884ea6893426a34aa9d517","info_version":"v2","method":"post","name":"CreateCloudTableTransferTask","parameters":{},"paths":{"/v2/{project_id}/streams/{stream_name}/transfer-tasks":{"post":{"consumes":["application/json"],"description":"本接口用于添加CloudTable转储任务。","operationId":"CreateCloudTableTransferTask","parameters":[{"description":"项目ID。","in":"path","name":"project_id","required":true,"type":"string","x-example":"2b31ed520xxxxxxebedb6e57xxxxxxxx","x-order":2},{"description":"用户Token。\n\n通过调用IAM服务获取用户Token接口获取(响应消息头中X-Subject-Token的值)。","in":"header","name":"X-Auth-Token","required":true,"type":"string","x-example":"MIIDkgYJKoZIhvcNAQcCoIIDgzCCXXXXX...","x-order":1},{"description":"已创建的通道名称。","in":"path","maxLength":60,"name":"stream_name","required":true,"type":"string","x-example":"new-stream"},{"description":"CreateCloudTableTransferTaskRequestBody","in":"body","name":"CreateCloudTableTransferTaskRequestBody","required":true,"schema":{"$ref":"#/definitions/CreateCloudTableTransferTaskReq"}}],"produces":["application/json"],"responses":{"201":{"description":"正常返回"}},"security":[{"aksk":[]}],"summary":"添加CloudTable转储任务","tags":["转储任务管理"],"x-request-examples-1":{"cloudtable_destination_descriptor":{"agency_name":"dis_admin_agency","backup_file_prefix":"","cloudtable_cluster_id":"b8c095e2-db5f-4732-8a1d-eacd662e35dc","cloudtable_cluster_name":"cloudtablecluster","cloudtable_row_key_delimiter":"|","cloudtable_schema":{"columns":[{"column_family_name":"cfname1","column_name":"ID","type":"String","value":"datavalue1"},{"column_family_name":"cfname2","column_name":"VALUE","type":"String","value":"datavalue2"}],"row_key":[{"type":"String","value":"datavalue"}]},"cloudtable_table_name":"cloudtabletable","consumer_strategy":"TRIM_HORIZON","obs_backup_bucket_path":"obsbackupbucket","retry_duration":1800,"task_name":"hbasetask"},"destination_type":"CLOUDTABLE"},"x-request-examples-2":{"cloudtable_destination_descriptor":{"agency_name":"dis_admin_agency","backup_file_prefix":"","cloudtable_cluster_id":"b8c095e2-db5f-4732-8a1d-eacd662e35dc","cloudtable_cluster_name":"cloudtablecluster","consumer_strategy":"LATEST","obs_backup_bucket_path":"obsbackupbucket","opentsdb_schema":[{"metric":[{"type":"Constant","value":"age"}],"tags":[{"name":"name","type":"Bigint","value":"name"}],"timestamp":{"format":"yyyy/MM/dd HH:mm:ss","type":"String","value":"date"},"value":{"type":"Bigint","value":"value"}}],"retry_duration":1800,"task_name":"opentsdbtask"},"destination_type":"CLOUDTABLE"},"x-request-examples-description-1":"添加CloudTable HBase转储任务","x-request-examples-description-2":"添加CloudTable OpenTSDB转储任务","x-request-examples-url-1":"POST https://{Endpoint}/v2/{project_id}/streams/{stream_name}/transfer-tasks","x-request-examples-url-2":"POST https://{Endpoint}/v2/{project_id}/streams/{stream_name}/transfer-tasks","x-scope":"Commercial","x-support-sdk":"N","x-version":"v2"}}},"product_short":"DIS","region_id":"cn-north-4","schemes":["HTTPS"],"security_definitions":{"aksk":{"type":"basic"},"petstore_auth":{"authorizationUrl":"http://petstore.swagger.io/oauth/dialog","flow":"implicit","scopes":{"read:pets":"read your pets","write:pets":"modify pets in your account"},"type":"oauth2"},"token":{"in":"header","name":"X-Auth-Token","type":"apiKey"}},"summary":"添加CloudTable转储任务","tags":"转储任务管理","uri":null,"version":"2.0"}