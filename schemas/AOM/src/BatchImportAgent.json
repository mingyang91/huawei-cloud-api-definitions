{"base_path":"/","components":null,"consumes":"","definitions":{"AgentBatchImportParamNew":{"properties":{"agent_import_param_list":{"description":"导入待安装UniAgent的机器参数列表。","items":{"$ref":"#/definitions/AgentImportParamNew"},"type":"array"},"icagent_install_flag":{"description":"是否需要安装ICAgent插件:\n- true:安装ICAgent插件。默认安装最新版本的ICAgent插件。\n- false:不安装ICAgent插件。","type":"boolean"},"installer_agent_id":{"description":"安装机(代理机)的agent ID。","type":"string"},"plugin_install_base_param":{"$ref":"#/definitions/PluginInstallBasicParam","description":"插件安装基础信息:\n- 当icagent_install_flag设置为true:如果没传入该信息,默认安装最新版本ICAgent插件;如果传入该信息,则安装指定版本的ICAgent插件。\n- 当icagent_install_flag设置为false:无论是否传入该信息,都不安装ICAgent插件。"},"proxy_region_id":{"description":"代理区域ID:\n- 直连接入填0。\n- 代理接入填实际代理区域ID。","format":"int32","type":"integer"},"public_net_flag":{"description":"是否公网接入:\n- true:公网接入设置。\n- false:代理接入设置。","type":"boolean"},"version":{"description":"待安装的UniAgent版本号。","type":"string"}},"required":["agent_import_param_list","proxy_region_id","installer_agent_id","version","public_net_flag"],"type":"object"},"AgentImportParamNew":{"properties":{"account":{"description":"机器ssh账号。","type":"string"},"agent_id":{"description":"agent唯一值,重复导入时需要传递。","type":"string"},"coc_cmdb_id":{"description":"外来唯一标识,COC用。","type":"string"},"inner_ip":{"description":"机器IP。","type":"string"},"os_type":{"description":"机器操作系统类型。","type":"string"},"password":{"description":"机器登录密码。","type":"string"},"port":{"description":"机器登录端口,默认22。","format":"int32","type":"integer"},"vpc_id":{"description":"机器所属VPC ID。","type":"string"}},"required":["password","inner_ip","port","account","os_type"],"type":"object"},"NoPrivilegeException":{"properties":{"error_code":{"description":"错误码","example":"AOM.32000002","type":"string"},"error_msg":{"description":"错误信息","example":"No permission.","maxLength":1024,"minLength":0,"type":"string"}}},"ParamException":{"properties":{"error_code":{"description":"错误码","example":"AOM.32000003","type":"string"},"error_msg":{"description":"错误信息","example":"Invalid parameter.","maxLength":1024,"minLength":0,"type":"string"}}},"PluginInstallBasicParam":{"example":{"domain_ak":"string","domain_sk":"string","install_version":"string"},"properties":{"domain_ak":{"description":"IAM账号AK,选填。.","type":"string"},"domain_sk":{"description":"IAM账号SK,选填。","type":"string"},"install_version":{"description":"指定安装的ICAgent版本。","type":"string"}},"type":"object"},"Response":{"properties":{"state":{"description":"执行状态:\n- true:成功下发任务。\n- false:失败下发任务。","type":"boolean"}},"type":"object"}},"description":null,"group_id":"ac32153cf89a435d96dd423fdce82920","host":"aom.cn-north-4.myhuaweicloud.com","id":"0979e5bebbae41ffb88290e3b40ad0ff","info_version":"v4","method":"post","name":"BatchImportAgent","parameters":{},"paths":{"/v1/{project_id}/uniagent-console/mainview/batch-import":{"post":{"description":"该接口用于下发批量安装UniAgent任务。","operationId":"BatchImportAgent","parameters":[{"description":"租户从IAM申请到的projectid,一般为32位字符串。","in":"path","maxLength":32,"minLength":32,"name":"project_id","required":true,"type":"string"},{"description":"region id,例如:cn-north-7","in":"header","name":"region","required":true,"type":"string"},{"description":"从IAM服务获取的用户Token。","in":"header","name":"X-Auth-Token","required":true,"type":"string"},{"description":"指定类型为application/json。","enum":["application/json"],"in":"header","name":"Content-Type","required":true,"type":"string"},{"description":"导入安装UniAgent的机器信息。","in":"body","name":"BatchImportAgentRequestBody","required":true,"schema":{"$ref":"#/definitions/AgentBatchImportParamNew"}}],"produces":["application/json"],"responses":{"200":{"description":"OK 请求响应成功。","examples":{"application/json":{"state":true}},"schema":{"$ref":"#/definitions/Response"}},"400":{"description":"BadRequest 非法请求。建议直接修改该请求,不要重试该请求。","examples":{"application/json":{"error_code":"AOM.32000003","error_msg":"Invalid parameter."}},"schema":{"$ref":"#/definitions/ParamException"}},"403":{"description":"Forbidden 请求被拒绝访问。返回该状态码,表明请求能够到达服务端,且服务端能够理解用户请求,但是拒绝做更多的事情,因为该请求被设置为拒绝访问,建议直接修改该请求,不要重试该请求。","examples":{"application/json":{"error_code":"AOM.32000002","error_msg":"No permission."}},"schema":{"$ref":"#/definitions/NoPrivilegeException"}}},"summary":"下发批量安装UniAgent任务","tags":["UniAgent管理"],"x-api-type":"open-api","x-is-registered":"Y","x-open-region-cloud":"hws","x-request-examples-1":{"agent_import_param_list":[{"account":"root","inner_ip":"1.2.3.4","os_type":"LINUX","password":"************","port":"22"}],"icagent_install_flag":false,"installer_agent_id":"123456","proxy_region_id":0,"public_net_flag":false,"version":"1.1.0"},"x-request-examples-description-1":"下发批量安装UniAgent任务","x-request-examples-text-1":{"agent_import_param_list":[{"account":"root","inner_ip":"1.2.3.4","os_type":"LINUX","password":"************","port":"22"}],"icagent_install_flag":false,"installer_agent_id":"123456","proxy_region_id":0,"public_net_flag":false,"version":"1.1.0"},"x-request-examples-url-1":"https://{Endpoint}/v1/{project_id}/uniagent-console/mainview/batch-import","x-support-sdk":"Y"}}},"product_short":"AOM","region_id":"cn-north-4","schemes":["HTTPS"],"security_definitions":null,"summary":"下发批量安装UniAgent任务","tags":"UniAgent管理","uri":null,"version":"2.0"}