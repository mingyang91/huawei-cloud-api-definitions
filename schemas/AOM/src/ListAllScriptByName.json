{"base_path":"/v1","components":null,"consumes":"","definitions":{"ApproveInfo":{"description":"审批信息","properties":{"need_approve":{"description":"是否审核,默认是不审核,true,false。","example":true,"type":"boolean"},"smn_urn_list":{"description":"审批主题urn集合。","maxLength":2048,"minLength":1,"type":"string"},"topic_selected":{"description":"审批人主题选择。","maxLength":2048,"minLength":1,"type":"string"}},"type":"object"},"ErrorResult":{"description":"错误查询返回结果","properties":{"error_code":{"description":"响应码。","example":"AOM.0403","maxLength":32,"minLength":1,"type":"string"},"error_msg":{"description":"调用失败响应信息描述。","example":"Forbidden","maxLength":1024,"minLength":1,"type":"string"},"http_code":{"description":"Http返回码","example":"","format":"int32","maximum":999,"minimum":1,"type":"integer"}},"required":["error_code","error_msg","http_code"],"type":"object"},"PageResultScript":{"properties":{"elements":{"description":"查询结果集合。","items":{"$ref":"#/definitions/Script"},"maxItems":9999999,"minItems":0,"type":"array"},"total_elements":{"description":"查询到的结果数量。","format":"int32","maximum":99999999,"minimum":0,"type":"integer"}},"required":["elements","total_elements"],"type":"object"},"RateControl":{"properties":{"have_rate_control":{"description":"是否分批发布,默认值是false。","example":true,"type":"boolean"},"max":{"description":"每批支持的最大实例数。","format":"int32","maximum":100,"minimum":0,"type":"integer"},"time_delay":{"description":"每批间隔。","format":"int32","maximum":60,"minimum":1,"type":"integer"}},"type":"object"},"Script":{"description":"脚本的基本信息。","properties":{"approve_info":{"$ref":"#/definitions/ApproveInfo","description":"审批信息"},"create_by":{"description":"创建人,比如为:张三","example":"chenkaiyuan","maxLength":64,"minLength":1,"type":"string"},"create_time":{"description":"创建时间","example":1654589712420,"format":"int64","maximum":9999999999999,"minimum":0,"type":"integer"},"description":{"description":"脚本描述,脚本描述,对脚本进行描述,最大长度为1000","example":"","maxLength":1000,"minLength":0,"type":"string"},"enterprise_project_id":{"description":"企业项目id","example":0,"maxLength":64,"minLength":1,"type":"string"},"id":{"description":"脚本id,根据UUID.randomUUID生成。","example":"9f8d509c-7e9e-4eed-8d3f-5f1fad6ebb7d","maxLength":64,"minLength":1,"type":"string"},"name":{"description":"脚本名称,支持数字,下划线,大小写字母 ,中文","example":"zzy","maxLength":64,"minLength":1,"type":"string"},"online_exist_status":{"description":"脚本中是否有已上线的版本,true表示有已上线的版本,false表示没有已上线的版本","example":true,"type":"boolean"},"online_id":{"description":"已上线版本id","example":"e0051a84-1fcf-40d9-b156-8db6cae7b021","maxLength":64,"minLength":1,"type":"string"},"project_id":{"description":"租户从IAM申请到的projectid,一般为32位字符串","example":"2a473356cca5487f8373be891bffc1cf","maxLength":32,"minLength":32,"type":"string"},"rate_control":{"$ref":"#/definitions/RateControl","description":"执行策略"},"script_language":{"description":"脚本语言,目前支持四种,分别是:SHELL BAT PYTHON POWER_SHELL","example":"SHELL BAT PYTHON POWER_SHELL","maxLength":16,"minLength":1,"type":"string"},"update_by":{"description":"修改人","example":"kaifatest","maxLength":64,"minLength":1,"type":"string"},"update_time":{"description":"实体的最后更新时间戳。 注意:执行创建/修改/删除操作时,update_time将更新。","example":1655275622146,"format":"int64","maximum":9999999999999,"minimum":0,"type":"integer"}},"required":["name","script_language"],"type":"object"},"SearchScriptsRequestBody":{"properties":{"create_by":{"description":"创建人,默认按照创建人搜索脚本。","maxLength":64,"minLength":1,"type":"string"},"enterprise_project_id":{"description":"企业项目id,根据企业项目id搜索。","maxLength":64,"minLength":1,"type":"string"},"is_default":{"description":"查询规则,如果是类型为default,则为模糊查询和脚本管理主页展示,no_default为版本管理。","maxLength":16,"minLength":0,"type":"string"},"name":{"description":"查询接收的参数,版本管理时,name为脚本名称(版本管理查询时name不能为空),脚本管理页面查询时,name为接收模糊查询的参数,name是null,表示查询所有默认脚本。","maxLength":128,"minLength":0,"type":"string"},"order_by_column":{"description":"需要排序的字段(默认为更新时间),支持字段有name,create_time和update_time。","maxLength":16,"minLength":1,"type":"string"},"page_num":{"description":"page_num为正整数。","format":"int32","maximum":100,"minimum":1,"type":"integer"},"page_size":{"description":"每页显示的条数,默认值是10。","format":"int32","maximum":1000,"minimum":1,"type":"integer"},"project_id":{"description":"项目id。","maxLength":32,"minLength":32,"type":"string"},"script_id":{"description":"版本管理时需要查询的脚本id。","maxLength":64,"minLength":1,"type":"string"},"sort_order":{"description":"排序规则(默认降序) 传入升序或降序,升序:ASC,降序:DESC。","maxLength":16,"minLength":1,"type":"string"}},"required":["script_id","order_by_column","sort_order"],"type":"object"}},"description":null,"group_id":"ac32153cf89a435d96dd423fdce82920","host":"aom.cn-north-4.myhuaweicloud.com","id":"dbe35bdac8534b1684273fd7064d1b91","info_version":"v1","method":"post","name":"ListAllScriptByName","parameters":{},"paths":{"/{project_id}/cms/script/list":{"post":{"consumes":["application/json"],"description":"该接口是脚本主页查询,可指定脚本名称和脚本创建人进行精确查询,返回包含脚本基本信息的列表数据。(注:接口目前开放的region为:华北-北京四,华东-上海一,华东-上海二,华南-广州)。","operationId":"ListAllScriptByName","parameters":[{"description":"项目id。","in":"path","maxLength":32,"minLength":32,"name":"project_id","required":true,"type":"string"},{"description":"从IAM服务获取的用户Token。","in":"header","maxLength":40960,"minLength":1,"name":"X-Auth-Token","required":true,"type":"string"},{"description":"指定类型为application/json。","in":"header","maxLength":32,"minLength":1,"name":"Content-Type","required":true,"type":"string"},{"description":"搜索脚本基本信息的请求体。","in":"body","name":"ListAllScriptByNameRequestBody","required":true,"schema":{"$ref":"#/definitions/SearchScriptsRequestBody"}}],"produces":["application/json"],"responses":{"200":{"description":"请求响应成功,返回脚本基本信息列表。","examples":{"application/json":{"elements":[{"approve_info":{"need_approve":false},"create_by":"chenkaiyuan","create_time":1600076223389,"description":"fassfa","enterprise_project_id":"0","id":"xxxxxxxxxxxxxxxxxxx","name":"awffawsafws","online_exist_status":false,"project_id":"xxxxxxxxxxxxxxxxxxx","rate_control":{"have_rate_control":false,"max":0,"time_delay":0},"script_language":"SHELL","update_by":"xxxx","update_time":1600076223389}],"total_elements":1}},"schema":{"$ref":"#/definitions/PageResultScript"}},"400":{"description":"BadRequest。非法请求。建议直接修改该请求,不要重试该请求。","examples":{"application/json":{"error_code":"AOM.31002002","error_message":"Invalid script parameter.","http_code":400}},"schema":{"$ref":"#/definitions/ErrorResult"}},"401":{"description":"Unauthorized。在客户端提供认证信息后,返回该状态码,表明服务端指出客户端所提供的认证信息不正确或非法。","examples":{"application/json":{"error_code":"AOM.31009011","error_msg":"auth failed.","http_code":401}},"schema":{"$ref":"#/definitions/ErrorResult"}},"500":{"description":"InternalServerError 表明服务端能被请求访问到,但是不能理解用户的请求。","examples":{"application/json":{"error_code":"AOM.31002005","error_msg":"script internal server error.","http_code":500}},"schema":{"$ref":"#/definitions/ErrorResult"}}},"summary":"脚本查询","tags":["自动化运维(即将下线)"],"x-is-registered":"Y","x-open-region-cloud":"hws","x-order":6,"x-request-examples-1":{"create_by":"user1","enterprise_project_id":"","is_default":"default","name":"xxx","order_by_column":"create_time","page_num":1,"page_size":10,"script_id":"","sort_order":"DESC"},"x-request-examples-description-1":"获取指定名称为“xxx”,排序为\"DESC\"的脚本列表。\n","x-request-examples-text-1":{"create_by":"user1","enterprise_project_id":"","is_default":"default","name":"xxx","order_by_column":"create_time","page_num":1,"page_size":10,"script_id":"","sort_order":"DESC"},"x-request-examples-url-1":"https://{endpoint}/v1/{project_id}/cms/script/list","x-support-sdk":"Y"}}},"product_short":"AOM","region_id":"cn-north-4","schemes":["HTTPS"],"security_definitions":null,"summary":"脚本查询","tags":"自动化运维(即将下线)","uri":null,"version":"2.0"}