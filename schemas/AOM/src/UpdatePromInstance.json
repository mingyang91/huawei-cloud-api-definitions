{"base_path":"/","components":null,"consumes":"","definitions":{"AggrPrometheusInfo":{"properties":{"id":{"description":"被聚合的账号id。","type":"string"},"name":{"description":"被聚合的账号名称。","type":"string"},"project_id":{"description":"被聚合的账号的projectid。","type":"string"},"prometheusIds":{"description":"被聚合的账号下的普罗ID列表。","items":{"type":"string"},"type":"array"}},"required":["project_id","prometheusIds","id","name"],"type":"object"},"ApplicationModel":{"properties":{"app_id":{"description":"应用id。","type":"string"},"app_name":{"description":"应用名称。","type":"string"},"app_type":{"description":"应用来源。","type":"string"}},"type":"object"},"ErrorResultModel":{"properties":{"error_code":{"description":"错误码。","type":"string"},"error_msg":{"description":"错误信息。","type":"string"},"error_type":{"description":"错误类型。","type":"string"},"trace_id":{"description":"链路id。","type":"string"}},"type":"object"},"PromConfigModel":{"properties":{"dashboard_id":{"description":"Prometheus实例关联dashboard的dashboard id(目前未使用)。","type":"string"},"prom_http_api_endpoint":{"description":"Prometheus实例调用url。","type":"string"},"region_id":{"description":"Prometheus实例所属的region。","type":"string"},"remote_read_url":{"description":"Prometheus实例remote-read地址。","type":"string"},"remote_write_url":{"description":"Prometheus实例remote-write地址。","type":"string"}},"type":"object"},"PromInstanceEpsModel":{"properties":{"application":{"$ref":"#/definitions/ApplicationModel","description":"应用详情。"},"cce_spec_config":{"description":"Prometheus实例所属CCE特殊配置。","type":"string"},"deleted_time":{"description":"删除时间。","format":"int64","type":"integer"},"enterprise_project_id":{"description":"Prometheus实例所属的企业项目。","type":"string"},"is_deleted_tag":{"description":"删除标记。","format":"int64","type":"integer"},"limits_update_time":{"description":"指标存储周期修改时间。","format":"int64","type":"integer"},"project_id":{"description":"Prometheus实例所属projectId。","type":"string"},"prom_create_timestamp":{"description":"Prometheus实例创建时间戳。","format":"int64","type":"integer"},"prom_id":{"description":"Prometheus实例id。","type":"string"},"prom_limits":{"$ref":"#/definitions/PromLimits","description":"Prometheus实例限制。"},"prom_name":{"description":"Prometheus实例名称 名称不能以下划线或中划线开头结尾,只含有中文、英文、数字、下划线、中划线、长度1-100。","type":"string"},"prom_spec_config":{"$ref":"#/definitions/PromConfigModel","description":"Prometheus实例所属特定配置。"},"prom_status":{"description":"Prometheus实例状态。","enum":["DELETED","NORMAL","ALL"],"type":"string"},"prom_type":{"description":"Prometheus实例类型。\n\n- default:默认普罗实例\n- ECS:Prometheus for ECS\n- CCE:Prometheus for CCE\n- REMOTE_WRITE:Prometheus 通用实例\n- CLOUD_SERVICE:Prometheus for 云服务\n- ACROSS_ACCOUNT:Prometheus for 多账号聚合实例 (暂不支持ACROSS_ACCOUNT类型)","type":"string"},"prom_update_timestamp":{"description":"Prometheus实例更新时间戳。","format":"int64","type":"integer"},"prom_version":{"description":"Prometheus实例版本号。","type":"string"}},"required":["prom_name","prom_type"],"type":"object"},"PromLimits":{"properties":{"compactor_blocks_retention_period":{"description":"指标存储时长,只支持 15天,30天,60天 ,90天","enum":["\"360h\""," \"720h\""," \"1440h\""," \"2160h\""],"example":"","type":"string"}},"required":["compactor_blocks_retention_period"],"type":"object"},"UpdatePromInstanceRequestModle":{"properties":{"aggr_prometheus_info":{"description":"被聚合的账号和普罗实例列表。","items":{"$ref":"#/definitions/AggrPrometheusInfo"},"type":"array"},"prom_id":{"description":"待修改的普罗实例id。","type":"string"},"prom_limits":{"$ref":"#/definitions/PromLimits","description":"指标存储时长,每天只能修改一次。"},"prom_name":{"description":"待修改的普罗实例名称,名称不能以下划线或中划线开头和结尾,只含有中文,英文,数字,下划线,中划线,长度1-100。","type":"string"}},"required":["prom_id"],"type":"object"},"UpdatePromInstanceResponseModle":{"properties":{"count":{"description":"普罗实例总数。","format":"int64","type":"integer"},"prometheus":{"description":"普罗实例列表名称。","items":{"$ref":"#/definitions/PromInstanceEpsModel"},"type":"array"}},"required":["count","prometheus"],"type":"object"}},"description":null,"group_id":"ac32153cf89a435d96dd423fdce82920","host":"aom.cn-north-4.myhuaweicloud.com","id":"dd2f0a0809914cbfb4b27dbf181e3011","info_version":"v2","method":"put","name":"UpdatePromInstance","parameters":{},"paths":{"/v1/{project_id}/aom/prometheus":{"put":{"description":"该接口用于修改Prometheus实例。","operationId":"UpdatePromInstance","parameters":[{"description":"租户从IAM申请到的projectid,一般为32位字符串。","in":"path","name":"project_id","required":true,"type":"string"},{"description":"从IAM服务获取的用户Token。","in":"header","name":"X-Auth-Token","required":true,"type":"string"},{"description":"指定类型为application/json。","in":"header","name":"Content-Type","required":true,"type":"string"},{"description":"企业项目id。\n\n- 更新单个企业项目下实例,填写企业项目id。","in":"header","name":"Enterprise-Project-Id","required":true,"type":"string"},{"description":"更新普罗实例请求体。","in":"body","name":"UpdatePromInstanceRequestBody","required":true,"schema":{"$ref":"#/definitions/UpdatePromInstanceRequestModle"}}],"responses":{"200":{"description":"OK 请求响应成功。","examples":{"application/json":{"count":0,"prometheus":[{"deleted_time":0,"enterprise_project_id":"0","limits_update_time":0,"project_id":"2a4***56cc***7f837***891***c1cf","prom_create_timestamp":1691718171483,"prom_id":"08****2a-8**b-4**5-b**1-d1********79","prom_name":"aom_prometheus","prom_spec_config":{"prom_http_api_endpoint":"aom-internal.cn-****-*.***.com:***/v1/2a4***56cc***7f837***891***c1cf/08****2a-8**b-4**5-b**1-d1********79","region_id":"cn-****-*","remote_read_url":"aom-internal.cn-****-*.***.com:***/v1/2a4***56cc***7f837***891***c1cf/08****2a-8**b-4**5-b**1-d1********79/api/v1/read","remote_write_url":"aom-internal.cn-****-*.***.com:***/v1/2a4***56cc***7f837***891***c1cf/08****2a-8**b-4**5-b**1-d1********79/push"},"prom_type":"CCE","prom_update_timestamp":1691718171483}]}},"schema":{"$ref":"#/definitions/UpdatePromInstanceResponseModle"}},"400":{"description":"BadRequest 非法请求。建议直接修改该请求,不要重试该请求。","examples":{"application/json":{"error_code":"AOM.11016014","error_msg":"prom instance not found","trace_id":""}},"schema":{"$ref":"#/definitions/ErrorResultModel"}},"401":{"description":"Unauthorized 在客户端提供认证信息后,返回该状态码,表明服务端指出客户端所提供的认证信息不正确或非法。","examples":{"application/json":{"error_code":"SVCSTG.AMS.4010000","error_msg":"auth failed.","error_type":"AUTH_FAILED","trace_id":null}},"schema":{"$ref":"#/definitions/ErrorResultModel"}},"500":{"description":"InternalServerError 表明服务端能被请求访问到,但是不能理解用户的请求。","examples":{"application/json":{"error_code":"APM.00000500","error_msg":"Internal Server Error","trace_id":""}},"schema":{"$ref":"#/definitions/ErrorResultModel"}}},"summary":"修改Prometheus实例","tags":["Prometheus实例"],"x-api-type":"open-api","x-is-registered":"Y","x-order":2,"x-request-examples-1":{"prom_id":"a4a3****-****-4ef6-****-****d1cc****","prom_limits":{"compactor_blocks_retention_period":"720h"},"prom_name":"aomPrometheus"},"x-request-examples-description-1":"更新Prometheus实例名称和指标存储时长。","x-request-examples-text-1":{"prom_id":"a4a3****-****-4ef6-****-****d1cc****","prom_limits":{"compactor_blocks_retention_period":"720h"},"prom_name":"aomPrometheus"},"x-request-examples-url-1":"https://{Endpoint}/v1/{project_id}/aom/prometheus","x-support-sdk":"Y"}}},"product_short":"AOM","region_id":"cn-north-4","schemes":["HTTPS"],"security_definitions":null,"summary":"修改Prometheus实例","tags":"Prometheus实例","uri":null,"version":"2.0"}