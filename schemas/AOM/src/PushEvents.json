{"base_path":"/","components":null,"consumes":"","definitions":{"EventList":{"description":"事件告警上报实体。","properties":{"events":{"description":"事件或者告警详情。","items":{"$ref":"#/definitions/EventModel"},"type":"array"}},"required":["events","page_info"],"type":"object"},"EventModel":{"description":"事件或者告警元数据。","example":{"annotations":{"alarm_fix_suggestion_zh_cn":"修复建议","alarm_probableCause_zh_cn":"可能原因"},"attach_rule":{},"ends_at":1579420868000,"metadata":{"event_name":"test","event_severity":"Major","event_type":"alarm","resource_id":"ecs123","resource_provider":"ecs","resource_type":"vm"},"resource_group_id":"5680587ab6*******755c543c1f","starts_at":1579420868000,"timeout":60000},"properties":{"annotations":{"additionalProperties":{"type":"object"},"description":"事件或者告警附加字段,可以为空。","type":"object"},"attach_rule":{"additionalProperties":{"type":"object"},"description":"事件或者告警预留字段,可以为空。","type":"object"},"ends_at":{"description":"指定清除的事件或者告警清除的时间。仅支持UTC毫秒级时间戳。默认值为0,表示没有清除告警。\n\n例如:2024-10-16 16:03:01需要通过工具转换成UTC毫秒级时间戳:1702759381000\n\n当action值为clear时,即清除告警时需要时指定该参数。","format":"int64","type":"integer"},"id":{"description":"事件或者告警id,产生事件或告警时,系统会自动生成。\n\n当action值为clear时,即清除告警时需要时指定该参数。上报事件或告警时无需传入该参数。","type":"string"},"metadata":{"additionalProperties":{"type":"string"},"description":"待上报的事件或者告警的详细信息,为key:value键值对形式。支持如下必填字段:\n- event_name:事件或者告警名称,类型为String;\n- event_severity:事件或告警级别。类型为String,支持四种级别:\n   - Critical:紧急\n   - Major:重要\n   - Minor:次要\n   - Info:提示\n- event_type:事件或告警类别。类型为String,支持两种类别:\n  - event:告警事件\n  - alarm:普通告警\n- resource_provider:事件对应云服务名称。类型为String;\n\n- resource_type:事件对应资源类型。类型为String;\n\n- resource_id:事件对应资源信息。类型为String。\nmetadata中的value长度为1到2048字符串。","type":"object"},"starts_at":{"description":"指定上报的事件或者告警产生的时间。仅支持UTC毫秒级时间戳。\n\n例如:2024-10-16 16:03:01需要通过工具转换成UTC毫秒级时间戳:1702759381000\n\n当action值为空时,即上报事件或告警时需要时指定该参数。","format":"int64","type":"integer"},"timeout":{"description":"指定AOM自动清除超期告警的时间,最长清除时间不超过15天。单位:毫秒数,一分钟则填写为60000。例如该时间设置为5天的告警,对应毫秒数:7200 * 60000(即:5天 * 24小时 * 60分钟 * 60000毫秒)。如果上报告警时没指定该时间,则默认清除时间为15天。\n当action值为clear时,即清除告警时不需要指定该参数。","format":"int64","type":"integer"}},"required":["metadata"],"type":"object"},"ResultInfo2":{"description":"调用失败时的返回值。","properties":{"error_code":{"description":"响应码。","type":"string"},"error_msg":{"description":"调用失败响应信息描述。","type":"string"},"error_type":{"description":"调用失败类型。","type":"string"},"trace_id":{"description":"请求id","type":"string"}},"type":"object"}},"description":null,"group_id":"ac32153cf89a435d96dd423fdce82920","host":"aom.cn-north-4.myhuaweicloud.com","id":"8a40608ee7d5484297bdfa7fdfc9df95","info_version":"v2","method":"put","name":"PushEvents","parameters":{},"paths":{"/v2/{project_id}/push/events":{"put":{"consumes":["application/json"],"description":"该接口用于上报事件或告警至AOM,同时支持清除告警信息。","operationId":"PushEvents","parameters":[{"description":"项目ID,可以从控制台获取,也可以从调用API处获取。获取方式请参见:[获取项目ID](aom_04_0024.xml)。","in":"path","name":"project_id","required":true,"type":"string","x-example":"2b31ed520xxxxxxebedb6e57xxxxxxxx"},{"description":"从IAM服务获取的用户Token。获取方式请参见:[获取Token](aom_04_0059.xml)。","in":"header","name":"X-Auth-Token","required":true,"type":"string","x-example":"MIIDkgYJKoZIhvcNAQcCoIIDgzCCXXXXXX..."},{"description":"消息体的类型(格式)。指定类型为“application/json”。","enum":["application/json"],"in":"header","name":"Content-Type","required":true,"type":"string"},{"description":"告警所属的企业项目id。获取方式请参见:[获取企业项目ID](aom_04_0024.xml)。\n如果不传该参数值,默认为default企业项目,ID为0。","in":"header","name":"enterprise-project-id","required":false,"type":"string"},{"description":"接口请求动作:\n- 不传或者传其他值:代表上报告警或事件动作。该参数值默认为空,即默认上报告警或事件。\n- clear:代表清除告警动作。","enum":["clear"],"in":"query","name":"action","required":false,"type":"string","x-example":"clear"},{"description":"事件或者告警列表。","in":"body","name":"PushEventsRequestBody","required":true,"schema":{"$ref":"#/definitions/EventList"}}],"produces":["application/json"],"responses":{"204":{"description":"No Content 表示请求成功,但没有内容返回。"},"400":{"description":"BadRequest 非法请求。建议直接修改该请求,不要重试该请求。","examples":{"application/json":{"error_code":"AOM.0400","error_msg":"parse eventParam failed","error_type":"SC_BAD_REQUEST"}},"schema":{"$ref":"#/definitions/ResultInfo2"}},"401":{"description":"Unauthorized  在客户端提供认证信息后,返回该状态码,表明服务端指出客户端所提供的认证信息不正确或非法。"},"403":{"description":"Forbidden 请求被拒绝访问。返回该状态码,表明请求能够到达服务端,且服务端能够理解用户请求,但是拒绝做更多的事情,因为该请求被设置为拒绝访问,建议直接修改该请求,不要重试该请求。"},"500":{"description":"InternalServerError 表明服务端能被请求访问到,但是不能理解用户的请求。"},"503":{"description":"ServiceUnavailable 被请求的服务无效。建议直接修改该请求,不要重试该请求。"}},"summary":"上报事件或告警信息","tags":["告警"],"x-api-type":"open-api","x-apigateway-backend":{"httpEndpoints":{"address":"10.63.46.141:443","description":"","method":"POST","path":"/v2/{project_id}/push/events","scheme":"https","timeout":30000},"parameters":[{"description":"","in":"PATH","name":"project_id","origin":"REQUEST","value":"project_id"}],"type":"HTTP"},"x-apigateway-cors":false,"x-apigateway-match-mode":"NORMAL","x-apigateway-request-type":"public","x-is-registered":"Y","x-request-examples-1":{"events":[{"annotations":{"alarm_fix_suggestion_zh_cn":"修复建议","alarm_probableCause_zh_cn":"可能原因","message":"告警详情"},"attach_rule":{},"metadata":{"event_name":"test","event_severity":"Major","event_type":"alarm","resource_id":"ecs123","resource_provider":"ecs","resource_type":"vm"},"starts_at":1605232501000,"timeout":60000}]},"x-request-examples-description-1":"上报一条名称为“test”、事件等级为“Major”且告警源为“ecs”的告警。","x-request-examples-text-1":{"events":[{"annotations":{"alarm_fix_suggestion_zh_cn":"修复建议","alarm_probableCause_zh_cn":"可能原因","message":"告警详情"},"attach_rule":{},"metadata":{"event_name":"test","event_severity":"Major","event_type":"alarm","resource_id":"ecs123","resource_provider":"ecs","resource_type":"vm"},"starts_at":1605232501000,"timeout":60000}]},"x-request-examples-url-1":"https://{EndPoint}/v2/{project_id}/push/events","x-support-sdk":"Y"}}},"product_short":"AOM","region_id":"cn-north-4","schemes":["HTTPS"],"security_definitions":null,"summary":"上报事件或告警信息","tags":"告警","uri":null,"version":"2.0"}