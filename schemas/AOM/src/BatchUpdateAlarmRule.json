{"base_path":"/","components":null,"consumes":"","definitions":{"ApiException":{"properties":{"error_code":{"description":"错误码","example":"AOM.02007102","maxLength":12,"minLength":12,"type":"string"},"error_msg":{"description":"错误信息","example":"this Threshold has been existed","maxLength":1024,"minLength":0,"type":"string"},"error_type":{"description":"错误类型","example":"BAD_REQUEST","maxLength":128,"minLength":0,"type":"string"},"trace_id":{"description":"请求id","example":"8fb508e9e31b44279016f708e1c60e4c","maxLength":32,"minLength":32,"type":"string"}},"type":"object"},"BatchAlarmRulesBody":{"properties":{"alarm_rule_enable":{"description":"当前状态是否启用。","type":"boolean"},"alarm_rule_id":{"description":"告警规则id。","format":"int64","type":"integer"},"alarm_rule_name":{"description":"告警规则名称。","type":"string"},"alarm_rule_type":{"description":"告警规则类型。\n- metric:Prometheus指标\n- event: 事件","type":"string"},"enterprise_project_id":{"description":"企业项目id。获取方式请参见:[获取企业项目ID](aom_04_0024.xml) 。 \n批量启停或批量修改单个企业项目下实例,填写企业项目id。","type":"string"}},"required":["alarm_rule_enable","alarm_rule_id","alarm_rule_name","alarm_rule_type","enterprise_project_id"],"type":"object"},"BatchUpdateActionRules":{"properties":{"alarm_rule_id":{"description":"告警规则id。","format":"int64","type":"integer"},"alarm_rule_name":{"description":"告警规则名称。","type":"string"},"alarm_rule_type":{"description":"告警规则类型。","type":"string"},"bind_notification_rule_id":{"description":"待绑定的告警行动规则名称。","type":"string"},"frequency":{"description":"通知频率\n- 当通知类型为“alarm_policy”时,填“-1”\n- 当通知类型为“direct”时,\n   - “0”:只告警一次\n   - “300”:每5分钟\n   - “600”:每10分钟\n   - “900”:每15分钟\n   - “1800”:每30分钟\n   - “3600”:每1小时\n   - “10800”:每3小时\n   - “21600”:每6小时\n   - “43200”:每12小时\n   - “86400”:每天","type":"string"},"notification_enable":{"description":"是否启用告警通知规则。\n- 当通知类型为“direct”时,填true\n- 当通知类型为“alarm_policy”时,填false\n如果告警触发“notify_triggered”或告警恢复“notify_resolved”都设置为false(即都不进行告警通知),则notification_enable需设置为false。","type":"boolean"},"notification_type":{"description":"通知类型。\n- “direct”:直接告警\n- “alarm_policy”:告警降噪","type":"string"},"notify_resolved":{"description":"告警解决是否通知。\n- true:通知\n- false:不通知","type":"boolean"},"notify_triggered":{"description":"告警触发是否通知。\n- true:通知\n- false:不通知","type":"boolean"},"route_group_enable":{"description":"启用告警分组规则。\n- 当通知类型为“alarm_policy”时:true\n- 当通知类型为“direct”时:false\n如果告警触发“notify_triggered”或告警恢复“notify_resolved”都设置为false(即都不进行告警通知),则route_group_enable需设置为false。","type":"boolean"},"route_group_rule":{"description":"告警分组规则名称。\n- 当route_group_enable 为true时,填告警分组规则名称\n- 当route_group_enable 为false时,填“”","type":"string"}},"required":["alarm_rule_id","alarm_rule_name","alarm_rule_type","frequency","notify_resolved","notify_triggered"],"type":"object"},"BatchUpdateItemResult":{"properties":{"resource_alias":{"description":"资源名称别名。","type":"string"},"resource_name":{"description":"资源名称。","type":"string"},"ret_status":{"description":"资源更新状态。","type":"string"}},"type":"object"},"BatchUpdateRequest":{"properties":{"alarm_rules":{"description":"批量启停的告警规则列表。批量启停告警规则时,该参数必填。","items":{"$ref":"#/definitions/BatchAlarmRulesBody"},"type":"array"},"update_action_rules":{"description":"批量修改告警行动规则的告警规则列表。批量修改告警行动规则时,该参数必填。","items":{"$ref":"#/definitions/BatchUpdateActionRules"},"type":"array"},"update_type":{"description":"更新类型:BATCH_UPDATE_ACTION_RULE。批量修改告警行动规则时,该参数必填。","type":"string"}},"type":"object"},"BatchUpdateResponse":{"properties":{"error_code":{"description":"错误码。","type":"string"},"error_message":{"description":"错误信息。","type":"string"},"resources":{"description":"资源列表。","items":{"$ref":"#/definitions/BatchUpdateItemResult"},"type":"array"}},"type":"object"}},"description":null,"group_id":"ac32153cf89a435d96dd423fdce82920","host":"aom.cn-north-4.myhuaweicloud.com","id":"99da8531e77f450980ccc2478822b99a","info_version":"v2","method":"put","name":"BatchUpdateAlarmRule","parameters":{},"paths":{"/v4/{project_id}/alarm-rules/batch-update":{"put":{"description":"该接口用于批量启停Prometheus监控告警规则、批量修改Prometheus监控告警规则的告警行动规则。","operationId":"BatchUpdateAlarmRule","parameters":[{"description":"项目ID,可以从控制台获取,也可以从调用API处获取。获取方式请参见:[获取项目ID](aom_04_0024.xml)。","in":"path","name":"project_id","required":true,"type":"string"},{"description":"批量操作action:\n\n- enable:批量启动Prometheus监控告警规则\n- disable:批量停止Prometheus监控告警规则\n- BATCH_UPDATE_ACTION_RULE:批量修改Prometheus监控告警规则的告警行动规则","in":"query","name":"action","required":true,"type":"string"},{"description":"批量启停Prometheus监控告警规则请求体。","in":"body","name":"BatchUpdateAlarmRuleRequestBody","required":true,"schema":{"$ref":"#/definitions/BatchUpdateRequest"}},{"description":"从IAM服务获取的用户Token。获取方式请参见:[获取Token](aom_04_0059.xml)。","in":"header","name":"X-Auth-Token","required":true,"type":"string"},{"description":"消息体的类型(格式)。指定类型为“application/json”。","in":"header","name":"Content-Type","required":true,"type":"string"},{"description":"企业项目id。获取方式请参见:[获取企业项目ID](aom_04_0024.xml) 。\n- 批量启停或批量修改单个企业项目下实例,填写企业项目id。 \n- 不填 则批量启停或批量修改默认企业项目下实例,默认企业项目id为0。","in":"header","name":"Enterprise-Project-Id","required":false,"type":"string"}],"responses":{"200":{"description":"OK 请求响应成功。当批量启停告警规则时,返回为null。当批量修改告警规则时,返回以下内容:","examples":{"application/json":{"error_code":"200","error_message":"success","resources":[{"resource_alias":"0002","resource_name":"0002","ret_status":"Success"},{"resource_alias":"0003","resource_name":"0003","ret_status":"Success"}]}},"schema":{"$ref":"#/definitions/BatchUpdateResponse"}},"400":{"description":"BadRequest 非法请求。建议直接修改该请求,不要重试该请求。","examples":{"application/json":{"error_code":"AOM.02025026","error_msg":"Input alarmParams  is invalid: rule name or type is empty","error_type":"BAD_REQUEST","trace_id":"ff96d66927d839a49fb93d7ccaab3dae"}},"schema":{"$ref":"#/definitions/ApiException"}}},"summary":"批量更新Prometheus监控告警规则","tags":["告警"],"x-api-type":"open-api","x-is-registered":"Y","x-open-region-cloud":"hws,sbc,hk_sbc","x-order":19,"x-request-examples-1":{"alarm_rules":[{"alarm_rule_enable":false,"alarm_rule_id":1366,"alarm_rule_name":"0002","alarm_rule_type":"metric","enterprise_project_id":"0"},{"alarm_rule_enable":false,"alarm_rule_id":1366,"alarm_rule_name":"0003","alarm_rule_type":"metric","enterprise_project_id":"0"}]},"x-request-examples-2":{"alarm_rules":[{"alarm_rule_enable":true,"alarm_rule_id":1366,"alarm_rule_name":"0002","alarm_rule_type":"metric","enterprise_project_id":"0"},{"alarm_rule_enable":true,"alarm_rule_id":1366,"alarm_rule_name":"0003","alarm_rule_type":"metric","enterprise_project_id":"0"}]},"x-request-examples-3":{"update_action_rules":[{"alarm_rule_id":1366,"alarm_rule_name":"0002","alarm_rule_type":"metric","bind_notification_rule_id":"111111111111111111111111111111111111111111111111111111111111111111","frequency":"0","notification_enable":true,"notification_type":"direct","notify_resolved":true,"notify_triggered":true},{"alarm_rule_id":1366,"alarm_rule_name":"0003","alarm_rule_type":"metric","bind_notification_rule_id":"111111111111111111111111111111111111111111111111111111111111111111","frequency":"0","notification_enable":true,"notification_type":"direct","notify_resolved":true,"notify_triggered":true}],"update_type":"BATCH_UPDATE_ACTION_RULE"},"x-request-examples-4":{"update_action_rules":[{"alarm_rule_id":1366,"alarm_rule_name":"0002","alarm_rule_type":"metric","frequency":"0","notification_type":"alarm_policy","notify_resolved":true,"notify_triggered":true,"route_group_enable":true,"route_group_rule":"aom1"},{"alarm_rule_id":1366,"alarm_rule_name":"0003","alarm_rule_type":"metric","frequency":"0","notification_type":"alarm_policy","notify_resolved":true,"notify_triggered":true,"route_group_enable":true,"route_group_rule":"aom1"}],"update_type":"BATCH_UPDATE_ACTION_RULE"},"x-request-examples-description-1":"批量启动告警规则。","x-request-examples-description-2":"批量停止告警规则。","x-request-examples-description-3":"批量将告警规则的告警通知方式更改为直接告警。","x-request-examples-description-4":"批量将告警规则的告警通知方式更改为告警降噪。","x-request-examples-text-1":{"alarm_rules":[{"alarm_rule_enable":false,"alarm_rule_id":1366,"alarm_rule_name":"0002","alarm_rule_type":"metric","enterprise_project_id":"0"},{"alarm_rule_enable":false,"alarm_rule_id":1366,"alarm_rule_name":"0003","alarm_rule_type":"metric","enterprise_project_id":"0"}]},"x-request-examples-text-2":{"alarm_rules":[{"alarm_rule_enable":true,"alarm_rule_id":1366,"alarm_rule_name":"0002","alarm_rule_type":"metric","enterprise_project_id":"0"},{"alarm_rule_enable":true,"alarm_rule_id":1366,"alarm_rule_name":"0003","alarm_rule_type":"metric","enterprise_project_id":"0"}]},"x-request-examples-text-3":{"update_action_rules":[{"alarm_rule_id":1366,"alarm_rule_name":"0002","alarm_rule_type":"metric","bind_notification_rule_id":"111111111111111111111111111111111111111111111111111111111111111111","frequency":"0","notification_enable":true,"notification_type":"direct","notify_resolved":true,"notify_triggered":true},{"alarm_rule_id":1366,"alarm_rule_name":"0003","alarm_rule_type":"metric","bind_notification_rule_id":"111111111111111111111111111111111111111111111111111111111111111111","frequency":"0","notification_enable":true,"notification_type":"direct","notify_resolved":true,"notify_triggered":true}],"update_type":"BATCH_UPDATE_ACTION_RULE"},"x-request-examples-text-4":{"update_action_rules":[{"alarm_rule_id":1366,"alarm_rule_name":"0002","alarm_rule_type":"metric","frequency":"0","notification_type":"alarm_policy","notify_resolved":true,"notify_triggered":true,"route_group_enable":true,"route_group_rule":"aom1"},{"alarm_rule_id":1366,"alarm_rule_name":"0003","alarm_rule_type":"metric","frequency":"0","notification_type":"alarm_policy","notify_resolved":true,"notify_triggered":true,"route_group_enable":true,"route_group_rule":"aom1"}],"update_type":"BATCH_UPDATE_ACTION_RULE"},"x-request-examples-url-1":"https://{Endpoint}/v4/{project_id}/alarm-rules/batch-update?action=enable","x-request-examples-url-2":"https://{Endpoint}/v4/{project_id}/alarm-rules/batch-update?action=disable","x-request-examples-url-3":"https://{Endpoint}/v4/{project_id}/alarm-rules/batch-update?action=BATCH_UPDATE_ACTION_RULE","x-request-examples-url-4":"https://{Endpoint}/v4/{project_id}/alarm-rules/batch-update?action=BATCH_UPDATE_ACTION_RULE","x-support-sdk":"Y"}}},"product_short":"AOM","region_id":"cn-north-4","schemes":["HTTPS"],"security_definitions":null,"summary":"批量更新Prometheus监控告警规则","tags":"告警","uri":null,"version":"2.0"}