{"base_path":"/v1","components":null,"consumes":"","definitions":{"ExecutionDetails":{"description":"函数流执行详细信息","properties":{"approve_user_name_list":{"description":"审批用户列表","items":{"maxLength":256,"minLength":1,"type":"string"},"maxItems":200,"minItems":0,"type":"array"},"begin_time":{"description":"流程实例创建时间,格式:UTC时间戳","example":"160000000","format":"int64","maximum":9999999999999,"minimum":0,"type":"integer"},"end_time":{"description":"流程实例结束时间,格式:UTC时间戳","example":"1600000000","format":"int64","maximum":9999999999999,"minimum":0,"type":"integer"},"execution_id":{"description":"流程执行实例ID。","example":"48aff955-ea10-4ffd-b426-190bc192dc14","maxLength":64,"minLength":1,"type":"string"},"execution_result_list":{"description":"节点执行信息。","items":{"$ref":"#/definitions/execution_result_list"},"maxItems":200,"minItems":0,"type":"array"},"last_record_id_with_snapshot":{"description":"执行快照","maxLength":128,"minLength":1,"type":"string"},"last_update_time":{"description":"流程实例上次更新时间,格式:yyyy-MM-ddTHH:mm:ssZ,UTC时间。","example":"2021-01-01T00:00:00Z","format":"int64","maximum":9999999999999,"minimum":0,"type":"integer"},"project_id":{"description":"租户从IAM申请到的projectid,一般为32位字符串。","example":"2a473356cca5487f8373be891bffc1cf","maxLength":32,"minLength":32,"type":"string"},"status":{"description":"流程实例执行状态。","example":"success,fail,running,timeout,cancel","maxLength":32,"minLength":1,"type":"string"},"workflow_edit_time":{"description":"执行workflow的更新时间","example":0,"format":"int64","maximum":9999999999999,"minimum":0,"type":"integer"},"workflow_id":{"description":"流程定义ID。","example":"48aff955-ea10-4ffd-b426-190bc192dc14","maxLength":64,"minLength":1,"type":"string"}},"type":"object"},"ResultInfo":{"description":"调用失败时的返回值。","properties":{"error_code":{"description":"响应码。","maxLength":64,"minLength":1,"type":"string"},"error_msg":{"description":"调用失败响应信息描述。","maxLength":1024,"minLength":1,"type":"string"},"http_code":{"description":"http返回码","format":"int32","maximum":999,"minimum":0,"type":"integer"}},"required":["error_code","error_msg","http_code"],"type":"object"},"execution_result_list":{"description":"函数流节点执行详细信息","properties":{"begin_time":{"description":"节点开始执行时间。","example":1669366534587,"format":"int64","maximum":9999999999999,"minimum":0,"type":"integer"},"end_time":{"description":"节点执行结束时间。","example":1669366546428,"format":"int64","maximum":9999999999999,"minimum":0,"type":"integer"},"function_execution_id":{"description":"FunctionGraph的执行id。","example":"9ba47689-71fe-4798-865d-fb47c031223b","maxLength":64,"minLength":1,"type":"string"},"node_id":{"description":"流程节点ID。","example":"48aff955-ea10-4ffd-b426-190bc192dc14","maxLength":64,"minLength":1,"type":"string"},"output":{"description":"节点输出。","type":"object"},"status":{"description":"节点状态。","example":"success","maxLength":32,"minLength":1,"type":"string"}},"type":"object"}},"description":null,"group_id":"ac32153cf89a435d96dd423fdce82920","host":"aom.cn-north-4.myhuaweicloud.com","id":"58605d3889754301937152db96c565c4","info_version":"v1","method":"get","name":"SearchWorkflowExecutionDetail","parameters":{},"paths":{"/{project_id}/cms/workflow/{workflow_id}/executions/{execution_id}/status":{"get":{"consumes":["application/json"],"description":"该接口可获取任务的执行详情,可指定工作流ID和执行ID去查询对应的任务,返回任务执行详情。(注:接口目前开放的region为:华北-北京四,华东-上海一,华东-上海二,华南-广州)。","operationId":"SearchWorkflowExecutionDetail","parameters":[{"description":"租户从IAM申请到的projectid,一般为32位字符串。","in":"path","maxLength":32,"minLength":32,"name":"project_id","required":true,"type":"string"},{"description":"工作流ID,唯一标识,根据project_id和workflow_name生成。","in":"path","maxLength":64,"minLength":1,"name":"workflow_id","required":true,"type":"string"},{"description":"工作流执行ID。","in":"path","maxLength":64,"minLength":1,"name":"execution_id","required":true,"type":"string"},{"description":"从IAM服务获取的用户Token。","in":"header","maxLength":40960,"minLength":1,"name":"X-Auth-Token","required":true,"type":"string"},{"description":"指定类型为application/json。","in":"header","maxLength":32,"minLength":1,"name":"Content-Type","required":true,"type":"string"}],"produces":["application/json"],"responses":{"200":{"description":"请求响应成功 ,返回任务执行详情。","examples":{"application/json":{"approve_user_name_list":[],"begin_time":1670311148207,"end_time":1670311151857,"execution_id":"xxxxx","execution_result_list":[{"begin_time":1670311148207,"end_time":1670311151857,"function_execution_id":"xxxxx","node_id":"run-script","output":{"fail":[{"agent_state":"ONLINE","availability_zone":"cn-north-7b","charging_mode":"0","code":"0","current_project":true,"enterprise_project_id":"0","error_msg":"","execute_time":"130","exit_code":"1","fixed_ip_list":["192.0.0.0"],"floating_ip_List":["192.0.0.0"],"id":"xxxxxxxx","instance_status":"ACTIVE","ip":"192.0.0.0","log":"/usr/local/uniagentd/tmp/tmp_1670311150998271_de7b35a0-dc43-45e0-a712-d6b26844be1c: >-\n  line 1: cd: /xxx/xxx: Not a directory\n","name":"xxxx","os_type":"Linux","start_time":"1670311150773","tags":[],"vpc_id":"xxxxxx"}],"in_execution":[],"not_performed":[],"success":[]},"status":"success"}],"last_record_id_with_snapshot":"xxxxxxx","project_id":"xxxxxx","status":"fail","workflow_edit_time":1670311089444,"workflow_id":"xxxxxx","workflow_snapshot":{"citation_urns":[],"create_by":"xxxxxx","create_time":1670310945971,"description":"","edit_time":1670311089444,"enterprise_project_id":"0","execution_action_rules":["ecs:cloudServers:list","ecs:cloudServers:vnc"],"execution_permission":["CMS FullAccess","ECS FullAccess","AOM FullAccess"],"id":"xxxxxxx","input":{"approve":{"group":"approve","need_approve":"false"},"get_instances":{"ecs_id_list":"[\"xxxxx\"]","group":"ecs_instance","type":"manual"},"notice":{"group":"notice"},"project_id":"xxxxxxx","rate_control":{"group":"rate_control","max":"0","timeDelay":"0"},"region_id":"cn-north-7","script_param":{"cmd_user":"root","group":"script","name":"xxxx","scriptSelected":"null","script_content":"xxxx","script_id":"xxxxx","script_type":"SHELL","script_version_id":"xxxxxx","sensitive_param":false,"sourceId":"script","time_out":"7200","version_number":"1.0"},"trigger":{"group":"trigger","period":"[\"7\"]","policy":"periodic","scheduled_time":"15:19:03","time_zone":"Asia/Shanghai"}},"is_delete":false,"last_execution_end_time":0,"last_execution_id":"xxxxxx","last_execution_start_time":1670311148207,"name":"xxxxxx","nodes":[{"category":"service","description":"Run script on ECS","id":"run-script","ignore_error":true,"metadata":{"configuration":{"dataInputPath":"","dataOutputPath":"","dataResultsPath":"","func_app":"CMS","func_urn":"xxxxxx","func_version":"latest","parameters":[{"default":"","format":"","isEditor":false,"key":"properties.project_id","showFormat":false,"value":"xxxxxxx"},{"default":"","format":"","isEditor":false,"key":"properties.sourceId","showFormat":false,"value":"script"},{"default":"","format":"","isEditor":false,"key":"properties.cmd_user","showFormat":false,"value":"root"},{"default":"","format":"","isEditor":false,"key":"properties.sensitive_param","showFormat":false,"value":"false"},{"default":"","format":"","isEditor":false,"key":"properties.script_content","showFormat":false,"value":"xxxx"},{"default":"","format":"","isEditor":false,"key":"properties.version_number","showFormat":false,"value":"1.0"},{"default":"","format":"","isEditor":false,"key":"properties.script_id","showFormat":false,"value":"xxxxxx"},{"default":"","format":"","isEditor":false,"key":"properties.script_version_id","showFormat":false,"value":"xxxxx"},{"default":"","format":"","isEditor":false,"key":"properties.time_out","showFormat":false,"value":"7200"},{"default":"","format":"","isEditor":false,"key":"properties.name","showFormat":false,"value":"zzy"},{"default":"","format":"","isEditor":false,"key":"properties.script_type","showFormat":false,"value":"SHELL"},{"default":"","format":"","isEditor":false,"key":"properties.scriptSelected","showFormat":false,"value":"null"},{"default":"","format":"","isEditor":false,"key":"properties.group","showFormat":false,"value":"script"},{"default":"","format":"","isEditor":false,"key":"properties.region_id","showFormat":false,"value":"cn-north-7"},{"default":"","format":"","isEditor":false,"key":"properties.ecs_id_list","showFormat":false,"value":"[\"xxxxxx\"]"},{"default":"","format":"","isEditor":false,"key":"properties.type","showFormat":false,"value":"manual"},{"default":"","format":"","isEditor":false,"key":"properties.group","showFormat":false,"value":"ecs_instance"},{"default":"","format":"","isEditor":false,"key":"properties.max","showFormat":false,"value":"0"},{"default":"","format":"","isEditor":false,"key":"properties.timeDelay","showFormat":false,"value":"0"},{"default":"","format":"","isEditor":false,"key":"properties.group","showFormat":false,"value":"rate_control"},{"default":"","format":"","isEditor":false,"key":"properties.executionId","showFormat":false,"value":"$.executionId"},{"default":"","format":"","isEditor":false,"key":"properties.workflowId","showFormat":false,"value":"xxxxx"},{"default":"","format":"","isEditor":false,"key":"properties.cmsTaskName2Distribute","showFormat":false,"value":"CMS::ECS::runScript"},{"default":"","format":"","isEditor":false,"key":"properties.cmsAccessPodLb","showFormat":false,"value":"xxxxx"},{"default":"","format":"","isEditor":false,"key":"properties.workflowType","showFormat":false,"value":"cron"},{"default":"","format":"","isEditor":false,"key":"properties.nodeId","showFormat":false,"value":"run-script"}],"validator":true},"type":"operation"},"name":"runScript","task_name":"CMS::ECS::runScript"}],"project_id":"xxxx","quote":[],"status":"executing","steps":[],"tags":{},"task_type":"script","template_i18n":{"en-us":{"description":"Running Scripts for Instances in Batches","name":"Script Management"},"zh-cn":{"description":"对实例批量执行脚本","name":"脚本管理"}},"template_id":"CMS::ECS::BulkyRunScript","template_name":"CMS::ECS::BulkyRunScript","trigger_id":"xxx","trigger_status":"active","type":"cron","update_by":"cx","update_time":1670311149466}}},"schema":{"$ref":"#/definitions/ExecutionDetails"}},"400":{"description":"BadRequest。非法请求。建议直接修改该请求,不要重试该请求。","examples":{"application/json":{"error_code":"AOM.31001403","error_message":"param error.","htp_code":"400"}},"schema":{"$ref":"#/definitions/ResultInfo"}},"401":{"description":"Unauthorized。在客户端提供认证信息后,返回该状态码,表明服务端指出客户端所提供的认证信息不正确或非法。","examples":{"application/json":{"error_code":"AOM.31009004","error_message":"auth failed.","http_code":"401"}},"schema":{"$ref":"#/definitions/ResultInfo"}},"500":{"description":"InternalServerError表明服务端能被请求访问到,但是不能理解用户的请求。","examples":{"application/json":{"error_code":"AOM.31001405","error_message":"internal server error.","http_code":"500"}},"schema":{"$ref":"#/definitions/ResultInfo"}}},"summary":"获取工作流执行中的执行详情","tags":["自动化运维(即将下线)"],"x-is-registered":"Y","x-open-region-cloud":"hws","x-order":4,"x-request-examples-description-1":"补充参数workflow_id、execution_id,可获取对应的任务详情。","x-request-examples-url-1":"https://{Endpoint}/v1/{project_id}/cms/workflow/{workflow_id}/executions/{execution_id}/status","x-support-sdk":"Y"}}},"product_short":"AOM","region_id":"cn-north-4","schemes":["HTTPS"],"security_definitions":null,"summary":"获取工作流执行中的执行详情","tags":"自动化运维(即将下线)","uri":null,"version":"2.0"}