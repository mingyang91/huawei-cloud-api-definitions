{"base_path":"/","components":null,"consumes":"","definitions":{"ActionRule":{"description":"告警行动规则","properties":{"create_time":{"description":"创建时间","format":"int64","maximum":9999999999999,"minimum":0,"type":"integer"},"desc":{"description":"规则描述。规则描述长度为0到1024个字符,并且只能是数字、字母、特殊字符(_*)、空格和中文组成,不能以下划线开头和结尾。","maxLength":1024,"minLength":0,"type":"string"},"notification_template":{"description":"消息模板","maxLength":100,"minLength":1,"type":"string"},"project_id":{"description":"项目ID","maxLength":32,"minLength":32,"type":"string"},"rule_name":{"description":"规则名称\n只含有汉字数字、字母、下划线,不能以下划线等特殊符号开头和结尾,长度为 1 - 100","maxLength":100,"minLength":1,"type":"string"},"smn_topics":{"description":"SMN主题信息,不能大于5","items":{"$ref":"#/definitions/SmnTopics"},"maxItems":5,"minItems":1,"type":"array"},"time_zone":{"description":"时区","maxLength":100,"minLength":1,"type":"string"},"type":{"description":"规则类型。\"1\":通知,\"2\":用户","enum":["1","2"],"maxLength":1,"minLength":1,"type":"string"},"update_time":{"description":"修改时间","format":"int64","maximum":9999999999999,"minimum":0,"type":"integer"},"user_name":{"description":"子账号名称","maxLength":100,"minLength":1,"type":"string"}},"required":["rule_name","project_id","user_name","type","notification_template","smn_topics"],"type":"object"},"ApiException":{"properties":{"error_code":{"description":"错误码","example":"AOM.02007102","maxLength":12,"minLength":12,"type":"string"},"error_msg":{"description":"错误信息","example":"this Threshold has been existed","maxLength":1024,"minLength":0,"type":"string"},"error_type":{"description":"错误类型","example":"BAD_REQUEST","maxLength":128,"minLength":0,"type":"string"},"trace_id":{"description":"请求id","example":"8fb508e9e31b44279016f708e1c60e4c","maxLength":32,"minLength":32,"type":"string"}},"type":"object"},"ResultInfo1":{"properties":{"error_code":{"description":"响应码。","example":"AOM.08001005","maxLength":13,"minLength":13,"type":"string"},"error_msg":{"description":"响应信息描述。","example":null,"maxLength":100,"minLength":1,"type":"string"},"trace_id":{"description":"响应id。","maxLength":12,"minLength":12,"type":"string"}},"type":"object"},"SmnTopics":{"description":"smn主题相关信息","properties":{"display_name":{"description":"Topic的显示名,推送邮件消息时,作为邮件发件人显示。显示名的长度为192byte或64个中文。默认值为空。","maxLength":64,"minLength":1,"type":"string"},"name":{"description":"创建topic的名字。Topic名称只能包含大写字母、小写字母、数字、-和_,且必须由大写字母、小写字母或数字开头,长度为1到255个字符。","maxLength":255,"minLength":1,"type":"string"},"push_policy":{"description":"SMN消息推送策略。取值为0或1","format":"int32","maximum":1,"minimum":0,"type":"integer"},"status":{"description":"topic中订阅者的状态。0:主题已删除或主题下订阅列表为空。1:主题下的订阅列表存在状态为“已订阅”的订阅信息。2:主题下的订阅信息状态处于“未订阅”或“已取消”。","enum":[0,1,2],"format":"int32","type":"integer"},"topic_urn":{"description":"Topic的唯一的资源标识。","maxLength":100,"minLength":1,"type":"string"}},"required":["name","push_policy","topic_urn"],"type":"object"}},"description":null,"group_id":"ac32153cf89a435d96dd423fdce82920","host":"aom.cn-north-4.myhuaweicloud.com","id":"928350e322624ff88cba99ec952a9189","info_version":"v2","method":"post","name":"AddActionRule","parameters":{},"paths":{"/v2/{project_id}/alert/action-rules":{"post":{"description":"新增告警行动规则。","operationId":"AddActionRule","parameters":[{"description":"租户从IAM申请到的projectid,一般为32位字符串。","in":"path","maxLength":32,"minLength":32,"name":"project_id","required":true,"type":"string"},{"description":"告警行动规则","in":"body","name":"AddActionRuleRequestBody","required":true,"schema":{"$ref":"#/definitions/ActionRule"}},{"description":"从IAM服务获取的用户Token。","in":"header","maxLength":40960,"minLength":1,"name":"X-Auth-Token","required":true,"type":"string"},{"description":"指定类型为application/json。","enum":["application/json"],"in":"header","name":"Content-Type","required":true,"type":"string"}],"produces":["application/json"],"responses":{"200":{"description":"OK  添加成功"},"400":{"description":"BadRequest 非法请求。建议直接修改该请求,不要重试该请求。","examples":{"application/json":{"error_code":"AOM.08018012","error_msg":"actionRule already exists","trace_id":""}},"schema":{"$ref":"#/definitions/ResultInfo1"}},"401":{"description":"Unauthorized  在客户端提供认证信息后,返回该状态码,表明服务端指出客户端所提供的认证信息不正确或非法。","examples":{"application/json":{"error_code":"AOM.0403","error_msg":"auth failed.","error_type":"AUTH_FAILED","trace_id":null}},"schema":{"$ref":"#/definitions/ApiException"}},"403":{"description":"Forbidden 请求被拒绝访问。返回该状态码,表明请求能够到达服务端,且服务端能够理解用户请求,但是拒绝做更多的事情,因为该请求被设置为拒绝访问,建议直接修改该请求,不要重试该请求。","examples":{"application/json":{"error_code":"AOM.0403","error_msg":"auth failed.","error_type":"AUTH_FAILED","trace_id":null}},"schema":{"$ref":"#/definitions/ApiException"}},"500":{"description":"InternalServerError 表明服务端能被请求访问到,但是不能理解用户的请求。","examples":{"application/json":{"error_code":"APM.00000500","error_msg":"Internal Server Error","trace_id":""}},"schema":{"$ref":"#/definitions/ResultInfo1"}}},"summary":"新增告警行动规则","tags":["告警"],"x-is-registered":"Y","x-open-region-cloud":"hws,hws_hk,hws_eu,dt,ocb,ctc,cmcc,tm,g42,sbc","x-request-examples-1":{"desc":"1111","notification_template":"aom.built-in.template.zh","project_id":"21axxxxxxxxxxxxxxxxx47c","rule_name":"66666","smn_topics":[{"display_name":"","name":"xiaohama","push_policy":0,"status":0,"topic_urn":"urn:smn:xxx:21axxxxxxxxxxxxxxxxx47c:xiaohama"}],"time_zone":"xxx","type":"1","user_name":"kxxxxxxxt"},"x-request-examples-description-1":"新增一条行动规则名称为\"66666\"、用户名称为\"kxxxxxxxt\"、用户id为\"21axxxxxxxxxxxxxxxxx47c\"且采用\"aom.built-in.template.zh\"通知模板的告警行动规则。","x-request-examples-text-1":{"desc":"1111","notification_template":"aom.built-in.template.zh","project_id":"21axxxxxxxxxxxxxxxxx47c","rule_name":"66666","smn_topics":[{"display_name":"","name":"xiaohama","push_policy":0,"status":0,"topic_urn":"urn:smn:xxx:21axxxxxxxxxxxxxxxxx47c:xiaohama"}],"time_zone":"xxx","type":"1","user_name":"kxxxxxxxt"},"x-request-examples-url-1":"https://{Endpoint}/v2/{project_id}/alert/action-rules","x-support-sdk":"Y"}}},"product_short":"AOM","region_id":"cn-north-4","schemes":["HTTPS"],"security_definitions":null,"summary":"新增告警行动规则","tags":"告警","uri":null,"version":"2.0"}