{"base_path":"/","components":null,"consumes":"","definitions":{"ApiException":{"properties":{"error_code":{"description":"错误码","example":"AOM.02007102","maxLength":12,"minLength":12,"type":"string"},"error_msg":{"description":"错误信息","example":"this Threshold has been existed","maxLength":1024,"minLength":0,"type":"string"},"error_type":{"description":"错误类型","example":"BAD_REQUEST","maxLength":128,"minLength":0,"type":"string"},"trace_id":{"description":"请求id","example":"8fb508e9e31b44279016f708e1c60e4c","maxLength":32,"minLength":32,"type":"string"}},"type":"object"},"Event2alarmRuleBody":{"description":"事件类告警实体","properties":{"action_rule":{"description":"告警行动规则","example":11111,"maxLength":128,"minLength":0,"type":"string"},"alarm_type":{"description":"告警类型。notification:直接告警。denoising:告警降噪。","enum":["notification","denoising"],"example":"notification","maxLength":32,"minLength":0,"type":"string"},"create_time":{"description":"创建时间","example":1667315736507,"format":"int32","maximum":9999999999999,"minimum":0,"type":"integer"},"description":{"description":"规则描述。描述包含大小写字母,数字,特殊字符(_-<>=,.)和汉字组成,不能以下划线、中划线开头结尾,最大长度为1024。","example":"","maxLength":1024,"minLength":0,"type":"string"},"enable":{"description":"规则是否启用","example":true,"type":"boolean"},"event_names":{"description":"事件名称","items":{"type":"string"},"type":"array"},"inhibit_rule":{"description":"告警抑制规则","example":"","maxLength":128,"minLength":0,"type":"string"},"metadata":{"description":"源数据","properties":{"customField":{"description":"用户自定义标签","example":["a=1"],"items":{"maxLength":1024,"minLength":0,"type":"string"},"maxItems":1024,"minItems":0,"type":"array"}}},"migrated":{"description":"是否迁移到2.0","type":"boolean"},"name":{"description":"规则名称。规则名称包含大小写字母,数字,特殊字符(_-)和汉字组成,不能以特殊字符开头或结尾,最大长度为100。","example":"scl_test_event1","maxLength":100,"minLength":1,"type":"string"},"resource_provider":{"description":"事件源","example":"AOM","maxLength":64,"minLength":0,"type":"string"},"route_group_rule":{"description":"告警分组规则","example":"","maxLength":128,"minLength":0,"type":"string"},"topics":{"description":"smn信息","items":{"$ref":"#/definitions/SmnTopics"},"type":"array"},"trigger_policies":{"description":"触发策略","items":{"properties":{"count":{"description":"触发次数","example":99,"format":"int32","maximum":100,"minimum":1,"type":"integer"},"id":{"description":"自增编号","example":0,"format":"int32","maximum":128,"minimum":0,"type":"integer"},"level":{"description":"告警等级","example":"","maxLength":32,"minLength":0,"type":"string"},"name":{"description":"事件名称","example":"","maxLength":128,"minLength":0,"type":"string"},"operator":{"description":"比较符","example":">=","maxLength":8,"minLength":0,"type":"string"},"period":{"description":"触发周期","example":300,"format":"int32","maximum":86400,"minimum":1,"type":"integer"},"trigger_type":{"description":"触发类型。accumulative: 累计触发,immediately: 立即触发","enum":["accumulative","immediately"],"example":"accumulative: 累计触发,immediately: 立即触发","maxLength":128,"minLength":0,"type":"string"}}},"maxItems":1024,"minItems":0,"type":"array"},"update_time":{"description":"更新时间","example":0,"format":"int32","maximum":9999999999999,"minimum":0,"type":"integer"},"user_id":{"description":"用户项目id","example":"2a473356cca5487f8373be891bffc1cf","maxLength":32,"minLength":32,"type":"string"}},"required":["user_id","name","create_time","metadata","enable","trigger_policies","alarm_type","action_rule"],"type":"object"},"SmnTopics":{"description":"smn主题相关信息","properties":{"display_name":{"description":"Topic的显示名,推送邮件消息时,作为邮件发件人显示。显示名的长度为192byte或64个中文。默认值为空。","maxLength":64,"minLength":1,"type":"string"},"name":{"description":"创建topic的名字。Topic名称只能包含大写字母、小写字母、数字、-和_,且必须由大写字母、小写字母或数字开头,长度为1到255个字符。","maxLength":255,"minLength":1,"type":"string"},"push_policy":{"description":"SMN消息推送策略。取值为0或1","format":"int32","maximum":1,"minimum":0,"type":"integer"},"status":{"description":"topic中订阅者的状态。0:主题已删除或主题下订阅列表为空。1:主题下的订阅列表存在状态为“已订阅”的订阅信息。2:主题下的订阅信息状态处于“未订阅”或“已取消”。","enum":[0,1,2],"format":"int32","type":"integer"},"topic_urn":{"description":"Topic的唯一的资源标识。","maxLength":100,"minLength":1,"type":"string"}},"required":["name","push_policy","topic_urn"],"type":"object"}},"description":null,"group_id":"ac32153cf89a435d96dd423fdce82920","host":"aom.cn-north-4.myhuaweicloud.com","id":"585dcc08da394ce38a1bbe9e2b609f31","info_version":"v2","method":"put","name":"UpdateEventRule","parameters":{},"paths":{"/v2/{project_id}/event2alarm-rule":{"put":{"consumes":["application/json"],"deprecated":false,"description":"更新事件类告警规则。","operationId":"UpdateEventRule","parameters":[{"description":"租户从IAM申请到的projectid,一般为32位字符串。","in":"path","maxLength":32,"minLength":32,"name":"project_id","required":true,"type":"string"},{"description":"从IAM服务获取的用户Token。","in":"header","maxLength":40960,"minLength":0,"name":"X-Auth-Token","required":false,"type":"string"},{"description":"指定类型为application/json。","enum":["application/json"],"in":"header","name":"Content-Type","required":true,"type":"string"},{"description":"事件类告警规则实体","in":"body","name":"UpdateEventRuleRequestBody","required":false,"schema":{"$ref":"#/definitions/Event2alarmRuleBody"}}],"produces":["application/json"],"responses":{"204":{"description":"OK 请求响应成功。","examples":{"application/json":" "},"schema":{"type":"string"}},"400":{"description":"BadRequest 非法请求。建议直接修改该请求,不要重试该请求。","examples":{"application/json":{"error_code":"AOM.02021003","error_msg":"input alarm rule or description is invalid","trace_id":""}},"schema":{"$ref":"#/definitions/ApiException"}},"401":{"description":"Unauthorized  在客户端提供认证信息后,返回该状态码,表明服务端指出客户端所提供的认证信息不正确或非法。","examples":{"application/json":{"error_code":"SVCSTG.AMS.2000051","error_msg":"auth failed.","error_type":"AUTH_FAILED"}},"schema":{"$ref":"#/definitions/ApiException"}},"403":{"description":"Forbidden 请求被拒绝访问。返回该状态码,表明请求能够到达服务端,且服务端能够理解用户请求,但是拒绝做更多的事情,因为该请求被设置为拒绝访问,建议直接修改该请求,不要重试该请求。","examples":{"application/json":{"error_code":"AOM.0403","error_msg":"auth failed.","error_type":"AUTH_FAILED"}},"schema":{"$ref":"#/definitions/ApiException"}},"500":{"description":"InternalServerError 表明服务端能被请求访问到,但是不能理解用户的请求。","examples":{"application/json":{"error_code":"AOM.02021500","error_message":"SC_INTERNAL_SERVER_ERROR","trace_id":""}},"schema":{"$ref":"#/definitions/ApiException"}}},"summary":"更新事件类告警规则","tags":["告警"],"x-api-type":"open-api","x-is-registered":"Y","x-open-region-cloud":"hws,hws_hk,hws_eu,dt,ocb,ctc,cmcc,tm,g42,sbc","x-order":2,"x-request-examples-1":{"action_rule":"111111","alarm_type":"notification","create_time":1669276304343,"description":"","enable":true,"inhibit_rule":"","metadata":{"customField":["xxx"]},"name":"scl_test_event","resource_provider":"AOM","route_group_rule":"","trigger_policies":[{"count":99,"id":0,"level":"","name":"","operator":">=","period":300,"trigger_type":"accumulative"}],"update_time":1669276304343,"user_id":"xxxxxxx"},"x-request-examples-description-1":"更新用户id为\"xxxxxxx\"、事件来源为\"AOM\"且名称为\"scl_test_event\"的事件类告警规则","x-request-examples-text-1":{"action_rule":"111111","alarm_type":"notification","create_time":1669276304343,"description":"","enable":true,"inhibit_rule":"","metadata":{"customField":["xxx"]},"name":"scl_test_event","resource_provider":"AOM","route_group_rule":"","trigger_policies":[{"count":99,"id":0,"level":"","name":"","operator":">=","period":300,"trigger_type":"accumulative"}],"update_time":1669276304343,"user_id":"xxxxxxx"},"x-request-examples-url-1":"https://{endpoint}/v2/{project_id}/event2alarm-rule","x-support-sdk":"Y"}}},"product_short":"AOM","region_id":"cn-north-4","schemes":["HTTPS"],"security_definitions":null,"summary":"更新事件类告警规则","tags":"告警","uri":null,"version":"2.0"}