{"base_path":"/","components":null,"consumes":"","definitions":{"AddAlarmRuleBadRequestResultInfo":{"properties":{"error_code":{"description":"错误码。","type":"string"},"error_msg":{"description":"错误信息描述。","type":"string"},"error_type":{"description":"错误类型。","type":"string"},"trace_id":{"description":"跟踪编号。主要用于开发人员快速搜索日志,定位问题。当返回的状态码为2xx时,trace_id为空;当返回4xx的状态码时,trace_id不为空。","type":"string"}},"type":"object"},"AddAlarmRuleResultInfo":{"description":"添加阈值规则结果","properties":{"alarm_rule_id":{"description":"阈值规则id。","format":"int64","type":"integer"}},"type":"object"},"AlarmRuleParam":{"description":"阈值规则实体","properties":{"action_enabled":{"description":"是否启用通知。","type":"boolean"},"alarm_actions":{"description":"告警状态通知列表。","items":{"type":"string"},"type":"array"},"alarm_advice":{"description":"告警清除建议。","maxLength":255,"minLength":0,"type":"string"},"alarm_description":{"description":"阈值规则描述。","maxLength":1024,"minLength":0,"type":"string"},"alarm_level":{"description":"告警级别。1:紧急,2:重要,3:一般,4:提示。","enum":[1,2,3,4],"format":"int32","type":"integer"},"alarm_rule_name":{"description":"阈值规则名称。规则名称包含大小写字母、数字、特殊字符(-_)和汉字组成,不能以特殊字符开头或结尾,最大长度为100。","type":"string"},"comparison_operator":{"description":"超限条件。<:小于阈值。>:大于阈值。<=:小于等于阈值。>=:大于等于阈值。","enum":["<",">","<=",">="],"type":"string"},"dimensions":{"description":"时间序列维度。","items":{"$ref":"#/definitions/Dimension"},"type":"array"},"evaluation_periods":{"description":"间隔周期。","exclusiveMaximum":true,"exclusiveMinimum":true,"format":"int32","maximum":5,"minimum":1,"type":"integer"},"insufficient_data_actions":{"description":"数据不足通知列表。","items":{"type":"string"},"type":"array"},"is_turn_on":{"description":"阈值规则是否启用。","type":"boolean"},"metric_name":{"description":"时间序列名称。名称长度取值范围为1~255个字符。","type":"string"},"namespace":{"description":"时间序列命名空间。","type":"string"},"ok_actions":{"description":"正常状态通知列表。","items":{"type":"string"},"type":"array"},"period":{"description":"统计周期。60000:一分钟。300000:五分钟。900000:十五分钟。3600000:一小时。","enum":[60000,300000,900000,3600000],"format":"int32","type":"integer"},"statistic":{"description":"统计方式。","enum":["maximum","minimum","average","sum","sampleCount"],"type":"string"},"threshold":{"description":"超限值。","type":"string"},"unit":{"description":"时间序列单位","type":"string"}},"required":["alarm_level","alarm_rule_name","comparison_operator","dimensions","evaluation_periods","metric_name","namespace","period","statistic","threshold","unit"],"type":"object"},"Dimension":{"description":"指标维度。","properties":{"name":{"description":"维度名称。","type":"string"},"value":{"description":"维度取值。","type":"string"}},"required":["name","value"]}},"description":null,"group_id":"ac32153cf89a435d96dd423fdce82920","host":"aom.cn-north-4.myhuaweicloud.com","id":"610d195f5c6e4d11802b0032547593ef","info_version":"v2","method":"post","name":"AddAlarmRule","parameters":{},"paths":{"/v2/{project_id}/alarm-rules":{"post":{"consumes":["application/json"],"description":"该接口用于添加一条阈值规则。","operationId":"AddAlarmRule","parameters":[{"description":"租户从IAM申请到的projectid,一般为32位字符串。","in":"path","name":"project_id","required":true,"type":"string"},{"description":"从IAM服务获取的用户Token。","in":"header","name":"X-Auth-Token","required":true,"type":"string"},{"description":"指定类型为application/json。","enum":["application/json"],"in":"header","name":"Content-Type","required":true,"type":"string"},{"description":"添加一条阈值规则。","in":"body","name":"addAlarmRuleBody","required":true,"schema":{"$ref":"#/definitions/AlarmRuleParam"}}],"produces":["application/json"],"responses":{"200":{"description":"OK 请求响应成功。","examples":{"application/json":{"alarm_rule_id":1134050083814244400}},"schema":{"$ref":"#/definitions/AddAlarmRuleResultInfo"}},"400":{"description":"BadRequest 非法请求。建议直接修改该请求,不要重试该请求。","examples":{"application/json":{"error_code":"AOM.02001102","error_msg":"this Threshold rule name has been existed","error_type":"BAD_REQUEST","trace_id":""}},"schema":{"$ref":"#/definitions/AddAlarmRuleBadRequestResultInfo"}},"401":{"description":"Unauthorized 在客户端提供认证信息后,返回该状态码,表明服务端指出客户端所提供的认证信息不正确或非法。","schema":{"type":"string"}},"403":{"description":"Forbidden 请求被拒绝访问。返回该状态码,表明请求能够到达服务端,且服务端能够理解用户请求,但是拒绝做更多的事情,因为该请求被设置为拒绝访问,建议直接修改该请求,不要重试该请求。","schema":{"type":"string"}},"500":{"description":"InternalServerError 表明服务端能被请求访问到,但是不能理解用户的请求。","examples":{"application/json":{"error_code":"AOM.02001500","error_msg":"internal server error","error_type":"INTERNAL_SERVER_ERROR","trace_id":""}},"schema":{"$ref":"#/definitions/AddAlarmRuleBadRequestResultInfo"}},"503":{"description":"ServiceUnavailable 被请求的服务无效。建议直接修改该请求,不要重试该请求。","schema":{"type":"string"}}},"summary":"添加阈值规则","tags":["监控"],"x-api-type":"open-api","x-is-registered":"Y","x-request-examples-1":{"action_enabled":false,"alarm_actions":[],"alarm_advice":"","alarm_description":"","alarm_level":3,"alarm_rule_name":"aom_rule","comparison_operator":">=","dimensions":[{"name":"appName","value":"rhm-broker"}],"evaluation_periods":1,"insufficient_data_actions":[],"is_turn_on":true,"metric_name":"cpuCoreLimit","namespace":"PAAS.CONTAINER","ok_actions":[],"period":60000,"statistic":"average","threshold":"0","unit":"Core"},"x-request-examples-description-1":"添加一条名称为“testaom”、告警等级为“3”、所属命名空间为“PAAS.CONTAINER”且以“average”形式计算的阈值规则。","x-request-examples-text-1":{"action_enabled":false,"alarm_actions":[],"alarm_advice":"","alarm_description":"","alarm_level":3,"alarm_rule_name":"aom_rule","comparison_operator":">=","dimensions":[{"name":"appName","value":"rhm-broker"}],"evaluation_periods":1,"insufficient_data_actions":[],"is_turn_on":true,"metric_name":"cpuCoreLimit","namespace":"PAAS.CONTAINER","ok_actions":[],"period":60000,"statistic":"average","threshold":0,"unit":"Core"},"x-request-examples-url-1":"https://{Endpoint}/v2/{project_id}/alarm-rules","x-support-sdk":"Y"}}},"product_short":"AOM","region_id":"cn-north-4","schemes":["HTTPS"],"security_definitions":null,"summary":"添加阈值规则","tags":"监控","uri":null,"version":"2.0"}