{"base_path":"/","components":null,"consumes":"","definitions":{"ErrorDetail":{"properties":{"error":{"description":"错误信息。","type":"string"},"errorType":{"description":"错误类型。","type":"string"},"status":{"description":"响应状态。","type":"string"}}},"ResultDetail":{"properties":{"data":{"description":"响应数据。","type":"object"},"status":{"description":"响应状态。","type":"string"}}}},"description":null,"group_id":"ac32153cf89a435d96dd423fdce82920","host":"aom.cn-north-4.myhuaweicloud.com","id":"d1292b0862b64abaab6e16afeda9de60","info_version":"v2","method":"post","name":"ListRangeQueryAomPromPost","parameters":{},"paths":{"/v1/{project_id}/aom/api/v1/query_range":{"post":{"description":"该接口使用POST方法查询PromQL(Prometheus Query Language)在一段时间返回内的计算结果。(注:接口目前开放的region为:北京四、上海一和广州)。","operationId":"ListRangeQueryAomPromPost","parameters":[{"description":"从IAM服务获取的用户Token。","in":"header","name":"X-Auth-Token","required":true,"type":"string"},{"description":"PromQL表达式(参考https://prometheus.io/docs/prometheus/latest/querying/basics/)。","in":"query","name":"query","required":true,"type":"string"},{"description":"起始时间戳(Unix时间戳格式,单位:秒)。","in":"query","name":"start","required":true,"type":"string"},{"description":"结束时间戳(Unix时间戳格式,单位:秒)。","in":"query","name":"end","required":true,"type":"string"},{"description":"租户从IAM申请到的projectid,一般为32位字符串。","in":"path","name":"project_id","required":true,"type":"string"},{"description":"查询时间步长,时间区内每step秒执行一次。","in":"query","name":"step","required":true,"type":"string"}],"responses":{"200":{"description":"OK 请求响应成功。","examples":{"application/json":{"data":{"result":[{"metric":{"__name__":"amm_node_status","clusterId":"000000-0000-0000-0000-0000000","hostID":"c9xxcb-2x6c-4h54-8fcd-f68xx85","nameSpace":"default","nodeIP":"1xx.1xx.0.1xx","nodeName":"sis-xxn-amm"},"values":[[1630386780,"0"],[1630388610,"0"],[1630388625,"0"]]},{"metric":{"__name__":"amm_node_status","clusterId":"00000000-0000-0000-0000-00000000","hostID":"ec5xxxb-0xx8-4xxx-bxx-9ecxxf","nameSpace":"default","nodeIP":"1xx.168.0.1x","nodeName":"fdx-ibxxst"},"values":[[1630388265,"0"],[1630388280,"0"],[1630388295,"0"]]}],"resultType":"matrix"},"status":"success"}},"schema":{"$ref":"#/definitions/ResultDetail"}},"400":{"description":"BadRequest 非法请求。建议直接修改该请求,不要重试该请求。","examples":{"application/json":{"error":"param is invalid.","errorType":"bad_param","status":"error"}},"schema":{"$ref":"#/definitions/ErrorDetail"}},"403":{"description":"Forbidden 请求被拒绝访问。返回该状态码,表明请求能够到达服务端,且服务端能够理解用户请求,但是拒绝做更多的事情,因为该请求被设置为拒绝访问,建议直接修改该请求,不要重试该请求。","examples":{"application/json":{"error":"auth project_id not pass.","errorType":"auth","status":"error"}},"schema":{"$ref":"#/definitions/ErrorDetail"}},"422":{"description":"Unprocessable 表达式无法执行。","examples":{"application/json":{"error":"expression can't be executed.","errorType":"excution","status":"error"}},"schema":{"$ref":"#/definitions/ErrorDetail"}},"503":{"description":"ServiceUnavailable 被请求的服务无效。建议直接修改该请求,不要重试该请求。","examples":{"application/json":{"error":"query timed out in query execution.","errorType":"timeout","status":"error"}},"schema":{"$ref":"#/definitions/ErrorDetail"}}},"schemes":["https"],"summary":"(推荐)POST方法查询区间数据","tags":["prometheus监控"],"x-is-registered":"Y","x-open-region-cloud":"hws,hws_hk","x-request-examples-description-1":"查询在start到end时间范围内每隔step秒的aom_node_status指标(前topk个)。","x-request-examples-url-1":"https://{EndPoint}/v1/{project_id}/aom/api/v1/query_range?query=topk(2,aom_node_status)&start=1630386780&end=1630390380&step=15","x-support-sdk":"Y"}}},"product_short":"AOM","region_id":"cn-north-4","schemes":["HTTPS"],"security_definitions":null,"summary":"(推荐)POST方法查询区间数据","tags":"prometheus监控","uri":null,"version":"2.0"}