{"base_path":"/v1","components":null,"consumes":"","definitions":{"ApproveInfo":{"description":"审批信息","properties":{"need_approve":{"description":"是否审核,默认是不审核,true,false。","example":true,"type":"boolean"},"smn_urn_list":{"description":"审批主题urn集合。","maxLength":2048,"minLength":1,"type":"string"},"topic_selected":{"description":"审批人主题选择。","maxLength":2048,"minLength":1,"type":"string"}},"type":"object"},"ListTemplateByJobIdRequestBody":{"description":"根据作业id分页查询方案集合","properties":{"name":{"description":"方案名称","maxLength":64,"minLength":1,"type":"string"},"order_by_column":{"description":"需要排序的字段(默认为更新时间),支持字段有name,create_time,update_time。","maxLength":16,"minLength":1,"type":"string"},"page_num":{"description":"page_num为正整数","format":"int32","maximum":9999999,"minimum":1,"type":"integer"},"page_size":{"description":"每页显示的条数","format":"int32","maximum":100,"minimum":1,"type":"integer"},"sort_order":{"description":"排序规则(默认降序) 传入升序或降序,升序:ASC,降序:DESC。","maxLength":16,"minLength":1,"type":"string"}},"required":["order_by_column"],"type":"object"},"Metadata":{"description":"任务节点元数据。","properties":{"configuration":{"additionalProperties":{"type":"object"},"description":"配置信息。","example":"NOdeConfiguration","type":"object"},"type":{"description":"节点类型。","example":"start,end,opeartor,foreach","maxLength":32,"minLength":1,"type":"string"}},"type":"object"},"Node":{"description":"任务节点定义。","properties":{"category":{"description":"节点类型。","example":"service","maxLength":32,"minLength":1,"type":"string"},"description":{"description":"节点描述。","example":"wad","maxLength":1024,"minLength":1,"type":"string"},"id":{"description":"节点id","example":"2ed4e082a4714e539cef77c57473fb19","maxLength":64,"minLength":1,"type":"string"},"ignore_error":{"description":"是否忽略错误","example":false,"type":"boolean"},"metadata":{"$ref":"#/definitions/Metadata","description":"元数据。"},"name":{"description":"节点名称,比如是Node。","example":1,"maxLength":64,"minLength":1,"type":"string"},"parent_node":{"description":"父亲节点的名称。","example":"parentNodeName","maxLength":64,"minLength":1,"type":"string"},"task_name":{"description":"任务名称,节点上任务的名称。","example":"CMS::ECS::runScript","maxLength":64,"minLength":1,"type":"string"}},"type":"object"},"Parameter":{"allOf":[{"$ref":"#/definitions/TaskParam"},{"properties":{"description":{"description":"参数描述。","maxLength":1000,"minLength":1,"type":"string"},"encryption":{"description":"是否加密。","example":true,"type":"boolean"},"hint":{"description":"参数提示。","maxLength":1000,"minLength":1,"type":"string"},"id":{"description":"参数id。","maxLength":64,"minLength":1,"type":"string"},"quote_param":{"description":"是否从参数库选择。","example":true,"type":"boolean"},"required":{"description":"是否为必填参数。","example":true,"type":"boolean"}},"required":["encryption","quote_param","required"],"type":"object"}],"description":"全局参数"},"RateControl":{"properties":{"have_rate_control":{"description":"是否分批发布,默认值是false。","example":true,"type":"boolean"},"max":{"description":"每批支持的最大实例数。","format":"int32","maximum":100,"minimum":0,"type":"integer"},"time_delay":{"description":"每批间隔。","format":"int32","maximum":60,"minimum":1,"type":"integer"}},"type":"object"},"ResultInfo":{"description":"调用失败时的返回值。","properties":{"error_code":{"description":"响应码。","maxLength":64,"minLength":1,"type":"string"},"error_msg":{"description":"调用失败响应信息描述。","maxLength":1024,"minLength":1,"type":"string"},"http_code":{"description":"http返回码","format":"int32","maximum":999,"minimum":0,"type":"integer"}},"required":["error_code","error_msg","http_code"],"type":"object"},"Step":{"description":"创建作业时的步骤参数","properties":{"description":{"description":"步骤说明。","maxLength":1000,"minLength":1,"type":"string"},"id":{"description":"步骤id。","maxLength":64,"minLength":1,"type":"string"},"ignore_error":{"description":"是否自动忽略错误。","example":true,"type":"boolean"},"input":{"additionalProperties":{"maxLength":9999999999999,"minLength":1,"type":"string"},"description":"步骤参数。","type":"object"},"name":{"description":"步骤名称。","maxLength":32,"minLength":1,"type":"string"},"type":{"description":"步骤类型。","example":"script,package,stop","maxLength":16,"minLength":1,"type":"string"}},"required":["ignore_error"],"type":"object"},"TaskParam":{"description":"任务参数对象。","properties":{"default_value":{"description":"参数初始值。","maxLength":40960,"minLength":1,"type":"string"},"param_group":{"description":"参数分组。","example":"ecs_instance","maxLength":32,"minLength":1,"type":"string"},"param_name":{"description":"参数名称。","example":"get_instances","pattern":"[^\\>+<;#\";&?%=']{1,64}","type":"string"},"param_type":{"description":"参数类型。","example":"STRING,LIST,HOST","maxLength":16,"minLength":1,"type":"string"}},"required":["param_name"],"type":"object"},"Template":{"description":"变更服务模板模板元数据。","properties":{"approve_info":{"$ref":"#/definitions/ApproveInfo","description":"审批信息"},"create_by":{"description":"模板创建人,从接口调用传入的token中获取。","example":"kaifatest","maxLength":64,"minLength":1,"type":"string"},"create_time":{"description":"模板创建时间,为utc时间毫秒数。","example":1669284066263,"format":"int64","maximum":9999999999999,"minimum":0,"type":"integer"},"enterprise_project_id":{"description":"企业项目id","example":0,"maxLength":64,"minLength":1,"type":"string"},"id":{"description":"模板id,唯一标识,根据project_id和template_name生成。","example":"32f588a7df0e4b0da790e18a6049eb91","maxLength":64,"minLength":1,"type":"string"},"is_collect":{"description":"模板是否收藏,不允许更新模板时修改,更改收藏状态调用单独的更新模板收藏状态接口","example":false,"type":"boolean"},"is_publish":{"description":"是否发布成服务","example":false,"type":"boolean"},"job_id":{"description":"作业id","example":"3d830b6c16014e1986aab8f4f6123585","maxLength":64,"minLength":1,"type":"string"},"job_version":{"description":"作业版本","example":2,"format":"int32","maximum":999,"minimum":1,"type":"integer"},"name":{"description":"模板名称","example":"2323dewaf","maxLength":64,"minLength":1,"type":"string"},"need_synchronize":{"description":"是否需要同步","example":false,"type":"boolean"},"nodes":{"description":"任务执行时需要的参数列表。","items":{"$ref":"#/definitions/Node"},"maxItems":20,"minItems":1,"type":"array"},"parameters":{"description":"任务执行时需要的参数列表。","items":{"$ref":"#/definitions/Parameter"},"maxItems":20,"minItems":0,"type":"array"},"project_id":{"description":"项目id","example":"2a473356cca5487f8373be891bffc1cf","maxLength":32,"minLength":32,"type":"string"},"quote":{"description":"引用参数","example":["isExist"],"items":{"maxLength":256,"minLength":1,"type":"string"},"maxItems":999,"minItems":0,"type":"array"},"rate_control":{"$ref":"#/definitions/RateControl","description":"执行策略"},"share_type":{"description":"默认模板为public,自定义模板为private","example":"private","maxLength":16,"minLength":1,"type":"string"},"steps":{"description":"作业步骤","items":{"$ref":"#/definitions/Step"},"maxItems":20,"minItems":1,"type":"array"},"update_by":{"description":"模板更新人,从接口调用传入的token中获取。","example":"kaifatest","maxLength":64,"minLength":1,"type":"string"},"update_time":{"description":"模板更新时间,为utc时间毫秒数。","example":1669284066263,"format":"int64","maximum":9999999999999,"minimum":0,"type":"integer"},"version":{"description":"模板版本","example":"v1","maxLength":32,"minLength":1,"type":"string"}},"type":"object"},"TemplatePageResult":{"description":"分页查询作业列表集合","properties":{"elements":{"description":"查询作业信息集合","items":{"$ref":"#/definitions/Template"},"maxItems":9999999,"minItems":0,"type":"array"},"total_elements":{"description":"总数","format":"int64","maximum":9999999,"minimum":0,"type":"integer"}},"required":["total_elements"],"type":"object"}},"description":null,"group_id":"ac32153cf89a435d96dd423fdce82920","host":"aom.cn-north-4.myhuaweicloud.com","id":"75641bb958614905a6322e8d0c907ceb","info_version":"v1","method":"post","name":"ListTemplateByJobId","parameters":{},"paths":{"/{project_id}/cms/template-list/{job_id}":{"post":{"consumes":["application/json"],"description":"该接口可根据作业ID查询执行方案,分页返回执行方案列表。(注:接口目前开放的region为:华北-北京四,华东-上海一,华东-上海二,华南-广州)。","operationId":"ListTemplateByJobId","parameters":[{"description":"租户从IAM申请到的projectid,一般为32位字符串。","in":"path","maxLength":32,"minLength":32,"name":"project_id","required":true,"type":"string"},{"description":"作业id。","in":"path","maxLength":64,"minLength":1,"name":"job_id","required":true,"type":"string"},{"description":"分页查询参数。","in":"body","name":"ListTemplateByJobIdRequestBody","required":true,"schema":{"$ref":"#/definitions/ListTemplateByJobIdRequestBody"}},{"description":"从IAM服务获取的用户Token。","in":"header","maxLength":40960,"minLength":1,"name":"X-Auth-Token","required":true,"type":"string"},{"description":"指定类型为application/json。","in":"header","maxLength":32,"minLength":1,"name":"Content-Type","required":true,"type":"string"}],"produces":["application/json"],"responses":{"200":{"description":"请求响应成功,返回执行方案列表。","examples":{"application/json":{"elements":[{"approve_info":{"need_approve":false},"create_by":"xxxxx","create_time":1600073877378,"enterprise_project_id":"0","id":"xxxxxx","is_collect":false,"is_publish":false,"job_id":"xxxxx","job_version":1,"name":"t1","need_synchronize":false,"nodes":[{"category":"service","description":"","id":"xxxxx","ignore_error":false,"metadata":{"configuration":{"parameters":{"get_instances":"{xxxxx}","project_id":"{{project_id}}","region_id":"{{region_id}}","script_param":"{xxxx}"}},"type":"operation"},"name":"1","task_name":"CMS::ECS::runScript"},{"category":"service","description":"","id":"xxxxx","ignore_error":false,"metadata":{"configuration":{"parameters":{"get_instances":"{xxxxx}","package":"{xxxxxx}","project_id":"{{project_id}}","region_id":"{{region_id}}"}},"type":"operation"},"name":"xxx","task_name":"CMS::ECS::Package"}],"parameters":[],"project_id":"xxxxx","quote":[],"rate_control":{"have_rate_control":false,"max":0,"time_delay":0},"share_type":"private","steps":[{"description":"","id":"xxxxx","ignore_error":false,"input":{"get_instances":"{xxxxx}","script_param":"{xxxxx}"},"name":"xxxx","type":"script"},{"description":"","id":"xxxxx","ignore_error":false,"input":{"get_instances":"{xxxxx}","package":"{xxxxx}"},"name":"2","type":"package"}],"update_by":"xxxxx","update_time":1600073877378,"version":"v1"}],"total_elements":1}},"schema":{"$ref":"#/definitions/TemplatePageResult"}},"400":{"description":"BadRequest。非法请求。建议直接修改该请求,不要重试该请求。","examples":{"application/json":{"error_code":"AOM.31001202","error_msg":" parameter invalid.","http_code":400}},"schema":{"$ref":"#/definitions/ResultInfo"}},"401":{"description":"Unauthorized。在客户端提供认证信息后,返回该状态码,表明服务端指出客户端所提供的认证信息不正确或非法。","examples":{"application/json":{"error_code":"AOM.31009002","error_message":"auth failed.","http_code":"401"}},"schema":{"$ref":"#/definitions/ResultInfo"}}},"summary":"根据作业id查询方案(自定义模板)列表","tags":["自动化运维(即将下线)"],"x-is-registered":"Y","x-open-region-cloud":"hws","x-order":9,"x-request-examples-1":{"name":"xxxxxx","order_by_column":"create_time","page_num":0,"page_size":10,"sort_order":"DESC"},"x-request-examples-description-1":"根据作业id和作业name查询作业的执行方案列表。\n","x-request-examples-text-1":{"name":"xxxxxx","order_by_column":"create_time","page_num":0,"page_size":10,"sort_order":"DESC"},"x-request-examples-url-1":"POST https://{Endpoint}/v1/{project_id}/cms/template-list/{job_id}","x-support-sdk":"Y"}}},"product_short":"AOM","region_id":"cn-north-4","schemes":["HTTPS"],"security_definitions":null,"summary":"根据作业id查询方案(自定义模板)列表","tags":"自动化运维(即将下线)","uri":null,"version":"2.0"}