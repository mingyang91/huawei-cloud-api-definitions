{"base_path":"/","components":null,"consumes":"","definitions":{"ErrorResultModel":{"properties":{"error_code":{"description":"错误码。","type":"string"},"error_msg":{"description":"错误信息。","type":"string"},"error_type":{"description":"错误类型。","type":"string"},"trace_id":{"description":"链路id。","type":"string"}},"type":"object"},"RecordingRuleRequest":{"properties":{"recording_rule":{"description":"预聚合规则。\n待创建的预聚合规则详细信息。支持如下子参数:\n- groups:规则组。一份RecordingRule.yaml可以配置多组规则组。\n- name:规则组名称。规则组名称必须唯一。\n- interval:规则组的执行周期。默认60s。(可选)\n- rules:规则。一个规则组可以包含多条规则。\n- record:规则的名称。聚合规则的名称必须符合  [Prometheus指标名称规范](https://prometheus.io/docs/concepts/data_model/#metric-names-and-labels)。 \n- expr:计算表达式。Prometheus监控将通过该表达式计算得出预聚合指标。计算表达式必须符合[PromQL](https://prometheus.io/docs/prometheus/latest/querying/basics/)。\n- labels:指标的标签。标签必须符合[Prometheus指标标签规范](https://prometheus.io/docs/concepts/data_model/#metric-names-and-labels)。(可选)","type":"string"}},"required":["recording_rule"],"type":"object"}},"description":null,"group_id":"ac32153cf89a435d96dd423fdce82920","host":"aom.cn-north-4.myhuaweicloud.com","id":"77a6ad3404034cf68a8a57a4f4a9737a","info_version":"v2","method":"post","name":"CreateRecordingRule","parameters":{},"paths":{"/v1/{project_id}/{prometheus_instance}/aom/api/v1/rules":{"post":{"description":"该接口用于给Prometheus实例创建预聚合规则。","operationId":"CreateRecordingRule","parameters":[{"description":"租户从IAM申请到的projectid,一般为32位字符串。","in":"path","name":"project_id","required":true,"type":"string"},{"description":"从IAM服务获取的用户Token。","in":"header","name":"X-Auth-Token","required":true,"type":"string"},{"description":"指定类型为application/json。","in":"header","name":"Content-Type","required":true,"type":"string"},{"description":"prometheus实例id。","in":"path","name":"prometheus_instance","required":true,"type":"string"},{"description":"预聚合规则","in":"body","name":"createRecordingRuleRequestBody","required":true,"schema":{"$ref":"#/definitions/RecordingRuleRequest"}}],"responses":{"204":{"description":"OK 请求响应成功。","examples":{"application/json":""},"schema":{"type":"string"}},"500":{"description":"预聚合规则已经存在。","examples":{"application/json":{"error_code":"AOM.5001019","error_msg":"recording rule exist for the prometheus instance"}},"schema":{"$ref":"#/definitions/ErrorResultModel"}}},"schemes":["https"],"summary":"创建Prometheus实例的预聚合规则","tags":["Prometheus实例"],"x-api-type":"open-api","x-is-registered":"Y","x-open-region-cloud":"hws,hws_hk,hws_eu","x-order":3,"x-request-examples-1":{"recording_rule":"groups:\n    - name: apiserver_request_total\n      interval: 60s\n      rules:\n        - record: job_instance_mode:apiserver_request_total:avg_rate5m\n          expr: avg by (job, instance, mode) (rate(apiserver_request_total[5m]))\n          labels:\n            team: operations\n        - record: job:apiserver_request_total:sum_rate10m\n          expr: sum by (job)(rate(apiserver_request_total[10m]))\n          labels:\n            team: operations"},"x-request-examples-description-1":"给Prometheus实例创建预聚合规则。","x-request-examples-text-1":{"recording_rule":"groups:\n    - name: apiserver_request_total\n      interval: 60s\n      rules:\n        - record: job_instance_mode:apiserver_request_total:avg_rate5m\n          expr: avg by (job, instance, mode) (rate(apiserver_request_total[5m]))\n          labels:\n            team: operations\n        - record: job:apiserver_request_total:sum_rate10m\n          expr: sum by (job)(rate(apiserver_request_total[10m]))\n          labels:\n            team: operations"},"x-request-examples-url-1":"https://{Endpoint}/v1/{project_id}/{prometheus_instance}/aom/api/v1/rules","x-support-sdk":"Y"}}},"product_short":"AOM","region_id":"cn-north-4","schemes":["HTTPS"],"security_definitions":null,"summary":"创建Prometheus实例的预聚合规则","tags":"Prometheus实例","uri":null,"version":"2.0"}