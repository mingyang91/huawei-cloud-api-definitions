{"base_path":"/","components":null,"consumes":"","definitions":{"DataModel":{"description":"分页查询的数据详情","properties":{"data":{"description":"分页查询的数据。","items":{"type":"object"},"type":"array"},"page_info":{"description":"分页信息。","type":"object"}},"type":"object"},"NoPermissionError":{"properties":{"error_code":{"description":"AOM.30001005","type":"string"},"error_msg":{"description":"没有权限","type":"string"}}},"PageResourceListParam":{"allOf":[{"$ref":"#/definitions/WaterfallPageListParam"},{"properties":{"ci_id":{"description":"节点id列表;如果ci_ids和ci_id同时有,则优先ci_ids,但是不能同时为空。但是不支持应用批量查询","pattern":"^[a-zA-Z0-9\\-]{32,36}$","type":"string"},"ci_ids":{"description":"节点id列表;如果ci_ids和ci_id同时有,则优先ci_ids,但是不能同时为空","items":{"type":"string"},"type":"array"},"ci_region":{"description":"环境的region信息,若没有值,代表全部","pattern":"^[\\s\\S]{1,128}$","type":"string"},"ci_relationships":{"description":"是否需要返回拓扑树,默认是false。需要:true---性能差,不需要false--性能好","type":"boolean"},"ci_type":{"description":"节点类型,取值:application、sub_application、component、environment","enum":["APPLICATION","SUB_APPLICATION","COMPONENT","ENVIRONMENT"],"example":" \"ci_type\": \"environment\"","type":"string"},"keywords":{"additionalProperties":{"type":"string"},"description":"关键字模糊搜索。Key取值:NAME、RESOURCE_ID","type":"object"}},"required":["ci_type"],"type":"object"}],"example":{"ci_id":"05dd6cc5bf59456e8xxx6d2e250ff309","ci_type":"environment"}},"ParamsError":{"properties":{"error_code":{"description":"AOM.30005001","type":"string"},"error_msg":{"description":"参数错误","type":"string"}}},"WaterfallPageListParam":{"example":{"limit":2,"marker":"xxx"},"properties":{"limit":{"description":"查询返回记录的数量限制。limit可以为空,如果值小于1或者大于100,则会使用默认值100","format":"int32","type":"integer"},"marker":{"description":"页面的分页标志位,为分页的最后一条记录的id","type":"string"}},"type":"object"}},"description":null,"group_id":"ac32153cf89a435d96dd423fdce82920","host":"aom.cn-north-4.myhuaweicloud.com","id":"be2bb66f95734eecafcaa9c88af01692","info_version":"v3","method":"post","name":"ListResourceUnderNode","parameters":{},"paths":{"/v1/resource/{rf_resource_type}/type/{type}/ci-relationships":{"post":{"description":"查询绑定在节点上的资源列表。","operationId":"ListResourceUnderNode","parameters":[{"description":"云服务资源,同rms服务的provider","in":"path","name":"rf_resource_type","required":true,"type":"string"},{"description":"云服务资源类型,同rms服务的type","in":"path","name":"type","required":true,"type":"string"},{"description":"查询资源列表参数","in":"body","name":"ListResourceUnderNodeRequestBody","required":true,"schema":{"$ref":"#/definitions/PageResourceListParam"}},{"description":"从IAM服务获取的用户Token。","in":"header","name":"X-Auth-Token","required":true,"type":"string"},{"description":"指定类型为application/json,有Body体的情况下必选,没有Body体则无需填写和校验。","in":"header","name":"Content-Type","required":true,"type":"string"}],"responses":{"200":{"description":"资源关联返回的信息","examples":{"application/json":{"data":[{"addresses":[{"host_ip":"117.1.0.1","ip_type":"fixed","ip_version":4,"mac":null},{"host_ip":"179.1.0.1","ip_type":"floating","ip_version":4,"mac":null}],"agent_state":"UNINSTALLED","cloud_vendors":"His","env_ids":["63c2195e9da846258b113205184b2b53"],"id":"7015d303a8454f49a289dd47ada4b60c","resource_id":"aom_7015d303a8454f49a289dd47ada4b60c","resource_name":"luban121000000333","resource_region":"xxx","status":"ACTIVE","topology":[{"app_id":"07f6836530e24efdab068aacef933d4b","app_name":"test91","component_id":"b218263a62554ad6aa976908e4990cf3","component_name":"组件99","env_id":"63c2195e9da846258b113205184b2b53","env_name":"环境22","env_region":"xxx","os_type":"LINUX","sub_app_id":"b554711fb4774bf98cfbdfa955a2d640","sub_app_name":"sub-888"}],"vpc_id":" 6681507e-779e-4d0d-9421-5df07b95cca6 "},{"addresses":[{"host_ip":"1.3.4.5","ip_type":"fixed","ip_version":4,"mac":null}],"agent_state":"UNINSTALLED","cloud_vendors":"His","env_ids":["63c2195e9da846258b113205184b2b53"],"id":"2c6fd895c88742559f2fd6c57817cf93","resource_id":"aom_2c6fd895c88742559f2fd6c57817cf93","topology":[{"app_id":"07f6836530e24efdab068aacef933d4b","app_name":"test91","component_id":"b218263a62554ad6aa976908e4990cf3","component_name":"组件99","env_id":"63c2195e9da846258b113205184b2b53","env_name":"环境22","env_region":"xxx","os_type":"LINUX","sub_app_id":"b554711fb4774bf98cfbdfa955a2d640","sub_app_name":"sub-888"}]}],"page_info":{"current_count":2,"next_marker":null}}},"schema":{"$ref":"#/definitions/DataModel"}},"400":{"description":"参数错误","schema":{"$ref":"#/definitions/ParamsError"}},"403":{"description":"没有权限","schema":{"$ref":"#/definitions/NoPermissionError"}}},"security":[{"apig-auth-iam":[]}],"summary":"查询绑定在节点上的资源列表","tags":["应用资源管理(aom2.0接口)"],"x-api-type":"open-api","x-apigateway-match-mode":"normal","x-apigateway-request-type":"public","x-is-registered":"Y","x-open-region-cloud":"","x-order":12,"x-request-examples-1":{"ci_ids":["63c2195e9da846258b113205184b2b53"],"ci_relationships":true,"ci_type":"environment"},"x-request-examples-description-1":"获取节点下资源列表","x-request-examples-text-1":{"ci_ids":["63c2195e9da846258b113205184b2b53"],"ci_relationships":true,"ci_type":"environment"},"x-request-examples-url-1":"https://{Endpoint}/v1/resource/{rf_resource_type}/type/{type}/ci-relationships","x-support-sdk":"Y"}}},"product_short":"AOM","region_id":"cn-north-4","schemes":["HTTPS"],"security_definitions":{"apig-auth-iam":{"in":"header","name":"unused","type":"apiKey","x-apigateway-auth-type":"IAM"},"apig-auth-iam-none":{"in":"header","name":"unused","type":"apiKey","x-apigateway-auth-type":"IAM_NONE"},"x-auth-token":{"description":"IAM鉴权token","in":"header","name":"x-auth-token","type":"apiKey"}},"summary":"查询绑定在节点上的资源列表","tags":"应用资源管理(aom2.0接口)","uri":null,"version":"2.0"}