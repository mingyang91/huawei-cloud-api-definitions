{"base_path":"/v1","components":null,"consumes":"","definitions":{"ApproveInfo":{"description":"审批信息","properties":{"need_approve":{"description":"是否审核,默认是不审核,true,false。","example":true,"type":"boolean"},"smn_urn_list":{"description":"审批主题urn集合。","maxLength":2048,"minLength":1,"type":"string"},"topic_selected":{"description":"审批人主题选择。","maxLength":2048,"minLength":1,"type":"string"}},"type":"object"},"Metadata":{"description":"任务节点元数据。","properties":{"configuration":{"additionalProperties":{"type":"object"},"description":"配置信息。","example":"NOdeConfiguration","type":"object"},"type":{"description":"节点类型。","example":"start,end,opeartor,foreach","maxLength":32,"minLength":1,"type":"string"}},"type":"object"},"Node":{"description":"任务节点定义。","properties":{"category":{"description":"节点类型。","example":"service","maxLength":32,"minLength":1,"type":"string"},"description":{"description":"节点描述。","example":"wad","maxLength":1024,"minLength":1,"type":"string"},"id":{"description":"节点id","example":"2ed4e082a4714e539cef77c57473fb19","maxLength":64,"minLength":1,"type":"string"},"ignore_error":{"description":"是否忽略错误","example":false,"type":"boolean"},"metadata":{"$ref":"#/definitions/Metadata","description":"元数据。"},"name":{"description":"节点名称,比如是Node。","example":1,"maxLength":64,"minLength":1,"type":"string"},"parent_node":{"description":"父亲节点的名称。","example":"parentNodeName","maxLength":64,"minLength":1,"type":"string"},"task_name":{"description":"任务名称,节点上任务的名称。","example":"CMS::ECS::runScript","maxLength":64,"minLength":1,"type":"string"}},"type":"object"},"Parameter":{"allOf":[{"$ref":"#/definitions/TaskParam"},{"properties":{"description":{"description":"参数描述。","maxLength":1000,"minLength":1,"type":"string"},"encryption":{"description":"是否加密。","example":true,"type":"boolean"},"hint":{"description":"参数提示。","maxLength":1000,"minLength":1,"type":"string"},"id":{"description":"参数id。","maxLength":64,"minLength":1,"type":"string"},"quote_param":{"description":"是否从参数库选择。","example":true,"type":"boolean"},"required":{"description":"是否为必填参数。","example":true,"type":"boolean"}},"required":["encryption","quote_param","required"],"type":"object"}],"description":"全局参数"},"RateControl":{"properties":{"have_rate_control":{"description":"是否分批发布,默认值是false。","example":true,"type":"boolean"},"max":{"description":"每批支持的最大实例数。","format":"int32","maximum":100,"minimum":0,"type":"integer"},"time_delay":{"description":"每批间隔。","format":"int32","maximum":60,"minimum":1,"type":"integer"}},"type":"object"},"ResultInfo":{"description":"调用失败时的返回值。","properties":{"error_code":{"description":"响应码。","maxLength":64,"minLength":1,"type":"string"},"error_msg":{"description":"调用失败响应信息描述。","maxLength":1024,"minLength":1,"type":"string"},"http_code":{"description":"http返回码","format":"int32","maximum":999,"minimum":0,"type":"integer"}},"required":["error_code","error_msg","http_code"],"type":"object"},"Step":{"description":"创建作业时的步骤参数","properties":{"description":{"description":"步骤说明。","maxLength":1000,"minLength":1,"type":"string"},"id":{"description":"步骤id。","maxLength":64,"minLength":1,"type":"string"},"ignore_error":{"description":"是否自动忽略错误。","example":true,"type":"boolean"},"input":{"additionalProperties":{"maxLength":9999999999999,"minLength":1,"type":"string"},"description":"步骤参数。","type":"object"},"name":{"description":"步骤名称。","maxLength":32,"minLength":1,"type":"string"},"type":{"description":"步骤类型。","example":"script,package,stop","maxLength":16,"minLength":1,"type":"string"}},"required":["ignore_error"],"type":"object"},"TaskParam":{"description":"任务参数对象。","properties":{"default_value":{"description":"参数初始值。","maxLength":40960,"minLength":1,"type":"string"},"param_group":{"description":"参数分组。","example":"ecs_instance","maxLength":32,"minLength":1,"type":"string"},"param_name":{"description":"参数名称。","example":"get_instances","pattern":"[^\\>+<;#\";&?%=']{1,64}","type":"string"},"param_type":{"description":"参数类型。","example":"STRING,LIST,HOST","maxLength":16,"minLength":1,"type":"string"}},"required":["param_name"],"type":"object"},"Template":{"description":"变更服务模板模板元数据。","properties":{"approve_info":{"$ref":"#/definitions/ApproveInfo","description":"审批信息"},"create_by":{"description":"模板创建人,从接口调用传入的token中获取。","example":"kaifatest","maxLength":64,"minLength":1,"type":"string"},"create_time":{"description":"模板创建时间,为utc时间毫秒数。","example":1669284066263,"format":"int64","maximum":9999999999999,"minimum":0,"type":"integer"},"enterprise_project_id":{"description":"企业项目id","example":0,"maxLength":64,"minLength":1,"type":"string"},"id":{"description":"模板id,唯一标识,根据project_id和template_name生成。","example":"32f588a7df0e4b0da790e18a6049eb91","maxLength":64,"minLength":1,"type":"string"},"is_collect":{"description":"模板是否收藏,不允许更新模板时修改,更改收藏状态调用单独的更新模板收藏状态接口","example":false,"type":"boolean"},"is_publish":{"description":"是否发布成服务","example":false,"type":"boolean"},"job_id":{"description":"作业id","example":"3d830b6c16014e1986aab8f4f6123585","maxLength":64,"minLength":1,"type":"string"},"job_version":{"description":"作业版本","example":2,"format":"int32","maximum":999,"minimum":1,"type":"integer"},"name":{"description":"模板名称","example":"2323dewaf","maxLength":64,"minLength":1,"type":"string"},"need_synchronize":{"description":"是否需要同步","example":false,"type":"boolean"},"nodes":{"description":"任务执行时需要的参数列表。","items":{"$ref":"#/definitions/Node"},"maxItems":20,"minItems":1,"type":"array"},"parameters":{"description":"任务执行时需要的参数列表。","items":{"$ref":"#/definitions/Parameter"},"maxItems":20,"minItems":0,"type":"array"},"project_id":{"description":"项目id","example":"2a473356cca5487f8373be891bffc1cf","maxLength":32,"minLength":32,"type":"string"},"quote":{"description":"引用参数","example":["isExist"],"items":{"maxLength":256,"minLength":1,"type":"string"},"maxItems":999,"minItems":0,"type":"array"},"rate_control":{"$ref":"#/definitions/RateControl","description":"执行策略"},"share_type":{"description":"默认模板为public,自定义模板为private","example":"private","maxLength":16,"minLength":1,"type":"string"},"steps":{"description":"作业步骤","items":{"$ref":"#/definitions/Step"},"maxItems":20,"minItems":1,"type":"array"},"update_by":{"description":"模板更新人,从接口调用传入的token中获取。","example":"kaifatest","maxLength":64,"minLength":1,"type":"string"},"update_time":{"description":"模板更新时间,为utc时间毫秒数。","example":1669284066263,"format":"int64","maximum":9999999999999,"minimum":0,"type":"integer"},"version":{"description":"模板版本","example":"v1","maxLength":32,"minLength":1,"type":"string"}},"type":"object"}},"description":null,"group_id":"ac32153cf89a435d96dd423fdce82920","host":"aom.cn-north-4.myhuaweicloud.com","id":"fea336c2b521437d8da3585fdfe7fa52","info_version":"v1","method":"get","name":"SearchTemplateById","parameters":{},"paths":{"/{project_id}/cms/template/{template_id}":{"get":{"consumes":["application/json"],"description":"该接口可根据执行方案id查询执行方案详情。(注:接口目前开放的region为:华北-北京四,华东-上海一,华东-上海二,华南-广州)。","operationId":"SearchTemplateById","parameters":[{"description":"租户从IAM申请到的projectid,一般为32位字符串。","in":"path","maxLength":32,"minLength":32,"name":"project_id","required":true,"type":"string"},{"description":"方案id。","in":"path","maxLength":64,"minLength":1,"name":"template_id","required":true,"type":"string"},{"description":"模板共享类型,默认为private。可选public private","in":"query","maxLength":10,"minLength":1,"name":"share_type","required":true,"type":"string"},{"description":"从IAM服务获取的用户Token。","in":"header","maxLength":40960,"minLength":1,"name":"X-Auth-Token","required":true,"type":"string"},{"description":"指定类型为application/json。","in":"header","maxLength":32,"minLength":1,"name":"Content-Type","required":true,"type":"string"}],"produces":["application/json"],"responses":{"200":{"description":"请求响应成功,返回执行方案详情。","examples":{"application/json":{"approve_info":{"need_approve":false},"create_by":"xxxxxxxxx","create_time":1600026634837,"enterprise_project_id":"0","id":"xxxxxx","is_collect":false,"is_publish":false,"job_id":"xxxxxx","job_version":1,"name":"1","need_synchronize":false,"nodes":[{"category":"pause","description":"xxxxxx","id":"xxxxxx","ignore_error":false,"metadata":{"type":"pause"},"name":"xxx","task_name":"CMS::PAUSE"}],"parameters":[{"default_value":"","description":"","encryption":false,"hint":"","id":"xxxxxx","param_group":"","param_name":"xxx","param_type":"STRING","quote_param":false,"required":true},{"default_value":"","description":"xxxxxx","encryption":false,"hint":"xxxxxxx","id":"xxxxxxx","param_group":"","param_name":"xxx","param_type":"STRING","quote_param":false,"required":true}],"project_id":"xxxxxx","quote":[],"rate_control":{"have_rate_control":false,"max":0,"time_delay":0},"share_type":"private","steps":[{"description":"xxxxxx","id":"xxxxxx","ignore_error":false,"input":{},"name":"xxx","type":"pause"}],"update_by":"xxx","update_time":1600026634837,"version":"v1"}},"schema":{"$ref":"#/definitions/Template"}},"400":{"description":"BadRequest。非法请求。建议直接修改该请求,不要重试该请求。","examples":{"application/json":{"error_code":"AOM.31001202","error_msg":"Invalid plan parameter.","http_code":400}},"schema":{"$ref":"#/definitions/ResultInfo"}},"401":{"description":"Unauthorized。在客户端提供认证信息后,返回该状态码,表明服务端指出客户端所提供的认证信息不正确或非法。","examples":{"application/json":{"error_code":"AOM.31009002","error_message":"auth failed.","http_code":"401"}},"schema":{"$ref":"#/definitions/ResultInfo"}}},"summary":"获取方案信息","tags":["自动化运维"],"x-is-registered":"Y","x-open-region-cloud":"hws","x-order":10,"x-request-examples-description-1":"用template_id和share_type查询执行方案。\nshare_type:默认为private。","x-request-examples-url-1":"https://{Endpoint}/v1/{project_id}/cms/template/{template_id}?share_type=private","x-support-sdk":"Y"}}},"product_short":"AOM","region_id":"cn-north-4","schemes":["HTTPS"],"security_definitions":null,"summary":"获取方案信息","tags":"自动化运维","uri":null,"version":"2.0"}