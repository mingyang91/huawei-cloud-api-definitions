{"base_path":"/","components":null,"consumes":"","definitions":{"AlarmNotification":{"description":"告警规则通知模块。","properties":{"bind_notification_rule_id":{"description":"告警行动策略id。\n- 当notification_enable为true时,填告警行动策略id\n- 当notification_enable为false时,填“”","type":"string"},"notification_enable":{"description":"是否启用告警通知规则。\n- 当通知类型为“direct”时,填true\n- 当通知类型为“alarm_policy”时,填false\n如果告警触发“notify_triggered”或告警恢复“notify_resolved”都设置为false(即都不进行告警通知),则notification_enable需设置为false。","type":"boolean"},"notification_type":{"description":"通知类型。\n- “direct”:直接告警\n- “alarm_policy”:告警降噪","enum":["direct","alarm_policy"],"type":"string"},"notify_frequency":{"description":"通知频率\n- 当通知类型为“alarm_policy”时,填“-1”\n- 当通知类型为“direct”时,\n   - “0”:只告警一次\n   - “300”:每5分钟\n   - “600”:每10分钟\n   - “900”:每15分钟\n   - “1800”:每30分钟\n   - “3600”:每1小时\n   - “10800”:每3小时\n   - “21600”:每6小时\n   - “43200”:每12小时\n   - “86400”:每天","format":"int32","type":"integer"},"notify_resolved":{"description":"告警解决是否通知。\n- true:通知\n- false:不通知","enum":[true,false],"example":"","type":"boolean"},"notify_triggered":{"description":"告警触发是否通知。\n- true:通知\n- false:不通知","enum":[true,false],"example":"","type":"boolean"},"route_group_enable":{"description":"启用告警分组规则。\n- 当通知类型为“alarm_policy”时:true\n- 当通知类型为“direct”时:false\n如果告警触发“notify_triggered”或告警恢复“notify_resolved”都设置为false(即都不进行告警通知),则route_group_enable需设置为false。","enum":[true,false],"type":"boolean"},"route_group_rule":{"description":"告警分组规则名称。\n- 当route_group_enable 为true时,填告警分组规则名称\n- 当route_group_enable 为false时,填“”","type":"string"}},"required":["notification_type","route_group_enable","route_group_rule"],"type":"object"},"AlarmRuleTemplateBody":{"properties":{"alarm_rule_template_binding":{"additionalProperties":{"type":"string"},"description":"告警模板所绑定的告警规则。","type":"object"},"alarm_rule_template_description":{"description":"告警模板描述。","type":"string"},"alarm_rule_template_id":{"description":"告警模板id。","type":"string"},"alarm_rule_template_name":{"description":"告警模板名称。","type":"string"},"alarm_rule_template_name_en":{"description":"告警模板英文名称。","type":"string"},"alarm_rule_template_project_id":{"description":"项目ID,可以从控制台获取,也可以从调用API处获取。获取方式请参见:[获取项目ID](aom_04_0024.xml)。","type":"string"},"alarm_rule_template_source":{"description":"告警模板来源。","type":"string"},"alarm_rule_template_type":{"description":"告警模板类型\n- “statics”:静态告警模板\n- “dynamic”:动态告警模板","type":"string"},"alarm_template_spec_list":{"description":"告警模板列表。","items":{"$ref":"#/definitions/AlarmRuleTemplateSpecWithCloudService"},"type":"array"},"create_time":{"description":"创建时间。","format":"int64","type":"integer"},"enterprise_project_id":{"description":"企业项目id。获取方式请参见:[获取企业项目ID](aom_04_0024.xml)。","type":"string"},"modify_time":{"description":"更新时间。","format":"int64","type":"integer"},"template_version":{"description":"告警模板版本。","type":"string"},"templating":{"$ref":"#/definitions/Templating","description":"告警模板变量列表。"}},"required":["alarm_rule_template_name","alarm_rule_template_description","alarm_rule_template_id","alarm_rule_template_type","alarm_rule_template_binding","alarm_template_spec_list","templating","template_version"],"type":"object"},"AlarmRuleTemplateResponseBody":{"properties":{"alarm_rule_templates":{"description":"告警模板列表。","items":{"$ref":"#/definitions/AlarmRuleTemplateBody"},"type":"array"},"count":{"description":"告警模板总数。","format":"int32","type":"integer"}},"required":["alarm_rule_templates","count"],"type":"object"},"AlarmRuleTemplateSpecWithCloudService":{"properties":{"alarm_notification":{"$ref":"#/definitions/AlarmNotification","description":"通知信息。"},"alarm_template_spec_items":{"description":"告警模板列表。","items":{"$ref":"#/definitions/AlarmTemplateSpecItem"},"type":"array"},"related_cce_clusters":{"description":"关联的CCE集群。","items":{"type":"string"},"type":"array"},"related_cloud_service":{"description":"关联的云服务。","type":"string"},"related_prometheus_instances":{"description":"关联的Prom实例。","items":{"type":"string"},"type":"array"}},"type":"object"},"AlarmTags":{"properties":{"auto_tags":{"description":"自动标签。","items":{"type":"string"},"type":"array"},"custom_annotations":{"description":"告警标注。","items":{"type":"string"},"type":"array"},"custom_tags":{"description":"自定义标签。","items":{"type":"string"},"type":"array"}},"type":"object"},"AlarmTemplateSpecItem":{"properties":{"alarm_template_name":{"description":"告警模板下单个告警规则名称。","type":"string"},"alarm_template_name_en":{"description":"告警模板下单个告警规则英文名称。","type":"string"},"alarm_template_spec_type":{"description":"告警模板下单个告警规则类型。\n“metric”:指标告警\n“event”:事件告警","type":"string"},"desc":{"description":"告警模板下单个告警规则描述。","type":"string"},"desc_en":{"description":"告警模板下单个告警规则英文描述。","type":"string"},"event_alarm_template_spec":{"$ref":"#/definitions/EventAlarmTemplateSpec","description":"事件告警模板。"},"metric_alarm_template_spec":{"$ref":"#/definitions/MetricAlarmTemplateSpec","description":"指标告警模板。"}},"required":["alarm_template_name","alarm_template_spec_type"],"type":"object"},"CmdbInfo":{"properties":{"app_id":{"description":"应用id。","type":"string"},"node_ids":{"description":"节点信息列表。","items":{"$ref":"#/definitions/NodeInfo"},"type":"array"}},"type":"object"},"EventAlarmTemplateSpec":{"properties":{"alarm_source":{"description":"告警规则来源云服务:CCE 创建标识。","type":"string"},"alarm_subtype":{"description":"告警规则类别。","type":"string"},"event_source":{"description":"告警来源。","type":"string"},"monitor_object_templates":{"description":"监控对象模板(创建告警时需要补齐里面的内容)。","items":{"type":"string"},"type":"array"},"monitor_objects":{"description":"监控对象列表。键值对形式,键值为:\n- “event_type”:通知类型\n- “event_severity”:告警级别\n- “event_name”:事件名称\n- “namespace”:命名空间\n- “clusterId”:集群id\n- “customField”:用户自定义字段","items":{"additionalProperties":{"type":"string"},"description":"监控对象。","type":"object"},"type":"array"},"trigger_conditions":{"description":"触发条件。","items":{"$ref":"#/definitions/EventTriggerCondition"},"type":"array"}},"type":"object"},"EventTriggerCondition":{"properties":{"aggregation_window":{"description":"监控周期。单位为秒,例如 1小时 填“3600”,当trigger_type为“immediately”时 该参数为空,当trigger_type为“accumulative”时 该参数必填。\n监控周期范围:\n5分钟,20分钟,1小时,4小时,24小时。","format":"int64","type":"integer"},"event_name":{"description":"事件名称。","type":"string"},"frequency":{"description":"事件类告警频率。当trigger_type为“immediately”时 值为-1。\n- “-1”:N/A\n- “0”:只告警一次\n- “300”:每5分钟\n- “600”:每10分钟:\n- “900”:每15分钟:\n- “1800”:每30分钟:\n- “3600”:每1小时:\n- “10800”:每3小时:\n- “21600”:每6小时:\n- “43200”:每12小时:\n- “86400”:每天:","type":"string"},"operator":{"description":"判断条件:“>”,“<”,“=”,“>=”,“<=”,当trigger_type为“immediately”时 该参数为空。当trigger_type为“accumulative”时 该参数必填。","type":"string"},"thresholds":{"additionalProperties":{"format":"int32","type":"integer"},"description":"键值对形式,键为告警级别,值为累计次数,当trigger_type为“immediately”时 累计次数为1。当当trigger_type为“accumulative”时 累计次数范围为1~100 (如果trigger_conditions参数不为空,该参数必填)","type":"object"},"trigger_type":{"description":"触发方式:\n- “immediately”:立即触发\n- “accumulative”:累计触发","enum":["immediately","accumulative"],"type":"string"}},"type":"object"},"MetricAlarmTemplateSpec":{"properties":{"alarm_source":{"description":"告警规则来源云服务:CCE 创建标识。","type":"string"},"alarm_subtype":{"description":"告警规则类别。","type":"string"},"alarm_tags":{"description":"告警标签。","items":{"$ref":"#/definitions/AlarmTags"},"type":"array"},"monitor_type":{"description":"监控类型。","type":"string"},"no_data_conditions":{"description":"数据不足条件。","items":{"$ref":"#/definitions/NoDataCondition"},"type":"array"},"recovery_conditions":{"$ref":"#/definitions/RecoveryCondition","description":"告警恢复条件。"},"trigger_conditions":{"description":"触发条件。","items":{"$ref":"#/definitions/TemplateTriggerCondition"},"type":"array"}},"type":"object"},"NoDataCondition":{"properties":{"no_data_alert_state":{"description":"数据不足时,阈值规则的状态。(当\"notify_no_data\"为true时,该参数必填,当\"notify_no_data\"为false时,该参数为空)\n- “no_data”:数据不足并发送通知\n- “alerting”:告警\n- “ok”:正常\n- “pre_state”:保持上一个状态","enum":["no_data","alerting","ok","pre_state"],"example":"","type":"string"},"no_data_timeframe":{"description":"无数据处理连续周期。取值范围为1~5。(当\"notify_no_data\"为true时,该参数必填,当\"notify_no_data\"为false时,该参数为空)","format":"int32","type":"integer"},"notify_no_data":{"description":"无数据处理开关。true表示启用无数据处理,false表示关闭无数据处理。","type":"boolean"}},"type":"object"},"NodeInfo":{"properties":{"node_id":{"description":"节点id。","type":"string"},"node_type":{"description":"节点类型。","type":"string"}},"type":"object"},"RecoveryCondition":{"properties":{"recovery_timeframe":{"description":"告警恢复周期的个数。取值范围为1~3 (如果recovery_timeframe 参数不为空,该参数必填)","format":"int32","type":"integer"}},"type":"object"},"TemplateInfo":{"properties":{"description":{"description":"变量描述。","type":"string"},"name":{"description":"变量名称。","type":"string"},"query":{"description":"变量值。","type":"string"},"type":{"description":"变量类型。","type":"string"}},"type":"object"},"TemplateTriggerCondition":{"properties":{"aggregate_type":{"description":"聚合方式。\n- “by”:不分组\n- “avg”\n- “max”\n- “min”\n- “sum”","enum":["by","avg","max","min","sum"],"type":"string"},"aggregation_type":{"description":"检测规则:\n- average:平均值\n- minimum:最小值\n- maximum:最大值\n- sum:总计\n- sampleCount:样本","type":"string"},"aggregation_window":{"description":"统计周期。\n- “15s”:15秒\n- “30s”:30秒\n- “1m”:1分钟\n- “5m”:5分钟\n- “15m”:15分钟\n- “1h”:1小时","type":"string"},"alarm_message_template":{"description":"通知内容。","type":"string"},"aom_monitor_level":{"description":"监控层级。","type":"string"},"cmdb":{"$ref":"#/definitions/CmdbInfo","description":"cmdb信息。"},"expression":{"description":"混合运算的表达式。","type":"string"},"metric_labels":{"description":"指标维度。","items":{"type":"string"},"type":"array"},"metric_name":{"description":"指标名称。","type":"string"},"metric_namespace":{"description":"指标命名空间。","type":"string"},"metric_query_mode":{"description":"指标查询模式。\n- “AOM”:AOM原生\n- “PROM”:AOM Prometheus\n- “NATIVE_PROM”:原生Prometheus","enum":["AOM","PROM","NATIVE_PROM"],"type":"string"},"metric_statistic_method":{"description":"当配置方式为全量指标时可选择的指标运算方式。\n- “single”:单个指标进行运算\n- “mix”:多个指标进行混合运算","enum":["single","mix"],"type":"string"},"metric_unit":{"description":"指标单位。","type":"string"},"mix_promql":{"description":"混合运算的promQL。","type":"string"},"operator":{"description":"判断条件:“>”,“<”,“=”,“>=”,“<=”","type":"string"},"promql":{"description":"Prometheus语句。","type":"string"},"promql_expr":{"description":"Prometheus语句模板。","type":"string"},"promql_for":{"description":"持续时间。\n持续时间范围:\n- “0”:立即\n- “15s”:15秒\n- “30s”:30秒\n- “1m”:1分钟","type":"string"},"promql_monitor_templates":{"description":"Prometheus监控模板。默认为cluster。","items":{"type":"string"},"type":"array"},"query_match":{"description":"查询筛选条件。","type":"string"},"query_param":{"description":"- PromQL告警规则,该参数为\"{\\\"defaultRule\\\":{\\\"label\\\":\\\"自定义\\\",\\\"id\\\":\\\"custom\\\"},\\\"templateSelectd\\\":null,\\\"dimensionsList\\\":[]}\"\n- 阈值告警规则,该参数为空。","type":"object"},"thresholds":{"additionalProperties":{"type":"string"},"description":"键值对形式,键为告警级别,值为告警阈值","type":"object"},"trigger_interval":{"description":"检查频率周期。\n- 当trigger_type 为“HOURLY”时,填“”\n- 当trigger_type为“DAILY”时,格式为:“小时” 。例如每天凌晨三点\"03:00\"。\n- 当trigger_type为“WEEKLY”时,格式为:“星期 小时”。例如每周一凌晨三点 “1 03:00”。\n- 当trigger_type为“CRON”时,格式为标准CRON表达式。\n- 当trigger_type为“FIXED_RATE”时,秒的取值为15s,30s,分钟为 1~59,小时为 1~24。例如“15s”,“30s”,“1min”,“1h”。","type":"string"},"trigger_times":{"description":"连续周期个数。","format":"int32","type":"integer"},"trigger_type":{"description":"触发频率的类型:\n- “FIXED_RATE”:固定间隔\n- “HOURLY”:每小时\n- “DAILY”:每天\n- “WEEKLY”:每周\n- “CRON”:Cron表达式","enum":["FIXED_RATE","HOURLY","DAILY","WEEKLY","CRON"],"type":"string"}},"type":"object"},"Templating":{"properties":{"list":{"description":"变量列表。","items":{"$ref":"#/definitions/TemplateInfo"},"type":"array"}},"type":"object"}},"description":null,"group_id":"ac32153cf89a435d96dd423fdce82920","host":"aom.cn-north-4.myhuaweicloud.com","id":"19e3769ebe164650acd664c58ff33543","info_version":"v2","method":"get","name":"ListAlarmRuleTemplate","parameters":{},"paths":{"/v4/{project_id}/alarm-rules-template":{"get":{"description":"该接口用于查询告警模板列表。","operationId":"ListAlarmRuleTemplate","parameters":[{"description":"项目ID,可以从控制台获取,也可以从调用API处获取。获取方式请参见:[获取项目ID](aom_04_0024.xml)。","in":"path","name":"project_id","required":true,"type":"string"},{"description":"从IAM服务获取的用户Token。获取方式请参见:[获取Token](aom_04_0059.xml)。","in":"header","name":"X-Auth-Token","required":true,"type":"string"},{"description":"消息体的类型(格式)。指定类型为“application/json”。","in":"header","name":"Content-Type","required":false,"type":"string"},{"description":"企业项目id。获取方式请参见:[获取企业项目ID](aom_04_0024.xml)。\n- 查询单个企业项目下实例,填写企业项目id。 \n- 查询所有企业项目下实例,填写“all_granted_eps”。","in":"header","name":"Enterprise-Project-Id","required":false,"type":"string"},{"description":"告警模板id。","in":"query","name":"id","required":false,"type":"string"},{"description":"告警模板类型。默认值为“template”","in":"query","name":"type","required":true,"type":"string"}],"responses":{"200":{"description":"OK 请求响应成功。","examples":{"application/json":{"alarm_rule_templates":[{"alarm_rule_template_binding":{},"alarm_rule_template_id":"130****1802****3121","alarm_rule_template_name":"aomTemplate","alarm_rule_template_project_id":"2a47****cca5****8373****1bff****","alarm_rule_template_type":"statics","alarm_template_spec_list":[{"alarm_template_spec_items":[],"related_cce_clusters":[],"related_cloud_service":"VPC","related_prometheus_instances":[]}],"create_time":1732266984780,"enterprise_project_id":"0","modify_time":1732266984780}],"count":119}},"schema":{"$ref":"#/definitions/AlarmRuleTemplateResponseBody"}}},"summary":"查询告警模板列表","tags":["告警"],"x-api-type":"open-api","x-is-registered":"Y","x-open-region-cloud":"hws,hws_hk,hws_eu","x-order":23,"x-request-examples-description-1":"查询告警模板列表","x-request-examples-description-2":"查询告警模板id为1214****2546****931的告警模板","x-request-examples-url-1":"https://{Endpoint}/v4/{project_id}/alarm-rules-template","x-request-examples-url-2":"https://{Endpoint}/v4/{project_id}/alarm-rules-template?id=1214****2546****931","x-support-sdk":"Y"}}},"product_short":"AOM","region_id":"cn-north-4","schemes":["HTTPS"],"security_definitions":null,"summary":"查询告警模板列表","tags":"告警","uri":null,"version":"2.0"}