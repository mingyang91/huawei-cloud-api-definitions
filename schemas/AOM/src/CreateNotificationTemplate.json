{"base_path":"/","components":null,"consumes":"","definitions":{"AddNotificationTemplate":{"properties":{"desc":{"description":"消息通知模板描述。","type":"string"},"locale":{"description":"消息通知模板语言。","type":"string"},"name":{"description":"消息通知模板名称。","type":"string"},"source":{"description":"消息通知模板类型:\n- 不填:表示指标或事件模板\n- LTS:表示日志模板","type":"string"},"templates":{"description":"消息通知模板内容。\n消息通知模板内容为json字符串,具体内容是由下列参数拼接成json数组后转义而来。\n\n| 名称 |是否必选  |参数类型  |说明  |\n|--|--|--|--|\n|content  |是  |string  |消息模板内容。| \n|subType  |是  |string  |消息模板发送类型,支持:email,sms,webhook。|\n| topic | 否 | string |邮件主题。|\n| sendType |否  |string  |当消息模板发送类型为“webhook”时需要指定消息模板格式,支持:HTML、JSON。  |\n| version |是  |string  |默认为v2。 |","type":"string"}},"required":["locale","name","templates"],"type":"object"}},"description":null,"group_id":"ac32153cf89a435d96dd423fdce82920","host":"aom.cn-north-4.myhuaweicloud.com","id":"5a0787aa61bc42efb6e1e3dba1b3d9db","info_version":"v2","method":"post","name":"CreateNotificationTemplate","parameters":{},"paths":{"/v2/{project_id}/events/notification/templates":{"post":{"description":"该接口用于新增消息通知模板。","operationId":"CreateNotificationTemplate","parameters":[{"description":"项目ID,可以从控制台获取,也可以从调用API处获取。获取方式请参见:[获取项目ID](aom_04_0024.xml)。","in":"path","name":"project_id","required":true,"type":"string"},{"description":"从IAM服务获取的用户Token。获取方式请参见:[获取Token](aom_04_0059.xml)。","in":"header","name":"X-Auth-Token","required":true,"type":"string"},{"description":"消息体的类型(格式)。指定类型为“application/json”。","in":"header","name":"Content-Type","required":true,"type":"string"},{"description":"企业项目id。获取方式请参见:[获取企业项目ID](aom_04_0024.xml)。\n- 新增单个企业项目下通知消息模板,填写企业项目id。\n- 不填,新增默认企业项目下通知消息模板。","in":"header","name":"Enterprise-Project-Id","required":false,"type":"string"},{"description":"新增消息通知模板请求体。","in":"body","name":"CreateNotificationTemplateRequestBody","required":true,"schema":{"$ref":"#/definitions/AddNotificationTemplate"}}],"responses":{"204":{"description":"No Content 表示请求成功,但没有内容返回。"}},"summary":"新增消息通知模板","tags":["告警"],"x-api-type":"open-api","x-is-registered":"Y","x-open-region-cloud":"hws,hws_hk,hws_eu","x-order":24,"x-request-examples-1":{"desc":"","locale":"en-us","name":"txytst2","templates":"[{\"subType\":\"email\",\"version\":\"v2\",\"topic\":\"${region_name}[${event_severity}_${event_type}_${clear_type}] have a new alert at ${starts_at}.\",\"content\":\"\\nAlarm Name:${event_name_alias};\\nAlarm ID:${id};\\nOccurred:${starts_at};\\nEvent Severity:${event_severity};\\nAlarm Info:${alarm_info};\\nResource Identifier:${resources_new};\\nSuggestion:${alarm_fix_suggestion_zh};\"},{\"subType\":\"sms\",\"version\":\"v2\",\"content\":\"\\nAlarm Name:${event_name_alias};\\nAlarm ID:${id};\\nOccurred:${starts_at};\\nEvent Severity:${event_severity};\\nAlarm Info:${alarm_info};\\nResource Identifier:${resources_new};\\nSuggestion:${alarm_fix_suggestion_zh};\"},{\"subType\":\"wechat\",\"version\":\"v2\",\"content\":\"> **Alarm Name:** ${event_name_alias}  \\n> **Alarm ID:** ${id}  \\n> **Occurred:** ${starts_at}  \\n> **Event Severity:** ${event_severity}  \\n> **Alarm Info:** ${alarm_info}  \\n> **Resource Identifier:** ${resources_new}  \\n> **Suggestion:** ${alarm_fix_suggestion_zh}\"},{\"subType\":\"dingding\",\"version\":\"v2\",\"content\":\"> **Alarm Name:** ${event_name_alias}  \\n\\n> **Alarm ID:** ${id}  \\n\\n> **Occurred:** ${starts_at}  \\n\\n> **Event Severity:** ${event_severity}  \\n\\n> **Alarm Info:** ${alarm_info}  \\n\\n> **Resource Identifier:** ${resources_new}  \\n\\n> **Suggestion:** ${alarm_fix_suggestion_zh}\",\"sendType\":\"HTML\"},{\"subType\":\"webhook\",\"version\":\"v2\",\"content\":\"Notification Type:${event_type};\\nSeverity:${event_severity};\\nName:$event.metadata.event_name_alias;\\nOccurred:${starts_at};\\nSource:$event.metadata.resource_provider;\\nResource Type:$event.metadata.resource_type;\\nResource Identifier:${resources_new};\\nPossible Cause:${alarm_probableCause_zh};\\nAdditional Info:${message};\\nSuggestion:${alarm_fix_suggestion_zh};\",\"sendType\":\"HTML\"},{\"subType\":\"voice\",\"version\":\"v2\",\"topic\":\"\",\"content\":\"Notification Type:${event_type};  \\nSeverity:${event_severity};  \\nName:$event.metadata.event_name_alias;  \\nOccurred:${starts_at};  \\nSource:$event.metadata.resource_provider;  \\nResource Type:$event.metadata.resource_type;  \\nResource Identifier:${resources_new};  \\nPossible Cause:${alarm_probableCause_zh};  \\nAdditional Info:${message};  \\nSuggestion:${alarm_fix_suggestion_zh};\"},{\"subType\":\"espace\",\"version\":\"v2\",\"topic\":\"\",\"content\":\"Notification Type:${event_type};  \\nSeverity:${event_severity};  \\nName:$event.metadata.event_name_alias;  \\nOccurred:${starts_at};  \\nSource:$event.metadata.resource_provider;  \\nResource Type:$event.metadata.resource_type;  \\nResource Identifier:${resources_new};  \\nPossible Cause:${alarm_probableCause_zh};  \\nAdditional Info:${message};  \\nSuggestion:${alarm_fix_suggestion_zh};\"},{\"subType\":\"feishu\",\"version\":\"v2\",\"topic\":\"\",\"content\":\"**Alarm Name:** ${event_name_alias}  \\n\\n**Alarm ID:** ${id}  \\n\\n**Occurred:** ${starts_at}  \\n\\n**Event Severity:** ${event_severity}  \\n\\n**Alarm Info:** ${alarm_info}  \\n\\n**Resource Identifier:** ${resources_new}  \\n\\n**Suggestion:** ${alarm_fix_suggestion_zh}\"},{\"subType\":\"welink\",\"version\":\"v2\",\"topic\":\"\",\"content\":\"\\nAlarm Name:${event_name_alias};\\nAlarm ID:${id};\\nOccurred:${starts_at};\\nEvent Severity:${event_severity};\\nAlarm Info:${alarm_info};\\nResource Identifier:${resources_new};\\nSuggestion:${alarm_fix_suggestion_zh};\"}]"},"x-request-examples-description-1":"新增消息通知模板的名称为test2的消息通知模板","x-request-examples-text-1":{"desc":"","locale":"en-us","name":"txytst2","templates":"[{\"subType\":\"email\",\"version\":\"v2\",\"topic\":\"${region_name}[${event_severity}_${event_type}_${clear_type}] have a new alert at ${starts_at}.\",\"content\":\"\\nAlarm Name:${event_name_alias};\\nAlarm ID:${id};\\nOccurred:${starts_at};\\nEvent Severity:${event_severity};\\nAlarm Info:${alarm_info};\\nResource Identifier:${resources_new};\\nSuggestion:${alarm_fix_suggestion_zh};\"},{\"subType\":\"sms\",\"version\":\"v2\",\"content\":\"\\nAlarm Name:${event_name_alias};\\nAlarm ID:${id};\\nOccurred:${starts_at};\\nEvent Severity:${event_severity};\\nAlarm Info:${alarm_info};\\nResource Identifier:${resources_new};\\nSuggestion:${alarm_fix_suggestion_zh};\"},{\"subType\":\"wechat\",\"version\":\"v2\",\"content\":\"> **Alarm Name:** ${event_name_alias}  \\n> **Alarm ID:** ${id}  \\n> **Occurred:** ${starts_at}  \\n> **Event Severity:** ${event_severity}  \\n> **Alarm Info:** ${alarm_info}  \\n> **Resource Identifier:** ${resources_new}  \\n> **Suggestion:** ${alarm_fix_suggestion_zh}\"},{\"subType\":\"dingding\",\"version\":\"v2\",\"content\":\"> **Alarm Name:** ${event_name_alias}  \\n\\n> **Alarm ID:** ${id}  \\n\\n> **Occurred:** ${starts_at}  \\n\\n> **Event Severity:** ${event_severity}  \\n\\n> **Alarm Info:** ${alarm_info}  \\n\\n> **Resource Identifier:** ${resources_new}  \\n\\n> **Suggestion:** ${alarm_fix_suggestion_zh}\",\"sendType\":\"HTML\"},{\"subType\":\"webhook\",\"version\":\"v2\",\"content\":\"Notification Type:${event_type};\\nSeverity:${event_severity};\\nName:$event.metadata.event_name_alias;\\nOccurred:${starts_at};\\nSource:$event.metadata.resource_provider;\\nResource Type:$event.metadata.resource_type;\\nResource Identifier:${resources_new};\\nPossible Cause:${alarm_probableCause_zh};\\nAdditional Info:${message};\\nSuggestion:${alarm_fix_suggestion_zh};\",\"sendType\":\"HTML\"},{\"subType\":\"voice\",\"version\":\"v2\",\"topic\":\"\",\"content\":\"Notification Type:${event_type};  \\nSeverity:${event_severity};  \\nName:$event.metadata.event_name_alias;  \\nOccurred:${starts_at};  \\nSource:$event.metadata.resource_provider;  \\nResource Type:$event.metadata.resource_type;  \\nResource Identifier:${resources_new};  \\nPossible Cause:${alarm_probableCause_zh};  \\nAdditional Info:${message};  \\nSuggestion:${alarm_fix_suggestion_zh};\"},{\"subType\":\"espace\",\"version\":\"v2\",\"topic\":\"\",\"content\":\"Notification Type:${event_type};  \\nSeverity:${event_severity};  \\nName:$event.metadata.event_name_alias;  \\nOccurred:${starts_at};  \\nSource:$event.metadata.resource_provider;  \\nResource Type:$event.metadata.resource_type;  \\nResource Identifier:${resources_new};  \\nPossible Cause:${alarm_probableCause_zh};  \\nAdditional Info:${message};  \\nSuggestion:${alarm_fix_suggestion_zh};\"},{\"subType\":\"feishu\",\"version\":\"v2\",\"topic\":\"\",\"content\":\"**Alarm Name:** ${event_name_alias}  \\n\\n**Alarm ID:** ${id}  \\n\\n**Occurred:** ${starts_at}  \\n\\n**Event Severity:** ${event_severity}  \\n\\n**Alarm Info:** ${alarm_info}  \\n\\n**Resource Identifier:** ${resources_new}  \\n\\n**Suggestion:** ${alarm_fix_suggestion_zh}\"},{\"subType\":\"welink\",\"version\":\"v2\",\"topic\":\"\",\"content\":\"\\nAlarm Name:${event_name_alias};\\nAlarm ID:${id};\\nOccurred:${starts_at};\\nEvent Severity:${event_severity};\\nAlarm Info:${alarm_info};\\nResource Identifier:${resources_new};\\nSuggestion:${alarm_fix_suggestion_zh};\"}]"},"x-request-examples-url-1":"/v2/{project_id}/events/notification/templates","x-support-sdk":"Y"}}},"product_short":"AOM","region_id":"cn-north-4","schemes":["HTTPS"],"security_definitions":null,"summary":"新增消息通知模板","tags":"告警","uri":null,"version":"2.0"}