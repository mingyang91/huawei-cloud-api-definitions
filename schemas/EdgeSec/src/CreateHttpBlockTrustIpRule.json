{"base_path":null,"components":{"schemas":{"CreateHttpBlockTrustIpRuleRequestBody":{"properties":{"addr":{"description":"ip地址/地址段;ip地址/地址段或者ip地址组id至少有一个","pattern":"^[\\s\\S]{0,1024}$","type":"string"},"description":{"description":"规则描述,最长512字符","pattern":"^[a-zA-Z.。,,_\\-/:0-9\\u4E00-\\u9FFF\\s]{0,512}$","type":"string"},"followed_action_id":{"description":"攻击惩罚规则id","pattern":"^[a-zA-Z0-9-]{32,36}$","type":"string"},"ip_group_id":{"description":"ip地址组id;ip地址/地址段或者ip地址组id至少有一个","pattern":"^[a-zA-Z0-9-]{32,36}$","type":"string"},"name":{"description":"规则名称","pattern":"^[\\u4e00-\\u9fa50-9a-zA-Z_\\-::.]{1,128}$","type":"string"},"white":{"description":"- 0:拦截\n- 1:放行\n- 2:仅记录","maximum":2,"minimum":0,"type":"integer"}},"required":["name","white"],"type":"object"},"ErrorResponseBody":{"description":"通用错误响应","properties":{"encoded_authorization_message":{"description":"对接IAM5.0的服务,拒绝访问时需要返回IAM的相关响应","type":"string"},"error_code":{"description":"标准化错误码:服务名.八位数字编码","type":"string"},"error_msg":{"description":"清晰的错误信息","type":"string"}},"type":"object"},"HttpIpGroup":{"description":"ip地址组","properties":{"create_time":{"description":"ip地址组创建时间戳","format":"int64","type":"integer"},"description":{"description":"ip地址组描述","type":"string"},"id":{"description":"ip地址组id","type":"string"},"ips":{"description":"ip地址/地址段列表","items":{"type":"string"},"type":"array"},"name":{"description":"ip地址组名称","type":"string"},"size":{"description":"ip地址/地址段大小","type":"integer"}},"type":"object"},"ShowHttpBlockTrustIpRuleResponseBody":{"properties":{"addr":{"description":"ip地址/地址段","type":"string"},"description":{"description":"规则描述","type":"string"},"followed_action_id":{"description":"攻击惩罚规则id","type":"string"},"id":{"description":"规则id","type":"string"},"ip_group":{"$ref":"#/components/schemas/HttpIpGroup"},"name":{"description":"规则名称","type":"string"},"policy_id":{"description":"规则所在策略id","type":"string"},"policy_name":{"description":"规则所在策略名称","type":"string"},"status":{"description":"规则开关:\n- 0:关闭\n- 1:开启","type":"integer"},"timestamp":{"description":"创建规则时间戳","format":"int64","type":"integer"},"white":{"description":"- 0:拦截\n- 1:放行\n- 2:仅记录","type":"integer"}},"type":"object"}}},"consumes":"","definitions":null,"description":null,"group_id":"097b41aa00ce42768253a0a028ddb99b","host":"esa.cn-north-4.myhuaweicloud.com","id":"c548312f9d8a429a8b305b555c66cdce","info_version":"v2","method":"post","name":"CreateHttpBlockTrustIpRule","parameters":null,"paths":{"/v1/edgesec/configuration/http/policies/{policy_id}/blocktrustip-rule":{"post":{"description":"创建IP黑白名单规则","operationId":"CreateHttpBlockTrustIpRule","parameters":[{"description":"auth token","in":"header","name":"X-Auth-Token","required":true,"schema":{"type":"string"}},{"description":"策略id","in":"path","name":"policy_id","required":true,"schema":{"pattern":"^[a-zA-Z0-9-]{32,36}$","type":"string"}}],"requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CreateHttpBlockTrustIpRuleRequestBody"}}},"description":"创建IP黑白名单规则body","required":false},"responses":{"200":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ShowHttpBlockTrustIpRuleResponseBody"}}},"description":"OK"},"400":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorResponseBody"}}},"description":"请求失败"},"401":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorResponseBody"}}},"description":"token权限不足"},"500":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorResponseBody"}}},"description":"服务器内部错误"}},"summary":"创建IP黑白名单规则","tags":["Http防护规则管理-IP黑白名单"],"x-codegen-request-body-name":"CreateHttpBlockTrustIpRuleRequestBody","x-cts-meta-anno":{"isAsyncApi":"false","resourceType":"wafWhiteBlackIpRule","traceName":"createWafWhiteBlackIpRule"},"x-iam-auth-meta-anno":{"abacAction":"edgesec:wafWhiteBlackIpRule:create","authLevel":"token","rbac":"{\"op_service\",\"te_admin\"}"},"x-is-registered":"Y","x-support-sdk":"Y"}}},"product_short":"EdgeSec","region_id":"cn-north-4","schemes":["HTTPS"],"security_definitions":null,"summary":"创建IP黑白名单规则","tags":"Http防护规则管理-IP黑白名单","uri":null,"version":"3.0.1"}