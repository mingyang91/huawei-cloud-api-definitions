{"base_path":null,"components":{"schemas":{"ErrorResponseBody":{"description":"通用错误响应","properties":{"encoded_authorization_message":{"description":"对接IAM5.0的服务,拒绝访问时需要返回IAM的相关响应","type":"string"},"error_code":{"description":"标准化错误码:服务名.八位数字编码","type":"string"},"error_msg":{"description":"清晰的错误信息","type":"string"}},"type":"object"},"HttpPolicyAction":{"description":"操作","properties":{"category":{"description":"防护等级","pattern":"^[a-zA-Z0-9_\\-/:.]{0,256}$","type":"string"},"followed_action_id":{"description":"攻击惩罚规则ID","pattern":"^[a-zA-Z0-9-]{32,36}$","type":"string"}},"type":"object"},"HttpPolicyBindHost":{"description":"绑定的域名信息","properties":{"hostname":{"description":"域名","type":"string"},"id":{"description":"域名ID","type":"string"}},"type":"object"},"HttpPolicyOption":{"description":"选项","properties":{"anticrawler":{"description":"脚本反爬虫规则是否开启","type":"boolean"},"antileakage":{"description":"防敏感信息泄露规则是否开启","type":"boolean"},"antitamper":{"description":"网页防篡改规则是否开启","type":"boolean"},"bot_enable":{"description":"所有反爬虫是否开启","type":"boolean"},"cc":{"description":"cc规则是否开启","type":"boolean"},"common":{"description":"常规检测是否开启","type":"boolean"},"crawler":{"description":"特征反爬虫是否开启","type":"boolean"},"crawler_engine":{"description":"搜索engine是否开启","type":"boolean"},"crawler_other":{"description":"其他爬虫是否开启","type":"boolean"},"crawler_scanner":{"description":"扫描器是否开启","type":"boolean"},"crawler_script":{"description":"脚本反爬虫是否开启","type":"boolean"},"custom":{"description":"精准防护是否开启","type":"boolean"},"followed_action":{"description":"攻击惩罚是否开启","type":"boolean"},"geoip":{"description":"地理位置规则是否开启","type":"boolean"},"ignore":{"description":"误报屏蔽是否开启","type":"boolean"},"privacy":{"description":"隐私屏蔽是否开启","type":"boolean"},"third_bot_river":{"description":"三方BOT是否开启","type":"boolean"},"webattack":{"description":"基础防护是否开启","type":"boolean"},"webshell":{"description":"Webshell检测是否开启","type":"boolean"},"whiteblackip":{"description":"黑白名单防护是否开启","type":"boolean"}},"type":"object"},"HttpRiverConfig":{"description":"瑞数配置项","properties":{"connect_timeout":{"description":"连接超时(毫秒)","maximum":1500,"minimum":0,"type":"integer"},"read_timeout":{"description":"读超时(毫秒)","maximum":1500,"minimum":0,"type":"integer"},"send_timeout":{"description":"写超时(毫秒)","maximum":1500,"minimum":0,"type":"integer"},"site_id":{"description":"瑞数站点ID","maxLength":1000,"minLength":1,"pattern":"^[_\\-/:.—,,\\w\\u4E00-\\u9FFF()()]+(\\s+[_\\-/:.—,,\\w\\u4E00-\\u9FFF()()]+)*$","type":"string"},"site_name":{"description":"瑞数站点名称","maxLength":2000,"minLength":1,"pattern":"^[-—.,,\\w\\u4E00-\\u9FFF()()]+(\\s+[-—.,,\\w\\u4E00-\\u9FFF()()]+)*$","type":"string"}},"type":"object"},"HttpThirdBotOptions":{"description":"三方BOT操作","properties":{"river_config":{"$ref":"#/components/schemas/HttpRiverConfig"}},"type":"object"},"ShowHttpPolicyResponseBody":{"properties":{"action":{"$ref":"#/components/schemas/HttpPolicyAction"},"bind_host":{"description":"防护域名的信息","items":{"$ref":"#/components/schemas/HttpPolicyBindHost"},"type":"array"},"extend":{"additionalProperties":{"type":"string"},"description":"扩展字段","type":"object"},"full_detection":{"description":"精准防护中的检测模式","type":"boolean"},"id":{"description":"防护策略id","type":"string"},"level":{"description":"防护等级","type":"integer"},"name":{"description":"防护策略名","type":"string"},"options":{"$ref":"#/components/schemas/HttpPolicyOption"},"robot_action":{"$ref":"#/components/schemas/HttpPolicyAction"},"third_bot_options":{"additionalProperties":{"properties":{},"type":"object"},"description":"三方BOT操作","type":"object"},"wap_managed_ruleset_id":{"description":"web基础防护托管规则集id","type":"string"}},"type":"object"},"UpdateHttpPolicyRequestBody":{"properties":{"action":{"$ref":"#/components/schemas/HttpPolicyAction"},"extend":{"additionalProperties":{"pattern":"^[a-zA-Z0-9_\\-/:.{}\\s\"}]{0,1024}$","type":"string"},"description":"扩展字段","type":"object"},"full_detection":{"description":"精准防护中的检测模式","type":"boolean"},"level":{"description":"防护等级","maximum":3,"minimum":1,"type":"integer"},"name":{"description":"防护策略名","pattern":"^[\\u4e00-\\u9fa50-9a-zA-Z_\\-::.]{1,128}$","type":"string"},"options":{"$ref":"#/components/schemas/HttpPolicyOption"},"robot_action":{"$ref":"#/components/schemas/HttpPolicyAction"},"third_bot_options":{"$ref":"#/components/schemas/HttpThirdBotOptions"}},"type":"object"}}},"consumes":"","definitions":null,"description":null,"group_id":"097b41aa00ce42768253a0a028ddb99b","host":"esa.cn-north-4.myhuaweicloud.com","id":"a3c21d52d8b64786982bef64776e1da4","info_version":"v2","method":"put","name":"UpdateHttpPolicy","parameters":null,"paths":{"/v1/edgesec/configuration/http/policies/{policy_id}":{"put":{"description":"更新防护策略","operationId":"UpdateHttpPolicy","parameters":[{"description":"auth token","in":"header","name":"X-Auth-Token","required":true,"schema":{"type":"string"}},{"description":"防护策略id","in":"path","name":"policy_id","required":true,"schema":{"pattern":"^[a-zA-Z0-9-]{32,36}$","type":"string"}}],"requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/UpdateHttpPolicyRequestBody"}}},"description":"更新防护策略body","required":true},"responses":{"200":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ShowHttpPolicyResponseBody"}}},"description":"OK"},"400":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorResponseBody"}}},"description":"请求失败"},"401":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorResponseBody"}}},"description":"token权限不足"},"500":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorResponseBody"}}},"description":"服务器内部错误"}},"summary":"更新防护策略","tags":["Http防护策略管理"],"x-codegen-request-body-name":"UpdateHttpPolicyRequestBody","x-cts-meta-anno":{"isAsyncApi":"false","resourceType":"wafPolicy","traceName":"updateWafPolicy"},"x-iam-auth-meta-anno":{"abacAction":"edgesec:wafPolicy:put","authLevel":"token","rbac":"{\"op_service\",\"te_admin\"}"},"x-is-registered":"Y","x-support-sdk":"Y"}}},"product_short":"EdgeSec","region_id":"cn-north-4","schemes":["HTTPS"],"security_definitions":null,"summary":"更新防护策略","tags":"Http防护策略管理","uri":null,"version":"3.0.1"}