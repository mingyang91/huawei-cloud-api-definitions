{"base_path":null,"components":{"schemas":{"CommonStatItem":{"description":"单个统计模型","properties":{"key":{"description":"对应请求参数group_by的子类别。例如在Http攻击分布统计接口中,group_by为action时,key可为:log、block、captcha、js_challenge;在Http攻击Top接口中,group_by为url时,key可为请求的URL,例:/abc。","type":"string"},"value":{"description":"攻击请求数","format":"int64","type":"integer"}},"required":["key","value"],"type":"object"},"ErrorRsp":{"description":"失败时返回的错误对象","properties":{"error_code":{"description":"错误码","maxLength":36,"minLength":8,"type":"string"},"error_msg":{"description":"错误描述","maxLength":512,"minLength":2,"type":"string"}},"required":["error_code","error_msg"],"type":"object"},"HttpTopStatsResponse":{"description":"top事件统计响应体","properties":{"end_time":{"description":"结束时间","format":"int64","type":"integer"},"group_by":{"description":"分组类型","type":"string"},"start_time":{"description":"开始时间","format":"int64","type":"integer"},"stat_type":{"description":"指标类型","type":"string"},"values":{"items":{"$ref":"#/components/schemas/CommonStatItem"},"type":"array"}},"required":["end_time","group_by","start_time","stat_type","values"],"type":"object"}}},"consumes":"","definitions":null,"description":null,"group_id":"097b41aa00ce42768253a0a028ddb99b","host":"esa.cn-north-4.myhuaweicloud.com","id":"2bacf9ec5d2a4fd29a25238422b501a5","info_version":"v2","method":"get","name":"ShowHttpAttackTopStats","parameters":null,"paths":{"/v1/edgesec/stat/http-attack-top":{"get":{"description":"查询HTTP攻击TOP数据","operationId":"ShowHttpAttackTopStats","parameters":[{"description":"租户token","in":"header","name":"X-Auth-Token","required":true,"schema":{"type":"string"}},{"description":"您可以通过调用企业项目管理服务(EPS)的查询企业项目列表接口(ListEnterpriseProject)查询企业项目id,默认为0","in":"query","name":"enterprise_project_id","schema":{"type":"string"}},{"description":"域名","in":"query","name":"domain_name","schema":{"type":"string"}},{"description":"指标类型。例如:req_num(请求次数)、bw(带宽)。目前只支持req_num","in":"query","name":"stat_type","required":true,"schema":{"enum":["req_num","bw"],"type":"string"}},{"description":"分组类型。响应值按分组类型进行统计,类型可为:host(请求的服务器域名)、sip(请求的客户端IP)、url(请求URL)、rule(自定义的策略类型描述)、user-agent(用户代理)、method(请求方法)、country(国家维度统计)。","in":"query","name":"group_by","required":true,"schema":{"type":"string"}},{"description":"限制Top数量(不超过100,默认为10)","in":"query","name":"limit","schema":{"default":10,"format":"int32","type":"integer"}},{"description":"时间枚举(LATEST(最近30mins)、TODAY(今天)、CUSTOMIZE(自定义,昨天到近30天任意整数天内))","in":"query","name":"time_type","required":true,"schema":{"enum":["LATEST","TODAY","CUSTOMIZE"],"type":"string"}},{"description":"开始时间","in":"query","name":"start_time","schema":{"format":"int64","type":"integer"}},{"description":"结束时间","in":"query","name":"end_time","schema":{"format":"int64","type":"integer"}}],"responses":{"200":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/HttpTopStatsResponse"}}},"description":"成功"},"400":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorRsp"}}},"description":"请求失败"},"401":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorRsp"}}},"description":"token权限不足"},"500":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorRsp"}}},"description":"服务器内部错误"}},"summary":"查询HTTP攻击TOP数据","tags":["Http统计"],"x-iam-auth-meta-anno":{"abacAction":"edgesec:statistics:get","authContextInitializerName":"defaultIamAuthContextInitializer","authLevel":"TOKEN","model":"v5-pkitoken","needAbacCheck":true,"needAbacResourceCheck":false,"needApigwJwtAuthCheck":true,"needCbcCheck":false,"needRbacCheck":false,"needResourceTagCheck":false,"supportAllGrantedEps":true},"x-is-registered":"Y","x-support-sdk":"Y"}}},"product_short":"EdgeSec","region_id":"cn-north-4","schemes":["HTTPS"],"security_definitions":null,"summary":"查询HTTP攻击TOP数据","tags":"Http统计","uri":null,"version":"3.0.1"}