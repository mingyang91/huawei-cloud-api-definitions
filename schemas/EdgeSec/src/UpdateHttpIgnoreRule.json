{"base_path":null,"components":{"schemas":{"ErrorResponseBody":{"description":"通用错误响应","properties":{"encoded_authorization_message":{"description":"对接IAM5.0的服务,拒绝访问时需要返回IAM的相关响应","type":"string"},"error_code":{"description":"标准化错误码:服务名.八位数字编码","type":"string"},"error_msg":{"description":"清晰的错误信息","type":"string"}},"type":"object"},"HttpIgnoreRuleCondition":{"description":"条件列表参数较为复杂,存在级联关系,建议同时使用控制台上的添加误报屏蔽规则,单击F12键查看路径后缀为/ignore-rule,方法为POST的请求参数,便于理解参数的填写","properties":{"category":{"description":"字段类型,可选值有ip、url、params、cookie、header","pattern":"^[a-zA-Z0-9_\\-/:.]{0,256}$","type":"string"},"check_all_indexes_logic":{"description":"1.所有子字段/2.任意子字段","maximum":2,"minimum":1,"type":"integer"},"contents":{"description":"内容列表","items":{"pattern":"^[\\s\\S]{0,4096}$","type":"string"},"type":"array"},"index":{"description":"字段类型为ip且子字段为客户端ip时,不需要传index参数;子字段类型为X-Forwarded-For时,值为x-forwarded-for;字段类型为params、header、cookie并且子字段为自定义时,index的值为自定义子字段","pattern":"^[a-zA-Z0-9_\\-/:.]{0,4096}$","type":"string"},"logic_operation":{"description":"匹配逻辑,匹配逻辑根据字段类型变化,字段类型为ip时,匹配逻辑支持(equal:等于,not_equal:不等于),字段类型为url、header、params、cookie时,匹配逻辑支持(equal:等于,not_equal:不等于,contain:包含,not_contain:不包含,prefix:前缀为,not_prefix:前缀不为,suffix:后缀为,not_suffix:后缀不为,regular_match:正则匹配,regular_not_match:正则不匹配)","pattern":"^[a-zA-Z0-9_\\-/:.]{0,256}$","type":"string"},"size":{"description":"若防护规则涉及阈值,即使用该字段","format":"int64","minimum":0,"type":"integer"},"value_list_id":{"description":"引用表id","pattern":"^[a-zA-Z0-9-]{32,36}$","type":"string"}},"required":["category","contents","logic_operation"],"type":"object"},"ShowHttpIgnoreRuleResponseBody":{"properties":{"advanced":{"$ref":"#/components/schemas/HttpIgnoreRuleCondition"},"clear_time":{"description":"上一次命中次数清零时间戳","format":"int64","type":"integer"},"conditions":{"description":"命中条件","items":{"$ref":"#/components/schemas/HttpIgnoreRuleCondition"},"type":"array"},"description":{"description":"规则描述","type":"string"},"domains":{"description":"域名列表","items":{"type":"string"},"type":"array"},"hit_num":{"description":"命中次数","type":"integer"},"id":{"description":"规则id","type":"string"},"mode":{"description":"误报屏蔽模式,默认为0即旧模式","minimum":0,"type":"integer"},"name":{"description":"规则名称","type":"string"},"policy_id":{"description":"规则所在策略id","type":"string"},"policy_name":{"description":"规则所在策略名称","type":"string"},"rule":{"description":"规则编号","type":"string"},"status":{"description":"规则开关状态","type":"integer"},"timestamp":{"description":"创建规则时间戳","format":"int64","type":"integer"},"update_time":{"description":"最后更新时间戳","format":"int64","type":"integer"},"url":{"description":"误报路径","type":"string"},"url_logic":{"description":"屏蔽规则url类型(前缀:prefix,等于:equal)","type":"string"}},"type":"object"},"UpdateHttpIgnoreRuleRequestBody":{"properties":{"advanced":{"$ref":"#/components/schemas/HttpIgnoreRuleCondition"},"conditions":{"description":"命中条件","items":{"$ref":"#/components/schemas/HttpIgnoreRuleCondition"},"type":"array"},"description":{"description":"规则描述,最长512字符","pattern":"^[a-zA-Z.。,,_\\-/:0-9\\u4E00-\\u9FFF\\s]{0,512}$","type":"string"},"domains":{"description":"防护域名或防护网站,数组长度为0时,代表规则对全部域名或防护网站生效","items":{"pattern":"^[\\s\\S]{0,256}$","type":"string"},"type":"array"},"mode":{"description":"误报屏蔽模式,默认为0即旧模式","minimum":0,"type":"integer"},"name":{"description":"规则名称","pattern":"^[a-zA-Z.。,,_\\-/:0-9\\u4E00-\\u9FFF\\s]{0,255}$","type":"string"},"rule":{"description":"需要屏蔽的规则,可屏蔽一个或者多个,屏蔽多个时使用半角符;分隔 \n - 当需要屏蔽某一条内置规则时,该参数值为该内置规则id,可以在Web应用防火墙控制台的防护策略->策略名称->Web基础防护的高级设置->防护规则中查询;也可以在防护事件的事件详情中查询内置规则id \n - 当需要屏蔽web基础防护某一类规则时,该参数值为需要屏蔽的web基础防护某一类规则名。其中,xss:xss攻击;webshell:网站木马;vuln:其他类型攻击;sqli:sql注入攻击;robot:恶意爬虫;rfi:远程文件包含;lfi:本地文件包含;cmdi:命令注入攻击 \n - 当需要屏蔽Web基础防护模块,该参数值为:all \n - 当需要屏蔽规则为所有检测模块时,该参数值为:bypass","pattern":"^[\\s\\S]{0,256}$","type":"string"},"status":{"description":"规则开关状态","maximum":1,"minimum":0,"type":"integer"},"url":{"description":"误报路径","pattern":"^[\\s\\S]{0,256}$","type":"string"},"url_logic":{"description":"屏蔽规则url类型(前缀:prefix,等于:equal)","pattern":"^[\\s\\S]{0,256}$","type":"string"}},"required":["conditions","domains","mode","rule"],"type":"object"}}},"consumes":"","definitions":null,"description":null,"group_id":"097b41aa00ce42768253a0a028ddb99b","host":"esa.cn-north-4.myhuaweicloud.com","id":"1972cd10a4c247f382ca4e0046b2cbea","info_version":"v2","method":"put","name":"UpdateHttpIgnoreRule","parameters":null,"paths":{"/v1/edgesec/configuration/http/policies/{policy_id}/ignore-rule/{rule_id}":{"put":{"description":"更新误报屏蔽规则","operationId":"UpdateHttpIgnoreRule","parameters":[{"description":"auth token","in":"header","name":"X-Auth-Token","required":true,"schema":{"type":"string"}},{"description":"策略id","in":"path","name":"policy_id","required":true,"schema":{"pattern":"^[a-zA-Z0-9-]{32,36}$","type":"string"}},{"description":"防护规则id","in":"path","name":"rule_id","required":true,"schema":{"pattern":"^[a-zA-Z0-9-]{32,36}$","type":"string"}}],"requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/UpdateHttpIgnoreRuleRequestBody"}}},"description":"修改误报屏蔽规则body","required":false},"responses":{"200":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ShowHttpIgnoreRuleResponseBody"}}},"description":"请求成功"},"400":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorResponseBody"}}},"description":"请求失败"},"401":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorResponseBody"}}},"description":"token权限不足"},"500":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorResponseBody"}}},"description":"服务器内部错误"}},"summary":"更新误报屏蔽规则","tags":["Http防护规则管理-误报屏蔽"],"x-codegen-request-body-name":"UpdateHttpIgnoreRuleRequestBody","x-cts-meta-anno":{"isAsyncApi":"false","resourceType":"wafIgnoreRule","traceName":"updateWafIgnoreRule"},"x-iam-auth-meta-anno":{"abacAction":"edgesec:wafIgnoreRule:put","authLevel":"token","rbac":"{\"op_service\",\"te_admin\"}"},"x-is-registered":"Y","x-support-sdk":"Y"}}},"product_short":"EdgeSec","region_id":"cn-north-4","schemes":["HTTPS"],"security_definitions":null,"summary":"更新误报屏蔽规则","tags":"Http防护规则管理-误报屏蔽","uri":null,"version":"3.0.1"}