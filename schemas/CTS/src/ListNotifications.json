{"base_path":"/","components":null,"consumes":"[\"application/json;charset=UTF-8\"]","definitions":{"FailedRsp":{"description":"失败时的返回对象。","properties":{"error_code":{"description":"错误码标识,CTS.XXX。","example":"CTS.0214","maxLength":15,"minLength":15,"type":"string"},"error_msg":{"description":"错误描述。","example":"The tracker does not exist.","maxLength":2048,"minLength":0,"type":"string"}},"required":["error_code","error_msg"]},"Filter":{"description":"关键操作通知高级筛选条件。","properties":{"condition":{"description":"多条件关系。\n- AND 表示所有过滤条件满足后生效。\n- OR 表示有任意一个条件满足时生效。","enum":["AND","OR"],"type":"string"},"is_support_filter":{"description":"是否打开高级筛选开关。","type":"boolean"},"rule":{"description":"高级过滤条件规则,示例如下:\"key != value\",格式为:字段 规则 值。\n-字段取值范围:api_version,code,trace_rating,trace_type,resource_id,resource_name。\n-规则:!= 或 =。\n- 值:api_version正则约束:^(a-zA-Z0-9_-.){1,64}$;code:最小长度1,最大长度256;trace_rating枚举值:\"normal\", \"warning\", \"incident\";trace_type枚举值:\"ConsoleAction\", \"ApiCall\", \"SystemAction\";resource_id:最小长度1,最大长度350;resource_name:最小长度1,最大长度256","example":"[“trace_rating != normal\", \"resource_id = xxx\"]","items":{"type":"string"},"type":"array"}},"required":["condition","is_support_filter","rule"]},"ListNotificationResponseBody":{"description":"关键操作通知列表。","properties":{"notifications":{"$ref":"#/definitions/NotificationsResponseBodyList"}}},"NotificationUserList":{"description":"通知用户列表,目前最多支持对10个用户组和50个用户发起的操作进行配置。","items":{"$ref":"#/definitions/NotificationUsers"},"type":"array"},"NotificationUsers":{"description":"通知用户列表。","properties":{"user_group":{"description":"IAM用户组。","maxLength":64,"minLength":1,"type":"string"},"user_list":{"description":"IAM用户。","items":{"type":"string"},"maxItems":32,"minItems":1,"type":"array"}},"required":["user_group","user_list"]},"NotificationsResponseBody":{"properties":{"create_time":{"description":"关键操作通知创建时间戳。","example":1587958482923,"format":"int64","maximum":4102416000000,"minimum":946656000000,"type":"integer"},"filter":{"$ref":"#/definitions/Filter","description":"关键操作通知高级筛选条件。"},"notification_id":{"description":"关键操作通知的唯一标识。","maxLength":40,"minLength":1,"type":"string"},"notification_name":{"description":"标识关键操作名称。","maxLength":64,"minLength":1,"type":"string"},"notification_type":{"description":"关键操作通知类型,根据topic_id区分为消息通知服务(smn)和函数工作流(fun)。","enum":["smn","fun"],"type":"string"},"notify_user_list":{"$ref":"#/definitions/NotificationUserList"},"operation_type":{"description":"标识操作类型。\n目前支持的操作类型有完整类型(complete)和自定义类型(customized)。\n完整类型下,CTS发送通知的对象为已对接服务的所有事件。\n自定义类型下,CTS发送通知的对象是在operations列表中指定的事件。","enum":["customized","complete"],"type":"string"},"operations":{"$ref":"#/definitions/OperationsList"},"project_id":{"description":"项目ID。","maxLength":32,"minLength":32,"type":"string"},"status":{"description":"标识关键操作通知状态,包括正常(enabled),停止(disabled)两种状态。","enum":["enabled","disabled"],"type":"string"},"topic_id":{"description":"消息通知服务的topic_urn或者函数工作流的func_urn。\n- 消息通知服务的topic_urn可以通过消息通知服务的查询主题列表API获取,示例:urn:smn:regionId:f96188c7ccaf4ffba0c9aa149ab2bd57:test_topic_v2。\n- 函数工作流的func_urn可以通过函数工作流的获取函数列表API获取,示例:urn:fss:xxxxxxxxx:7aad83af3e8d42e99ac194e8419e2c9b:function:default:test。","maxLength":400,"minLength":0,"type":"string"}}},"NotificationsResponseBodyList":{"description":"关键操作通知列表。","items":{"$ref":"#/definitions/NotificationsResponseBody"},"type":"array"},"Operations":{"description":"操作事件列表,目前最多支持对100服务的1000个关键操作进行配置。","properties":{"resource_type":{"description":"标识资源类型。","maxLength":64,"minLength":1,"type":"string"},"service_type":{"description":"标识云服务类型。必须为已对接CTS的云服务的英文缩写,且服务类型一般为大写字母。\n已对接的云服务列表参见《云审计服务用户指南》“支持的服务”章节。","maxLength":64,"minLength":1,"type":"string"},"trace_names":{"description":"标识事件名称。","items":{"type":"string"},"maxItems":64,"minItems":1,"type":"array"}},"required":["service_type","resource_type","trace_names"]},"OperationsList":{"description":"操作事件列表。","items":{"$ref":"#/definitions/Operations"},"type":"array"}},"description":null,"group_id":"fb21f09f03c44339a10d3ee7b60da942","host":"cts.cn-north-4.myhuaweicloud.com","id":"1a4c0ef738694466b6091e2aa111e1a6","info_version":"v3","method":"get","name":"ListNotifications","parameters":{},"paths":{"/v3/{project_id}/notifications/{notification_type}":{"get":{"description":"查询创建的关键操作通知规则。","operationId":"ListNotifications","parameters":[{"description":"项目ID,参见《云审计服务API参考》“获取账号ID和项目ID”章节。","in":"path","maxLength":32,"minLength":32,"name":"project_id","required":true,"type":"string"},{"description":"通知类型。","enum":["smn","fun"],"in":"path","name":"notification_type","required":true,"type":"string"},{"description":"标识关键操作通知名称。 在不传入该字段的情况下,将查询当前租户所有的关键操作通知。","in":"query","maxLength":64,"minLength":1,"name":"notification_name","required":false,"type":"string"}],"responses":{"200":{"description":"查询成功。","examples":{"application/json":{"notifications":[{"create_time":1633933167385,"notification_id":"0b98e1c2-2fd6-4e33-a355-f9e12eaab88a","notification_name":"test2","notification_type":"smn","notify_user_list":[{"user_group":"admin","user_list":["test1","test2"]},{"user_group":"CTS view","user_list":["test3","test4"]}],"operation_type":"customized","operations":[{"resource_type":"tracker","service_type":"CTS","trace_names":["createTracker"]},{"resource_type":"notification","service_type":"CTS","trace_names":["deleteNotification","updateNotification"]},{"resource_type":"pe","service_type":"AOM","trace_names":["createPolicyGroup","updatePolicyGroup","deletePolicyGroup"]}],"project_id":"24edf66e79d04187acb99a463e610764","status":"enabled","topic_id":"urn:smn:{regionid}:24edf66e79d04187acb99a463e610764:test"},{"create_time":1633924057706,"notification_id":"6d4a09bb-aa8e-40db-9e87-0d5e203823a8","notification_name":"test1","notification_type":"smn","notify_user_list":[{"user_group":"admin","user_list":["test1","test2"]},{"user_group":"CTS view","user_list":["test3","test4"]}],"operation_type":"complete","operations":[],"project_id":"24edf66e79d04187acb99a463e610764","status":"disabled"}]}},"schema":{"$ref":"#/definitions/ListNotificationResponseBody"}},"400":{"description":"服务器未能处理请求。","schema":{"$ref":"#/definitions/FailedRsp"}},"401":{"description":"请求鉴权校验失败,访问被拒绝。"},"403":{"description":"请求权限校验失败,访问被禁止。"},"404":{"description":"服务器无法找到被请求的资源或部分关键操作通知删除失败。"},"500":{"description":"服务内部异常,请求未完成;或部分追踪器删除失败。"},"503":{"description":"被请求的服务无效。建议直接修改该请求,不要重试该请求。"}},"summary":"查询关键操作通知","tags":["关键操作通知管理"],"x-is-registered":"Y","x-open-region-cloud":"hk,hc","x-publishpath":"cts_api_0315","x-support-sdk":"Y"}}},"product_short":"CTS","region_id":"cn-north-4","schemes":["HTTPS"],"security_definitions":null,"summary":"查询关键操作通知","tags":"关键操作通知管理","uri":null,"version":"2.0"}