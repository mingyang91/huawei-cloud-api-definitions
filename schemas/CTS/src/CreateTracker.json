{"base_path":"/","components":null,"consumes":"[\"application/json;charset=UTF-8\"]","definitions":{"CreateTrackerRequestBody":{"properties":{"agency_name":{"description":"云服务委托名称。\n参数值为\"cts_admin_trust\"时,创建追踪器会自动创建一个云服务委托:cts_admin_trust。","enum":["cts_admin_trust"],"example":"cts_admin_trust","maxLength":32,"minLength":1,"type":"string"},"data_bucket":{"$ref":"#/definitions/DataBucket","description":"追踪桶配置信息。\n当\"tracker_type\"参数值为\"data\"时该参数值有效。","x-order":8},"is_lts_enabled":{"description":"是否打开事件分析。","example":true,"type":"boolean","x-order":3},"is_organization_tracker":{"default":false,"description":"是否应用到我的组织。\n只针对管理类追踪器。设置为true时,ORG组织下所有成员当前区域的审计日志会转储到该追踪器配置的OBS桶或者LTS日志流,但是事件列表界面不支持查看其它组织成员的审计日志。","type":"boolean"},"is_support_trace_files_encryption":{"description":"事件文件转储加密功能开关。\n当\"tracker_type\"参数值为\"system\"时该参数值有效。\n该参数必须与kms_id参数同时使用。","example":true,"type":"boolean","x-order":5},"is_support_validate":{"description":"事件文件转储时是否打开事件文件校验。\n当\"tracker_type\"参数值为\"system\"时该参数值有效。","example":true,"type":"boolean","x-order":7},"kms_id":{"description":"事件文件转储加密所采用的秘钥id(从KMS获取)。\n当\"tracker_type\"参数值为\"system\"时该参数值有效。\n当\"is_support_trace_files_encryption\"参数值为“是”时,此参数为必选项。","example":"13a4207c-7abe-4b68-8510-16b84c3b5504","maxLength":200,"minLength":0,"type":"string","x-order":6},"management_event_selector":{"$ref":"#/definitions/ManagementEventSelector"},"obs_info":{"$ref":"#/definitions/TrackerObsInfo","description":"转储桶配置","x-order":4},"tracker_name":{"description":"标识追踪器名称。\n当\"tracker_type\"参数值为\"system\"时该参数为默认值\"system\"。\n当\"tracker_type\"参数值为\"data\"时该参数需要指定追踪器名称\"。","example":"data-tracker-name","maxLength":64,"minLength":1,"type":"string","x-order":2},"tracker_type":{"description":"标识追踪器类型。\n目前支持系统追踪器类型有管理类追踪器(system)和数据类追踪器(data)。\n数据类追踪器和管理类追踪器共同参数有:is_lts_enabled, obs_info;\n管理类追踪器参数:is_support_trace_files_encryption, kms_id, is_support_validate, is_support_validate;\n数据类追踪器参数:tracker_name, data_bucket。","enum":["system","data"],"type":"string","x-example":"system","x-order":1}},"required":["tracker_type","tracker_name"]},"CreateTrackerResponseBody":{"properties":{"agency_name":{"description":"云服务委托名称。","enum":["cts_admin_trust"],"example":"cts_admin_trust","maxLength":32,"minLength":1,"type":"string"},"create_time":{"description":"追踪器创建时间戳。","example":1587958482923,"format":"int64","maximum":4102416000000,"minimum":946656000000,"type":"integer","x-order":2},"data_bucket":{"$ref":"#/definitions/DataBucketQuery","description":"数据类事件追踪桶信息。\n当\"tracker_type\"参数值为\"data\"时有效。","x-order":15},"detail":{"description":"该参数仅在追踪器状态异常时返回,用于标识追踪器异常的原因,包括桶策略异常(bucketPolicyError),桶不存在(noBucket)和欠费或冻结(arrears)三种原因。","example":"noBucket","maxLength":360,"minLength":0,"type":"string","x-order":12},"domain_id":{"description":"账号ID,参见《云审计服务API参考》“获取账号ID和项目ID”章节。","example":"aexxxxxxxx4d4fb4bexxxxxxx791fbf","maxLength":40,"minLength":15,"type":"string","x-order":8},"id":{"description":"追踪器唯一标识。","example":"2e6fa9b8-8c6e-456d-b5d3-77be972d220b","maxLength":200,"minLength":0,"type":"string","x-order":1},"is_organization_tracker":{"default":false,"description":"是否应用到我的组织。\n只针对管理类追踪器。设置为true时,ORG组织下所有成员当前区域的审计日志会转储到该追踪器配置的OBS桶或者LTS日志流,但是事件列表界面不支持查看其它组织成员的审计日志。","type":"boolean"},"is_support_trace_files_encryption":{"description":"事件文件转储加密功能开关。\n该参数必须与kms_id参数同时使用。\n当前环境仅\"tracker_type\"参数值为\"system\"时支持该功能。","example":false,"type":"boolean","x-order":13},"is_support_validate":{"description":"是否打开事件文件校验。当前环境仅\"tracker_type\"参数值为\"system\"时支持该功能。","example":true,"type":"boolean","x-order":4},"kms_id":{"description":"事件文件转储加密所采用的秘钥id(从KMS获取)。\n当\"tracker_type\"参数值为\"system\"和\"is_support_trace_files_encryption\"参数值为“是”时,此参数为必选项。","example":"13a4207c-7abe-4b68-8510-16b84c3b5504","maxLength":200,"minLength":0,"type":"string","x-order":3},"lts":{"$ref":"#/definitions/Lts","description":"事件分析"},"management_event_selector":{"$ref":"#/definitions/ManagementEventSelector"},"obs_info":{"$ref":"#/definitions/ObsInfo","description":"事件转储桶信息。","x-order":14},"project_id":{"description":"项目ID。","example":"bb1xxxxxxxxe4f498cbxxxxxxxx35634","maxLength":40,"minLength":15,"type":"string","x-order":9},"status":{"description":"标识追踪器状态,包括正常(enabled),停止(disabled)和异常(error)三种状态,状态为异常时需通过明细(detail)字段说明错误来源。","enum":["enabled","disabled"],"example":"disabled","type":"string","x-order":11},"tracker_name":{"description":"标识追踪器名称,当前版本默认为“system”。","example":"system","maxLength":64,"minLength":1,"type":"string"},"tracker_type":{"description":"标识追踪器类型。\n目前支持系统追踪器类型有管理类追踪器(system)和数据类追踪器(data)。","enum":["system","data"],"type":"string","x-example":"system","x-order":7}}},"DataBucket":{"properties":{"data_bucket_name":{"description":"数据类追踪器追踪对象的桶名。\n- 当启用或者停用数据类追踪器时,该参数为必选。\n- 管理类追踪器无此参数。\n- 追踪器一旦创建追踪桶无法修改。","maxLength":63,"minLength":3,"type":"string"},"data_event":{"description":"数据类追踪器追踪的操作类型。\n- 当启用或者停用数据类追踪器时,该参数为必选。\n- 管理类追踪器无此参数。","items":{"enum":["WRITE","READ"],"example":"WRITE","type":"string"},"maxItems":2,"minItems":1,"type":"array"}}},"DataBucketQuery":{"description":"追踪桶信息。","properties":{"data_bucket_name":{"description":"标识OBS桶名称。由数字或字母开头,支持小写字母、数字、“-”、“.”,长度为3~63个字符。","example":"obs-f1da","maxLength":63,"minLength":3,"type":"string"},"data_event":{"description":"数据类追踪器追踪对象的桶名。\n- 当启用或者停用数据类追踪器时,该参数为必选。\n- 管理类追踪器无此参数。\n- 追踪器一旦创建追踪桶无法修改。","example":"WRITE","items":{"enum":["WRITE","READ"],"type":"string"},"maxItems":2,"minItems":1,"type":"array"},"search_enabled":{"description":"追踪桶日志是否支持搜索。","example":"true","type":"boolean"}}},"FailedRsp":{"description":"失败时的返回对象。","properties":{"error_code":{"description":"错误码标识,CTS.XXX。","example":"CTS.0214","maxLength":15,"minLength":15,"type":"string"},"error_msg":{"description":"错误描述。","example":"The tracker does not exist.","maxLength":2048,"minLength":0,"type":"string"}},"required":["error_code","error_msg"]},"Lts":{"description":"云日志服务配置","properties":{"is_lts_enabled":{"description":"是否启用日志服务检索功能。","example":true,"type":"boolean"},"log_group_name":{"description":"云审计服务在日志服务中创建的日志组名称。","example":"CTS","maxLength":100,"minLength":0,"type":"string"},"log_topic_name":{"description":"云审计服务在日志服务中创建的日志主题名称。","example":"system-trace","maxLength":100,"minLength":0,"type":"string"}}},"ManagementEventSelector":{"description":"管理类事件选择器。","properties":{"exclude_service":{"description":"标识不转储的云服务名称。\n目前只支持设置为KMS,表示屏蔽KMS服务的createDatakey事件。","example":"","items":{"example":"KMS","maxLength":20,"minLength":1,"type":"string"},"maxItems":10,"minItems":0,"type":"array"}},"type":"object"},"ObsInfo":{"description":"转储桶信息。","properties":{"bucket_lifecycle":{"description":"标识配置桶内对象存储周期。\n当\"tracker_type\"参数值为\"data\"时该参数值有效。","example":30,"format":"int64","maximum":100000,"minimum":0,"type":"integer"},"bucket_name":{"description":"标识OBS桶名称。由数字或字母开头,支持小写字母、数字、“-”、“.”,长度为3~63个字符。","example":"obs-f1da","maxLength":63,"minLength":3,"type":"string"},"compress_type":{"default":"gzip","description":"压缩类型。包括不压缩(json),压缩(gzip)两种状态。默认为gzip格式。","enum":["gzip","json"],"type":"string"},"file_prefix_name":{"description":"标识需要存储于OBS的日志文件前缀,0-9,a-z,A-Z,'-','.','_'长度为0~64字符。","example":"yO8Q","maxLength":64,"minLength":0,"type":"string"},"is_authorized_bucket":{"description":"标识配置桶是否已经授权给CTS服务账号。","example":"true","type":"boolean"},"is_obs_created":{"description":"标识配置桶是否由追踪器自动创建。","example":"true","type":"boolean"},"is_sort_by_service":{"default":true,"description":"路径按云服务划分,打开后转储文件路径中将增加云服务名。默认为true。","type":"boolean"}}},"TrackerObsInfo":{"description":"转储桶信息。","properties":{"bucket_lifecycle":{"description":"标识配置桶内对象存储周期。\n当\"tracker_type\"参数值为\"data\"时该参数值有效。","example":"30","maximum":5000,"minimum":0,"type":"integer"},"bucket_name":{"description":"标识OBS桶名称。由数字或字母开头,支持小写字母、数字、“-”、“.”,长度为3~63个字符。","example":"obs-f1da","maxLength":63,"minLength":3,"type":"string"},"compress_type":{"default":"gzip","description":"压缩类型。包括不压缩(json),压缩(gzip)两种状态。默认为gzip格式。","enum":["gzip","json"],"type":"string"},"file_prefix_name":{"description":"标识需要存储于OBS的日志文件前缀,0-9,a-z,A-Z,'-','.','_'长度为0~64字符。","example":"yO8Q","maxLength":64,"minLength":0,"type":"string"},"is_obs_created":{"description":"是否支持新建OBS桶。\n  值为“true”时,表示新创建OBS桶存储事件文件;\n  值为“false”时,选择已存在的OBS桶存储事件文件。","example":"true","type":"boolean"},"is_sort_by_service":{"default":true,"description":"路径按云服务划分,打开后转储文件路径中将增加云服务名。默认为true。","type":"boolean"}}}},"description":null,"group_id":"fb21f09f03c44339a10d3ee7b60da942","host":"cts.cn-north-4.myhuaweicloud.com","id":"d16e31fe3bce4421b5a3d7498db947a0","info_version":"v3","method":"post","name":"CreateTracker","parameters":{},"paths":{"/v3/{project_id}/tracker":{"post":{"consumes":[],"deprecated":false,"description":"云审计服务开通后系统会自动创建一个追踪器,用来关联系统记录的所有操作。目前,一个云账户在一个Region下支持创建一个管理类追踪器和多个数据类追踪器。\n云审计服务支持在管理控制台查询近7天内的操作记录。如需保存更长时间的操作记录,您可以在创建追踪器之后通过对象存储服务(Object Storage Service,以下简称OBS)将操作记录实时保存至OBS桶中。","operationId":"CreateTracker","parameters":[{"description":"项目ID,参见《云审计服务API参考》“获取账号ID和项目ID”章节。","in":"path","maxLength":40,"minLength":15,"name":"project_id","required":true,"type":"string","x-example":"2b31ed520xxxxxxebedb6e57xxxxxxxx"},{"description":"This a create Body Object","in":"body","name":"CreateTrackerRequestBody","required":true,"schema":{"$ref":"#/definitions/CreateTrackerRequestBody"}}],"produces":[],"responses":{"201":{"description":"请求成功。","examples":{"application/json":{"create_time":1587958482923,"domain_id":"aexxxxxxxx4d4fb4bexxxxxxx791fbf","id":"2e6fa9b8-8c6e-456d-b5d3-77be972d220b","is_support_trace_files_encryption":true,"kms_id":"13a4207c-7abe-4b68-8510-16b84c3b5504","log_file_validate":{"is_support_validate":true},"lts":{"is_lts_enabled":true,"log_group_name":"CTS","log_topic_name":"system-trace"},"obs_info":{"bucket_lifecycle":30,"bucket_name":"test-bucket","file_prefix_name":"11","is_authorized_bucket":false,"is_obs_created":false},"project_id":"bb1xxxxxxxxe4f498cbxxxxxxxx35634","status":"enabled","tracker_name":"system","tracker_type":"system"}},"schema":{"$ref":"#/definitions/CreateTrackerResponseBody"}},"400":{"description":"服务器未能处理请求。","schema":{"$ref":"#/definitions/FailedRsp"}},"401":{"description":"请求鉴权校验失败,访问被拒绝。"},"403":{"description":"请求权限校验失败,访问被禁止。"},"404":{"description":"请求中的资源不存在,请求未完成。"},"500":{"description":"服务内部异常,请求未完成。"},"503":{"description":" 被请求的服务无效。建议直接修改该请求,不要重试该请求。"}},"summary":"创建追踪器","tags":["追踪器管理"],"x-is-registered":"Y","x-open-region-cloud":"hk,hc,hcso,g42","x-order":1,"x-publishpath":"cts_api_0321","x-request-examples-1":{"is_lts_enabled":true,"is_support_trace_files_encryption":true,"is_support_validate":true,"kms_id":"13a4207c-7abe-4b68-8510-16b84c3b5504","obs_info":{"bucket_name":"saveTraceBucket","file_prefix_name":"2020_01_01","is_obs_created":false},"tracker_type":"system"},"x-request-examples-2":{"data_bucket":{"data_bucket_name":"cstest0423","data_event":["READ","WRITE"]},"is_lts_enabled":true,"obs_info":{"bucket_lifecycle":30,"bucket_name":"saveTraceBucket","file_prefix_name":"11","is_obs_created":false},"tracker_name":"data-tracker-name","tracker_type":"data"},"x-request-examples-description-1":"管理类追踪器创建样例。","x-request-examples-description-2":"数据类追踪器创建样例。","x-request-examples-text-1":"{\n  \"tracker_type\": \"system\",\n  \"tracker_name\": \"system\",\n  \"obs_info\": {\n    \"is_obs_created\": false,\n    \"bucket_name\": \"test-data-tracker\",\n    \"file_prefix_name\": \"11\"\n},\n  \"is_lts_enabled\": true,\n  \"is_support_trace_files_encryption\": true,\n  \"kms_id\": \"13a4207c-7abe-4b68-8510-16b84c3b5504\",\n  \"is_support_validate\": true\n}","x-request-examples-text-2":"{\n \"tracker_type\": \"data\",\n \"tracker_name\": \"data-tracker-name\",\n \"obs_info\": {\n    \"is_obs_created\": false,\n    \"bucket_name\": \"saveTraceBucket\",\n    \"file_prefix_name\": \"11\",\n    \"bucket_lifecycle\": 30\n  },\n  \"is_lts_enabled\": true,\n  \"data_bucket\": {\n    \"data_event\": [\n      \"READ\",\n      \"WRITE\"\n    ],\n    \"data_bucket_name\": \"cstest0423\"\n  }\n}","x-request-examples-url-1":"POST https://{endpoint}/v3/{project_id}/tracker","x-support-sdk":"Y"}}},"product_short":"CTS","region_id":"cn-north-4","schemes":["HTTPS"],"security_definitions":null,"summary":"创建追踪器","tags":"追踪器管理","uri":null,"version":"2.0"}