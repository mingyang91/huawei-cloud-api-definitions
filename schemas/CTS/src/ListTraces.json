{"base_path":"/","components":null,"consumes":"[\"application/json;charset=UTF-8\"]","definitions":{"Attributes":{"description":"临时安全凭据的属性。","properties":{"created_at":{"description":"颁发临时安全凭证时的时间(timestamp,为标准UTC时间,毫秒级,13位数字)。","maxLength":13,"minLength":1,"type":"string"},"mfa_authenticated":{"description":"是否已经通过MFA身份认证。","maxLength":10,"minLength":1,"type":"string"}},"type":"object"},"BaseUser":{"description":"用户信息。","properties":{"id":{"description":"账号ID,参见《云审计服务API参考》“获取账号ID和项目ID”章节。","maxLength":40,"minLength":15,"type":"string"},"name":{"description":"账号名称。","maxLength":300,"minLength":0,"type":"string"}}},"FailedRsp":{"description":"失败时的返回对象。","properties":{"error_code":{"description":"错误码标识,CTS.XXX。","example":"CTS.0214","maxLength":15,"minLength":15,"type":"string"},"error_msg":{"description":"错误描述。","example":"The tracker does not exist.","maxLength":2048,"minLength":0,"type":"string"}},"required":["error_code","error_msg"]},"ListTracesRsponse":{"properties":{"meta_data":{"$ref":"#/definitions/MetaData","description":"本次查询事件条数和标记位。"},"traces":{"description":"本次查询事件列表返回事件数组。","items":{"$ref":"#/definitions/Traces"},"maxItems":5000,"minItems":0,"type":"array"}}},"MetaData":{"description":"标识为扩展字段,包括count(当前响应中事件记录的个数)和marker(本次查询返回事件列表最后一个事件ID)。","properties":{"count":{"description":"标识本次查询事件列表返回的事件记录的总条数。","example":2,"format":"int32","maximum":5000,"minimum":0,"type":"integer"},"marker":{"description":"标识本次查询事件列表返回的最后一个事件ID。可以使用这个参数返回值作为分页请求参数next的值,如果marker返回为null,则表示当前请求条件下查询事件列表已经全部返回没有下一页。","example":"e001ccb8-bc09-11e6-b2cc-2640a43cc6e8","maxLength":500,"minLength":0,"type":"string"}}},"SessionContext":{"description":"临时安全凭据的属性。","properties":{"attributes":{"$ref":"#/definitions/Attributes","description":"临时安全凭据的属性。"}},"type":"object"},"Traces":{"properties":{"api_version":{"description":"标识事件对应的云服务接口版本。","example":"2.0","maxLength":10,"minLength":0,"type":"string"},"code":{"description":"记录用户请求的响应,标识事件对应接口返回的HTTP状态码。","example":"302","maxLength":20,"minLength":0,"type":"string"},"endpoint":{"description":"云资源的详情页面","example":"https://*****/vpc?agencyId=***&region=***&locale=zh-cn#","maxLength":500,"minLength":0,"type":"string"},"enterprise_project_id":{"description":"标识资源所在的企业项目ID。","maxLength":64,"minLength":1,"type":"string"},"location_info":{"description":"记录本次请求出错后,问题定位所需要的辅助信息。","example":"resource has been deleted","maxLength":300,"minLength":1,"type":"string"},"message":{"description":"标识其他云服务为此条事件添加的备注信息。","example":"xxx","maxLength":5000,"minLength":0,"type":"string"},"operation_id":{"description":"记录事件对应的操作ID。","maxLength":64,"minLength":1,"type":"string"},"read_only":{"description":"标识用户请求是不是只读。","type":"boolean"},"record_time":{"description":"标识云审计服务记录本次事件的时间戳。","example":"1567477476596","format":"int64","maximum":4102416000000,"minimum":946656000000,"type":"integer"},"request":{"description":"标识事件对应接口请求内容,即资源操作请求体。","example":"{xxx}","maxLength":5000,"minLength":0,"type":"string"},"request_id":{"description":"记录本次请求的request id","example":"16xxf66e7xxxxx7acb99a463e610764","maxLength":300,"minLength":0,"type":"string"},"resource_account_id":{"description":"标识资源所在的账号ID。仅在跨租户操作资源时有值。","maxLength":64,"minLength":1,"type":"string"},"resource_id":{"description":"标识事件对应的云服务资源ID。","example":"f3f18b9215014f0d9ded3045af020811","maxLength":350,"minLength":0,"type":"string"},"resource_name":{"description":"标识事件对应的资源名称。","example":"paas_cts","maxLength":300,"minLength":0,"type":"string"},"resource_type":{"description":"查询事件列表对应的资源类型。","example":"user","maxLength":100,"minLength":0,"type":"string"},"resource_url":{"description":"云资源的详情页面的访问链接(不含endpoint)","example":"/vpc/vpcmanager/vpcs?vpcid=*****","maxLength":300,"minLength":0,"type":"string"},"response":{"description":"记录用户请求的响应,标识事件对应接口响应内容,即资源操作结果返回体。","example":"{xxx}","maxLength":5000,"minLength":0,"type":"string"},"service_type":{"description":"标识查询事件列表对应的云服务类型。必须为已对接CTS的云服务的英文缩写,且服务类型一般为大写字母。","example":"ECS","maxLength":36,"minLength":0,"type":"string"},"source_ip":{"description":"标识触发事件的租户IP。","example":"xx.xx.xx.xx","maxLength":256,"minLength":0,"type":"string"},"time":{"description":"标识事件产生的时间戳。","example":"1567477476596","format":"int64","maximum":4102416000000,"minimum":946656000000,"type":"integer"},"trace_id":{"description":"标识事件的ID,由系统生成的UUID。","example":"e001ccb9-bc09-11e6-b00b-4b2a61338db6","maxLength":200,"minLength":1,"type":"string"},"trace_name":{"description":"标识查询事件列表对应的事件名称。由0-9,a-z,A-Z,'-','.','_',组成,长度为1~64个字符,且以首字符必须为字母。","example":"login","maxLength":100,"minLength":1,"type":"string"},"trace_rating":{"description":"标识事件等级,目前有三种:正常(normal),警告(warning),事故(incident)。","enum":["normal","warning","incident"],"example":"normal","type":"string"},"trace_type":{"description":"标识事件发生源头类型,管理类事件主要包括API调用(ApiCall),Console页面调用(ConsoleAction)和系统间调用(SystemAction)。\n数据类事件主要包括ObsSDK,ObsAPI。","example":"ConsoleAction","maxLength":20,"minLength":5,"type":"string"},"user":{"$ref":"#/definitions/UserInfo","description":"标识触发事件的用户信息。"}}},"UserInfo":{"description":"用户信息。","properties":{"access_key_id":{"description":"访问密钥ID。","maxLength":40,"minLength":15,"type":"string"},"account_id":{"description":"账号ID,参见《云审计服务API参考》“获取账号ID和项目ID”章节。","maxLength":40,"minLength":15,"type":"string"},"domain":{"$ref":"#/definitions/BaseUser","description":"标识触发事件的用户domain信息。"},"id":{"description":"用户ID,参见《云审计服务API参考》“获取账号ID和项目ID”章节。","maxLength":40,"minLength":15,"type":"string"},"invoked_by":{"description":"发出请求的服务的名称。控制台操作时为[\"service.console\" ]","items":{"maxLength":20,"minLength":1,"type":"string"},"maxItems":1,"minItems":1,"type":"array"},"name":{"description":"用户名称。","maxLength":300,"minLength":0,"type":"string"},"principal_id":{"description":"操作用户身份Id。\n- 如果是 IAM 用户身份,格式为 <user-id>。\n- 如果是 IAM 委托会话身份,格式为 <agency-id>:<agency-session-name>。\n- 如果是 IAM 联邦身份,格式为 <idp_id>:<user-session-name>","maxLength":100,"minLength":0,"type":"string"},"principal_is_root_user":{"description":"是否是根用户。\n- 值为“true”时,表示操作者是根用户。\n- 值为“false”时,表示操作者是委托会话身份、联邦身份或非根用户的 IAM 用户。","enum":["true","false"],"maxLength":10,"minLength":1,"type":"string"},"principal_urn":{"description":"操作用户身份的 URN。\n如果是 IAM 用户身份,格式如 iam::<account-id>:user:<user-name>。\n如果是 IAM 委托会话 身份,格式如 sts::<account-id>:assumed-agency:<agency-name>/<agency-session-name>。\n如果是 IAM 联邦身份,格式如 sts::<account-id>:external-user:<idp_id>/<user-session-name>。","maxLength":100,"minLength":0,"type":"string"},"session_context":{"$ref":"#/definitions/SessionContext","description":"临时安全凭据属性。"},"type":{"description":"操作者身份类型。","maxLength":30,"minLength":1,"type":"string"},"user_name":{"description":"用户名称。","maxLength":300,"minLength":0,"type":"string"}},"type":"object"}},"description":null,"group_id":"fb21f09f03c44339a10d3ee7b60da942","host":"cts.cn-north-4.myhuaweicloud.com","id":"125a5964b33b488a937100c37f6a2d7f","info_version":"v3","method":"get","name":"ListTraces","parameters":{},"paths":{"/v3/{project_id}/traces":{"get":{"consumes":[],"deprecated":false,"description":"通过事件列表查询接口,可以查出系统记录的7天内资源操作记录。","operationId":"ListTraces","parameters":[{"description":"项目ID,参见《云审计服务API参考》“获取账号ID和项目ID”章节。","in":"path","maxLength":40,"minLength":15,"name":"project_id","required":true,"type":"string","x-example":"2b31ed520xxxxxxebedb6e57xxxxxxxx","x-order":1},{"description":"标识审计事件类型。\n目前支持管理类事件(system)和数据类事件(data)。\n默认值为\"system\"。","enum":["system","data"],"in":"query","maxLength":32,"minLength":1,"name":"trace_type","required":true,"type":"string","x-example":"system","x-order":3},{"description":"标示查询事件列表中限定返回的事件条数。不传时默认10条,最大值200条。","format":"int32","in":"query","maximum":200,"minimum":0,"name":"limit","required":false,"type":"integer","x-example":11,"x-order":4},{"description":"标识查询事件列表的起始时间戳(timestamp,为标准UTC时间,毫秒级,13位数字,不包括传入时间)默认为上一小时的时间戳。查询条件from与to配套使用。","format":"int64","in":"query","maximum":4102416000000,"minimum":946656000000,"name":"from","required":false,"type":"integer","x-example":1478490478000,"x-order":5},{"description":"取值为响应中中marker的值,用于标识查询事件的起始时间(自此条事件的记录时间起,向更早时间查询)。\n可以与“from”、“to”结合使用。\n最终的查询条件取两组时间条件的交集。","in":"query","maxLength":50,"minLength":10,"name":"next","required":false,"type":"string","x-example":"1478490478000","x-order":6},{"description":"标识查询事件列表的结束时间戳(timestamp,为标准UTC时间,毫秒级,13位数字,不包括传入时间)默认为当前时间戳。查询条件to与from配套使用。","format":"int64","in":"query","maximum":4102416000000,"minimum":946656000000,"name":"to","required":false,"type":"integer","x-example":1479095278000,"x-order":7},{"description":"当\"trace_type\"字段值为\"system\"时,该字段值默认为\"system\"。\n当\"trace_type\"字段值为\"data\"时,该字段值可以传入数据类追踪器名称,达到筛选某个数据类追踪器下的数据事件目的。","in":"query","maxLength":64,"minLength":1,"name":"tracker_name","required":false,"type":"string","x-example":"data-tracker-name","x-order":8},{"description":"标识查询事件列表对应的云服务类型。必须为已对接CTS的云服务的英文缩写,且服务类型一般为大写字母。\n当\"trace_type\"字段值为\"system\"时,该字段筛选有效\"。\n已对接的云服务列表参见《云审计服务用户指南》“支持的服务”章节。","in":"query","maxLength":32,"minLength":1,"name":"service_type","required":false,"type":"string","x-example":"CTS","x-order":9},{"description":"标识特定用户名称,用以查询该用户下的所有事件。\n当\"trace_type\"字段值为\"system\"时,该字段筛选有效\"。","in":"query","maxLength":1024,"minLength":1,"name":"user","required":false,"type":"string","x-example":{"domain":{"id":"05b2598d69bc4a209f9ac5eeeb1f91ad","name":"xxx"},"id":"a2e899190fcd444084a68fc0ac2sc1e9","name":"xxx"},"x-order":10},{"description":"标示查询事件列表对应的云服务资源ID。\n当\"trace_type\"字段值为\"system\"时,该字段筛选有效\"。","in":"query","maxLength":350,"minLength":0,"name":"resource_id","required":false,"type":"string","x-example":"d502809d-0d1d-41ce-9690-784282142ccc","x-order":11},{"description":"标示查询事件列表对应的的资源名称。\n当\"trace_type\"字段值为\"system\"时,该字段筛选有效\"。\n说明:该字段可能包含大写字母。","in":"query","maxLength":300,"minLength":1,"name":"resource_name","required":false,"type":"string","x-example":"192.144.163.1","x-order":12},{"description":"标示查询事件列表对应的资源类型。\n当\"trace_type\"字段值为\"system\"时,该字段筛选有效\"。","in":"query","maxLength":100,"minLength":1,"name":"resource_type","required":false,"type":"string","x-example":"eip","x-order":13},{"description":"标示某一条事件的事件ID。当传入这个查询条件时,其他查询条件自动不生效。\n当\"trace_type\"字段值为\"system\"时,该字段筛选有效\"。","in":"query","maxLength":200,"minLength":1,"name":"trace_id","required":false,"type":"string","x-example":"e001ccb9-bc09-11e6-b00b-4b2a61338db6","x-order":14},{"description":"标示查询事件列表对应的事件名称。\n当\"trace_type\"字段值为\"system\"时,该字段筛选有效\"。\n说明:该字段可能包含大写字母。","in":"query","maxLength":100,"minLength":1,"name":"trace_name","required":false,"type":"string","x-example":"createTracker","x-order":15},{"description":"标示查询事件列表对应的事件等级目前有三种:正常(normal), 警告(warning),事故(incident)。\n当\"trace_type\"字段值为\"system\"时,该字段筛选有效\"。","enum":["normal","warning","incident"],"in":"query","maxLength":10,"minLength":5,"name":"trace_rating","required":false,"type":"string","x-example":"normal","x-order":16},{"description":"标示查询事件列表对应的访问密钥ID。包含临时访问凭证和永久访问密钥。","in":"query","maxLength":32,"minLength":1,"name":"access_key_id","required":false,"type":"string"},{"description":"标示查询事件列表对应的企业项目ID。","in":"query","maxLength":40,"minLength":15,"name":"enterprise_project_id","required":false,"type":"string"}],"produces":[],"responses":{"200":{"description":"请求正常。","examples":{"application/json":{"meta_data":{"count":2,"marker":"e001ccb8-bc09-11e6-b2cc-2640a43cc6e8"},"traces":[{"api_version":"2.0","code":200,"record_time":1481066128032,"resource_id":"d502809d-0d1d-41ce-9690-784282142ccc","resource_name":"192.144.163.1","resource_type":"eip","response":{"code":"VPC.0514","message":"Update port fail."},"service_type":"VPC","time":1472148708232,"trace_id":"e001ccb9-bc09-11e6-b00b-4b2a61338db6","trace_name":"deleteEip","trace_rating":"warning","trace_type":"ConsoleAction","user":{"domain":{"id":"ded649d814464428ba89d04d7955c93e","name":"xxx"},"name":"xxx"}},{"api_version":"2.0","code":200,"record_time":1481066128032,"resource_id":"d502809d-0d1d-41ce-9690-784282142ccc","resource_name":"192.144.163.1","resource_type":"eip","response":{"code":"VPC.0514","message":"Update port fail."},"service_type":"VPC","time":1472148708232,"trace_id":"e001ccb8-bc09-11e6-b2cc-2640a43cc6e8","trace_name":"deleteEip","trace_rating":"warning","trace_type":"ConsoleAction","user":{"domain":{"id":"ded649d814464428ba89d04d7955c93e","name":"xxx"},"name":"xxx"}}]}},"schema":{"$ref":"#/definitions/ListTracesRsponse"}},"400":{"description":"查询参数异常,请求未完成。","schema":{"$ref":"#/definitions/FailedRsp"}},"401":{"description":"请求鉴权校验失败,访问被拒绝。"},"403":{"description":"请求权限校验失败,访问被禁止。"},"404":{"description":"查询事件不存在,请求未完成。"},"500":{"description":"服务内部异常,请求未完成。"},"503":{"description":" 被请求的服务无效。建议直接修改该请求,不要重试该请求。"}},"summary":"查询事件列表","tags":["事件管理"],"x-is-registered":"Y","x-open-region-cloud":"hk,hc,hcso,g42","x-publishpath":"cts_api_0311","x-request-examples-description-1":"查询管理类事件请求样例。","x-request-examples-description-2":"查询数据类事件请求样例。","x-request-examples-url-1":"GET https://{endpoint}/v3/{project_id}/traces?limit=11&to=1479095278000&from=1478490478000&trace_name=createTracker&resource_type=tracker&service_type=CTS&trace_type=system","x-request-examples-url-2":"GET https://{endpoint}/v3/{project_id}/traces?limit=11&to=1479095278000&from=1478490478000&trace_type=data","x-support-sdk":"Y"}}},"product_short":"CTS","region_id":"cn-north-4","schemes":["HTTPS"],"security_definitions":null,"summary":"查询事件列表","tags":"事件管理","uri":null,"version":"2.0"}