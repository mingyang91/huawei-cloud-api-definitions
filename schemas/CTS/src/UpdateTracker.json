{"base_path":"/","components":null,"consumes":"[\"application/json;charset=UTF-8\"]","definitions":{"DataBucket":{"properties":{"data_bucket_name":{"description":"数据类追踪器追踪对象的桶名。\n- 当启用或者停用数据类追踪器时,该参数为必选。\n- 管理类追踪器无此参数。\n- 追踪器一旦创建追踪桶无法修改。","maxLength":63,"minLength":3,"type":"string"},"data_event":{"description":"数据类追踪器追踪的操作类型。\n- 当启用或者停用数据类追踪器时,该参数为必选。\n- 管理类追踪器无此参数。","items":{"enum":["WRITE","READ"],"example":"WRITE","type":"string"},"maxItems":2,"minItems":1,"type":"array"}}},"FailedRsp":{"description":"失败时的返回对象。","properties":{"error_code":{"description":"错误码标识,CTS.XXX。","example":"CTS.0214","maxLength":15,"minLength":15,"type":"string"},"error_msg":{"description":"错误描述。","example":"The tracker does not exist.","maxLength":2048,"minLength":0,"type":"string"}},"required":["error_code","error_msg"]},"ManagementEventSelector":{"description":"管理类事件选择器。","properties":{"exclude_service":{"description":"标识不转储的云服务名称。\n目前只支持设置为KMS,表示屏蔽KMS服务的createDatakey事件。","example":"","items":{"example":"KMS","maxLength":20,"minLength":1,"type":"string"},"maxItems":10,"minItems":0,"type":"array"}},"type":"object"},"TrackerObsInfo":{"description":"转储桶信息。","properties":{"bucket_lifecycle":{"description":"标识配置桶内对象存储周期。\n当\"tracker_type\"参数值为\"data\"时该参数值有效。","example":"30","maximum":5000,"minimum":0,"type":"integer"},"bucket_name":{"description":"标识OBS桶名称。由数字或字母开头,支持小写字母、数字、“-”、“.”,长度为3~63个字符。","example":"obs-f1da","maxLength":63,"minLength":3,"type":"string"},"compress_type":{"default":"gzip","description":"压缩类型。包括不压缩(json),压缩(gzip)两种状态。默认为gzip格式。","enum":["gzip","json"],"type":"string"},"file_prefix_name":{"description":"标识需要存储于OBS的日志文件前缀,0-9,a-z,A-Z,'-','.','_'长度为0~64字符。","example":"yO8Q","maxLength":64,"minLength":0,"type":"string"},"is_obs_created":{"description":"是否支持新建OBS桶。\n  值为“true”时,表示新创建OBS桶存储事件文件;\n  值为“false”时,选择已存在的OBS桶存储事件文件。","example":"true","type":"boolean"},"is_sort_by_service":{"default":true,"description":"路径按云服务划分,打开后转储文件路径中将增加云服务名。默认为true。","type":"boolean"}}},"UpdateTrackerRequestBody":{"properties":{"agency_name":{"description":"云服务委托名称。\n参数值为\"cts_admin_trust\"时,更新追踪器会自动创建一个云服务委托:cts_admin_trust。","enum":["cts_admin_trust"],"example":"cts_admin_trust","maxLength":32,"minLength":1,"type":"string"},"data_bucket":{"$ref":"#/definitions/DataBucket","description":"追踪桶配置信息。\n当\"tracker_type\"参数值为\"data\"时该参数值有效。"},"is_lts_enabled":{"description":"是否打开事件分析。","example":true,"type":"boolean","x-order":4},"is_organization_tracker":{"default":false,"description":"是否应用到我的组织。\n只针对管理类追踪器。设置为true时,ORG组织下所有成员当前区域的审计日志会转储到该追踪器配置的OBS桶或者LTS日志流,但是事件列表界面不支持查看其它组织成员的审计日志。","type":"boolean"},"is_support_trace_files_encryption":{"description":"事件文件转储加密功能开关。\n当\"tracker_type\"参数值为\"system\"时该参数值有效。\n该参数必须与kms_id参数同时使用。","example":true,"type":"boolean","x-order":6},"is_support_validate":{"description":"事件文件转储时是否打开事件文件校验。\n当\"tracker_type\"参数值为\"system\"时该参数值有效。","example":true,"type":"boolean","x-order":8},"kms_id":{"description":"事件文件转储加密所采用的秘钥id(从KMS获取)。\n当\"tracker_type\"参数值为\"system\"时该参数值有效。\n当\"is_support_trace_files_encryption\"参数值为“是”时,此参数为必选项。","example":"13a4207c-7abe-4b68-8510-16b84c3b5504","maxLength":200,"minLength":0,"type":"string","x-order":7},"management_event_selector":{"$ref":"#/definitions/ManagementEventSelector"},"obs_info":{"$ref":"#/definitions/TrackerObsInfo","description":"转储桶配置","x-order":5},"status":{"description":"标识追踪器状态,该接口中可修改的状态包括正常(enabled)和停止(disabled)。如果选择修改状态为停止,则修改成功后追踪器停止记录事件。","enum":["enabled","disabled"],"example":"disabled","type":"string","x-order":3},"tracker_name":{"description":"标识追踪器名称。\n当\"tracker_type\"参数值为\"system\"时该参数为默认值\"system\"。\n当\"tracker_type\"参数值为\"data\"时该参数需要指定追踪器名称\"。","example":"data-tracker-name","maxLength":32,"minLength":1,"type":"string","x-order":2},"tracker_type":{"description":"标识追踪器类型。\n目前支持系统追踪器类型有管理类追踪器(system)和数据类追踪器(data)。\n数据类追踪器和管理类追踪器共同参数有:is_lts_enabled, obs_info;\n管理类追踪器参数:is_support_trace_files_encryption, kms_id, is_support_validate, is_support_validate;\n数据类追踪器参数:tracker_name, data_bucket。","enum":["system","data"],"type":"string","x-example":"system","x-order":1}},"required":["tracker_type","tracker_name"]}},"description":null,"group_id":"fb21f09f03c44339a10d3ee7b60da942","host":"cts.cn-north-4.myhuaweicloud.com","id":"4372cd6ee5bd4bf18d489d01851cd31a","info_version":"v3","method":"put","name":"UpdateTracker","parameters":{},"paths":{"/v3/{project_id}/tracker":{"put":{"consumes":[],"deprecated":false,"description":"云审计服务支持修改已创建追踪器的配置项,包括OBS桶转储、关键事件通知、事件转储加密、通过LTS对管理类事件进行检索、事件文件完整性校验以及追踪器启停状态等相关参数,修改追踪器对已有的操作记录没有影响。修改追踪器完成后,系统立即以新的规则开始记录操作。","operationId":"UpdateTracker","parameters":[{"description":"项目ID,参见《云审计服务API参考》“获取账号ID和项目ID”章节。","in":"path","maxLength":40,"minLength":15,"name":"project_id","required":true,"type":"string","x-example":"2b31ed520xxxxxxebedb6e57xxxxxxxx"},{"description":"标示OBS桶名称,来自于OBS服务真实存在的桶。","in":"body","name":"UpdateTrackerRequestBody","required":true,"schema":{"$ref":"#/definitions/UpdateTrackerRequestBody"}}],"produces":[],"responses":{"200":{"description":"请求正常。"},"400":{"description":"服务器未能处理请求。","schema":{"$ref":"#/definitions/FailedRsp"}},"401":{"description":"请求鉴权校验失败,访问被拒绝。"},"403":{"description":"请求权限校验失败,访问被禁止。"},"404":{"description":"服务器无法找到被请求的资源。"},"500":{"description":"服务内部异常,请求未完成。"},"503":{"description":" 被请求的服务无效。建议直接修改该请求,不要重试该请求。"}},"summary":"修改追踪器","tags":["追踪器管理"],"x-is-registered":"Y","x-open-region-cloud":"hk,hc,hcso,g42","x-order":2,"x-publishpath":"cts_api_0322","x-request-examples-1":{"is_lts_enabled":false,"is_support_trace_files_encryption":false,"is_support_validate":false,"kms_id":"","obs_info":{"bucket_name":"saveTraceBucketNew","file_prefix_name":"2020_01_01","is_obs_created":false},"status":"disabled","tracker_name":"system","tracker_type":"system"},"x-request-examples-2":{"data_bucket":{"data_event":["READ","WRITE"]},"is_lts_enabled":true,"obs_info":{"bucket_lifecycle":30,"bucket_name":"saveTraceBucket","file_prefix_name":"11","is_obs_created":false},"tracker_name":"data-tracker-name","tracker_type":"data"},"x-request-examples-description-1":"管理类追踪器修改样例。","x-request-examples-description-2":"数据类追踪器修改样例。","x-request-examples-text-1":"{\n  \"tracker_type\": \"system\",\n  \"tracker_name\": \"system\",\n  \"obs_info\": {\n    \"is_obs_created\": false,\n    \"bucket_name\": \"test-data-tracker\",\n    \"file_prefix_name\": \"11\"\n},\n  \"is_lts_enabled\": false,\n  \"is_support_trace_files_encryption\": false,\n  \"kms_id\": \"\",\n  \"is_support_validate\": false,\n  \"status\": \"enabled\"\n}","x-request-examples-text-2":"{\n \"tracker_type\": \"data\",\n \"tracker_name\": \"data-tracker-name\",\n \"obs_info\": {\n    \"is_obs_created\": false,\n    \"bucket_name\": \"\",\n    \"file_prefix_name\": \"\",\n    \"bucket_lifecycle\": 60\n  },\n  \"is_lts_enabled\": true,\n  \"data_bucket\": {\n    \"data_event\": [\n      \"READ\",\n      \"WRITE\"\n    ]\n  }\n}","x-request-examples-url-1":"PUT https://{endpoint}/v3/{project_id}/tracker","x-support-sdk":"Y"}}},"product_short":"CTS","region_id":"cn-north-4","schemes":["HTTPS"],"security_definitions":null,"summary":"修改追踪器","tags":"追踪器管理","uri":null,"version":"2.0"}