{"base_path":"/","components":null,"consumes":"[\"application/json;charset=UTF-8\"]","definitions":{"BucketSplitInfo":{"description":"**参数解释**:\n桶分裂信息,仅在从集群外部扩容到已有的逻辑集群场景下才会返回。\n**取值范围**:\n不涉及。","properties":{"after_scale_out_bucket_num":{"description":"**参数解释**:\n扩容后bucket数。\n**取值范围**:\n不涉及。","format":"int32","type":"integer"},"after_scale_out_bucket_tilt_rate":{"description":"**参数解释**:\n扩容后 bucket DN倾斜率,用于衡量扩容后bucket在DN节点上不均衡程度。\n**取值范围**:\n不涉及。","type":"string"},"after_scale_out_dn_num":{"description":"**参数解释**:\n扩容后DN数。\n**取值范围**:\n不涉及。","format":"int32","type":"integer"},"bucket_tilt_rate":{"description":"**参数解释**:\nbucket DN倾斜率,用于衡量bucket在DN节点上不均衡程度。\n**取值范围**:\n不涉及。","type":"string"},"current_bucket_num":{"description":"**参数解释**:\n当前bucket数。\n**取值范围**:\n不涉及。","format":"int32","type":"integer"},"current_dn_num":{"description":"**参数解释**:\n当前DN数。\n**取值范围**:\n不涉及。","format":"int32","type":"integer"},"is_bucket_split":{"description":"**参数解释**:\n扩容是否涉及bucket分裂。\n**取值范围**:\n不涉及。","type":"boolean"}},"type":"object"},"GrowCheckResponse":{"description":"**参数解释**:\n扩容前检查响应体。\n**取值范围**:\n不涉及。","properties":{"data":{"description":"**参数解释**:\n扩容前检查信息。\n**取值范围**:\n不涉及。","items":{"$ref":"#/definitions/GrowCheckResult"},"type":"array"},"note":{"$ref":"#/definitions/NoteInfo","description":"**参数解释**:\n扩容前提示信息。\n**取值范围**\n不涉及。"}},"type":"object"},"GrowCheckResult":{"description":"**参数解释**:\n扩容前检查响应体。\n当请求header中x-language字段为zh_cn时返回中文描述、类型信息。\n当请求header中x-language字段为en_us时返回英文描述、类型信息。\n**取值范围**:\n不涉及。","properties":{"desc":{"description":"**参数解释**:\n描述信息。\n**取值范围**:\n不涉及。","type":"string"},"pass":{"description":"**参数解释**:\n检查是否通过,检查通过项默认不展示。\n**取值范围**:\ntrue/false","type":"boolean"},"reason":{"description":"**参数解释**:\n检查不通过的原因描述。\n**取值范围**:\n不涉及。","type":"string"},"required":{"description":"**参数解释**:\n是否必须检查项。\n**取值范围**:\n- true:必须,校验不通过时不允许扩容,继续扩容也会失败\n- false:非必须,校验不通过时允许扩容,仅做提示告知风险","type":"boolean"},"type":{"description":"**参数解释**:\n分类。\n**取值范围**:\n配额、权限、版本、状态","type":"string"}},"type":"object"},"NoteInfo":{"description":"**参数解释**:\n重分布提示信息。\n**取值范围**:\n不涉及。","properties":{"bucket_split_info":{"$ref":"#/definitions/BucketSplitInfo","description":"**参数解释**:\n重分布提示信息。\n**取值范围**:\n不涉及。"}},"type":"object"},"ResizeClusterRequestBody":{"description":"**参数解释**:\n扩容/添加空闲节点操作请求体。\n**约束限制**:\n不涉及。\n**取值范围**:\n不涉及。\n**默认取值**:\n不涉及。","properties":{"auto_redistribute":{"description":"**参数解释**:\n扩容完成后是否自动启动重分布,默认是。如果设置为false,扩容后不进行重分布,此时集群任务信息处于“待重分布”状态,无法进行其他操作。\n**约束限制**:\n不涉及。\n**取值范围**:\ntrue:扩容后立即重分布。\nfalse:扩容后不进行重分布,此时集群任务信息处于“待重分布”状态。\n**默认取值**:\ntrue","type":"boolean"},"create_node_only":{"description":"**参数解释**:\n当前是否仅添加空闲节点。\n**约束限制**:\n不涉及。\n**取值范围**:\ntrue:仅添加节点,如需扩容则需要单独操作\nfalse:添加节点并扩容集群\n**默认取值**:\nfalse","type":"boolean"},"logical_cluster_name":{"description":"**参数解释**:\n逻辑集群名字,扩容到逻辑集群时,需要填写。\n**约束限制**:\n不涉及。\n**取值范围**:\n不涉及。\n**默认取值**:\n不涉及。","type":"string"},"scale_out":{"$ref":"#/definitions/ScaleOut","description":"**参数解释**:\n扩容/添加空闲节点操作,节点信息请求体。\n**约束限制**:\n不涉及。\n**取值范围**:\n不涉及。\n**默认取值**:\n不涉及。"},"waiting_for_killing":{"description":"**参数解释**:\n自动查杀作业等待时间。\n**约束限制**:\nguestAgent插件版本8.2.1及以上才支持。\n**取值范围**:\n30~1200\n**默认取值**:\n0,即不限制。","format":"int32","type":"integer"}},"required":["scale_out"],"type":"object"},"ScaleOut":{"description":"**参数解释**:\n扩容集群详情。\n**取值范围**:\n不涉及。","properties":{"count":{"description":"**参数解释**:\n扩容节点数。\n**取值范围**:\n大于等于3。","example":3,"format":"int32","type":"integer"},"subnet_id":{"description":"**参数解释**:\n子网ID。\n**取值范围**:\n同VPC下有效的子网ID。","type":"string"}},"required":["count"]}},"description":null,"group_id":"b886262c55704cd0bb59f02cc32eca0c","host":"dws.cn-north-4.myhuaweicloud.com","id":"e25747afb86045d7b142c30f9643de3f","info_version":"v2","method":"post","name":"CheckGrowCluster","parameters":{},"paths":{"/v2/{project_id}/clusters/{cluster_id}/grow-check":{"post":{"deprecated":false,"description":"集群扩容前检查,提前识别子网不足、权限不足等问题导致的扩容失败。","operationId":"CheckGrowCluster","parameters":[{"description":"**参数解释**:\n集群ID。获取方法请参见[获取集群ID](dws_02_00068.xml)。\n**约束限制**:\n不涉及。\n**取值范围**:\n不涉及。\n**默认取值**:\n不涉及。","in":"path","maxLength":64,"minLength":32,"name":"cluster_id","required":true,"type":"string","x-order":2},{"description":"**参数解释**:\n项目ID。获取方法请参见[获取项目ID](dws_02_0011.xml)。\n**约束限制**:\n不涉及。\n**取值范围**:\n不涉及。\n**默认取值**:\n不涉及。","in":"path","maxLength":64,"minLength":32,"name":"project_id","required":true,"type":"string","x-order":1},{"description":"**参数解释**:\n扩容/添加空闲节点操作请求体。\n**约束限制**:\n不涉及。\n**取值范围**:\n不涉及。\n**默认取值**:\n不涉及。","in":"body","name":"CheckGrowClusterRequestBody","required":true,"schema":{"$ref":"#/definitions/ResizeClusterRequestBody"}}],"responses":{"200":{"description":"请求下发成功。","examples":{"application/json":{"data":[{"desc":"子网IP检查","pass":false,"reason":"子网IP超过配额:需要量 3,使用量 249 / 251","required":true,"type":"配额"}],"note":{"bucket_split_info":{"after_scale_out_bucket_num":32,"after_scale_out_bucket_tilt_rate":"25.00%","after_scale_out_dn_num":9,"bucket_tilt_rate":"16.67%","current_dn_num":6,"is_bucket_split":false}}}},"schema":{"$ref":"#/definitions/GrowCheckResponse"}},"400":{"description":"请求错误。"},"401":{"description":"鉴权失败。"},"403":{"description":"没有操作权限。"},"404":{"description":"找不到资源。"},"500":{"description":"服务内部错误。"},"503":{"description":"服务不可用。"}},"summary":"集群扩容前检查","tags":["节点变更"],"x-api-type":"open-api","x-constraint":"","x-ctc":"Y","x-ei-general-ai-release-status":"","x-fusioncloud":"","x-hc":"Y","x-hk":"Y","x-is-registered":"Y","x-name":"扩容集群前检查","x-obc":"Y","x-order":10,"x-otc":"Y","x-request-examples-1":{"scale_out":{"count":3}},"x-request-examples-description-1":"扩容集群新增3节点,检查是否存在配额或权限等问题。","x-request-examples-text-1":{"scale_out":{"count":3}},"x-request-examples-url-1":"POST https://{Endpoint}/v2/89cd04f168b84af6be287f71730fdb4b/clusters/4ca46bf1-5c61-48ff-b4f3-0ad4e5e3ba90/grow-check","x-scope":"Commercial","x-source":"","x-support-sdk":"Y","x-tlf":"Y"}}},"product_short":"DWS","region_id":"cn-north-4","schemes":["HTTPS"],"security_definitions":null,"summary":"集群扩容前检查","tags":"节点变更","uri":null,"version":"2.0"}