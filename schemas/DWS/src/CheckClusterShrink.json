{"base_path":"/","components":null,"consumes":"[\"application/json;charset=UTF-8\"]","definitions":{"ShrinkPerCheckResponse":{"description":"**参数解释**:\n缩容前检查响应体。\n**取值范围**:\n不涉及。","properties":{"is_passed":{"description":"**参数解释**:\n检查是否通过。如不通过,需要调整缩容节点数重试,或者是当前集群就不满足缩容前置条件。\n**取值范围**:\n不涉及。","type":"boolean"}},"type":"object"}},"description":null,"group_id":"b886262c55704cd0bb59f02cc32eca0c","host":"dws.cn-north-4.myhuaweicloud.com","id":"4d690967929349259c3ac060a6ce0152","info_version":"v2","method":"get","name":"CheckClusterShrink","parameters":{},"paths":{"/v1/{project_id}/clusters/{cluster_id}/shrink-check":{"get":{"deprecated":false,"description":"缩容前检查,确保缩容前、缩容后均满足正常操作要求。","operationId":"CheckClusterShrink","parameters":[{"description":"**参数解释**:\n项目ID。获取方式方法请参见[获取项目ID](dws_02_0011.xml)。\n**约束限制**:\n不涉及。\n**取值范围**:\n不涉及。\n**默认取值**:\n不涉及。","in":"path","name":"project_id","required":true,"type":"string"},{"description":"**参数解释**:\n集群ID。获取方式方法请参见[获取集群ID](dws_02_00068.xml)。\n**约束限制**:\n必须是有效的dws集群ID。\n**取值范围**:\n36位UUID。\n**默认取值**:\n不涉及。","in":"path","name":"cluster_id","required":true,"type":"string"},{"description":"**参数解释**:\n检查项,取值当前仅包含3种。\n**约束限制**:\n不涉及。\n**取值范围**:\nguc:检查当前guc参数是否满足缩容条件;\nschema:检查所有schema下有无影响缩容的表;\ndisk:检查缩容后磁盘容量是否满足要求。\n**默认取值**:\n不涉及。","in":"query","name":"check_item","required":true,"type":"string"},{"description":"**参数解释**:\n待缩容节点数。\n**约束限制**:\n不涉及。\n**取值范围**:\n最小值为3,最大值为当前节点总数减3。\n**默认取值**:\n不涉及。","format":"int32","in":"query","name":"shrink_count","required":true,"type":"integer"}],"responses":{"200":{"description":"**参数解释**:\n缩容前检查响应体。\n**取值范围**:\n不涉及。","examples":{"application/json":{"is_passed":true}},"schema":{"$ref":"#/definitions/ShrinkPerCheckResponse"}},"400":{"description":"请求错误。"},"401":{"description":"鉴权失败。"},"403":{"description":"没有操作权限。"},"404":{"description":"找不到资源。"},"500":{"description":"服务内部错误。"},"503":{"description":"服务不可用。"}},"summary":"集群缩容前检查","tags":["节点变更"],"x-api-type":"open-api","x-constraint":"","x-ctc":"Y","x-ei-general-ai-release-status":"","x-fusioncloud":"","x-hc":"Y","x-hk":"Y","x-is-registered":"Y","x-name":"集群缩容","x-obc":"Y","x-order":36,"x-otc":"Y","x-request-examples-description-1":"缩容3节点,检查项为guc参数。","x-request-examples-description-2":"缩容3节点,检查项为schema。","x-request-examples-description-3":"缩容3节点,检查项为磁盘信息。","x-request-examples-url-1":"POST https://{Endpoint} /v1/89cd04f168b84af6be287f71730fdb4b/clusters/4ca46bf1-5c61-48ff-b4f3-0ad4e5e3ba90/shrink-check?check_item=guc&shrink_count=3","x-request-examples-url-2":"POST https://{Endpoint} /v1/89cd04f168b84af6be287f71730fdb4b/clusters/4ca46bf1-5c61-48ff-b4f3-0ad4e5e3ba90/shrink-check?check_item=schema&shrink_count=3","x-request-examples-url-3":"POST https://{Endpoint} /v1/89cd04f168b84af6be287f71730fdb4b/clusters/4ca46bf1-5c61-48ff-b4f3-0ad4e5e3ba90/shrink-check?check_item=disk&shrink_count=3","x-scope":"Commercial","x-source":"","x-support-sdk":"Y","x-tlf":"Y"}}},"product_short":"DWS","region_id":"cn-north-4","schemes":["HTTPS"],"security_definitions":null,"summary":"集群缩容前检查","tags":"节点变更","uri":null,"version":"2.0"}