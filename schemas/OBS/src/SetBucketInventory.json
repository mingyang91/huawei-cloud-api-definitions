{"base_path":"/","components":null,"consumes":"[\"application/xml;charset=UTF-8\"]","definitions":{"Destination":{"description":"清单的目标配置。\n","properties":{"Bucket":{"description":"存放清单文件的目标桶的桶名。\n","type":"string"},"Format":{"description":"生成的清单文件的格式,现只支持CSV格式。\n","enum":["CSV"],"type":"string"},"Prefix":{"description":"生成的清单文件对象名会以此前缀开头,如果不配置前缀,则生成的清单文件对象名默认以BucketInventory开头。\n","type":"string"}},"required":["Format","Bucket"]},"Error":{"description":"错误响应消息体\n","properties":{"Code":{"description":"错误响应消息体XML中错误响应对应的HTTP消息返回码,具体的错误码请参见[错误码-表2](https://support.huaweicloud.com/api-obs/obs_04_0115.html#obs_04_0115__d0e843)。\n","type":"string"},"HostId":{"description":"返回该消息的服务端ID。\n","type":"string"},"Message":{"description":"错误响应消息体XML中具体错误更全面、详细的英文解释,具体的错误消息请参见[错误码-表2](https://support.huaweicloud.com/api-obs/obs_04_0115.html#obs_04_0115__d0e843)。\n","type":"string"},"RequestId":{"description":"本次错误请求的请求ID,用于错误定位。\n","type":"string"},"Resource":{"description":"该错误相关的桶或对象资源。\n","type":"string"}}},"Field":{"description":"可选字段类型,OptionalFields可以包含多个Field元素。\n","enum":["Size","LastModifiedDate","ETag","StorageClass","IsMultipartUploaded","ReplicationStatus","EncryptionStatus"],"type":"string"},"Filter":{"description":"清单过滤器配置,清单只包含符合过滤器规则的对象(只支持按对象名前缀进行过滤),如果没有配置过滤器,则包含所有对象。\n","properties":{"Prefix":{"description":"前缀过滤条件,清单文件中只生成以此前缀开头的对象列表。\n","type":"string"}}},"Schedule":{"description":"清单文件的生成周期。\n","properties":{"Frequency":{"description":"清单文件的生成周期,只支持按天和按周生成清单,第一次配置完桶清单,任务会在一个小时内启动,之后每隔一个周期启动一次。\n","enum":["Daily","Weekly"],"type":"string"}},"required":["Frequency"]},"SetBucketInventoryRequestBody":{"description":"清单配置\n","properties":{"Destination":{"$ref":"#/definitions/Destination"},"Filter":{"$ref":"#/definitions/Filter"},"Id":{"description":"清单配置的id,必须和请求参数中的清单配置id一致。\n有效字符:\"a-z\"、\"A-Z\"、\"0-9\"、\"-\"、\"_\"和\".\"\n","maxLength":64,"type":"string"},"IncludedObjectVersions":{"description":"清单文件中包含对象的多版本配置。\n如果设置为All,清单会包含对象所有的版本,清单中会增加版本相关的字段:VersionId、IsLatest、和DeleteMarker。\n如果设置为Current,则清单文件中只会列出当前版本信息,不会出现版本相关字段。\n","enum":["All","Current"],"type":"string"},"IsEnabled":{"description":"规则是否启用,如果设置为true,则生成清单,反之不生成。\n","type":"boolean"},"OptionalFields":{"description":"在此选项中可以添加一些额外的对象元数据字段,生成的清单文件中会包含OptionalFields中配置的字段。\n","items":{"$ref":"#/definitions/Field"},"type":"array"},"Schedule":{"$ref":"#/definitions/Schedule"}},"required":["Id","IsEnabled","Schedule","Destination","IncludedObjectVersions"],"xml":{"name":"InventoryConfiguration"}}},"description":null,"group_id":"7d10a01d10854bd59cf6189eebfb9c7d","host":"obs.cn-north-4.myhuaweicloud.com","id":"9e68957bec4047438bcaba3fbf637894","info_version":"v1","method":"put","name":"SetBucketInventory","parameters":{},"paths":{"/":{"put":{"consumes":["application/xml"],"description":"OBS使用PUT操作为一个桶配置清单规则,每个桶最多可以配置10条清单规则,有关更多桶清单的介绍和使用限制,请参考《对象存储服务开发指南》的[桶清单](https://support.huaweicloud.com/ugobs-obs/obs_41_0044.html)章节。\n\n要使用此操作,需确保执行者有PutBucketInventoryConfiguration操作的权限\n。桶拥有者默认具有此权限,并且可以将此权限授予其他人。\n\n有关权限控制的更多信息请参考《对象存储服务权限配置指南》的[OBS权限控制概述](https://support.huaweicloud.com/perms-cfg-obs/obs_40_0001.html)章节。\n","operationId":"SetBucketInventory","parameters":[{"description":"请求消息中可带的签名信息。\n","in":"header","name":"Authorization","required":true,"type":"string"},{"description":"请求发起端的日期和时间,例如:Wed, 27 Jun 2018 13:39:15 +0000。\n默认值:无。\n条件:如果消息头中带了x-obs-date字段,则可以不带该字段,其他情况下必选。\n","in":"header","name":"Date","required":false,"type":"string","x-apiexplorer-format":"date-gmt"},{"description":"在此请求中,需要在请求的消息体中配置桶的清单。清单的配置信息以XML格式上传。\n","in":"body","name":"SetBucketInventoryRequestBody","required":true,"schema":{"$ref":"#/definitions/SetBucketInventoryRequestBody"}},{"description":"请求的桶名称。\n","in":"query","maxLength":63,"minLength":3,"name":"bucket_name","required":true,"type":"string","x-location-cname":true},{"allowEmptyValue":true,"description":"inventory表示请求桶清单API。\n","in":"query","maxLength":0,"minLength":0,"name":"inventory","required":true,"type":"string"},{"description":"清单配置的id,必须和消息体中的清单配置id一致。\n有效字符:\"a-z\"、\"A-Z\"、\"0-9\"、\"-\"、\"_\"和\".\"","in":"query","maxLength":64,"name":"id","required":true,"type":"string"}],"produces":["application/xml"],"responses":{"200":{"description":"请求成功响应消息。\n","headers":{"Connection":{"description":"指明与服务器的连接是长连接还是短连接。\n","type":"string"},"Content-Length":{"description":"响应消息体的字节长度。\n","type":"string"},"Date":{"description":"OBS系统响应的时间。\n","type":"string"},"ETag":{"description":"对象的base64编码的128位MD5摘要。ETag是对象内容的唯一标识,可以通过该值识别对象内容是否有变化。比如上传对象时ETag为A,下载对象时ETag为B,则说明对象内容发生了变化。实际的ETag是对象的哈希值。ETag只反映变化的内容,而不是其元数据。上传的对象或拷贝操作创建的对象,通过MD5加密后都有唯一的ETag。如果通过多段上传对象,则无论加密方法如何,MD5会拆分ETag,此类情况ETag就不是MD5的摘要。\n","type":"string"},"x-obs-id-2":{"description":"帮助定位问题的特殊符号。\n","type":"string"},"x-obs-request-id":{"description":"由OBS创建来唯一确定本次请求的值,可以通过该值来定位问题。\n","type":"string"}}},"400":{"description":"请求失败响应消息。\n除了公共的错误码外,此接口还会返回一些其他的错误码。下面列出本接口的一些常见错误,以及可能原因。\n|错误码|描述|HTTP状态码|\n|---|---|---|\n|MalformedXML|清单的XML配置格式错误。|400 Bad Request|\n|InvalidArgument|无效参数。|400 Bad Request|\n|InventoryCountOverLimit|配置清单数量超过最大限制。|400 Bad Request|\n|PrefixExistInclusionRelationship|清单配置中的前缀存在包含关系。|400 Bad Request|\n","schema":{"$ref":"#/definitions/Error"}}},"summary":"设置桶清单","tags":["桶的高级配置"],"x-is-registered":"Y","x-request-examples-1":"PUT /?inventory&id=test_id HTTP/1.1\nUser-Agent: curl/7.29.0\nHost: examplebucket.obs.cn-north-4.myhuaweicloud.com\nAccept: */*\nDate: Tue, 08 Jan 2019 08:17:10 +0000\nAuthorization: OBS UDSIAMSTUBTEST000001:/e2fqSfzLDb+0M36D4Op/s5KKr0=\nContent-Length: 600\nExpect: 100-continue\n\n<InventoryConfiguration>\n   <Id>test_id</Id>\n   <IsEnabled>true</IsEnabled>\n   <Filter>\n         <Prefix>inventoryTestPrefix</Prefix>\n   </Filter>\n   <Destination>\n         <Format>CSV</Format>\n         <Bucket>destbucket</Bucket>\n         <Prefix>dest-prefix</Prefix>\n   </Destination>\n   <Schedule>\n          <Frequency>Daily</Frequency>\n   </Schedule>\n   <IncludedObjectVersions>All</IncludedObjectVersions>\n   <OptionalFields>\n          <Field>Size</Field>\n          <Field>LastModifiedDate</Field>\n          <Field>ETag</Field>\n          <Field>StorageClass</Field>\n          <Field>IsMultipartUploaded</Field>\n          <Field>ReplicationStatus</Field>\n          <Field>EncryptionStatus</Field>\n   </OptionalFields>\n</InventoryConfiguration>","x-request-examples-url-1":"/?inventory&id=test_id","x-support-sdk":"N"}}},"product_short":"OBS","region_id":"cn-north-4","schemes":["HTTPS"],"security_definitions":null,"summary":"设置桶清单","tags":"桶的高级配置","uri":null,"version":"2.0"}