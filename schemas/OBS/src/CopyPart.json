{"base_path":"/","components":null,"consumes":"[\"application/xml;charset=UTF-8\"]","definitions":{"CopyPartResponseBody":{"description":"该请求的响应消息使用消息元素来返回段拷贝的结果\n","properties":{"ETag":{"description":"目标段的ETag值,是段内容的唯一标识,用于段合并时校验数据一致性。\n","type":"string"},"LastModified":{"description":"对象上次修改时间。\n","type":"string"}}},"Error":{"description":"错误响应消息体\n","properties":{"Code":{"description":"错误响应消息体XML中错误响应对应的HTTP消息返回码,具体的错误码请参见[错误码-表2](https://support.huaweicloud.com/api-obs/obs_04_0115.html#obs_04_0115__d0e843)。\n","type":"string"},"HostId":{"description":"返回该消息的服务端ID。\n","type":"string"},"Message":{"description":"错误响应消息体XML中具体错误更全面、详细的英文解释,具体的错误消息请参见[错误码-表2](https://support.huaweicloud.com/api-obs/obs_04_0115.html#obs_04_0115__d0e843)。\n","type":"string"},"RequestId":{"description":"本次错误请求的请求ID,用于错误定位。\n","type":"string"},"Resource":{"description":"该错误相关的桶或对象资源。\n","type":"string"}}}},"description":null,"group_id":"7d10a01d10854bd59cf6189eebfb9c7d","host":"obs.cn-north-4.myhuaweicloud.com","id":"e211ed99251d4c05beb3febdbda7d382","info_version":"v1","method":"put","name":"CopyPart","parameters":{},"paths":{"/{object_key}":{"put":{"description":"拷贝段\n多段上传任务创建后,用户可以通过指定多段上传任务号,为特定的任务上传段。添加段的方式还包括调用段拷贝接口。允许客户将已上传对象的一部分或全部拷贝为段。\n\n该操作支持服务端加密功能。\n\n须知:\n拷贝段的结果不能仅根据HTTP返回头域中的status_code来判断请求是否成功,头域中status_code返回200时表示服务端已经收到请求,且开始处理拷贝段请求。拷贝是否成功会在响应消息的body中,只有body体中有ETag标签才表示成功,否则表示拷贝失败。\n\n将源对象object拷贝为一个段part1,如果在拷贝操作之前part1已经存在,拷贝操作执行之后老段数据part1会被新拷贝的段数据覆盖。拷贝成功后,只能列举到最新的段part1,老段数据将会被删除。因此在使用拷贝段接口时请确保目标段不存在或者已无价值,避免因拷贝段导致数据误删除。拷贝过程中源对象object无任何变化","operationId":"CopyPart","parameters":[{"description":"请求消息中可带的签名信息。\n","in":"header","name":"Authorization","required":true,"type":"string"},{"description":"请求发起端的日期和时间,例如:Wed, 27 Jun 2018 13:39:15 +0000。\n默认值:无。\n条件:如果消息头中带了x-obs-date字段,则可以不带该字段,其他情况下必选。\n","in":"header","name":"Date","required":false,"type":"string","x-apiexplorer-format":"date-gmt"},{"description":"桶名称\n","in":"query","maxLength":63,"minLength":3,"name":"bucket_name","required":true,"type":"string","x-location-cname":true},{"description":"通过此请求创建的对象名称。\n","in":"path","maxLength":1024,"minLength":1,"name":"object_key","required":true,"type":"string"},{"description":"上传段的段号。\n","format":"int32","in":"query","name":"partNumber","required":true,"type":"integer"},{"description":"多段上传任务Id。\n","in":"query","name":"uploadId","required":true,"type":"string"},{"description":"拷贝的源对象。\n","in":"header","name":"x-obs-copy-source","required":true,"type":"string"},{"description":"源对象中待拷贝的段的字节范围(start - end),start为段起始字节,end为段结束字节\n","format":"int32","in":"header","name":"x-obs-copy-source-range","required":false,"type":"integer"},{"description":"SSE-C方式下使用该头域,该头域表示加密目标段使用的算法。\n\n类型:字符串\n\n示例:x-obs-server-side-encryption-customer-algorithm:AES256\n\n约束:需要和x-obs-server-side-encryption-customer-key, x-obs-server-side-encryption-customer-key-MD5一起使用\n\n当使用SSE-C方式时,必选,需要与初始化上传段任务使用相同的算法。","in":"header","name":"x-obs-server-side-encryption-customer-algorithm","required":false,"type":"string"},{"description":"SSE-C方式下使用该头域,该头域表示加密目标段使用的密钥。该密钥用于加密对象。\n\n类型:字符串\n\n示例:x-obs-server-side-encryption-customer-key:K7QkYpBkM5+hcs27fsNkUnNVaobncnLht/rCB2o/9Cw=\n\n约束:该头域由256-bit的密钥经过base64-encoded得到,需要和x-obs-server-side-encryption-customer-algorithm,x-obs-server-side-encryption-customer-key-MD5一起使用。\n\n当使用SSE-C方式时,必选,需要与初始化上传段任务使用相同的密钥。","in":"header","name":"x-obs-server-side-encryption-customer-key","required":false,"type":"string"},{"description":"SSE-C方式下使用该头域,该头域表示加密目标段使用的密钥的MD5值。MD5值用于验证密钥传输过程中没有出错。\n\n类型:字符串\n\n示例:x-obs-server-side-encryption-customer-key-MD5:4XvB3tbNTN+tIEVa0/fGaQ==\n\n约束:该头域由密钥的128-bit MD5值经过base64-encoded得到,需要和x-obs-server-side-encryption-customer-algorithm,x-obs-server-side-encryption-customer-key一起使用。\n\n当使用SSE-C方式时,必选,需要与初始化上传段任务使用相同的MD5值。","in":"header","name":"x-obs-server-side-encryption-customer-key-MD5","required":false,"type":"string"},{"description":"SSE-C方式下使用该头域,该头域表示源对象使用的算法。\n\n类型:字符串\n\n示例:x-obs-copy-source-server-side-encryption-customer-algorithm:AES256\n\n约束:需要和x-obs-copy-source-server-side-encryption-customer-key,x-obs-copy-source-server-side-encryption-customer-key-MD5一起使用。\n\n当拷贝源对象使用SSE-C方式时,必选。","in":"header","name":"x-obs-copy-source-server-side-encryption-customer-algorithm","required":false,"type":"string"},{"description":"SSE-C方式下使用该头域,该头域表示源对象使用的密钥。用于解密源对象。\n\n类型:字符串\n\n示例:x-obs-copy-source-server-side-encryption-customer-key:K7QkYpBkM5+hcs27fsNkUnNVaobncnLht/rCB2o/9Cw=\n\n约束:该头域由256-bit的密钥经过base64-encoded得到,需要和x-obs-copy-source-server-side-encryption-customer-algorithm,x-obs-copy-source-server-side-encryption-customer-key-MD5一起使用。\n\n当拷贝源对象使用SSE-C方式时,必选。","in":"header","name":"x-obs-copy-source-server-side-encryption-customer-key","required":false,"type":"string"},{"description":"SSE-C方式下使用该头域,该头域表示源对象使用的密钥的MD5值。MD5值用于验证密钥传输过程中没有出错。\n\n类型:字符串\n\n示例:x-obs-copy-source-server-side-encryption-customer-key-MD5:4XvB3tbNTN+tIEVa0/fGaQ==\n\n约束:该头域由密钥的128-bit MD5值经过base64-encoded得到,需要和x-obs-copy-source-server-side-encryption-customer-algorithm,x-obs-copy-source-server-side-encryption-customer-key一起使用。\n\n当拷贝源对象使用SSE-C方式时,必选。","in":"header","name":"x-obs-copy-source-server-side-encryption-customer-key-MD5","required":false,"type":"string"}],"produces":["application/xml"],"responses":{"200":{"description":"请求成功响应消息。\n","examples":{"application/xml":"HTTP/1.1 200 OK\nServer: OBS\nx-obs-request-id: 8DF400000163D40ABBD20405D30B0542\nx-obs-id-2: 32AAAQAAEAABAAAQAAEAABAAAQAAEAABCTIJpD2efLy5o8sTTComwBb2He0j11Ne\nContent-Type: application/xml\nDate: WED, 01 Jul 2015 05:16:32 GMT\nTransfer-Encoding: chunked\n\n<?xml version=\"1.0\" encoding=\"UTF-8\" standalone=\"yes\"?>\n<CopyPartResult xmlns=\"http://obs.cn-north-4.myhuaweicloud.com/doc/2015-06-30/\">\n  <LastModified>2015-07-01T05:16:32.344Z</LastModified>\n  <ETag>\"3b46eaf02d3b6b1206078bb86a7b7013\"</ETag>\n</CopyPartResult>\n"},"headers":{"Connection":{"description":"指明与服务器的连接是长连接还是短连接。\n","type":"string"},"Content-Length":{"description":"响应消息体的字节长度。\n","type":"string"},"Date":{"description":"OBS系统响应的时间。\n","type":"string"},"ETag":{"description":"对象的base64编码的128位MD5摘要。ETag是对象内容的唯一标识,可以通过该值识别对象内容是否有变化。比如上传对象时ETag为A,下载对象时ETag为B,则说明对象内容发生了变化。实际的ETag是对象的哈希值。ETag只反映变化的内容,而不是其元数据。上传的对象或拷贝操作创建的对象,通过MD5加密后都有唯一的ETag。如果通过多段上传对象,则无论加密方法如何,MD5会拆分ETag,此类情况ETag就不是MD5的摘要。\n","type":"string"},"x-obs-hash-crc64ecma":{"description":"如果源段有CRC64值,则返回CRC64值","type":"string"},"x-obs-id-2":{"description":"帮助定位问题的特殊符号。\n","type":"string"},"x-obs-request-id":{"description":"由OBS创建来唯一确定本次请求的值,可以通过该值来定位问题。\n","type":"string"},"x-obs-server-side-encryption":{"description":"如果服务端加密是SSE-KMS方式,响应包含该头域。\n\n类型:字符串\n\n示例:x-obs-server-side-encryption:kms","type":"string"},"x-obs-server-side-encryption-customer-algorithm":{"description":"如果服务端加密是SSE-C方式,响应包含该头域,该头域表示加密使用的算法。\n\n类型:字符串\n\n示例:x-obs-server-side-encryption-customer-algorithm:AES256","type":"string"},"x-obs-server-side-encryption-customer-key-MD5":{"description":"如果服务端加密是SSE-C方式,响应包含该头域,该头域表示加密使用的密钥的MD5值。\n\n类型:字符串\n\n示例:x-obs-server-side-encryption-customer-key-MD5:4XvB3tbNTN+tIEVa0/fGaQ==","type":"string"},"x-obs-server-side-encryption-kms-key-id":{"description":"如果服务端加密是SSE-KMS方式,响应包含该头域,该头域表示主密钥。\n\n类型:字符串\n\n格式为: regionID:domainID(租户ID):key/key_id\n\n其中regionID是使用密钥所属region的ID;domainID是使用密钥所属租户的租户ID;key_id是本次加密使用的密钥ID。\n\n示例: x-obs-server-side-encryption-kms-key-id:cn-north-4:domainiddomainiddomainiddoma0001:key/4f1cd4de-ab64-4807-920a-47fc42e7f0d0","type":"string"}},"schema":{"$ref":"#/definitions/CopyPartResponseBody"}},"400":{"description":"请求失败响应消息。\n除了公共的错误码外,此接口还会返回一些其他的错误码。下面列出本接口的一些常见错误,以及可能原因。\n|错误码|描述|HTTP状态码|\n|---|---|---|\n|-|拷贝的单段超过5G。|400 Bad Request|\n|-|用户不是多段上传任务的发起者。|400 Bad Request|\n","schema":{"$ref":"#/definitions/Error"}},"403":{"description":"请求失败响应消息。\n|错误码|描述|HTTP状态码|\n|---|---|---|\n|AccessDenied|AccessKey或签名无效。|403 Forbidden|\n|AccessDenied|用户对指定对象没有读权限。|403 Forbidden|\n|AccessDenied|用户对目的桶没有写权限。|403 Forbidden|\n|AccessDenied|用户不是多段上传任务的发起者。|403 Forbidden|\n","schema":{"$ref":"#/definitions/Error"}},"404":{"description":"请求失败响应消息。\n除了公共的错误码外,此接口还会返回一些其他的错误码。下面列出本接口的一些常见错误,以及可能原因。\n|错误码|描述|HTTP状态码|\n|---|---|---|\n|NoSuchBucket|桶不存在。|404 Not Found|\n|NoSuchKey|源对象不存在。|404 Not Found|\n|NoSuchUpload|查询指定的任务不存在。|404 Not Found|\n","schema":{"$ref":"#/definitions/Error"}}},"summary":"拷贝段","tags":["多段操作"],"x-is-registered":"Y","x-request-examples-1":"PUT /tobject02?partNumber=2&uploadId=00000163D40171ED8DF4050919BD02B8 HTTP/1.1 User-Agent: curl/7.29.0 Host: examplebucket.obs.cn-north-4.myhuaweicloud.com Accept: */* Date: WED, 01 Jul 2015 05:16:32 GMT Authorization: OBS H4IPJX0TQTHTHEBQQCEC:dSnpnNpawDSsLg/xXxaqFzrAmMw= x-obs-copy-source: /destbucket/object01","x-request-examples-url-1":"PUT /object02?partNumber=1&uploadId=00000163D40171ED8DF4050919BD02B8","x-support-sdk":"N"}}},"product_short":"OBS","region_id":"cn-north-4","schemes":["HTTPS"],"security_definitions":null,"summary":"拷贝段","tags":"多段操作","uri":null,"version":"2.0"}