{"base_path":"/","components":null,"consumes":"[\"application/xml;charset=UTF-8\"]","definitions":{"Error":{"description":"错误响应消息体\n","properties":{"Code":{"description":"错误响应消息体XML中错误响应对应的HTTP消息返回码,具体的错误码请参见[错误码-表2](https://support.huaweicloud.com/api-obs/obs_04_0115.html#obs_04_0115__d0e843)。\n","type":"string"},"HostId":{"description":"返回该消息的服务端ID。\n","type":"string"},"Message":{"description":"错误响应消息体XML中具体错误更全面、详细的英文解释,具体的错误消息请参见[错误码-表2](https://support.huaweicloud.com/api-obs/obs_04_0115.html#obs_04_0115__d0e843)。\n","type":"string"},"RequestId":{"description":"本次错误请求的请求ID,用于错误定位。\n","type":"string"},"Resource":{"description":"该错误相关的桶或对象资源。\n","type":"string"}}},"InitiateMultipartUploadResult":{"description":"描述多段上传任务的容器。\n","properties":{"Bucket":{"description":"多段上传对象所在桶的桶名。\n","type":"string"},"EncodingType":{"description":"多段上传对象Key的编码类型。如果请求中设置了encoding-type,那响应中的Key会被编码。\n","type":"string"},"Key":{"description":"多段上传对象的key。\n","type":"string"},"UploadId":{"description":"多段上传id,后面进行多段上传时,利用这个id指定多段上传任务。\n","type":"string"}}}},"description":null,"group_id":"7d10a01d10854bd59cf6189eebfb9c7d","host":"obs.cn-north-4.myhuaweicloud.com","id":"20a350aac6e94ae6bb2a78e8f05ba196","info_version":"v1","method":"post","name":"InitiateMultipartUpload","parameters":{},"paths":{"/{object_key}":{"post":{"description":"初始化上传段任务\n\n使用多段上传特性时,用户必须首先调用创建多段上传任务接口创建任务,系统会给用户返回一个全局唯一的多段上传任务号,作为任务标识。后续用户可以根据这个标识发起相关的请求,如:上传段、合并段、列举段等。创建多段上传任务不影响已有的同名对象;同一个对象可以同时存在多个多段上传任务;每个多段上传任务在初始化时可以附加消息头信息,包括acl、用户自定义元数据和通用的HTTP消息头contentType、contentEncoding等,这些附加的消息头信息将先记录在多段上传任务元数据中。\n\n该操作支持服务端加密功能\n","operationId":"InitiateMultipartUpload","parameters":[{"description":"请求消息中可带的签名信息。\n","in":"header","name":"Authorization","required":true,"type":"string"},{"description":"请求发起端的日期和时间,例如:Wed, 27 Jun 2018 13:39:15 +0000。\n默认值:无。\n条件:如果消息头中带了x-obs-date字段,则可以不带该字段,其他情况下必选。\n","in":"header","name":"Date","required":false,"type":"string","x-apiexplorer-format":"date-gmt"},{"description":"桶名称\n","in":"query","maxLength":63,"minLength":3,"name":"bucket_name","required":true,"type":"string","x-location-cname":true},{"description":"通过此请求创建的对象名称。\n","in":"path","maxLength":1024,"minLength":1,"name":"object_key","required":true,"type":"string"},{"allowEmptyValue":true,"description":"表明这是多段上传任务\n","in":"query","maxLength":0,"minLength":0,"name":"uploads","required":true,"type":"string"},{"description":"对响应中的Key进行指定类型的编码。如果Key包含xml 1.0标准不支持的控制字符,可通过设置encoding-type对响应中的Key进行编码。","in":"query","name":"encoding-type","required":false,"type":"string"},{"description":"初始化多段上传任务时,可以加上此消息头设置对象的权限控制策略,使用的策略为预定义的常用策略,包括:private;public-read;public-read-write(各策略详细说明见[ACL](https://support.huaweicloud.com/perms-cfg-obs/obs_40_0005.html)章节的“使用头域设置ACL”)\n说明:字符串形式的预定义策略。\n实例x-obs-acl: public-read-write","in":"header","name":"x-obs-acl","required":false,"type":"string"},{"description":"初始化多段上传任务时,使用此头域授权domain下所有用户有读对象和获取对象元数据的权限\n实例x-obs-grant-read: ID=domainID。如果授权给多个租户,需要通过','分割","in":"header","name":"x-obs-grant-read","required":false,"type":"string"},{"description":"初始化多段上传任务时,使用此头域授权domain下所有用户有获取对象ACL的权限\n实例x-obs-grant-read-acp: ID=domainID。如果授权给多个租户,需要通过','分割","in":"header","name":"x-obs-grant-read-acp","required":false,"type":"string"},{"description":"初始化多段上传任务时,使用此头域授权domain下所有用户有写对象ACL的权限。\n实例x-obs-grant-write-acp: ID=domainID。如果授权给多个租户,需要通过','分割。","in":"header","name":"x-obs-grant-write-acp","required":false,"type":"string"},{"description":"初始化多段上传任务时,使用此头域授权domain下所有用户有读对象、获取对象元数据、获取对象ACL、写对象ACL的权限。\n实例x-obs-grant-full-control: ID=domainID。如果授权给多个租户,需要通过','分割。","in":"header","name":"x-obs-grant-full-control","required":false,"type":"string"},{"description":"初始化多段上传任务时,可以加上此头域设置对象的存储类型。如果未设置此头域,则以桶的默认存储类型作为对象的存储类型。\n\n类型:字符串\n\n说明:存储类型有3种:STANDARD(标准存储)、WARM(低频访问存储)、COLD(归档存储)。因此这里可配置的值有:STANDARD、WARM和COLD,注意大小写敏感。\n\n示例:x-obs-storage-class: STANDARD","in":"header","name":"x-obs-storage-class","required":false,"type":"string"},{"description":"初始化多段上传任务时,可以在HTTP请求中加入“x-obs-persistent-headers”消息头,用来加入一个或多个自定义的响应头,当完成合并段操作后,用户获取此对象或查询此对象元数据时,加入的自定义响应头将会在返回消息的头域中出现。\n\n类型:字符串\n\n格式:x-obs-persistent-headers: key1:base64_encode(value1),key2:base64_encode(value2)....\n\n说明:其中key1/key2等为自定义header,若含有非ASCII码或不可识别字符,可以采用URL编码或者Base64编码,服务端只会作为字符串处理,不会做解码。value1/value2等为对应自定义header的值,base64_encode指做base64编码,即将自定义header和对应值的base64编码作为一个key-value对用“:”连接,然后用“,”将所有的key-value对连接起来,放在x-obs-persistent-headers这个header中即可,服务端会对上传的value做解码处理。\n\n示例:x-obs-persistent-headers: key1:dmFsdWUx,key2:dmFsdWU\n\n合并段后,下载此对象或获取此对象元数据时:返回两个头域分别为“key1:value1”与“key2:value2”\n\n约束:\n\n1. 通过该方式指定的自定义响应头不能以“x-obs-”为前缀,比如可以指定“key1”,但是不能指定“x-obs-key1”\n\n2. 不能指定http标准头,例如host/content-md5/origin/range/Content-Disposition等\n\n3. 此头域和自定义元数据总长度不能超过8KB\n\n4. 如果传入相同key,将value以“,”拼接后放入同一个key中返回","in":"header","name":"x-obs-persistent-headers","required":false,"type":"string"},{"description":"使用该头域表示服务端加密是SSE-KMS方式。\n\n类型:字符串\n\n示例:x-obs-server-side-encryption:kms\n当使用SSE-KMS方式时,必选","in":"header","name":"x-obs-server-side-encryption","required":false,"type":"string"},{"description":"SSE-KMS方式下使用该头域,该头域表示主密钥,如果用户没有提供该头域,那么默认的主密钥将会被使用。\n类型:字符串\n支持两种格式的描述方式:\n1. regionID:domainID(租户ID):key/key_id\n或者\n2.key_id\n其中regionID是使用密钥所属region的ID;domainID是使用密钥所属租户的租户ID;key_id是从数据加密服务创建的密钥ID。\n\n示例:\n1. x-obs-server-side-encryption-kms-key-id:cn-north-4:domainiddomainiddomainiddoma0001:key/4f1cd4de-ab64-4807-920a-47fc42e7f0d0 或者\n2. x-obs-server-side-encryption-kms-key-id:4f1cd4de-ab64-4807-920a-47fc42e7f0d0","in":"header","name":"x-obs-server-side-encryption-kms-key-id","required":false,"type":"string"},{"description":"SSE-C方式下使用该头域,该头域表示加密使用的算法。\n\n类型:字符串\n\n示例:x-obs-server-side-encryption-customer-algorithm:AES256\n\n约束:需要和x-obs-server-side-encryption-customer-key, x-obs-server-side-encryption-customer-key-MD5一起使用。\n当使用SSE-C方式时,必选。","in":"header","name":"x-obs-server-side-encryption-customer-algorithm","required":false,"type":"string"},{"description":"SSE-C方式下使用该头域,该头域表示加密使用的密钥。该密钥用于加密对象。\n\n类型:字符串\n\n示例:x-obs-server-side-encryption-customer-key:K7QkYpBkM5+hcs27fsNkUnNVaobncnLht/rCB2o/9Cw=\n\n约束:该头域由256-bit的密钥经过base64-encoded得到,需要和x-obs-server-side-encryption-customer-algorithm,x-obs-server-side-encryption-customer-key-MD5一起使用。\n当使用SSE-C方式时,必选。","in":"header","name":"x-obs-server-side-encryption-customer-key","required":false,"type":"string"},{"description":"SSE-C方式下使用该头域,该头域表示加密使用的密钥的MD5值。MD5值用于验证密钥传输过程中没有出错。\n\n类型:字符串\n\n示例:x-obs-server-side-encryption-customer-key-MD5:4XvB3tbNTN+tIEVa0/fGaQ==\n\n约束:该头域由密钥的128-bit MD5值经过base64-encoded得到,需要和x-obs-server-side-encryption-customer-algorithm,x-obs-server-side-encryption-customer-key一起使用。\n当使用SSE-C方式时,必选。","in":"header","name":"x-obs-server-side-encryption-customer-key-MD5","required":false,"type":"string"},{"description":"表示对象的过期时间,单位是天。过期之后对象会被自动删除。(从对象最后修改时间开始计算)\n\n类型:整型。\n\n示例:x-obs-expires:3","format":"int32","in":"header","name":"x-obs-expires","required":false,"type":"integer"}],"produces":["application/xml"],"responses":{"200":{"description":"请求成功响应消息。\n","examples":{"application/xml":"HTTP/1.1 status_code\nDate: date\nContent-Length: length\nConnection: status\n\n<?xml version=\"1.0\" encoding=\"UTF-8\" standalone=\"yes\"?> \n<InitiateMultipartUploadResult xmlns=\"http://obs.cn-north-4.myhuaweicloud.com/doc/2015-06-30/\"> \n    <Bucket>BucketName</Bucket>  \n    <Key>ObjectName</Key>  \n    <UploadId>uploadID</UploadId> \n</InitiateMultipartUploadResult>\n"},"headers":{"Connection":{"description":"指明与服务器的连接是长连接还是短连接。\n","type":"string"},"Content-Length":{"description":"响应消息体的字节长度。\n","type":"string"},"Date":{"description":"OBS系统响应的时间。\n","type":"string"},"ETag":{"description":"对象的base64编码的128位MD5摘要。ETag是对象内容的唯一标识,可以通过该值识别对象内容是否有变化。比如上传对象时ETag为A,下载对象时ETag为B,则说明对象内容发生了变化。实际的ETag是对象的哈希值。ETag只反映变化的内容,而不是其元数据。上传的对象或拷贝操作创建的对象,通过MD5加密后都有唯一的ETag。如果通过多段上传对象,则无论加密方法如何,MD5会拆分ETag,此类情况ETag就不是MD5的摘要。\n","type":"string"},"x-obs-id-2":{"description":"帮助定位问题的特殊符号。\n","type":"string"},"x-obs-request-id":{"description":"由OBS创建来唯一确定本次请求的值,可以通过该值来定位问题。\n","type":"string"},"x-obs-server-side-encryption":{"description":"如果服务端加密是SSE-KMS方式,响应包含该头域。\n\n类型:字符串\n\n示例:x-obs-server-side-encryption:kms","type":"string"},"x-obs-server-side-encryption-customer-algorithm":{"description":"如果服务端加密是SSE-C方式,响应包含该头域,该头域表示加密使用的算法。\n\n类型:字符串\n\n示例:x-obs-server-side-encryption-customer-algorithm:AES256","type":"string"},"x-obs-server-side-encryption-customer-key-MD5":{"description":"如果服务端加密是SSE-C方式,响应包含该头域,该头域表示加密使用的密钥的MD5值。\n\n类型:字符串\n\n示例:x-obs-server-side-encryption-customer-key-MD5:4XvB3tbNTN+tIEVa0/fGaQ==","type":"string"},"x-obs-server-side-encryption-kms-key-id":{"description":"如果服务端加密是SSE-KMS方式,响应包含该头域,该头域表示主密钥。\n\n类型:字符串\n\n格式为: regionID:domainID(租户ID):key/key_id\n\n其中regionID是使用密钥所属region的ID;domainID是使用密钥所属租户的租户ID;key_id是本次加密使用的密钥ID。\n\n示例: x-obs-server-side-encryption-kms-key-id:cn-north-4:domainiddomainiddomainiddoma0001:key/4f1cd4de-ab64-4807-920a-47fc42e7f0d0","type":"string"}},"schema":{"$ref":"#/definitions/InitiateMultipartUploadResult"}},"400":{"description":"请求失败响应消息。\n","schema":{"$ref":"#/definitions/Error"}},"403":{"description":"请求失败响应消息。\n除了公共的错误码外,此接口还会返回一些其他的错误码。下面列出本接口的一些常见错误,以及可能原因。\n|错误码|描述|HTTP状态码|\n|---|---|---|\n|AccessDenied|AccessKey或签名无效。|403 Forbidden|\n|AccessDenied|用户不具有指定桶的写权限。|403 Forbidden|\n","schema":{"$ref":"#/definitions/Error"}},"404":{"description":"请求失败响应消息。\n除了公共的错误码外,此接口还会返回一些其他的错误码。下面列出本接口的一些常见错误,以及可能原因。\n|错误码|描述|HTTP状态码|\n|---|---|---|\n|NoSuchBucket|桶不存在。|404 Not Found|\n","schema":{"$ref":"#/definitions/Error"}}},"summary":"初始化上传段任务","tags":["多段操作"],"x-is-registered":"Y","x-request-examples-1":"POST /objectkey?uploads  HTTP/1.1 \nHost: examplebucket.obs.cn-north-4.myhuaweicloud.com\nDate: WED, 01 Jul 2015 05:14:52 GMT \nAuthorization: OBS AKIAIOSFODNN7EXAMPLE:VGhpcyBtZXNzYWdlIHNpZ25lZGGieSRlbHZpbmc=","x-request-examples-2":"POST /objectkey?uploads  HTTP/1.1 \nHost: examplebucket.obs.cn-north-4.myhuaweicloud.com\nDate: WED, 01 Jul 2015 05:15:43 GMT\nx-obs-grant-write-acp:ID=52f24s3593as5730ea4f722483579ai7,ID=a93fcas852f24s3596ea8366794f7224\nAuthorization: OBS AKIAIOSFODNN7EXAMPLE:VGhpcyBtZXNzYWdlIHNpZ25lZGGieSRlbHZpbmc=","x-request-examples-description-1":"初始化段","x-request-examples-description-2":"初始化段的同时携带ACL","x-request-examples-url-1":"POST /objectkey?uploads","x-request-examples-url-2":"POST /objectkey?uploads","x-support-sdk":"N"}}},"product_short":"OBS","region_id":"cn-north-4","schemes":["HTTPS"],"security_definitions":null,"summary":"初始化上传段任务","tags":"多段操作","uri":null,"version":"2.0"}