{"base_path":"/","components":null,"consumes":"[\"application/xml;charset=UTF-8\"]","definitions":{"CopyObjectResult":{"description":"复制对象结果的Container。\n","properties":{"ETag":{"description":"新对象的base64编码的128位MD5摘要。ETag是对象内容的唯一标识,可以通过该值识别对象内容是否有变化。比如上传对象时ETag为A,下载对象时ETag为B,则说明对象内容发生了变化。\n","type":"string"},"LastModified":{"description":"对象上次修改的时间。\n","type":"string"}}},"Error":{"description":"错误响应消息体\n","properties":{"Code":{"description":"错误响应消息体XML中错误响应对应的HTTP消息返回码,具体的错误码请参见[错误码-表2](https://support.huaweicloud.com/api-obs/obs_04_0115.html#obs_04_0115__d0e843)。\n","type":"string"},"HostId":{"description":"返回该消息的服务端ID。\n","type":"string"},"Message":{"description":"错误响应消息体XML中具体错误更全面、详细的英文解释,具体的错误消息请参见[错误码-表2](https://support.huaweicloud.com/api-obs/obs_04_0115.html#obs_04_0115__d0e843)。\n","type":"string"},"RequestId":{"description":"本次错误请求的请求ID,用于错误定位。\n","type":"string"},"Resource":{"description":"该错误相关的桶或对象资源。\n","type":"string"}}}},"description":null,"group_id":"7d10a01d10854bd59cf6189eebfb9c7d","host":"obs.cn-north-4.myhuaweicloud.com","id":"3ea42a18f2054c6da63198b7261d03e2","info_version":"v1","method":"put","name":"CopyObject","parameters":{},"paths":{"/{object_key}":{"put":{"consumes":["application/xml"],"description":"复制对象(Copy Object)特性用来为OBS上已经存在的对象创建一个副本。\n\n当进行复制对象操作时,目标对象默认复制源对象的元数据;用户也可以将目标对象的元数据替换为本次请求中所带的元数据。新建的目标对象不会复制源对象的ACL信息,默认的新建对象的ACL是private,用户可以使用设置ACL的操作接口来重新设定新对象的ACL。\n\n复制对象操作的请求需要通过头域携带拷贝的原桶和对象信息,不能携带消息实体。\n\n该操作支持服务端加密功能。\n\n目标对象大小范围是[0, 5GB],如果源对象大小超过5GB,只能使用Range拷贝部分对象。\n\n#### 多版本 ####\n默认情况下,x-obs-copy-source标识复制源对象的最新版本。如果源对象的最新版本是删除标记,则认为该对象已删除。要复制指定版本的对象,可以在x-obs-copy-source请求消息头中携带versionId参数。\n\n如果目标对象的桶的多版本状态是开启的,系统为目标对象生成唯一的版本号(此版本号与源对象的版本号不同),并且会在响应报头x-obs-version-id返回该版本号。如果目标对象的桶的多版本状态是暂停的,则目标对象的版本号为null。\n\n须知:\n在桶没有开启多版本的情况下,将源对象object_A复制为目标对象object_B,如果在复制操作之前对象object_B已经存在,复制操作执行之后老对象object_B则会被新复制对象object_B覆盖,复制成功后,只能下载到新的对象object_B,老对象object_B将会被删除。因此在使用copy接口时请确保目标对象不存在或者已无价值,避免因copy导致数据误删除。复制过程中源对象object_A无任何变化。\n\n复制对象的结果不能仅根据HTTP返回头域中的status_code来判断请求是否成功,头域中status_code返回200时表示服务端已经收到请求,且开始处理复制对象请求。复制是否成功会在响应消息的body中,只有body体中有ETag标签才表示成功,否则表示复制失败。\n\n#### 归档存储对象 ####\n如果源对象是归档存储对象,需要判断源对象的取回状态,只有当源对象处于已取回状态时,才能复制成功。源对象未取回或者正在取回时,会复制失败,返回错误403 Forbidden。异常描述为:\n\nErrorCode: InvalidObjectState\n\nErrorMessage: Operation is not valid for the source object's storage class\n","operationId":"CopyObject","parameters":[{"description":"请求消息中可带的签名信息。\n","in":"header","name":"Authorization","required":true,"type":"string"},{"description":"请求发起端的日期和时间,例如:Wed, 27 Jun 2018 13:39:15 +0000。\n默认值:无。\n条件:如果消息头中带了x-obs-date字段,则可以不带该字段,其他情况下必选。\n","in":"header","name":"Date","required":false,"type":"string","x-apiexplorer-format":"date-gmt"},{"description":"请求的桶名称。\n","in":"query","maxLength":63,"minLength":3,"name":"bucket_name","required":true,"type":"string","x-location-cname":true},{"description":"目标对象名称。\n","in":"path","name":"object_key","required":true,"type":"string"},{"description":"复制对象时,可以加上此消息头设置对象的权限控制策略,使用的策略为预定义的常用策略,包括:private;public-read;public-read-write(各策略详细说明见ACL章节的“使用头域设置ACL”)。\n示例:x-obs-acl: acl\n","in":"header","name":"x-obs-acl","required":false,"type":"string"},{"description":"创建对象时,使用此头域授权domain下所有用户有读对象和获取对象元数据的权限\n","in":"header","name":"x-obs-grant-read","required":false,"type":"string"},{"description":"创建对象时,使用此头域授权domain下所有用户有获取对象ACL的权限。\n","in":"header","name":"x-obs-grant-read-acp","required":false,"type":"string"},{"description":"创建对象时,使用此头域授权domain下所有用户有写对象ACL的权限。\n","in":"header","name":"x-obs-grant-write-acp","required":false,"type":"string"},{"description":"创建对象时,使用此头域授权domain下所有用户有读对象、获取对象元数据、获取对象ACL、写对象ACL的权限。\n","in":"header","name":"x-obs-grant-full-control","required":false,"type":"string"},{"description":"用来指定复制对象操作的源桶名以及源对象名。当源对象存在多个版本时,通过versionId参数指定版本源对象。\n约束:中文字符,需要进行URLEncode\n示例:x-obs-copy-source: /source_bucket/sourceObject\n","in":"header","name":"x-obs-copy-source","required":true,"type":"string"},{"description":"此参数用来指定新对象的元数据是从源对象中复制,还是用请求中的元数据替换。\n\n有效取值:COPY或REPLACE。\n\n默认值:COPY。\n\n示例:x-obs-metadata-directive: metadata_directive\n\n约束条件:如果此参数的值不是COPY或REPLACE,则OBS立即返回400错误;如果用户进行修改元数据操作(源对象与目标对象相同),则此参数只能为REPLACE,否则此请求作为无效请求,服务端响应400。此参数不支持将加密的对象更改成非加密对象(源对象与目标对象相同)。如果用户使用此参数更改加密的对象,系统将返回400。\n","enum":["COPY","REPLACE"],"in":"header","name":"x-obs-metadata-directive","required":false,"type":"string"},{"description":"只有当源对象的Etag与此参数指定的值相等时才进行复制对象操作,否则返回412(前置条件不满足)。\n\n示例:x-obs-copy-source-if-match: etag\n\n约束条件:此参数可与x-obs-copy-source-if-unmodified-since一起使用,但不能与其它条件复制参数一起使用。\n","in":"header","name":"x-obs-copy-source-if-match","required":false,"type":"string"},{"description":"只有当源对象的Etag与此参数指定的值不相等时才进行复制对象操作,否则返回412(前置条件不满足)。\n\n示例:x-obs-copy-source-if-none-match: etag\n\n约束条件:此参数可与x-obs-copy-source-if-modified-since一起使用,但不能与其它条件复制参数一起使用。\n","in":"header","name":"x-obs-copy-source-if-none-match","required":false,"type":"string"},{"description":"只有当源对象在此参数指定的时间之后没有修改过才进行复制对象操作,否则返回412(前置条件不满足),此参数可与x-obs-copy-source-if-match一起使用,但不能与其它条件复制参数一起使用。\n\n类型:符合http://www.ietf.org/rfc/rfc2616.txt规定格式的HTTP时间字符串。\n\n示例:x-obs-copy-source-if-unmodified -since: time-sta\n","in":"header","name":"x-obs-copy-source-if-unmodified-since","required":false,"type":"string"},{"description":"只有当源对象在此参数指定的时间之后修改过才进行复制对象操作,否则返回412(前置条件不满足),此参数可与x-obs-copy-source-if-none-match一起使用,但不能与其它条件复制参数一起使用。\n\n类型:符合http://www.ietf.org/rfc/rfc2616.txt规定格式的HTTP时间字符串。\n\n示例:x-obs-copy-source-if-modified-since: time-sta\n","in":"header","name":"x-obs-copy-source-if-modified-since","required":false,"type":"string"},{"description":"复制对象时,可以加上此头域设置目的对象的存储类型。如果未设置此头域,则以目的对象所在桶的默认存储类型作为对象的存储类型。\n\n类型:字符串\n\n说明:存储类型有3种:STANDARD(标准存储)、WARM(低频访问存储)、COLD(归档存储)。因此这里可配置的值有:STANDARD、WARM和COLD,注意大小写敏感。\n\n示例:x-obs-storage-class: STANDARD\n","in":"header","name":"x-obs-storage-class","required":false,"type":"string"},{"description":"复制对象时,可以在HTTP请求中加入“x-obs-persistent-headers”消息头,用来加入一个或多个自定义的响应头,当用户获取目标对象或查询目标对象元数据时,加入的自定义响应头将会在返回消息的头域中出现。\n\n类型:字符串。\n\n格式:x-obs-persistent-headers: key1:base64_encode(value1),key2:base64_encode(value2)....\n\n说明:其中key1/key2等为自定义header,若含有非ASCII码或不可识别字符,可以采用URL编码或者Base64编码,服务端只会作为字符串处理,不会做解码。value1/value2等为对应自定义header的值,base64_encode指做base64编码,即将自定义header和对应值的base64编码作为一个key-value对用“:”连接,然后用“,”将所有的key-value对连接起来,放在x-obs-persistent-headers这个header中即可,服务端会对上传的value做解码处理。\n\n示例:x-obs-persistent-headers: key1:dmFsdWUx,key2:dmFsdWUy\n\n在下载目标对象或获取目标对象元数据时:返回两个头域为“key1:value1”与“key2:value2”\n\n约束:\n\n1. 通过该方式指定的自定义响应头不能以“x-obs-”为前缀,比如可以指定“key1”,但是不能指定“x-obs-key1”\n\n2. 不能指定http标准头,例如host/content-md5/origin/range/Content-Disposition等\n\n3. 此头域和自定义元数据总长度不能超过8KB\n\n4. 如果传入相同key,将value以“,”拼接后放入同一个key中返回\n\n5. 如果源对象中已经存在自定义响应头,复制的时候不会拷贝到目标对象中\n","in":"header","name":"x-obs-persistent-headers","required":false,"type":"string"},{"description":"当桶设置了Website配置,可以将获取这个对象的请求重定向到桶内另一个对象或一个外部的URL,OBS将这个值从头域中取出,保存在对象的元数据中。\n\n类型:字符串\n\n默认值:无\n\n约束:必须以“/”、“http://”或“https://”开头,长度不超过2K。\n","in":"header","name":"x-obs-website-redirect-location","required":false,"type":"string"},{"description":"使用该头域表示服务端加密是SSE-KMS方式。目标对象使用SSE-KMS方式加密。\n\n类型:字符串\n\n示例:x-obs-server-side-encryption: kms\n\n当使用SSE-KMS方式时,必选。\n","in":"header","name":"x-obs-server-side-encryption","required":false,"type":"string"},{"description":"SSE-KMS方式下使用该头域,该头域表示加密目标对象使用的主密钥,如果用户没有提供该头域,那么默认的主密钥将会被使用。\n\n类型:字符串\n\n支持两种格式的描述方式:\n\n1. regionID:domainID(租户ID):key/key_id\n\n或者\n\n2.key_id\n\n其中regionID是使用密钥所属region的ID;domainID是使用密钥所属租户的租户ID;key_id是从数据加密服务创建的密钥ID。\n\n示例:\n\n1. x-obs-server-side-encryption-kms-key-id: cn-north-4:domainiddomainiddomainiddoma0001:key/4f1cd4de-ab64-4807-920a-47fc42e7f0d0 或者\n\n2. x-obs-server-side-encryption-kms-key-id: 4f1cd4de-ab64-4807-920a-47fc42e7f0d0\n","in":"header","name":"x-obs-server-side-encryption-kms-key-id","required":false,"type":"string"},{"description":"SSE-C方式下使用该头域,该头域表示加密目标对象使用的算法。\n\n类型:字符串\n\n示例:x-obs-server-side-encryption-customer-algorithm: AES256\n\n约束:需要和x-obs-server-side-encryption-customer-key, x-obs-server-side-encryption-customer-key-MD5一起使用。\n\n当使用SSE-C方式时,必选。\n","in":"header","name":"x-obs-server-side-encryption-customer-algorithm","required":false,"type":"string"},{"description":"SSE-C方式下使用该头域,该头域表示加密目标对象使用的密钥。\n\n类型:字符串\n\n示例:x-obs-server-side-encryption-customer-key:K7QkYpBkM5+hca27fsNkUnNVaobncnLht/rCB2o/9Cw=\n\n约束:该头域由256-bit的密钥经过base64-encoded得到,需要和x-obs-server-side-encryption-customer-algorithm,x-obs-server-side-encryption-customer-key-MD5一起使用。\n\n当使用SSE-C方式时,必选。\n","in":"header","name":"x-obs-server-side-encryption-customer-key","required":false,"type":"string"},{"description":"SSE-C方式下使用该头域,该头域表示加密目标对象使用的密钥的MD5值。MD5值用于验证密钥传输过程中没有出错。\n\n类型:字符串\n\n示例:x-obs-server-side-encryption-customer-key-MD5:4XvB3tbNTN+tIEVa0/fGaQ==\n\n约束:该头域由密钥的128-bit MD5值经过base64-encoded得到,需要和x-obs-server-side-encryption-customer-algorithm,x-obs-server-side-encryption-customer-key一起使用。\n\n当使用SSE-C方式时,必选。\n","in":"header","name":"x-obs-server-side-encryption-customer-key-MD5","required":false,"type":"string"},{"description":"SSE-C方式下使用该头域,该头域表示解密源对象使用的算法。\n\n类型:字符串\n\n示例:x-obs-copy-source-server-side-encryption-customer-algorithm: AES256\n\n约束:需要和x-obs-copy-source-server-side-encryption-customer-key,x-obs-copy-source-server-side-encryption-customer-key-MD5一起使用。\n\n当拷贝源对象使用SSE-C方式时,必选。\n","in":"header","name":"x-obs-copy-source-server-side-encryption-customer-algorithm","required":false,"type":"string"},{"description":"SSE-C方式下使用该头域,该头域表示解密源对象使用的密钥。用于解密源对象。\n\n类型:字符串\n\n示例:x-obs-copy-source-server-side-encryption-customer-key: K7QkYpBkM5+hca27fsNkUnNVaobncnLht/rCB2o/9Cw=\n\n约束:该头域由256-bit的密钥经过base64-encoded得到,需要和x-obs-copy-source-server-side-encryption-customer-algorithm,x-obs-copy-source-server-side-encryption-customer-key-MD5一起使用。\n\n当拷贝源对象使用SSE-C方式时,必选。\n","in":"header","name":"x-obs-copy-source-server-side-encryption-customer-key","required":false,"type":"string"},{"description":"SSE-C方式下使用该头域,该头域表示解密源对象使用的密钥的MD5值。MD5值用于验证密钥传输过程中没有出错。\n\n类型:字符串\n\n示例:x-obs-copy-source-server-side-encryption-customer-key-MD5:4XvB3tbNTN+tIEVa0/fGaQ==\n\n约束:该头域由密钥的128-bit MD5值经过base64-encoded得到,需要和x-obs-copy-source-server-side-encryption-customer-algorithm,x-obs-copy-source-server-side-encryption-customer-key一起使用。\n\n当拷贝源对象使用SSE-C方式时,必选。\n","in":"header","name":"x-obs-copy-source-server-side-encryption-customer-key-MD5","required":false,"type":"string"},{"description":"此参数的值是一个URL,用于指定当此次请求操作成功响应后的重定向的地址。\n\n如果此参数值有效且操作成功,响应码为303,Location头域由此参数以及桶名、对象名、对象的ETag组成。\n如果此参数值无效,则OBS忽略此参数的作用,响应码为204,Location头域为对象地址。\n类型:字符串。\n","in":"header","name":"success_action_redirect","required":false,"type":"string"}],"produces":["application/xml"],"responses":{"200":{"description":"请求成功响应消息。\n","headers":{"Connection":{"description":"指明与服务器的连接是长连接还是短连接。\n","type":"string"},"Content-Length":{"description":"响应消息体的字节长度。\n","type":"string"},"Date":{"description":"OBS系统响应的时间。\n","type":"string"},"ETag":{"description":"对象的base64编码的128位MD5摘要。ETag是对象内容的唯一标识,可以通过该值识别对象内容是否有变化。比如上传对象时ETag为A,下载对象时ETag为B,则说明对象内容发生了变化。实际的ETag是对象的哈希值。ETag只反映变化的内容,而不是其元数据。上传的对象或拷贝操作创建的对象,通过MD5加密后都有唯一的ETag。如果通过多段上传对象,则无论加密方法如何,MD5会拆分ETag,此类情况ETag就不是MD5的摘要。\n","type":"string"},"x-obs-copy-source-version-id":{"description":"源对象的版本号。\n","type":"string"},"x-obs-id-2":{"description":"帮助定位问题的特殊符号。\n","type":"string"},"x-obs-request-id":{"description":"由OBS创建来唯一确定本次请求的值,可以通过该值来定位问题。\n","type":"string"},"x-obs-server-side-encryption":{"description":"如果服务端加密是SSE-KMS方式,响应包含该头域。\n\n类型:字符串\n\n示例:x-obs-server-side-encryption: kms\n","type":"string"},"x-obs-server-side-encryption-customer-algorithm":{"description":"如果服务端加密是SSE-C方式,响应包含该头域,该头域表示加密使用的算法。\n\n类型:字符串\n\n示例:x-obs-server-side-encryption-customer-algorithm: AES256\n","type":"string"},"x-obs-server-side-encryption-customer-key-MD5":{"description":"如果服务端加密是SSE-C方式,响应包含该头域,该头域表示加密使用的密钥的MD5值。\n\n类型:字符串\n\n示例:x-obs-server-side-encryption-customer-key-MD5:4XvB3tbNTN+tIEVa0/fGaQ==\n","type":"string"},"x-obs-server-side-encryption-kms-key-id":{"description":"如果服务端加密是SSE-KMS方式,响应包含该头域,该头域表示主密钥。\n\n类型:字符串\n\n格式为: regionID:domainID(租户ID):key/key_id\n\n其中regionID是使用密钥所属region的ID;domainID是使用密钥所属租户的租户ID;key_id是本次加密使用的密钥ID。\n\n示例: x-obs-server-side-encryption-kms-key-id: cn-north-4:domainiddomainiddomainiddoma0001:key/4f1cd4de-ab64-4807-920a-47fc42e7f0d0\n","type":"string"},"x-obs-storage-class":{"description":"对象为非标准存储对象时,会返回此头域,可取值为:WARM或者COLD\n","type":"string"},"x-obs-version-id":{"description":"目标对象的版本号。\n","type":"string"}},"schema":{"$ref":"#/definitions/CopyObjectResult"}},"400":{"description":"请求失败响应消息。\n","schema":{"$ref":"#/definitions/Error"}}},"summary":"复制对象","tags":["对象操作"],"x-is-registered":"Y","x-request-examples-1":"PUT /destobject HTTP/1.1\nUser-Agent: curl/7.29.0\nHost: examplebucket.obs.cn-north-4.myhuaweicloud.com\nAccept: */*\nDate: WED, 01 Jul 2015 04:19:21 GMT\nAuthorization: OBS H4IPJX0TQTHTHEBQQCEC:2rZR+iaH8xUewvUKuicLhLHpNoU=\nx-obs-copy-source: /bucket/srcobject\n","x-request-examples-url-1":"/destinationObjectName","x-support-sdk":"Y"}}},"product_short":"OBS","region_id":"cn-north-4","schemes":["HTTPS"],"security_definitions":null,"summary":"复制对象","tags":"对象操作","uri":null,"version":"2.0"}