{"base_path":"/","components":null,"consumes":"[\"application/json\"]","definitions":{"CreateImageCacheRequestBody":{"description":"创建镜像缓存-respuest结构体。","properties":{"building_config":{"$ref":"#/definitions/ImageCacheBuildingConfig","description":"构建镜像缓存的配置信息。"},"image_cache_size":{"default":20,"description":"**参数解释:**\n镜像缓存后端对应的存储盘大小,单位GiB。缓存对象为解压后的镜像文件,建议镜像缓存大小不低于该缓存中所有容器镜像大小总和的3倍。\n**约束限制:**\n不涉及\n**取值范围:**\n[20-400]\n**默认取值:**\n20\n","example":25,"format":"int32","maximum":400,"minimum":20,"type":"integer"},"images":{"description":"镜像缓存中的容器镜像列表。","example":["swr.region.com/test/nginx:v1","busybox:latest"],"items":{"description":"**参数解释:**\n缓存的容器镜像名称,使用时镜像名称需与Pod中的Spec.Containers[*].Image字段值保持一致。\n**约束限制:**\n不涉及\n**取值范围:**\n容器镜像名,最长1024位。\n**默认取值:**\n不涉及\n","maxLength":1024,"minLength":1,"type":"string"},"maxItems":20,"minItems":1,"type":"array"},"name":{"description":"**参数解释:**\n镜像缓存名称。\n**约束限制:**\n不涉及\n**取值范围:**\n以小写字母开头,由小写字母、数字、中划线(-)组成,长度范围1-128位,且不能以中划线(-)结尾。镜像缓存名称不可重复。\n**默认取值:**\n不涉及\n","example":"test-imagecache1","maxLength":128,"minLength":1,"pattern":"^[a-z]([a-z0-9-]*[a-z0-9])?$","type":"string"},"retention_days":{"default":0,"description":"**参数解释:**\n镜像缓存有效的天数,不设置或值为0表示永久有效。镜像缓存到达有效期后自动过期并删除。\n**约束限制:**\n不涉及\n**取值范围:**\n[0-10000]\n**默认取值:**\n0\n","example":7,"format":"int32","maximum":10000,"minimum":0,"type":"integer"}},"required":["name","images","building_config"]},"CreateImageCacheResponseBody":{"description":"创建镜像缓存-response结构体。","properties":{"image_cache":{"$ref":"#/definitions/ImageCacheDetail","description":"镜像缓存信息。"}},"required":["image_cache"]},"ImageCacheBuildingConfig":{"description":"镜像缓存构建配置信息。","properties":{"cluster":{"description":"**参数解释:**\n构建镜像缓存所启动的临时Pod所在的Autopilot集群的UID。\n**约束限制:**\n要求使用的Autopilot集群版本为v1.28.8-r0或v1.31.4-r0以上版本。\n**取值范围:**\n不涉及\n**默认取值:**\n不涉及\n","example":"8b3b4b2d-e39d-11ef-a9ac-0255ac100113","pattern":"^[0-9a-z]{8}-[0-9a-z]{4}-[0-9a-z]{4}-[0-9a-z]{4}-[0-9a-z]{12}$","type":"string"},"image_pull_secrets":{"description":"下载所需缓存镜像的访问凭证列表,不填写或无有效凭证时仅支持下载公共镜像。","example":["default:default-secret","test:my-secret"],"items":{"description":"**参数解释:**\n下载缓存镜像的访问凭证,为构建集群下kubernetes.io/dockerconfigjson type类型秘钥,格式为\"{secretNamespace}:{secretName}\"。\n**约束限制:**\n不涉及\n**取值范围:**\n为构建集群下kubernetes.io/dockerconfigjson type类型秘钥,格式为\"{secretNamespace}:{secretName}\"。\n示例:\"default:default-secret\"。\n**默认取值:**\n不涉及\n","maxLength":317,"minLength":3,"type":"string"},"maxItems":20,"minItems":0,"type":"array"}},"required":["cluster"]},"ImageCacheDetail":{"description":"镜像缓存信息。","properties":{"building_config":{"$ref":"#/definitions/ImageCacheBuildingConfig","description":"构建镜像缓存的配置信息。"},"created_at":{"description":"镜像缓存创建时间戳。","type":"string"},"id":{"description":"镜像缓存ID。","pattern":"^[0-9a-z]{8}-[0-9a-z]{4}-[0-9a-z]{4}-[0-9a-z]{4}-[0-9a-z]{12}$","type":"string"},"image_cache_size":{"default":20,"description":"镜像缓存后端对应的存储盘大小,单位GiB。","format":"int32","maximum":400,"minimum":20,"type":"integer"},"images":{"description":"镜像缓存中的容器镜像列表。","items":{"maxLength":1024,"minLength":1,"type":"string"},"maxItems":20,"minItems":1,"type":"array"},"message":{"description":"镜像缓存创建失败或异常的错误信息。","maxLength":10240,"minLength":0,"type":"string"},"name":{"description":"镜像缓存名称。","maxLength":128,"minLength":1,"pattern":"^[a-z]([a-z0-9-]*[a-z0-9])?$","type":"string"},"retention_days":{"default":0,"description":"**参数解释:**\n镜像缓存有效的天数,不设置或值为0表示永久有效。镜像缓存到达有效期后自动过期并删除。\n**约束限制:**\n不涉及\n**取值范围:**\n[0-10000]\n**默认取值:**\n0\n","format":"int32","maximum":10000,"minimum":0,"type":"integer"},"status":{"description":"**参数解释:**\n镜像缓存的状态。\n**约束限制:**\n不涉及\n**取值范围:**\n- Available: 可用状态,表示当前镜像缓存正常可用。\n- Unavailable:不可用,表示镜像缓存状态异常或过期,不可使用。\n- Creating:创建中,表示镜像缓存正在创建中。\n- Deleting:删除中,表示镜像缓存正在删除中。\n- Failed:创建失败,表示镜像缓存创建失败。\n**默认取值:**\n不涉及","enum":["Available","Unavailable","Creating","Deleting","Failed"],"type":"string"}},"required":["name","id","created_at","images","image_cache_size","retention_days","building_config","status"]}},"description":null,"group_id":"394aeee55c894cd89bc6a709f45ae609","host":"cce.cn-north-4.myhuaweicloud.com","id":"f56d50d8877b4e768556ee4f19ffbd52","info_version":"v5","method":"post","name":"CreateImageCache","parameters":{"param_header_content_type":{"default":"application/json","description":"**参数解释:**\n消息体的类型(格式)。\n**约束限制:**\nGET方法不做校验。\n**取值范围:**\n  - application/json\n  - application/json;charset=utf-8\n  - application/x-pem-file\n  - multipart/form-data(注:存在FormData参数时使用)\n\n**默认取值:**\n不涉及\n","enum":["application/json","application/json;charset=utf-8","application/x-pem-file","multipart/form-data"],"in":"header","name":"Content-Type","required":true,"type":"string","x-order":1},"param_header_x_auth_token":{"description":"**参数解释:**\n调用接口的认证方式分为Token和AK/SK两种,如果您使用的Token方式,此参数为必填,请填写Token的值,获取方式请参见[获取token](cce_02_0004.xml)。\n**约束限制:**\n不涉及\n**取值范围:**\n不涉及\n**默认取值:**\n不涉及","in":"header","maxLength":16384,"minLength":1,"name":"X-Auth-Token","required":true,"type":"string","x-order":2}},"paths":{"/v5/imagecaches":{"post":{"deprecated":false,"description":"创建镜像缓存。创建过程会在指定集群中启动临时Pod进行镜像缓存构建,创建镜像缓存后,可在负载创建时通过使用镜像缓存功能大幅减少下载容器镜像的耗时,实现容器的快速启动。单租户创建镜像缓存数量上限为50。","operationId":"CreateImageCache","parameters":[{"$ref":"#/parameters/param_header_content_type"},{"$ref":"#/parameters/param_header_x_auth_token"},{"description":"创建镜像缓存请求体","in":"body","name":"CreateImageCacheRequestBody","required":true,"schema":{"$ref":"#/definitions/CreateImageCacheRequestBody"}}],"responses":{"201":{"description":"Created","examples":{"application/json":{"image_cache":{"building_config":{"cluster":"8b3b4b2d-e39d-11ef-a9ac-0255ac100113","image_pull_secrets":["default:default-secret","test:my-secret"]},"created_at":"2024-11-25 06:32:34.923248 +0000 UTC","id":"c271e39e-1a6e-4d3d-8fa8-2a36329c68d2","image_cache_size":25,"images":["swr.region.com/test/nginx:v1","busybox:latest"],"name":"test-imagecache1","retention_days":7,"status":"Creating"}}},"schema":{"$ref":"#/definitions/CreateImageCacheResponseBody"}}},"summary":"创建镜像缓存","tags":["镜像缓存管理"],"x-api-category":"autopilot","x-api-type":"open-api","x-apiexplorer-hide":"false","x-constraint":"","x-is-registered":"Y","x-name":"创建镜像缓存","x-open-region-cloud":"hws,hws_hk","x-order":0,"x-request-examples-1":{"building_config":{"cluster":"8b3b4b2d-e39d-11ef-a9ac-0255ac100113","image_pull_secrets":["default:default-secret","test:my-secret"]},"image_cache_size":25,"images":["swr.region.com/test/nginx:v1","busybox:latest"],"name":"test-imagecache1","retention_days":7},"x-request-examples-description-1":"创建名为test-imagecache1镜像缓存,缓存对象为两个容器镜像,有效期设置7天,镜像缓存后端对应的存储盘大小选择25Gi。","x-request-examples-text-1":{"building_config":{"cluster":"8b3b4b2d-e39d-11ef-a9ac-0255ac100113","image_pull_secrets":["default:default-secret","test:my-secret"]},"image_cache_size":25,"images":["swr.region.com/test/nginx:v1","busybox:latest"],"name":"test-imagecache1","retention_days":7},"x-request-examples-url-1":"/v5/imagecaches","x-scope":"Commercial","x-support-sdk":"Y"}}},"product_short":"CCE","region_id":"cn-north-4","schemes":["HTTPS"],"security_definitions":null,"summary":"创建镜像缓存","tags":"镜像缓存管理","uri":null,"version":"2.0"}