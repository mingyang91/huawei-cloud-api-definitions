{"base_path":"/","components":null,"consumes":"[\"application/json\"]","definitions":{"CertDuration":{"description":"集群证书有效期","properties":{"duration":{"description":"集群证书有效时间,单位为天,最小值为1,最大值为1825(5*365,1年固定计365天,忽略闰年影响);若填-1则为最大值5年。","format":"int32","maximum":1825,"minimum":1,"type":"integer"}},"required":["duration"]},"ClusterCert":{"properties":{"certificate-authority-data":{"description":"证书授权数据。","type":"string"},"insecure-skip-tls-verify":{"description":"不校验服务端证书,在 cluster 类型为 externalCluster 时,该值为 true。","type":"boolean"},"server":{"description":"服务器地址。","type":"string"}}},"ClusterCertResponseBody":{"properties":{"apiVersion":{"description":"API版本,固定值“v1”。","type":"string"},"clusters":{"description":"集群列表。","items":{"$ref":"#/definitions/Clusters"},"type":"array"},"contexts":{"description":"上下文列表。","items":{"$ref":"#/definitions/Contexts"},"type":"array"},"current-context":{"description":"当前上下文,若存在publicIp(虚拟机弹性IP)时为 external; 若不存在publicIp为 internal。","type":"string"},"kind":{"default":"Config","description":"API类型,固定值“Config”,该值不可修改。","type":"string"},"preferences":{"description":"当前未使用该字段,当前默认为空。","type":"object"},"users":{"description":"存放了指定用户的一些证书信息和ClientKey信息。","items":{"$ref":"#/definitions/Users"},"type":"array"}}},"Clusters":{"properties":{"cluster":{"$ref":"#/definitions/ClusterCert","description":"集群信息。"},"name":{"description":"集群名字。\n- 若不存在publicIp(虚拟机弹性IP),则集群列表的集群数量为1,该字段值为“internalCluster”。\n- 若存在publicIp,则集群列表的集群数量大于1,所有扩展的cluster的name的值为“externalCluster”。","type":"string"}}},"Context":{"properties":{"cluster":{"description":"上下文cluster信息。","type":"string"},"user":{"description":"上下文user信息。","type":"string"}}},"Contexts":{"properties":{"context":{"$ref":"#/definitions/Context","description":"上下文信息。"},"name":{"description":"上下文的名称。\n- 若不存在publicIp(虚拟机弹性IP),则集群列表的集群数量为1,该字段值为“internal”。\n- 若存在publicIp,则集群列表的集群数量大于1,所有扩展的context的name的值为“external”。","type":"string"}}},"User":{"properties":{"client-certificate-data":{"description":"客户端证书。","type":"string"},"client-key-data":{"description":"包含来自TLS客户端密钥文件的PEM编码数据。","type":"string"}}},"Users":{"properties":{"name":{"description":"当前为固定值“user“。","type":"string"},"user":{"$ref":"#/definitions/User","description":"存放了指定用户的一些证书信息和ClientKey信息。"}}}},"description":null,"group_id":"394aeee55c894cd89bc6a709f45ae609","host":"cce.cn-north-4.myhuaweicloud.com","id":"1812fe81d53e4b61b2bd1900eb1b390e","info_version":"v3","method":"post","name":"CreateAutopilotKubernetesClusterCert","parameters":{"param_header_content_type":{"default":"application/json","description":"消息体的类型(格式)","in":"header","name":"Content-Type","required":true,"type":"string","x-order":51},"param_header_x_auth_token":{"description":"调用接口的认证方式分为Token和AK/SK两种,如果您使用的Token方式,此参数为必填,请填写Token的值,获取方式请参见[获取token](cce_02_0004.xml)。","in":"header","maxLength":16384,"name":"X-Auth-Token","required":true,"type":"string","x-order":52},"param_path_clusterid":{"description":"集群ID,获取方式请参见[如何获取接口URI中参数](cce_02_0271.xml)。","in":"path","name":"cluster_id","pattern":"^[0-9a-z]{8}-[0-9a-z]{4}-[0-9a-z]{4}-[0-9a-z]{4}-[0-9a-z]{12}$","required":true,"type":"string","x-order":2},"param_path_projectid":{"description":"项目ID,获取方式请参见[如何获取接口URI中参数](cce_02_0271.xml)。","in":"path","name":"project_id","required":true,"type":"string","x-order":1}},"paths":{"/autopilot/v3/projects/{project_id}/clusters/{cluster_id}/clustercert":{"post":{"consumes":[],"deprecated":false,"description":"该API用于获取指定集群的证书信息。","operationId":"CreateAutopilotKubernetesClusterCert","parameters":[{"$ref":"#/parameters/param_path_projectid"},{"$ref":"#/parameters/param_path_clusterid"},{"$ref":"#/parameters/param_header_content_type"},{"$ref":"#/parameters/param_header_x_auth_token"},{"description":"创建集群证书的请求Body。","in":"body","name":"CreateKubernetesClusterCertRequestBody","required":true,"schema":{"$ref":"#/definitions/CertDuration"},"x-example":"{ \t\"duration\": 30 }","x-order":500}],"produces":[],"responses":{"200":{"description":"表示成功获取指定集群的证书。证书文件格式参见kubernetes v1.Config结构","examples":{"application/json":{"apiVersion":"v1","clusters":[{"cluster":{"certificate-authority-data":"Q2VydGlmaWNhdGU6******FTkQgQ0VSVElGSUNBVEUtLS0tLQo=","server":"https://192.168.1.7:5443"},"name":"internalCluster"}],"contexts":[{"context":{"cluster":"internalCluster","user":"user"},"name":"internal"}],"current-context":"internal","kind":"Config","preferences":{},"users":[{"name":"user","user":{"client-certificate-data":"LS0tLS1CRUdJTiBDR******QVRFLS0tLS0K","client-key-data":"LS0tLS1CRUdJTi******BLRVktLS0tLQo="}}]}},"headers":{"Port-ID":{"description":"集群控制节点端口ID","type":"string"}},"schema":{"$ref":"#/definitions/ClusterCertResponseBody"}}},"summary":"获取集群证书","tags":["集群管理(Autopilot)"],"x-api-category":"autopilot","x-api-type":"open-api","x-apiexplorer-hide":"false","x-constraint":"该接口适用于1.13及以上集群版本。","x-is-registered":"Y","x-name":"获取集群证书","x-open-region-cloud":"hws,hws_hk","x-order":11,"x-request-examples-1":{"duration":30},"x-request-examples-description-1":"申请30天有效的集群访问证书","x-request-examples-url-1":"","x-scope":"Commercial","x-support-sdk":"Y"}}},"product_short":"CCE","region_id":"cn-north-4","schemes":["HTTPS"],"security_definitions":null,"summary":"获取集群证书","tags":"集群管理(Autopilot)","uri":null,"version":"2.0"}