{"base_path":"/","components":null,"consumes":"[\"application/json\"]","definitions":{"LineStatus":{"properties":{"critical":{"description":"表示是否为关键线路(关键线路未执行无法取消升级流程)","type":"string"},"endPoint":{"$ref":"#/definitions/Point","description":"线路终点"},"startPoint":{"$ref":"#/definitions/Point","description":"线路起点"}}},"Metadata":{"description":"资源描述基本信息,集合类的元素类型,包含一组由不同名称定义的属性。","properties":{"annotations":{"additionalProperties":{"type":"string"},"description":"资源注解,由key/value组成","type":"object"},"creationTimestamp":{"description":"创建时间","format":"date","type":"string"},"labels":{"additionalProperties":{"type":"string"},"description":"资源标签,key/value对格式,接口保留字段,填写不会生效","type":"object"},"name":{"description":"资源名称","type":"string"},"uid":{"description":"唯一id标识","type":"string"},"updateTimestamp":{"description":"更新时间","format":"date","type":"string"}}},"Point":{"properties":{"taskType":{"$ref":"#/definitions/TaskType","description":"集群升级任务类型"}}},"PointStatus":{"properties":{"endTimeStamp":{"description":"升级任务结束时间","type":"string"},"expireTimeStamp":{"description":"升级任务过期时间(当前仅升级前检查任务适用)","type":"string"},"startTimeStamp":{"description":"升级任务开始时间","type":"string"},"status":{"$ref":"#/definitions/UpgradeWorkflowTaskStatus"},"taskID":{"description":"升级任务项ID","type":"string"},"taskType":{"$ref":"#/definitions/TaskType"}}},"TaskType":{"description":"集群升级任务类型:\nCluster: 集群升级任务\nPreCheck: 集群升级预检查任务\nRollback: 集群升级回归任务\nSnapshot: 集群升级快照任务\nPostCheck: 集群升级后检查任务","enum":["Cluster","PreCheck","Rollback","Snapshot","PostCheck"],"type":"string"},"UpgradeWorkFlow":{"properties":{"apiVersion":{"default":"v3","description":"API版本,固定值“v3”,该值不可修改。","pattern":"v3","type":"string"},"kind":{"default":"WorkFlowTask","description":"API类型,固定值“WorkFlowTask”,该值不可修改。","pattern":"WorkFlowTask","type":"string"},"metadata":{"$ref":"#/definitions/Metadata","description":"升级流程的元数据信息"},"spec":{"$ref":"#/definitions/WorkFlowSpec","description":"集合类的元素类型,您对集群升级流程主体都在spec中给出。CCE通过spec的描述来创建或更新对象。"},"status":{"$ref":"#/definitions/WorkFlowStatus","description":"集合类的元素类型,用于记录本次集群升级流程的当前状态信息,包含了集群升级流程的各个流程的执行状态"}}},"UpgradeWorkFlowList":{"properties":{"apiVersion":{"default":"v3","description":"API版本,固定值“v3”,该值不可修改。","pattern":"v3","type":"string"},"items":{"$ref":"#/definitions/UpgradeWorkFlow"},"kind":{"default":"List","description":"API类型,固定值“List”,该值不可修改。","pattern":"List","type":"string"}}},"UpgradeWorkflowTaskStatus":{"description":"集群升级状态:\nInit: 任务初始状态\nQueuing: 任务已进入执行队列\nRunning: 任务开始执行\nSuccess: 任务执行成功\nFailed: 任务执行失败","enum":["Init","Queuing","Running","Success","Failed"],"type":"string"},"WorkFlowPhase":{"description":"集群升级流程的执行状态:\nInit: 表示该升级流程中还未有任何任务开始运行\nRunning: 表示该升级流程中已有任务开始执行\nPending: 表示该升级流程中有任务执行失败\nSuccess: 表示该升级流程中所有任务都已执行成功\nCancel: 表示该升级流程已被取消","enum":["Init","Running","Pending","Success","Cancel"],"type":"string"},"WorkFlowSpec":{"properties":{"clusterID":{"description":"集群ID,资源唯一标识,创建成功后自动生成,填写无效","pattern":"^[0-9a-z]{8}-[0-9a-z]{4}-[0-9a-z]{4}-[0-9a-z]{4}-[0-9a-z]{12}$","type":"string"},"clusterVersion":{"description":"本次集群升级的当前版本","example":"v1.23.4-r0","pattern":"^v\\d\\.\\d\\.\\d-r\\d$","type":"string"},"targetVersion":{"description":"本次集群升级的目标版本","example":"v1.25.2-r0","pattern":"^v\\d\\.\\d\\.\\d-r\\d$","type":"string"}},"required":["targetVersion"]},"WorkFlowStatus":{"properties":{"lineStatuses":{"description":"表示该升级流程的任务执行线路","items":{"$ref":"#/definitions/LineStatus"},"maxItems":100,"minItems":0,"type":"array"},"phase":{"$ref":"#/definitions/WorkFlowPhase"},"pointStatuses":{"description":"升级流程中的各个任务项的执行状态","items":{"$ref":"#/definitions/PointStatus"},"maxItems":100,"minItems":0,"type":"array"}}}},"description":null,"group_id":"394aeee55c894cd89bc6a709f45ae609","host":"cce.cn-north-4.myhuaweicloud.com","id":"0c7b380917c14e51a9ffb3b0a386fec1","info_version":"v3","method":"get","name":"ListUpgradeWorkFlows","parameters":{"param_header_content_type":{"default":"application/json","description":"消息体的类型(格式)","in":"header","name":"Content-Type","required":true,"type":"string","x-order":51},"param_header_x_auth_token":{"description":"调用接口的认证方式分为Token和AK/SK两种,如果您使用的Token方式,此参数为必填,请填写Token的值,获取方式请参见[获取token](cce_02_0004.xml)。","in":"header","maxLength":16384,"name":"X-Auth-Token","required":true,"type":"string","x-order":52},"param_path_clusterid":{"description":"集群ID,获取方式请参见[如何获取接口URI中参数](cce_02_0271.xml)。","in":"path","name":"cluster_id","pattern":"^[0-9a-z]{8}-[0-9a-z]{4}-[0-9a-z]{4}-[0-9a-z]{4}-[0-9a-z]{12}$","required":true,"type":"string","x-order":2},"param_path_projectid":{"description":"项目ID,获取方式请参见[如何获取接口URI中参数](cce_02_0271.xml)。","in":"path","name":"project_id","required":true,"type":"string","x-order":1}},"paths":{"/api/v3/projects/{project_id}/clusters/{cluster_id}/operation/upgradeworkflows":{"get":{"consumes":[],"description":"获取历史集群升级引导任务列表","operationId":"ListUpgradeWorkFlows","parameters":[{"$ref":"#/parameters/param_path_projectid"},{"$ref":"#/parameters/param_path_clusterid"},{"$ref":"#/parameters/param_header_content_type"},{"$ref":"#/parameters/param_header_x_auth_token"}],"produces":[],"responses":{"200":{"description":"获取历史集群升级引导任务列表成功。","examples":{"application/json":{"apiVersion":"v3","items":{"apiVersion":"v3","kind":"WorkFlowTask","metadata":{"creationTimestamp":"2023-11-24 08:39:15.894417 +0000 UTC","uid":"730f5577-38ef-448c-b4a7-c6878fbefdda","updateTimestamp":"2023-11-25 02:57:25.718567 +0000 UTC"},"spec":{"clusterID":"b4b9e60f-8aa2-11ee-af09-0255ac10004f","clusterVersion":"v1.17.17-r0","targetVersion":"v1.19.16-r80"},"status":{"lineStatuses":[{"endPoint":{"taskType":"Cluster"},"startPoint":{"taskType":"PreCheck"}},{"endPoint":{"taskType":"PostCheck"},"startPoint":{"taskType":"Cluster"}}],"phase":"Cancel","pointStatuses":[{"taskType":"PreCheck"},{"taskType":"Snapshot"},{"taskType":"Cluster"},{"taskType":"PostCheck"}]}},"kind":"List"}},"schema":{"$ref":"#/definitions/UpgradeWorkFlowList"}}},"summary":"获取UpgradeWorkFlows列表","tags":["集群升级"],"x-api-type":"open-api","x-apiexplorer-hide":"false","x-constraint":"","x-is-registered":"Y","x-name":"获取历史集群升级引导任务列表","x-order":17,"x-publishpath":"","x-scope":"Commercial","x-support-sdk":"Y"}}},"product_short":"CCE","region_id":"cn-north-4","schemes":["HTTPS"],"security_definitions":null,"summary":"获取UpgradeWorkFlows列表","tags":"集群升级","uri":null,"version":"2.0"}