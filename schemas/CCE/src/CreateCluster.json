{"base_path":"/","components":null,"consumes":"[\"application/json\"]","definitions":{"AlarmInfo":{"description":"**参数解释:**\n告警助手参数配置。基于AOM服务的告警能力实现,提供集群内的告警快速检索、告警快速配置的能力,告警中心的指标类告警规则依赖云原生监控插件上报数据到AOM实例。\n**约束限制:**\n不涉及","properties":{"alarmRuleTemplateId":{"description":"**参数解释:**\n开启告警助手时传入告警模板ID。默认采用容器场景下的告警规则模板。\n**约束限制:**\n不涉及\n**取值范围:**\n不涉及\n**默认取值:**\n不涉及","type":"string"},"promEnterpriseProjectID":{"description":"**参数解释:**\n开启告警助手时传入AOM普罗实例的企业项目id。若未安装普罗插件或者未对接AOM实例,此参数无需指定,告警中心将不会创建指标类告警规则。\n**约束限制:**\n不涉及\n**取值范围:**\n不涉及\n**默认取值:**\n不涉及","type":"string"},"promInstanceID":{"description":"**参数解释:**\n开启告警助手时传入AOM普罗实例的id。若未安装普罗插件或者未对接AOM实例,此参数无需指定,告警中心将不会创建指标类告警规则。\n**约束限制:**\n不涉及\n**取值范围:**\n不涉及\n**默认取值:**\n不涉及","type":"string"},"topics":{"description":"**参数解释:**\n联系组列表。填写SMN主题名称,通过配置告警联系组,分组管理订阅终端,接收告警信息。\n**约束限制:**\n不涉及","items":{"type":"string"},"type":"array"}},"required":["topics"],"type":"object"},"AuthenticatingProxy":{"description":"authenticatingProxy模式相关配置。认证模式为authenticating_proxy时必选","properties":{"ca":{"description":"authenticating_proxy模式配置的x509格式CA证书(base64编码)。当集群认证模式为authenticating_proxy时,此项必须填写。\n\n\n最大长度:1M","type":"string"},"cert":{"description":"authenticating_proxy模式配置的x509格式CA证书签发的客户端证书,用于kube-apiserver到扩展apiserver的认证。(base64编码)。当集群认证模式为authenticating_proxy时,此项必须填写。","type":"string"},"privateKey":{"description":"authenticating_proxy模式配置的x509格式CA证书签发的客户端证书时对应的私钥,用于kube-apiserver到扩展apiserver的认证。Kubernetes集群使用的私钥尚不支持密码加密,请使用未加密的私钥。(base64编码)。当集群认证模式为authenticating_proxy时,此项必须填写。","type":"string"}}},"Authentication":{"description":"","properties":{"authenticatingProxy":{"$ref":"#/definitions/AuthenticatingProxy","description":"authenticatingProxy模式相关配置。认证模式为authenticating_proxy时必选。"},"mode":{"description":"集群认证模式。\n- kubernetes 1.11及之前版本的集群支持“x509”、“rbac”和“authenticating_proxy”,默认取值为“x509”。\n- kubernetes 1.13及以上版本的集群支持“rbac”和“authenticating_proxy”,默认取值为“rbac”。","type":"string"}}},"Cluster":{"description":"","properties":{"apiVersion":{"default":"v3","description":"API版本,固定值“v3”,该值不可修改。","type":"string"},"kind":{"default":"Cluster","description":"API类型,固定值“Cluster”或“cluster”,该值不可修改。","type":"string"},"metadata":{"$ref":"#/definitions/ClusterMetadata","description":"集群的基本信息,为集合类的元素类型,包含一组由不同名称定义的属性。"},"spec":{"$ref":"#/definitions/ClusterSpec","description":"spec是集合类的元素类型,您对需要管理的集群对象进行详细描述的主体部分都在spec中给出。CCE通过spec的描述来创建或更新对象。"},"status":{"$ref":"#/definitions/ClusterStatus","description":"集合类的元素类型,用于记录对象在系统中的当前状态信息,包含了集群状态和本次创建集群作业的jobID"}},"required":["apiVersion","kind","metadata","spec"]},"ClusterEndpoints":{"properties":{"type":{"description":"集群访问地址的类型\n- Internal:用户子网内访问的地址\n- External:公网访问的地址","type":"string"},"url":{"description":"集群中 kube-apiserver 的访问地址","type":"string"}}},"ClusterExtendParam":{"properties":{"alpha.cce/fixPoolMask":{"description":"容器网络固定IP池掩码位数,仅vpc-router网络支持。\n\n该参数决定节点可分配容器IP数量,与创建节点时设置的maxPods参数共同决定节点最多可以创建多少个Pod,\n具体请参见[节点最多可以创建多少Pod](maxPods.xml)。\n\n 整数字符传取值范围: 24 ~ 28","type":"string"},"clusterAZ":{"description":"集群控制节点可用区配置。\n\nCCE支持的可用区请参考[地区和终端节点](https://developer.huaweicloud.com/endpoint?CCE)\n\n  \n- multi_az:多可用区,可选。仅使用高可用集群时才可以配置多可用区。\n- 专属云计算池可用区:用于指定专属云可用区部署集群控制节点。如果需配置专属CCE集群,该字段为必选。","type":"string"},"clusterExternalIP":{"description":"**参数解释:**\n集群控制节点弹性公网IP,绑定后可以通过该弹性公网IP访问集群管控面API。\n**约束限制:**\n不涉及\n**取值范围:**\n不涉及\n**默认取值:**\n不涉及","type":"string"},"decMasterFlavor":{"description":"专属CCE集群指定可控制节点的规格。","type":"string"},"dockerUmaskMode":{"description":"集群默认Docker的UmaskMode配置,可取值为secure或normal,不指定时默认为normal。","type":"string"},"dssMasterVolumes":{"description":"用于指定控制节点的系统盘和数据盘使用专属分布式存储,未指定或者值为空时,默认使用EVS云硬盘。\n\n如果配置专属CCE集群,该字段为必选,请按照如下格式设置:\n\n```\n<rootVol.dssPoolID>.<rootVol.volType>;<dataVol.dssPoolID>.<dataVol.volType>\n```\n\n字段说明:\n- rootVol为系统盘;dataVol为数据盘;\n- dssPoolID为专属分布式存储池ID;\n- volType为专属分布式存储池的存储类型,如SAS、SSD。\n\n样例:c950ee97-587c-4f24-8a74-3367e3da570f.sas;6edbc2f4-1507-44f8-ac0d-eed1d2608d38.ssd\n\n> 非专属CCE集群不支持配置该字段。","type":"string"},"enterpriseProjectId":{"description":"集群所属的企业项目ID。\n>   - 需要开通企业项目功能后才可配置企业项目。\n>   - 集群所属的企业项目与集群下所关联的其他云服务资源所属的企业项目必须保持一致。","type":"string"},"isAutoPay":{"description":"是否自动扣款\n- “true”:自动扣款\n- “false”:不自动扣款\n> billingMode为1时生效,不填写此参数时默认不会自动扣款。","type":"string","x-open-region-cloud":"hws,hws_hk"},"isAutoRenew":{"description":"是否自动续订\n- “true”:自动续订\n- “false”:不自动续订\n> billingMode为1时生效,不填写此参数时默认不会自动续费。","type":"string","x-open-region-cloud":"hws,hws_hk"},"kubeProxyMode":{"description":"服务转发模式,支持以下两种实现:\n\n- iptables:社区传统的kube-proxy模式,完全以iptables规则的方式来实现service负载均衡。该方式最主要的问题是在服务多的时候产生太多的iptables规则,非增量式更新会引入一定的时延,大规模情况下有明显的性能问题\n- ipvs:主导开发并在社区获得广泛支持的kube-proxy模式,采用增量式更新,吞吐更高,速度更快,并可以保证service更新期间连接保持不断开,适用于大规模场景。\n\n> 此参数已废弃,若同时指定此参数和ClusterSpec下的kubeProxyMode,以ClusterSpec下的为准。","type":"string"},"kubernetes.io/cpuManagerPolicy":{"description":"集群CPU管理策略。取值为none(或空值)或static,默认为none(或空值)。\n- none(或空值):关闭工作负载实例独占CPU核的功能,优点是CPU共享池的可分配核数较多\n- static:支持给节点上的工作负载实例配置CPU独占,适用于对CPU缓存和调度延迟敏感的工作负载,Turbo集群下仅对普通容器节点有效,安全容器节点无效。","type":"string"},"orderID":{"description":"订单ID,集群付费类型为自动付费包周期类型时,响应中会返回此字段(仅创建场景涉及)。","type":"string","x-open-region-cloud":"hws,hws_hk"},"periodNum":{"description":"订购周期数,取值范围:\n- periodType=month(周期类型为月)时,取值为[1-9]。\n- periodType=year(周期类型为年)时,取值为1-3。\n> 作为请求参数,billingMode为1时生效,且为必选。\n> 作为响应参数,仅在创建包周期集群时返回。","type":"integer","x-open-region-cloud":"hws,hws_hk"},"periodType":{"description":"- month:月\n- year:年\n> 作为请求参数,billingMode为1(包周期)时生效,且为必选。\n> 作为响应参数,仅在创建包周期集群时返回。","type":"string","x-open-region-cloud":"hws,hws_hk"},"upgradefrom":{"description":"**参数解释:**\n记录集群通过何种升级方式升级到当前版本。\n**约束限制:**\n仅查询接口返回该字段\n**取值范围:**\n不涉及\n**默认取值:**\n不涉及","type":"string"}}},"ClusterMetadata":{"description":"可以通过 annotations[\"cluster.install.addons/install\"] 来指定创建集群时需要安装的插件,格式形如\n``` [\n  {\n    \"addonTemplateName\": \"autoscaler\",\n    \"version\": \"1.15.3\",\n    \"values\": {\n      \"flavor\": {\n        \"description\": \"Has only one instance\",\n        \"name\": \"Single\",\n        \"replicas\": 1,\n        \"resources\": [\n          {\n            \"limitsCpu\": \"100m\",\n            \"limitsMem\": \"300Mi\",\n            \"name\": \"autoscaler\",\n            \"requestsCpu\": \"100m\",\n            \"requestsMem\": \"300Mi\"\n          }\n        ]\n      },\n      \"custom\": {\n        \"coresTotal\": 32000,\n        \"maxEmptyBulkDeleteFlag\": 10,\n        \"maxNodesTotal\": 1000,\n        \"memoryTotal\": 128000,\n        \"scaleDownDelayAfterAdd\": 10,\n        \"scaleDownDelayAfterDelete\": 10,\n        \"scaleDownDelayAfterFailure\": 3,\n        \"scaleDownEnabled\": false,\n        \"scaleDownUnneededTime\": 10,\n        \"scaleDownUtilizationThreshold\": 0.5,\n        \"scaleUpCpuUtilizationThreshold\": 1,\n        \"scaleUpMemUtilizationThreshold\": 1,\n        \"scaleUpUnscheduledPodEnabled\": true,\n        \"scaleUpUtilizationEnabled\": true,\n        \"tenant_id\": \"47eb1d64cbeb45cfa01ae20af4f4b563\",\n        \"unremovableNodeRecheckTimeout\": 5\n      }\n    }\n  }\n] ```","properties":{"alias":{"description":"集群显示名,用于在 CCE 界面显示,该名称创建后可修改。\n\n命名规则:以小写字母开头,由小写字母、数字、中划线(-)组成,长度范围4-128位,且不能以中划线(-)结尾。\n\n显示名和其他集群的名称、显示名不可以重复。\n\n在创建集群、更新集群请求体中,集群显示名alias未指定或取值为空,表示与集群名称name一致。在查询集群等响应体中,集群显示名alias将必然返回,未配置时将返回集群名称name。","maxLength":128,"minLength":4,"type":"string"},"annotations":{"additionalProperties":{"description":"","type":"string"},"description":"**参数解释:**\n集群注解,由key/value组成:\n\n```\n\"annotations\": {\n   \"key1\" : \"value1\",\n   \"key2\" : \"value2\"\n}\n```\n**约束限制:**\n该字段不会被数据库保存,当前仅用于指定集群待安装插件。\n**取值范围:**\n不涉及\n**默认取值:**\n不涉及\n\n>    - Annotations不用于标识和选择对象。Annotations中的元数据可以是small或large,structured或unstructured,并且可以包括标签不允许使用的字符。\n>    - 可通过加入\"cluster.install.addons.external/install\": \"[{\\\\\"addonTemplateName\\\\\":\\\\\"icagent\\\\\"}]\"的键值对在创建集群时安装ICAgent。","type":"object"},"creationTimestamp":{"description":"**参数解释:**\n集群创建时间。\n**约束限制:**\n创建集群时自动记录,不支持传入。\n**取值范围:**\n不涉及\n**默认取值:**\n不涉及","type":"string"},"labels":{"additionalProperties":{"description":"","type":"string"},"description":"集群标签,key/value对格式。\n\n>  该字段值由系统自动生成,用于升级时前端识别集群支持的特性开关,用户指定无效。","type":"object"},"name":{"description":"集群名称。\n\n命名规则:以小写字母开头,由小写字母、数字、中划线(-)组成,长度范围4-128位,且不能以中划线(-)结尾。","maxLength":128,"minLength":4,"type":"string"},"timezone":{"description":"**参数解释:**\n集群时区。[IANA Time Zone Database](https://www.iana.org/time-zones)中收录的时区名称, 例如:\"Asia/Shanghai\"。\n**约束限制:**\n不涉及\n**取值范围:**\n不涉及\n**默认取值:**\n不涉及","type":"string"},"uid":{"description":"集群ID,资源唯一标识,创建成功后自动生成,填写无效。在创建包周期集群时,响应体不返回集群ID。","pattern":"^[0-9a-z]{8}-[0-9a-z]{4}-[0-9a-z]{4}-[0-9a-z]{4}-[0-9a-z]{12}$","type":"string"},"updateTimestamp":{"description":"**参数解释:**\n集群更新时间。\n**约束限制:**\n更新集群时自动记录,不支持传入。\n**取值范围:**\n不涉及\n**默认取值:**\n不涉及","type":"string"}},"required":["name"]},"ClusterOps":{"description":"**参数解释:**\n集群运维参数配置。\n**约束限制:**\n不涉及","properties":{"alarm":{"$ref":"#/definitions/AlarmInfo","description":"**参数解释:**\n告警助手参数配置。基于AOM服务的告警能力实现,提供集群内的告警快速检索、告警快速配置的能力,告警中心的指标类告警规则依赖云原生监控插件上报数据到AOM实例。\n**约束限制:**\n不涉及","type":"object"}},"required":["alarm"],"type":"object"},"ClusterSpec":{"description":"集群参数定义。","properties":{"authentication":{"$ref":"#/definitions/Authentication","description":"集群认证方式相关配置。"},"az":{"description":"**参数解释:**\n可用区(废弃中)。\nCCE支持的可用区请参考[地区和终端节点](https://console.huaweicloud.com/apiexplorer/#/endpoint/CCE)。\n\n\n**约束限制:**\n仅查询接口返回该字段。","type":"string"},"billingMode":{"default":0,"description":"集群的计费方式。\n- 0: 按需计费\n- 1: 包周期\n\n默认为“按需计费”。","format":"int32","type":"integer"},"category":{"description":"集群类别:\n- CCE:CCE集群\n  CCE集群支持虚拟机与裸金属服务器混合、GPU、NPU等异构节点的混合部署,基于高性能网络模型提供全方位、多场景、安全稳定的容器运行环境。\n- Turbo: CCE Turbo集群。\n  全面基于云原生基础设施构建的云原生2.0的容器引擎服务,具备软硬协同、网络无损、安全可靠、调度智能的优势,为用户提供一站式、高性价比的全新容器服务体验。","enum":["CCE","Turbo"],"type":"string"},"clusterOps":{"$ref":"#/definitions/ClusterOps","description":"**参数解释:**\n集群运维相关配置。\n**约束"},"clusterTags":{"description":"集群资源标签","items":{"$ref":"#/definitions/ResourceTag","description":"集群资源标签"},"maxItems":5,"minItems":0,"type":"array"},"configurationsOverride":{"description":"覆盖集群默认组件配置\n\n若指定了不支持的组件或组件不支持的参数,该配置项将被忽略。\n\n当前支持的可配置组件及其参数详见\n[配置管理](https://support.huaweicloud.com/usermanual-cce/cce_10_0213.html)","items":{"$ref":"#/definitions/PackageConfiguration"},"type":"array"},"containerNetwork":{"$ref":"#/definitions/ContainerNetwork","description":"容器网络参数,包含了容器网络类型和容器网段的信息。"},"customSan":{"$ref":"#/definitions/CustomSan"},"deletionProtection":{"default":false,"description":"集群删除保护,默认为false关闭,如果开启后用户将无法删除该集群。","type":"boolean"},"description":{"description":"**参数解释:**\n集群描述,对于集群使用目的的描述,可根据实际情况自定义,默认为空。集群创建成功后可通过接口[更新指定的集群](cce_02_0240.xml)来做出修改,也可在CCE控制台中对应集群的“集群详情”下的“描述”处进行修改。\n**约束限制:**\n仅支持utf-8编码,长度必须小于等于200个字节\n**取值范围:**\n不涉及\n**默认取值:**\n不涉及","maxLength":200,"minLength":0,"pattern":"[\\~\\$\\%\\^\\&\\*\\<\\>\\[\\]\\{\\}\\(\\)\\'\\\"\\#\\\\]","type":"string"},"enableDistMgt":{"description":"集群开启对分布式云支持。创建CCE Turbo集群时,可在创建集群过程中,开启对分布式云(cloudpond)支持。","type":"boolean","x-open-region-cloud":"hws,hws_hk"},"encryptionConfig":{"$ref":"#/definitions/EncryptionConfig","description":"secret资源落盘加密配置,当前仅支持配置一种加密方式。默认使用cce托管密钥(用户侧不感知该密钥)进行加密。","type":"object"},"eniNetwork":{"$ref":"#/definitions/EniNetwork","description":"云原生网络2.0网络配置,创建CCE Turbo集群时指定。","x-open-region-cloud":"hws,hws_hk,dt,hcs"},"extendParam":{"$ref":"#/definitions/ClusterExtendParam","description":"集群扩展字段,可配置多可用区集群、专属CCE集群,以及将集群创建在特定的企业项目下等。"},"flavor":{"description":"**参数解释:**\n集群规格,当集群为v1.15及以上版本时支持创建后变更,详情请参见[变更集群规格](ResizeCluster.xml)。请按实际业务需求进行选择\n**约束限制:**\n不涉及\n**取值范围:**\n- cce.s1.small: 小规模单控制节点CCE集群(最大50节点)\n- cce.s1.medium: 中等规模单控制节点CCE集群(最大200节点)\n- cce.s1.large: 大规模单控制节点CCE集群(最大1000节点)\n- cce.s2.small: 小规模三控制节点CCE集群(最大50节点)\n- cce.s2.medium: 中等规模三控制节点CCE集群(最大200节点)\n- cce.s2.large: 大规模三控制节点CCE集群(最大1000节点)\n- cce.s2.xlarge: 超大规模三控制节点CCE集群(最大2000节点)\n\n\n\n\n\n专属云特殊规格如下:\n- cce.dec.s1.small: 小规模单控制节点的专属云CCE集群(最大50节点)\n- cce.dec.s1.medium: 中等规模单控制节点的专属云CCE集群(最大200节点)\n- cce.dec.s1.large: 大规模单控制节点的专属云CCE集群(最大1000节点)\n- cce.dec.s1.xlarge: 超大规模单控制节点的专属云CCE集群(最大2000节点)\n- cce.dec.s2.small: 小规模三控制节点的专属云CCE集群(最大50节点)\n- cce.dec.s2.medium: 中等规模三控制节点的专属云CCE集群(最大200节点)\n- cce.dec.s2.large: 大规模三控制节点的专属云CCE集群(最大1000节点)\n- cce.dec.s2.xlarge: 超大规模三控制节点的专属云CCE集群(最大2000节点)\n\n\n\n\n\n**默认取值:**\n不涉及\n\n>    关于规格参数中的字段说明如下:\n>    - s1:单控制节点的集群,控制节点数为1。单控制节点故障后,集群将不可用,但已运行工作负载不受影响。\n>    - s2:三控制节点的集群,即高可用集群,控制节点数为3。当某个控制节点故障时,集群仍然可用。\n\n>   - dec:表示专属云的CCE集群规格。例如cce.dec.s1.small表示小规模单控制节点的专属云CCE集群(最大50节点)。\n>    - small:表示集群支持管理的最大节点规模为50节点。\n>    - medium:表示集群支持管理的最大节点规模为200节点。\n>    - large:表示集群支持管理的最大节点规模为1000节点。\n>    - xlarge:表示集群支持管理的最大节点规模为2000节点。","type":"string"},"hostNetwork":{"$ref":"#/definitions/HostNetwork","description":"节点网络参数,包含了虚拟私有云VPC和子网的ID信息,而VPC是集群内节点之间的通信依赖,所以是必选的参数集。"},"ipv6enable":{"description":"集群是否使用IPv6模式,1.15版本及以上支持。","type":"boolean"},"kubeProxyMode":{"description":"服务转发模式,支持以下两种实现:\n\n- iptables:社区传统的kube-proxy模式,完全以iptables规则的方式来实现service负载均衡。该方式最主要的问题是在服务多的时候产生太多的iptables规则,非增量式更新会引入一定的时延,大规模情况下有明显的性能问题。\n- ipvs:主导开发并在社区获得广泛支持的kube-proxy模式,采用增量式更新,吞吐更高,速度更快,并可以保证service更新期间连接保持不断开,适用于大规模场景。\n\n> 默认使用iptables转发模式。","enum":["iptables","ipvs"],"type":"string"},"kubernetesSvcIpRange":{"description":"服务网段参数,kubernetes clusterIP取值范围,1.11.7版本及以上支持。创建集群时如若未传参,默认为\"10.247.0.0/16\"。该参数废弃中,推荐使用新字段serviceNetwork,包含IPv4服务网段。","type":"string"},"legacyVersion":{"description":"**参数解释:**\nCCE集群旧版本(已废弃),无实际功能,仅用于集群version与platformVersion组合展示,该版本号全局内唯一。如集群version为va.b, platformVersion为cce.X.Y,则legacyVersion值为va.b.X-rY。\n**约束限制:**\n不涉及\n**取值范围:**\n不涉及\n**默认取值:**\n不涉及","type":"string"},"masters":{"description":"**参数解释:**\n集群控制节点的高级配置,支持指定控制节点的可用区。\n**约束限制:**\n该参数未配置时将不返回。","items":{"$ref":"#/definitions/MasterSpec","description":""},"maxItems":3,"minItems":1,"type":"array"},"platformVersion":{"description":"CCE集群平台版本号,表示集群版本(version)下的内部版本。用于跟踪某一集群版本内的迭代,集群版本内唯一,跨集群版本重新计数。不支持用户指定,集群创建时自动选择对应集群版本的最新平台版本。\n\nplatformVersion格式为:cce.X.Y\n- X: 表示内部特性版本。集群版本中特性或者补丁修复,或者OS支持等变更场景。其值从1开始单调递增。\n- Y: 表示内部特性版本的补丁版本。仅用于特性版本上线后的软件包更新,不涉及其他修改。其值从0开始单调递增。","type":"string"},"serviceNetwork":{"$ref":"#/definitions/ServiceNetwork","description":"服务网段参数,包含IPv4 CIDR。"},"supportIstio":{"description":"支持Istio","type":"boolean"},"type":{"description":"**参数解释:**\n集群Master节点架构\n**约束限制:**\n不涉及\n**取值范围:**\n- VirtualMachine:Master节点为x86架构服务器\n- ARM64: Master节点为鲲鹏(ARM架构)服务器\n\n**默认取值:**\nVirtualMachine,如若VirtualMachine资源不足,取值为ARM64","enum":["VirtualMachine","ARM64"],"type":"string"},"version":{"description":"**参数解释:**\n集群版本,与Kubernetes社区基线版本保持一致,建议选择最新商用版本。\n> 关于Kubernetes版本策略,请参见[Kubernetes版本策略](https://support.huaweicloud.com/bulletin-cce/cce_bulletin_0033.html)\n\n\n在CCE控制台支持创建三种最新版本的集群。可登录CCE控制台创建集群,在“版本”处获取到集群版本。\n其它集群版本,当前仍可通过api创建,但后续会逐渐下线,具体下线策略请关注CCE官方公告。\n**约束限制:**\n格式必须为:vX.Y[.Z[-rN]],例如 v1.30,v1.30.0,v1.30.0-r0 都将创建1.30版本的集群\n- X: 对应社区Kubernetes的主要版本\n- Y: 对应社区Kubernetes的次要版本\n- Z: 对应社区Kubernetes的补丁版本\n- N: 对应CCE补丁版本,关于CCE补丁版本详情,请参见[补丁版本发布记录](https://support.huaweicloud.com/bulletin-cce/cce_10_0405.html)\n\n\n**取值范围:**\n不涉及\n**默认取值:**\n- 若不配置,默认创建最新版本的集群。\n- 若指定集群基线版本但是不指定具体r版本,则系统默认选择对应集群版本的最新r版本。建议不指定具体r版本由系统选择最新版本。\n\n>    - Turbo集群支持1.19及以上版本商用。","type":"string"}},"required":["eniNetwork","containerNetwork","flavor","hostNetwork"]},"ClusterStatus":{"description":"","properties":{"deleteOption":{"description":"删除配置状态(仅删除请求响应包含)","type":"object"},"deleteStatus":{"description":"删除状态信息(仅删除请求响应包含)","type":"object"},"endpoints":{"description":"集群中 kube-apiserver 的访问地址。","items":{"$ref":"#/definitions/ClusterEndpoints"},"type":"array"},"isLocked":{"description":"CBC资源锁定","type":"boolean","x-open-region-cloud":"hws,hws_hk"},"jobID":{"description":"**参数解释:**\n任务ID,集群当前状态关联的任务ID。当前支持:\n- 创建集群时返回关联的任务ID,可通过任务ID查询创建集群的附属任务信息;\n- 删除集群或者删除集群失败时返回关联的任务ID,此字段非空时,可通过任务ID查询删除集群的附属任务信息。\n\n**约束限制:**\n不涉及\n**取值范围:**\n不涉及\n\n> 任务信息具有一定时效性,仅用于短期跟踪任务进度,请勿用于集群状态判断等额外场景。","type":"string"},"lockScene":{"description":"CBC资源锁定场景","type":"string","x-open-region-cloud":"hws,hws_hk"},"lockSource":{"description":"锁定资源","type":"string","x-open-region-cloud":"hws,hws_hk"},"lockSourceId":{"description":"锁定的资源ID","type":"string","x-open-region-cloud":"hws,hws_hk"},"message":{"description":"集群变为当前状态的原因的详细信息,在集群在非“Available”状态下时,会返回此参数。","type":"string"},"phase":{"description":"集群状态,取值如下\n- Available:可用,表示集群处于正常状态。\n- Unavailable:不可用,表示集群异常,需手动删除。\n- ScalingUp:扩容中,表示集群正处于扩容过程中。\n- ScalingDown:缩容中,表示集群正处于缩容过程中。\n- Creating:创建中,表示集群正处于创建过程中。\n- Deleting:删除中,表示集群正处于删除过程中。\n- Upgrading:升级中,表示集群正处于升级过程中。\n- Resizing:规格变更中,表示集群正处于变更规格中。\n- RollingBack:回滚中,表示集群正处于回滚过程中。\n- RollbackFailed:回滚异常,表示集群回滚异常。\n- Hibernating:休眠中,表示集群正处于休眠过程中。\n- Hibernation:已休眠,表示集群正处于休眠状态。\n- Awaking:唤醒中,表示集群正处于从休眠状态唤醒的过程中。\n- Empty:集群无任何资源(已废弃)\n- Error:错误,表示集群资源异常,可尝试手动删除。","type":"string"},"reason":{"description":"集群变为当前状态的原因,在集群在非“Available”状态下时,会返回此参数。","type":"string"}}},"ConfigurationItem":{"properties":{"name":{"description":"**参数解释:**\n组件配置参数名称。\n\n当前集群支持的可配置组件及其参数详见[修改CCE集群配置](https://support.huaweicloud.com/usermanual-cce/cce_10_0213.html),当前节点池支持的可配置组件及其参数详见[修改节点池配置](https://support.huaweicloud.com/usermanual-cce/cce_10_0652.html)。\n\n**约束限制:**\n若指定了不支持的组件或组件不支持的参数,该配置项将被忽略。\n**取值范围:**\n不涉及\n**默认取值:**\n不涉及","type":"string"},"value":{"description":"**参数解释:**\n组件配置参数值。\n\n当前集群支持的可配置组件及其参数详见[修改CCE集群配置](https://support.huaweicloud.com/usermanual-cce/cce_10_0213.html),当前节点池支持的可配置组件及其参数详见[修改节点池配置](https://support.huaweicloud.com/usermanual-cce/cce_10_0652.html)。\n\n**约束限制:**\n若指定了不支持的组件或组件不支持的参数,该配置项将被忽略。\n**取值范围:**\n不涉及\n**默认取值:**\n不涉及","properties":{},"type":"object"}},"type":"object"},"ContainerCIDR":{"description":"容器网络网段,指定cidrs字段使用时必填。","properties":{"cidr":{"description":"容器网络网段,建议使用网段10.0.0.0/12~19,172.16.0.0/16~19,192.168.0.0/16~19。","type":"string"}},"required":["cidr"]},"ContainerNetwork":{"description":"Container network parameters.","properties":{"cidr":{"description":"容器网络网段,建议使用网段10.0.0.0/12~19,172.16.0.0/16~19,192.168.0.0/16~19,如存在网段冲突,将会报错。\n\n此参数在集群创建后不可更改,请谨慎选择。(已废弃,如填写cidrs将忽略该cidr)","maxLength":64,"minLength":0,"type":"string"},"cidrs":{"description":"容器网络网段列表。1.21及新版本集群使用cidrs字段,当集群网络类型为vpc-router类型时,支持多个容器网段,最多配置20个;1.21之前版本若使用cidrs字段,则取值cidrs数组中的第一个cidr元素作为容器网络网段地址。\n\n此参数在集群创建后不可更改,请谨慎选择。","items":{"$ref":"#/definitions/ContainerCIDR","description":"容器网络网段"},"maxItems":20,"type":"array"},"mode":{"description":"容器网络类型(只可选择其一)\n- overlay_l2:容器隧道网络,通过OVS(OpenVSwitch)为容器构建的overlay_l2网络。\n- vpc-router:VPC网络,使用ipvlan和自定义VPC路由为容器构建的Underlay的l2网络。\n- eni:云原生网络2.0,深度整合VPC原生ENI弹性网卡能力,采用VPC网段分配容器地址,支持ELB直通容器,享有高性能,创建CCE Turbo集群时指定。","enum":["overlay_l2","vpc-router","eni"],"maxLength":64,"minLength":0,"type":"string"}},"required":["mode"]},"CustomSan":{"description":"集群的API Server服务端证书中的自定义SAN(Subject Alternative Name)字段,遵从SSL标准X509定义的格式规范。\n\n1. 不允许出现同名重复。\n2. 格式符合IP和域名格式。\n\n示例:\n```\nSAN 1: DNS Name=example.com\nSAN 2: DNS Name=www.example.com\nSAN 3: DNS Name=example.net\nSAN 4: IP Address=93.184.216.34\n```","items":{"description":"","maxLength":255,"minLength":0,"type":"string"},"maxItems":128,"minItems":0,"type":"array"},"EncryptionConfig":{"properties":{"kmsKeyID":{"description":"**参数解释**:\nkms密钥ID\n- 集群创建API中,如果mode字段设置为Default,无需填写该字段;如果mode字段设置为KMS,则支持填写该字段。若字段为空,则默认使用KMS默认密钥进行填充,默认密钥不存在时云服务将自动为用户创建cce/default默认密钥。 用户需使用真实存在的KMS密钥,并且在集群生命周期结束前,禁止删除、禁用密钥等操作,防止集群功能异常(集群设置该密钥后不允许修改)。 \n- 集群查询API中,如果mode字段设置为Default,则该字段返回为空;若mode字段设置为KMS,则该字段为具体的密钥ID。\n**约束限制**:\n不涉及\n**取值范围**:\n不涉及\n**默认取值**:\n不涉及","example":"c8e90454-62ed-4588-b1c1-bbb6d405fb71","type":"string"},"mode":{"description":"**参数解释**:\n加密模式,取值为Default或KMS。默认为Default,即使用cce本地密钥加密。若使用KMS加密模式则使用用户自定义密钥或默认密钥加密secret资源。 若用户在创建时未填写,则集群查询接口中默认会返回Default。\n**约束限制**:\n不涉及\n**取值范围**:\n取值范围:[Default, KMS];\n**默认取值**:\nDefault","enum":["Default","KMS"],"example":"KMS","type":"string"}}},"EniNetwork":{"description":"ENI网络配置,创建集群指定使用云原生网络2.0网络模式时必填subnets和eniSubnetId其中一个字段(eniSubnetCIDR可选,若填写了会校验是否合法),1.19.10及新版本集群使用subnets字段,1.19.8及老版本若使用subnets字段,则取值subnets数组中的第一个子网ID作为容器地址使用的子网ID。","properties":{"eniSubnetCIDR":{"description":"ENI子网CIDR(废弃中)","type":"string"},"eniSubnetId":{"description":"**参数解释:**\nENI所在子网的IPv4子网ID。\n**约束限制:**\n暂不支持IPv6。该字段将会被废弃,推荐使用新字段subnets。\n**取值范围:**\n不涉及\n**默认取值:**\n不涉及\n\n获取方法如下:\n\n- 方法1:登录虚拟私有云服务的控制台界面,单击VPC下的子网,进入子网详情页面,查找IPv4子网ID。\n- 方法2:通过虚拟私有云服务的查询子网列表接口查询。\n  链接请参见[查询子网列表](https://support.huaweicloud.com/api-vpc/vpc_subnet01_0003.html)。","pattern":"^[0-9a-z]{8}-[0-9a-z]{4}-[0-9a-z]{4}-[0-9a-z]{4}-[0-9a-z]{12}$","type":"string"},"subnets":{"description":"IPv4子网ID列表","items":{"$ref":"#/definitions/NetworkSubnet","description":"IPv4子网ID"},"type":"array"}},"required":["subnets"],"x-open-region-cloud":"hws,hws_hk,dt,hcs"},"HostNetwork":{"description":"Node network parameters.","properties":{"SecurityGroup":{"description":"集群默认的Node节点安全组ID,不指定该字段系统将自动为用户创建默认Node节点安全组,指定该字段时集群将绑定指定的安全组。Node节点安全组需要放通部分端口来保证正常通信。详细设置请参考[集群安全组规则配置](https://support.huaweicloud.com/cce_faq/cce_faq_00265.html)。","type":"string"},"subnet":{"description":"**参数解释:**\n用于创建节点的子网的网络ID。\n**约束限制:**\n不涉及\n**取值范围:**\n不涉及\n**默认取值:**\n不涉及\n\n获取方法如下:\n- 方法1:登录虚拟私有云服务的控制台界面,单击VPC下的子网,进入子网详情页面,查找网络ID。\n- 方法2:通过虚拟私有云服务的查询子网列表接口查询。\n  链接请参见[查询子网列表](https://support.huaweicloud.com/api-vpc/vpc_subnet01_0003.html)。","maxLength":64,"minLength":0,"type":"string"},"vpc":{"description":"**参数解释:**\n用于创建节点的VPC的ID。\n**约束限制:**\n不涉及\n**取值范围:**\n不涉及\n**默认取值:**\n不涉及\n\n获取方法如下:\n- 方法1:登录虚拟私有云服务的控制台界面,在虚拟私有云的详情页面查找VPC ID。\n- 方法2:通过虚拟私有云服务的API接口查询。\n  链接请参见[查询VPC列表](https://support.huaweicloud.com/api-vpc/vpc_api01_0003.html)。","maxLength":64,"minLength":0,"type":"string"}},"required":["subnet","vpc"]},"MasterSpec":{"description":"master的配置,支持指定可用区、规格和故障域。若指定故障域,则必须所有master节点都需要指定故障字段。","properties":{"availabilityZone":{"description":"**参数解释:**\n控制节点所在的可用区,需要指定可用区(AZ)的名称。\nCCE支持的可用区请参考[地区和终端节点](https://console.huaweicloud.com/apiexplorer/#/endpoint/CCE)\n\n**约束限制:**\n不涉及\n**取值范围:**\n不涉及\n**默认取值:**\n不涉及","type":"string"}}},"NetworkSubnet":{"description":"ENI网络配置,创建集群指定subnets字段使用时必填。","properties":{"subnetID":{"description":"**参数解释:**\n用于创建容器网卡的子网的IPv4子网ID。\n**约束限制:**\n暂不支持IPv6\n**取值范围:**\n不涉及\n**默认取值:**\n不涉及\n\n获取方法如下:\n\n- 方法1:登录虚拟私有云服务的控制台界面,单击VPC下的子网,进入子网详情页面,查找IPv4子网ID。\n- 方法2:通过虚拟私有云服务的查询子网列表接口查询。\n链接请参见[查询子网列表](https://support.huaweicloud.com/api-vpc/vpc_subnet01_0003.html)。","pattern":"^[0-9a-z]{8}-[0-9a-z]{4}-[0-9a-z]{4}-[0-9a-z]{4}-[0-9a-z]{12}$","type":"string"}},"required":["subnetID"]},"PackageConfiguration":{"properties":{"configurations":{"description":"组件配置项","items":{"$ref":"#/definitions/ConfigurationItem"},"type":"array"},"name":{"description":"组件名称","type":"string"}},"type":"object"},"ResourceTag":{"description":"CCE资源标签","properties":{"key":{"description":"**参数解释:**\nKey值。\n**约束限制:**\n不涉及\n**取值范围:**\n- 不能为空且首尾不能包含空格,最多支持128个字符\n- 可用UTF-8格式表示的任意语种字母、数字和空格\n- 支持部分特殊字符:_.:=+-@\n- 不能以\"\\_sys\\_\"开头\n\n**默认取值:**\n不涉及","maxLength":128,"minLength":1,"type":"string"},"value":{"description":"Value值。\n- 可以为空但不能缺省,最多支持255个字符\n- 可用UTF-8格式表示的汉字、字母、数字和空格\n- 支持部分特殊字符:_.:/=+-@","maxLength":255,"type":"string"}}},"ServiceNetwork":{"properties":{"IPv4CIDR":{"description":"kubernetes clusterIP IPv4 CIDR取值范围。创建集群时若未传参,默认为\"10.247.0.0/16\"。","type":"string"}}}},"description":null,"group_id":"394aeee55c894cd89bc6a709f45ae609","host":"cce.cn-north-4.myhuaweicloud.com","id":"2d4c00b1f5984be48cde487dbb2c32e6","info_version":"v3","method":"post","name":"CreateCluster","parameters":{"param_header_content_type":{"default":"application/json","description":"消息体的类型(格式)","in":"header","name":"Content-Type","required":true,"type":"string","x-order":51},"param_header_x_auth_token":{"description":"调用接口的认证方式分为Token和AK/SK两种,如果您使用的Token方式,此参数为必填,请填写Token的值,获取方式请参见[获取token](cce_02_0004.xml)。","in":"header","maxLength":16384,"name":"X-Auth-Token","required":true,"type":"string","x-order":52},"param_path_projectid":{"description":"项目ID,获取方式请参见[如何获取接口URI中参数](cce_02_0271.xml)。","in":"path","name":"project_id","required":true,"type":"string","x-order":1}},"paths":{"/api/v3/projects/{project_id}/clusters":{"post":{"consumes":["application/json"],"deprecated":false,"description":"该API用于创建一个空集群(即只有控制节点Master,没有工作节点Node)。请在调用本接口完成集群创建之后,通过[创建节点](cce_02_0242.xml)添加节点。\n\n\n>   - 集群管理的URL格式为:https://Endpoint/uri。其中uri为资源路径,也即API访问的路径。\n>   - 调用该接口创建集群时,默认不安装ICAgent,若需安装ICAgent,可在请求Body参数的annotations中加入\"cluster.install.addons.external/install\":\"[{\"addonTemplateName\":\"icagent\"}]\"的集群注解,将在创建集群时自动安装ICAgent。ICAgent是应用性能管理APM的采集代理,运行在应用所在的服务器上,用于实时采集探针所获取的数据,安装ICAgent是使用应用性能管理APM的前提。","operationId":"CreateCluster","parameters":[{"$ref":"#/parameters/param_path_projectid"},{"$ref":"#/parameters/param_header_content_type"},{"$ref":"#/parameters/param_header_x_auth_token"},{"description":"集群规格信息请求体","in":"body","name":"CreateClusterRequestBody","required":true,"schema":{"$ref":"#/definitions/Cluster"},"x-order":500}],"produces":["application/json"],"responses":{"201":{"description":"表示创建集群作业下发成功。","examples":{"application/json":{"apiVersion":"v3","kind":"Cluster","metadata":{"alias":"cluster","annotations":{"jobid":"bd42f724-87f3-11ec-b5e5-0255ac101514","resourceJobId":"bce99f78-87f3-11ec-b5e5-0255ac101514"},"creationTimestamp":"2022-02-07 08:55:45.785425492 +0000 UTC","name":"cluster","uid":"bce956e1-87f3-11ec-b5e5-0255ac101514","updateTimestamp":"2022-02-07 08:55:45.78542824 +0000 UTC"},"spec":{"authentication":{"authenticatingProxy":{},"mode":"rbac"},"billingMode":0,"category":"CCE","containerNetwork":{"cidr":"10.0.0.0/16","cidrs":[{"cidr":"10.0.0.0/16"}],"mode":"vpc-router"},"eniNetwork":{},"extendParam":{"alpha.cce/fixPoolMask":"25","enterpriseProjectId":"0","kubeProxyMode":"iptables","orderID":""},"flavor":"cce.s2.small","hostNetwork":{"subnet":"ca964acf-8468-4735-8229-97940ef6c881","vpc":"030bfb19-5fa7-42ad-8a0d-c0721d268867"},"kubeProxyMode":"iptables","kubernetesSvcIpRange":"10.247.0.0/16","platformVersion":"cce.5.0","type":"VirtualMachine","version":"v1.19.10-r0"},"status":{"jobID":"bd42f724-87f3-11ec-b5e5-0255ac101514","phase":"Creating"}}},"schema":{"$ref":"#/definitions/Cluster"}}},"summary":"创建集群","tags":["集群管理"],"x-api-category":"cce","x-apiexplorer-hide":"false","x-constraint":"调用CCE接口创建集群之前,请检查是否已满足如下条件:\n\n- 创建集群之前,您必须先确保已存在**虚拟私有云**,否则无法创建集群。若您已有虚拟私有云,可重复使用,无需重复创建。虚拟私有云为CCE集群提供一个隔离的、用户自主配置和管理的虚拟网络环境。若您没有虚拟私有云,请先进行创建,详情请参见[创建VPC](https://support.huaweicloud.com/api-vpc/vpc_api01_0001.html)\n\n- 创建集群之前,请提前规划好容器网段和服务网段。网段参数在集群创建后不可更改,需要重新创建集群才能调整,请谨慎选择。\n\n- 请确保已正确创建委托,并确保委托未被删除,委托校验失败将导致集群创建失败。建议登录CCE控制台,如没有创建委托,会提示您创建,如已经创建则无提示。\n\n- 默认情况下,一个帐户只能创建5个集群(每个Region下),如果您需要创建更多的集群,请申请增加配额。详情请参见[如何申请扩大配额](https://support.huaweicloud.com/cce_faq/cce_faq_00154.html#section2)","x-is-registered":"Y","x-name":"创建集群","x-open-region-cloud":"hws,hws_hk,sbc,hk_sbc,ctc,cmcc,g42,tm,hk_tm,hk_g42,hcso,hcs,ocb,hws_ocb,hws_eu,hcso_dt,dt","x-order":1,"x-publishpath":"cce_02_0236","x-request-examples-1":{"apiVersion":"v3","kind":"Cluster","metadata":{"name":"cluster"},"spec":{"authentication":{"mode":"rbac"},"billingMode":0,"category":"CCE","containerNetwork":{"cidr":"10.0.0.0/16","mode":"vpc-router"},"description":"","extendParam":{"alpha.cce/fixPoolMask":"25","enterpriseProjectId":"0","kubeProxyMode":"iptables"},"flavor":"cce.s2.small","hostNetwork":{"subnet":"ca964acf-8468-4735-8229-97940ef6c881","vpc":"030bfb19-5fa7-42ad-8a0d-c0721d268867"},"ipv6enable":false,"kubernetesSvcIpRange":"10.247.0.0/16","version":"v1.19"}},"x-request-examples-2":{"apiVersion":"v3","kind":"Cluster","metadata":{"annotations":{"cluster.install.addons.external/install":"[{\"addonTemplateName\":\"icagent\"}]"},"name":"cluster"},"spec":{"authentication":{"mode":"rbac"},"billingMode":0,"category":"CCE","containerNetwork":{"cidr":"10.0.0.0/16","mode":"vpc-router"},"description":"","extendParam":{"alpha.cce/fixPoolMask":"25","enterpriseProjectId":"0","kubeProxyMode":"iptables"},"flavor":"cce.s2.small","hostNetwork":{"subnet":"ca964acf-8468-4735-8229-97940ef6c881","vpc":"030bfb19-5fa7-42ad-8a0d-c0721d268867"},"ipv6enable":false,"kubernetesSvcIpRange":"10.247.0.0/16","version":"v1.19"}},"x-request-examples-3":{"apiVersion":"v3","kind":"Cluster","metadata":{"name":"cluster"},"spec":{"authentication":{"mode":"rbac"},"billingMode":0,"category":"CCE","containerNetwork":{"cidr":"10.0.0.0/16","mode":"vpc-router"},"description":"","extendParam":{"alpha.cce/fixPoolMask":"25","enterpriseProjectId":"0","kubeProxyMode":"iptables"},"flavor":"cce.s2.small","hostNetwork":{"SecurityGroup":"a4ef108c-2ec6-492f-a6c4-7b64e25ae490","subnet":"ca964acf-8468-4735-8229-97940ef6c881","vpc":"030bfb19-5fa7-42ad-8a0d-c0721d268867"},"ipv6enable":false,"kubernetesSvcIpRange":"10.247.0.0/16","version":"v1.19"}},"x-request-examples-4":{"apiVersion":"v3","kind":"Cluster","metadata":{"name":"cluster"},"spec":{"authentication":{"mode":"rbac"},"billingMode":0,"category":"Turbo","containerNetwork":{"mode":"eni"},"description":"","eniNetwork":{"eniSubnetCIDR":"192.168.0.0/24","eniSubnetId":"861fb11d-2f0e-4c10-a98a-166dc26e4ff7","subnets":[{"subnetID":"861fb11d-2f0e-4c10-a98a-166dc26e4ff7"}]},"extendParam":{"enterpriseProjectId":"0","kubeProxyMode":"iptables"},"flavor":"cce.s2.small","hostNetwork":{"subnet":"ca964acf-8468-4735-8229-97940ef6c881","vpc":"030bfb19-5fa7-42ad-8a0d-c0721d268867"},"ipv6enable":false,"serviceNetwork":{"IPv4CIDR":"10.247.0.0/16"},"type":"VirtualMachine","version":"v1.25"}},"x-request-examples-description-1":"创建一个v1.19版本的CCE集群,[计费模式为按需计费,](tag:hws,hws_hk)集群规模为50节点,且为高可用集群。\n","x-request-examples-description-2":"创建一个v1.19版本的CCE集群,[计费模式为按需计费,](tag:hws,hws_hk)集群规模为50节点,且为高可用集群,并在集群中安装ICAgent。\n","x-request-examples-description-3":"创建一个v1.19版本的CCE集群,[计费模式为按需计费,](tag:hws,hws_hk)集群规模为50节点,且为高可用集群,并指定自定义的节点默认安全组。 \n","x-request-examples-description-4":"创建一个v1.25版本的CCE Turbo集群,[计费模式为按需计费,](tag:hws,hws_hk)集群规模为50节点,且为高可用集群。\n","x-request-examples-url-1":"/api/v3/projects/{project_id}/clusters","x-request-examples-url-2":"/api/v3/projects/{project_id}/clusters","x-request-examples-url-3":"/api/v3/projects/{project_id}/clusters","x-request-examples-url-4":"/api/v3/projects/{project_id}/clusters","x-scope":"Commercial","x-support-sdk":"Y"}}},"product_short":"CCE","region_id":"cn-north-4","schemes":["HTTPS"],"security_definitions":null,"summary":"创建集群","tags":"集群管理","uri":null,"version":"2.0"}