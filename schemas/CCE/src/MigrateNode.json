{"base_path":"/","components":null,"consumes":"[\"application/json\"]","definitions":{"Login":{"properties":{"sshKey":{"description":"选择密钥对方式登录时的密钥对名称。","type":"string"},"userPassword":{"$ref":"#/definitions/UserPassword","description":"选择密码方式登录时的帐号密码信息,之后可通过此帐号密码登录节点。","x-open-region-cloud":"hws,hws_hk,sbc,hk_sbc,ctc,cmcc,g42,tm,hk_tm,hk_g42,hcso,hcs"}}},"MigrateNodeExtendParam":{"properties":{"DockerLVMConfigOverride":{"description":"Docker数据盘配置项(已废弃,请使用storage字段)。\n\n待迁移节点的磁盘类型须和创建时一致(即“DockerLVMConfigOverride”参数中“diskType”字段的值须和创建时一致),请确保单次接口调用时批量选择的节点磁盘类型一致。\n\n默认配置示例如下:\n\n```\n\"DockerLVMConfigOverride\":\"dockerThinpool=vgpaas/90%VG;kubernetesLV=vgpaas/10%VG;diskType=evs;lvType=linear\"\n```\n\n包含如下字段:\n  - userLV(可选):用户空间的大小,示例格式:vgpaas/20%VG\n  - userPath(可选):用户空间挂载路径,示例格式:/home/wqt-test\n  - diskType:磁盘类型,目前只有evs、hdd和ssd三种格式\n  - lvType:逻辑卷的类型,目前支持linear和striped两种,示例格式:striped\n  - dockerThinpool:Docker盘的空间大小,示例格式:vgpaas/60%VG\n  - kubernetesLV:Kubelet空间大小,示例格式:vgpaas/20%VG","type":"string"},"alpha.cce/NodeImageID":{"description":"指定待切换目标操作系统所使用的用户镜像ID。\n当指定“alpha.cce/NodeImageID”参数时,“os”参数必须和用户自定义镜像的操作系统一致。","type":"string"},"alpha.cce/postInstall":{"description":"安装后执行脚本\n> 输入的值需要经过Base64编码,方法为echo -n \"待编码内容\" | base64。","maxLength":2048,"type":"string"},"alpha.cce/preInstall":{"description":"安装前执行脚本\n> 输入的值需要经过Base64编码,方法为echo -n \"待编码内容\" | base64。","maxLength":2048,"type":"string"},"maxPods":{"description":"节点最大允许创建的实例数(Pod),该数量包含系统默认实例,取值范围为16~256。\n该设置的目的为防止节点因管理过多实例而负载过重,请根据您的业务需要进行设置。","format":"int32","type":"integer"}}},"MigrateNodesSpec":{"properties":{"extendParam":{"$ref":"#/definitions/MigrateNodeExtendParam","description":"迁移节点时的扩展参数"},"login":{"$ref":"#/definitions/Login","description":"节点的登录方式。密钥对和密码登录方式二者必选其一。"},"nodes":{"description":"待操作节点列表","items":{"$ref":"#/definitions/NodeItem"},"type":"array"},"os":{"description":"操作系统类型,须精确到版本号。\n当指定“alpha.cce/NodeImageID”参数时,“os”参数必须和用户自定义镜像的操作系统一致。","type":"string"},"runtime":{"$ref":"#/definitions/Runtime","description":"容器运行时"}},"required":["os","login","nodes"]},"MigrateNodesTask":{"properties":{"apiVersion":{"description":"API版本,固定值“v3”。","type":"string"},"kind":{"description":"API类型,固定值“MigrateNodesTask”。","type":"string"},"spec":{"$ref":"#/definitions/MigrateNodesSpec","description":"配置信息"},"status":{"$ref":"#/definitions/TaskStatus","description":"任务状态"}},"required":["spec"]},"NodeItem":{"properties":{"uid":{"description":"节点ID","type":"string"}},"required":["uid"]},"Runtime":{"properties":{"name":{"description":"容器运行时,默认场景:\n- v1.25以下集群:默认为\"docker\"\n- v1.25及以上集群,随操作系统变化,默认的容器运行时不同:操作系统为EulerOS 2.5、EulerOS 2.8的节点默认为\"docker\",其余操作系统的节点默认为\"containerd\"","enum":["docker","containerd"],"type":"string"}}},"TaskStatus":{"properties":{"jobID":{"description":"任务ID,供调用者查询任务进度。","type":"string"}}},"UserPassword":{"properties":{"password":{"description":"登录密码,若创建节点通过用户名密码方式,即使用该字段,则响应体中该字段作屏蔽展示。\n密码复杂度要求:\n- 长度为8-26位。\n- 密码至少必须包含大写字母、小写字母、数字和特殊字符(!@$%^-_=+[{}]:,./?~#*)中的三种。\n- 密码不能包含用户名或用户名的逆序。\n创建节点时password字段需要加盐加密,具体方法请参见[创建节点时password字段加盐加密](add-salt.xml)。","type":"string"},"username":{"default":"root","description":"登录帐号,默认为“root”","type":"string"}},"required":["password"]}},"description":null,"group_id":"394aeee55c894cd89bc6a709f45ae609","host":"cce.cn-north-4.myhuaweicloud.com","id":"96e32aec811047baac77689b2ff65504","info_version":"v3","method":"put","name":"MigrateNode","parameters":{"param_header_content_type":{"default":"application/json","description":"消息体的类型(格式)","in":"header","name":"Content-Type","required":true,"type":"string","x-order":51},"param_header_x_auth_token":{"description":"调用接口的认证方式分为Token和AK/SK两种,如果您使用的Token方式,此参数为必填,请填写Token的值,获取方式请参见[获取token](cce_02_0004.xml)。","in":"header","maxLength":16384,"name":"X-Auth-Token","required":true,"type":"string","x-order":52},"param_path_clusterid":{"description":"集群ID,获取方式请参见[如何获取接口URI中参数](cce_02_0271.xml)。","in":"path","name":"cluster_id","pattern":"^[0-9a-z]{8}-[0-9a-z]{4}-[0-9a-z]{4}-[0-9a-z]{4}-[0-9a-z]{12}$","required":true,"type":"string","x-order":2},"param_path_projectid":{"description":"项目ID,获取方式请参见[如何获取接口URI中参数](cce_02_0271.xml)。","in":"path","name":"project_id","required":true,"type":"string","x-order":1},"param_path_target_cluster_id":{"description":"集群ID,获取方式请参见[如何获取接口URI中参数](cce_02_0271.xml)。","in":"path","name":"target_cluster_id","pattern":"^[0-9a-z]{8}-[0-9a-z]{4}-[0-9a-z]{4}-[0-9a-z]{4}-[0-9a-z]{12}$","required":true,"type":"string","x-order":6}},"paths":{"/api/v3/projects/{project_id}/clusters/{cluster_id}/nodes/operation/migrateto/{target_cluster_id}":{"put":{"consumes":[],"deprecated":false,"description":"该API用于在指定集群下迁移节点到另一集群。\n\n>集群管理的URL格式为:https://Endpoint/uri。其中uri为资源路径,也即API访问的路径。","operationId":"MigrateNode","parameters":[{"$ref":"#/parameters/param_path_projectid"},{"$ref":"#/parameters/param_path_clusterid"},{"$ref":"#/parameters/param_path_target_cluster_id"},{"$ref":"#/parameters/param_header_content_type"},{"$ref":"#/parameters/param_header_x_auth_token"},{"description":"迁移节点的请求体","in":"body","name":"MigrateNodesTask","required":true,"schema":{"$ref":"#/definitions/MigrateNodesTask"}}],"produces":[],"responses":{"200":{"description":"表示在指定集群下迁移节点至另一集群的作业下发成功。","examples":{"application/json":{"spec":{"login":{"sshKey":"KeyPair-001"},"nodes":[{"uid":"xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx"},{"uid":"yyyyyyyy-yyyy-yyyy-yyyy-yyyyyyyyyyyy"}],"os":"EulerOS 2.5","runtime":{"name":"docker"}},"status":{"jobID":"2ec9b78d-9368-46f3-8f29-d1a95622a568"}}},"schema":{"$ref":"#/definitions/MigrateNodesTask"}}},"summary":"节点迁移","tags":["节点管理"],"x-api-category":"cce","x-apiexplorer-hide":"false","x-constraint":"- 仅支持在同一VPC、同一项目下的不同集群间进行迁移。\n- CCE Turbo集群和CCE Standard集群间不支持互迁。\n- DEC集群和非DEC集群间不支持互迁。\n- 开启IPv6开关和未开启IPv6开关的集群间不支持互迁。\n- 只支持迁移到目标集群的默认节点池内。\n- \n- CCE Turbo集群下弹性云服务器-物理机类型节点不支持迁移。","x-is-registered":"Y","x-name":"迁移节点","x-open-region-cloud":"hws,hws_hk,sbc,hk_sbc,ctc,cmcc,g42,hk_g42,hcso,hcs,hws_eu,hcso_dt,dt","x-publishpath":"","x-request-examples-1":{"spec":{"login":{"sshKey":"KeyPair-001"},"nodes":[{"uid":"xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx"},{"uid":"yyyyyyyy-yyyy-yyyy-yyyy-yyyyyyyyyyyy"}],"os":"EulerOS 2.5"}},"x-request-examples-2":{"spec":{"extendParam":{"alpha.cce/NodeImageID":"cc697ad7-9563-11e8-8ea7-0255ac106311"},"login":{"sshKey":"KeyPair-001"},"nodes":[{"uid":"xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx"},{"uid":"yyyyyyyy-yyyy-yyyy-yyyy-yyyyyyyyyyyy"}],"os":"EulerOS 2.5"}},"x-request-examples-description-1":"迁移一个节点到另一个集群中,且节点操作系统为EulerOS 2.5。","x-request-examples-description-2":"迁移一个节点到另一个集群中,且节点操作系统为EulerOS 2.5,并指定用户镜像ID。","x-request-examples-url-1":"PUT /api/v3/projects/{project_id}/clusters/{cluster_id}/nodes/operation/migrateto/{target_cluster_id}","x-request-examples-url-2":"PUT /api/v3/projects/{project_id}/clusters/{cluster_id}/nodes/operation/migrateto/{target_cluster_id}","x-scope":"Commercial","x-support-sdk":"Y"}}},"product_short":"CCE","region_id":"cn-north-4","schemes":["HTTPS"],"security_definitions":null,"summary":"节点迁移","tags":"节点管理","uri":null,"version":"2.0"}