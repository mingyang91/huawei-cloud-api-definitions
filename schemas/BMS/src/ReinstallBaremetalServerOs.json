{"base_path":"/","components":null,"consumes":"[\"application/json;charset=UTF-8\"]","definitions":{"Error":{"description":"提交任务异常时返回的异常信息","properties":{"code":{"description":"任务异常错误信息编码","type":"string"},"message":{"description":"任务异常错误信息描述","type":"string"}}},"FailedRsp":{"description":"FailedRsp","properties":{"error":{"$ref":"#/definitions/Error","description":"提交任务异常时返回的异常信息"}}},"JobRsp":{"description":"JOB ID","properties":{"job_id":{"description":"提交任务成功后返回的任务ID,用户可以使用该ID对任务执行情况进行查询","type":"string"}},"required":["job_id"]},"MetadataInstall":{"description":"metadata字段数据结构说明","properties":{"__system__cmkid":{"description":"metadata中的加密cmkid字段,与__system__encrypted配合表示需要加密,cmkid长度固定为36个字节。\n\n> 说明:\n\n- 请参考[查询密钥列表](https://support.huaweicloud.com/api-dew/ListKeys.html),通过HTTPS请求获取密钥ID。","example":"1189efbf-d48b-46ad-a823-94b942e2a000","type":"string"},"__system__encrypted":{"default":"0","description":"metadata中的表示加密功能的字段,0代表不加密,1代表加密。\n\n该字段不存在时,云硬盘默认为不加密。","example":"0","type":"string"},"user_data":{"description":"重装裸金属服务器过程中注入Linux镜像root密码,用户自定义初始化密码。注:修改密码脚本需经Base64编码。建议密码复杂度如下:长度为8-26位。密码至少必须包含大写字母(A-Z)、小写字母(a-z)、数字(0-9)和特殊字符(!@$%^-_=+[{}]:,./?)中的三种","type":"string"}}},"OsReinstall":{"description":" os-reinstall字段数据结构说明","properties":{"adminpass":{"description":"裸金属服务器管理员帐号的初始登录密码。其中,Linux管理员帐户为root,Windows管理员帐户为Administrator。建议密码复杂度如下:长度为8-26位。密码至少必须包含大写字母、小写字母、数字和特殊字符(!@$%^-_=+[{}]:,./?)中的三种。密码不能包含用户名或用户名的逆序。 说明:对于Windows裸金属服务器,不能包含用户名中超过两个连续字符的部分。对于Linux裸金属服务器也可使用user_data字段实现密码注入,此时adminpass字段无效。adminpass和keyname不能同时有值。adminpass和keyname如果同时为空,此时,metadata中的user_data属性必须有值。","format":"password","pattern":"[A-Za-z0-9!@$%^-_=+[{}]:,./?]*$","type":"string","x-maxLength":26,"x-minLength":8},"keyname":{"description":"密钥名称。密钥可以通过7.10.3-创建和导入SSH密钥(OpenStack原生)API创建,或者使用7.10.1-查询SSH密钥列表(OpenStack原生)API查询已有的密钥。","type":"string"},"metadata":{"$ref":"#/definitions/MetadataInstall","description":"重装裸金属服务器的元数据。详情请参见表 metadata字段数据结构说明。"},"userid":{"description":"用户ID(登录管理控制台,进入我的凭证,即可看到“用户ID”)。","type":"string"}}},"OsReinstallBody":{"description":"重装裸金属服务器操作系统接口请求结构体","properties":{"os-reinstall":{"$ref":"#/definitions/OsReinstall","description":"标记为重装裸金属服务器操作"}},"required":["os-reinstall"]}},"description":null,"group_id":"d5d01a1b3fe74f92969f750cb27d6842","host":"bms.cn-north-4.myhuaweicloud.com","id":"85e56f7732634bb3853c0408092a1c5f","info_version":"v1","method":"post","name":"ReinstallBaremetalServerOs","parameters":{},"paths":{"/v1/{project_id}/baremetalservers/{server_id}/reinstallos":{"post":{"consumes":[],"deprecated":false,"description":"重装裸金属服务器的操作系统。快速发放裸金属服务器支持裸金属服务器数据盘不变的情况下,使用原镜像重装系统盘。重装操作系统支持密码或者密钥注入","operationId":"ReinstallBaremetalServerOs","parameters":[{"description":"用户Token。通过调用IAM服务获取用户Token接口获取(响应消息头中X-Subject-Token的值)","in":"header","name":"X-Auth-Token","required":true,"type":"string","x-order":1},{"description":"项目ID","in":"path","name":"project_id","required":true,"type":"string","x-order":2},{"description":"裸金属服务器ID","in":"path","name":"server_id","required":true,"type":"string","x-order":3},{"description":"重装裸金属服务器操作系统接口请求结构体","in":"body","name":"OsReinstallBody","required":true,"schema":{"$ref":"#/definitions/OsReinstallBody"},"x-order":4}],"produces":[],"responses":{"200":{"description":"服务器已成功处理了请求","examples":{"application/json":{"job_id":"70a599e0-31e7-49b7-b260-868f441e862b"}},"schema":{"$ref":"#/definitions/JobRsp"}},"400":{"description":"服务器未能处理请求","schema":{"$ref":"#/definitions/FailedRsp"}},"401":{"description":"被请求的页面需要用户名和密码","schema":{"$ref":"#/definitions/FailedRsp"}},"403":{"description":"对被请求页面的访问被禁止","schema":{"$ref":"#/definitions/FailedRsp"}},"404":{"description":"服务器无法找到被请求的页面","schema":{"$ref":"#/definitions/FailedRsp"}},"405":{"description":"请求中指定的方法不被允许","schema":{"$ref":"#/definitions/FailedRsp"}},"406":{"description":"服务器生成的响应无法被客户端所接受","schema":{"$ref":"#/definitions/FailedRsp"}},"407":{"description":"用户必须首先使用代理服务器进行验证,这样请求才会被处理","schema":{"$ref":"#/definitions/FailedRsp"}},"408":{"description":"请求超出了服务器的等待时间","schema":{"$ref":"#/definitions/FailedRsp"}},"409":{"description":"由于冲突,请求无法被完成","schema":{"$ref":"#/definitions/FailedRsp"}},"500":{"description":"请求未完成。服务异常","schema":{"$ref":"#/definitions/FailedRsp"}},"501":{"description":"请求未完成。服务器不支持所请求的功能","schema":{"$ref":"#/definitions/FailedRsp"}},"502":{"description":"请求未完成。服务器从上游服务器收到一个无效的响应","schema":{"$ref":"#/definitions/FailedRsp"}},"503":{"description":"请求未完成。系统暂时异常","schema":{"$ref":"#/definitions/FailedRsp"}},"504":{"description":"网关超时","schema":{"$ref":"#/definitions/FailedRsp"}}},"summary":"重装裸金属服务器操作系统","tags":["裸金属服务器状态管理"],"x-constraint":"使用私有镜像创建的裸金属服务器,请确保已经安装了Cloud-init(Linux镜像)或Cloudbase-init(Windows镜像)。如使用未安装Cloud-init或Cloudbase-init的镜像,该接口不能注入密钥或密码。公共镜像默认已安装Cloud-init或Cloudbase-ini;执行重装操作系统任务时,请勿并行执行其他任务,否则可能会引起重装操作系统失败;关机状态或者重装操作系统失败的裸金属服务器,才能执行重装操作;目前Windows镜像不支持注入密码,Linux镜像的user_data为加密后的密码","x-ctc":"Y","x-first_open_time":"2019-07-30","x-flow_control_group":"bmsReinstallOSV1","x-hc":"Y","x-hk":"Y","x-hybridcloud":"false","x-in_cli":"","x-is-registered":"Y","x-is_calling":"Y","x-multi_tenant_flow_time":"1","x-multi_tenant_flow_value":"200","x-name":"重装裸金属服务器操作系统","x-obc":"Y","x-order":2,"x-otc":"Y","x-request-examples-1":{"os-reinstall":{"keyname":"KeyPair-350b","metadata":{"BYOL":"false","user_data":"IyEvYmluL2Jhc2gKZWNobyAncm9vdDokNiR0Y0pZamUkNGhhUHlNZFR4VWVHc2dTMWFmL1NsMm4vbXZzdy5wSFdjbTVBc084OWFhUFhGNXUvVnJ5OXJiYmZZSW45SmZac2k3SlRmd2Z6djJPbTBHRFZUZTd6RDEnIHwgY2hwYXNzd2QgLWU7"},"userid":"7e25b1da389f4697a79df3a0e5bd494e"}},"x-request-examples-text-1":"POST https://{BMS Endpoint}/v1/bbf1946d374b44a0a2a95533562ba954/baremetalservers/cf2a8b97-b5c6-47ef-9714-eb27adf26e5b/reinstallos\n{\n    \"os-reinstall\": {\n        \"keyname\": \"KeyPair-350b\",\n        \"userid\": \"7e25b1da389f4697a79df3a0e5bd494e\",\n        \"metadata\": {\n            \"BYOL\": \"false\",\n            \"user_data\": \"IyEvYmluL2Jhc2gKZWNobyAncm9vdDokNiR0Y0pZamUkNGhhUHlNZFR4VWVHc2dTMWFmL1NsMm4vbXZzdy5wSFdjbTVBc084OWFhUFhGNXUvVnJ5OXJiYmZZSW45SmZac2k3SlRmd2Z6djJPbTBHRFZUZTd6RDEnIHwgY2hwYXNzd2QgLWU7\"\n        }\n    }\n}","x-scope":"Commercial","x-source":"SelfDeveloped","x-support-sdk":"Y","x-tenant_flow_time":"1","x-tenant_flow_value":"50","x-timeout":"60s","x-tlf":"Y","x-un_cli":"","x-version":"v1"}}},"product_short":"BMS","region_id":"cn-north-4","schemes":["HTTPS"],"security_definitions":null,"summary":"重装裸金属服务器操作系统","tags":"裸金属服务器状态管理","uri":null,"version":"2.0"}