{"base_path":"/","components":null,"consumes":"[\"application/json;charset=UTF-8\"]","definitions":{"ActionResources":{"properties":{"resource_detail":{"$ref":"#/definitions/Secret"},"resource_id":{"description":"资源ID。","maxLength":36,"minLength":36,"type":"string"},"resource_name":{"description":"资源名称,默认为空字符串。","maxLength":255,"minLength":0,"type":"string"},"sys_tags":{"description":"系统标签列表,没有标签,数组默认为空","items":{"$ref":"#/definitions/SysTag"},"type":"array"},"tags":{"description":"标签列表,没有标签,数组默认为空。","items":{"$ref":"#/definitions/TagItem"},"maxItems":20,"minItems":1,"type":"array"}},"type":"object"},"Error":{"properties":{"error":{"$ref":"#/definitions/ErrorDetail","description":"错误信息返回体。"}},"type":"object"},"ErrorDetail":{"properties":{"error_code":{"description":"错误请求返回的错误码","maxLength":36,"minLength":3,"type":"string"},"error_msg":{"description":"错误请求返回的错误信息","maxLength":1024,"minLength":0,"type":"string"}}},"ListResourceByTagsResponse":{"properties":{"resources":{"description":"资源实例列表,详情请参见resource字段数据结构说明。","items":{"$ref":"#/definitions/ActionResources"},"maxItems":100,"minItems":0,"type":"array"},"total_count":{"description":"总记录数。","format":"int32","maximum":100,"minimum":0,"type":"integer"}},"type":"object"},"ListResourceInstancesRequestBody":{"properties":{"action":{"description":"操作标识(可设置为“filter”或者“count”)。\n - filter:表示过滤。\n - count:表示查询总条数。","maxLength":6,"minLength":5,"type":"string"},"limit":{"description":"查询记录数(“action”为“count”时,无需设置此参数),如果“action”为“filter”,默认为“10”。\nlimit的取值范围为“1-1000”。","maxLength":4,"minLength":0,"type":"string"},"matches":{"description":"搜索字段。\n - key为搜索的字段,目前仅支持搜索凭据名称,值为“resource_name”。\n - value为模糊匹配的值,最大长度为255个字符。为空返回空值。","items":{"$ref":"#/definitions/TagMatches"},"maxItems":10,"minItems":0,"type":"array"},"offset":{"description":"索引位置。从offset指定的下一条数据开始查询。查询第一页数据时,将查询前一页数据时响应体中的值带入此参数(“action”为“count”时,无需设置此参数)。如果“action”为“filter”,offset默认为“0”。\noffset必须为数字,不能为负数。","maxLength":4,"minLength":0,"type":"string"},"sequence":{"description":"请求消息序列号,36字节序列号。\n例如:919c82d4-8046-4722-9094-35c3c6524cff","maxLength":36,"minLength":0,"type":"string"},"tags":{"description":"标签列表,key和value键值对的集合。最多不超过10个。","items":{"$ref":"#/definitions/Tag"},"maxItems":10,"minItems":1,"type":"array"}},"required":["action"],"type":"object"},"Secret":{"description":"凭据对象。","properties":{"auto_rotation":{"description":"自动轮转\n\n取值:true 开启, false 关闭(默认)","example":"this is a demo secret auto rotation","type":"boolean"},"create_time":{"description":"凭据创建时间,时间戳,即从1970年1月1日至该时间的总秒数。","example":1581507580000,"format":"int64","maximum":13,"minimum":0,"type":"integer"},"description":{"description":"凭据的描述信息。","example":"凭据的描述。","maxLength":255,"minLength":0,"type":"string"},"enterprise_project_id":{"description":"企业项目ID","example":0,"maxLength":36,"minLength":1,"type":"string"},"event_subscriptions":{"description":"凭据订阅的事件列表,当前最大可订阅一个事件。当事件包含的基础事件触发时,通知消息将发送到事件对应的通知主题。","example":"pocEvent","items":{"description":"基础事件类型。","maxLength":32,"minLength":0,"type":"string"},"maxItems":1,"minItems":0,"type":"array"},"id":{"description":"凭据的资源标识符。","example":"2d1152f2-290d-4756-a1d2-e12c14992416","pattern":"^[0-9a-z]{8}-[0-9a-z]{4}-[0-9a-z]{4}-[0-9a-z]{4}-[0-9a-z]{12}$","type":"string"},"kms_key_id":{"description":"用于加密凭据值的KMS主密钥的ID值。","example":"0d0466b0-e727-4d9c-b35d-f84bb474a37f","pattern":"^[0-9a-z]{8}-[0-9a-z]{4}-[0-9a-z]{4}-[0-9a-z]{4}-[0-9a-z]{12}$","type":"string"},"name":{"description":"凭据名称。","example":"demo","pattern":"^[a-zA-Z0-9_-]{1,64}$","type":"string"},"next_rotation_time":{"description":"下一次轮转时间戳","example":"this is a demo secret next rotation time","format":"int64","maximum":13,"minimum":0,"type":"integer"},"rotation_config":{"description":"轮转配置\n\n约束:范围不超过1024个字符。\n\n当secret_type为RDS-FG、GaussDB-FG时,配置为{\"InstanceId\":\"\",\"SecretSubType\":\"\"}\n\n说明:当secret_type为RDS-FG、GaussDB-FG时,必须填写该值\n\nInstanceId为实例ID,SecretSubType为轮转子类型,取值为:SingleUser,MultiUser。\n\nSingleUser:指定轮转类型为单用户模式轮转,每次轮转将指定账号重置为新的口令。\n\nMultiUser:指定轮转类型为双用户模式轮转,SYSCURRENT和SYSPREVIOUS分别引用其中一个账号。凭据轮转时,SYSPREVIOUS引用的账号口令会被重置为新的随机口令,随后凭据交换SYSCURRENT和SYSPREVIOUS对账号的引用。","example":{"InstanceId":"63616bceef2c45409575d762a498318bin01","SecretSubType":"MultiUser"},"maxLength":1024,"minLength":0,"type":"string"},"rotation_func_urn":{"description":"FunctionGraph函数的urn。","example":"urn:fss:{region}:46b6f338fc3445b8846c71dfb1fbxxxx:function:default:test2-0:latest","type":"string"},"rotation_period":{"description":"轮转周期\n\n约束:6小时-8,760小时 (365天)\n\n类型:Integer[unit] ,Integer表示时间长度 。unit表示时间单位,d(天)、h(小时)、m(分钟)、s(秒)。例如 1d 表示一天,24h也表示一天\n\n说明:当开启自动轮转时,必须填写该值","example":"this is a demo secret rotation period","maxLength":50,"minLength":0,"type":"string"},"rotation_time":{"description":"轮转时间戳","example":1679488984000,"format":"int64","maximum":13,"minimum":0,"type":"integer"},"scheduled_delete_time":{"description":"凭据计划删除时间,时间戳,即从1970年1月1日至该时间的总秒数。\n\n凭据不在删除计划中时,本项值为null。","example":1581507580000,"format":"int64","maximum":13,"minimum":0,"type":"integer"},"secret_type":{"description":"凭据类型\n\n- COMMON:通用凭据(默认)。用于应用系统中的各种敏感信息储存。\n- RDS:RDS凭据 。专门针对RDS的凭据,用于存储RDS的账号信息。(已不支持,使用RDS-FG替代)\n- RDS-FG:RDS凭据 。专门针对RDS的凭据,用于存储RDS的账号信息。\n- GaussDB-FG:GaussDB凭据。专门针对GaussDB的凭据,用于存储GaussDB的账号信息。","enum":["COMMON","RDS-FG","GaussDB-FG"],"example":"COMMON","type":"string"},"state":{"description":"凭据状态,取值如下:\n\nENABLED:表示启用状态\n\nDISABLED:表示禁用状态\n\nPENDING_DELETE:表示待删除状态\n\nFROZEN:表示冻结状态","example":1,"maxLength":8,"minLength":4,"type":"string"},"update_time":{"description":"凭据上次更新时间,时间戳,即从1970年1月1日至该时间的总秒数。","example":1581507580000,"format":"int64","maximum":13,"minimum":0,"type":"integer"}},"type":"object"},"SysTag":{"properties":{"key":{"description":"标签键。","maxLength":128,"minLength":1,"type":"string"},"value":{"description":"标签值。","maxLength":255,"minLength":0,"type":"string"}},"type":"object"},"Tag":{"properties":{"key":{"description":"标签键。","maxLength":128,"minLength":1,"type":"string"},"values":{"description":"标签值集合。\n\n约束:最多包含10个value。标签列表中的标签value值不允许重复。标签列表如果为空列表,表示匹配任意值。标签列表中多个value之间是“或”的关系,在key已经满足要求的前提下,满足请求中的某个value就会匹配出来。","items":{"maxLength":255,"minLength":0,"type":"string"},"maxItems":10,"minItems":0,"type":"array"}},"type":"object"},"TagItem":{"properties":{"key":{"description":"标签的名称。\n同一个凭据,一个标签键只能对应一个标签值;不同的凭据可以使用相同的标签键。\n用户最多可以给单个凭据添加20个标签。\n\n约束:取值范围为1到128个字符,满足正则匹配\"^((?!\\\\s)(?!_sys_)[\\\\p{L}\\\\p{Z}\\\\p{N}_.:=+\\\\-@]*)(?<!\\\\s)$\"","maxLength":128,"minLength":1,"type":"string"},"value":{"description":"标签的值。\n\n约束:取值范围不超过255个字符,满足正则匹配\"^([\\\\p{L}\\\\p{Z}\\\\p{N}_.:\\\\/=+\\\\-@]*)$\"","maxLength":255,"minLength":0,"type":"string"}},"required":["key"],"type":"object"},"TagMatches":{"properties":{"key":{"description":"为要匹配的字段。\n约束:值只能为resource_name。","maxLength":128,"minLength":1,"pattern":"resource_name","type":"string"},"value":{"description":"模糊匹配的值。\n\n约束:最大长度为255个字符,为空返回空值。","maxLength":255,"minLength":0,"type":"string"}},"type":"object"}},"description":null,"group_id":"2696b19762094c0393f47c92da7528c5","host":"kms.cn-north-4.myhuaweicloud.com","id":"0aa07a15604b4a52bb259649a58f7c96","info_version":"v1","method":"post","name":"ListResourceInstances","parameters":{},"paths":{"/v1/{project_id}/csms/{resource_instances}/action":{"post":{"description":"查询凭据实例。通过标签过滤,筛选用户凭据,返回凭据列表。","operationId":"ListResourceInstances","parameters":[{"description":"用户Token。\n\n通过调用IAM服务获取用户Token接口获取(响应消息头中X-Subject-Token的值)。","in":"header","maxLength":2097152,"minLength":1,"name":"X-Auth-Token","required":true,"type":"string","x-example":"MIIDkgYJKoZIhvcNAQcCoIIDgzCCXXXXX..."},{"description":"定值为resource_instances。","in":"path","maxLength":18,"minLength":18,"name":"resource_instances","required":true,"type":"string","x-example":"resource_instances"},{"description":"项目ID","in":"path","maxLength":32,"minLength":32,"name":"project_id","required":true,"type":"string","x-example":"2b31ed520xxxxxxebedb6e57xxxxxxxx"},{"description":"action","in":"body","name":"ListResourceInstancesRequestBody","required":true,"schema":{"$ref":"#/definitions/ListResourceInstancesRequestBody"}}],"produces":["application/json"],"responses":{"200":{"description":"请求已成功","examples":{"application/json":{"resources":[{"resource_id":"2d1152f2-290d-4756-a1d2-e12c14992416"},{"resource_detail":{"create_time":1581507580000,"description":"","id":"2d1152f2-290d-4756-a1d2-e12c14992416","kms_key_id":"1213d410-ass1-1254-1a2d-3cca2sa2w554","name":"example_name","scheduled_delete_time":1581507580000,"state":"ENABLED","update_time":1581507580000}},{"tags":[{"key":"key1","value":"value1"},{"key":"key2","value":"value2"}]},{"sys_tags":null},{"resource_name":"example_name"}],"total_count":1}},"schema":{"$ref":"#/definitions/ListResourceByTagsResponse"}},"400":{"description":"请求参数有误","schema":{"$ref":"#/definitions/Error"}},"401":{"description":"被请求的页面需要用户名和密码","schema":{"$ref":"#/definitions/Error"}},"403":{"description":"认证失败","schema":{"$ref":"#/definitions/Error"}},"404":{"description":"资源不存在,资源未找到","schema":{"$ref":"#/definitions/Error"}},"500":{"description":"服务内部错误","schema":{"$ref":"#/definitions/Error"}},"502":{"description":"请求未完成。服务器从上游服务器收到一个无效的响应","schema":{"$ref":"#/definitions/Error"}},"504":{"description":"网关超时","schema":{"$ref":"#/definitions/Error"}}},"summary":"查询凭据实例","tags":["凭据标签管理"],"x-is-registered":"Y","x-request-examples-1":{"action":"filter","tags":[{"key":"key1","values":["val1"]}]},"x-request-examples-description-1":"通过标签过滤,筛选用户凭据,返回凭据列表。","x-request-examples-text-1":{"action":"filter","tags":[{"key":"key1","values":["val1"]}]},"x-support-sdk":"Y"}}},"product_short":"CSMS","region_id":"cn-north-4","schemes":["HTTPS"],"security_definitions":null,"summary":"查询凭据实例","tags":"凭据标签管理","uri":null,"version":"2.0"}