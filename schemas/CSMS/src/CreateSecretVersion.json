{"base_path":"/","components":null,"consumes":"[\"application/json;charset=UTF-8\"]","definitions":{"CreateSecretVersionRequestBody":{"description":"创建凭据版本请求体。","properties":{"expire_time":{"description":"凭据版本过期时间,时间戳,即从1970年1月1日至该时间的总秒数。默认为空,凭据订阅“版本过期”事件类型时,有效期判断所依据的值。","example":1581507580000,"format":"int64","maximum":9999999999999,"minimum":0,"type":"integer"},"secret_binary":{"description":"新创建凭据的凭据值,将其加密后,存入初始版本中。\n\n类型:base64编码的二进制数据对象。\n\n约束:secret_binary和secret_string必须且只能设置一个,最大32K。","example":"this is a demo secret binary","maxLength":32768,"minLength":0,"type":"string"},"secret_string":{"description":"新创建凭据的凭据值,将其加密后,存入初始版本中。\n\n约束:secret_binary和 secret_string必须且只能设置一个,最大32K。","example":"this is a demo secret string","maxLength":32768,"minLength":0,"type":"string"},"version_stages":{"description":"凭据版本在存入时需要被同时标记的版本状态。如果您不指定此参数,凭据管家默认为新版本标记SYSCURRENT\n\n约束:数组大小:最小1,最大12。stage长度:最小1字节,最大64字节。","example":"SYSCURRENT","items":{"description":"凭据版本在存入时需要被同时标记的版本状态。","maxLength":64,"minLength":1,"type":"string"},"maxItems":12,"minItems":0,"type":"array"}}},"CreateSecretVersionResponseBody":{"properties":{"version_metadata":{"$ref":"#/definitions/VersionMetadata"}}},"ErrorRsp":{"description":"失败时返回的错误对象","properties":{"error_code":{"description":"错误码","example":"CSMS.XXXX","maxLength":36,"minLength":8,"type":"string"},"error_msg":{"description":"错误描述","example":"XXXX","maxLength":512,"minLength":2,"type":"string"}},"required":["error_code","error_msg"]},"VersionMetadata":{"description":"凭据版本被标记的状态。","properties":{"create_time":{"description":"凭据版本创建时间,时间戳,即从1970年1月1日至该时间的总秒数。","example":1581507580000,"format":"int64","maximum":13,"minimum":0,"type":"integer"},"expire_time":{"description":"凭据版本过期时间,时间戳,即从1970年1月1日至该时间的总秒数。默认为空,凭据订阅“版本过期”事件类型时,有效期判断所依据的值。","example":1581507580000,"format":"int64","maximum":13,"minimum":0,"type":"integer"},"id":{"description":"凭据的版本号标识符,凭据对象下唯一。","example":"v1","pattern":"v[0-9]{1,10}","type":"string"},"kms_key_id":{"description":"加密版本凭据值的KMS主密钥ID。","example":"0d0466b0-e727-4d9c-b35d-f84bb474a37f","pattern":"^[0-9a-z]{8}-[0-9a-z]{4}-[0-9a-z]{4}-[0-9a-z]{4}-[0-9a-z]{12}$","type":"string"},"secret_name":{"description":"凭据名称。","example":"demo","pattern":"^[a-zA-Z0-9_-]{1,64}$","type":"string"},"version_stages":{"description":"凭据版本被标记的状态列表。每个版本标签对于凭据对象下版本是唯一存在的,如果创建版本时,指定的是同一凭据对象下的一个已经标记在其他版本上的状态,该标签将自动从其他版本上删除,并附加到此版本上。\n\n如果未指定version_stage的值,则凭据管理服务会自动移动临时标签SYSCURRENT到此新版本。","items":{"description":"凭据版本在存入时需要被同时标记的版本状态。","maxLength":64,"minLength":1,"type":"string"},"maxItems":12,"minItems":0,"type":"array"}},"type":"object"}},"description":null,"group_id":"2696b19762094c0393f47c92da7528c5","host":"kms.cn-north-4.myhuaweicloud.com","id":"f14d97eb0c3f4ad8a2b47796b34bf048","info_version":"v1","method":"post","name":"CreateSecretVersion","parameters":{},"paths":{"/v1/{project_id}/secrets/{secret_name}/versions":{"post":{"description":"在指定的凭据中,创建一个新的凭据版本,用于加密保管新的凭据值。默认情况下,新创建的凭据版本被标记为SYSCURRENT状态,而SYSCURRENT标记的前一个凭据版本被标记为SYSPREVIOUS状态。您可以通过指定VersionStage参数来覆盖默认行为。","operationId":"CreateSecretVersion","parameters":[{"description":"用户Token。\n\n通过调用IAM服务获取用户Token接口获取(响应消息头中X-Subject-Token的值)。","in":"header","maxLength":2097152,"minLength":32,"name":"X-Auth-Token","required":true,"type":"string","x-example":"MIIDkgYJKoZIhvcNAQcCoIIDgzCCXXXXX..."},{"description":"项目ID。","in":"path","maxLength":64,"minLength":32,"name":"project_id","required":true,"type":"string","x-example":"2b31ed520xxxxxxebedb6e57xxxxxxxx"},{"description":"凭据名称。","in":"path","name":"secret_name","pattern":"^[a-zA-Z0-9_-]{1,64}$","required":true,"type":"string","x-example":"secret-name-test"},{"description":"创建凭据请求消息体。","in":"body","name":"CreateSecretVersionRequestBody","required":true,"schema":{"$ref":"#/definitions/CreateSecretVersionRequestBody"}}],"produces":["application/json"],"responses":{"200":{"description":"请求已成功","examples":{"application/json":{"version_metadata":{"create_time":1581507580000,"id":"v1","kms_key_id":"b168fe00ff56492495a7d22974df2d0b","secret_name":"secret-name-demo","version_stages":["SYSCURRENT"]}}},"schema":{"$ref":"#/definitions/CreateSecretVersionResponseBody"}},"400":{"description":"请求参数有误","schema":{"$ref":"#/definitions/ErrorRsp"}},"401":{"description":"被请求的页面需要用户名和密码","schema":{"$ref":"#/definitions/ErrorRsp"}},"403":{"description":"认证失败","schema":{"$ref":"#/definitions/ErrorRsp"}},"404":{"description":"资源不存在,资源未找到","schema":{"$ref":"#/definitions/ErrorRsp"}},"500":{"description":"服务内部错误","schema":{"$ref":"#/definitions/ErrorRsp"}},"502":{"description":"请求未完成。服务器从上游服务器收到一个无效的响应","schema":{"$ref":"#/definitions/ErrorRsp"}},"504":{"description":"网关超时","schema":{"$ref":"#/definitions/ErrorRsp"}}},"summary":"创建凭据版本","tags":["凭据版本管理"],"x-constraint":"* 凭据管理服务console控制台仅使用secret_string字段。如果您想要添加二进制类型凭据到secret_binary字段中保存,必须使用SDK或API的方式。\n* 凭据管理服务的每个凭据中最多可支持20个版本。\n* 只能对处于ENABLED状态的凭据添加新的版本。\n* 每次存入新的凭据值时,凭据版本号按照为v1,v2,v3...的模式自动增加。","x-is-registered":"Y","x-order":0,"x-request-examples-1":{"secret_string":"secret_string"},"x-request-examples-description-1":"创建凭据版本,凭据值为secret_string。","x-request-examples-text-1":{"secret_string":"secret_string"},"x-support-sdk":"Y"}}},"product_short":"CSMS","region_id":"cn-north-4","schemes":["HTTPS"],"security_definitions":null,"summary":"创建凭据版本","tags":"凭据版本管理","uri":null,"version":"2.0"}