{"base_path":"/","components":null,"consumes":"","definitions":{"CbhListInfo":{"description":"CBH实例列表信息","properties":{"instance":{"$ref":"#/definitions/Instances"},"total":{"description":"云堡垒机实例总数。","format":"int32","maximum":100,"minimum":0,"type":"integer"}},"required":["total","instance"]},"ErrorRsp400":{"description":"请求参数错误。","example":{"description":"请求参数错误。","error_code":400},"properties":{"error_code":{"description":"错误码","maxLength":36,"minLength":0,"type":"string"},"error_description":{"description":"请求参数错误。","maxLength":512,"minLength":0,"type":"string"}},"required":["error_code","error_description"]},"ErrorRsp401":{"description":"校验TOKEN失败。","example":{"description":"校验TOKEN失败","error_code":401},"properties":{"error_code":{"description":"错误码","maxLength":36,"minLength":0,"type":"string"},"error_description":{"description":"校验TOKEN失败。","maxLength":512,"minLength":0,"type":"string"}},"required":["error_code","error_description"]},"ErrorRsp403":{"description":"租户无权限操作。","example":{"description":"租户无权限操作","error_code":403},"properties":{"error_code":{"description":"错误码","maxLength":36,"minLength":0,"type":"string"},"error_description":{"description":"租户无权限操作。","maxLength":512,"minLength":0,"type":"string"}},"required":["error_code","error_description"]},"ErrorRsp404":{"description":"没有找到CBH资源。","example":{"description":"没有找到CBH资源","error_code":404},"properties":{"error_code":{"description":"错误码","maxLength":36,"minLength":0,"type":"string"},"error_description":{"description":"没有找到CBH资源。","maxLength":512,"minLength":0,"type":"string"}},"required":["error_code","error_description"]},"InstanceDetail":{"description":"CBH实例详情","properties":{"alter_permit":{"description":"云堡垒机实例是否可以扩容。\n- true:是\n- false:否","type":"boolean"},"az_info":{"description":"可用区信息。","properties":{"availability_zone_display":{"description":"云堡垒机实例所在可用分区中文名称。(实例为主备模式时作为主机实例所在可用分区中文名称)","maxLength":36,"minLength":0,"type":"string"},"region":{"description":"云堡垒机实例所在可用区ID。","maxLength":36,"minLength":0,"type":"string"},"slave_zone":{"description":"云堡垒机备机实例所在可用区。","maxLength":36,"minLength":0,"type":"string"},"slave_zone_display":{"description":"云堡垒机备机实例所在可用区中文名称。","maxLength":36,"minLength":0,"type":"string"},"zone":{"description":"云堡垒机实例所在可用分区ID。(实例为主备模式时作为主机实例所在可用分区)","maxLength":36,"minLength":0,"type":"string"}},"required":["region","zone","availability_zone_display"]},"bastion_version":{"description":"云堡垒机实例当前版本。","maxLength":36,"minLength":0,"type":"string"},"created_time":{"description":"云堡垒机实例创建时间,使用UTC时间表示。","maxLength":12,"minLength":0,"type":"string"},"end_time":{"description":"云堡垒机实例结束时间,使用时间戳格式表示。","maxLength":12,"minLength":0,"type":"string"},"enterprise_project_id":{"description":"项目ID。","maxLength":36,"minLength":0,"type":"string"},"ha_info":{"description":"主备信息。","properties":{"ha_id":{"description":"主备ID。","maxLength":36,"minLength":0,"type":"string"},"instance_type":{"description":"实例类型。\n- master:主\n- slave:备","maxLength":36,"minLength":0,"type":"string"}},"required":["ha_id","instance_type"]},"instance_id":{"description":"云堡垒机实例id。","maxLength":36,"minLength":0,"type":"string"},"name":{"description":"云堡垒机实例名称。","maxLength":65,"minLength":1,"type":"string"},"network":{"description":"网络信息。","properties":{"private_ip":{"description":"云堡垒机实例私有ip。","maxLength":15,"minLength":0,"type":"string"},"public_id":{"description":"云堡垒机实例绑定公网的弹性IP的ID,UUID格式表示。","maxLength":36,"minLength":0,"type":"string"},"public_ip":{"description":"云堡垒机实例弹性公网IP。","maxLength":15,"minLength":0,"type":"string"},"security_group_id":{"description":"云堡垒机实例所属的安全组ID。","maxLength":36,"minLength":0,"type":"string"},"subnet_id":{"description":"云堡垒机实例所在子网ID。","maxLength":36,"minLength":0,"type":"string"},"vip":{"description":"云堡垒机实例浮动ip。(实例为主备模式时返回对应的值)","maxLength":36,"minLength":0,"type":"string"},"vpc_id":{"description":"云堡垒机实例所在虚拟私有云ID。","maxLength":36,"minLength":0,"type":"string"},"web_port":{"description":"云堡垒机实例WEB界面访问的端口号。","maxLength":36,"minLength":0,"type":"string"}},"required":["web_port","public_ip","public_id","private_ip","vpc_id","subnet_id","security_group_id"]},"period_num":{"description":"云堡垒机实例订购周期数。","maxLength":36,"minLength":0,"type":"string"},"resource_info":{"description":"资源信息。","properties":{"data_disk_size":{"description":"云堡垒机实例数据盘大小,单位TB。","maximum":300,"minimum":0,"type":"number"},"disk_resource_id":{"description":"云堡垒机实例数据盘资源ID。","items":{"maxLength":64,"minLength":0,"type":"string"},"maxItems":21,"minItems":0,"type":"array"},"order_id":{"description":"订单id。","maxLength":64,"minLength":0,"type":"string"},"resource_id":{"description":"云堡垒机实例的资源id,UUID格式显示。","maxLength":36,"minLength":0,"type":"string"},"specification":{"description":"云堡垒机实例规格。","maxLength":36,"minLength":0,"type":"string"}},"required":["specification","order_id","resource_id","data_disk_size","disk_resource_id"]},"server_id":{"description":"云堡垒机服务器id。","maxLength":64,"minLength":0,"type":"string"},"start_time":{"description":"云堡垒机实例开始时间,使用时间戳格式表示。","maxLength":12,"minLength":0,"type":"string"},"status_info":{"description":"状态信息。","properties":{"create_instance_status":{"description":"云堡垒机实例在创建实例过程中的状态信息。\n- Waiting for payment:等待支付\n- creating-network:创建网络\n- creating-server:创建服务\n- tranfering-horizontal-network:网络打通\n- adding-policy-route:添加路由策略\n- configing-dns:配置DNS\n- starting-cbs-service:服务运行中\n- setting-init-conf:初始化\n- buying-EIP:购买弹性公网IP","maxLength":36,"minLength":0,"type":"string"},"fail_reason":{"description":"云堡垒机实例创建实例失败原因。","maxLength":36,"minLength":0,"type":"string"},"instance_description":{"description":"云堡垒机实例信息描述。","maxLength":36,"minLength":0,"type":"string"},"instance_status":{"description":"云堡垒机实例状态。\n- building:创建中\n- deleting:删除中\n- deleted:删除了\n- unpaid:未支付\n- upgrading:升级中\n- resizing:扩容中\n- abnormal:异常\n- error:故障\n- ok:正常","maxLength":36,"minLength":0,"type":"string"},"status":{"description":"云堡垒机实例状态。\n- SHUTOFF:已关闭\n- ACTIVE:运行中\n- DELETING:删除中\n- BUILD:创建中\n- DELETED:已删除\n- ERROR:故障\n- HAWAIT:等待备机创建成功\n- FROZEN:已冻结\n- UPGRADING:升级中\n- UNPAID:待支付\n- RESIZE:规格变更中\n- DILATATION:扩容中\n- HA:配置HA中","maxLength":36,"minLength":0,"type":"string"},"task_status":{"description":"云堡垒机实例当前的任务状态。\n- powering-on:开启\n- powering-off:关闭\n- rebooting:重启\n- delete_wait:删除\n- frozen:冻结\n- NO_TASK:运行\n- unfrozen:解冻\n- alter:变更\n- updating:升级中\n- configuring-ha:配置HA\n- data-migrating:数据迁移中\n- rollback:版本回滚中\n- traffic-switchover:流量切换中","maxLength":36,"minLength":1,"type":"string"}},"required":["status","task_status","create_instance_status","instance_status","instance_description","fail_reason"]},"update":{"description":"云堡垒机实例是否可以升级。\n- OLD:当前已是最新版本\n- NEW:可以升级小版本\n- CROSS_OS:可以跨版本升级\n- ROLLBACK:可以回滚","enum":["OLD","NEW","CROSS_OS","ROLLBACK"],"maxLength":36,"minLength":0,"type":"string"},"upgrade_time":{"description":"云堡垒机实例升级定时时间,使用时间戳格式表示。","example":1701916110595,"format":"int64","maximum":9999999999999,"minimum":0,"type":"integer"}},"required":["name","server_id","instance_id","alter_permit","enterprise_project_id","period_num","start_time","end_time","created_time","update","bastion_version","az_info","status_info","resource_info","network"],"type":"object"},"Instances":{"description":"云堡垒机实例列表信息。","items":{"$ref":"#/definitions/InstanceDetail"},"maxItems":512,"minItems":0,"type":"array"}},"description":null,"group_id":"7ca682347ead4c1fb438ad170990cc74","host":"cbh.cn-north-4.myhuaweicloud.com","id":"982dfaf207f048a191d09b88a36a9312","info_version":"v2","method":"get","name":"ListInstances","parameters":{"X-Auth-Token":{"description":"用户Token。\n\n通过调用IAM服务获取用户Token接口获取(响应消息头中X-Subject-Token的值)。\n\nToken获取方法详见[获取用户Token](https://support.huaweicloud.com/api-iam/iam_30_0001.html)。","in":"header","maxLength":28000,"minLength":0,"name":"X-Auth-Token","required":true,"type":"string","x-example":"MIIE5gYJKoZIhvcNAQcCoIIE1zCCXXXXXX..."},"project_id":{"description":"项目ID。\n\n获取方法详见API参考,附录[获取项目ID](https://support.huaweicloud.com/api-cbh/cbh_02_0020.html)。","in":"path","maxLength":64,"minLength":0,"name":"project_id","required":true,"type":"string","x-example":"80baxxxxxxxxf9ad43xxxxxxxxx"}},"paths":{"/v2/{project_id}/cbs/instance/list":{"get":{"description":"获取当前租户下的堡垒机实例列表。","operationId":"ListInstances","parameters":[{"$ref":"#/parameters/project_id"},{"$ref":"#/parameters/X-Auth-Token"},{"description":"云堡垒机实例ID。(非必传,需要查询单个实例详情时传入)","in":"query","maximum":9223372036854775807,"minimum":0,"name":"instance_id","type":"number"}],"produces":["application/json"],"responses":{"200":{"description":"Cbh List Instance Success","examples":{"application/json":{"instance":[{"alter_permit":false,"az_info":{"availability_zone_display":"可用区1","region":"cn-north-7","slave_zone":"cn-north-7b","slave_zone_display":"可用区2","zone":"cn-north-7a"},"bastion_version":"3.3.49.0","created_time":"2023-08-17 12:05:02.0","end_time":1694966399000,"enterprise_project_id":"0","ha_info":{"ha_id":"332","instance_type":"master"},"instance_id":5473,"name":"CBH-e2b4","network":{"private_ip":"192.168.0.190","public_id":"56220ed7-0f75-4d42-85c4-013d5414c81c","public_ip":"100.xx.xx.1","security_group_id":"02dcf62d-b84d-4a14-aad3-c310f2ceea55","subnet_id":"dd08a6a9-ced7-484b-ace6-1b821854a772","vip":"192.168.0.228","vpc_id":"03211ecf-697e-4306-a7a0-6e939bf948de","web_port":"443"},"period_num":"1,2","resource_info":{"data_disk_size":200,"disk_resource_id":[],"order_id":"CS2308171141G8C14","resource_id":"c7a07a7f-e5ee-49cf-8355-aee46c5a4fcf","specification":"cbh.basic.5"},"server_id":"760aeee4-9916-436a-8854-837a9ae94b2b","start_time":1692245215000,"status_info":{"create_instance_status":"NO_TASK","fail_reason":"No FailReason Now","instance_description":",2023-08-21 15:19:07,{\"d_usage\":\"0.30\",\"m_usage\":\"43.66\",\"c_usage\":\"1.00\",\"session_count\":\"0\"","instance_status":"ok","status":"ACTIVE","task_status":"NO_TASK"},"update":false}],"total":1}},"schema":{"$ref":"#/definitions/CbhListInfo"}},"400":{"description":"Bad Request","schema":{"$ref":"#/definitions/ErrorRsp400"}},"401":{"description":"Unauthorized","schema":{"$ref":"#/definitions/ErrorRsp401"}},"403":{"description":"Forbidden","schema":{"$ref":"#/definitions/ErrorRsp403"}},"404":{"description":"Not Found","schema":{"$ref":"#/definitions/ErrorRsp404"}}},"summary":"获取堡垒机实例列表","tags":["操作管理"],"x-apigateway-ratelimit":"CBH_Server","x-is-registered":"Y","x-support-sdk":"Y"}}},"product_short":"CBH","region_id":"cn-north-4","schemes":["HTTPS"],"security_definitions":null,"summary":"获取堡垒机实例列表","tags":"操作管理","uri":null,"version":"2.0"}