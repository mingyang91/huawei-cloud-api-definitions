{"base_path":"/","components":null,"consumes":"[\"application/json;charset=UTF-8\"]","definitions":{"AlgorithmDetailDTO":{"description":"动态脱敏策略算法详情","properties":{"end":{"description":"结束位数,该值需要大于或等于start值。","format":"int32","maximum":9999,"minimum":0,"type":"integer"},"int_target":{"description":"数值类型。","format":"int32","maximum":9,"minimum":0,"type":"integer"},"start":{"description":"开始位数,该值需要大于0且小于end值。","format":"int32","maximum":9999,"minimum":0,"type":"integer"},"string_target":{"description":"字符串类型。可输入参数为\"*\"或者\"#\"。","maxLength":1,"minLength":1,"type":"string"}},"type":"object"},"DynamicMaskingPolicy":{"properties":{"algorithm_detail":{"description":"动态脱敏策略算法详情。","maxLength":128,"minLength":1,"type":"string"},"algorithm_detail_dto":{"$ref":"#/definitions/AlgorithmDetailDTO"},"algorithm_type":{"description":"具体动态脱敏规则参数介绍请参见[动态脱敏规则介绍](dataartsstudio_01_1036.html)。\nHIVE数据源动态脱敏算法\n- MASK 掩盖英文字符和数字\n- MASK_SHOW_LAST_4 保留后四位\n- MASK_SHOW_FIRST_4 保留前四位\n- MASK_HASH 哈希掩盖\n- MASK_DATE_SHOW_YEAR 掩盖月份和日期\n- MASK_NULL NULL掩盖\n\nDWS数据源动态脱敏算法\n- DWS_ALL_MASK 全掩码\n- DWS_BACK_KEEP 保留后4位,其余脱敏为*\n- DWS_FRONT_KEEP 保留前2位,其余脱敏为*\n- DWS_SELF_CONFIG 需要输入开始位置、结束位置、脱敏字符传入detail结构体中,例如{\"start\": 1, \"end\": 2, \"string_target\": \"*\"}\n\n\n- \n- \n- \n- \n- \n-","maxLength":64,"minLength":1,"type":"string"},"column_name":{"description":"数据表中的字段名称。","maxLength":128,"minLength":1,"type":"string"},"column_type":{"description":"数据表中字段的数据类型。","maxLength":128,"minLength":1,"type":"string"},"id":{"description":"字段脱敏策略id。","maxLength":32,"minLength":1,"type":"string"},"policy_set_id":{"description":"动态脱敏策略id。","maxLength":32,"minLength":1,"type":"string"},"sync_status":{"description":"同步状态:\n- UNKNOWN 未知状态\n- NOT_SYNC 未同步\n- SYNCING 同步中\n- SYNC_SUCCESS 同步成功\n- SYNC_FAIL 同步失败\n- SYNC_PARTIAL_FAIL 存在失败\n- DELETE_FAIL 删除失败\n- DELETING 删除中\n- UPDATING 更新中\n- DATA_UPDATED 数据存在更新","enum":["UNKNOWN","NOT_SYNC","SYNCING","SYNC_SUCCESS","SYNC_FAIL","SYNC_PARTIAL_FAIL","DELETE_FAIL","DELETING","UPDATING","DATA_UPDATED"],"maxLength":32,"minLength":1,"type":"string"}},"type":"object"},"DynamicMaskingPolicyCreate":{"properties":{"algorithm_detail":{"description":"动态脱敏策略算法详情。","maxLength":128,"minLength":1,"type":"string"},"algorithm_detail_dto":{"$ref":"#/definitions/AlgorithmDetailDTO"},"algorithm_type":{"description":"具体动态脱敏规则参数介绍请参见[动态脱敏规则介绍](dataartsstudio_01_1036.html)。\nHIVE数据源动态脱敏算法\n- MASK 掩盖英文字符和数字\n- MASK_SHOW_LAST_4 保留后四位\n- MASK_SHOW_FIRST_4 保留前四位\n- MASK_HASH 哈希掩盖\n- MASK_DATE_SHOW_YEAR 掩盖月份和日期\n- MASK_NULL NULL掩盖\n\nDWS数据源动态脱敏算法\n- DWS_ALL_MASK 全掩码\n- DWS_BACK_KEEP 保留后4位,其余脱敏为*\n- DWS_FRONT_KEEP 保留前2位,其余脱敏为*\n- DWS_SELF_CONFIG 需要输入开始位置、结束位置、脱敏字符传入detail结构体中,例如{\"start\": 1, \"end\": 2, \"string_target\": \"*\"}\n\n\n- \n- \n- \n- \n- \n-","maxLength":64,"minLength":1,"type":"string"},"column_name":{"description":"数据表中的字段名称。","maxLength":128,"minLength":1,"type":"string"},"column_type":{"description":"数据表中字段的数据类型。","maxLength":128,"minLength":1,"type":"string"}},"required":["column_name","column_type"],"type":"object"},"DynamicMaskingPolicyCreateDTO":{"properties":{"cluster_id":{"description":"集群id。请于集群管理页面查看集群ID信息。。","maxLength":128,"minLength":1,"type":"string"},"cluster_name":{"description":"集群名称。请于集群管理页面查看集群名称信息。。","maxLength":128,"minLength":1,"type":"string"},"conn_id":{"description":"数据连接id,获取方法请参见[查询数据连接列表](ListDataconnections.html)。","maxLength":128,"minLength":1,"type":"string"},"conn_name":{"description":"数据连接名称,获取方法请参见[查询数据连接列表](ListDataconnections.html)。","maxLength":100,"minLength":1,"type":"string"},"database_name":{"description":"数据库名称。获取方法请参见[获取数据源中的表](getDataTables.html)。","maxLength":128,"minLength":1,"type":"string"},"datasource_type":{"description":"数据源类型\n- HIVE数据源\n- DWS数据源\n-","enum":["HIVE","DWS","DLI"],"type":"string"},"name":{"description":"策略名称。英文和汉字开头, 支持英文、汉字、数字、下划线, 2-64字符。","maxLength":64,"minLength":2,"type":"string"},"policy_list":{"description":"动态数据脱敏策略列表。","items":{"$ref":"#/definitions/DynamicMaskingPolicyCreate"},"maxItems":100,"minItems":0,"type":"array"},"schema_name":{"description":"DWS数据源的模式名称。","maxLength":256,"minLength":0,"type":"string"},"table_id":{"description":"数据表id,获取方法请参见[获取数据源中的表](getDataTables.html)。","maxLength":128,"minLength":1,"type":"string"},"table_name":{"description":"数据表名称, 获取方法请参见[获取数据源中的表](getDataTables.html)。","maxLength":128,"minLength":1,"type":"string"},"user_groups":{"description":"用户组列表,用户组名称逗号分隔(非必填项,但用户、用户组必须二选其一进行配置)。例如:\"userGroup1,userGroup2\"。","maxLength":4096,"minLength":1,"type":"string"},"users":{"description":"用户列表,用户名称逗号分隔(非必填项,但用户、用户组必须二选其一进行配置),例如:\"user1,user2\"。","maxLength":4096,"minLength":1,"type":"string"}},"required":["name","datasource_type","cluster_id","cluster_name","database_name","table_name","conn_name","conn_id","policy_list"],"type":"object"},"DynamicMaskingPolicyDTO":{"properties":{"cluster_id":{"description":"集群id。请于集群管理页面查看集群ID信息。。","maxLength":128,"minLength":1,"type":"string"},"cluster_name":{"description":"集群名称。请于集群管理页面查看集群名称信息。。","maxLength":128,"minLength":1,"type":"string"},"conn_id":{"description":"数据连接id,获取方法请参见[查询数据连接列表](ListDataconnections.html)。","maxLength":128,"minLength":1,"type":"string"},"conn_name":{"description":"数据连接名称,获取方法请参见[查询数据连接列表](ListDataconnections.html)。","maxLength":100,"minLength":1,"type":"string"},"create_time":{"description":"策略创建时间。","format":"int64","maximum":4070880010000,"minimum":0,"type":"integer"},"create_user":{"description":"策略创建者。","maxLength":256,"minLength":0,"type":"string"},"database_name":{"description":"数据库名称。获取方法请参见[获取数据源中的表](getDataTables.html)。","maxLength":128,"minLength":1,"type":"string"},"datasource_type":{"description":"数据源类型\n- HIVE数据源\n- DWS数据源\n-","enum":["HIVE","DWS","DLI"],"type":"string"},"id":{"description":"策略id。","maxLength":32,"minLength":1,"type":"string"},"name":{"description":"策略名称。英文和汉字开头, 支持英文、汉字、数字、下划线, 2-64字符。","maxLength":64,"minLength":2,"type":"string"},"policy_list":{"description":"动态数据脱敏策略列表。","items":{"$ref":"#/definitions/DynamicMaskingPolicy"},"maxItems":100,"minItems":0,"type":"array"},"schema_name":{"description":"DWS数据源的模式名称。","maxLength":256,"minLength":0,"type":"string"},"sync_log":{"description":"同步运行日志, 格式为 字段同步信息+换行符。","maxLength":10240,"minLength":1,"type":"string"},"sync_msg":{"description":"策略同步信息。","maxLength":10240,"minLength":1,"type":"string"},"sync_status":{"description":"同步状态:\n- UNKNOWN 未知状态\n- NOT_SYNC 未同步\n- SYNCING 同步中\n- SYNC_SUCCESS 同步成功\n- SYNC_FAIL 同步失败\n- SYNC_PARTIAL_FAIL 存在失败\n- DELETE_FAIL 删除失败\n- DELETING 删除中\n- UPDATING 更新中\n- DATA_UPDATED 数据存在更新","enum":["UNKNOWN","NOT_SYNC","SYNCING","SYNC_SUCCESS","SYNC_FAIL","SYNC_PARTIAL_FAIL","DELETE_FAIL","DELETING","UPDATING","DATA_UPDATED"],"type":"string"},"table_id":{"description":"数据表id,获取方法请参见[获取数据源中的表](getDataTables.html)。","maxLength":128,"minLength":1,"type":"string"},"table_name":{"description":"数据表名称, 获取方法请参见[获取数据源中的表](getDataTables.html)。","maxLength":128,"minLength":1,"type":"string"},"update_time":{"description":"策略更新时间。","format":"int64","maximum":4070880010000,"minimum":0,"type":"integer"},"update_user":{"description":"策略更新者。","maxLength":256,"minLength":0,"type":"string"},"user_groups":{"description":"用户组列表,用户组名称逗号分隔(非必填项,但用户、用户组必须二选其一进行配置)。例如:\"userGroup1,userGroup2\"。","maxLength":4096,"minLength":1,"type":"string"},"users":{"description":"用户列表,用户名称逗号分隔(非必填项,但用户、用户组必须二选其一进行配置),例如:\"user1,user2\"。","maxLength":4096,"minLength":1,"type":"string"}},"required":["name","datasource_type","cluster_id","cluster_name","database_name","table_name","conn_name","conn_id","policy_list"],"type":"object"},"ErrorResponse":{"properties":{"error_code":{"description":"错误码","example":"DLS.1000","maxLength":128,"minLength":1,"type":"string"},"error_msg":{"description":"错误描述","example":"process failed","maxLength":10240,"minLength":1,"type":"string"}},"type":"object"}},"description":null,"group_id":"23bb69798aaf409da161a43a90617121","host":"dayu.cn-north-4.myhuaweicloud.com","id":"049a1b2974ca4accad545a0f2a8770b9","info_version":"v1","method":"post","name":"CreateSecurityDynamicMaskingPolicy","parameters":{"X-Auth-Token":{"description":"token","in":"header","maxLength":10240,"minLength":1,"name":"X-Auth-Token","required":true,"type":"string"},"project_id":{"description":"project id","in":"path","maxLength":128,"minLength":1,"name":"project_id","required":true,"type":"string"},"workspace":{"description":"DataArts Studio工作空间ID","in":"header","maxLength":128,"minLength":1,"name":"workspace","required":true,"type":"string"}},"paths":{"/v1/{project_id}/security/masking/dynamic/policies":{"post":{"description":"创建动态数据脱敏策略","operationId":"CreateSecurityDynamicMaskingPolicy","parameters":[{"$ref":"#/parameters/project_id"},{"$ref":"#/parameters/workspace"},{"$ref":"#/parameters/X-Auth-Token"},{"description":"创建动态脱敏策略传输对象","in":"body","name":"CreateSecurityDynamicMaskingPolicyRequestBody","required":true,"schema":{"$ref":"#/definitions/DynamicMaskingPolicyCreateDTO"}}],"produces":["application/json"],"responses":{"200":{"description":"OK","examples":{"application/json":{"cluster_id":"dc425074-26b3-479c-9e2f-b103c0cdd90f","cluster_name":"mrs_3x_autotest_do_not_del","conn_id":"ae55cb5c44be4119b8958a3ba5d9a71f","conn_name":"hive_xxxx_0520","create_time":1716195352790,"create_user":"ei_dayu_xxxx_01","database_name":"bigdatatest","datasource_type":"HIVE","id":"e55577e76cb77f87cec2099b8074a88d","name":"xxxx_unique_test","policy_list":[{"algorithm_detail":null,"algorithm_detail_dto":null,"algorithm_type":"MASK_SHOW_LAST_4","associated_id":null,"associated_policy_name":null,"column_name":"name","column_type":"string","id":"607218bdfdf8452cd0abe9354639c472","policy_set_id":"e55577e76cb77f87cec2099b8074a88d","sync_msg":null,"sync_status":"NOT_SYNC","sync_time":null},{"algorithm_detail":null,"algorithm_detail_dto":null,"algorithm_type":"MASK_SHOW_FIRST_4","associated_id":null,"associated_policy_name":null,"column_name":"a1","column_type":"string","id":"95cefff4b29e1db7fedb9b772739d7a0","policy_set_id":"e55577e76cb77f87cec2099b8074a88d","sync_msg":null,"sync_status":"NOT_SYNC","sync_time":null}],"schema_id":null,"schema_name":null,"sync_log":null,"sync_msg":null,"sync_status":"NOT_SYNC","table_id":"NativeTable-ae55cb5c44be4119b8958a3ba5d9a71f-bigdatatest-dws_gglllsss","table_name":"dws_gglllsss","update_time":1716195352790,"update_user":"ei_dayu_xxxx_01","user_groups":"DataArts User","users":"user1,user2,user3,user4"}},"schema":{"$ref":"#/definitions/DynamicMaskingPolicyDTO"}},"400":{"description":"Bad Request","schema":{"$ref":"#/definitions/ErrorResponse"}}},"summary":"创建数据脱敏策略","tags":["动态数据脱敏接口"],"x-is-registered":"Y","x-request-examples-1":{"cluster_id":"dc425074-26b3-479c-9e2f-b103c0cdd90f","cluster_name":"mrs_3x_xxxx_do_not_del","conn_id":"39dc19fb17034ab39e46ebe0420c6202","conn_name":"hive_3x_0330","database_name":"bigdatatest","datasource_type":"HIVE","name":"OpenAPI_Hive_test","policy_list":[{"algorithm_type":"MASK_SHOW_LAST_4","column_name":"aa","column_type":"string"}],"table_id":"NativeTable-39dc19fb17034ab39e46ebe0420c6202-bigdatatest-aaaa","table_name":"aaaa","user_groups":"DataArts User","users":""},"x-request-examples-2":{"cluster_id":"c94a9133-ef65-47ad-9483-bfa8c5eaa101","cluster_name":"dws_ssl_4autotest_nomodify","conn_id":"e2f6c44100654778aee017f8ad9e3ac9","conn_name":"dws_0430","database_name":"gaussdb","datasource_type":"DWS","name":"OpenAPI_DWS_test","policy_list":[{"algorithm_detail_dto":null,"algorithm_type":"DWS_ALL_MASK","column_name":"avarchar","column_type":"varchar"}],"schema_name":"public","table_id":"NativeTable-e2f6c44100654778aee017f8ad9e3ac9-gaussdb-public-all_column","table_name":"all_column","user_groups":"DataArts_PDP5_NoPrivilleage","users":"autotest_tics"},"x-request-examples-3":{"cluster_id":"DLI","cluster_name":"DLI","conn_id":"619d52a0e6954aa68844f5f010e06ef8","conn_name":"xu_dli_link","database_name":"bigdatatest","datasource_type":"DLI","name":"OpenAPI_DLI_test","policy_list":[{"algorithm_type":"MASK_NULL","column_name":"varchar1","column_type":"string"}],"table_id":"NativeTable-619d52a0e6954aa68844f5f010e06ef8-bigdatatest-dli_string_auto_20231116","table_name":"dli_string_auto_20231116","user_groups":"","users":""},"x-request-examples-description-1":"创建HIVE数据源的动态脱敏策略","x-request-examples-description-2":"创建DWS数据源的动态脱敏策略","x-request-examples-description-3":"创建DLI数据源的动态脱敏策略","x-request-examples-tags-3":"HEC,hws_hk,hws_eu","x-request-examples-text-1":{"cluster_id":"dc425074-26b3-479c-9e2f-b103c0cdd90f","cluster_name":"mrs_3x_xxxx_do_not_del","conn_id":"39dc19fb17034ab39e46ebe0420c6202","conn_name":"hive_3x_0330","database_name":"bigdatatest","datasource_type":"HIVE","name":"OpenAPI_Hive_test","policy_list":[{"algorithm_type":"MASK_SHOW_LAST_4","column_name":"aa","column_type":"string"}],"table_id":"NativeTable-39dc19fb17034ab39e46ebe0420c6202-bigdatatest-aaaa","table_name":"aaaa","user_groups":"DataArts User","users":""},"x-request-examples-text-2":{"cluster_id":"c94a9133-ef65-47ad-9483-bfa8c5eaa101","cluster_name":"dws_ssl_4autotest_nomodify","conn_id":"e2f6c44100654778aee017f8ad9e3ac9","conn_name":"dws_0430","database_name":"gaussdb","datasource_type":"DWS","name":"OpenAPI_DWS_test","policy_list":[{"algorithm_detail_dto":null,"algorithm_type":"DWS_ALL_MASK","column_name":"avarchar","column_type":"varchar"}],"schema_name":"public","table_id":"NativeTable-e2f6c44100654778aee017f8ad9e3ac9-gaussdb-public-all_column","table_name":"all_column","user_groups":"DataArts_PDP5_NoPrivilleage","users":"autotest_tics"},"x-request-examples-text-3":{"cluster_id":"DLI","cluster_name":"DLI","conn_id":"619d52a0e6954aa68844f5f010e06ef8","conn_name":"xu_dli_link","database_name":"bigdatatest","datasource_type":"DLI","name":"OpenAPI_DLI_test","policy_list":[{"algorithm_type":"MASK_NULL","column_name":"varchar1","column_type":"string"}],"table_id":"NativeTable-619d52a0e6954aa68844f5f010e06ef8-bigdatatest-dli_string_auto_20231116","table_name":"dli_string_auto_20231116","user_groups":"","users":""},"x-request-examples-url-1":"/v1/0833a5737480d53b2f25c010dc1a7b88/security/masking/dynamic/policies","x-request-examples-url-2":"/v1/0833a5737480d53b2f25c010dc1a7b88/security/masking/dynamic/policies","x-request-examples-url-3":"/v1/0833a5737480d53b2f25c010dc1a7b88/security/masking/dynamic/policies","x-support-sdk":"N"}}},"product_short":"DataArtsStudio","region_id":"cn-north-4","schemes":["HTTPS"],"security_definitions":null,"summary":"创建数据脱敏策略","tags":"动态数据脱敏接口","uri":null,"version":"2.0"}