{"base_path":"/","components":null,"consumes":"","definitions":{"ConfigureProtectionBody":{"description":"资源配置保护结构体","properties":{"db_backup_policy":{"$ref":"#/definitions/DbBackupPolicyBody","description":"数据库备份策略配置。protect_type为db时可用"},"db_offsite_backup_policy":{"$ref":"#/definitions/DbOffsiteBackupPolicyBody","description":"数据库跨区域备份策略配置。protect_type为db时可用"},"ids":{"description":"资源ID列表","example":["1a6b0eae4f7f4ccfa479ca32b9381fe9in14"],"items":{"example":"1a6b0eae4f7f4ccfa479ca32b9381fe9in14","maxLength":512,"minLength":1,"type":"string"},"maxItems":10,"minItems":1,"type":"array"},"local_vaults":{"$ref":"#/definitions/ConfigureVaults","description":"本地备份存储库配置。protect_type为cbr时可用且必填"},"protect_engine":{"description":"资源保护采用的方式。分为云备份cbr和数据库db","enum":["cbr","db"],"example":"cbr","maxLength":10,"minLength":1,"type":"string"},"remote_vaults":{"$ref":"#/definitions/ConfigureVaults","description":"异地备份存储库配置。protect_type为cbr时可用"}},"required":["ids","protect_engine"],"type":"object"},"ConfigureVaultItem":{"description":"配置保护的存储库实体","properties":{"encrypted":{"description":"是否加密","example":false,"type":"boolean"},"policy_enable":{"description":"策略是否启用","example":true,"type":"boolean"},"policy_id":{"description":"策略ID","example":"03bc7d8d-01fc-4634-87eb-b113b9ee984d","maxLength":512,"minLength":1,"type":"string"},"vault_id":{"description":"CBR存储库ID","example":"037ac31c-cc58-4fdd-9695-50b1ed4c2590","maxLength":512,"minLength":1,"type":"string"},"worm":{"description":"是否备份锁定","example":false,"type":"boolean"}},"required":["vault_id","policy_id","policy_enable"],"type":"object"},"ConfigureVaults":{"items":{"$ref":"#/definitions/ConfigureVaultItem"},"maxItems":1,"minItems":1,"type":"array"},"DbBackupPolicyBody":{"description":"数据库备份策略修改结构体","properties":{"differential_period":{"description":"差异备份间隔时间配置。每次自动差异备份的间隔时间。取值范围15、30、60、180、360、720、1440。单位:分钟","example":1,"maxLength":32,"minLength":1,"type":"string"},"keep_days":{"description":"备份文件可以保存的天数。取值范围:1-36500天。","example":1,"format":"int32","maximum":36500,"minimum":1,"type":"integer"},"period":{"description":"全量备份周期配置。自动全量备份将在每周对应的UTC日期进行。取值范围:格式为逗号隔开的数字,数字代表星期,取1~7。","example":1,"maxLength":32,"minLength":1,"type":"string"},"start_time":{"description":"备份时间段。自动备份将在该时间段内触发。取值范围:非空,格式必须为hh:mm-HH:MM且有效,当前时间指UTC时间。HH取值必须比hh大1,mm和MM取值必须相同,且取值必须为00。取值示例:21:00-22:00","example":"21:00-22:00","maxLength":32,"minLength":1,"type":"string"}},"required":["keep_days","start_time","period"],"type":"object"},"DbOffsiteBackupPolicyBody":{"properties":{"backup_type":{"description":"指定备份的类型。取值如下:auto:自动全量备份。incremental:自动增量备份。all:同时设置所有备份类型。Db: 数据库。Log:日志","enum":["auto","incremental","all","Db","Log"],"example":"auto","maxLength":32,"minLength":1,"type":"string"},"destination_project_id":{"description":"设置跨区域备份策略的目标project ID。","example":"6e0251c544894fe989f64a4e04da7fc4","maxLength":64,"minLength":1,"type":"string"},"destination_region":{"description":"设置跨区域备份策略的目标区域ID。","example":"region-xx-7","maxLength":64,"minLength":1,"type":"string"},"keep_days":{"description":"指定已生成的备份文件可以保存的天数。取值范围:0~1825。保存天数设置为0时,表示关闭跨区域备份策略。","example":1,"format":"int32","maximum":1825,"minimum":0,"type":"integer"}},"required":["backup_type","keep_days"],"type":"object"},"ErrorRsp":{"description":"失败时返回的错误对象","properties":{"error_code":{"description":"错误码","maxLength":36,"minLength":8,"type":"string"},"error_msg":{"description":"错误描述","maxLength":512,"minLength":2,"type":"string"}},"required":["error_code","error_msg"]},"ProtectionConfigurationResponse":{"description":"配置保护的返回体","items":{"$ref":"#/definitions/ProtectionConfigurationResponseItem"},"type":"array"},"ProtectionConfigurationResponseItem":{"properties":{"code":{"description":"状态码","format":"int32","maximum":600,"minimum":0,"type":"integer"},"error_code":{"description":"错误编码","maxLength":32,"minLength":1,"type":"string"},"error_msg":{"description":"错误信息","maxLength":512,"minLength":1,"type":"string"},"error_stage":{"description":"发生错误的阶段","maxLength":10,"minLength":1,"type":"string"},"ids":{"description":"资源ID","items":{"maxLength":512,"minLength":1,"type":"string"},"maxItems":10,"minItems":1,"type":"array"},"request_id":{"description":"bcc向其他云服务请求的requestId","maxLength":64,"minLength":1,"type":"string"}},"required":["ids","code"],"type":"object"}},"description":null,"group_id":"0cb6191c2c524d62be604224b207d979","host":"bcc.cn-north-4.myhuaweicloud.com","id":"b903bfb500944068982920cb1d399afc","info_version":"v1","method":"post","name":"SetProtectionConfiguration","parameters":{},"paths":{"/v1/{domain_id}/resources-backup/configurations":{"post":{"consumes":["application/json"],"description":"配置资源保护,资源保护情况发生变动后,相关资源的合规结果可能会发生变化","operationId":"SetProtectionConfiguration","parameters":[{"description":"账号ID","in":"path","maxLength":36,"minLength":1,"name":"domain_id","required":true,"type":"string"},{"description":"配置保护的body","in":"body","name":"SetProtectionConfigurationRequestBody","required":false,"schema":{"$ref":"#/definitions/ConfigureProtectionBody"}}],"produces":["application/json"],"responses":{"200":{"description":"返回成功的id","examples":{"application/json":[{"code":200,"ids":["1"]}]},"schema":{"$ref":"#/definitions/ProtectionConfigurationResponse"}},"400":{"description":"请求错误","schema":{"$ref":"#/definitions/ErrorRsp"}},"401":{"description":"未提供认证信息或认证信息错误。","schema":{"$ref":"#/definitions/ErrorRsp"}},"403":{"description":"请求页面被禁止访问。","schema":{"$ref":"#/definitions/ErrorRsp"}},"404":{"description":"未找到资源。","schema":{"$ref":"#/definitions/ErrorRsp"}},"408":{"description":"请求超出了服务器的等待时间。","schema":{"$ref":"#/definitions/ErrorRsp"}},"429":{"description":"当前请求过多。","schema":{"$ref":"#/definitions/ErrorRsp"}},"500":{"description":"请求未完成,服务异常。","schema":{"$ref":"#/definitions/ErrorRsp"}},"503":{"description":"系统暂时不可用,请求受限。","schema":{"$ref":"#/definitions/ErrorRsp"}}},"summary":"配置资源保护","tags":["配置保护"],"x-api-type":"open-api","x-iam-auth-meta-anno":{"abacAction":"bcc::createResourceConfig","authContextInitializerName":"iamAuthBatchModifyContextInitializer","authLevel":"NO_INSTANCE","model":"v5","needAbacCheck":true,"needAbacResourceCheck":false,"needApigwJwtAuthCheck":false,"needCbcCheck":false,"needRbacCheck":false,"needResourceTagCheck":false,"supportAllGrantedEps":false},"x-is-registered":"Y","x-method-annotations":["@CtsMeta(resourceType = \"Configure\", traceName = \"SetProtectionConfiguration\", operationId = \"SetProtectionConfiguration\", isReadOnly=false)"],"x-support-sdk":"Y"}}},"product_short":"BCC","region_id":"cn-north-4","schemes":["HTTPS"],"security_definitions":null,"summary":"配置资源保护","tags":"配置保护","uri":null,"version":"2.0"}