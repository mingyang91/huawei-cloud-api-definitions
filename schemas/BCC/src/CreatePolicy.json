{"base_path":"/","components":null,"consumes":"","definitions":{"CreateBccPolicyRequestBody":{"description":"CreateBccPolicyRequestBody","properties":{"policy":{"description":"policy","properties":{"cbr_policy_detail":{"description":"cbr策略详情","properties":{"operation_definition":{"description":"operation_definition","properties":{"day_backups":{"description":"保留日备个数,该备份不受保留最大备份数限制。","example":100,"format":"int32","type":"integer"},"destination_project_id":{"description":"复制的目标项目ID,仅在跨区域复制时才会使用并且必须指定。","example":"string","maxLength":128,"minLength":2,"type":"string"},"destination_region":{"description":"复制的目标区域,长度限制2-32,只能由字母、数字、“_”、“-”组成。","example":"region-xx","maxLength":32,"minLength":2,"pattern":"^[a-z0-9-]{6,32}$","type":"string"},"enable_acceleration":{"description":"跨区域复制时,是否启用加速从而缩减复制的时间,如果不指定,默认不启用加速。","example":true,"type":"boolean"},"full_backup_interval":{"description":"每间隔多少次执行一次全量备份,当取值为 -1 时,不执行全量备份","example":100,"format":"int32","maximum":100,"minimum":-1,"type":"integer"},"max_backups":{"description":"单个备份对象自动备份的最大备份数。取值为-1或1-99999。-1代表不按备份数清理。","example":-1,"format":"int32","type":"integer"},"month_backups":{"description":"保留月备个数,该备份不受保留最大备份数限制。取值为0到100。","example":100,"format":"int32","type":"integer"},"retention_duration_days":{"description":"备份保留时长,单位天。最长支持99999天。-1代表不按时间清理。","example":-1,"format":"int32","type":"integer"},"timezone":{"description":"用户所在时区,格式形如UTC+08:00","example":"string","type":"string"},"week_backups":{"description":"保留周备个数,该备份不受保留最大备份数限制。取值为0到100。","example":0,"format":"int32","maximum":100,"minimum":0,"type":"integer"},"year_backups":{"description":"保留年备个数,该备份不受保留最大备份数限制。取值为0到100。","example":100,"format":"int32","maximum":100,"minimum":0,"type":"integer"}}},"operation_type":{"description":"保护类型,本地备份backup,异地复制replication","enum":["backup","replication"],"example":"backup","maxLength":64,"minLength":2,"type":"string"},"trigger":{"description":"调度器属性。","properties":{"properties":{"description":"保护类型:备份(backup)、复制(replication)。","properties":{"pattern":{"description":"调度规则。","items":{"maxLength":128,"type":"string"},"maxItems":128,"type":"array"}},"required":["pattern"]}},"required":["properties"]}},"required":["operation_definition","operation_type","trigger"]},"cyber":{"default":false,"description":"是否启用加密","type":"boolean"},"enabled":{"default":true,"description":"enabled","enum":[true,false],"example":true,"type":"boolean"},"name":{"description":"策略名称,取值长度范围[2,64]。","maxLength":64,"minLength":2,"type":"string"},"policy_type":{"description":"策略类型,cbr_local_policy,cbr_remote_policy,rds_local_policy,rds_remote_policy","enum":["cbr_local_policy","cbr_remote_policy","rds_local_policy","rds_remote_policy"],"maxLength":64,"type":"string"},"protection_type":{"description":"protection_type","enum":["backup","disaster_recovery"],"example":"backup","maxLength":32,"minLength":2,"type":"string"},"region_id":{"description":"区域ID","maxLength":32,"minLength":6,"pattern":"^[a-z0-9-]{6,32}$","type":"string"},"service_type":{"description":"保护服务类型,如:ecs, evs, rds","maxLength":64,"minLength":2,"type":"string"},"storage_type":{"default":"obs","description":"存储类型,obs,evs,sfs,默认obs","enum":["obs","evs","sfs"],"maxLength":16,"minLength":2,"type":"string"}},"required":["protection_type","enabled","name","region_id","cyber","storage_type","policy_type","service_type","cbr_policy_detail"]}},"required":["policy"],"type":"object"},"CreateBccPolicyResponse":{"properties":{"policy_id":{"description":"策略id","type":"string"}},"type":"object"},"ErrorRsp":{"description":"失败时返回的错误对象","properties":{"error_code":{"description":"错误码","maxLength":36,"minLength":8,"type":"string"},"error_msg":{"description":"错误描述","maxLength":512,"minLength":2,"type":"string"}},"required":["error_code","error_msg"]}},"description":null,"group_id":"0cb6191c2c524d62be604224b207d979","host":"bcc.cn-north-4.myhuaweicloud.com","id":"26a51fbe164c47309673399a480127e8","info_version":"v1","method":"post","name":"CreatePolicy","parameters":{},"paths":{"/v1/{domain_id}/backup/policies":{"post":{"description":"新建策略","operationId":"CreatePolicy","parameters":[{"description":"账号ID","in":"path","maxLength":32,"minLength":16,"name":"domain_id","pattern":"^[a-z0-9]{16,32}$","required":true,"type":"string"},{"description":"Policy创建请求体","in":"body","name":"CreatePolicyRequestBody","required":true,"schema":{"$ref":"#/definitions/CreateBccPolicyRequestBody"}}],"produces":["application/json"],"responses":{"200":{"description":"Demo Information","examples":{"application/json":{"policy_id":"ea713666-ac59-4e95-ac95-3cd6089baa73"}},"schema":{"$ref":"#/definitions/CreateBccPolicyResponse"}},"400":{"description":"请求错误。","schema":{"$ref":"#/definitions/ErrorRsp"}},"401":{"description":"未提供认证信息或认证信息错误。","schema":{"$ref":"#/definitions/ErrorRsp"}},"403":{"description":"请求页面被禁止访问。","schema":{"$ref":"#/definitions/ErrorRsp"}},"408":{"description":"请求超出了服务器的等待时间。","schema":{"$ref":"#/definitions/ErrorRsp"}},"429":{"description":"当前请求过多。","schema":{"$ref":"#/definitions/ErrorRsp"}},"500":{"description":"请求未完成,服务异常。","schema":{"$ref":"#/definitions/ErrorRsp"}},"503":{"description":"服务端错误","schema":{"$ref":"#/definitions/ErrorRsp"}}},"summary":"新建策略","tags":["策略"],"x-api-type":"open-api","x-iam-auth-meta-anno":{"abacAction":"bcc::createPolicy","authContextInitializerName":"baseIamAuthContextInitializer","authLevel":"NO_INSTANCE","model":"v5","needAbacCheck":true,"needAbacResourceCheck":false,"needApigwJwtAuthCheck":false,"needCbcCheck":false,"needRbacCheck":false,"needResourceTagCheck":false,"supportAllGrantedEps":false},"x-is-registered":"Y","x-order":1,"x-request-examples-1":{"policy":{"cbr_policy_detail":{"operation_definition":{"day_backups":100,"destination_project_id":"string","destination_region":"region-xx","enable_acceleration":true,"full_backup_interval":100,"max_backups":-1,"month_backups":100,"retention_duration_days":-1,"timezone":"string","week_backups":0,"year_backups":100},"operation_type":"backup","trigger":{"properties":{"pattern":["string"]}}},"cyber":true,"enabled":true,"name":"string","policy_type":"string","protection_type":"backup","region_id":"string","service_type":"string","storage_type":"string"}},"x-request-examples-text-1":{"policy":{"cbr_policy_detail":{"operation_definition":{"day_backups":100,"destination_project_id":"string","destination_region":"region-xx","enable_acceleration":true,"full_backup_interval":100,"max_backups":-1,"month_backups":100,"retention_duration_days":-1,"timezone":"string","week_backups":0,"year_backups":100},"operation_type":"backup","trigger":{"properties":{"pattern":["string"]}}},"cyber":true,"enabled":true,"name":"string","policy_type":"string","protection_type":"backup","region_id":"string","service_type":"string","storage_type":"string"}},"x-request-examples-url-1":"POST GET  https://{endpoint}/v1/{domain_id}/backup/policies","x-support-sdk":"Y"}}},"product_short":"BCC","region_id":"cn-north-4","schemes":["HTTPS"],"security_definitions":null,"summary":"新建策略","tags":"策略","uri":null,"version":"2.0"}