{"base_path":null,"components":null,"consumes":"","definitions":{"AimErrorMsg":{"description":"错误模型。","properties":{"error_code":{"description":"结果状态码。","type":"string"},"error_message":{"description":"结果详情。\n\n> 该字段在以后可能会废弃,建议使用error_msg字段对接。\n"},"error_msg":{"description":"结果详情。","type":"string"}}},"CreateResolveTaskParamMode":{"description":"生成短链的响应参数对象。","properties":{"aim_code":{"description":"智能信息编码,样例:PDiWqc。","example":"asides","type":"string"},"aim_url":{"description":"完整的短链连接地址,通过自己的短信渠道发送时,需要把该短链添加到短信模板中,并确保发送短信时的签名与创建短链时的签名保持一致。样例:km2g.cn/PDiWqc。","example":"aim6.cn/asides","type":"string"},"cust_flag":{"description":"创建解析任务时填写用户唯一标识,手机号码或者任何的唯一标识,唯一标识不超过64个字符。 发送智能信息时则必须填客户的手机号码。样例为:130****0001。","example":"130****0001","type":"string"},"cust_id":{"description":"租户ID。","example":"231724915a62455ca356e10a085c0000","type":"string"},"custom_short_code":{"description":"自定义短码,支持长度为3到10位的数字或大小写字母。样例为:aDC123。","type":"string"},"custom_url":{"description":"自定义跳转地址。\n> - 未填时,终端用户点击访问短信原文中的短链,跳转智能信息H5页\n> - 已填时,终端用户点击访问短信原文中的短链,跳转客户填写的链接落地页,填写时必须为http或https作为前缀\n","type":"string"},"dync_params":{"additionalProperties":{"type":"string"},"description":"动态参数。","type":"object"},"error_message":{"description":"短链申请结果错误描述。\n","example":"成功","type":"string"},"expire_date":{"description":"短链到期时间。样例为:2019-10-12T07:20:50Z。","example":"2019-10-12T07:20:50","type":"string"},"ext_data":{"description":"自定义扩展参数。\n\n>预留字段。\n","type":"string"},"generate_date":{"description":"短链生成时间。样例为:2019-10-12T07:20:50Z。","example":"2019-10-12T07:20:50","type":"string"},"resolved_date":{"description":"解析时间。样例为:2019-10-12T07:20:50Z。\n\n>预留字段。\n","example":"2019-10-12T07:20:50","type":"string"},"resolved_times":{"description":"短链实际解析次数。\n\n>预留字段。\n","example":1,"type":"integer"},"result_code":{"description":"短链申请结果返回码。\n- 0:成功\n- 非0:失败,具体请参见错误码\n","example":"0","type":"string"}},"type":"object"},"CreateResolveTaskRequestBody":{"description":"生成短链请求体。","properties":{"aim_code_type":{"description":"生成短链类型。\n\n- group:群发\n- individual:个性化\n\n> 使用动态参数模板时,该字段只能为individual。\n","example":"group","type":"string"},"domain":{"description":"自定义短链域名,由大小写字母和数字组成的二级域名。\n\n> generation_type为2时,此参数为必填。域名需要提前报备,请联系KooMessage运营人员进行域名报备,域名区分生成短码方式,如报备的是标准生成短码方式,则在自定义生成短码时不能使用此域名。\n","example":"km2n.cn","maxLength":100,"pattern":"[a-zA-Z0-9][-a-zA-Z0-9]{0,62}(\\.[a-zA-Z0-9][-a-zA-Z0-9]{0,62})+\\.?","type":"string"},"expiration_time":{"description":"失效时间(天)。aim_code_type为group时,取值范围为1~180;aim_code_type为individual个性化时,取值范围为1~7。\n\n> 失效时间精确到秒,例如参数设置为1,创建时间为2022-07-22 21:10:12,过期时间为2022-07-23 21:10:12。\n","example":7,"type":"integer"},"generation_type":{"description":"生成短码方式。\n\n- 1:标准\n- 2:自定义\n\n> 默认1,即标准生成短码。\n","type":"string"},"params":{"description":"短链参数列表。一次请求最多生成100个短链。\n\n> 群发短链每次调用最多申请一条。\n","items":{"$ref":"#/definitions/CreateShortChainParam"},"maxItems":100,"type":"array"},"resolving_times":{"description":"短链最大解析次数。\n\n>个性化短链只支持最大解析数为1,设置其他值无效。\n>群发短链设置解析次数需要大于等于2。\n","example":10000,"maximum":10000000,"minimum":1,"type":"integer"},"sms_signs":{"description":"短信签名列表,需要与最终发送短信的签名一致,才能解析。\n\n> 最多传入5个签名,单个签名内容不包括中括号。\n","items":{"description":"短信签名。","example":"华为云科技","maxLength":18,"minLength":1,"type":"string"},"maxItems":5,"minItems":1,"type":"array"},"tpl_id":{"description":"智能信息模板ID,由9位数字组成。","example":"600000000","maxLength":9,"minLength":1,"type":"string"}},"required":["aim_code_type","expiration_time","params","resolving_times","sms_signs","tpl_id"]},"CreateResolveTaskRsp":{"description":"生成短链响应实体类。","properties":{"aim_code_type":{"description":"智能信息编码类型。\n- group:群发\n- individual:个性化\n","example":"group","type":"string"},"domain":{"description":"自定义短链域名,由大小写字母和数字组成的二级域名。","example":"km2n.cn","pattern":"[a-zA-Z0-9][-a-zA-Z0-9]{0,62}(\\.[a-zA-Z0-9][-a-zA-Z0-9]{0,62})+\\.?","type":"string"},"expiration_time":{"description":"失效时间(天)。","example":7,"type":"integer"},"params":{"description":"短链列表。","items":{"$ref":"#/definitions/CreateResolveTaskParamMode"},"maxItems":100,"type":"array"},"resolved_times":{"description":"实际已解析数量统计。\n\n> 预留字段。\n","example":10000,"type":"integer"},"resolving_times":{"description":"用户创建时提交的最大解析次数。","example":10000,"type":"integer"},"sms_signs":{"description":"短信签名列表。","items":{"description":"短信签名。","example":"华为云科技","type":"string"},"type":"array"},"task_id":{"description":"任务ID。","example":"e5f475be-f30e-4e5d-85dc-8bd8ea88111b","type":"string"},"tpl_id":{"description":"智能信息模板ID,由9位数字组成。","example":"600000000","type":"string"}},"type":"object"},"CreateShortChainParam":{"description":"生成短链的参数对象。","properties":{"cust_flag":{"description":"创建解析任务时填写用户唯一标识,手机号码或者任何的唯一标识,唯一标识不超过64个字符。 发送智能信息时则必须填客户的手机号码。样例为:130****0001。","example":"130****0001","maxLength":64,"type":"string"},"custom_short_code":{"description":"自定义短码,支持长度为3到10位的数字或大小写字母。样例为:aDC123。\n> 自定义短码时即generation_type为2时,此参数为必填。","example":"abc12","maxLength":10,"minLength":3,"type":"string"},"custom_url":{"description":"自定义跳转地址。长度要求不超过256。\n> - 未填时,终端用户点击短信原文中的短链后,跳转智能信息模板H5页\n> - 已填时,终端用户点击短信原文中的短链后,跳转该字段对应的页面,填写时必须为http或https作为前缀\n> - 使用自定义跳转链接功能请联系KooMessage运营人员进行域名备案\n> - 自定义短码时即generation_type为2时不支持自定义跳转链接功能,传入的参数值无效\n","example":"https://www.xxxx.com","pattern":"^http[s]{0,1}://([\\w-]+\\.)+[\\w-]+(/[\\w-./?%&=]*)?$","type":"string"},"dync_params":{"additionalProperties":{"example":"param","type":"string"},"description":"动态参数。\n\n> 使用动态参数模板时,aim_code_type字段只能为individual。\n","type":"object"}},"required":["cust_flag"],"type":"object"}},"description":null,"group_id":"57a445a5fb5d4ba5b80445bd4c5ec9b3","host":"koomessage.myhuaweicloud.cn","id":"c335ec6cf7eb4b0cb816d3458628c7af","info_version":"v1","method":"post","name":"CreateResolveTask","parameters":{},"paths":{"/v1/aim/resolve-tasks":{"post":{"consumes":["application/json"],"deprecated":false,"description":"生成解析的短链。一次最多生成100个解析的短链。","operationId":"CreateResolveTask","parameters":[{"description":"用户Token。通过调用IAM服务获取用户Token接口获取(响应消息头中X-Subject-Token的值)。","in":"header","name":"X-Auth-Token","required":true,"type":"string"},{"description":"请求体参数类型,该字段必须设置为:application/json。","in":"header","name":"Content-Type","required":true,"type":"string"},{"description":"解析任务生成报文。","in":"body","name":"createResolveTaskRequestBody","required":true,"schema":{"$ref":"#/definitions/CreateResolveTaskRequestBody"}}],"produces":["application/json"],"responses":{"200":{"description":"返回信息。","examples":{"application/json":{"aim_code_type":"group","domain":"km2g.cn","expiration_time":7,"params":[{"aim_code":"PDARc6","aim_url":"km2g.cn/PDARc6","cust_flag":"131****0000","cust_id":"231724915a62455ca356e10a085c9a23","custom_short_code":null,"custom_url":"https://www.xxxx.com","expire_date":"2022-07-25T21:02:44Z","generate_date":"2022-07-18T21:02:44Z","result_code":"0"}],"resolving_times":5,"sms_signs":["华为云KooMessage"],"task_id":"80959fd0-dc23-42e3-9595-59a49ee6cccc","tpl_id":"600000002"}},"schema":{"$ref":"#/definitions/CreateResolveTaskRsp"}},"400":{"description":"非法参数。","schema":{"$ref":"#/definitions/AimErrorMsg"}},"500":{"description":"内部错误。","schema":{"$ref":"#/definitions/AimErrorMsg"}}},"summary":"生成解析任务","tags":["AIMResolveTask"],"x-apigateway-request-type":"Public","x-is-registered":"Y","x-opseverity":"Info","x-request-examples-1":{"aim_code_type":"individual","expiration_time":7,"params":[{"cust_flag":"131****0000","custom_url":"https://www.xxxx.com","dync_params":{"param1":"参数1","param2":"参数2","param3":"参数3","param4":"参数4"}},{"cust_flag":"131****0001","custom_url":"https://www.xxxx.com","dync_params":{"param1":"参数1","param2":"参数2","param3":"参数3","param4":"参数4"}}],"resolving_times":1,"sms_signs":["华为云KooMessage"],"tpl_id":"600000001"},"x-request-examples-2":{"aim_code_type":"group","domain":"km2g.cn","expiration_time":7,"params":[{"cust_flag":"131****0000","custom_url":"https://www.xxxx.com"}],"resolving_times":5,"sms_signs":["华为云KooMessage"],"tpl_id":"600000002"},"x-request-examples-3":{"aim_code_type":"group","domain":"km3g.cn","expiration_time":7,"generation_type":"2","params":[{"cust_flag":"131****0000","custom_short_code":"abc123"}],"resolving_times":5,"sms_signs":["华为云KooMessage"],"tpl_id":"600000002"},"x-request-examples-description-1":"生成解析任务-个性化。模板ID为\"600000001\",短链最大解析次数为1次,过期时间为7天。","x-request-examples-description-2":"生成解析任务-群发。模板ID为\"600000002\",短链最大解析次数为5次,过期时间为7天。","x-request-examples-description-3":"生成解析任务-自定义短码。模板ID为\"600000002\",短链最大解析次数为5次,过期时间为7天,自定义短码为\"abc123\"。","x-request-examples-url-1":"https://koomessage.myhuaweicloud.cn/v1/aim/resolve-tasks","x-request-examples-url-2":"https://koomessage.myhuaweicloud.cn/v1/aim/resolve-tasks","x-request-examples-url-3":"https://koomessage.myhuaweicloud.cn/v1/aim/resolve-tasks","x-support-sdk":"Y"}}},"product_short":"KooMessage","region_id":"cn-north-4","schemes":["HTTPS"],"security_definitions":{"apig-auth-app":{"in":"header","name":"Authorization","type":"apiKey","x-apigateway-auth-type":"AppSigv1"},"apig-auth-app-optional":{"in":"header","name":"Authorization","type":"apiKey","x-apigateway-auth-opt":{"access-auth-type":"optional"},"x-apigateway-auth-type":"AppSigv1"},"apig-auth-iam":{"in":"header","name":"unused","type":"apiKey","x-apigateway-auth-type":"IAM"},"apig-auth-iam-none":{"in":"header","name":"unused","type":"apiKey","x-apigateway-auth-type":"IAM_NONE"}},"summary":"生成解析任务","tags":"智能信息解析","uri":null,"version":"2.0"}