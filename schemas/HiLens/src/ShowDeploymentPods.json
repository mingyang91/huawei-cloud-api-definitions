{"base_path":"/","components":null,"consumes":"","definitions":{"AppDef":{"properties":{"app_order_id":{"description":"app应用的订单ID,技能来源是市场时,如果不填,则自动选择默认订单。","type":"string"},"app_url":{"description":"app应用的地址,可以是镜像地址或者OBS地址","type":"string"},"args":{"description":"容器启动参数,字符总长度最大为65536,不允许^#~^$|%&*<>()'\"\\[\\]{}]等特殊字符","items":{"type":"string"},"type":"array"},"channel_limit":{"description":"路数限制,添加作业的时候,摄像头和VCN的最大路数不超过该值,范围是0到1000","format":"int32","type":"integer"},"channel_resources":{"$ref":"#/definitions/ResQuest","description":"每增加一路所需要资源"},"channel_upper_limit":{"description":"用户可以指定的路数限制上限,范围是0到1000","format":"int32","type":"integer"},"command":{"description":"容器启动命令,字符总长度最大为65536。 command支持使用数组定义多条命令,但在IEF控制台界面只会显示第一条命令。不允许^#~^$|%&*<>()'\"\\[\\]{}]等特殊字符","items":{"type":"string"},"type":"array"},"envs":{"description":"环境变量","items":{"$ref":"#/definitions/Env"},"type":"array"},"is_modelbox":{"description":"是否是modelbox镜像","type":"boolean"},"liveness_probe":{"$ref":"#/definitions/Probe","description":"探针配置"},"msgs":{"description":"消息变量","items":{"$ref":"#/definitions/Env"},"type":"array"},"name":{"description":"应用名字,只允许英文小写字母、数字、中划线,最大长度32, 英文小写字母或数字开头和结尾。该名称同时对应技能名称,当不传订单id的时候,默认通过该名称和版本号version字段,选择指定技能版本,进行部署,并选择可用的订单(默认订单优先)扣除份额。","type":"string"},"npu_type":{"description":"npu类型,支持D310类型和D910类型。D310表示D310类型。\n\nD910表示D910类型。不填表示为D310类型","type":"string"},"ports":{"description":"容器端口映射值","items":{"$ref":"#/definitions/HostContainerPortMapping"},"type":"array"},"privileged":{"description":"是否启用特权容器,默认值false","type":"boolean"},"readiness_probe":{"$ref":"#/definitions/Probe","description":"探针配置"},"resources":{"$ref":"#/definitions/ResQuest","description":"创建应用时使用的资源"},"skill_project_id":{"description":"技能管理ID,技能来源source是skill的时候,需要传入该ID","type":"string"},"start_resources":{"$ref":"#/definitions/ResQuest","description":"创建部署所需要的起始资源"},"version":{"description":"版本号,长度不操作128,支持大小写数字,下划线,点,中划线","type":"string"},"volumes":{"description":"卷配置","items":{"$ref":"#/definitions/Volume"},"type":"array"}},"required":["app_url","name","resources"],"title":"AppDef","type":"object"},"ConfigsMap":{"properties":{"key":{"description":"配置项的名称,以英文字母或中划线开头,由英文字母、数字、点号、中划线和下划线组成,长度1到63个字符。","type":"string"},"name":{"description":"配置项的属性名,以英文小写字母开头,由中文字符,英文字母,数字,下划线和中划线组成,不能以中划线结尾,长度4-64位。","type":"string"}},"required":["key","name"],"title":"Config"},"DeploymentSecrets":{"properties":{"key":{"description":"密钥的属性名,以英文字母和中划线开头,由英文字母、数字、点号、中划线和下划线组成,长度1-63位","type":"string"},"name":{"description":"密钥的名称,以英文小写字母开头,由中文字符,英文字母,数字,下划线和中划线组成,不能以中划线结尾,长度4-64位","type":"string"}}},"Env":{"properties":{"field_path":{"description":"该参数目前只支持赋值\"status.hostIP\",即引用边缘节点的IP地址作为环境变量。value、value_from和field_path必须三选一使用","type":"string"},"name":{"description":"环境变量的key,由大小写字母或下划线开头,由数字、大小写字母、下划线组成,最大长度2048个字符,不允许重复","type":"string"},"value":{"description":"环境变量的value,最大长度20480个字符。value、value_from和field_path必须三选一使用","type":"string"},"value_from":{"$ref":"#/definitions/ValueFrom","description":"环境变量可使用配置项和密钥导入。value、value_from和field_path必须三选一使用"}},"required":["name"],"title":"Env"},"Exec":{"properties":{"command":{"description":"探针执行命令,最大长度10240个字符。不允许^#~^$|%&*<>()'\"[]{}这些特殊字符","type":"string"}},"required":["command"],"title":"Exec"},"HostContainerPortMapping":{"properties":{"container_port":{"description":"容器端口,1到65535之间的整数","format":"int64","type":"integer"},"host_ip":{"description":"对应主机网卡地址,形如192.168.0.1","type":"string"},"host_port":{"description":"主机端口,1到65535之间的整数,与主机端口范围二选一","format":"int64","type":"integer"},"host_port_range":{"$ref":"#/definitions/HostPortRange","description":"主机端口范围,在范围内为应用实例自动分配主机端口;与主机端口参数二选一"}},"required":["container_port"],"title":"HostContainerPortMapping"},"HostPortRange":{"properties":{"max_port":{"description":"主机端口上限值,1到65535之间的整数;max_port需大于min_port","format":"int64","type":"integer"},"min_port":{"description":"主机端口下限制,1到65535之间的整数","format":"int64","type":"integer"}},"required":["max_port","min_port"],"title":"HostPortRange"},"HttpGet":{"properties":{"host":{"description":"请求的主机地址,默认为容器IP","type":"string"},"path":{"description":"必须要以/开头,构造结果为:协议类型://主机地址:端口路径","type":"string"},"port":{"description":"探测的http端口,1到65535之间的整数","format":"int32","type":"integer"},"scheme":{"description":"协议类型,HTTP或HTTPS,默认HTTP","type":"string"}},"required":["path","port"],"title":"HttpGet"},"MatchExpression":{"properties":{"key":{"description":"规则的标签","type":"string"},"operator":{"description":"操作符,取值如下:\nIn:标签值需要在values的列表中\nNotIn:标签的值不在某个列表中\nExists:某个标签存在\nDoesNotExist:某个标签不存在\nGt:标签的值大于某个值(字符串比较)\n Lt:标签的值小于某个值(字符串比较)","type":"string"},"values":{"description":"一组标签值。 如果运算符为In或NotIn,则值数组必须非空。 如果运算符为Exists 或DoesNotExist,则值数组必须为空。 如果运算符是Gt或Lt,则值数组必须具有单个元素,该元素将被解释为整数","items":{"type":"string"},"type":"array"}},"title":"MatchExpression"},"Pod":{"properties":{"affinity":{"$ref":"#/definitions/PodAffinity","description":"亲和规则"},"apps":{"description":"应用部署信息","items":{"$ref":"#/definitions/AppDef"},"type":"array"},"cluster_id":{"description":"集群ID","type":"string"},"configs":{"$ref":"#/definitions/PodConfig","description":"应用实例配置"},"created_at":{"description":"创建时间","example":"2022-01-25 15:57:07 GMT+08:00","type":"string"},"deployment_id":{"description":"部署ID","example":"hilens-9eebd2c03a2e48a6a47949fcb4f3f66f","type":"string"},"host_ip":{"description":"对应网卡地址","example":"10.107.58.200","type":"string"},"id":{"description":"实例ID","example":"hilens-example1_example1-skill-name_0","type":"string"},"name":{"description":"实例名字","example":"example1_example1-skill-name_0","type":"string"},"node_id":{"description":"节点ID","example":"hilens-e17b497c3a00406f89f605e5c16b40d7","type":"string"},"project_id":{"description":"项目ID","example":"fff47e1722f94c4e98531bae56821372","type":"string"},"reason":{"description":"部署失败的原因","type":"string"},"status":{"description":"状态,状态包括,Pending,表示挂起,Running表示pod已经被调到到某节点,Succeeded表示Pod已经被成功终止,Failed表示左右容器都已终止,Unkonwn表示无法取得Pod状态","example":"Pending","type":"string"},"updated_at":{"description":"更新时间","example":"2022-01-25 15:57:07 GMT+08:00","type":"string"}},"type":"object"},"PodAffinity":{"properties":{"node_affinity":{"description":"节点亲和规则","items":{"$ref":"#/definitions/MatchExpression"},"type":"array"},"pod_affinity":{"description":"Pod亲和规则","items":{"$ref":"#/definitions/MatchExpression"},"type":"array"}},"title":"PodAffinity"},"PodConfig":{"properties":{"host_network":{"description":"应用实例是否启用主机网络,不启用则使用端口映射,默认值false","type":"boolean"},"host_pid":{"description":"应用实例是否与主机共PID命名空间,默认值false","type":"boolean"},"migration":{"description":"应用实例故障是否迁移,指定节点组部署时必选,默认值false","type":"boolean"},"restart_policy":{"description":"应用实例重启策略,可选值Always、OnFailure、Never","type":"string"},"toleration_seconds":{"description":"应用实例故障容忍时间,容忍时间到达后迁移应用实例,只在指定节点组部署时生效","format":"int32","type":"integer"}},"required":["host_network","restart_policy"],"title":"PodConfig"},"PodList":{"properties":{"count":{"description":"pod总个数","format":"int32","type":"integer"},"pods":{"description":"pod 列表","items":{"$ref":"#/definitions/Pod"},"type":"array"}}},"Probe":{"properties":{"exec":{"$ref":"#/definitions/Exec","description":"执行命令检查,与http_get二选一"},"http_get":{"$ref":"#/definitions/HttpGet","description":"执行http探测"},"initial_delay_seconds":{"description":"表示从工作负载启动后从多久开始探测,大于0且不大于3600的整数,默认为10","format":"int64","type":"integer"},"timeout_seconds":{"description":"表示探测超时时间,大于0且不大于3600的整数,默认为1","format":"int64","type":"integer"}},"title":"Probe"},"Res":{"properties":{"cpu":{"description":"cpu数量,字符串所对应的数值在0.01到1000之间","type":"string"},"gpu":{"description":"gpu数量,值在0到1000","type":"string"},"memory":{"description":"内存数量,如果是资源限制,其值范围在4到1024000之间,否则在0.01到1024000之间","type":"string"},"npu":{"description":"npu数量,字符串所对应的数值在0.到1000之间","type":"string"}},"title":"Res","type":"object"},"ResQuest":{"properties":{"limits":{"$ref":"#/definitions/Res","description":"允许容器使用的最大资源"},"requests":{"$ref":"#/definitions/Res","description":"容器需要使用的最小资源"}},"title":"ResQuest"},"ValueFrom":{"properties":{"configmap":{"$ref":"#/definitions/ConfigsMap","description":"环境变量引用配置项时使用。使用ValueFrom时,secret与configmap必须二选一"},"secret":{"$ref":"#/definitions/DeploymentSecrets","description":"环境变量引用密钥时使用。使用ValueFrom时,secret与configmap必须二选一"}},"title":"ValueFrom"},"Volume":{"properties":{"destination":{"description":"卷挂载路径,必须是合法的路径","type":"string"},"key":{"description":"卷的类型,支持configMap,secret,emptyDir,hostPath","type":"string"},"name":{"description":"卷名称,小写字母或数字,最长63个字符","type":"string"},"read_only":{"description":"读写权限,configMap和secret类型只支持读权限","type":"boolean"},"source":{"description":"卷来源,type为hostPath时输入路径,要求以/开头,后面可包含中划线,反斜杠,下划线,点号,字母,数字; secret时输入secret名称,configMap时输入configMap名称,emptyDir时输入disk或memory","type":"string"},"type":{"description":"卷的类型,支持configMap,secret,emptyDir,hostPath","type":"string"}},"required":["destination","key","name","read_only","source","type"],"title":"Volume"}},"description":null,"group_id":"3309a57eaa6041a7a890c458be112fe2","host":"hilens.cn-north-4.myhuaweicloud.com","id":"aa7d8c73556b4ac89c464e97549f1789","info_version":"v3","method":"get","name":"ShowDeploymentPods","parameters":{"limit":{"description":"每页显示的条目数量,取值范围1~100,默认为100","format":"int32","in":"query","name":"limit","required":false,"type":"integer"},"offset":{"description":"查询的起始位置,取值范围为非负整数,默认为0","format":"int32","in":"query","name":"offset","required":false,"type":"integer"}},"paths":{"/v3/{project_id}/ai-mgr/pods":{"get":{"description":"获取用户实例列表。","operationId":"ShowDeploymentPods","parameters":[{"description":"用户Token。获取方法请参见[获取Token](https://support.huaweicloud.com/api-iam/iam_30_0001.html)","in":"header","name":"X-Auth-Token","required":true,"type":"string"},{"description":"集群ID,查询部署在该节点组的应用列表,和node_id不可同时请求","in":"query","name":"cluster_id","required":false,"type":"string"},{"description":"节点ID,查询部署在该节点下的应用列表,和cluster_id不可同时请求","in":"query","name":"node_id","required":false,"type":"string"},{"description":"项目ID,获取方法请参见[获取项目ID](hilens_07_0020.xml)","in":"path","name":"project_id","required":true,"type":"string"},{"description":"平台提供者,分别为hilens及ief。当为hilens时,请求部署在hilens平台的相关数据","in":"query","name":"provider","required":false,"type":"string"},{"description":"应用部署ID","in":"query","name":"deployment_id","required":false,"type":"string"},{"description":"工作空间ID,默认为注册账号/子账号的default工作空间。主账号默认ID为0,子账号默认空间id为该子账号user_id","in":"query","name":"workspace_id","required":false,"type":"string"},{"$ref":"#/parameters/offset"},{"$ref":"#/parameters/limit"}],"produces":["application/json"],"responses":{"200":{"description":"请求成功","examples":{"application/json":{"count":1,"pods":[{"affinity":null,"apps":[{"app_id":"hilens-41f6382c44b94d8abaea5129a54121b0","app_order_id":"702786922fc74954818e549383306d30","app_url":"https://hilens-skill.obs.cn-north-7.ulanqab.huawei.com/test-rpm/1.0.0/skill/mask_det-rk-1.0.0-1.aarch64.rpm","args":[],"command":[],"envs":[],"is_modelbox":false,"msgs":[],"name":"test-rpm","ports":[],"privileged":false,"resources":{"limits":{"cpu":"0.25","memory":"128"},"requests":{}},"version":"1.0.0","volumes":[]}],"cluster_id":null,"configs":{"host_network":false,"host_pid":false,"migration":false,"restart_policy":"Always","toleration_seconds":0},"created_at":"2021-12-08 19:09:27 GMT+08:00","deployment_id":"hilens-413a558214814d249d43988cc1f788b6","host_ip":"192.168.2.111","id":"hilens-12312312313_test-rpm_0","name":"12312312313_test-rpm_0","node_id":"hilens-8977fd2811464c1bb19eeb1939142841","project_id":"fff47e1722f94c4e98531bae56821372","reason":"open /home/hilens/apps/test-rpm-hilens-41f6382c44b94d8abaea5129a54121b0/packages/base64_decoder.toml: no such file or directory","status":"Failed","updated_at":"2021-12-08 20:26:20 GMT+08:00"}]}},"schema":{"$ref":"#/definitions/PodList"}},"401":{"description":"认证不通过"},"403":{"description":"拒绝执行请求"},"404":{"description":"请求的资源不存在"},"500":{"description":"服务器内部错误","schema":{"type":"string"}}},"summary":"查询应用实例列表","tags":["应用部署管理"],"x-is-registered":"Y","x-open-region-cloud":"hc","x-request-examples-1":"Request Header:\nContent-Type: application/json\nX-Auth-Token: MIINRwYJKoZIhvcNAQcCoIINODCCDTQCAQExDTALBglghkgBZQMEAgEwgguVBgkqhkiG...","x-request-examples-description-1":"获取用户实例列表","x-request-examples-text-1":"Request Header:\nContent-Type: application/json\nX-Auth-Token: MIINRwYJKoZIhvcNAQcCoIINODCCDTQCAQExDTALBglghkgBZQMEAgEwgguVBgkqhkiG...","x-request-examples-url-1":"GET https://{endpoint}/v3/{project_id}/ai-mgr/pods","x-support-sdk":"Y"}}},"product_short":"HiLens","region_id":"cn-north-4","schemes":["HTTPS"],"security_definitions":null,"summary":"查询应用实例列表","tags":"应用部署管理","uri":null,"version":"2.0"}