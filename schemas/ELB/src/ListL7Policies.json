{"base_path":"/","components":null,"consumes":"[\"application/json;charset=UTF-8\"]","definitions":{"FixtedResponseConfig":{"description":"固定返回页面的配置。\n\n当监听器的高级转发策略功能(enhance_l7policy_enable)开启后才会生效,未开启传入该字段会报错。\n\n当action为FIXED_RESPONSE时生效,且为必选字段,其他action不可指定,否则报错。\n\n共享型负载均衡器下的转发策略不支持该字段,传入会报错。","properties":{"content_type":{"description":"返回body的格式。\n\n取值范围:\n- text/plain\n- text/css\n- text/html\n- application/javascript\n- application/json","enum":["text/plain","text/css","text/html","application/javascript","application/json"],"maxLength":32,"minLength":0,"type":"string"},"message_body":{"description":"返回消息内容。","maxLength":1024,"minLength":0,"type":"string"},"status_code":{"description":"返回码。支持200~299,400~499,500~599。","maxLength":16,"minLength":1,"type":"string"}},"required":["content_type","message_body","status_code"]},"L7Policy":{"description":"policy对象。","properties":{"action":{"description":"转发策略的转发动作。\n\n取值:\n- REDIRECT_TO_POOL:转发到后端云服务器组;\n- REDIRECT_TO_LISTENER:重定向到监听器;\n- REDIRECT_TO_URL:重定向到URL;\n- FIXED_RESPONSE:返回固定响应体。\n\n使用说明:\n- REDIRECT_TO_LISTENER的优先级最高,配置了以后,该监听器下的其他policy会失效。\n- 当action为REDIRECT_TO_POOL时,\n只支持创建在PROTOCOL为HTTP、HTTPS、TERMINATED_HTTPS的listener上。\n- 当action为REDIRECT_TO_LISTENER时,只支持创建在PROTOCOL为HTTP的listener上。","type":"string"},"admin_state_up":{"description":"转发策略的管理状态,默认为true。\n\n不支持该字段,请勿使用。","type":"boolean"},"created_at":{"description":"创建时间。格式:yyyy-MM-dd'T'HH:mm:ss'Z',UTC时区。\n\n注意:独享型实例的历史数据以及共享型实例下的资源,不返回该字段。","type":"string"},"description":{"description":"转发策略描述信息。","type":"string"},"fixed_response_config":{"$ref":"#/definitions/FixtedResponseConfig"},"id":{"description":"转发策略ID。","type":"string"},"listener_id":{"description":"转发策略所属的监听器ID。","type":"string"},"name":{"description":"转发策略名称","maxLength":255,"minLength":1,"type":"string"},"position":{"description":"转发策略的优先级,不支持更新。\n\n不支持该字段,请勿使用。","format":"int32","maximum":100,"minimum":1,"type":"integer"},"priority":{"description":"转发策略的优先级。数字越小表示优先级越高,同一监听器下不允许重复。\n\n当监听器的高级转发策略功能(enhance_l7policy_enable)开启后才会生效,未开启传入该字段会报错。\n\n当action为REDIRECT_TO_LISTENER时,仅支持指定为0,优先级最高。\n当关联的listener没有开启enhance_l7policy_enable,按原有policy的排序逻辑,自动排序。\n各域名之间优先级独立,相同域名下,按path的compare_type排序,精确>前缀>正则,\n匹配类型相同时,path的长度越长优先级越高。若policy下只有域名rule,没有路径rule,默认path为前缀匹配/。\n\n当关联的listener开启了enhance_l7policy_enable,且不传该字段,则新创建的转发策略的优先级的值为:\n同一监听器下已有转发策略的优先级的最大值+1。\n因此,若当前已有转发策略的优先级的最大值是10000,新创建会因超出取值范围10000而失败。\n此时可通过传入指定priority,或调整原有policy的优先级来避免错误。若监听器下没有转发策略,则新建的转发策略的优先级为1。\n\n共享型负载均衡器下的转发策略不支持该字段。","format":"int32","type":"integer"},"project_id":{"description":"转发策略所在的项目ID。","type":"string"},"provisioning_status":{"description":"转发策略的配置状态。\n\n取值范围:\n- ACTIVE: 默认值,表示正常。\n- ERROR: 表示当前策略与同一监听器下的其他策略存在相同的规则配置。","type":"string"},"redirect_listener_id":{"description":"转发到的listener的ID,当action为REDIRECT_TO_LISTENER时必选。\n\n使用说明:\n- 只支持protocol为HTTPS/TERMINATED_HTTPS的listener。\n- 不能指定为其他loadbalancer下的listener。\n- 当action为REDIRECT_TO_POOL时,创建或更新时不能传入该参数。","type":"string"},"redirect_pool_id":{"description":"转发到pool的ID。当action为REDIRECT_TO_POOL时生效。","type":"string"},"redirect_pools_extend_config":{"$ref":"#/definitions/RedirectPoolsExtendConfig"},"redirect_url":{"description":"转发到的url。必须满足格式: protocol://host:port/path?query。\n\n不支持该字段,请勿使用。","pattern":"(https?|ftp|file)://[-A-Za-z0-9+&amp;@#/%?=~_|!:,.;]+[-A-Za-z0-9+&amp;@#/%=~_|]","type":"string"},"redirect_url_config":{"$ref":"#/definitions/RedirectUrlConfig"},"rules":{"description":"转发策略关联的转发规则列表","items":{"$ref":"#/definitions/RuleRef"},"type":"array"},"updated_at":{"description":"更新时间。格式:yyyy-MM-dd'T'HH:mm:ss'Z',UTC时区。\n\n注意:独享型实例的历史数据以及共享型实例下的资源,不返回该字段。","type":"string"}},"required":["action","admin_state_up","description","id","listener_id","name","position","project_id","provisioning_status","redirect_pool_id","redirect_listener_id","redirect_url","rules","redirect_url_config","fixed_response_config"]},"ListL7PoliciesResponseBody":{"description":"This is a auto create Response Object","properties":{"l7policies":{"description":"转发策略对象列表。","items":{"$ref":"#/definitions/L7Policy","description":""},"type":"array"},"page_info":{"$ref":"#/definitions/PageInfo","description":"分页信息。"},"request_id":{"description":"请求ID。\n\n注:自动生成 。","type":"string"}},"required":["l7policies","page_info","request_id"]},"PageInfo":{"description":"分页信息","properties":{"current_count":{"description":"当前的记录数。","format":"int32","type":"integer"},"next_marker":{"description":"分页查询结果中最后一条记录的ID。通常用于查询下一页。","type":"string"},"previous_marker":{"description":"分页查询结果中第一条记录的ID。通常用于配合page_reverse=true查询上一页。","type":"string"}},"required":["previous_marker","current_count"]},"RedirectPoolsExtendConfig":{"description":"转发到的后端主机组的配置。当action为REDIRECT_TO_POOL时生效。","properties":{"rewrite_url_config":{"$ref":"#/definitions/RewriteUrlConfig"},"rewrite_url_enable":{"description":"是否开启url重定向","type":"boolean"}},"type":"object"},"RedirectUrlConfig":{"description":"转发到的url配置。\n\n当监听器的高级转发策略功能(enhance_l7policy_enable)开启后才会生效,未开启传入该字段会报错。\n\n当action为REDIRECT_TO_URL时生效,且为必选字段,其他action不可指定,否则报错。\n\n格式:protocol://host:port/path?query\n\nprotocol、host、port、path不允许同时不传或同时传${xxx}\n(${xxx}表示原值,如${host}表示被转发的请求URL的host部分)。\nprotocol和port传入的值不能与l7policy关联的监听器一致且host、path同时不传或同时传${xxx}。\n\n\n共享型负载均衡器下的转发策略不支持该字段,传入会报错。","properties":{"host":{"default":"${host}","description":"重定向的主机名。字符串只能包含英文字母、数字、“-”、“.”。\n且必须以字母、数字开头。默认值${host}表示继承原值(即与被转发请求保持一致)。","maxLength":128,"minLength":1,"type":"string"},"path":{"default":"${path}","description":"重定向的路径。默认值${path}表示继承原值(即与被转发请求保持一致)。\n\n支持英文字母、数字、_~';@^-%#&$.*+?,=!:|\\\\/()\\[\\]{},且必须以\"/\"开头。","maxLength":128,"minLength":1,"type":"string"},"port":{"default":"${port}","description":"重定向到的端口。默认值${port}表示继承原值(即与被转发请求保持一致)。","maxLength":16,"minLength":1,"type":"string"},"protocol":{"description":"重定向的协议。默认值${protocol}表示继承原值(即与被转发请求保持一致)。\n\n取值:\n- HTTP\n- HTTPS\n- ${protocol}","enum":["HTTP","HTTPS","${protocol}"],"maxLength":36,"minLength":1,"type":"string"},"query":{"default":"${query}","description":"重定向的查询字符串。默认${query}表示继承原值(即与被转发请求保持一致)。举例如下:\n\n若该字段被设置为:${query}&name=my_name,则在转发符合条件的URL\n(如https://www.example.com:8080/elb?type=loadbalancer,\n此时${query}表示type=loadbalancer)时,将会重定向到\nhttps://www.example.com:8080/elb?type=loadbalancer&name=my_name。\n\n只能包含英文字母、数字和特殊字符:!$&'()*+,-./:;=?@^_`。字母区分大小写。","example":"author=xxx","maxLength":128,"minLength":0,"type":"string"},"status_code":{"description":"重定向后的返回码。\n\n取值范围:\n- 301\n- 302\n- 303\n- 307\n- 308","enum":["301","302","303","307","308"],"maxLength":16,"minLength":1,"type":"string"}},"required":["host","path","port","protocol","query","status_code"]},"RewriteUrlConfig":{"description":"转发到的后端主机组的URL配置。rewrite_url_enable为true时,改字段有效。","properties":{"host":{"description":"url host","type":"string"},"path":{"description":"url路径","type":"string"},"query":{"description":"url查询字符串","type":"string"}},"type":"object"},"RuleRef":{"description":"","properties":{"id":{"description":"规则ID。","type":"string"}},"required":["id"]}},"description":null,"group_id":"dbd0be272eaa427280cd04f618f990db","host":"elb.cn-north-4.myhuaweicloud.com","id":"bc87aa2e48e142bdb4111c810a291e63","info_version":"v3","method":"get","name":"ListL7Policies","parameters":{},"paths":{"/v3/{project_id}/elb/l7policies":{"get":{"deprecated":false,"description":"查询七层转发策略列表。","operationId":"ListL7Policies","parameters":[{"description":"IAM鉴权Token","in":"header","name":"X-Auth-Token","required":true,"type":"string","x-order":1},{"description":"项目ID。","in":"path","name":"project_id","required":true,"type":"string","x-order":2},{"description":"上一页最后一条记录的ID。\n\n使用说明:\n- 必须与limit一起使用。\n- 不指定时表示查询第一页。\n- 该字段不允许为空或无效的ID。","in":"query","name":"marker","required":false,"type":"string","x-order":3},{"default":2000,"description":"每页返回的个数。","format":"int32","in":"query","maximum":2000,"minimum":0,"name":"limit","required":false,"type":"integer","x-order":4},{"description":"是否反向查询。\n\n取值:\n- true:查询上一页。\n- false:查询下一页,默认。\n\n使用说明:\n- 必须与limit一起使用。\n- 当page_reverse=true时,若要查询上一页,marker取值为当前页返回值的previous_marker。","in":"query","name":"page_reverse","required":false,"type":"boolean","x-order":5},{"collectionFormat":"multi","description":"企业项目ID。不传时查询default企业项目\"0\"下的资源,鉴权按照default企业项目鉴权;\n如果传值,则传已存在的企业项目ID或all_granted_eps(表示查询所有企业项目)进行查询。\n\n支持多值查询,查询条件格式:\n*enterprise_project_id=xxx&enterprise_project_id=xxx*。","in":"query","items":{"type":"string"},"name":"enterprise_project_id","required":false,"type":"array","x-order":6},{"collectionFormat":"multi","description":"转发策略ID。\n\n支持多值查询,查询条件格式:*id=xxx&id=xxx*。","in":"query","items":{"type":"string"},"name":"id","required":false,"type":"array","x-order":7},{"collectionFormat":"multi","description":"转发策略名称。\n\n支持多值查询,查询条件格式:**name=xxx&name=xxx**。","in":"query","items":{"type":"string"},"name":"name","required":false,"type":"array","x-order":8},{"collectionFormat":"multi","description":"转发策略额描述信息。\n\n支持多值查询,查询条件格式:*description=xxx&description=xxx*。","in":"query","items":{"type":"string"},"name":"description","required":false,"type":"array","x-order":9},{"description":"转发策略的管理状态,默认为true。\n\n不支持该字段,请勿使用。","in":"query","name":"admin_state_up","required":false,"type":"boolean","x-order":10},{"collectionFormat":"multi","description":"转发策略所属的监听器ID。\n\n支持多值查询,查询条件格式:*******listener_id=xxx&listener_id=xxx*******。","in":"query","items":{"type":"string"},"name":"listener_id","required":false,"type":"array","x-order":11},{"collectionFormat":"multi","description":"转发策略的优先级。\n\n支持多值查询,查询条件格式:****position=xxx&position=xxx****。\n\n不支持该字段,请勿使用。","in":"query","items":{"format":"int32","type":"integer"},"name":"position","required":false,"type":"array","x-order":12},{"collectionFormat":"multi","description":"转发策略的转发动作。\n\n取值:\n- REDIRECT_TO_POOL:转发到后端云服务器组。\n- REDIRECT_TO_LISTENER:重定向到监听器。\n- REDIRECT_TO_URL:重定向到URL。\n- FIXED_RESPONSE:返回固定响应体。\n\n支持多值查询,查询条件格式:*****action=xxx&action=xxx*****。","in":"query","items":{"type":"string"},"name":"action","required":false,"type":"array","x-order":13},{"collectionFormat":"multi","description":"转发到的url。必须满足格式: protocol://host:port/path?query。\n\n支持多值查询,查询条件格式:****redirect_url=xxx&redirect_url=xxx****。\n\n不支持该字段,请勿使用。","in":"query","items":{"type":"string"},"name":"redirect_url","required":false,"type":"array","x-order":14},{"collectionFormat":"multi","description":"转发到pool的ID。\n\n支持多值查询,查询条件格式:***redirect_pool_id=xxx&redirect_pool_id=xxx***。","in":"query","items":{"type":"string"},"name":"redirect_pool_id","required":false,"type":"array","x-order":15},{"collectionFormat":"multi","description":"转发到的listener的ID。\n\n支持多值查询,查询条件格式:**redirect_listener_id=xxx&redirect_listener_id=xxx**。","in":"query","items":{"type":"string"},"name":"redirect_listener_id","required":false,"type":"array","x-order":16},{"collectionFormat":"multi","description":"转发策略的配置状态。\n\n取值范围:\n- ACTIVE: 默认值,表示正常。\n- ERROR: 表示当前策略与同一监听器下的其他策略存在相同的规则配置。\n\n支持多值查询,查询条件格式:*provisioning_status=xxx&provisioning_status=xxx*。","in":"query","items":{"type":"string"},"name":"provisioning_status","required":false,"type":"array","x-order":17},{"description":"是否显示转发策略下的rule详细信息。\n\n取值:\n- true:显示policy下面的rule的详细信息。\n- false:只显示policy下面的rule的id信息","in":"query","name":"display_all_rules","required":false,"type":"boolean","x-order":18},{"description":"转发策略的优先级。数值越小,优先级越高。\n\n支持多值查询,查询条件格式:*priority=xxx&priority=xxx*。","in":"query","items":{"format":"int32","type":"integer"},"name":"priority","required":false,"type":"array"}],"responses":{"200":{"description":"操作正常返回。","examples":{"application/json":{"l7policies":[{"action":"REDIRECT_TO_POOL","admin_state_up":true,"description":"","fixed_response_config":null,"id":"01832d99-bbd8-4340-9d0c-6ff8f7a37307","listener_id":"cdb03a19-16b7-4e6b-bfec-047aeec74f56","name":"l7policy-67","position":100,"priority":null,"project_id":"7a9941d34fc1497d8d0797429ecfd354","provisioning_status":"ACTIVE","redirect_listener_id":null,"redirect_pool_id":"768e9e8c-e7cb-4fef-b24b-af9399dbb240","redirect_url":null,"redirect_url_config":null,"rules":[{"id":"c5c2d625-676b-431e-a4c7-c59cc2664881"}]},{"action":"FIXED_RESPONSE","admin_state_up":true,"description":"","fixed_response_config":{"content_type":"text/plain","message_body":"","status_code":"207"},"id":"049a8635-9754-444e-94aa-678993b39cd6","listener_id":"bd782cbf-fb5e-411a-9295-530bdec05058","name":"l7policy-67","position":6,"priority":2,"project_id":"7a9941d34fc1497d8d0797429ecfd354","provisioning_status":"ACTIVE","redirect_listener_id":null,"redirect_pool_id":null,"redirect_url":null,"redirect_url_config":null,"rules":[{"id":"390f3a9f-670d-4ca6-b72c-6be8a48a8a00"}]}],"page_info":{"current_count":2,"next_marker":"2587d8b1-9e8d-459c-9081-7bccaa075d2b","previous_marker":"01832d99-bbd8-4340-9d0c-6ff8f7a37307"},"request_id":"d3c67339-be91-4813-bb24-85728a5d326a"}},"schema":{"$ref":"#/definitions/ListL7PoliciesResponseBody"}}},"summary":"查询转发策略列表","tags":["转发策略"],"x-apiexplorer-hide":"false","x-constraint":"- 分页查询使用的参数为marker、limit、page_reverse。\n\n- marker和page_reverse只有和limit一起使用时才会生效,单独使用无效。","x-first-open-time":"2019-04-30","x-hybridcloud":"","x-is-registered":"Y","x-name":"查询转发策略列表","x-open-region-cloud":"hc,hk,hws_eu,otc,ocb,tlf,ctc,hcso,sbc,g42,tm,cmcc,hk_g42,dt_test,hcso_dt,mix,hk_sbc,hws_ocb,fcs,fcs_dt,dt","x-order":2,"x-publishpath":"","x-request-examples-description-1":"查询转发策略列表","x-request-examples-url-1":"GET https://{ELB_Endpoint}/v3/99a3fff0d03c428eac3678da6a7d0f24/elb/l7policies?display_all_rules=true","x-scope":"Commercial","x-source":"SelfDeveloped","x-support-sdk":"Y","x-version":"v3"}}},"product_short":"ELB","region_id":"cn-north-4","schemes":["HTTPS"],"security_definitions":null,"summary":"查询转发策略列表","tags":"转发策略","uri":null,"version":"2.0"}