{"base_path":"/","components":null,"consumes":"[\"application/json\"]","definitions":{"CreateListenerReq":{"description":"创建监听器的请求体","properties":{"admin_state_up":{"description":"监听器器的管理状态。只支持设定为true,该字段的值无实际意义。","type":"boolean"},"client_ca_tls_container_ref":{"description":"监听器使用的CA证书ID。","type":"string"},"connection_limit":{"default":-1,"description":"监听器的最大连接数。该字段为预留字段,暂未启用。默认为-1。","format":"int32","maximum":2147483647,"type":"integer"},"default_pool_id":{"description":"监听器的默认后端云服务器组ID。当请求没有匹配的转发策略时,转发到默认后端云服务器上处理。当该字段为null时,表示监听器无默认的后端云服务器组。","type":"string"},"default_tls_container_ref":{"description":"监听器使用的服务器证书ID。当protocol参数为TERMINATED_HTTPS时,为必选字段","type":"string"},"description":{"description":"监听器的描述信息","maxLength":255,"minLength":0,"type":"string"},"http2_enable":{"description":"HTTP2功能的开启状态。该字段只有当监听器的协议是TERMINATED_HTTPS时才有意义。","type":"boolean"},"insert_headers":{"$ref":"#/definitions/InsertHeader","description":"可选的HTTP头插入,可以将从负载均衡器到后端云服务器的路径中需要被后端云服务器用到的信息写入HTTP中,随报文传递到后端云服务器使。例如可通过X-Forwarded-ELB-IP开关,将负载均衡器的弹性公网IP传到后端云服务器"},"loadbalancer_id":{"description":"监听器关联的负载均衡器 ID","type":"string"},"name":{"description":"监听器名称。","maxLength":255,"minLength":0,"type":"string"},"protection_reason":{"description":"设置保护的原因\n>仅当protection_status为consoleProtection时有效。","maxLength":255,"minLength":0,"type":"string","x-open-region-cloud":"hc,hk"},"protection_status":{"description":"修改保护状态, 取值:\n- nonProtection: 不保护,默认值为nonProtection\n- consoleProtection: 控制台修改保护","enum":["nonProtection","consoleProtection"],"type":"string","x-open-region-cloud":"hc,hk"},"protocol":{"description":"监听器的监听协议","enum":["UDP","TCP","HTTP","TERMINATED_HTTPS"],"type":"string"},"protocol_port":{"description":"监听器的监听端口。如果监听协议为UDP,端口号不支持4789。","format":"int32","maximum":65535,"minimum":1,"type":"integer"},"sni_container_refs":{"description":"监听器使用的SNI证书(带域名的服务器证书)ID的列表,最大支持50个sni证书\n该字段不为空列表时,SNI特性开启。该字段为空列表时,SNI特性关闭。","items":{"type":"string"},"type":"array"},"tenant_id":{"description":"监听器所在的项目ID。","maxLength":255,"minLength":0,"type":"string"},"tls_ciphers_policy":{"description":"监听器使用的安全策略,仅对TERMINATED_HTTPS协议类型的监听器有效,且默认值为tls-1-0。\n\n取值包括:tls-1-0, tls-1-1, tls-1-2, tls-1-2-strict多种安全策略。","enum":["tls-1-0","tls-1-1","tls-1-2","tls-1-2-strict"],"type":"string"}},"required":["loadbalancer_id","protocol","protocol_port"],"type":"object"},"CreateListenerRequestBody":{"description":"This is a auto create Body Object","properties":{"listener":{"$ref":"#/definitions/CreateListenerReq","description":"监听器对象"}},"required":["listener"]},"CreateListenerResponseBody":{"description":"This is a auto create Response Object","properties":{"listener":{"$ref":"#/definitions/ListenerResp","description":"监听器对象"}},"required":["listener"]},"ElbError":{"description":"错误信息响应体","properties":{"error":{"description":"错误信息","type":"string"}},"required":["error"]},"InsertHeader":{"description":"监听器HTTP扩展头部对象。","properties":{"X-Forwarded-ELB-IP":{"description":"负载均衡器弹性公网IP透传开关。","type":"boolean"},"X-Forwarded-Host":{"default":true,"description":"X-Forwarded-Host设为true可以将客户请求头的第一个X-Forwarded-Host设置为请求头的Host带到后端云服务器。","type":"boolean"}}},"ListenerResp":{"description":"监听器响应体","properties":{"admin_state_up":{"description":"监听器的管理状态。只支持设定为true,该字段的值无实际意义。","type":"boolean"},"client_ca_tls_container_ref":{"description":"监听器使用的CA证书ID。","type":"string"},"connection_limit":{"description":"监听器的最大连接数。该字段为预留字段,暂未启用。默认为-1。","format":"int32","minimum":-1,"type":"integer"},"created_at":{"description":"监听器的创建时间。","maxLength":19,"minLength":0,"type":"string"},"default_pool_id":{"description":"监听器的默认后端云服务器组ID。当请求没有匹配的转发策略时,转发到默认后端云服务器上处理。","type":"string"},"default_tls_container_ref":{"description":"监听器使用的服务器证书ID。","type":"string"},"description":{"description":"监听器的描述信息","maxLength":255,"minLength":0,"type":"string"},"http2_enable":{"description":"HTTP2功能的开启状态。该字段只有当监听器的协议是TERMINATED_HTTPS时生效。","type":"boolean"},"id":{"description":"监听器ID","type":"string"},"insert_headers":{"$ref":"#/definitions/InsertHeader","description":"可选的HTTP头插入,可以将从负载均衡器到后端云服务器的路径中需要被后端云服务器用到的信息写入HTTP中,随报文传递到后端云服务器使。例如可通过X-Forwarded-ELB-IP开关,将负载均衡器的弹性公网IP传到后端云服务器"},"loadbalancers":{"description":"监听器绑定的负载均衡器ID的列表。","items":{"$ref":"#/definitions/ResourceList"},"type":"array"},"name":{"description":"监听器名称。","maxLength":255,"minLength":0,"type":"string"},"project_id":{"description":"监听器所在的项目ID。","type":"string"},"protection_reason":{"description":"设置保护的原因。\n>仅当protection_status为consoleProtection时有效。","maxLength":255,"minLength":0,"type":"string","x-open-region-cloud":"hc,hk"},"protection_status":{"description":"修改保护状态, 取值:\n- nonProtection: 不保护,默认值为nonProtection\n- consoleProtection: 控制台修改保护","enum":["nonProtection","consoleProtection"],"type":"string","x-open-region-cloud":"hc,hk"},"protocol":{"description":"监听器的监听协议","enum":["UDP","TCP","HTTP","TERMINATED_HTTPS"],"type":"string"},"protocol_port":{"description":"监听器的监听端口。","format":"int32","maximum":65535,"minimum":1,"type":"integer"},"sni_container_refs":{"description":"监听器使用的SNI证书(带域名的服务器证书)ID的列表。","items":{"type":"string"},"type":"array"},"tags":{"description":"监听器的标签。","items":{"type":"string"},"type":"array"},"tenant_id":{"description":"监听器所在的项目ID。","maxLength":255,"minLength":0,"type":"string"},"tls_ciphers_policy":{"description":"监听器使用的安全策略,仅对TERMINATED_HTTPS协议类型的监听器有效,且默认值为tls-1-0。\n\n取值包括:tls-1-0, tls-1-1, tls-1-2, tls-1-2-strict多种安全策略","type":"string"},"updated_at":{"description":"监听器的更新时间。","maxLength":19,"minLength":0,"type":"string"}},"required":["id","tenant_id","name","description","admin_state_up","loadbalancers","connection_limit","http2_enable","protocol","protocol_port","default_pool_id","default_tls_container_ref","client_ca_tls_container_ref","sni_container_refs","tags","created_at","updated_at","insert_headers","project_id","tls_ciphers_policy"],"type":"object"},"ResourceList":{"description":"资源对象id列表。","properties":{"id":{"description":"资源ID","type":"string"}},"required":["id"]}},"description":null,"group_id":"dbd0be272eaa427280cd04f618f990db","host":"elb.cn-north-4.myhuaweicloud.com","id":"17b79b0b48634957a55e9b40b3b8c17d","info_version":"v2","method":"post","name":"CreateListener","parameters":{},"paths":{"/v2/{project_id}/elb/listeners":{"post":{"deprecated":false,"description":"创建与负载均衡器绑定的监听器。","operationId":"CreateListener","parameters":[{"description":"This is a auto create Body Object","in":"body","name":"CreateListenerRequestBody","required":true,"schema":{"$ref":"#/definitions/CreateListenerRequestBody"}},{"description":"用户token","in":"header","name":"X-Auth-Token","required":true,"type":"string","x-order":2},{"description":"项目id","in":"path","name":"project_id","required":true,"type":"string","x-order":1}],"responses":{"201":{"description":"Created","examples":{"application/json":{"listener":{"admin_state_up":true,"client_ca_tls_container_ref":null,"connection_limit":-1,"created_at":"2019-03-06T04:00:07","default_pool_id":null,"default_tls_container_ref":null,"description":"","http2_enable":false,"id":"7f941f5c-80dc-43ac-8dfd-976fab49fa7a","insert_headers":{"X-Forwarded-ELB-IP":true},"loadbalancers":[{"id":"0416b6f1-877f-4a51-987e-978b3f084253"}],"name":"listener-test","project_id":"601240b9c5c94059b63d484c92cfe308","protection_reason":null,"protection_status":null,"protocol":"TCP","protocol_port":81,"sni_container_refs":[],"tags":[],"tenant_id":"601240b9c5c94059b63d484c92cfe308","updated_at":"2019-03-06T04:00:07"}}},"schema":{"$ref":"#/definitions/CreateListenerResponseBody"}},"400":{"description":"Bad Request","schema":{"$ref":"#/definitions/ElbError"}},"401":{"description":"Unauthorized","schema":{"$ref":"#/definitions/ElbError"}},"403":{"description":"Forbidden","schema":{"$ref":"#/definitions/ElbError"}},"404":{"description":"Not Found","schema":{"$ref":"#/definitions/ElbError"}},"408":{"description":"Request Timeout","schema":{"$ref":"#/definitions/ElbError"}}},"summary":"创建监听器","tags":["监听器"],"x-constraint":"default_pool_id有如下限制:不能更新为其他监听器的default_pool。不能更新为其他监听器关联的转发策略所使用的pool。监听器和与之绑定的后端云服务器的对应关系如下:监听器的protocol为TCP时,后端云服务器组的protocol必须为TCP。监听器的protocol为UDP时,后端云服务器组的protocol必须为UDP。监听器的protocol为HTTP或TERMINATED_HTTPS时,后端云服务器组的protocol必须为HTTP。","x-first-open-time":"2017-03-30","x-hybridcloud":"true","x-is-registered":"Y","x-name":"创建监听器","x-open-region-cloud":"hc,hk,otc,ocb,ctc,ct","x-order":42,"x-publishpath":"","x-request-examples-1":"POST https://{ELB_Endpoint}/v2/601240b9c5c94059b63d484c92cfe308/elb/listeners\n{\n    \"listener\": {\n        \"protocol_port\": 81,\n        \"protocol\": \"TCP\",\n        \"loadbalancer_id\": \"0416b6f1-877f-4a51-987e-978b3f084253\",\n        \"name\": \"listener-test\",\n        \"admin_state_up\": true,\n        \"insert_headers\": {\n            \"X-Forwarded-ELB-IP\": true\n        }\n    }\n}","x-request-examples-text-1":"POST https://{ELB_Endpoint}/v2/601240b9c5c94059b63d484c92cfe308/elb/listeners\n{\n    \"listener\": {\n        \"protocol_port\": 81,\n        \"protocol\": \"TCP\",\n        \"loadbalancer_id\": \"0416b6f1-877f-4a51-987e-978b3f084253\",\n        \"name\": \"listener-test\",\n        \"admin_state_up\": true,\n        \"insert_headers\": {\n            \"X-Forwarded-ELB-IP\": true\n        }\n    }\n}","x-scope":"Commercial","x-source":"Native","x-support-sdk":"Y","x-version":"v2"}}},"product_short":"ELB","region_id":"cn-north-4","schemes":["HTTPS"],"security_definitions":null,"summary":"创建监听器","tags":"监听器","uri":null,"version":"2.0"}