{"base_path":"/","components":null,"consumes":"[\"application/json;charset=UTF-8\"]","definitions":{"CloneListenerOption":{"description":"监听器复制到实例相关配置参数。","properties":{"loadbalancer_id":{"description":"**参数解释**:新监听器所在的负载均衡器ID(UUID)。\n**约束限制**:\n- 不支持复制到网关型负载均衡器。\n- 目的负载均衡器类型需要支持源监听器协议。源监听器协议为HTTP、HTTPS,目的负载均衡器需要为应用型负载均衡器;源监听器协议为TCP、UDP、TLS,目的负载均衡器需要为网络型负载均衡器。\n- 只支持共享型负载均衡器复制到共享型负载均衡器,独享型负载均衡器复制到独享型负载均衡器。\n- 源监听器的负载均衡器启用IP类型后端转发,目的负载均衡器也需要启动IP类型后端转发功能。\n- 源监听器协议为TLS,目的负载均衡器需要支持创建TLS协议监听器。\n**取值范围**:标准的UUID格式,长度为36个字符。\n**默认取值**:不涉及","maxLength":36,"minLength":0,"type":"string"},"name":{"description":"**参数解释**:新监听器的名称。\n**约束限制**:不涉及\n**取值范围**:[0-255]个字符,传入空字符串则取默认值。\n**默认取值**:原监听器名称+ “-copy”。","example":"listener_TCP_80-copy","maxLength":255,"minLength":0,"type":"string"},"port_ranges":{"description":"**参数解释**:端口监听范围(闭区间),最多指定10个端口组,每个组范围不可有重叠部分。\n**约束限制**:\n- 仅当protocol_port为0或未传入protocol_port时可以传入该字段。\n- 仅TCP, UDP,TLS监听器支持该字段。\n- 不能与目的负载均衡器下已有端口冲突","items":{"$ref":"#/definitions/PortRange"},"type":"array"},"protocol_port":{"description":"**参数解释**:新监听器的监听端口。\n**约束限制**:\n- 不能与目的负载均衡器下已有监听器监听端口重复。\n- 0表示开启监听端口范围的能力,此时port_ranges为必填字段。\n- 共享型负载均衡器上的HTTP和TERMINATED_HTTPS监听器不支持设置21端口。\n**取值范围**:0-65535\n**默认取值**:不涉及","example":80,"format":"int32","maximum":65535,"minimum":1,"type":"integer"},"reuse_pool":{"description":"**参数解释**:新监听器是否复用或复制源监听器的后端服务器组和后端服务器的标识。\n- 复用:目的监听器将会直接使用源监听器的后端服务器组。\n- 复制:系统将会根据原有配置创建新的后端服务器组,然后将其关联到目的监听器使用。\n**约束限制**:\n- 配置为true时,需要开启后端服务器组多挂实例功能。\n- 只在独享型场景复制、同VPC场景可配。\n**取值范围**:\n- true:复用源监听器的后端服务器组。\n- false:复制源监听器的后端服务器组。\n**默认取值**:false","example":false,"type":"boolean"},"subnet_mapping_list":{"description":"**参数解释**:源监听器下后端服务器子网信息和新监听器下后端服务器子网信息一一对应关系。\n**约束限制**:\n- 将监听器复制到不同VPC下的负载均衡器时,该字段必填。复制到同一个VPC下的负载均衡器时不填。\n- 若源监听器所在负载均衡器已开启ip_target_enable(该功能默认不开启),则不允许跨VPC复制,即该字段不允许填。\n- 每一组subnet_cidr_id都需要是新监听器下后端服务器的VPC子网ID,每一组dst_subnet_cidr_id都需要为源监听器下后端服务器的的VPC子网ID,不允许少填多填、或重复对应关系。\n- 每一组的subnet_cidr_id和dst_subnet_cidr_id的两个子网必须存在且网段相同。","example":"      \"subnet_mapping_list\": [         {           \"subnet_cidr_id\": \"c1a7fe37-6587-4b14-927e-a848d2ea8c28\",           \"dst_subnet_cidr_id\": \"00fb0ddb-30ba-4917-997d-50ab9e18225c\"         }       ]","items":{"$ref":"#/definitions/SubnetMappingList"},"type":"array"}},"required":["loadbalancer_id"],"type":"object"},"CloneListenerRequestBody":{"description":"复制监听器接口请求体。","properties":{"target_listener_params":{"description":"**参数解释**:复制后的新监听器相关配置。\n**约束限制**:不涉及","items":{"$ref":"#/definitions/CloneListenerOption"},"type":"array"}},"required":["target_listener_params"],"type":"object"},"CloneListenerResp":{"description":"clone出的监听器信息。","properties":{"id":{"description":"**参数解释**:新监听器ID。\n**取值范围**:标准的UUID格式,长度为36个字符。","example":"81fdfab0-35c0-476e-96df-e00797076843","maxLength":36,"minLength":1,"type":"string"},"loadbalancer_id":{"description":"**参数解释**:目的负载均衡器ID。\n**取值范围**:标准的UUID格式,长度为36个字符。","example":"fb624475-734a-470a-85ed-bd8828bae924","maxLength":36,"minLength":1,"type":"string"},"port_ranges":{"description":"**参数解释**:端口监听范围(闭区间)。","items":{"$ref":"#/definitions/ResPortRange"},"type":"array"},"protocol_port":{"description":"**参数解释**:新监听器监听端口。\n**取值范围**:1-65535","example":443,"format":"int32","maximum":65535,"minimum":1,"type":"integer"}},"type":"object"},"CloneListenerResponseBody":{"properties":{"job_id":{"description":"**参数解释**:监听器复制任务的ID,任务详情可通过GET /v3/{project_id}/elb/jobs/{job_id}进行查询。\n**取值范围**:标准的UUID格式,长度为36个字符。","example":"aa132002-c0a8-473b-82b4-69fd2d6f87d2","type":"string"},"listener_list":{"description":"**参数解释**:新监听器相关信息。","items":{"$ref":"#/definitions/CloneListenerResp"},"type":"array"},"request_id":{"description":"**参数解释**:请求的ID 。\n**取值范围**:由数字、小写字母和中划线(-)组成的字符串,自动生成。","example":"36aa369755242f2df2aef846f21646df","maxLength":36,"minLength":1,"type":"string"}},"type":"object"},"PortRange":{"properties":{"end_port":{"description":"**参数解释**:结束端口。\n\n**约束限制**:大于等于起始端口。\n\n**取值范围**:1-65535\n\n**默认取值**:不涉及","format":"int32","maximum":65535,"minimum":1,"type":"integer"},"start_port":{"description":"**参数解释**:起始端口。\n\n**约束限制**:不涉及\n\n**取值范围**:1-65535\n\n**默认取值**:不涉及","format":"int32","maximum":65535,"minimum":1,"type":"integer"}},"type":"object"},"ResPortRange":{"description":"端口监听范围(闭区间),最多指定20个端口组,每个组范围不可有重叠部分\n仅当protocol_port为0时可以传入。","properties":{"end_port":{"description":"**参数解释**:结束端口。\n**取值范围**:1-65535","format":"int32","type":"integer"},"start_port":{"description":"**参数解释**:起始端口。\n**取值范围**:1-65535","format":"int32","type":"integer"}},"required":["start_port","end_port"],"type":"object"},"SubnetMappingList":{"description":"源子网信息和目标子网的对应关系","properties":{"dst_subnet_cidr_id":{"description":"**参数解释**:新监听器下后端服务器需要绑定的VPC子网ID。\n\n**约束限制**:该VPC子网ID需要存在,且与源子网网段相同。\n\n**取值范围**:标准的UUID格式,长度为36个字符。\n\n**默认取值**:不涉及","example":"00fb0ddb-30ba-4917-997d-50ab9e18225c","maxLength":36,"minLength":1,"type":"string"},"subnet_cidr_id":{"description":"**参数解释**:源监听器下后端服务器所在VPC的子网ID。\n\n**约束限制**:不涉及\n\n**取值范围**:标准的UUID格式,长度为36个字符。\n\n**默认取值**:不涉及","example":"c1a7fe37-6587-4b14-927e-a848d2ea8c28","maxLength":36,"minLength":1,"type":"string"}},"required":["subnet_cidr_id","dst_subnet_cidr_id"],"type":"object"}},"description":null,"group_id":"dbd0be272eaa427280cd04f618f990db","host":"elb.cn-north-4.myhuaweicloud.com","id":"61b2b3628f0642e8a91791b3c29532a3","info_version":"v3","method":"post","name":"CloneListener","parameters":{},"paths":{"/v3/{project_id}/elb/listeners/{listener_id}/clone":{"post":{"description":"复制已有的监听器到同VPC内的负载均衡器。\n- 仅支持同VPC实例间使用监听器复制功能。\n- 不支持网关型LB下监听器进行复制,也不支持复制到网关型LB下。\n- 仅同类型实例之间可以使用监听器复制功能。\n- 对复制的源监听器有如下限制:后端服务器总数不能超过1000;转发策略总数不能超过100。\n- 源监听器所在负载均衡器和目的监听器所在负载均衡器不能处于冻结、迁移状态。\n- 源监听器中若配置quic_config,复制后为null。\n- 七层转发策略配置为重定向到监听器,该转发策略不会进行复制。","operationId":"CloneListener","parameters":[{"description":"**参数解释**:IAM鉴权Token。\n\n**约束限制**:不涉及\n\n**取值范围**:不涉及\n\n**默认取值**:不涉及","in":"header","name":"X-Auth-Token","required":true,"type":"string"},{"description":"**参数解释**:复制监听器请求体。\n**约束限制**:不涉及","in":"body","name":"CloneListenerRequestBody","required":true,"schema":{"$ref":"#/definitions/CloneListenerRequestBody"}},{"description":"**参数解释**:项目ID。获取方式请参见[获取项目ID](elb_fl_0008.xml)。\n\n**约束限制**:不涉及\n\n**取值范围**:长度为32个字符,由小写字母和数字组成。\n\n**默认取值**:不涉及","in":"path","name":"project_id","required":true,"type":"string"},{"description":"**参数解释**:被复制监听器ID(UUID)。\n\n**约束限制**:不涉及\n\n**取值范围**:标准的UUID格式,长度为36个字符。\n\n**默认取值**:不涉及","in":"path","name":"listener_id","required":true,"type":"string"}],"responses":{"200":{"description":"操作正常返回。","examples":{"application/json":{"job_id":"aa132002-c0a8-473b-82b4-69fd2d6f87d2","listener_list":[{"id":"81fdfab0-35c0-476e-96df-e00797076843","loadbalancer_id":"fb624475-734a-470a-85ed-bd8828bae924","port_ranges":null,"protocol_port":425}],"request_id":"11750ade-148f-4498-bd7a-e07190a1f5fe"}},"schema":{"$ref":"#/definitions/CloneListenerResponseBody"}}},"summary":"复制已有监听器","tags":["监听器"],"x-api-type":"open-api","x-apiexplorer-hide":false,"x-hybridcloud":"","x-is-registered":"Y","x-name":"复制已有监听器","x-open-region-cloud":"hc,hk","x-order":1,"x-publishpath":"","x-request-examples-1":{"target_listener_params":[{"loadbalancer_id":"fb624475-734a-470a-85ed-bd8828bae924","name":"xx-clone","protocol_port":425,"reuse_pool":false}]},"x-request-examples-description-1":"复制已有监听器。","x-request-examples-text-1":{"target_listener_params":[{"loadbalancer_id":"fb624475-734a-470a-85ed-bd8828bae924","name":"xx-clone","protocol_port":425,"reuse_pool":false}]},"x-request-examples-url-1":"POST https://{ELB_Endpoint}/v3/{project_id}/elb/listeners/{listener_id}/clone","x-scope":"Commercial","x-source":"SelfDeveloped","x-support-sdk":"Y","x-version":"v3"}}},"product_short":"ELB","region_id":"cn-north-4","schemes":["HTTPS"],"security_definitions":null,"summary":"复制已有监听器","tags":"监听器","uri":null,"version":"2.0"}