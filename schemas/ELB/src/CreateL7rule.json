{"base_path":"/","components":null,"consumes":"[\"application/json;charset=UTF-8\"]","definitions":{"CreateL7RuleRequestBody":{"description":"This is a auto create Body Object","properties":{"rule":{"$ref":"#/definitions/CreateRuleOption","description":"**参数解释**:转发规则对象。\n\n**约束限制**:不涉及"}},"required":["rule"]},"CreateL7RuleResponseBody":{"description":"This is a auto create Response Object","properties":{"request_id":{"description":"**参数解释**:请求ID。\n\n**取值范围**:由数字、小写字母和中划线(-)组成的字符串,自动生成。","type":"string"},"rule":{"$ref":"#/definitions/L7Rule","description":"**参数解释**:转发规则对象。"}},"required":["request_id","rule"]},"CreateRuleCondition":{"description":"","properties":{"key":{"description":"**参数解释**:匹配项的名称。\n\n**约束限制**:同一个rule内的conditions列表中所有key必须相同。\n\n**取值范围**:\n- 当转发规则类别type为HOST_NAME、PATH、METHOD、SOURCE_IP时,该字段固定为空字符串。\n- 当转发规则类别type为HEADER时,key表示请求头参数的名称,value表示请求头参数的值。key的长度限制1-40字符,只允许包含字母、数字和-_。\n- 当转发规则类别type为QUERY_STRING时,key表示查询参数的名称,value表示查询参数的值。key的长度限制为1-128字符,不支持空格,中括号,大括号,尖括号,反斜杠,双引号,'#','&','|',‘%’,‘~’,字母区分大小写。\n\n**默认取值**:不涉及","maxLength":128,"minLength":1,"type":"string"},"value":{"description":"**参数解释**:匹配项的值。\n\n**约束限制**:\n- 同一个rule内的conditions列表中所有key必须相同。\n- 同一个rule内的conditions列表中所有value不允许重复。\n\n**取值范围**:\n- 当转发规则类别type为HOST_NAME时,key固定为空字符串,value表示域名的值。value长度1-128字符,字符串只能包含英文字母、数字、-、.或\\*,必须以字母、数字或\\*开头,\\*只能出现在开头且必须以\\*.开始。\n- 当转发规则类别type为PATH时,key固定为空字符串,value表示请求路径的值。value长度1-128字符。当转发规则的compare_type为STARTS_WITH、EQUAL_TO时,字符串只能包含英文字母、数字、_~';@^-%#&$.*+?,=!:|\\\\/()\\[\\]{},且必须以/开头。\n- 当转发规则类别type为HEADER时,key表示请求头参数的名称,value表示请求头参数的值。value长度限制1-128字符,不支持空格,双引号,支持以下通配符:*(匹配0个或更多字符)和?(正好匹配1个字符)。\n- 当转发规则类别type为QUERY_STRING时,key表示查询参数的名称,value表示查询参数的值。value长度限制为1-128字符,不支持空格,中括号,大括号,尖括号,反斜杠,双引号,'#','&','|',‘%’,‘~’,字母区分大小写,支持通配符:*(匹配0个或更多字符)和?(正好匹配1个字符)\n- 当转发规则类别type为METHOD时,key固定为空字符串,value表示请求方式。value取值范围为:GET, PUT,POST,DELETE, PATCH, HEAD, OPTIONS。\n- 当转发规则类别type为SOURCE_IP时,key固定为空字符串,value表示请求源地址。value为CIDR格式,支持ipv4,ipv6。例如192.168.0.2/32,2049::49/64。\n\n**默认取值**:不涉及","maxLength":128,"minLength":1,"type":"string"}},"required":["value"]},"CreateRuleOption":{"description":"创建L7转发规则器请求","properties":{"admin_state_up":{"description":"**参数解释**:转发规则的管理状态。\n\n**约束限制**:只支持设置为true。\n\n**取值范围**:不涉及\n\n**默认取值**:不涉及","type":"boolean"},"compare_type":{"description":"**参数解释**:转发匹配方式。\n\n**约束限制**:\n- type为HOST_NAME时仅支持EQUAL_TO,支持通配符*。\n- type为PATH时可以为REGEX,STARTS_WITH,EQUAL_TO。\n- type为METHOD、SOURCE_IP时,仅支持EQUAL_TO。\n- type为HEADER、QUERY_STRING,仅支持EQUAL_TO,支持通配符*、?。\n\n**取值范围**:\n- EQUAL_TO 表示精确匹配。\n- REGEX 表示正则匹配。\n- STARTS_WITH 表示前缀匹配。\n\n**默认取值**:不涉及","type":"string"},"conditions":{"description":"**参数解释**:转发规则的匹配条件。\n\n**约束限制**:\n- 当监听器的高级转发策略功能(enhance_l7policy_enable)开启后才会生效。\n- 若转发规则配置了conditions,字段key、字段value的值无意义。\n- 同一个rule内的conditions列表中所有key必须相同,value不允许重复。\n\n**取值范围**:不涉及\n\n**默认取值**:不涉及","items":{"$ref":"#/definitions/CreateRuleCondition"},"type":"array"},"invert":{"description":"**参数解释**:是否反向匹配。\n\n**约束限制**:不涉及\n\n**取值范围**:true、false\n\n**默认取值**:false\n\n不支持该字段,请勿使用。","type":"boolean"},"key":{"description":"**参数解释**:匹配项的名称,比如转发规则匹配类型是请求头匹配,则key表示请求头参数的名称。\n\n**约束限制**:不涉及\n\n**取值范围**:不涉及\n\n**默认取值**:不涉及\n\n不支持该字段,请勿使用。","maxLength":255,"minLength":0,"type":"string"},"project_id":{"description":"**参数解释**:转发规则所在的项目ID。\n\n**约束限制**:不涉及\n\n**取值范围**:不涉及\n\n**默认取值**:不涉及","maxLength":32,"minLength":1,"pattern":"[0-9a-fA-F]{32}","type":"string"},"type":{"description":"**参数解释**:转发规则类别。\n\n**约束限制**:\n- 一个l7policy下创建的l7rule的HOST_NAME,PATH,METHOD,SOURCE_IP不能重复。HEADER、QUERY_STRING支持重复的rule配置。\n\n**取值范围**:\n- HOST_NAME:匹配域名。\n- PATH:匹配请求路径。\n- METHOD:匹配请求方法。\n- HEADER:匹配请求头。\n- QUERY_STRING:匹配请求查询参数。\n- SOURCE_IP:匹配请求源IP地址。\n- COOKIE: 匹配cookie信息。\n\n\n**默认取值**:不涉及","type":"string"},"value":{"description":"**参数解释**:匹配项的值。比如转发规则匹配类型是域名匹配,则value表示域名的值。\n\n**约束限制**:仅当conditions空时该字段生效。\n\n**取值范围**:\n- 当转发规则类别type为HOST_NAME时,字符串只能包含英文字母、数字、-、.或*,必须以字母、数字或*开头。若域名中包含\\*,则\\*只能出现在开头且必须以\\*.开始。当\\*开头时表示通配0~任一个字符。\n- 当转发规则类别type为PATH时,当转发规则的compare_type为STARTS_WITH、EQUAL_TO时,字符串只能包含英文字母、数字、_~';@^-%#&$.*+?,=!:|\\\\/()\\[\\]{},且必须以/开头。\n- 当转发规则类别type为METHOD、SOURCE_IP、HEADER,QUERY_STRING时,该字段无意义,使用conditions来指定key/value。\n\n**默认取值**:不涉及","maxLength":128,"minLength":1,"type":"string"}},"required":["compare_type","value","type"]},"L7Rule":{"description":"L7转发规则","properties":{"admin_state_up":{"description":"**参数解释**:转发规则的管理状。\n\n**取值范围**:固定为true。\n\n不支持该字段,请勿使用。","type":"boolean"},"compare_type":{"description":"**参数解释**:转发规则的匹配方式。\n\n**取值范围**:type为HOST_NAME时可以为EQUAL_TO。type为PATH时可以为REGEX,STARTS_WITH,EQUAL_TO。","type":"string"},"conditions":{"description":"**参数解释**:转发规则的匹配条件。\n\n**取值范围**:不涉及","items":{"$ref":"#/definitions/RuleCondition"},"type":"array"},"created_at":{"description":"**参数解释**:创建时间。\n\n**取值范围**:格式:yyyy-MM-dd'T'HH:mm:ss'Z',UTC时区。\n\n注意:独享型实例的历史数据以及共享型实例下的资源,不返回该字段。","type":"string"},"id":{"description":"**参数解释**:规则ID。\n\n**取值范围**:不涉及","type":"string"},"invert":{"description":"**参数解释**:是否反向匹配。\n\n**取值范围**:不涉及","type":"boolean"},"key":{"description":"**参数解释**:匹配内容的键值。\n\n**取值范围**:不涉及","maxLength":255,"minLength":1,"type":"string"},"project_id":{"description":"**参数解释**:转发规则所在的项目ID。\n\n**取值范围**:不涉及","type":"string"},"provisioning_status":{"description":"**参数解释**:provisioning状态。该字段无效,默认为ACTIVE。\n\n**取值范围**:ACTIVE、PENDING_CREATE 或者ERROR。","type":"string"},"type":{"description":"**参数解释**:转发规则类别。\n\n**取值范围**:\n- HOST_NAME:匹配域名。\n- PATH:匹配请求路径。\n- METHOD:匹配请求方法。\n- HEADER:匹配请求头。\n- QUERY_STRING:匹配请求查询参数。\n- SOURCE_IP:匹配请求源IP地址。\n- COOKIE: 匹配cookie信息。","enum":["HOST_NAME","PATH","METHOD","HEADER","QUERY_STRING","SOURCE_IP"],"type":"string"},"updated_at":{"description":"**参数解释**:更新时间。\n\n**取值范围**:格式:yyyy-MM-dd'T'HH:mm:ss'Z',UTC时区。\n\n注意:独享型实例的历史数据以及共享型实例下的资源,不返回该字段。","type":"string"},"value":{"description":"**参数解释**:匹配内容的值。\n\n**取值范围**:\n- 当type为HOST_NAME时,字符串只能包含英文字母、数字、-.*,必须以字母、数字或*开头。若域名中包含*,则*只能出现在开头且必须以*.开始。当*开头时表示通配0~任一个字符。\n- 当type为PATH时,当转发规则的compare_type为STARTS_WITH、EQUAL_TO时,字符串只能包含英文字母、数字、_~';@^-%#&$.*+?,=!:|\\\\/()\\[\\]{},且必须以/开头。\n- 当type为METHOD、SOURCE_IP、HEADER, QUERY_STRING时,该字段无意义,使用conditions来指定key,value。","maxLength":128,"minLength":1,"type":"string"}},"required":["admin_state_up","compare_type","key","project_id","type","value","provisioning_status","invert","id","conditions"]},"RuleCondition":{"description":"","properties":{"key":{"description":"**参数解释**:匹配项的名称。\n\n**约束限制**:同一个rule内的conditions列表中所有key必须相同。\n\n**取值范围**:\n- 当转发规则类别type为HOST_NAME、PATH、METHOD、SOURCE_IP时,该字段固定为空字符串。\n- 当转发规则类别type为HEADER时,key表示请求头参数的名称,value表示请求头参数的值。key的长度限制1-40字符,只允许包含字母、数字和-_。\n- 当转发规则类别type为QUERY_STRING时,key表示查询参数的名称,value表示查询参数的值。key的长度限制为1-128字符,不支持空格,中括号,大括号,尖括号,反斜杠,双引号,'#','&','|',‘%’,‘~’,字母区分大小写。\n\n**默认取值**:不涉及","maxLength":128,"minLength":1,"type":"string"},"value":{"description":"**参数解释**:匹配项的值。\n\n**约束限制**:同一个rule内的conditions列表中所有value不允许重复。\n\n**取值范围**:\n- 当转发规则类别type为HOST_NAME时,key固定为空字符串,value表示域名的值。value长度1-128字符,字符串只能包含英文字母、数字、-.\\*,必须以字母、数字或\\*开头,\\*只能出现在开头且必须以\\*.开始。\n- 当转发规则类别type为PATH时,key固定为空字符串,value表示请求路径的值。value长度1-128字符。当转发规则的compare_type为STARTS_WITH、EQUAL_TO时,字符串只能包含英文字母、数字、_~';@^-%#&$.*+?,=!:|\\\\/()\\[\\]{},且必须以\"/\"开头。\n- 当转发规则类别type为HEADER时,key表示请求头参数的名称,value表示请求头参数的值。value长度限制1-128字符,不支持空格,双引号,支持以下通配符:*(匹配0个或更多字符)和?(正好匹配1个字符)。\n- 当转发规则类别type为QUERY_STRING时,key表示查询参数的名称,value表示查询参数的值。value长度限制为1-128字符,不支持空格,中括号,大括号,尖括号,反斜杠,双引号,'#','&','|',‘%’,‘~’,字母区分大小写,支持通配符:*(匹配0个或更多字符)和?(正好匹配1个字符)\n- 当转发规则类别type为METHOD时,key固定为空字符串,value表示请求方式。value取值范围为:GET, PUT,POST,DELETE, PATCH, HEAD, OPTIONS。\n\n- 当转发规则类别type为SOURCE_IP时,key固定为空字符串,value表示请求源地址。value为CIDR格式,支持ipv4,ipv6。例如192.168.0.2/32,2049::49/64。\n\n**默认取值**:不涉及","maxLength":128,"minLength":1,"type":"string"}},"required":["key","value"]}},"description":null,"group_id":"dbd0be272eaa427280cd04f618f990db","host":"elb.cn-north-4.myhuaweicloud.com","id":"2d1fd8bae3674c37b2696b7e128b7b5d","info_version":"v3","method":"post","name":"CreateL7Rule","parameters":{},"paths":{"/v3/{project_id}/elb/l7policies/{l7policy_id}/rules":{"post":{"deprecated":false,"description":"创建七层转发规则。","operationId":"CreateL7Rule","parameters":[{"description":"This is a auto create Body Object","in":"body","name":"CreateL7RuleRequestBody","required":true,"schema":{"$ref":"#/definitions/CreateL7RuleRequestBody"}},{"description":"**参数解释**:IAM鉴权Token。\n\n**约束限制**:不涉及\n\n**取值范围**:不涉及\n\n**默认取值**:不涉及","in":"header","name":"X-Auth-Token","required":true,"type":"string","x-order":1},{"description":"**参数解释**:转发策略ID。\n\n**约束限制**:不涉及\n\n**取值范围**:不涉及\n\n**默认取值**:不涉及","in":"path","name":"l7policy_id","required":true,"type":"string","x-order":3},{"description":"**参数解释**:项目ID。获取方式请参见[获取项目ID](elb_fl_0008.xml)。\n\n**约束限制**:不涉及\n\n**取值范围**:长度为32个字符,由小写字母和数字组成。\n\n**默认取值**:不涉及","in":"path","name":"project_id","required":true,"type":"string","x-order":2}],"responses":{"201":{"description":"POST操作正常返回。","examples":{"application/json":{"request_id":"3639f1b7-f04b-496e-9218-ec5a9e493f69","rule":{"admin_state_up":true,"compare_type":"EQUAL_TO","id":"84f4fcae-9c15-4e19-a99f-72c0b08fd3d7","invert":false,"key":null,"project_id":"99a3fff0d03c428eac3678da6a7d0f24","provisioning_status":"ACTIVE","type":"PATH","value":"/bbb.html"}}},"schema":{"$ref":"#/definitions/CreateL7RuleResponseBody"}}},"summary":"创建转发规则","tags":["转发规则"],"x-apiexplorer-hide":"false","x-constraint":"如果l7policy是重定向到listener的话,不允许创建l7rule。","x-first-open-time":"2019-04-30","x-hybridcloud":"","x-is-registered":"Y","x-name":"创建转发规则","x-open-region-cloud":"hc,hk,hws_eu,otc,ocb,tlf,ctc,hcso,ct,sbc,g42,tm,cmcc,hk_g42,hcso_dt,mix,hk_sbc,hws_ocb,hk_vdf,srg,fcs,fcs_dt,dt","x-order":1,"x-publishpath":"","x-request-examples-1":{"rule":{"compare_type":"EQUAL_TO","type":"PATH","value":"/bbb.html"}},"x-request-examples-description-1":"创建转发规则,并指定规则类型为路径","x-request-examples-text-1":{"rule":{"compare_type":"EQUAL_TO","type":"PATH","value":"/bbb.html"}},"x-request-examples-url-1":"POST https://{ELB_Endpoint}/v3/{99a3fff0d03c428eac3678da6a7d0f24}/elb/l7policies/cf4360fd-8631-41ff-a6f5-b72c35da74be/rules","x-scope":"Commercial","x-source":"SelfDeveloped","x-support-sdk":"Y","x-version":"v3"}}},"product_short":"ELB","region_id":"cn-north-4","schemes":["HTTPS"],"security_definitions":null,"summary":"创建转发规则","tags":"转发规则","uri":null,"version":"2.0"}