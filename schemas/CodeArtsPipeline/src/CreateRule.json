{"base_path":"/","components":null,"consumes":"[\"application/json;charset=UTF-8\"]","definitions":{"CreateRuleReq":{"properties":{"content":{"description":"**参数解释**:\n规则属性分组列表。\n**约束限制**:\n不涉及。\n**取值范围**:\n不涉及。\n**默认取值**:\n不涉及。","items":{"$ref":"#/definitions/RuleContent"},"type":"array"},"layout_content":{"description":"**参数解释**:\n布局内容。\n**约束限制**:\n不涉及。\n**取值范围**:\n不涉及。\n**默认取值**:\n不涉及。","type":"string"},"name":{"description":"**参数解释**:\n规则名称。\n**约束限制**:\n不涉及。\n**取值范围**:\n不涉及。\n**默认取值**:\n不涉及。","type":"string"},"plugin_id":{"description":"**参数解释**:\n扩展插件唯一ID。可以通过[查询插件版本详情](ShowPluginVersion.xml)接口,获取响应参数中unique_id。\n**约束限制**:\n不涉及。\n**取值范围**:\n32位字符,由数字和字母组成。\n**默认取值**:\n不涉及。","example":"6335a8d0xxxxxxxxecd9d53f84","type":"string"},"plugin_name":{"description":"**参数解释**:\n扩展插件名称。\n**约束限制**:\n仅支持输入大小写英文字母、数字、'-'、'_'。\n**取值范围**:\n1到50位字符。\n**默认取值**:\n不涉及。","example":"findbugs","type":"string"},"plugin_version":{"description":"**参数解释**:\n插件版本号。\n**约束限制**:\n必须是类似 x.xx.xx 的格式,其中:x 是 1 到 2 位的数字(范围 0 到 99)。xx 是点后跟随的数字部分,且每部分可以是 1 位或 2 位数字。\n**取值范围**:\n不涉及。\n**默认取值**:\n不涉及。","example":"0.1.1","type":"string"},"type":{"description":"**参数解释**:\n创建规则的类型。\n**约束限制**:\n不涉及。\n**取值范围**:\n- Build。\n- Gate。\n- Deploy。\n- Test。\n- Normal。\n**默认取值**:\n不涉及。","type":"string"}},"required":["type","name","layout_content","content"],"type":"object"},"CreateRuleResp":{"properties":{"rule_id":{"description":"**参数解释**:\n规则ID。\n**约束限制**:\n不涉及。\n**取值范围**:\n不涉及。\n**默认取值**:\n不涉及。","example":"xf95e43fxxxxxf3746edd2a54","type":"string"},"status":{"description":"**参数解释**:\n创建状态。\n**约束限制**:\n不涉及。\n**取值范围**:\n不涉及。\n**默认取值**:\n不涉及。","example":true,"type":"boolean"}},"required":["status","rule_id"],"type":"object"},"ErrorResponse":{"example":{"error_code":"DEVCP.00000001","error_msg":"The format of message is error"},"properties":{"error_code":{"description":"**参数解释**:\n错误码。\n**取值范围**:\n不涉及。","type":"string"},"error_msg":{"description":"**参数解释**:\n错误信息。\n**取值范围**:\n不涉及。","type":"string"}},"type":"object"},"RuleContent":{"properties":{"can_modify_when_inherit":{"description":"**参数解释**:\n继承后的子策略是否可以修改阈值。\n**约束限制**:\n不涉及。\n**取值范围**:\n不涉及。\n**默认取值**:\n不涉及。","type":"boolean"},"group_name":{"description":"**参数解释**:\n分组名称。\n**约束限制**:\n不涉及。\n**取值范围**:\n不涉及。\n**默认取值**:\n不涉及。","example":"版本阈值配置","maxLength":85,"type":"string"},"properties":{"description":"**参数解释**:\n规则属性列表。\n**约束限制**:\n不涉及。\n**取值范围**:\n不涉及。\n**默认取值**:\n不涉及。","items":{"$ref":"#/definitions/RuleProperty"},"type":"array"}},"required":["group_name","properties"],"type":"object"},"RuleProperty":{"properties":{"is_valid":{"description":"**参数解释**:\n属性是否启用。\n**约束限制**:\n不涉及。\n**取值范围**:\n- true:启用。\n- false:未启用。\n**默认取值**:\nfalse。","type":"boolean"},"key":{"description":"**参数解释**:\n属性键。\n**约束限制**:\n不涉及。\n**取值范围**:\n不涉及。\n**默认取值**:\n不涉及。","example":"suggestion","maxLength":255,"type":"string"},"name":{"description":"**参数解释**:\n展示名称。\n**约束限制**:\n不涉及。\n**取值范围**:\n不涉及。\n**默认取值**:\n不涉及。","example":"建议","maxLength":85,"type":"string"},"operator":{"description":"**参数解释**:\n比较运算符。\n**约束限制**:\n不涉及。\n**取值范围**:\n- ‘=’:等于。\n- ‘>’:大于。\n- ‘<’:小于。\n- ‘>=’:大于等于。\n- ‘<=’:小于等于。\n- ‘!=’:不等于。\n- ‘in’:包含其中。\n- ‘not in’:不被包含。\n**默认取值**:\n不涉及。","example":"=、>、<、>=、<=、!=、in、not in","type":"string"},"type":{"description":"**参数解释**:\n类型。\n**约束限制**:\n不涉及。\n**取值范围**:\n不涉及。\n**默认取值**:\n不涉及。","example":"judge | config","type":"string"},"value":{"description":"**参数解释**:\n属性值。\n**约束限制**:\n不涉及。\n**取值范围**:\n不涉及。\n**默认取值**:\n不涉及。","example":0,"type":"string"},"value_type":{"description":"**参数解释**:\n数据类型。\n**约束限制**:\n不涉及。\n**取值范围**:\n- float:数值型。\n- string:字符型。\n**默认取值**:\n不涉及。","example":"float | string","type":"string"}},"required":["key","type","name","value","value_type"]}},"description":null,"group_id":"030b4771a0bd4a949ed5e26f50da9017","host":"cloudpipeline-ext.cn-north-4.myhuaweicloud.com","id":"27b6b265efbb479382bc04b91e612a49","info_version":"v2","method":"post","name":"CreateRule","parameters":{"X-Auth-Token":{"description":"用户Token。\n\n通过调用IAM服务获取用户Token接口获取(响应消息头中X-Subject-Token的值)。","in":"header","name":"X-Auth-Token","required":true,"type":"string","x-example":"MIIDkgYJKoZIhvcNAQcCoIIDgzCCXXXXXX..."}},"paths":{"/v2/{domain_id}/rules/create":{"post":{"description":"创建规则","operationId":"CreateRule","parameters":[{"description":"租户ID","in":"path","name":"domain_id","required":true,"type":"string"},{"description":"规则详情","in":"body","name":"body","required":true,"schema":{"$ref":"#/definitions/CreateRuleReq"}},{"$ref":"#/parameters/X-Auth-Token"}],"responses":{"200":{"description":"请求成功","examples":{"application/json":{"rule_id":"2965ed53fe804115816b781ab20fef3c","status":true}},"schema":{"$ref":"#/definitions/CreateRuleResp"}},"400":{"description":"请求失败","schema":{"$ref":"#/definitions/ErrorResponse"}},"401":{"description":"认证失败","schema":{"$ref":"#/definitions/ErrorResponse"}},"403":{"description":"无权限","schema":{"$ref":"#/definitions/ErrorResponse"}},"404":{"description":"资源不存在","schema":{"$ref":"#/definitions/ErrorResponse"}}},"summary":"创建规则","tags":["规则管理"],"x-api-type":"open-api","x-is-registered":"Y","x-request-examples-1":{"content":[{"group_name":"MavenUnitTest","properties":[{"key":"build.PassRatio","name":"PassRatio","operator":"=","type":"judge","value":"0.1","value_type":"float"},{"key":"build.TotalCases","name":"TotalCases","operator":"=","type":"judge","value":"0.1","value_type":"float"},{"key":"build.CoverageRatio","name":"CoverageRatio","operator":"=","type":"judge","value":"0.1","value_type":"float"}]}],"layout_content":"layout_content","name":"新建规则-20231020170337","plugin_id":"official_devcloud_cloudBuild","plugin_name":"official_devcloud_cloudBuild","plugin_version":"0.0.15","type":"Build"},"x-request-examples-text-1":{"content":[{"group_name":"MavenUnitTest","properties":[{"key":"build.PassRatio","name":"PassRatio","operator":"=","type":"judge","value":"0.1","value_type":"float"},{"key":"build.TotalCases","name":"TotalCases","operator":"=","type":"judge","value":"0.1","value_type":"float"},{"key":"build.CoverageRatio","name":"CoverageRatio","operator":"=","type":"judge","value":"0.1","value_type":"float"}]}],"layout_content":"layout_content","name":"新建规则-20231020170337","plugin_id":"official_devcloud_cloudBuild","plugin_name":"official_devcloud_cloudBuild","plugin_version":"0.0.15","type":"Build"},"x-request-examples-url-1":"POST https://{endpoint}/v2/ce8df55870164338a72d7e828a966a2a/rules/create","x-support-sdk":"Y"}}},"product_short":"CodeArtsPipeline","region_id":"cn-north-4","schemes":["HTTPS"],"security_definitions":{"apig-auth-app":{"in":"header","name":"Authorization","type":"apiKey","x-apigateway-auth-type":"AppSigv1"},"apig-auth-iam":{"in":"header","name":"unused","type":"apiKey","x-apigateway-auth-type":"IAM"},"apig-auth-iam-none":{"in":"header","name":"unused","type":"apiKey","x-apigateway-auth-type":"IAM_NONE"}},"summary":"创建规则","tags":"规则管理","uri":null,"version":"2.0"}