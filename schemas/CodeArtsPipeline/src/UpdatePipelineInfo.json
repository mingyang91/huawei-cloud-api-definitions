{"base_path":"/","components":null,"consumes":"[\"application/json;charset=UTF-8\"]","definitions":{"CodeEvent":{"properties":{"enable":{"description":"是否可用","type":"boolean"},"type":{"description":"事件类型","type":"string"}},"type":"object"},"CodeSource":{"properties":{"params":{"description":"源参数","properties":{"alias":{"description":"代码仓别名","example":"","type":"string"},"codehub_id":{"description":"codehub代码仓ID","example":2111694089,"type":"string"},"default_branch":{"description":"默认分支","example":"master","type":"string"},"endpoint_id":{"description":"扩展点ID","example":"","type":"string"},"git_type":{"description":"代码仓类型","example":"codehub","type":"string"},"git_url":{"description":"代码仓https地址","example":"https://codehub.devcloud.cn-north-7.ulanqab.huawei.com/UnionSdkcsxm-wd00001/demo.git","type":"string"},"repo_name":{"description":"代码仓名称","example":"demo","type":"string"},"ssh_git_url":{"description":"代码仓ssh地址","example":"git@codehub.devcloud.cn-north-7.ulanqab.huawei.com:UnionSdkcsxm-wd00001/demo.git","type":"string"},"web_url":{"description":"代码仓页面地址","example":"","type":"string"}}},"type":{"description":"流水线源类型","example":"code","type":"string"}},"type":"object"},"CustomVariable":{"properties":{"description":{"description":"自定义参数描述","type":"string"},"is_reset":{"description":"是否重置","type":"boolean"},"is_runtime":{"description":"是否运行时设置","type":"boolean"},"is_secret":{"description":"是否私密参数","type":"boolean"},"latest_value":{"description":"最近一次参数值","type":"string"},"limits":{"description":"参数限制","items":{"type":"object"},"type":"array"},"name":{"description":"自定义参数名称","type":"string"},"pipeline_id":{"description":"流水线ID","type":"string"},"runtime_value":{"description":"运行时传入值","type":"string"},"sequence":{"description":"自定义参数顺序","format":"int32","type":"integer"},"type":{"description":"自定义参数类型","type":"string"},"value":{"description":"自定义参数默认值","type":"string"}},"type":"object"},"PipelineConcurrencyMgmt":{"description":"流水线并发管理","properties":{"concurrency_number":{"description":"并行数量","example":4,"format":"int32","type":"integer"},"create_time":{"description":"创建时间","example":1673495851000,"format":"int64","type":"integer"},"enable":{"description":"是否有效","example":false,"type":"boolean"},"exceed_action":{"description":"超出情况下策略","example":"waiting","type":"string"},"pipeline_id":{"description":"流水线id","example":"847a5317086c41798469d0868535943a","type":"string"},"update_time":{"description":"更新时间","example":1673495851000,"format":"int64","type":"integer"}},"type":"object"},"PipelineDTO":{"properties":{"concurrency_control":{"$ref":"#/definitions/PipelineConcurrencyMgmt"},"definition":{"description":"流水线结构定义","type":"string"},"description":{"description":"流水线描述","type":"string"},"group_id":{"description":"流水线组ID","type":"string"},"id":{"description":"若为复制场景,则为原流水线ID","type":"string"},"is_publish":{"description":"是否为发布流水线","type":"boolean"},"manifest_version":{"description":"流水线结构定义版本,新版默认为3.0","type":"string"},"name":{"description":"流水线名称","type":"string"},"project_name":{"description":"项目名称","type":"string"},"schedules":{"description":"流水线定时执行配置","items":{"$ref":"#/definitions/PipelineSchedule"},"type":"array"},"sources":{"description":"流水线源","items":{"$ref":"#/definitions/CodeSource"},"type":"array"},"triggers":{"description":"流水线代码事件触发配置","items":{"$ref":"#/definitions/PipelineTrigger"},"type":"array"},"variables":{"description":"流水线自定义全局变量","items":{"$ref":"#/definitions/CustomVariable"},"type":"array"}},"required":["name","is_publish","definition"],"type":"object"},"PipelineId":{"description":"流水线ID","properties":{"pipeline_id":{"description":"流水线ID","type":"string"}},"type":"object"},"PipelineSchedule":{"properties":{"days_of_week":{"description":"一周内具体时间","items":{"format":"int32","type":"integer"},"type":"array"},"enable":{"description":"是否可用","type":"string"},"name":{"description":"任务名称","type":"string"},"time_zone":{"description":"时区","type":"string"},"type":{"description":"任务类型","type":"string"},"uuid":{"description":"任务ID","type":"string"}},"type":"object"},"PipelineTrigger":{"properties":{"callback_url":{"description":"回调链接","type":"string"},"endpoint_id":{"description":"扩展点id","type":"string"},"events":{"description":"事件","items":{"$ref":"#/definitions/CodeEvent"},"type":"array"},"git_type":{"description":"代码仓类型","type":"string"},"git_url":{"description":"git链接","type":"string"},"hook_id":{"description":"回调id","type":"string"},"is_auto_commit":{"description":"是否自动提交","type":"boolean"},"pipeline_id":{"description":"流水线ID","type":"string"},"repo_id":{"description":"仓库id","type":"string"},"security_token":{"description":"用户token","type":"string"}},"type":"object"}},"description":null,"group_id":"030b4771a0bd4a949ed5e26f50da9017","host":"cloudpipeline-ext.cn-north-4.myhuaweicloud.com","id":"0aacb4082ddd47c89c1da4a94d0e0b7a","info_version":"v2","method":"put","name":"UpdatePipelineInfo","parameters":{"Path-Pipeline-Id":{"description":"流水线ID","in":"path","maxLength":32,"minLength":32,"name":"pipeline_id","required":true,"type":"string","x-example":"8025ba36a87a4dd5af496708c2961817"},"Path-Project-Id":{"description":"项目ID","in":"path","maxLength":32,"minLength":32,"name":"project_id","required":true,"type":"string"},"Query-Component-Id":{"description":"微服务ID","in":"query","name":"componentId","required":false,"type":"string"},"X-Auth-Token":{"description":"用户Token。\n\n通过调用IAM服务获取用户Token接口获取(响应消息头中X-Subject-Token的值)。","in":"header","name":"X-Auth-Token","required":true,"type":"string","x-example":"MIIDkgYJKoZIhvcNAQcCoIIDgzCCXXXXXX..."}},"paths":{"/v5/{project_id}/api/pipelines/{pipeline_id}":{"put":{"description":"修改流水线信息","operationId":"UpdatePipelineInfo","parameters":[{"$ref":"#/parameters/Path-Project-Id"},{"$ref":"#/parameters/Path-Pipeline-Id"},{"$ref":"#/parameters/Query-Component-Id"},{"$ref":"#/parameters/X-Auth-Token"},{"description":"修改流水线请求体","in":"body","name":"body","required":true,"schema":{"$ref":"#/definitions/PipelineDTO"}}],"responses":{"200":{"description":"","examples":{"application/json":{"pipeline_id":"8bfbd69eac154a0da341705a36294aca"}},"schema":{"$ref":"#/definitions/PipelineId"}},"401":{"description":"Unauthorized"},"403":{"description":"Forbidden"},"404":{"description":"Not Found"}},"summary":"修改流水线信息","tags":["流水线管理"],"x-api-type":"open-api","x-apigateway-backend":{"httpEndpoints":{"address":"10.63.38.190:40115","description":"","method":"PUT","path":"/CloudPipelineServer/v5/{project_id}/api/pipelines/{pipeline_id}","scheme":"https","timeout":30000},"parameters":[{"description":"项目ID","in":"PATH","name":"project_id","origin":"REQUEST"},{"description":"流水线ID","in":"PATH","name":"pipeline_id","origin":"REQUEST"}],"type":"HTTP"},"x-apigateway-cors":false,"x-apigateway-match-mode":"NORMAL","x-apigateway-request-type":"public","x-is-registered":"Y","x-name":"修改流水线信息","x-request-examples-url-1":"PUT https://{endpoint}/v5/d80a8a6530324b7bac972cbb8a9f28ec/api/pipelines/dab5232b7b354b6db37e695690218c9b?componentId=","x-support-sdk":"Y"}}},"product_short":"CodeArtsPipeline","region_id":"cn-north-4","schemes":["HTTPS"],"security_definitions":{"apig-auth-app":{"in":"header","name":"Authorization","type":"apiKey","x-apigateway-auth-type":"AppSigv1"},"apig-auth-iam":{"in":"header","name":"unused","type":"apiKey","x-apigateway-auth-type":"IAM"},"apig-auth-iam-none":{"in":"header","name":"unused","type":"apiKey","x-apigateway-auth-type":"IAM_NONE"}},"summary":"修改流水线信息","tags":"流水线管理","uri":null,"version":"2.0"}