{"base_path":null,"components":{"parameters":{"ProjectId":{"description":"项目id","explode":false,"in":"path","name":"project_id","required":true,"schema":{"pattern":"[a-fA-F0-9]{32}","type":"string"},"style":"simple"},"XAuthTokenInHeader":{"description":"header中的用户Token","explode":false,"in":"header","name":"X-Auth-Token","required":false,"schema":{"type":"string"},"style":"simple"}},"schemas":{"Dpd":{"properties":{"interval":{"default":30,"description":"对等体存活检测空闲时间","maximum":3600,"minimum":10,"type":"integer"},"msg":{"default":"seq-hash-notify","description":"对等体存活检测报文格式","enum":["seq-hash-notify","seq-notify-hash"],"example":"seq-hash-notify","type":"string"},"timeout":{"default":15,"description":"对等体存活检测报文重传间隔","maximum":60,"minimum":2,"type":"integer"}},"type":"object"},"ErrorResponse":{"properties":{"error_code":{"description":"错误码","type":"string"},"error_msg":{"description":"错误消息内容","type":"string"}},"type":"object"},"IkePolicy":{"properties":{"authentication_algorithm":{"default":"sha2-256","description":"认证算法,SHA1和MD5安全性较低,请慎用","enum":["sha1","md5","sha2-256","sha2-384","sha2-512"],"type":"string"},"authentication_method":{"description":"ike协商时的认证方法","enum":["pre-share","digital-envelope-v2"],"example":"pre-share","type":"string"},"dh_group":{"description":"DH密钥组","example":"group15","type":"string"},"dpd":{"$ref":"#/components/schemas/Dpd"},"encryption_algorithm":{"default":"aes-128","description":"加密算法,3DES安全性较低,请慎用","enum":["3des","aes-128","aes-192","aes-256","aes-128-gcm-16","aes-256-gcm-16","aes-128-gcm-128","aes-256-gcm-128"],"example":"aes-128","type":"string"},"ike_version":{"default":"v2","description":"IKE协商版本","enum":["v1","v2"],"type":"string"},"lifetime_seconds":{"default":86400,"description":"表示SA的生存周期,当该生存周期超时后IKE SA将自动更新","example":86400,"maximum":604800,"minimum":60,"type":"integer"},"local_id":{"description":"本端ID","maxLength":255,"type":"string"},"local_id_type":{"default":"ip","description":"本端ID类型","enum":["ip","fqdn"],"type":"string"},"peer_id":{"description":"对端ID","maxLength":255,"type":"string"},"peer_id_type":{"default":"ip","description":"对端ID类型","enum":["ip","fqdn"],"type":"string"},"phase1_negotiation_mode":{"description":"协商模式,ike版本为v1时生效","enum":["main","aggressive"],"example":"main","type":"string"}},"type":"object"},"IpsecPolicy":{"properties":{"authentication_algorithm":{"default":"sha2-256","description":"认证算法,SHA1和MD5安全性较低,请慎用","enum":["sha1","md5","sha2-256","sha2-384","sha2-512"],"type":"string"},"encapsulation_mode":{"default":"tunnel","description":"封装模式,当前只有tunnel模式","enum":["tunnel"],"type":"string"},"encryption_algorithm":{"default":"aes-128","description":"加密算法,3DES安全性较低,请慎用","enum":["3des","aes-128","aes-192","aes-256","aes-128-gcm-16","aes-256-gcm-16","aes-128-gcm-128","aes-256-gcm-128"],"type":"string"},"lifetime_seconds":{"default":3600,"description":"表示配置IPSec连接建立的隧道以时间为基准的生存周期","example":3600,"maximum":604800,"minimum":30,"type":"integer"},"pfs":{"description":"PFS使用的DH密钥组","type":"string"},"transform_protocol":{"default":"esp","description":"传输模式","enum":["esp"],"type":"string"}},"type":"object"},"PolicyRule":{"properties":{"destination":{"description":"目的地址网段","items":{"type":"string"},"type":"array"},"source":{"description":"源地址网段","type":"string"}},"type":"object"},"UpdateDpd":{"properties":{"interval":{"description":"对等体存活检测空闲时间","maximum":3600,"minimum":10,"type":"integer"},"msg":{"description":"对等体存活检测报文格式","enum":["seq-hash-notify","seq-notify-hash"],"example":"seq-hash-notify","type":"string"},"timeout":{"description":"对等体存活检测报文重传间隔","maximum":60,"minimum":2,"type":"integer"}},"type":"object"},"UpdateIkePolicy":{"properties":{"authentication_algorithm":{"description":"认证算法,SHA1和MD5安全性较低,请慎用","enum":["sha1","md5","sha2-256","sha2-384","sha2-512"],"type":"string"},"dh_group":{"description":"DH密钥组","example":"group15","type":"string"},"dpd":{"$ref":"#/components/schemas/UpdateDpd"},"encryption_algorithm":{"description":"加密算法,3DES安全性较低,请慎用","enum":["3des","aes-128","aes-192","aes-256","aes-128-gcm-16","aes-256-gcm-16","aes-128-gcm-128","aes-256-gcm-128"],"example":"aes-128","type":"string"},"ike_version":{"description":"IKE协商版本","enum":["v1","v2"],"type":"string"},"lifetime_seconds":{"description":"表示SA的生存周期,当该生存周期超时后IKE SA将自动更新","example":86400,"maximum":604800,"minimum":60,"type":"integer"},"local_id":{"description":"本端ID","maxLength":255,"type":"string"},"local_id_type":{"description":"本端ID类型","enum":["ip","fqdn"],"type":"string"},"peer_id":{"description":"对端ID","maxLength":255,"type":"string"},"peer_id_type":{"description":"对端ID类型","enum":["ip","fqdn"],"type":"string"},"phase1_negotiation_mode":{"description":"协商模式,ike版本为v1时生效","enum":["main","aggressive"],"example":"main","type":"string"}},"type":"object"},"UpdateIpsecPolicy":{"properties":{"authentication_algorithm":{"description":"认证算法,SHA1和MD5安全性较低,请慎用","enum":["sha1","md5","sha2-256","sha2-384","sha2-512"],"type":"string"},"encapsulation_mode":{"description":"封装模式,当前只有tunnel模式","enum":["tunnel"],"type":"string"},"encryption_algorithm":{"description":"加密算法,3DES安全性较低,请慎用","enum":["3des","aes-128","aes-192","aes-256","aes-128-gcm-16","aes-256-gcm-16","aes-128-gcm-128","aes-256-gcm-128"],"type":"string"},"lifetime_seconds":{"description":"表示配置IPSec连接建立的隧道以时间为基准的生存周期","example":3600,"maximum":604800,"minimum":30,"type":"integer"},"pfs":{"description":"PFS使用的DH密钥组","type":"string"},"transform_protocol":{"description":"传输模式","enum":["esp"],"type":"string"}},"type":"object"},"UpdateResponseVpnConnection":{"properties":{"cgw_id":{"description":"对端网关ID","example":"aee7f7e4-2114-4472-9d8b-bf9cfa283f61","maxLength":64,"type":"string"},"connection_monitor_id":{"description":"连接监控ID","type":"string"},"created_at":{"description":"创建时间","type":"string"},"enable_hub":{"description":"开启分支互联","example":true,"type":"boolean"},"enable_nqa":{"description":"开启NQA检测","example":true,"type":"boolean"},"enterprise_project_id":{"description":"企业项目ID","maxLength":64,"minLength":1,"type":"string"},"ha_role":{"description":"连接的HA角色","type":"string"},"id":{"description":"VPN连接ID","example":"f73b39c6-e64c-4a5d-b71b-a3b7b964f068","maxLength":64,"type":"string"},"ikepolicy":{"$ref":"#/components/schemas/IkePolicy"},"ipsecpolicy":{"$ref":"#/components/schemas/IpsecPolicy"},"name":{"description":"VPN连接名称","maxLength":64,"minLength":1,"type":"string"},"peer_subnets":{"description":"对端网段","example":["192.168.52.0/24","192.168.82.0/24"],"items":{"type":"string"},"type":"array"},"peer_subnets_v6":{"description":"使能ipv6的对端子网","items":{"type":"string"},"type":"array"},"policy_rules":{"description":"策略模式的策略规则组","items":{"$ref":"#/components/schemas/PolicyRule"},"type":"array"},"policy_rules_v6":{"description":"策略模式的ipv6策略规则组","items":{"$ref":"#/components/schemas/PolicyRule"},"type":"array"},"style":{"description":"连接模式\n允许范围[POLICY, STATIC, BGP]\nPOLICY: 策略模式\nSTATIC: 静态路由模式\nBGP: bgp路由模式","enum":["POLICY","STATIC","BGP"],"example":"policy","type":"string"},"tags":{"description":"标签","items":{"$ref":"#/components/schemas/VpnResourceTag"},"maxItems":20,"type":"array"},"tunnel_local_address":{"description":"本端隧道口地址","example":"169.254.43.1/30","type":"string"},"tunnel_peer_address":{"description":"对端隧道口地址","example":"169.254.43.2/30","type":"string"},"updated_at":{"description":"更新时间","type":"string"},"vgw_id":{"description":"VPN网关ID","example":"377a58e0-b184-4e92-a2d3-804d9fc73cb4","maxLength":64,"type":"string"},"vgw_ip":{"description":"VGW IP","example":"2cc906a2-20a1-490d-9a10-9e9970c470aa","maxLength":64,"type":"string"}},"type":"object"},"UpdateVpnConnectionRequestBody":{"properties":{"vpn_connection":{"$ref":"#/components/schemas/UpdateVpnConnectionRequestBodyContent"}},"required":["vpn_connection"],"type":"object"},"UpdateVpnConnectionRequestBodyContent":{"properties":{"cgw_id":{"description":"对端网关ID","example":"aee7f7e4-2114-4472-9d8b-bf9cfa283f61","maxLength":64,"type":"string"},"enable_hub":{"description":"开启分支互联","example":true,"type":"boolean"},"ikepolicy":{"$ref":"#/components/schemas/UpdateIkePolicy"},"ipsecpolicy":{"$ref":"#/components/schemas/UpdateIpsecPolicy"},"name":{"description":"VPN连接名称","example":"vpn-8245","maxLength":64,"minLength":1,"pattern":"[一-龥a-zA-Z0-9-_.]+","type":"string"},"peer_subnets":{"description":"对端网段","items":{"type":"string"},"type":"array"},"peer_subnets_v6":{"description":"使能ipv6的对端子网","items":{"type":"string"},"type":"array"},"policy_rules":{"description":"策略模式的策略规则组","items":{"$ref":"#/components/schemas/PolicyRule"},"type":"array"},"policy_rules_v6":{"description":"策略模式的ipv6策略规则组","items":{"$ref":"#/components/schemas/PolicyRule"},"type":"array"},"psk":{"description":"预共享密钥,只能包含大写字母、小写字母、数字和特殊字符(~!@#$%^()-_+={ },./:;)且至少包含四种字符的三种","example":"123asd!@#","maxLength":128,"minLength":8,"type":"string","x-sensitive":true},"tunnel_local_address":{"description":"本端隧道口地址","example":"169.254.43.1/30","type":"string"},"tunnel_peer_address":{"description":"对端隧道口地址","example":"169.254.43.2/30","type":"string"}},"type":"object"},"UpdateVpnConnectionResponseBody":{"properties":{"request_id":{"description":"请求ID","type":"string"},"vpn_connection":{"$ref":"#/components/schemas/UpdateResponseVpnConnection"}},"type":"object"},"VpnResourceTag":{"properties":{"key":{"description":"标签的key","maxLength":128,"minLength":1,"pattern":"^((?!\\s)(?!_sys_)[\\p{L}\\p{Z}\\p{N}_.:=+\\-@]*)(?<!\\s)$","type":"string"},"value":{"description":"标签的value","maxLength":255,"pattern":"^([\\p{L}\\p{Z}\\p{N}_.:\\/=+\\-@]*)$","type":"string"}},"required":["key","value"],"type":"object"}}},"consumes":"","definitions":null,"description":null,"group_id":"530f5778ed8b4ac6a3b039053a113eb6","host":"vpn.cn-north-4.myhuaweicloud.com","id":"d7974b44ee904c75906488b5be3b8104","info_version":"v5","method":"put","name":"UpdateVpnConnection","parameters":null,"paths":{"/v5/{project_id}/vpn-connection/{vpn_connection_id}":{"put":{"description":"根据连接ID,更新指定的VPN连接的参数","operationId":"UpdateVpnConnection","parameters":[{"$ref":"#/components/parameters/ProjectId"},{"description":"vpn连接ID","explode":false,"in":"path","name":"vpn_connection_id","required":true,"schema":{"type":"string"},"style":"simple"},{"$ref":"#/components/parameters/XAuthTokenInHeader"}],"requestBody":{"content":{"application/json":{"example":{"vpn_connection":{"cgw_id":"aee7f7e4-2114-4472-9d8b-bf9cfa283f61","name":"vpn-8245","peer_subnets":["192.168.9.0/24","192.168.111.0/24"],"psk":"****","tunnel_local_address":"169.254.43.1/30","tunnel_peer_address":"169.254.43.2/30"}},"schema":{"$ref":"#/components/schemas/UpdateVpnConnectionRequestBody"}}},"description":"请求参数对象","required":true},"responses":{"200":{"content":{"application/json":{"example":{"request_id":"038814ab-28f4-448c-8fae-01e15cad7025","vpn_connection":{"cgw_id":"aee7f7e4-2114-4472-9d8b-bf9cfa283f61","created_at":"2021-12-22T10:45:45.258+08:00","dpd":{"interval":30,"msg":"seq-hash-notify","timeout":15},"enable_nqa":true,"enterprise_project_id":"0","id":"575efd49-a5ef-4a92-a411-8c531e77ed3d","ikepolicy":{"authentication_algorithm":"sha2-256","dh_group":"group15","encryption_algorithm":"aes-128","ike_version":"v2","lifetime":{"units":"seconds","value":86400},"phase1_negotiation_mode":"main"},"ipsecpolicy":{"authentication_algorithm":"sha2-256","encapsulation_mode":"tunnel","encryption_algorithm":"aes-128","lifetime":{"units":"seconds","value":3600},"pfs":"group15","transform_protocol":"esp"},"local_id":"x.x.x.x","local_id_type":"ip","name":"vpn-8245","peer_id":"x.x.x.x","peer_id_type":"ip","peer_subnets":["192.168.9.0/24","192.168.111.0/24"],"policy_rules":null,"project_id":"065803628080d5e72fcac018766843e4","tags":null,"tunnel_local_address":"169.254.43.1/30","tunnel_peer_address":"169.254.43.2/30","type":"route","updated_at":"2021-12-22T10:45:45.258+08:00","vgw_id":"377a58e0-b184-4e92-a2d3-804d9fc73cb4","vgw_ip":"2cc906a2-20a1-490d-9a10-9e9970c470aa"}},"schema":{"$ref":"#/components/schemas/UpdateVpnConnectionResponseBody"}}},"description":"successful operation","headers":{"header-response-token":{"explode":false,"schema":{"type":"string"},"style":"simple"}}},"400":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}},"description":"输入参数不合法"},"401":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}},"description":"认证失败"},"403":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}},"description":"拒绝访问"},"404":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}},"description":"资源未找到"},"409":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}},"description":"冲突操作"},"500":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}},"description":"服务器内部错误"}},"summary":"更新VPN连接","tags":["VpnConnection"],"x-huawei-security":{"enableEProject":true,"epsAction":"update","pdpKey":"vpn:vpnConnections:update"},"x-is-registered":"Y","x-support-sdk":"Y"}}},"product_short":"VPN","region_id":"cn-north-4","schemes":["HTTPS"],"security_definitions":null,"summary":"更新VPN连接","tags":"VpnConnection","uri":null,"version":"3.0.1"}