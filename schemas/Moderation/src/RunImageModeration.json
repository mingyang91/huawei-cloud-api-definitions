{"base_path":"/","components":null,"consumes":"[\"application/json;charset=UTF-8\"]","definitions":{"CommonErrorResponse":{"description":"","properties":{"error_code":{"description":"调用失败时的错误码,具体请参见错误码。\n\n调用成功时无此字段。","type":"string"},"error_msg":{"description":"调用失败时的错误信息。\n\n调用成功时无此字段。","type":"string"},"fail_category":{"description":"当包含多个场景时,失败场景。","type":"string"}}},"ImageDetectionReq":{"description":"","properties":{"ad_categories":{"description":"图文审核检测场景。当categories包含ad时,该参数生效。\n当前支持的场景有系统场景和用户自定义场景:\n- 系统场景为:\n  - qr_code:二维码\n  - politics:涉政\n  - porn:涉黄\n  - ad:广告\n  - abuse:辱骂\n  - contraband:违禁品\n- 用户自定义场景为:自定义黑名单词库。\n\n\n> 自定义词库的创建和使用请参见[配置自定义词库](https://support.huaweicloud.com/api-moderation/moderation_03_0020.html)。","items":{"type":"string"},"type":"array","x-open-region-cloud":"hws"},"categories":{"description":"检测场景:\n\n- politics:是否涉及政治人物的检测。\n\n- terrorism:是否包含涉政暴恐元素的检测。\n\n- porn:是否包含涉黄内容元素的检测。\n\n- ad:是否包含广告的检测(公测特性)。\n\n- all:包含politics、terrorism和porn三种场景的检测。\n\n可通过配置上述场景,来完对应场景元素的检测。\n\n为空或无此参数表示politics和terrorism都检测,但不包含porn场景。\n\n> 每个检测场景的检测次数会分类统计。","items":{"enum":["politics","terrorism","porn","ad","all"],"type":"string"},"type":"array"},"image":{"description":"与url二选一\n\n图片文件Base64编码字符串。要求base64编码后大小不超过10M。\n\n政治人物检测人脸部分不小于50*50像素。\n\n支持JPEG/PNG/BMP/WEBP/GIF格式。","type":"string"},"moderation_rule":{"description":"图像审核规则名称,默认使用default规则。\n\n> 审核规则的创建和使用请参见[配置审核规则](https://support.huaweicloud.com/api-moderation/moderation_03_0063.html)","type":"string"},"show_ocr_text":{"description":"是否返回ocr识别结果,默认为false。","type":"boolean","x-open-region-cloud":"hws"},"threshold":{"description":"- 结果过滤门限,只有置信度不低于此门限的结果才会呈现在detail的列表中,取值范围 0-1,当未设置此值时各个检测场景会使用各自的默认值。\n\n- politics检测场景的默认值为0.95。\n\n- terrorism检测场景的默认值为0。\n\n- ad检测场景的默认值为0。\n\n- 无特殊需求直接不传此参数或像示例中一样值设为空字符串即可。\n\n> - 如果检测场景中的最高置信度也未达到threshold,则结果列表为空;反之threshold过小,则会使结果列表中内容过多。\n> - threshold参数不支持porn场景筛选。\n> -  threshold参数不会影响响应中的suggestion。","format":"float","type":"number"},"url":{"description":"与image二选一\n\n图片的URL路径,目前支持:\n\n- 公网HTTP/HTTPS URL\n\n- 华为云OBS提供的URL,使用OBS数据需要进行授权。包括对服务授权、临时授权、匿名公开授权。详请参见[配置OBS访问权限](https://support.huaweicloud.com/api-moderation/moderation_03_0020.html)。\n\n\n> - 接口响应时间依赖图片的下载时间,如果图片下载时间过长,会返回接口调用失败。请保证被检测图片所在的存储服务稳定可靠,建议您使用华为云OBS存储。","type":"string"}}},"ImageDetectionResponse":{"description":"","properties":{"result":{"$ref":"#/definitions/ImageDetectionResultBody","description":"调用成功时表示调用结果。\n\n调用失败时无此字段。"}}},"ImageDetectionResultAdDetail":{"description":"广告检测详情","properties":{"confidence":{"description":"置信度,取值范围 0-1。","format":"float","type":"number"},"hit_contexts":{"description":"图文审核场景命中的文本列表。","items":{"description":"图文审核命中的文本,不存在则为空。","type":"string"},"type":"array"},"label":{"description":"ad:label为对应的广告识别结果信息\n- 广告场景当前支持label列表如下:\n  - normal:正常\n  - ad:广告\n- 图文审核场景当前支持label列表如下:\n  - normal:正常\n  - qr_code:二维\n  - politics:涉政\n  - porn:涉黄\n  - ad:广告\n  - abuse:辱骂\n  - contraband:违禁品\n  - 其他自定义黑库名称","type":"string"}},"type":"object"},"ImageDetectionResultBody":{"description":"","properties":{"category_suggestions":{"additionalProperties":{"type":"string"},"description":"具体每个场景的检测结果。\n\nblock:包含敏感信息,不通过\n\npass:不包含敏感信息,通过\n\nreview:需要人工复检","type":"object"},"detail":{"$ref":"#/definitions/ImageDetectionResultDetail","description":"针对选定的每个检测场景列出结果列表,politics为涉政敏感人物检测结果,terrorism为涉政暴恐检测结果,porn为涉黄检测结果。如果检测场景中的最高置信度也未达到threshold则结果列表为空。","type":"object"},"ocr_text":{"description":"文本结果","type":"string","x-open-region-cloud":"hws"},"suggestion":{"description":"检测结果是否通过。\n- block:包含敏感信息,不通过\n- pass:不包含敏感信息,通过\n- review:需要人工复检\n> 当同时检测多个场景时,suggestion的值以最可能包含敏感信息的场景为准。即任一场景出现了block则总的suggestion为block,所有场景都pass时suggestion为pass,这两种情况之外则一定有场景需要review,此时suggestion为review。","type":"string"}}},"ImageDetectionResultDetail":{"description":"","properties":{"ad":{"description":"广告检测结果。","items":{"$ref":"#/definitions/ImageDetectionResultAdDetail"},"type":"array","x-open-region-cloud":"hws"},"politics":{"description":"涉政敏感人物检测结果。","items":{"properties":{"confidence":{"description":"置信度,取值范围 0-1。","format":"float","type":"number"},"face_detail":{"description":"涉政场景中的人物面部信息。","properties":{"h":{"description":"人脸区域高度。","type":"integer"},"w":{"description":"人脸区域宽度。","type":"integer"},"x":{"description":"人脸区域左上角到y轴距离。","type":"integer"},"y":{"description":"人脸区域左上角到x轴距离。","type":"integer"}},"type":"object"},"label":{"description":"对应的政治人物信息。","type":"string"}},"type":"object"},"type":"array","x-open-region-cloud":"hws"},"porn":{"description":"涉黄检测结果。","items":{"$ref":"#/definitions/ImageDetectionResultSimpleDetail"},"type":"array"},"terrorism":{"description":"涉政、暴恐检测结果。","items":{"$ref":"#/definitions/ImageDetectionResultSimpleDetail"},"type":"array","x-open-region-cloud":"hws"}},"type":"object"},"ImageDetectionResultSimpleDetail":{"description":"反黄,暴恐检测详情","properties":{"confidence":{"description":"置信度,取值范围 0-1。","format":"float","type":"number"},"label":{"description":"每个检测结果的标签化说明:\n- terrorism:label为对应的涉政暴恐元素信息。\n- 涉政暴恐场景当前支持label列表如下:\n  - normal:正常\n  - knife:刀\n  - gun:枪\n  - fire:火灾\n  - bloody :血腥\n  - terrorist:暴恐组织及标志\n  - fascist:法西斯组织及标志\n  - cult:邪教组织及标志\n  - negative_politics :涉政负面组织及标志\n  - negative_political_events:涉政负面事件及标志\n  - special_characters :特殊文字\n  - kidnap:绑架\n  - corpse:尸体\n  - riot:暴乱事件\n  - parade :游行示威\n  - sensitive_landmarks:敏感地标\n  - military_weapon:军事武器\n  - army:警察部队\n  - positive_politics:涉政正面组织及标志\n  - crowd:人群聚集\n- porn:label为对应的涉黄分类(涉黄、性感等)信息。\n- 鉴黄场景当前支持label列表如下:\n  - normal:正常\n  - porn:色情\n  - sexy:性感","type":"string"}},"type":"object"}},"description":null,"group_id":"bf0f60d381894fc78dd6cd0757fc8dcb","host":"moderation.cn-north-4.myhuaweicloud.com","id":"1b75320b92284f8f8232dfe6d7991830","info_version":"v2","method":"post","name":"RunImageModeration","parameters":{},"paths":{"/v2/{project_id}/moderation/image":{"post":{"consumes":[],"deprecated":false,"description":"分析并识别用户上传的图像内容是否有敏感内容(如涉及政治人物、暴恐元素、涉黄内容等),并将识别结果返回给用户。","operationId":"RunImageModeration","parameters":[{"description":"项目id。获取方法请参见[获取项目ID](https://support.huaweicloud.com/api-moderation/moderation_03_0055.html)。","in":"path","name":"project_id","required":true,"type":"string"},{"description":"用户Token。\n\n用于获取操作API的权限。[获取Token接口](https://support.huaweicloud.com/api-moderation/moderation_03_0003.html)响应消息头中X-Subject-Token的值即为Token。","in":"header","name":"X-Auth-Token","required":true,"type":"string","x-example":"MIIDkgYJKoZIhvcNAQcCoIIDgzCCXXXXXX...","x-order":1},{"description":"图像内容审核请求体","in":"body","name":"RunImageModerationRequestBody","required":true,"schema":{"$ref":"#/definitions/ImageDetectionReq"}}],"produces":[],"responses":{"200":{"description":"成功响应示例","examples":{"application/json":{"result":{"category_suggestions":{"politics":"block","terrorism":"review"},"detail":{"politics":[{"confidence":0.8915528178215026,"face_detail":{"h":130,"w":103,"x":80,"y":109},"label":"xxx"},{"confidence":0.8756346243265443,"face_detail":{"h":131,"w":203,"x":423,"y":109},"label":"yyy"}],"terrorism":[{"confidence":0.7315528178215026,"label":"xxx"},{"confidence":0.26844718217849733,"label":"yyy"}]},"suggestion":"block"}}},"schema":{"$ref":"#/definitions/ImageDetectionResponse"}},"400":{"description":"失败响应示例","examples":{"application/json":{"error_code":"AIS.0402","error_msg":"The image format is not supported."}},"schema":{"$ref":"#/definitions/CommonErrorResponse"}}},"summary":"图像内容审核","tags":["图像内容审核"],"x-apiexplorer-hide":"N","x-apigateway-request-type":"public","x-is-registered":"Y","x-name":"图像内容审核","x-order":2,"x-request-examples-1":{"categories":["politics","terrorism"],"image":"/9j/4AAQSkZJRgABAgEASABIAAD/4RFZRXhpZgAATU0AKgAAAAgABwESAAMAAAABAAEAAAEaAAUAAAABAAAAYgEbAAUAAAABAAAA...","moderation_rule":"default","threshold":"","url":""},"x-request-examples-2":{"categories":["politics","terrorism"],"image":"","moderation_rule":"default","threshold":"","url":"https://BucketName.obs.myhuaweicloud.com/ObjectName"},"x-request-examples-description-1":"方式一:使用图片的BASE64编码","x-request-examples-description-2":"方式二:使用图片的url","x-request-examples-url-1":"POST https://{endpoint}/v2/{project_id}/moderation/image","x-request-examples-url-2":"POST https://{endpoint}/v2/{project_id}/moderation/image","x-support-sdk":"Y","x-timeout":"60s"}}},"product_short":"Moderation","region_id":"cn-north-4","schemes":["HTTPS"],"security_definitions":null,"summary":"图像内容审核","tags":"图像内容审核","uri":null,"version":"2.0"}