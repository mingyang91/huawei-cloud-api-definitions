{"base_path":"/","components":null,"consumes":"","definitions":{"ErrorRsp":{"description":"失败时返回的错误对象","properties":{"error_code":{"description":"调用失败时的错误码,具体请参见错误码。\n\n调用成功时无此字段。","maxLength":36,"minLength":8,"type":"string"},"error_msg":{"description":"调用失败时的错误信息。\n\n调用成功时无此字段。","maxLength":512,"minLength":2,"type":"string"}},"required":["error_code","error_msg"],"type":"object"},"FaceLocationDetail":{"properties":{"bottom_right_x":{"description":"检测出人脸的右下角横坐标。","format":"int32","type":"integer"},"bottom_right_y":{"description":"检测出人脸的右下角纵坐标。","format":"int32","type":"integer"},"top_left_x":{"description":"检测出人脸的左上角横坐标。","format":"int32","type":"integer"},"top_left_y":{"description":"检测出人脸的左上角纵坐标。","format":"int32","type":"integer"}},"type":"object"},"ImageDetectionReq":{"description":"图像内容审核请求体","properties":{"biz_type":{"description":"自定义审核策略名称,可在控制台配置;如果请求参数中传了biz_type则优先使用biz_type,如果用户没传biz_type则event_type和categories必须传。","example":"test_type","type":"string","x-open-region-cloud":"hc"},"categories":{"description":"检测场景。可添加的检测场景如下:\n- terrorism:暴恐元素的检测。\n- porn:涉黄元素的检测。\n- image_text:广告图文的检测。\n- 可通过配置上述场景,来完对应场景元素的检测。\n> 每个检测场景的检测次数会分类统计。","items":{"type":"string"},"type":"array"},"event_type":{"description":"事件类型。\n可选值如下:\nhead_image:头像\nalbum:相册\ndynamic:动态\narticle:帖子\ncomment:评论\nroom_cover:房间封面\ngroup_message:群聊图片\nmessage:私聊图片\nproduct:商品图片","example":"comment","type":"string"},"image":{"description":"与url二选一,图片文件Base64编码字符串,要求base64编码后大小不超过10M,支持JPG/PNG/JPEG/WEBP/GIF/TIFF/TIF/HEIF等格式。","example":"/9j/4QO3RXhpZgAATU0AKgAAAAgADQEDAAMAAAABAAYAAAEBAAQAAAABAAAKawEPAAIAAAAFAAAAqgESAAMAAAABAAAAAAEyAAIAAAAUAAAArwEbAAUAAAABAAAAwwEaAAUAAAABAAAAywEAAAQAAAABAAAH0AEQAAIAAAAIAAAA0wExAAIAAAAcAAAA2wITAAMAAAABAAIAAIdpAAQAAAABAAAA9wEoAAMAAAABAAIAAAAAAABPUFBPADIwMTk6MDg6MjAgMTE6NDM6NTUAAAAASAAAAAEAAABIAAAAAU9QUE8gQTkATWVkaWFUZWsgQ2FtZXJhIEFwcGxpY2F0aW9uAAAbkAAAAgAAAAUAAAJBkgQACgAA","type":"string"},"image_text_config":{"$ref":"#/definitions/ImgTextConfig","description":"图文审核黑白词库配置。","x-open-region-cloud":"hc"},"language":{"description":"可指定图片中文字语种类型","enum":["zh"],"example":"zh","type":"string"},"url":{"description":"图片url, 与image二选一,目前支持:\n- 公网HTTP/HTTPS URL","example":"http://xxxxxx.com/qweqeqeqzzxfdwef.jpg","type":"string"}},"type":"object"},"ImageDetectionResponse":{"properties":{"request_id":{"description":"本次请求的唯一标识,用于问题排查,建议保存。","example":"58e7d9c7-3456-4ba1-80df-6f25506bc4df","maxLength":64,"minLength":2,"type":"string"},"result":{"$ref":"#/definitions/ImageDetectionResult","description":"调用成功时表示调用结果。 调用失败时无此字段。"}},"required":["request_id"],"type":"object"},"ImageDetectionResult":{"properties":{"category":{"description":"检测结果的一级标签。\n支持category列表如下:\nterrorism: 暴恐\nporn: 色情\nimage_text: 图文审核","example":"porn","type":"string"},"details":{"description":"检测详情","items":{"$ref":"#/definitions/ImageDetectionResultDetail"},"type":"array"},"ocr_text":{"description":"图文审核检测出的文本,只有在category参数配置image_text且检测出文本时展示该字段。","type":"string","x-open-region-cloud":"hc"},"suggestion":{"description":"审核结果是否通过。\n\nblock:包含敏感信息,不通过\n\npass:不包含敏感信息,通过\n\nreview:需要人工复检","example":"block","type":"string"}},"type":"object"},"ImageDetectionResultDetail":{"description":"返回结果的详细内容。","properties":{"category":{"description":"检测结果的一级标签。\n支持category列表如下:\nterrorism: 暴恐\nporn: 色情\nimage_text: 图文审核","type":"string"},"confidence":{"description":"置信度,可选值在0-1之间,值越大,可信度越高。","format":"float","type":"number"},"face_location":{"$ref":"#/definitions/FaceLocationDetail","description":"人物位置信息,该数组有四个值,分别代表左上角的坐标和右下角的坐标。例如[207,522,340,567],207代表的是左上角的横坐标,522代表左上角的纵坐标,340代表的是右下角的横坐标,567代表的是右下角的纵坐标。"},"label":{"description":"识别的详细标签。","type":"string"},"qr_content":{"description":"图片中二维码指向的链接,当请求参数categories中包含image_text时存在。","type":"string","x-open-region-cloud":"hc"},"qr_location":{"$ref":"#/definitions/QRLocationDetail","description":"二维码位置信息,该数组有四个值,分别代表左上角的坐标和右下角的坐标。例如[207,522,340,567],207代表的是左上角的横坐标,522代表左上角的纵坐标,340代表的是右下角的横坐标,567代表的是右下角的纵坐标。","x-open-region-cloud":"hc"},"segments":{"description":"image_text场景下命中的文本片段。","items":{"$ref":"#/definitions/OCRTextDetail"},"type":"array","x-open-region-cloud":"hc"},"suggestion":{"description":"审核结果是否通过。\nblock:包含敏感信息,不通过\nreview:需要人工复检","type":"string"}},"required":["suggestion","category","confidence"]},"ImgTextConfig":{"description":"图文审核场景的黑白词库传入参数设置。","properties":{"black_glossary_names":{"description":"检测时使用的自定义黑名单词库列表。","items":{"type":"string"},"type":"array"},"white_glossary_names":{"description":"检测时使用的自定义白名单词库列表。","items":{"type":"string"},"type":"array"}},"type":"object"},"OCRTextDetail":{"properties":{"glossary_name":{"description":"命中的自定义词库名称。\n命中自定义词库时,才会返回当前字段。","type":"string"},"segment":{"description":"命中的风险片段","type":"string"}}},"QRLocationDetail":{"properties":{"bottom_right_x":{"description":"检测出的二维码右下角横坐标。","format":"int32","type":"integer"},"bottom_right_y":{"description":"检测出的二维码右下角纵坐标。","format":"int32","type":"integer"},"top_left_x":{"description":"检测出的二维码左上角横坐标。","format":"int32","type":"integer"},"top_left_y":{"description":"检测出的二维码左上角纵坐标。","format":"int32","type":"integer"}},"type":"object"}},"description":null,"group_id":"bf0f60d381894fc78dd6cd0757fc8dcb","host":"moderation.cn-north-4.myhuaweicloud.com","id":"c4e18e70c3c14367962b634b5f6a76d7","info_version":"v3","method":"post","name":"CheckImageModeration","parameters":{},"paths":{"/v3/{project_id}/moderation/image":{"post":{"description":"分析并识别用户上传的图像内容是否有敏感内容(如涉及暴恐元素、涉黄内容等),并将识别结果返回给用户。","operationId":"CheckImageModeration","parameters":[{"description":"用户的project_id 登陆华为云 -> 用户中心 -> 我的凭证 -> api凭证 即可查看对应区域的项目ID。","in":"path","name":"project_id","required":true,"type":"string"},{"description":"图像内容审核请求体","in":"body","name":"RunImageModerationRequestBody","required":true,"schema":{"$ref":"#/definitions/ImageDetectionReq"}},{"description":"用户Token。 通过调用IAM服务获取用户Token接口获取(响应消息头中X-Subject-Token的值)。","in":"header","name":"X-Auth-Token","required":true,"type":"string"}],"produces":["application/json"],"responses":{"200":{"description":"成功响应体","examples":{"application/json":{"request_id":"53f9719c3730d1169e47403d5c8a9473","result":{"category":"porn","details":[{"category":"porn","confidence":0.9934315,"label":"sexy_female","suggestion":"review"},{"category":"porn","confidence":0.99798274,"label":"intimacy","suggestion":"review"}],"suggestion":"review"}}},"schema":{"$ref":"#/definitions/ImageDetectionResponse"}},"400":{"description":"失败响应响应体","examples":{"application/json":{"error_code":"AIS.0402","error_msg":"The image format is not supported."}},"schema":{"$ref":"#/definitions/ErrorRsp"}}},"summary":"图像内容审核","tags":["图像内容审核"],"x-apiexplorer-hide":"N","x-is-registered":"Y","x-request-examples-1":{"categories":["porn","terrorism"],"event_type":"head_image","image":"/9j/4AAQSkZJRgABAgEASABIAAD/4RFZRXhpZgAATU0AKgAAAAgABwESAAMAAAABAAEAAAEaAAUAAAABAAAAYgEbAAUAAAABAAAA...","image_text_config":{"black_glossary_names":["test"]}},"x-request-examples-2":{"categories":["porn","terrorism"],"event_type":"head_image","image_text_config":{"black_glossary_names":["test"]},"url":"http://club2.autoimg.cn/album/g26/M05/9D/FF/userphotos/2022/08/08/07/500_ChsEdmLwSaKAO3IGAAUykD3c3jA252.jpg"},"x-request-examples-3":{"biz_type":"test-type","url":"http://club2.autoimg.cn/album/g26/M05/9D/FF/userphotos/2022/08/08/07/500_ChsEdmLwSaKAO3IGAAUykD3c3jA252.jpg"},"x-request-examples-description-1":"使用图片的BASE64编码","x-request-examples-description-2":"使用图片的url","x-request-examples-description-3":"使用bizType请求","x-request-examples-image-1":"{\n  \"event_type\": \"comment\",\n  \"categories\":[\"porn\", \"image_text\"],\n  \"image_text_config\":{\n    \"black_glossary_names\":[\"xxx\"]\n    \"white_glossary_names\":[\"xxx\"]\n  },\n  \"data\": {\n    \"image\": \"base64编码\",\n    \"url\" : \"https://BucketName.obs.myhuaweicloud.com/ObjectName.jpg\",\n  }\n}\n","x-request-examples-text-1":{"categories":["porn","terrorism"],"event_type":"head_image","image":"/9j/4AAQSkZJRgABAgEASABIAAD/4RFZRXhpZgAATU0AKgAAAAgABwESAAMAAAABAAEAAAEaAAUAAAABAAAAYgEbAAUAAAABAAAA...","image_text_config":{"black_glossary_names":["test"]}},"x-request-examples-text-2":{"categories":["porn","terrorism"],"event_type":"head_image","image_text_config":{"black_glossary_names":["test"]},"url":"http://club2.autoimg.cn/album/g26/M05/9D/FF/userphotos/2022/08/08/07/500_ChsEdmLwSaKAO3IGAAUykD3c3jA252.jpg"},"x-request-examples-text-3":{"biz_type":"test-type","url":"http://club2.autoimg.cn/album/g26/M05/9D/FF/userphotos/2022/08/08/07/500_ChsEdmLwSaKAO3IGAAUykD3c3jA252.jpg"},"x-request-examples-url-1":"POST https://{endpoint}/v3/{project_id}/moderation/image","x-request-examples-url-2":"POST https://{endpoint}/v3/{project_id}/moderation/image","x-request-examples-url-3":"POST https://{endpoint}/v3/{project_id}/moderation/image","x-support-sdk":"Y"}}},"product_short":"Moderation","region_id":"cn-north-4","schemes":["HTTPS"],"security_definitions":null,"summary":"图像内容审核","tags":"图像内容审核","uri":null,"version":"2.0"}