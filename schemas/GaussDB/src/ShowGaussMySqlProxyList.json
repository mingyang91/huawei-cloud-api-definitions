{"base_path":"/","components":null,"consumes":"[\"application/json;charset=UTF-8\"]","definitions":{"MysqlErrorResponse":{"properties":{"error_code":{"description":"错误码。","example":"DBS.200022","type":"string"},"error_msg":{"description":"错误消息。","example":"实例不存在","type":"string"}},"required":["error_code","error_msg"]},"MysqlProxyAvailable":{"properties":{"code":{"description":"可用区编码。","type":"string"},"description":{"description":"可用区描述。","type":"string"}}},"MysqlProxyNodeV3":{"properties":{"availability_zone":{"description":"主实例所有节点的可用区信息。","items":{"$ref":"#/definitions/MysqlProxyAvailable"},"type":"array"},"id":{"description":"节点ID。","type":"string"},"instance_id":{"description":"实例ID。","type":"string"},"name":{"description":"节点名称。","type":"string"},"status":{"description":"节点状态。","type":"string"},"weight":{"description":"节点读写分离读权重。","format":"int32","type":"integer"}}},"MysqlProxyNodes":{"properties":{"az_code":{"description":"可用区。","type":"string"},"frozen_flag":{"description":"Proxy节点是否被冻结。\n\n取值范围:\n- 0-未冻结\n- 1-冻结\n- 2-冻结删除","format":"int32","type":"integer"},"id":{"description":"Proxy节点ID。","type":"string"},"name":{"description":"Proxy节点名称。","type":"string"},"role":{"description":"Proxy节点角色:master和slave。","type":"string"},"status":{"description":"Proxy节点状态。\n\n取值范围:\n- ACTIVE,表示节点正常\n- ABNORMAL,表示节点异常\n- FAILED,表示节点失败\n- DELETED,表示节点已删除","type":"string"}}},"MysqlProxyV3":{"properties":{"address":{"description":"Proxy读写分离地址。","type":"string"},"balance_route_mode_enabled":{"description":"数据库代理版本是否支持负载均衡模式。\n\n取值范围:\n- true 支持;\n- false 不支持。","type":"boolean"},"connection_pool_type":{"description":"连接池类型。\n\n取值范围:\n- CLOSED: 关闭连接池。\n- SESSION: 开启会话级连接池。","type":"string"},"consistence_mode":{"description":"一致性模式。默认值为空,此时以会话一致性参数session_consistence为准。\n- session: 会话一致性。\n- global: 全局一致性。\n- eventual: 最终一致性。","type":"string"},"delay_threshold_in_seconds":{"description":"延时阈值,单位:秒。","format":"int32","type":"integer"},"eip":{"description":"弹性公网IP信息。","type":"string"},"elb_vip":{"description":"Elb模式的虚拟ip信息。","type":"string"},"flavor_ref":{"description":"Proxy规格信息。","type":"string"},"mode":{"description":"Proxy主备模式,取值范围:Cluster。","type":"string"},"name":{"description":"Proxy实例名称。","type":"string"},"new_node_auto_add_status":{"description":"新增节点是否自动加入该Proxy。\n\n取值范围:\n- ON:自动加入。\n- OFF:不自动加入。","type":"string"},"new_node_weight":{"description":"新增节点的读权重。","format":"int32","type":"integer"},"node_num":{"description":"Proxy节点个数。","format":"int32","type":"integer"},"nodes":{"description":"Proxy节点信息。","items":{"$ref":"#/definitions/MysqlProxyNodes"},"type":"array"},"pool_id":{"description":"Proxy实例ID。","type":"string"},"pool_status":{"description":"Proxy实例状态。\n\n取值范围:\n- ACTIVE,表示数据库代理正常\n- ABNORMAL,表示数据库代理异常\n- FAILED,表示数据库代理创建失败\n- DELETED,表示数据库代理已删除","type":"string"},"port":{"description":"Proxy端口信息。","format":"int32","type":"integer"},"ram":{"description":"Proxy实例规格的内存数量。","type":"string"},"route_mode":{"description":"数据库代理路由模式,默认为权重负载模式。\n\n取值范围:\n- 0,表示权重负载模式;\n- 1,表示负载均衡模式(数据库主节点不接受读请求);\n- 2,表示负载均衡模式(数据库主节点接受读请求)。","format":"int32","type":"integer"},"ssl_option":{"description":"SSL数据加密开关设置。\n\n取值范围:\n- true: 开启SSL数据加密。\n- false: 关闭SSL数据加密。","type":"string"},"status":{"description":"Proxy实例开启状态。\n\n取值:\n- “ACTIVE”,表示数据库代理正常;\n- “FAILED”,表示数据库代理创建失败;\n- “DELETED”,表示数据库代理已删除;\n- “ABNORMAL”,表示数据库代理异常;\n- “ENABLING PROXY”,表示数据库代理正在开启;\n- “DISABLING PROXY”,表示数据库代理正在关闭;\n- “ADDING PROXY NODE”,表示数据库代理正在扩容;\n- “DELETING READ REPLICAS FROM PROXY”,表示数据库代理正在移除只读节点;\n- “ADDING READ REPLICAS TO PROXY”,表示数据库代理正在添加只读节点;\n- “CHANGING WEIGHTS”,表示数据库代理正在修改只读节点权重。","type":"string"},"subnet_id":{"description":"数据库代理所属的子网ID。","type":"string"},"switch_connection_pool_type_enabled":{"description":"数据库代理版本是否支持会话级连接池。\n\n取值范围:\n- true: 支持。\n- false: 不支持。","type":"boolean"},"transaction_split":{"description":"Proxy事务拆分开关状态【ON/OFF】。","type":"string"},"vcpus":{"description":"Proxy实例规格的CPU数量。","type":"string"}}},"MysqlShowProxyListResponse":{"properties":{"proxy_list":{"description":"Proxy实例信息列表。","items":{"$ref":"#/definitions/MysqlShowProxyResponseV3"},"type":"array"}}},"MysqlShowProxyResponseV3":{"properties":{"master_node":{"$ref":"#/definitions/MysqlProxyNodeV3","description":"主节点信息。"},"proxy":{"$ref":"#/definitions/MysqlProxyV3","description":"Proxy实例信息。"},"readonly_nodes":{"description":"只读节点信息。","items":{"$ref":"#/definitions/MysqlProxyNodeV3"},"type":"array"}}}},"description":null,"group_id":"1bf15763f8164608918d180a9b1aa137","host":"gaussdb.cn-north-4.myhuaweicloud.com","id":"f5299d9d303a4c019825cc2a934c1fd3","info_version":"v3","method":"get","name":"ShowGaussMySqlProxyList","parameters":{},"paths":{"/v3/{project_id}/instances/{instance_id}/proxies":{"get":{"description":"查询数据库代理信息列表。","operationId":"ShowGaussMySqlProxyList","parameters":[{"description":"用户Token。","in":"header","name":"X-Auth-Token","type":"string","x-example":"******"},{"description":"语言。","in":"header","name":"X-Language","type":"string","x-example":"zh-cn"},{"description":"租户在某一region下的project ID。\n\n获取方法请参见[获取项目ID](https://support.huaweicloud.com/api-gaussdbformysql/gaussdbformysql_10_0004.html)。\n","in":"path","name":"project_id","required":true,"type":"string","x-example":"619d3e78f61b4be68bc5aa0b59edcf7b"},{"description":"实例ID。","in":"path","name":"instance_id","required":true,"type":"string","x-example":"61a4ea66210545909d74a05c27a7179ein07"},{"description":"索引位置,偏移量。从第一条数据偏移offset条数据后开始查询,默认为0(偏移0条数据,表示从第一条数据开始查询),必须为数字,不能为负数。","format":"int32","in":"query","name":"offset","type":"integer","x-example":"0"},{"description":"查询记录数。默认为10,不能为负数,最小值为1,最大值为100。","format":"int32","in":"query","name":"limit","type":"integer","x-example":"100"}],"responses":{"200":{"description":"Success.","examples":{"application/json":{"proxy_list":[{"master_node":{"availability_zone":[{"code":"az1","description":"可用区1"}],"id":"c01a5645eb2c4fb6a9373542f5366e50no07","instance_id":"7a871d6d494e4327ad2e326afb591108in07","name":"taurus_mysql80_x86-ondemand-2-1U4G_1_202103070251274842281_node01","status":"ACTIVE","weight":0},"proxy":{"address":"192.168.125.69","balance_route_mode_enabled":true,"connection_pool_type":"SESSION","consistence_mode":"session","delay_threshold_in_seconds":30,"eip":"192.168.125.50","elb_vip":"192.168.125.60","mode":"Cluster","name":"proxy-name","new_node_auto_add_status":"ON","new_node_weight":100,"node_num":2,"nodes":[{"az_code":"az1xahz","frozen_flag":0,"id":"db53a238a02240c49365e72e284a4890pn01","name":"PROXY-2e7cf21d14794bafab623a334efd9ad8po01_0","role":"master","status":"ACTIVE"}],"pool_id":"2e7cf21d14794bafab623a334efd9ad8po01","pool_status":"ACTIVE","port":3306,"ram":8,"route_mode":1,"status":"ACTIVE","subnet_id":"6991d82d-9166-4aff-a1fa-d2a8748b7084","switch_connection_pool_type_enabled":true,"transaction_split":false,"vcpus":4},"readonly_nodes":{"availability_zone":[{"code":"az1","description":"可用区1"}],"id":"d23535333138462880bfa1838fdfced2no07","instance_id":"7a871d6d494e4327ad2e326afb591108in07","name":"taurus_mysql80_x86-ondemand-2-1U4G_1_202103070251274842281_node02","status":"ACTIVE","weight":100}}]}},"schema":{"$ref":"#/definitions/MysqlShowProxyListResponse"}},"400":{"description":"Client error.","schema":{"$ref":"#/definitions/MysqlErrorResponse"}},"500":{"description":"Server error.","schema":{"$ref":"#/definitions/MysqlErrorResponse"}}},"summary":"查询数据库代理信息列表","tags":["数据库代理"],"x-is-registered":"N","x-request-examples-description-1":"查询实例的数据库代理信息列表。","x-request-examples-url-1":"GET https://{endpoint}/v3/054e292c9880d4992f02c0196d3ea468/instances/096c0fc43e804757b59946b80dc27f8bin07/proxies?offset=0&limit=10","x-support-sdk":"Y"}}},"product_short":"GaussDB","region_id":"cn-north-4","schemes":["HTTPS"],"security_definitions":null,"summary":"查询数据库代理信息列表","tags":"数据库代理","uri":null,"version":"2.0"}