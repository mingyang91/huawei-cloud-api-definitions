{"base_path":"/","components":null,"consumes":"[\"application/json;charset=UTF-8\"]","definitions":{"CountStatisticsBean":{"properties":{"period":{"description":"周期","example":"2025-07-14T22:03:36.000Z","type":"string"},"sql_num":{"description":"SQL数量","format":"int64","type":"integer"}},"type":"object"},"DbssError":{"description":"异常消息体","properties":{"details":{"description":"PDP5鉴权异常信息","items":{"$ref":"#/definitions/DbssErrorDetail"},"maxItems":100,"minItems":0,"type":"array"},"encoded_authorization_message":{"description":"PDP5鉴权异常信息","example":"DBSS.00112233","maxLength":2097152,"minLength":0,"type":"string"},"error_code":{"description":"错误码","example":"DBSS.10020100","maxLength":2097152,"minLength":0,"type":"string"},"error_msg":{"description":"错误信息","example":"DBSS.00112233","maxLength":2097152,"minLength":0,"type":"string"}},"type":"object"},"DbssErrorDetail":{"properties":{"error_code":{"description":"错误码","example":"DBSS.00112233","maxLength":32,"minLength":0,"type":"string"},"error_msg":{"description":"PDP5错误信息","example":"DBSS.00112233","maxLength":2097152,"minLength":0,"type":"string"}},"type":"object"},"Duration":{"description":"查询时间范围,time_range属性优先于start_time/end_time","properties":{"end_time":{"description":"结束时间","example":"2025-08-08 01:17:49","type":"string"},"start_time":{"description":"开始时间","example":"2025-08-08 01:17:49","type":"string"},"time_range":{"description":"时间范围\n- HALF_HOUR: 半小时\n- HOUR: 1小时\n- THREE_HOUR: 3小时\n- TWELVE_HOUR: 12小时\n- DAY: 1天\n- WEEK: 1周\n- MONTH: 1个月","example":"WEEK","type":"string"}},"type":"object"},"GeneralCountInfoResponse":{"properties":{"count_statistics":{"description":"列表数据","items":{"$ref":"#/definitions/CountStatisticsBean"},"type":"array"},"generate_time":{"description":"生成时间","type":"string"},"status":{"description":"状态 \n- FINISHED:已完成 \n- RUNNING:运行中","type":"string"}},"type":"object"},"GeneralRequest":{"example":{"db_id":"","regenerate":1,"time":{"end_time":null,"start_time":null,"time_range":"MONTH"}},"properties":{"db_id":{"description":"数据库ID","example":"S9M_WZgB9zc2zyuRqm-M","type":"string"},"regenerate":{"description":"是否重新生成 \n- 1:是 \n- 0:否","example":1,"format":"int32","type":"integer"},"time":{"$ref":"#/definitions/Duration"}},"required":["regenerate","time"],"type":"object"}},"description":null,"group_id":"0ba875db15a142babc14f069c8b7c4f6","host":"dbss.cn-north-4.myhuaweicloud.com","id":"91b461c8e255445c883a7a43e58585ec","info_version":"v1","method":"post","name":"CountSqlTrendStatistics","parameters":{},"paths":{"/v1/{project_id}/audit/{instance_id}/statistics/trend/sql-count":{"post":{"consumes":["application/json"],"description":"获取指定时间段内的sql数量分布统计","operationId":"CountSqlTrendStatistics","parameters":[{"default":"xxxxxxxxxxxxxxxx","description":"**参数解释**:\n用户Token。 通过调用IAM服务查询用户Token接口获取(响应消息头中X-Subject-Token的值)。\n**约束限制**:\n不涉及\n**取值范围**:\nIAM服务查询用户Token接口为准\n**默认取值**:\n不涉及","in":"header","name":"X-Auth-Token","required":true,"type":"string"},{"description":"**参数解释**:\n项目ID。可通过IAM服务[查询指定IAM用户的项目列表]接口获取。\n**约束限制**:\n不涉及\n**取值范围**:\n以IAM服务接口返回值为准,字符长度32-64。\n**默认取值**:\n不涉及","in":"path","maxLength":64,"minLength":32,"name":"project_id","required":true,"type":"string"},{"description":"**参数解释**:\n实例ID。可通过查询实例列表接口ID字段获取\n**约束限制**:\n不涉及\n**取值范围**:\n以查询实例列表接口值为准,字符长度32-64。\n**默认取值**:\n不涉及","in":"path","maxLength":64,"minLength":32,"name":"instance_id","required":true,"type":"string"},{"description":"请求参数对象","in":"body","name":"CountSqlTrendStatisticsRequestBody","required":true,"schema":{"$ref":"#/definitions/GeneralRequest"}}],"produces":["application/json"],"responses":{"200":{"description":"OK","examples":{"application/json":{"count_statistics":[{"period":"2025-08-19 17:03:52","sql_num":0},{"period":"2025-08-19 18:07:44","sql_num":0}],"generate_time":"2025-08-20 07:58:58","status":"finished"}},"schema":{"$ref":"#/definitions/GeneralCountInfoResponse"}},"400":{"description":"请求参数有误。","schema":{"$ref":"#/definitions/DbssError"}},"401":{"description":"认证失败","schema":{"$ref":"#/definitions/DbssError"}},"403":{"description":"未授权","schema":{"$ref":"#/definitions/DbssError"}},"500":{"description":"服务端错误","schema":{"$ref":"#/definitions/DbssError"}}},"summary":"获取指定时间段内的sql数量分布统计","tags":["数据报表"],"x-api-type":"open-api","x-apigateway-backend":{"httpEndpoints":{"method":"POST","path":"/v1/{project_id}/audit/{instance_id}/statistics/trend/sql-count"}},"x-is-registered":"Y","x-request-examples-1":{"regenerate":0,"time":{"time_range":"HOUR"}},"x-request-examples-url-1":"/v1/{project_id}/audit/{instance_id}/statistics/trend/sql-count","x-support-sdk":"Y"}}},"product_short":"DBSS","region_id":"cn-north-4","schemes":["HTTPS"],"security_definitions":null,"summary":"获取指定时间段内的sql数量分布统计","tags":"数据报表","uri":null,"version":"2.0"}