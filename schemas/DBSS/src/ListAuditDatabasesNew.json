{"base_path":"/","components":null,"consumes":"[\"application/json;charset=UTF-8\"]","definitions":{"DataBase":{"description":"数据库信息","properties":{"agent_url":{"description":"agent的唯一ID","items":{"type":"string"},"type":"array"},"audit_status":{"description":"数据库的运行状态\n- ACTIVE\n- SHUTOFF\n- ERROR","type":"string"},"charset":{"description":"数据库字符集\n- GBK\n- UTF8","type":"string"},"clouddb_obj_info":{"description":"云数据库信息,该字段已废弃。","type":"string"},"db_classification":{"description":"数据库分类\n- RDS: 表示RDS数据库\n- ECS:自建数据库","type":"string"},"dws_obj_info":{"description":"DWS数据库信息。","type":"string"},"id":{"description":"数据库ID","type":"string"},"instance_name":{"description":"数据库实例名","type":"string"},"ip":{"description":"数据库IP","type":"string"},"name":{"description":"数据库名称","type":"string"},"os":{"description":"数据库操作系统","type":"string"},"port":{"description":"数据库端口","type":"string"},"rds_audit_switch_mismatch":{"description":"rds实例审计开关状态不匹配。当数据库审计开启且rds侧日志上传开关关闭时该字段为true。","type":"boolean"},"rds_id":{"description":"RDS数据库的ID。","type":"string"},"rds_obj_info":{"description":"RDS数据库信息。","type":"string"},"status":{"description":"实例状态\n- ON :开启\n- OFF : 关闭","type":"string"},"type":{"description":"添加的数据库类型:\n- MYSQL\n- ORACLE\n- POSTGRESQL\n- SQLSERVER\n- DAMENG\n- TAURUS\n- DWS\n- KINGBASE\n- GAUSSDBOPENGAUSS\n- GREENPLUM\n- HIGHGO\n- SHENTONG\n- GBASE8A\n- GBASE8S\n- GBASEXDM\n- MONGODB\n- DDS","type":"string"},"version":{"description":"数据库版本","type":"string"}},"required":["name","type","version","charset","ip","port","os","status","instance_name","db_classification"],"type":"object"},"DataBaseBean":{"properties":{"database":{"$ref":"#/definitions/DataBase","description":"数据库信息"}},"required":["database"],"type":"object"},"DataBaseResponse":{"properties":{"databases":{"description":"数据库信息列表","items":{"$ref":"#/definitions/DataBaseBean"},"type":"array"},"total":{"description":"总数","format":"int32","type":"integer"}},"required":["databases","total"],"type":"object"},"DbssError":{"description":"异常消息体","properties":{"details":{"description":"PDP5鉴权异常信息","items":{"$ref":"#/definitions/DbssErrorDetail"},"maxItems":100,"minItems":0,"type":"array"},"encoded_authorization_message":{"description":"PDP5鉴权异常信息","example":"DBSS.00112233","maxLength":2097152,"minLength":0,"type":"string"},"error_code":{"description":"错误码","example":"DBSS.10020100","maxLength":2097152,"minLength":0,"type":"string"},"error_msg":{"description":"错误信息","example":"DBSS.00112233","maxLength":2097152,"minLength":0,"type":"string"}},"type":"object"},"DbssErrorDetail":{"properties":{"error_code":{"description":"错误码","example":"DBSS.00112233","maxLength":32,"minLength":0,"type":"string"},"error_msg":{"description":"PDP5错误信息","example":"DBSS.00112233","maxLength":2097152,"minLength":0,"type":"string"}},"type":"object"}},"description":null,"group_id":"0ba875db15a142babc14f069c8b7c4f6","host":"dbss.cn-north-4.myhuaweicloud.com","id":"f7c5fec09a9a44a8acd892a51c3c650b","info_version":"v1","method":"get","name":"ListAuditDatabasesNew","parameters":{},"paths":{"/v2/{project_id}/audit/{instance_id}/databases":{"get":{"description":"查询数据库列表","operationId":"ListAuditDatabasesNew","parameters":[{"default":"xxxxxxxxxxxxxxxx","description":"**参数解释**:\n用户Token。 通过调用IAM服务查询用户Token接口获取(响应消息头中X-Subject-Token的值)。\n**约束限制**:\n不涉及\n**取值范围**:\nIAM服务查询用户Token接口为准\n**默认取值**:\n不涉及","in":"header","maxLength":2097152,"minLength":32,"name":"X-Auth-Token","required":true,"type":"string","x-example":"MIIDkgYJKoZIhvcNAQcCoIIDgzCCXXXXX..."},{"description":"**参数解释**:\n项目ID。可通过IAM服务[查询指定IAM用户的项目列表]接口获取。\n**约束限制**:\n不涉及\n**取值范围**:\n以IAM服务接口返回值为准,字符长度32-64。\n**默认取值**:\n不涉及","in":"path","maxLength":64,"minLength":32,"name":"project_id","required":true,"type":"string"},{"description":"**参数解释**:\n实例ID。可通过查询实例列表接口ID字段获取\n**约束限制**:\n不涉及\n**取值范围**:\n以查询实例列表接口值为准,字符长度32-64。\n**默认取值**:\n不涉及","in":"path","maxLength":64,"minLength":32,"name":"instance_id","required":true,"type":"string"},{"description":"实例状态\n- ON :开启\n- OFF : 关闭","in":"query","name":"status","required":false,"type":"string"},{"description":"**参数解释**:\n分页偏移量,从第一条数据偏移offset条数据后开始查询\n**约束限制**:\n仅支持大于等于0的整数\n**取值范围**:\n大于等于0\n**默认取值**:\n默认值为0","in":"query","name":"offset","required":false,"type":"string"},{"description":"**参数解释**:\n每页查询记录数。\n**约束限制**:\n仅支持大于0的整数\n**取值范围**:\n大于0小于等于10000\n**默认取值**:\n默认值为100","in":"query","name":"limit","required":false,"type":"string"}],"produces":["application/json"],"responses":{"200":{"description":"成功","examples":{"application/json":{"databases":[{"database":{"charset":"UTF8","clouddb_obj_info":null,"db_classification":"ECS","dws_obj_info":null,"id":"twS8v5gBhN3UjKKcoyJ6","instance_name":null,"ip":"10.0.2.3","name":"pgtest","port":"5300","rds_audit_switch_mismatch":false,"rds_id":null,"rds_obj_info":null,"status":false,"type":"POSTGRESQL","version":"7.4"}},{"database":{"charset":"GBK","clouddb_obj_info":null,"db_classification":"ECS","dws_obj_info":null,"id":"4YF4Y5gBzqyXNYgsjgsC","instance_name":null,"ip":"122.24.4.52","name":"特文森特","port":"1","rds_audit_switch_mismatch":false,"rds_id":null,"rds_obj_info":null,"status":false,"type":"MYSQL","version":"5.0"}}],"total":2}},"schema":{"$ref":"#/definitions/DataBaseResponse"}},"400":{"description":"请求参数错误","schema":{"$ref":"#/definitions/DbssError"}},"403":{"description":"认证失败","schema":{"$ref":"#/definitions/DbssError"}},"500":{"description":"服务器内部错误","schema":{"$ref":"#/definitions/DbssError"}}},"summary":"查询数据库列表","tags":["审计数据库"],"x-api-type":"open-api","x-hc":"Y","x-hcso":"Y","x-hk":"Y","x-is-registered":"Y","x-open-region-cloud":"hc,hk,hcso,sbc","x-order":0,"x-request-examples-url-1":"/v2/{project_id}/audit/{instance_id}/databases","x-sbc":"Y","x-support-sdk":"Y"}}},"product_short":"DBSS","region_id":"cn-north-4","schemes":["HTTPS"],"security_definitions":null,"summary":"查询数据库列表","tags":"审计数据库","uri":null,"version":"2.0"}