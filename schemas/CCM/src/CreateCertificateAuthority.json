{"base_path":"/","components":null,"consumes":"","definitions":{"CreateCertificateAuthorityRequestBody":{"properties":{"ca_id":{"description":"CA证书ID。如果为空,则创建按需CA;如果不为空,则保存包周期CA信息。","maxLength":36,"minLength":36,"type":"string"},"crl_configuration":{"$ref":"#/definitions/CrlConfiguration","description":"证书CRL配置,详情请参见**CrlConfiguration**字段数据结构说明。"},"distinguished_name":{"$ref":"#/definitions/DistinguishedName","description":"证书名称配置,详情请参见**DistinguishedName**字段数据结构说明。"},"enterprise_project_id":{"description":"企业多项目ID。用户未开通企业多项目时,不需要输入该字段。 用户开通企业多项目时,查询资源可以输入该字段。 若用户不输入该字段,默认查询租户所有有权限的企业多项目下的资源。 此时“enterprise_project_id”取值为“all”。 若用户输入该字段,取值满足以下任一条件.\n  取值为“all”\n  取值为“0”\n  满足正则匹配:“^[0-9a-z]{8}-[0-9a-z]{4}-[0-9a-z]{4}-[0-9a-z]{4}-[0-9a-z]{12}$”","type":"string"},"issuer_id":{"description":"父CA证书ID,分以下三种情况:\n  - 创建根CA,根CA为自签名证书,无父CA,将忽略该参数;\n  - 创建从属CA,并需要直接激活该证书,为必填值;\n  - 创建从属CA,不需要直接激活该证书,本参数值将被忽略,激活证书时需要再次传入。","maxLength":36,"minLength":36,"type":"string"},"key_algorithm":{"description":"密钥算法,可选值如下:\n  - **RSA2048** : RSA算法,密钥长度2048位;\n  - **RSA4096** : RSA算法,密钥长度4096位;\n  - **EC256** : 椭圆曲线算法(Elliptic Curve Digital Signature Algorithm (ECDSA)),密钥长度256位;\n  - **EC384** : 椭圆曲线算法(Elliptic Curve Digital Signature Algorithm (ECDSA)),密钥长度384位;\n  - **SM2** : 国家密码管理局颁发的椭圆曲线算法(签名哈希算法SM3),密钥长度256位。(中国站)","type":"string"},"key_usages":{"description":"密钥用法,具体标准参见RFC 5280中:[4.2.1.3节](https://datatracker.ietf.org/doc/html/rfc5280#section-4.2.1.3)。\n  - **digitalSignature** : 数字签名;\n  - **nonRepudiation** : 不可抵赖;\n  - **keyEncipherment** : 密钥用于加密密钥数据;\n  - **dataEncipherment** : 用于加密数据;\n  - **keyAgreement** : 密钥协商;\n  - **keyCertSign** : 签发证书;\n  - **cRLSign** : 签发吊销列表;\n  - **encipherOnly** : 仅用于加密;\n  - **decipherOnly** : 仅用于解密。\n> 缺省值如下:\n> - 根CA证书:默认为**[digitalSignature,keyCertSign,cRLSign]**,忽略用户传入值;\n> - 从属CA证书:默认为**[digitalSignature,keyCertSign,cRLSign]**,支持用户自定义。","items":{"type":"string"},"type":"array"},"path_length":{"description":"CA证书路径长度,分以下三种情况:\n  - 创建根CA,为便于后期对证书层级的扩展,根CA默认不对路径长度做限制,故将忽略该参数。证书层级规划可由从属CA做限制;\n  - 创建从属CA,并需要直接激活该证书,用户可自定义。缺省值为0;\n  - 创建从属CA,不需要直接激活该证书,本参数值将被忽略。激活证书时若要自定义,需要再次传入;","format":"int32","maximum":6,"minimum":0,"type":"integer"},"signature_algorithm":{"description":"签名哈希算法。\n- 分以下三种情况:\n  - 创建根CA,为必填值;\n  - 创建从属CA,并需要直接激活该证书,为必填值;\n  - 创建从属CA,不需要直接激活该证书,本参数值将被忽略,激活证书时需要再次传入。\n- 可选值如下:\n  - **SHA256**\n  - **SHA384**\n  - **SHA512**\n  - **SM3**(中国站,密钥算法SM2)","type":"string"},"type":{"description":"创建的CA类型。\n- **ROOT** : 根CA\n- **SUBORDINATE** : 从属CA","type":"string"},"validity":{"$ref":"#/definitions/Validity","description":"证书有效期,分以下三种情况:\n- 创建根CA,为必填值;\n- 创建从属CA,并需要直接激活该证书,为必填值;\n- 创建从属CA,不需要直接激活该证书,本参数值将被忽略,激活证书时需要再次传入。\n> 详情请参见**Validity**字段数据结构说明。"}},"required":["type","key_algorithm","distinguished_name"],"title":"CreateCertificateAuthorityRequestBody","type":"object"},"CreateCertificateAuthorityResponseBody":{"properties":{"ca_id":{"description":"当前签发的CA证书ID。","maxLength":36,"minLength":36,"type":"string"}},"required":["ca_id"],"title":"CreateCertificateAuthorityResponseBody"},"CrlConfiguration":{"properties":{"crl_name":{"description":"吊销列表文件名称。\n> 若用户不指定,系统将默认采用当前证书的父CA ID。","type":"string"},"enabled":{"description":"是否启用CRL发布功能。\n- **true**\n- **false**","type":"boolean"},"obs_bucket_name":{"description":"OBS桶名称。\n> 当需要启用CRL发布功能:\n> - 此参数为必填项,且用户必须已创建委托授权,授予PCA服务对OBS的相关权限,具体参见本文档:**证书吊销处理>查看是否具有委托权限**、**证书吊销处理>创建委托**;\n> - 指定的OBS桶必须存在,否则将报错。","type":"string"},"valid_days":{"description":"CRL更新周期,单位为\"天\"。当启用CRL发布功能,为必填项。","format":"int32","maximum":30,"minimum":7,"type":"integer"}},"required":["enabled"],"title":"CrlConfiguration","type":"object"},"DistinguishedName":{"properties":{"common_name":{"description":"证书通用名称(CN),名称只能由\"-\"、\"_\"、\" \"、\".\"、\",\"、\"*\"、字母、数字、汉字组成,长度不能超过64位字符。","maxLength":64,"minLength":1,"type":"string"},"country":{"description":"国家编码,只能由英文组成,长度为2位字符。","maxLength":2,"minLength":2,"type":"string"},"locality":{"description":"地区名称,名称只能由\"-\"、\"_\"、\" \"、\".\"、\",\"、字母、数字、汉字组成,长度不能超过128位字符。","maxLength":128,"minLength":1,"type":"string"},"organization":{"description":"组织名称,名称只能由\"-\"、\"_\"、\" \"、\".\"、\",\"、字母、数字、汉字组成,长度不能超过64位字符。","maxLength":64,"minLength":1,"type":"string"},"organizational_unit":{"description":"组织单元名称,名称只能由\"-\"、\"_\"、\" \"、\".\"、\",\"、字母、数字、汉字组成,长度不能超过64位字符。","maxLength":64,"minLength":1,"type":"string"},"state":{"description":"省市名称,名称只能由\"-\"、\"_\"、\" \"、\".\"、\",\"、字母、数字、汉字组成,长度不能超过128位字符。","maxLength":128,"minLength":1,"type":"string"}},"required":["common_name","country","state","locality","organization","organizational_unit"],"title":"DistinguishedName","type":"object"},"Error":{"properties":{"error_code":{"description":"错误请求返回的错误码。","maxLength":36,"minLength":3,"type":"string"},"error_msg":{"description":"错误请求返回的错误信息。","maxLength":1024,"minLength":0,"type":"string"}},"required":["error_code","error_msg"],"title":"Error","type":"object"},"Validity":{"properties":{"start_from":{"description":"起始时间,为可选值:\n  - 格式为时间戳(毫秒级),如1645146939688代表2022-02-18 09:15:39;\n  - 不早于当前时间5分钟,即start_from > (current_time - 5min)。","format":"int32","type":"integer"},"type":{"description":"有效期类型,为必填值:\n  - **YEAR** : 年(12个月)\n  - **MONTH** : 月(统一按31天)\n  - **DAY** : 日\n  - **HOUR** : 小时","type":"string"},"value":{"description":"证书有效期值,与type对应的类型值,换算成年需满足以下规则:\n  - 根CA,有效期小于等于30年;\n  - 从属CA与私有证书,有效期小于等于20年。","format":"int32","type":"integer"}},"required":["type","value"],"title":"Validity","type":"object"}},"description":null,"group_id":"eeb1572024bc43b3a048b9c50f8e189d","host":"ccm.cn-north-4.myhuaweicloud.com","id":"da1b64b60f664e81b2a5655a0b033bde","info_version":"v1","method":"post","name":"CreateCertificateAuthority","parameters":{},"paths":{"/v1/private-certificate-authorities":{"post":{"consumes":["application/json"],"deprecated":false,"description":"创建CA,分以下三种情况:\n- 创建根CA,根据参数介绍中,填写必选值;\n- 创建从属CA,并需要直接激活该证书,根据参数介绍中,填写必选值;\n- 创建从属CA,不需要直接激活该证书,请求body中只需要缺少此三个参数之一即可:issuer_id、signature_algorithm、validity。","operationId":"CreateCertificateAuthority","parameters":[{"description":"用户token,参见:[IAM token获取方法](https://support.huaweicloud.com/api-iam/iam_30_0001.html)。","in":"header","name":"X-Auth-Token","required":true,"type":"string","x-example":"MIIePgYJKoZIhvcNAQcCoIIeLzCCHisCAQExDTALBglghkgBZQMEAgEwghxOBgkqhkiG9w0BBwGgghw..."},{"description":"CreateCertificateAuthorityRequestBody","in":"body","name":"CreateCertificateAuthorityRequestBody","required":true,"schema":{"$ref":"#/definitions/CreateCertificateAuthorityRequestBody"}}],"produces":["*/*"],"responses":{"200":{"description":"请求已成功","examples":{"application/json":{"ca_id":"66504812-fedc-414a-9b7c-4c1836398524"}},"schema":{"$ref":"#/definitions/CreateCertificateAuthorityResponseBody"}},"400":{"description":"请求参数有误。","examples":{"application/json":{"error_code":"PCA.XXX","error_msg":"XXX"}},"schema":{"$ref":"#/definitions/Error"}},"401":{"description":"被请求的页面需要鉴权。","examples":{"application/json":{"error_code":"PCA.XXX","error_msg":"XXX"}},"schema":{"$ref":"#/definitions/Error"}},"403":{"description":"认证失败。","examples":{"application/json":{"error_code":"PCA.XXX","error_msg":"XXX"}},"schema":{"$ref":"#/definitions/Error"}},"404":{"description":"资源不存在或资源未找到。","examples":{"application/json":{"error_code":"PCA.XXX","error_msg":"XXX"}},"schema":{"$ref":"#/definitions/Error"}},"500":{"description":"服务内部错误。","examples":{"application/json":{"error_code":"PCA.XXX","error_msg":"XXX"}},"schema":{"$ref":"#/definitions/Error"}}},"summary":"创建CA","tags":["私有CA管理"],"x-is-registered":"Y","x-request-examples-1":{"crl_configuration":{"enabled":false,"obs_bucket_name":"demoBucket","valid_days":8},"distinguished_name":{"common_name":"demoRootRSA","country":"CN","locality":"chengdu","organization":"HW","organizational_unit":"dew","state":"sichuan"},"key_algorithm":"RSA4096","signature_algorithm":"SHA512","type":"ROOT","validity":{"type":"YEAR","value":3}},"x-request-examples-description-1":"创建CA证书,请求头中的**X-Auth-Token**字段需要填写token,且该token需要具有本API的访问权限。","x-request-examples-url-1":"POST https://ccm.cn-north-4.myhuaweicloud.com/v1/private-certificate-authorities","x-support-sdk":"Y"}}},"product_short":"CCM","region_id":"cn-north-4","schemes":["HTTPS"],"security_definitions":null,"summary":"创建CA","tags":"私有CA管理","uri":null,"version":"2.0"}