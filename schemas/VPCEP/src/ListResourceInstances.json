{"base_path":"/","components":null,"consumes":"[\"application/json;charset=UTF-8\"]","definitions":{"Match":{"properties":{"key":{"description":"键。第一期限定为resource_name,后续扩展。","maxLength":128,"minLength":1,"type":"string","x-maxLength":36,"x-minLength":1},"value":{"description":"值。每个值最大长度255个unicode字符。不校验字符集范。","maxLength":255,"minLength":1,"type":"string","x-maxLength":43,"x-minLength":1}},"required":["key","value"]},"QueryResourceInstanceTagsBody":{"description":"查询资源实例接口请求结构体","properties":{"action":{"description":"操作标识(仅限于filter,count):filter(过滤),\ncount(查询总条数)如果是filter就按照过滤条件查询,\n如果是count,只需要返回总条数,禁止返回其他字段。","enum":["filter","count"],"type":"string"},"limit":{"description":"查询记录数(action为count时无此参数)如果action为filter默认为1000,\nlimit最多为1000,不能为负数,最小值为1。","type":"string"},"matches":{"description":"搜索字段,key为要匹配的字段,如resource_name等。value为匹配的值。\nkey为固定字典值,不能包含重复的key或不支持的key。\n根据key的值确认是否需要模糊匹配,如resource_name默认为模糊搜索(不区分大小写),\n如果value为空字符串精确匹配(多数服务不存在资源名称为空的情况,\n因此此类情况返回空列表)。resource_id为精确匹配。\n第一期只做resource_name,后续再扩展。","items":{"$ref":"#/definitions/Match"},"type":"array"},"not_tags":{"description":"不包含标签,最多包含10个key,每个key下面的value最多10个,\n每个key对应的value可以为空数组但结构体不能缺失。Key不能重复,\n同一个key中values不能重复。结果返回不包含标签的资源列表,key之间是与的关系,\nkey、value结构中value是或的关系。\n无过滤条件时返回全量数据。","items":{"$ref":"#/definitions/TagValuesList"},"maxItems":10,"minItems":1,"type":"array"},"not_tags_any":{"description":"不包含任意标签,最多包含10个key,每个key下面的value最多10个,\n每个key对应的value可以为空数组但结构体不能缺失。Key不能重复,\n同一个key中values不能重复。结果返回不包含标签的资源列表,\nkey之间是与的关系,key、value结构中value是或的关系。\n无过滤条件时返回全量数据。","items":{"$ref":"#/definitions/TagValuesList"},"maxItems":10,"minItems":1,"type":"array"},"offset":{"description":"索引位置,偏移量(action为count时无此参数)从第一条数据偏移offset条数据后开始查询,\n如果action为filter默认为0(偏移0条数据,表示从第一条数据开始查询),\n必须为数字,不能为负数。","type":"string"},"sys_tags":{"description":"系统标签,","items":{"$ref":"#/definitions/TagValuesList"},"type":"array"},"tags":{"description":"包含标签,最多包含10个key,每个key下面的value最多10个,\n每个key对应的value可以为空数组但结构体不能缺失。Key不能重复,\n同一个key中values不能重复。结果返回包含所有标签的资源列表,\nkey之间是与的关系,key-value结构中value是或的关系。\n无tag过滤条件时返回全量数据。","items":{"$ref":"#/definitions/TagValuesList"},"maxItems":10,"minItems":1,"type":"array"},"tags_any":{"description":"包含任意标签,最多包含10个key,每个key下面的value最多10个,\n每个key对应的value可以为空数组但结构体不能缺失。\nKey不能重复,同一个key中values不能重复。\n结果返回包含标签的资源列表,key之间是或的关系,key、value结构中value是或的关系。\n无过滤条件时返回全量数据。","items":{"$ref":"#/definitions/TagValuesList"},"maxItems":10,"minItems":1,"type":"array"},"without_any_tag":{"description":"默认为false,取值【true/false】,当withoutAnyTag=true, 忽略tags、tagsAny、notTags、notTagsAny参数校验。","type":"boolean"}},"required":["action"]},"ResourceInstance":{"description":"资源实例详情","properties":{"resource_id":{"description":"资源ID,Endpoint Service ID或Endpoint ID。","maxLength":64,"minLength":1,"type":"string"},"resource_name":{"description":"资源名称,资源没有名称时,返回ID。","maxLength":128,"minLength":0,"type":"string"},"tags":{"description":"标签列表。","items":{"$ref":"#/definitions/TagList"},"type":"array"}}},"TagList":{"description":"标签列表,没有标签默认为空数组。","properties":{"key":{"description":"键。\nkey不能为空,长度1~128个字符(中文也可以输入128个字符)。 \n可用 UTF-8 格式表示的字母(包含中文、西班牙语、葡语等)、数字和空格,以及以下字符: _ . : = + - @。\n_sys_开头属于系统标签,租户不能输入。\nkey两头不能有空格字符。","maxLength":128,"minLength":1,"type":"string"},"value":{"description":"值。\n长度0~255个字符(中文也可以输入255个字符)。 \n可用 UTF-8 格式表示的字母(包含中文、西班牙语、葡语等)、数字和空格,以及以下字符: _ . : / = + - @。\n资源标签值可以为空字符串。","maxLength":255,"type":"string"}}},"TagResourceInstanceResponseBody":{"description":"查询资源实例接口响应体","properties":{"resources":{"description":"资源实例详情","items":{"$ref":"#/definitions/ResourceInstance"},"type":"array"},"total_count":{"description":"总记录数。","exclusiveMaximum":true,"format":"int32","minimum":1,"type":"integer"}}},"TagValuesList":{"properties":{"key":{"description":"键。\n最大长度128个unicode字符。key不能为空。(搜索时不对此参数做字符集校),\nkey不能为空或者空字符串,不能为空格,校验和使用之前先trim前后半角空格。","maxLength":128,"minLength":1,"type":"string"},"values":{"description":"值列表。\n每个值最大长度255个unicode字符,校验和使用之前先trim前后半角空格。\nvalue可为空数组但不可缺省。如果values为空列表,则表示any_value(查询任意value)。\nvalue之间为或的关系。(搜索时不对此参数做字符集校验,只做长度校验)。","items":{"maxLength":255,"type":"string"},"maxItems":1000,"minItems":1,"type":"array"}},"required":["key","values"]}},"description":null,"group_id":"2e385073206049fd822df2ef2e7c7ce9","host":"vpcep.cn-north-4.myhuaweicloud.com","id":"bef06ada487d41a0b027608f1bc03f25","info_version":"v1","method":"post","name":"ListResourceInstances","parameters":{},"paths":{"/v1/{project_id}/{resource_type}/resource_instances/action":{"post":{"description":"使用标签过滤查询租户下资源的实例。","operationId":"ListResourceInstances","parameters":[{"description":"项目ID。","in":"path","maxLength":64,"minLength":1,"name":"project_id","required":true,"type":"string"},{"description":"资源类型,值为:endpoint_service或endpoint。\n- endpoint_service:云服务器,适用于作为服务器使用。\n- endpoint:虚拟IP,适用于作为虚IP场景使用","enum":["endpoint_service","endpoint"],"in":"path","name":"resource_type","required":true,"type":"string"},{"description":"用户Token。通过调用IAM服务获取用户Token接口获取(响应消息头中X-Subject-Token的值)。","in":"header","name":"X-Auth-Token","required":true,"type":"string"},{"default":"application/json","description":"发送的实体的MIME类型。推荐用户默认使用application/json, 如果API是对象、镜像上传等接口,媒体类型可按照流类型的不同进行确定。","in":"header","name":"Content-Type","required":false,"type":"string"},{"description":"查询资源实例接口请求接口体","in":"body","name":"ListResourceInstancesRequestBody","required":true,"schema":{"$ref":"#/definitions/QueryResourceInstanceTagsBody"}}],"responses":{"200":{"description":"服务器已成功处理了请求","examples":{"application/json":"– action为filter时响应体\n{\n\"resources\": [\n{\n\"resource_id\": \"cdfs_cefs_wesas_12_dsad\",\n\"resource_name\": \"resource1\",\n\"tags\": [\n{\n\"key\": \"key1\", \"value\": \"value1\"\n},\n{\n\"key\": \"key2\", \"value\": \"value1\"\n}\n]\n}\n],\n\"total_count\": 1000\n}"},"schema":{"$ref":"#/definitions/TagResourceInstanceResponseBody"}}},"summary":"查询资源实例接口","tags":["TAG功能"],"x-api-type":"open-api","x-first-open-time":"2018-06-01","x-flow-control-group":"vpcep","x-hybridcloud":"false","x-in-cli":"","x-is-calling":"Y","x-is-registered":"Y","x-multi-tenant-flow-time":"1","x-multi-tenant-flow-value":"200","x-name":"查询资源实例","x-order":1,"x-request-examples-1":"action为filter时请求体\n{\n    \"offset\": \"100\",\n    \"limit\": \"100\",\n    \"action\": \"filter\",\n    \"matches\": [\n        {\n            \"key\": \"resource_name\",\n            \"value\": \"resource1\"\n        }\n    ],\n    \"not_tags\": [\n        {\n            \"key\": \"key1\",\n            \"values\": [\n                \"*value1\",\n                \"value2\"\n            ]\n        }\n    ],\n    \"tags\": [\n        {\n            \"key\": \"key1\",\n            \"values\": [\n                \"*value1\",\n                \"value2\"\n            ]\n        }\n    ],\n    \"tags_any\": [\n        {\n            \"key\": \"key1\",\n            \"values\": [\n                \"value1\",\n                \"value2\"\n            ]\n        }\n    ],\n    \"not_tags_any\": [\n        {\n            \"key\": \"key1\",\n            \"values\": [\n                \"value1\",\n                \"value2\"\n            ]\n        }\n    ]\n}","x-request-examples-2":"action为count时请求体\n{\n    \"action\": \"count\",\n    \"not_tags\": [\n        {\n            \"key\": \"key1\",\n            \"values\": [\n                \"value1\",\n                \"*value2\"\n            ]\n        }\n    ],\n    \"tags\": [\n        {\n            \"key\": \"key1\",\n            \"values\": [\n                \"value1\",\n                \"value2\"\n            ]\n        },\n        {\n            \"key\": \"key2\",\n            \"values\": [\n                \"value1\",\n                \"value2\"\n            ]\n        }\n    ],\n    \"tags_any\": [\n        {\n            \"key\": \"key1\",\n            \"values\": [\n                \"value1\",\n                \"value2\"\n            ]\n        }\n    ],\n    \"not_tags_any\": [\n        {\n            \"key\": \"key1\",\n            \"values\": [\n                \"value1\",\n                \"value2\"\n            ]\n        }\n    ],\n    \"matches\": [\n        {\n            \"key\": \"resource_name\",\n            \"value\": \"resource1\"\n        }\n    ]\n}","x-request-examples-description-1":"使用标签查询终端节点","x-request-examples-description-2":"查询终端节点服务资源总数","x-request-examples-text-1":"action为filter时请求体\n{\n    \"offset\": \"100\",\n    \"limit\": \"100\",\n    \"action\": \"filter\",\n    \"matches\": [\n        {\n            \"key\": \"resource_name\",\n            \"value\": \"resource1\"\n        }\n    ],\n    \"not_tags\": [\n        {\n            \"key\": \"key1\",\n            \"values\": [\n                \"*value1\",\n                \"value2\"\n            ]\n        }\n    ],\n    \"tags\": [\n        {\n            \"key\": \"key1\",\n            \"values\": [\n                \"*value1\",\n                \"value2\"\n            ]\n        }\n    ],\n    \"tags_any\": [\n        {\n            \"key\": \"key1\",\n            \"values\": [\n                \"value1\",\n                \"value2\"\n            ]\n        }\n    ],\n    \"not_tags_any\": [\n        {\n            \"key\": \"key1\",\n            \"values\": [\n                \"value1\",\n                \"value2\"\n            ]\n        }\n    ]\n}","x-request-examples-text-2":"action为count时请求体\n{\n    \"action\": \"count\",\n    \"not_tags\": [\n        {\n            \"key\": \"key1\",\n            \"values\": [\n                \"value1\",\n                \"*value2\"\n            ]\n        }\n    ],\n    \"tags\": [\n        {\n            \"key\": \"key1\",\n            \"values\": [\n                \"value1\",\n                \"value2\"\n            ]\n        },\n        {\n            \"key\": \"key2\",\n            \"values\": [\n                \"value1\",\n                \"value2\"\n            ]\n        }\n    ],\n    \"tags_any\": [\n        {\n            \"key\": \"key1\",\n            \"values\": [\n                \"value1\",\n                \"value2\"\n            ]\n        }\n    ],\n    \"not_tags_any\": [\n        {\n            \"key\": \"key1\",\n            \"values\": [\n                \"value1\",\n                \"value2\"\n            ]\n        }\n    ],\n    \"matches\": [\n        {\n            \"key\": \"resource_name\",\n            \"value\": \"resource1\"\n        }\n    ]\n}","x-request-examples-url-1":"POST https://{endpoint}/v1/{project_id}/endpoint/resource_instances/action","x-request-examples-url-2":"https://{endpoint}/v1/{project_id}/endpoint_service/ resource_instances/action","x-scope":"Commercial","x-source":"SelfDeveloped","x-support-sdk":"Y","x-tenant-flow-time":"1","x-tenant-flow-value":"50","x-timeout":"30s","x-un-cli":"","x-version":""}}},"product_short":"VPCEP","region_id":"cn-north-4","schemes":["HTTPS"],"security_definitions":{"JWTAuthorization":{"description":"APIG网关的JWT鉴权参数","in":"header","name":"Authorization","type":"apiKey"}},"summary":"查询资源实例接口","tags":"TAG功能","uri":null,"version":"2.0"}