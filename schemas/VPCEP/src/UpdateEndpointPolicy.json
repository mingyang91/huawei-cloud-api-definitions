{"base_path":"/","components":null,"consumes":"[\"application/json;charset=UTF-8\"]","definitions":{"EndpointPolicyResponseBody":{"description":"终端节点policy响应结构体","properties":{"active_status":{"description":"账号状态。\n - frozen:冻结\n - active:解冻","items":{"type":"string"},"type":"array"},"created_at":{"description":"终端节点的创建时间。\n采用UTC时间格式,格式为:YYYY-MM-DDTHH:MM:SSZ","format":"date-time","type":"string"},"description":{"description":"描述字段,支持中英文字母、数字等字符,不支持“<”或“>”字符。","maxLength":512,"minLength":0,"type":"string"},"enable_whitelist":{"description":"是否开启网络ACL隔离。\n - true:开启网络ACL隔离\n - false:不开启网络ACL隔离\n若未指定,则返回false。\n创建连接Interface类型终端节点服务的终端节点时,显示此参数。","type":"boolean"},"endpoint_pool_id":{"description":"待废弃,实例相关联的集群ID","maxLength":64,"minLength":1,"type":"string"},"endpoint_service_id":{"description":"终端节点服务的ID。","maxLength":64,"minLength":1,"type":"string"},"endpoint_service_name":{"description":"终端节点服务的名称。","type":"string"},"error":{"description":"错误信息。\n当终端节点状态异常,即“status”的值为“failed”时,会返回该字段。","items":{"$ref":"#/definitions/QueryError"},"type":"array"},"id":{"description":"终端节点的ID,唯一标识。","maxLength":64,"minLength":1,"type":"string"},"ip":{"description":"访问所连接的终端节点服务的IP。\n仅当同时满足如下条件时,返回该参数:\n当查询连接interface类型终端节点服务的终端节点时。\n终端节点服务启用“连接审批”功能,且已经“接受”连接审批。\n“status”可以是“accepted”或者“rejected(仅支持“接受”连接审批后再“拒绝”的情况)”。","maxLength":64,"minLength":1,"type":"string"},"marker_id":{"description":"终端节点的报文标识。","type":"integer"},"policy_document":{"description":"终端节点策略信息,仅当终端节点服务的enable_policy值为true时支持该参数,默认值为完全访问权限。(OBS、SFS的终端节点服务暂不支持该参数)","maxItems":20480,"minItems":0,"type":"object"},"policy_statement":{"description":"Gateway类型终端节点策略信息,仅限OBS、SFS的终端节点服务的enable_policy值为true时支持该参数。","items":{"$ref":"#/definitions/PolicyStatement"},"maxItems":10,"minItems":0,"type":"array"},"project_id":{"description":"项目ID,获取方法请参见获取项目ID。","maxLength":64,"minLength":1,"type":"string"},"public_border_group":{"description":"终端节点关联的Public Border Group信息,只有当终端节点和边缘Pool相关联时才会返回该字段","type":"string"},"routetables":{"description":"路由表ID列表。\n若未指定,返回默认VPC下路由表ID。\n创建gateway类型终端节点服务的终端节点时,显示此参数。","items":{"description":"路由表ID。","maxLength":64,"minLength":0,"type":"string"},"type":"array"},"service_type":{"description":"终端节点连接的终端节点服务类型。\n - gateway:由运维人员配置。用户无需创建,可直接使用。\n - interface:包括运维人员配置的云服务和用户自己创建的私有服务。\n其中,运维人员配置的云服务无需创建,用户可直接使用。\n您可以通过查询公共终端节点服务列表,\n查看由运维人员配置的所有用户可见且可连接的终端节点服务,\n并通过创建终端节点服务创建Interface类型的终端节点服务。","type":"string"},"status":{"description":"终端节点的连接状态。\n - pendingAcceptance:待接受\n - creating:创建中\n - accepted:已接受\n - rejected:已拒绝\n - failed:失败\n - deleting:删除中","type":"string"},"tags":{"description":"标签列表,没有标签默认为空数组。","items":{"$ref":"#/definitions/TagList"},"type":"array"},"updated_at":{"description":"终端节点的更新时间。\n采用UTC时间格式,格式为:YYYY-MM-DDTHH:MM:SSZ","format":"date-time","type":"string"},"vpc_id":{"description":"终端节点所在的VPC的ID。","maxLength":64,"minLength":1,"type":"string"},"whitelist":{"description":"控制访问终端节点的白名单。\n若未创建,则返回空列表。\n创建连接Interface类型终端节点服务的终端节点时,显示此参数。","items":{"description":"ipv4或cidr。","maxLength":32,"minLength":0,"type":"string"},"type":"array"}},"type":"object"},"PolicyStatement":{"description":"policy","properties":{"Action":{"description":"obs访问权限","items":{"type":"string"},"type":"array"},"Effect":{"description":"- Allow,允许控制访问权限\n- Deny,拒绝控制访问权限","enum":["Allow","Deny"],"type":"string"},"Resource":{"description":"obs对象","items":{"type":"string"},"type":"array"}},"required":["Effect","Action","Resource"]},"QueryError":{"description":"查询资源返回的异常信息","properties":{"error_code":{"description":"错误编码。","maxLength":10,"minLength":0,"type":"string"},"error_message":{"description":"错误信息。","maxLength":1024,"minLength":0,"type":"string"}}},"TagList":{"description":"标签列表,没有标签默认为空数组。","properties":{"key":{"description":"键。\nkey不能为空,长度1~128个字符(中文也可以输入128个字符)。 \n可用 UTF-8 格式表示的字母(包含中文、西班牙语、葡语等)、数字和空格,以及以下字符: _ . : = + - @。\n_sys_开头属于系统标签,租户不能输入。\nkey两头不能有空格字符。","maxLength":128,"minLength":1,"type":"string"},"value":{"description":"值。\n长度0~255个字符(中文也可以输入255个字符)。 \n可用 UTF-8 格式表示的字母(包含中文、西班牙语、葡语等)、数字和空格,以及以下字符: _ . : / = + - @。\n资源标签值可以为空字符串。","maxLength":255,"type":"string"}}},"UpdateEndpointPolicyRequestBody":{"description":"更新终端节点policy请求结构体","properties":{"policy_document":{"description":"终端节点策略信息,仅当终端节点服务的enable_policy值为true时支持该参数,默认值为完全访问权限。(OBS、SFS的终端节点服务暂不支持该参数)","maxItems":20480,"minItems":0,"type":"object"},"policy_statement":{"description":"Gateway类型终端节点策略信息,仅限OBS、SFS的终端节点服务的enable_policy值为true时支持该参数。","items":{"$ref":"#/definitions/PolicyStatement"},"type":"array"}}}},"description":null,"group_id":"2e385073206049fd822df2ef2e7c7ce9","host":"vpcep.cn-north-4.myhuaweicloud.com","id":"776edcea20eb4d8d820b99d04988f23f","info_version":"v1","method":"put","name":"UpdateEndpointPolicy","parameters":{},"paths":{"/v1/{project_id}/vpc-endpoints/{vpc_endpoint_id}/policy":{"put":{"description":"修改终端节点策略。","operationId":"UpdateEndpointPolicy","parameters":[{"description":"项目ID","in":"path","maxLength":64,"minLength":1,"name":"project_id","required":true,"type":"string"},{"description":"终端节点的ID。","in":"path","maxLength":64,"minLength":1,"name":"vpc_endpoint_id","required":true,"type":"string"},{"description":"用户Token。通过调用IAM服务获取用户Token接口获取(响应消息头中X-Subject-Token的值)。","in":"header","name":"X-Auth-Token","required":true,"type":"string"},{"default":"application/json","description":"发送的实体的MIME类型。推荐用户默认使用application/json, 如果API是对象、镜像上传等接口,媒体类型可按照流类型的不同进行确定。","in":"header","name":"Content-Type","required":false,"type":"string"},{"description":"更新终端节点策略请求结构体","in":"body","name":"UpdateEndpointPolicyRequestBody","required":true,"schema":{"$ref":"#/definitions/UpdateEndpointPolicyRequestBody"}}],"responses":{"200":{"description":"服务器已成功处理了请求","schema":{"$ref":"#/definitions/EndpointPolicyResponseBody"},"x-response-examples-1":{"application/json":{"active_status":["active"],"created_at":"2022-08-03T03:03:54Z","description":"","endpoint_pool_id":"b0ad6a4f-55c0-43f1-a26d-278639661fc2","endpoint_service_id":"4651bc78-5cec-41b7-b448-f77326ebbed0","endpoint_service_name":"br-abc-aaa1.obs_test.4651bc78-5cec-41b7-b448-f77326ebbed0","id":"938c8167-631e-40a4-99f9-493753fbd16b","marker_id":302035929,"policy_statement":[{"Action":["obs:*:*"],"Effect":"Allow","Resource":["obs:*:*:*:*/*","obs:*:*:*:*"]}],"project_id":"0605767a3300d5762fb7c0186d9e1779","routetables":["99477d3b-87f6-49d2-8f3b-2ffc72731a38"],"service_type":"gateway","status":"accepted","tags":[],"updated_at":"2022-08-03T03:03:57Z","vpc_id":"0da03835-1dcf-4361-9b87-34139d58dd59"}},"x-response-examples-2":{"application/json":{"active_status":["active"],"created_at":"2022-08-03T03:03:54Z","description":"","endpoint_pool_id":"15027791-b2b5-4b12-8e01-8dec1b576bf1","endpoint_service_id":"925b47bd-ffef-4abe-a450-d997f4f4e2be","endpoint_service_name":"com.myhuaweicloud.cn-southwest-2.swr","id":"2af6c328-057a-4146-882b-6828e270e594","marker_id":335620220,"policy_document":{"Statement":[{"Action":["*"],"Effect":"Allow","Principal":"*","Resource":["*"]}],"Version":"5.0"},"project_id":"0df9cbd6cf00f37***0c64b5af21","service_type":"interface","status":"accepted","tags":[],"updated_at":"2022-08-03T03:03:57Z","vpc_id":"a8494c3b-5dc9-46a4-8ca1-17a54f588d17"}}}},"summary":"修改终端节点策略","tags":["终端节点功能"],"x-first-open-time":"2018-06-01","x-flow-control-group":"vpcep","x-hybridcloud":"false","x-in-cli":"","x-is-calling":"Y","x-is-registered":"Y","x-multi-tenant-flow-time":"1","x-multi-tenant-flow-value":"200","x-name":"修改网关型终端节点策略","x-order":6,"x-request-examples-1":{"policy_statement":[{"Action":["obs:*:*"],"Effect":"Allow","Resource":["obs:*:*:*:*/*","obs:*:*:*:*"]}]},"x-request-examples-2":{"policy_document":{"Statement":[{"Action":["*"],"Effect":"Allow","Principal":"*","Resource":["*"]}],"Version":"5.0"}},"x-request-examples-description-1":"修改网关型终端节点策略,设置OBS访问权限和OBS对象并允许访问。","x-request-examples-description-2":"修改终端节点策略信息。","x-request-examples-text-1":{"policy_statement":[{"Action":["obs:*:*"],"Effect":"Allow","Resource":["obs:*:*:*:*/*","obs:*:*:*:*"]}]},"x-request-examples-text-2":{"policy_document":{"Statement":[{"Action":["*"],"Effect":"Allow","Principal":"*","Resource":["*"]}],"Version":"5.0"}},"x-request-examples-url-1":"PUT https://{endpoint}/v1/{project_id}/vpc-endpoints/938c8167-631e-40a4-99f9-493753fbd16b/policy","x-request-examples-url-2":"PUT https://{endpoint}/v1/{project_id}/vpc-endpoints/2af6c328-057a-4146-882b-6828e270e594/policy","x-scope":"Commercial","x-source":"SelfDeveloped","x-support-sdk":"Y","x-tenant-flow-time":"1","x-tenant-flow-value":"50","x-timeout":"30s","x-un-cli":"","x-version":""}}},"product_short":"VPCEP","region_id":"cn-north-4","schemes":["HTTPS"],"security_definitions":{"JWTAuthorization":{"description":"APIG网关的JWT鉴权参数","in":"header","name":"Authorization","type":"apiKey"}},"summary":"修改终端节点策略","tags":"终端节点功能","uri":null,"version":"2.0"}