{"base_path":"/v1","components":null,"consumes":"","definitions":{"CmdResult":{"description":"命令执行结果","properties":{"error_code":{"description":"任务错误码","type":"string"},"error_msg":{"description":"任务错误码说明","type":"string"},"execute_msg":{"description":"任务执行返回内容,最长1024字节。命令执行成功和失败均将命令的输出返回","maxLength":1024,"type":"string"},"instance_id":{"description":"实例id","maxLength":32,"type":"string"},"status":{"description":"任务状态。1表示运行中,2表示成功,-1表示失败","format":"int32","type":"integer"}},"type":"object"},"CmdResultWrapper":{"description":"命令执行结果包装","properties":{"cmd_results":{"description":"命令执行结果","items":{"$ref":"#/definitions/CmdResult"},"maxItems":100,"type":"array"}}},"ErrorInfo":{"description":"响应结果","properties":{"error_code":{"description":"响应码,KOOPHONE.API.0001,数字递增","type":"string"},"error_msg":{"description":"响应描述","type":"string"}},"required":["error_code"],"type":"object"},"InstanceSyncCommandsReq":{"description":"执行同步命令请求","properties":{"command":{"description":"命令,最大长度为1024字节,只支持大小写字母、数字、下划线(_)、点(.)、斜线(/)、冒号(:)、中划线(-)。","maxLength":1024,"type":"string"},"instance_ids":{"description":"实例列表","items":{"maxLength":32,"type":"string"},"maxItems":100,"type":"array"}},"required":["command","instance_ids"],"type":"object"},"InstanceSyncCommandsRsp":{"description":"执行同步命令响应","properties":{"data":{"$ref":"#/definitions/CmdResultWrapper","description":"命令执行结果","type":"object"},"error_code":{"description":"响应码,错误码规范KP.API.0001,数字递增","type":"string"},"error_msg":{"description":"响应描述","type":"string"}},"type":"object"}},"description":null,"group_id":"b920e5b33acf4bffbda9e4ceb1a26a46","host":"koophone.myhuaweicloud.com","id":"d1c5f7b544a643938bb7b9c8adbee450","info_version":"v1","method":"post","name":"SyncInvokeInstance","parameters":{},"paths":{"/instances/sync-command":{"post":{"consumes":["application/json"],"description":"实例执行同步命令接口。调用此api的前提条件是租户需要先购买koophone云手机实例。可以通过调用该接口实现对自己的koophone云手机实例进行adb指令操作。\n该接口是同步操作接口,如果有耗时adb操作建议使用实例执行异步命令接口。","operationId":"SyncInvokeInstance","parameters":[{"description":"执行同步命令请求","in":"body","name":"InstanceSyncCommandsReq","required":true,"schema":{"$ref":"#/definitions/InstanceSyncCommandsReq"}},{"description":"租户级Token","in":"header","name":"X-Auth-Token","required":true,"type":"string"}],"produces":["application/json"],"responses":{"200":{"description":"正常响应","examples":{"application/json":{"data":{"cmd_results":[{"error_code":"CPS.0191","error_msg":"Run command failed.","execute_msg":"ls: cannot access '/system': No such file or directory","instance_id":"a44uhlf7","status":-1},{"error_code":"","error_msg":"","execute_msg":"xxxxxx","instance_id":"efjy72gs","status":2}]},"error_code":"0","error_msg":"ok"}},"schema":{"$ref":"#/definitions/InstanceSyncCommandsRsp"}},"400":{"description":"请求错误","schema":{"$ref":"#/definitions/ErrorInfo"}},"500":{"description":"内部错误","schema":{"$ref":"#/definitions/ErrorInfo"}}},"summary":"实例执行同步命令","tags":["实例管理"],"x-is-registered":"Y","x-request-examples-1":{"command":"ls -l /system","instance_ids":["a44uhlf7","efjy72gs"]},"x-request-examples-text-1":{"command":"ls -l /system","instance_ids":["a44uhlf7","efjy72gs"]},"x-request-examples-url-1":"/v1/instances/sync-command","x-support-sdk":"Y"}}},"product_short":"KooPhone","region_id":"cn-north-4","schemes":["HTTPS"],"security_definitions":null,"summary":"实例执行同步命令","tags":"实例管理","uri":null,"version":"2.0"}