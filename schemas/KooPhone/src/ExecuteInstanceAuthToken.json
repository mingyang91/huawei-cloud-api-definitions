{"base_path":"/v1","components":null,"consumes":"","definitions":{"ErrorInfo":{"description":"响应结果","properties":{"error_code":{"description":"响应码,KOOPHONE.API.0001,数字递增","type":"string"},"error_msg":{"description":"响应描述","type":"string"}},"required":["error_code"],"type":"object"},"RmAuthTokenResp":{"description":"串流鉴权接口资管反参","properties":{"data":{"description":"反参全部信息","properties":{"device_token":{"description":"设备鉴权token","example":"dee5081f40c83ddea3ded91c387351e9","type":"string"},"resource":{"description":"资源集合","properties":{"device_id":{"description":"设备id","example":"7b0cd026df8d495b8a65d628d7bec433","type":"string"},"kp_id":{"description":"云机实例Id,如whklpuo1","example":"Q39YyZvI","type":"string"},"rtc":{"description":"rtc信息","properties":{"ice_signaling":{"description":"ice信令信息","properties":{"expired_time":{"description":"streaming时长。单位秒","example":null,"type":"string"},"ice_servers":{"description":"ICE 服务器","items":{"type":"string"},"type":"array"},"signaling_url":{"description":"信令服务访问地址","example":"http://100.93.2.248:18082","type":"string"}}}}},"sdk":{"description":"sdk信息","properties":{"external":{"description":"外网信息","properties":{"address":{"description":"外网eip地址","example":"10.83.71.187","type":"string"},"address_ipv6":{"description":"外网ipv6地址","example":null,"type":"string"},"aport":{"description":"音频端口","example":10030,"format":"int32","type":"integer"},"atype":{"description":"音频类型","example":1,"format":"int32","type":"integer"}}},"internal":{"description":"内网信息","properties":{"address":{"description":"内网ip地址","example":null,"type":"string"},"address_ipv6":{"description":"ipv6地址","example":null,"type":"string"},"aport":{"description":"音频端口","example":null,"type":"string"},"atype":{"description":"音频类型","example":null,"type":"string"}}}}}}}},"required":["device_token"]},"error_code":{"description":"错误码","example":0,"type":"string"},"error_msg":{"description":"错误信息","example":"ok","type":"string"}},"type":"object"}},"description":null,"group_id":"b920e5b33acf4bffbda9e4ceb1a26a46","host":"koophone.myhuaweicloud.com","id":"2c08e931317b4794ab5014eafc17843b","info_version":"v1","method":"post","name":"ExecuteInstanceAuthToken","parameters":{},"paths":{"/instances/{instance_id}/auth":{"post":{"description":"租户实例串流前获取设备的device_token,\n调用此api的前提条件是租户需要先购买koophone云手机实例。\n调用该接口获取云机实例的device_token后作为鉴权信息,并携带云机实例的device_id去调用反参中的信令地址(signaling_url)。","operationId":"ExecuteInstanceAuthToken","parameters":[{"description":"实例id","in":"path","name":"instance_id","required":true,"type":"string"},{"description":"租户的iam token信息","in":"header","name":"x-auth-token","required":true,"type":"string"}],"responses":{"200":{"description":"实例鉴权接口返回设备信息","examples":{"application/json":{"data":{"device_token":"dee5081f40c83ddea3ded91c387351e9","resource":{"device_id":"7b0cd026df8d495b8a65d628d7bec433","kp_id":"Q39YyZvI","rtc":{"ice_signaling":{"expired_time":null,"ice_servers":[],"signaling_url":"http://100.93.2.248:18082"}},"sdk":{"external":{"address":"10.83.71.187","address_ipv6":null,"aport":10030,"atype":1},"internal":{"address":null,"address_ipv6":null,"aport":null,"atype":null}}}},"error_code":"0","error_msg":"ok"}},"schema":{"$ref":"#/definitions/RmAuthTokenResp"}},"400":{"description":"请求错误","examples":{"application/json":{"error_code":"string","error_msg":"string"}},"schema":{"$ref":"#/definitions/ErrorInfo"}},"500":{"description":"内部错误","examples":{"application/json":{"error_code":"string","error_msg":"string"}},"schema":{"$ref":"#/definitions/ErrorInfo"}}},"summary":"租户实例串流前获取设备的device_token","tags":["实例管理"],"x-is-registered":"Y","x-request-examples-description-1":"post接口,请求url中携带租户自己购买的koophone实例和租户的token直接调用","x-request-examples-url-1":"/v1/instances/Q39YyZvI/auth","x-support-sdk":"Y"}}},"product_short":"KooPhone","region_id":"cn-north-4","schemes":["HTTPS"],"security_definitions":null,"summary":"租户实例串流前获取设备的device_token","tags":"实例管理","uri":null,"version":"2.0"}