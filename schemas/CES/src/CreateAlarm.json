{"base_path":"/","components":null,"consumes":"[\"application/json\",\"text/plain; charset=utf-8\"]","definitions":{"AlarmActions":{"description":"**参数解释**:\n通知组/主题订阅的信息。\n**约束限制**:\n最多包含20个动作。\n","items":{"$ref":"#/definitions/Notification"},"maxItems":20,"minItems":0,"type":"array"},"AlarmDescription":{"description":"**参数解释**:\n告警描述。\n**约束限制**:\n不涉及。\n**取值范围**:\n长度[0,256]个字符。\n**默认取值**:\n不涉及。\n","maxLength":256,"type":"string"},"AlarmName":{"description":"**参数解释**:\n告警名称。\n**约束限制**:\n不涉及。\n**取值范围**:\n只能包含0-9/a-z/A-Z/_/-或汉字,长度1-128。\n**默认取值**:\n不涉及。\n","example":"alarm-lxy-rg-RDS","maxLength":128,"minLength":1,"pattern":"^([\\u4E00-\\u9FFF]|[a-z]|[A-Z]|[0-9]|_|-)+$","type":"string"},"ComparisonOperator":{"description":"**参数解释**:\n阈值符号。\n**约束限制**:\n指标告警可以使用的阈值符号有>、>=、<、<=、=、!=、cycle_decrease、cycle_increase、cycle_wave; 事件告警可以使用的阈值符号为>、>=、<、<=、=、!=。\n**取值范围**:\n支持的值为(>|<|>=|<=|=|!=|cycle_decrease|cycle_increase|cycle_wave);cycle_decrease为环比下降,cycle_increase为环比上升,cycle_wave为环比波动。\n","example":">=","pattern":"^(>|<|>=|<=|=|!=|cycle_decrease|cycle_increase|cycle_wave)$","type":"string"},"Condition":{"description":"**参数解释**:\n告警规则设置的告警策略。\n**约束限制**:\n不涉及。\n","properties":{"comparison_operator":{"$ref":"#/definitions/ComparisonOperator"},"count":{"description":"**参数解释**:\n触发告警的连续发生次数。\n**约束限制**:\n不涉及。\n**取值范围**:\n整数,取值范围[1, 5]。\n**默认取值**:\n不涉及。\n","example":1,"format":"int32","maximum":100,"minimum":1,"type":"integer"},"filter":{"$ref":"#/definitions/Filter"},"period":{"description":"**参数解释**:\n指标周期,单位是秒。如想了解各个云服务的指标原始周期可以参考“[支持服务列表](ces_03_0059.xml)”\n**约束限制**:\n不涉及。\n**取值范围**:\n枚举值。\n- 0代表立即触发,仅限事件场景使用。\n- 1代表指标的原始周期,比如RDS监控指标原始周期是60s,表示该RDS指标按60s周期为一个数据点参与告警计算。\n- 300代表指标按5分钟聚合周期为一个数据点参与告警计算。\n- 1200代表指标按20分钟聚合周期为一个数据点参与告警计算。\n- 3600代表指标按1小时聚合周期为一个数据点参与告警计算。\n- 14400代表指标按4小时聚合周期为一个数据点参与告警计算。\n- 86400代表指标按1天聚合周期为一个数据点参与告警计算。\n**默认取值**:\n 不涉及。\n","enum":[0,1,300,1200,3600,14400,86400],"example":300,"format":"int32","type":"integer"},"suppress_duration":{"$ref":"#/definitions/SuppressDuration","x-open-region-cloud":"hws,hws_hk,hws_eu"},"unit":{"description":"**参数解释**:\n数据的单位。\n**约束限制**:\n不涉及。\n**取值范围**:\n长度为[0,32]个字符。\n**默认取值**:\n不涉及。\n","example":"%","maxLength":32,"minLength":0,"type":"string"},"value":{"$ref":"#/definitions/Value"}},"required":["comparison_operator","count","filter","period","value"],"type":"object"},"CreateAlarmMetric":{"description":"**参数解释**:\n创建规则中的监控指标信息。\n**约束限制**:\n不涉及。\n","properties":{"dimensions":{"description":"**参数解释**:\n指标维度。\n**约束限制**:\n目前最大可添加4个维度。如果不使用resource_group_id,则dimensions值必填。\n","items":{"$ref":"#/definitions/CreateMetricDimension"},"maxItems":4,"minItems":0,"type":"array"},"metric_name":{"$ref":"#/definitions/MetricName"},"namespace":{"$ref":"#/definitions/Namespace"},"resource_group_id":{"description":"**参数解释**:\n创建告警规则时选择的资源分组ID。\n**约束限制**:\n如果根据资源分组创建告警规则,则resource_group_id不能为空,dimensions中至少指定一个维度信息,name不能为空,且alarm_type值为RESOURCE_GROUP;如:rg1603786526428bWbVmk4rP。\n**取值范围**:\n只能包含字母、数字、“_”,“-”,长度为[0,64]个字符。\n**默认取值**:\n不涉及。\n","example":"rg1689839544034Me5WJgXrv","maxLength":64,"minLength":0,"pattern":"^([a-z]|[A-Z]|[0-9]|_|-)*$","type":"string"}},"required":["namespace","metric_name"],"type":"object"},"CreateAlarmRequestBody":{"properties":{"alarm_action_begin_time":{"description":"**参数解释**:\n告警通知开启时间。\n**约束限制**:\n不涉及。\n**取值范围**:\n只能包含数字、“:”,长度为[1,64]个字符。\n**默认取值**:\n不涉及。\n","maxLength":64,"minLength":1,"pattern":"^([01][0-9]|2[0-3]):([0-5][0-9])$","type":"string"},"alarm_action_enabled":{"default":true,"description":"**参数解释**:\n该条告警触发时,是否启用告警通知。\n**约束限制**:\n不填默认为true,对应的alarm_actions、ok_actions至少有一个不能为空。若alarm_actions、ok_actions同时存在时,alarm_actions和ok_actions中的notification_list值保持一致。\n**取值范围**:\n布尔值。\n- true:开启告警通知。\n- false:不开启告警通知。\n**默认取值**:\ntrue\n","type":"boolean"},"alarm_action_end_time":{"description":"**参数解释**:\n告警通知关闭时间。\n**约束限制**:\n不涉及。\n**取值范围**:\n只能包含数字、“:”,长度为[1,64]个字符。\n**默认取值**:\n不涉及。\n","maxLength":64,"minLength":1,"pattern":"^([01][0-9]|2[0-3]):([0-5][0-9])$","type":"string"},"alarm_actions":{"$ref":"#/definitions/AlarmActions","description":"**参数解释**:\n告警触发时,通知组/主题订阅的信息。结构样例如下: { \"type\": \"notification\",\"notificationList\":[\"urn:smn:southchina:68438a86d98e427e907e0097b7e35d47:sd\"] }\n**约束限制**:\n最多包含10个告警触发时的通知对象信息。\n"},"alarm_description":{"$ref":"#/definitions/AlarmDescription"},"alarm_enabled":{"default":true,"description":"**参数解释**:\n是否启用该条告警。\n**约束限制**:\n不涉及。\n**取值范围**:\n布尔值。\n- true:开启告警。\n- false:不开启告警。\n**默认取值**:\ntrue\n","type":"boolean"},"alarm_level":{"description":"**参数解释**:\n告警级别。\n**约束限制**:\n不涉及。\n**取值范围**:\n只能为1、2、3、4。分别对应紧急、重要、次要、提示。\n**默认取值**:\n2\n","example":2,"format":"int32","maximum":4,"minimum":1,"type":"integer"},"alarm_name":{"$ref":"#/definitions/AlarmName"},"alarm_type":{"description":"**参数解释**:\n告警类型。\n**约束限制**:\n针对事件类型的告警时,告警类型为EVENT.SYS(系统事件)或EVENT.CUSTOM(自定义事件)。\n针对资源分组的告警时,告警类型为RESOURCE_GROUP。\n针对指定资源的告警时,告警类型为MULTI_INSTANCE。\n**取值范围**:\n- EVENT.SYS:针对系统事件的告警规则。\n- EVENT.CUSTOM:针对自定义事件的告警规则。\n- RESOURCE_GROUP:针对资源分组的告警规则。\n- MULTI_INSTANCE: 针对指定资源的告警规则。\n**默认取值**:\n不涉及。\n","example":"MULTI_INSTANCE","pattern":"^(EVENT.SYS|EVENT.CUSTOM|DNSHealthCheck|RESOURCE_GROUP|MULTI_INSTANCE)$","type":"string"},"condition":{"$ref":"#/definitions/Condition"},"enterprise_project_id":{"description":"**参数解释**:\n企业项目ID。如何查询企业项目ID,请参考“[获取企业项目ID](ces_03_0061.xml)”。\n**约束限制**:\n不涉及。\n**取值范围**:\n长度为0或者32个字符。\n**默认取值**:\n0,表示默认的企业项目default。\n","example":0,"pattern":"^((([a-z]|[0-9]){8}-([a-z]|[0-9]){4}-([a-z]|[0-9]){4}-([a-z]|[0-9]){4}-([a-z]|[0-9]){12})|0)$","type":"string","x-open-region-cloud":"hws"},"insufficientdata_actions":{"$ref":"#/definitions/AlarmActions","description":"**参数解释**:\n数据不足触发告警时,通知组/主题订阅的信息。(该参数已废弃,建议无需配置)\n**约束限制**:\n最多包含10个告警动作。\n"},"metric":{"$ref":"#/definitions/CreateAlarmMetric"},"ok_actions":{"$ref":"#/definitions/AlarmActions","description":"**参数解释**:\n告警恢复时,通知组/主题订阅的信息。结构样例如下: { \"type\": \"notification\",\"notificationList\":[\"urn:smn:southchina:68438a86d98e427e907e0097b7e35d47:sd\"] } \n**约束限制**:\n最多包含10个告警触发时的通知对象信息。\n"}},"required":["alarm_name","metric","condition"],"type":"object"},"CreateAlarmResponseBody":{"description":"","properties":{"alarm_id":{"description":"告警规则的ID。","pattern":"^al([0-9A-Za-z]){22}$","type":"string"}}},"CreateMetricDimension":{"description":"**参数解释**:\n指标维度。\n**约束限制**:\n不涉及。\n","properties":{"name":{"description":"**参数解释**:\n监控维度名称,如ECS的维度为instance_id。各服务资源的指标维度名称可查看:“[服务维度名称](ces_03_0059.xml)”。\n**约束限制**:\n不涉及。\n**取值范围**:\n以字母开头,只能包含字母、数字、“_”、“-”。长度[1,32]个字符。\n**默认取值**:\n不涉及。\n","example":"instance_id","maxLength":32,"minLength":1,"pattern":"^([a-z]|[A-Z]){1}([a-z]|[A-Z]|[0-9]|_|-)*$","type":"string"},"value":{"description":"**参数解释**:\n必填。监控维度取值,例如ECS的ID。\n**约束限制**:\n不涉及。\n**取值范围**:\n长度为[0,256]个字符。\n**默认取值**:\n不涉及。\n","example":"33328f02-3814-422e-b688-bfdba93d4052","maxLength":256,"minLength":0,"pattern":"^((([a-z]|[A-Z]|[0-9]|\\*|_){1}([a-z]|[A-Z]|[0-9]|_|-|\\.)*)|)$","type":"string"}},"required":["name"]},"Filter":{"description":"**参数解释**:\n数据聚合的方式。\n**约束限制**:\nperiod为1(原始值)时,filter字段不生效,参数值默认为average。period大于1时filter才起作用。\n**取值范围**:\n支持 average、variance、min、max、sum。\n- average: 平均值\n- variance:方差\n- min:最小值\n- max:最大值\n- sum:求和\n**默认取值**:\n不涉及。\n","enum":["average","variance","min","max","sum"],"type":"string"},"MetricName":{"description":"**参数解释**:\n资源的监控指标名称。如:弹性云服务器中的监控指标cpu_util,表示弹性服务器的CPU使用率;文档数据库中的指标mongo001_command_ps,表示command执行频率;各服务的指标名称可查看:“[服务指标名称](ces_03_0059.xml)”。\n**约束限制**:\n不涉及。\n**取值范围**:\n必须以字母开头,只能包含0-9/a-z/A-Z/_,长度为[1,96]个字符。\n**默认取值**:\n不涉及。\n","example":"cpu_util","maxLength":96,"minLength":1,"pattern":"^([A-Za-z]){1}([0-9A-Za-z]|_|-)*$","type":"string"},"Namespace":{"description":"**参数解释**:\n服务指标命名空间。如:弹性云服务器的命名空间为SYS.ECS,文档数据库的命名空间为SYS.DDS,各服务的命名空间可查看:“[服务命名空间](ces_03_0059.xml)”。\n**约束限制**:\n当alarm_type为(EVENT.SYS|EVENT.CUSTOM)时允许为空。\n**取值范围**:\n格式为service.item;service和item必须是字符串,必须以字母开头,只能包含0-9/a-z/A-Z/_,字符总长度最短为3,最大为32。\n**默认取值**:\n不涉及。\n","example":"SYS.RDS","maxLength":32,"minLength":0,"pattern":"^((([a-z]|[A-Z]){1}([a-z]|[A-Z]|[0-9]|_)*\\.([a-z]|[A-Z]){1}([a-z]|[A-Z]|[0-9]|_)*)|)$","type":"string"},"Notification":{"properties":{"notificationList":{"description":"**参数解释**:\n告警状态发生变化时,被通知对象的列表。\n**约束限制**:\n通知对象ID最多可以配置20个。\ntopicUrn可从SMN获取,具体操作请参考“查询Topic列表”。\n说明:若alarm_action_enabled为true,对应的alarm_actions、ok_actions至少有一个不能为空。若alarm_actions、ok_actions同时存在时,notificationList值保持一致。\n","items":{"$ref":"#/definitions/SMNUrn"},"maxItems":20,"minItems":0,"type":"array"},"type":{"description":"**参数解释**:\n告警通知类型。\n**约束限制**:\n不涉及。\n**取值范围**:\n取值如下: notification、autoscaling\n- notification:通知组或主题订阅\n- autoscaling:AS通知,只在AS中使用\n**默认取值**:\n不涉及。\n","example":"notification","pattern":"^(notification|autoscaling|groupwatch|ecsRecovery)$","type":"string"}},"required":["type","notificationList"],"type":"object"},"SMNUrn":{"description":"**参数解释**:\n通知对象ID。\n**约束限制**:\n不涉及。\n**取值范围**:\n只能包含字母、数字、“-”、“_” 、“:”。    \n**默认取值**:\n不涉及。\n","example":"urn:smn:region:68438a86d98e427e907e0097b7e35d48:sd","pattern":"^(urn:smn:([a-z]|[A-Z]|[0-9]|\\-){1,32}:([a-z]|[A-Z]|[0-9]){32}:([a-z]|[A-Z]|[0-9]|\\-|\\_){1,256})$","type":"string"},"SuppressDuration":{"description":"**参数解释**:\n告警抑制时间,单位为秒,对应页面上创建告警规则时告警策略最后一个字段,该字段主要为解决告警频繁的问题。\n**约束限制**:\n不涉及。\n**取值范围**:\n枚举值,只能为0、300、600、900、1800、3600、10800、21600、43200、86400。\n- 0:对于指标类告警,0代表告警一次。对于事件类告警,在立即触发场景中,0代表不抑制;在累计触发场景,0代表只告警一次。\n- 300代表满足告警触发条件后每5分钟告警一次。\n- 600代表满足告警触发条件后每10分钟告警一次。\n- 900代表满足告警触发条件后每15分钟告警一次。\n- 1800代表满足告警触发条件后每30分钟告警一次。\n- 3600代表满足告警触发条件后每60分钟告警一次。\n- 10800代表满足告警触发条件后每3小时告警一次。\n- 21600代表满足告警触发条件后每6小时告警一次。\n- 43200代表满足告警触发条件后每12小时告警一次。\n- 86400代表满足告警触发条件后每一天告警一次。\n**默认取值**:\n不涉及。\n","enum":[0,300,600,900,1800,3600,10800,21600,43200,86400],"example":86400,"format":"int32","type":"integer","x-open-region-cloud":"hws,hws_hk,hws_eu"},"Value":{"description":"**参数解释**:\n告警阈值。具体阈值取值请参见附录中各服务监控指标中取值范围,如[支持监控的服务列表](ces_03_0059.xml)中ECS的CPU使用率cpu_util取值范围可配置80。\n**约束限制**:\n单一阈值时value和alarm_level配对使用,当hierarchical_value和value同时使用时以hierarchical_value为准。\n**取值范围**:\n最小值为-1.7976931348623157e+108,最大值为1.7976931348623157e+108。          \n**默认取值**:\n不涉及。\n","format":"double","maximum":1.7976931348623156e108,"minimum":-1.7976931348623156e108,"type":"number"}},"description":null,"group_id":"2062bc6f187f46ae8026a22ef9aceb0f","host":"ces.cn-north-4.myhuaweicloud.com","id":"a4e1f28c1cfb442c9d6d9a9050f0f992","info_version":"v1","method":"post","name":"CreateAlarm","parameters":{"AuthToken":{"description":"**参数解释**:\n用户Token。\n**约束限制**:\n不涉及。\n**取值范围**:\n长度为[1,16384]个字符。\n**默认取值**:\n不涉及。\n","in":"header","maxLength":16384,"minLength":1,"name":"X-Auth-Token","required":false,"type":"string","x-order":2},"ContentType":{"default":"application/json; charset=UTF-8","description":"**参数解释**:\n发送的实体的MIME类型。\n**约束限制**:\n不涉及。\n**取值范围**:\n长度为[1,64]个字符。\n**默认取值**:\n默认使用 application/json; charset=UTF-8,如果API是对象、镜像上传等接口,媒体类型可按照流类型的不同进行确定。\n","in":"header","maxLength":64,"minLength":1,"name":"Content-Type","required":false,"type":"string","x-order":1},"ProjectId":{"description":"**参数解释**:\n项目ID。用于明确项目归属,配置后可通过该ID查询项目下资产,可以通过调用API获取,也可以从控制台获取。获取方式请参见“[获取项目ID](ces_03_0057.xml)”。\n**约束限制**:\n不涉及。\n**取值范围**:\n长度为[1,64]个字符。\n**默认取值**:\n不涉及。\n","in":"path","maxLength":64,"minLength":1,"name":"project_id","required":true,"type":"string"}},"paths":{"/V1.0/{project_id}/alarms":{"post":{"deprecated":false,"description":"创建一条告警规则。创建告警规则V1接口只支持配置单资源单策略规则,建议使用“[创建告警规则(推荐)](CreateAlarmRules.xml)”与前端功能配套使用。","operationId":"CreateAlarm","parameters":[{"$ref":"#/parameters/ProjectId"},{"description":"创建一条告警规则,请求参数。","in":"body","name":"CreateAlarmRequestBody","required":true,"schema":{"$ref":"#/definitions/CreateAlarmRequestBody"},"x-order":2},{"$ref":"#/parameters/ContentType"},{"$ref":"#/parameters/AuthToken"}],"responses":{"201":{"description":"Created","examples":{"application/json":{"alarm_id":"al1604473956229Ym1m1Wx6e"}},"schema":{"$ref":"#/definitions/CreateAlarmResponseBody"}},"400":{"description":"Bad Request","schema":{"description":"请求错误。","type":"string"}},"401":{"description":"Unauthorized","schema":{"description":"未提供认证信息,或认证信息错误。","type":"string"}},"403":{"description":"Forbidden","schema":{"description":"请求页面被禁止访问。","type":"string"}},"408":{"description":"Request Timeout","schema":{"description":"请求超出了服务器的等待时间。","type":"string"}},"429":{"description":"Too Many Requests","schema":{"description":"请求过多。","type":"string"}},"500":{"description":"Internal Server Error","schema":{"description":"请求未完成,服务异常。","type":"string"}},"503":{"description":"Service Unavailable","schema":{"description":"系统暂时不可用,请求受限。","type":"string"}}},"summary":"创建告警规则(V1)","tags":["告警规则管理"],"x-api-type":"open-api","x-ces-version":"v1","x-constraint":"","x-first-open-time":"","x-is-registered":"Y","x-name":"创建告警规则","x-open-region-cloud":"hc,hk,hws_eu","x-order":7,"x-request-examples-1":{"alarm_action_enabled":true,"alarm_actions":[{"notificationList":["urn:smn:southchina:68438a86d98e427e907e0097b7e35d48:sd"],"type":"notification"}],"alarm_description":"","alarm_enabled":true,"alarm_level":2,"alarm_name":"alarm-rp0E","condition":{"comparison_operator":">=","count":1,"filter":"average","period":300,"unit":"B/s","value":6},"insufficientdata_actions":[{"notificationList":["urn:smn:southchina:68438a86d98e427e907e0097b7e35d48:sd"],"type":"notification"}],"metric":{"dimensions":[{"name":"instance_id","value":"33328f02-3814-422e-b688-bfdba93d4051"}],"metric_name":"network_outgoing_bytes_rate_inband","namespace":"SYS.ECS"},"ok_actions":[{"notificationList":["urn:smn:southchina:68438a86d98e427e907e0097b7e35d48:sd"],"type":"notification"}]},"x-scope":"Commercial","x-source":"SelfDeveloped","x-support-sdk":"Y","x-version":"V1"}}},"product_short":"CES","region_id":"cn-north-4","schemes":["HTTPS"],"security_definitions":null,"summary":"创建告警规则(V1)","tags":"告警规则管理","uri":null,"version":"2.0"}