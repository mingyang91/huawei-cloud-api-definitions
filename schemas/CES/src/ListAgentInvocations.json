{"base_path":"/","components":null,"consumes":"[\"application/json\",\"text/plain; charset=utf-8\"]","definitions":{"ErrorResp":{"properties":{"error_code":{"description":"错误码","pattern":"^(taskmgr\\.[0-9]{4})$","type":"string"},"error_msg":{"description":"错误信息","maxLength":256,"minLength":1,"type":"string"}}},"ErrorResp400":{"allOf":[{"$ref":"#/definitions/ErrorResp"}],"example":{"error_code":"taskmgr.0005","error_msg":"Some content in message body is not correct."}},"ErrorResp401":{"allOf":[{"$ref":"#/definitions/ErrorResp"}],"example":{"error_code":"taskmgr.0003","error_msg":"Authentication fails or the authentication information is not provided"}},"ErrorResp403":{"allOf":[{"$ref":"#/definitions/ErrorResp"}],"example":{"error_code":"taskmgr.0007","error_msg":"The authentication information is incorrect or the service invoker does not have sufficient rights."}},"ErrorResp500":{"allOf":[{"$ref":"#/definitions/ErrorResp"}],"example":{"error_code":"taskmgr.0001","error_msg":"Internal service error"}},"InvocationInfo":{"properties":{"create_time":{"description":"任务创建时间","format":"int64","maximum":9999999999999,"minimum":1111111111111,"type":"integer"},"current_version":{"description":"当前版本","maxLength":64,"minLength":1,"type":"string"},"elastic_ips":{"description":"弹性公网ip列表","items":{"pattern":"^(([0-9]|\\.){1,15})$","type":"string"},"maxItems":10,"minItems":0,"type":"array"},"instance_id":{"description":"主机id","pattern":"^[a-zA-Z0-9-]{1,64}$","type":"string"},"instance_name":{"description":"主机名称","maxLength":128,"minLength":1,"type":"string"},"instance_type":{"description":"主机类型,ECS弹性云服务器,BMS裸金属服务器","enum":["ECS","BMS"],"type":"string"},"intranet_ips":{"description":"内网ip列表","items":{"pattern":"^(([0-9]|\\.){1,15})$","type":"string"},"maxItems":10,"minItems":0,"type":"array"},"invocation_id":{"description":"任务id","pattern":"^([0-9A-Za-z]){1}([0-9A-Za-z]|_|-)*$","type":"string"},"invocation_status":{"description":"任务状态,PENDING 待执行,RUNNING 运行中,TIMEOUT 超时,FAILED 失败,SUCCEEDED 成功,CANCELED 取消,ROLLBACKED已回退","enum":["PENDING","RUNNING","TIMEOUT","FAILED","SUCCEEDED","CANCELED","ROLLBACKED"],"type":"string"},"invocation_target":{"description":"任务对象,目前支持telescope","enum":["telescope"],"type":"string"},"invocation_type":{"description":"任务类型(INSTALL 安装,UPDATE升级,ROLLBACK回滚,RETRY重试)","enum":["INSTALL","UPDATE","ROLLBACK","RETRY"],"type":"string"},"result_msg":{"description":"任务执行结果信息","maxLength":5000,"minLength":1,"type":"string"},"target_version":{"description":"目标版本","maxLength":64,"minLength":1,"type":"string"},"update_time":{"description":"任务更新时间","format":"int64","maximum":9999999999999,"minimum":1111111111111,"type":"integer"}},"type":"object"},"ListInvocationsResp":{"properties":{"count":{"description":"任务列表总量","format":"int64","maximum":9999999999999,"minimum":0,"type":"integer"},"invocations":{"description":"任务列表","items":{"$ref":"#/definitions/InvocationInfo"},"maxItems":100,"minItems":0,"type":"array"}}}},"description":null,"group_id":"2062bc6f187f46ae8026a22ef9aceb0f","host":"ces.cn-north-4.myhuaweicloud.com","id":"c8ae44e1bf504e08883a8dc11b1342dd","info_version":"v3","method":"get","name":"ListAgentInvocations","parameters":{"ContentType":{"default":"application/json; charset=UTF-8","description":"发送的实体的MIME类型。默认使用application/json; charset=UTF-8。","in":"header","maxLength":64,"minLength":1,"name":"Content-Type","required":false,"type":"string"},"Limit100":{"default":100,"description":"分页大小","format":"int32","in":"query","maximum":100,"minimum":1,"name":"limit","type":"integer"},"Offset":{"default":0,"description":"分页偏移量","format":"int64","in":"query","maximum":9999999999999,"minimum":0,"name":"offset","type":"integer"},"ProjectAuthToken":{"description":"用户project Token。用户Token也就是调用获取用户Token接口的响应值,该接口是唯一不需要认证的接口。请求响应成功后在响应消息头中包含的“X-Subject-Token”的值即为Token值。","in":"header","maxLength":16384,"minLength":1,"name":"X-Auth-Token","required":false,"type":"string"},"ProjectID":{"description":"项目id","in":"path","maxLength":64,"minLength":1,"name":"project_id","required":true,"type":"string"}},"paths":{"/v3/{project_id}/agent-invocations":{"get":{"description":"查询Agent任务列表","operationId":"ListAgentInvocations","parameters":[{"$ref":"#/parameters/ContentType"},{"$ref":"#/parameters/ProjectID"},{"$ref":"#/parameters/ProjectAuthToken"},{"description":"主机id","in":"query","name":"instance_id","pattern":"^[a-zA-Z0-9-]{1,64}$","required":false,"type":"string"},{"description":"主机类型,ECS弹性云服务器,BMS裸金属服务器","enum":["ECS","BMS"],"in":"query","name":"instance_type","required":false,"type":"string"},{"description":"任务id","in":"query","name":"invocation_id","pattern":"^([0-9A-Za-z]){1}([0-9A-Za-z]|_|-)*$","required":false,"type":"string"},{"description":"任务类型, INSTALL安装, UPDATE升级, ROLLBACK回退,RETRY重试,SET_REMOTE_INSTALLER设置远程安装主机,REMOTE_INSTALL执行远程安装","enum":["INSTALL","UPDATE","ROLLBACK","RETRY","SET_REMOTE_INSTALLER","REMOTE_INSTALL"],"in":"query","name":"invocation_type","required":false,"type":"string"},{"default":"telescope","description":"任务对象, 支持 telescope监控","enum":["telescope"],"in":"query","name":"invocation_target","required":false,"type":"string"},{"$ref":"#/parameters/Offset"},{"$ref":"#/parameters/Limit100"}],"responses":{"200":{"description":"OK","examples":{"application/json":{"count":1,"invocations":[{"create_time":1678070008306,"current_version":"2.5.1","elastic_ips":["1.xx.xx.1"],"instance_id":"instancexxx001","instance_name":"xxxx","instance_type":"ECS","intranet_ips":["10.xxx.xx.1"],"invocation_id":"invocationxxx001","invocation_status":"RUNNING","invocation_target":"telescope","invocation_type":"INSTALL","result_msg":"xxx","target_version":"2.6.1","update_time":1678070008306}]}},"schema":{"$ref":"#/definitions/ListInvocationsResp"}},"400":{"description":"Bad Request","schema":{"$ref":"#/definitions/ErrorResp400"}},"401":{"description":"Unauthorized","schema":{"$ref":"#/definitions/ErrorResp401"}},"403":{"description":"Forbidden","schema":{"$ref":"#/definitions/ErrorResp403"}},"500":{"description":"Internal Server Error","schema":{"$ref":"#/definitions/ErrorResp500"}}},"summary":"查询Agent任务列表","tags":["Agent任务相关接口"],"x-api-type":"open-api","x-constraint":"目前拉美-布宜诺斯艾利斯一、拉美-利马一2个局点不支持该接口。该接口仅支持查询3个月内的Agent任务列表。\n","x-is-registered":"Y","x-open-region-cloud":"hc,hk","x-support-sdk":"Y","x-version":"v3"}}},"product_short":"CES","region_id":"cn-north-4","schemes":["HTTPS"],"security_definitions":null,"summary":"查询Agent任务列表","tags":"Agent任务相关接口","uri":null,"version":"2.0"}