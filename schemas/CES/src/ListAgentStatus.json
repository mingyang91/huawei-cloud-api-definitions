{"base_path":"/","components":null,"consumes":"[\"application/json\",\"text/plain; charset=utf-8\"]","definitions":{"AgentStatusInfo":{"properties":{"extensions":{"description":"**参数解释**:\n插件信息列表\n**取值范围**:\n数组长度为[1,10]\n","items":{"$ref":"#/definitions/ExtensionInfo"},"maxItems":10,"minItems":1,"type":"array"},"instance_id":{"description":"**参数解释**:\n机器id\n**取值范围**:\n1到64个字符的字符串,且只包含字母、数字和连字符\n","pattern":"^[a-zA-Z0-9-]{1,64}$","type":"string"},"uniagent_status":{"description":"**参数解释**:\nuniagent运行状态\n**取值范围**:\n- none: 未安装\n- running: 运行中\n- silent: 静默状态,用于大规模插件异常时,紧急规避的一种措施,现象是kill掉telescope,只保留uniagent的心跳功能\n- unknown: 心跳故障,不上报心跳数据,属于连接丢失故障\n","enum":["none","running","silent","unknown"],"type":"string"}}},"ErrorResp":{"properties":{"error_code":{"description":"错误码","pattern":"^(taskmgr\\.[0-9]{4})$","type":"string"},"error_msg":{"description":"错误信息","maxLength":256,"minLength":1,"type":"string"}}},"ErrorResp400":{"allOf":[{"$ref":"#/definitions/ErrorResp"}],"example":{"error_code":"taskmgr.0005","error_msg":"Some content in message body is not correct."}},"ErrorResp401":{"allOf":[{"$ref":"#/definitions/ErrorResp"}],"example":{"error_code":"taskmgr.0003","error_msg":"Authentication fails or the authentication information is not provided"}},"ErrorResp403":{"allOf":[{"$ref":"#/definitions/ErrorResp"}],"example":{"error_code":"taskmgr.0007","error_msg":"The authentication information is incorrect or the service invoker does not have sufficient rights."}},"ErrorResp500":{"allOf":[{"$ref":"#/definitions/ErrorResp"}],"example":{"error_code":"taskmgr.0001","error_msg":"Internal service error"}},"ExtensionInfo":{"properties":{"name":{"description":"**参数解释**:\n插件名称\n**取值范围**:\n数组长度为[1,64]\n","maxLength":64,"minLength":1,"type":"string"},"status":{"description":"**参数解释**:\n 插件状态\n**取值范围**:\n- none: 未安装\n- running: 运行中\n- stopped: 已停止\n- fault: 故障(进程异常)\n- unknown: 故障(连接异常)\n","enum":["none","running","stopped","fault","unknown"],"type":"string"},"version":{"description":"**参数解释**:\n插件版本\n**取值范围**:\n数组长度为[1,32]\n","maxLength":32,"minLength":1,"type":"string"}}},"ListAgentStatusRequestBody":{"example":{"extension_name":"telescope","extension_status":"none","instance_ids":["111111111111"],"uniagent_status":"none"},"properties":{"extension_name":{"description":"**参数解释**:\n插件名称,不传查所有插件\n**约束限制**:\n当前仅支持查询telescope插件\n**取值范围**:\n- telescope: 主机监控插件telescope\n**默认取值**:\ntelescope\n","enum":["telescope"],"type":"string"},"extension_status":{"description":"**参数解释**:\n插件状态,不传查所有状态 \n**约束限制**:\n不涉及\n**取值范围**:\n- none: 未安装\n- running: 运行中\n- stopped:已停止\n- fault: 进程故障,应该运行的插件,没运行,属于客户端故障\n- unknown: 心跳故障,不上报心跳数据,属于连接丢失故障\n**默认取值**:\n不涉及\n","enum":["none","running","stopped","fault","unknown"],"type":"string"},"instance_ids":{"description":"**参数解释**:\n机器实例id列表\n**约束限制**:\n包含的机器实例id最多为2000个,最少为1个\n","items":{"description":"机器实例id","pattern":"^[a-zA-Z0-9-]{1,64}$","type":"string"},"maxItems":2000,"minItems":1,"type":"array"},"uniagent_status":{"description":"**参数解释**:\nuniagent运行状态,不传值则查出所有状态\n**约束限制**:\n不涉及。\n**取值范围**:\n- none: 未安装\n- running: 运行中\n- silent: 静默状态,用于大规模插件异常时,紧急规避的一种措施,现象是kill掉telescope,只保留uniagent的心跳功能\n- unknown: 心跳故障,不上报心跳数据,属于连接丢失故障\n**默认取值**:\n不涉及\n","enum":["none","running","silent","unknown"],"type":"string"}},"required":["instance_ids"]},"ListAgentStatusResp":{"properties":{"agent_status":{"description":"**参数解释**:\nagent插件状态列表\n**取值范围**:\n数组长度为[1,2000]\n","items":{"$ref":"#/definitions/AgentStatusInfo"},"maxItems":2000,"minItems":1,"type":"array"}}}},"description":null,"group_id":"2062bc6f187f46ae8026a22ef9aceb0f","host":"ces.cn-north-4.myhuaweicloud.com","id":"ecf6f747b4984faabb9073a1d563878f","info_version":"v3","method":"post","name":"ListAgentStatus","parameters":{"ContentType":{"default":"application/json; charset=UTF-8","description":"**参数解释**:\n发送的实体的MIME类型\n**约束限制**:\n不涉及。\n**取值范围**:\n长度为[1,64]个字符\n**默认取值**:\napplication/json; charset=UTF-8\n","in":"header","maxLength":64,"minLength":1,"name":"Content-Type","required":false,"type":"string"},"ProjectAuthToken":{"description":"用户project Token。用户Token也就是调用获取用户Token接口的响应值,该接口是唯一不需要认证的接口。请求响应成功后在响应消息头中包含的“X-Subject-Token”的值即为Token值。","in":"header","maxLength":16384,"minLength":1,"name":"X-Auth-Token","required":false,"type":"string"},"ProjectID":{"description":"**参数解释**:租户ID。用于明确项目归属,配置后可通过该ID查询项目下资产,可以通过调用API获取,也可以从控制台获取。获取方式请参见“[获取项目ID](ces_03_0057.xml)”。取值范围: 字符串的长度必须在 1 到 64个字符之间。\n**约束限制**:\n不涉及\n**取值范围**:\n长度为[1,64]个字符\n**默认取值**:\n不涉及\n","in":"path","maxLength":64,"minLength":1,"name":"project_id","required":true,"type":"string"}},"paths":{"/v3/{project_id}/agent-status/batch-query":{"post":{"description":"插件状态查询,包括uniagent状态以及插件状态","operationId":"ListAgentStatus","parameters":[{"$ref":"#/parameters/ProjectID"},{"$ref":"#/parameters/ContentType"},{"$ref":"#/parameters/ProjectAuthToken"},{"description":"批量查询插件状态请求体","in":"body","name":"ListAgentStatusRequestBody","schema":{"$ref":"#/definitions/ListAgentStatusRequestBody"}}],"produces":["application/json"],"responses":{"200":{"description":"插件状态查询返回体","examples":{"application/json":{"agent_status":[{"extensions":[{"name":"telescope","status":"none","version":"2.5.6"}],"instance_id":"111111111111","uniagent_status":"none"}]}},"schema":{"$ref":"#/definitions/ListAgentStatusResp"}},"400":{"description":"Bad Request","schema":{"$ref":"#/definitions/ErrorResp400"}},"401":{"description":"Unauthorized","schema":{"$ref":"#/definitions/ErrorResp401"}},"403":{"description":"Forbidden","schema":{"$ref":"#/definitions/ErrorResp403"}},"500":{"description":"Internal Server Error","schema":{"$ref":"#/definitions/ErrorResp500"}}},"summary":"插件状态查询","tags":["插件状态查询"],"x-api-type":"open-api","x-is-registered":"Y","x-open-region-cloud":"hc","x-support-sdk":"Y","x-version":"v3"}}},"product_short":"CES","region_id":"cn-north-4","schemes":["HTTPS"],"security_definitions":null,"summary":"插件状态查询","tags":"插件状态查询","uri":null,"version":"2.0"}