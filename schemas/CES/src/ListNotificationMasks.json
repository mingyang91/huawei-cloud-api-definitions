{"base_path":"/","components":null,"consumes":"[\"application/json\",\"text/plain; charset=utf-8\"]","definitions":{"AlarmLevel":{"default":2,"description":"告警级别,1为紧急,2为重要,3为次要,4为提示","example":2,"format":"int32","maximum":4,"minimum":1,"type":"integer"},"AlarmPolicyID":{"description":"告警策略ID。","example":"0f921f55-89b1-4534-ae54-7b40b597b5a6","maxLength":64,"minLength":1,"pattern":"^([a-z]|[A-Z]|[0-9]|-)+$","type":"string"},"ComparisonOperator":{"description":"阈值符号, 支持的值为(>|<|>=|<=|=|!=|cycle_decrease|cycle_increase|cycle_wave);cycle_decrease为环比下降,cycle_increase为环比上升,cycle_wave为环比波动; 指标告警可以使用的阈值符号有>、>=、<、<=、=、!=、cycle_decrease、cycle_increase、cycle_wave; 事件告警可以使用的阈值符号为>、>=、<、<=、=、!=;","example":">=","pattern":"^(>|<|>=|<=|=|!=|cycle_decrease|cycle_increase|cycle_wave)$","type":"string"},"Count":{"description":"告警连续触发次数,事件告警时参数值为1~180(包括1和180);指标告警和站点告警时,次数采用枚举值,枚举值分别为:1、2、3、4、5、10、15、30、60、90、120、180","example":5,"format":"int32","maximum":180,"minimum":1,"type":"integer"},"EffectiveTimezone":{"description":"时区,形如:\"GMT-08:00\"、\"GMT+08:00\"、\"GMT+0:00\"","example":"GMT-08:00","maxLength":16,"minLength":1,"pattern":"^(GMT[+-](0|0[1-9]|1[0-2]):00)$","type":"string"},"EndDate":{"description":"屏蔽截止日期,yyyy-MM-dd。","example":"yyyy-MM-dd","format":"date","maxLength":10,"minLength":10,"type":"string"},"EndTime":{"description":"屏蔽截止时间,HH:mm:ss。","example":"HH:mm:ss","maxLength":8,"minLength":8,"type":"string"},"Filter":{"description":"聚合方式。average: 平均值,variance:方差,min:最小值,max:最大值,sum:求和,tp99:99百分位数,tp95:95百分位数,tp90:90百分位数","example":"sum","pattern":"^(average|variance|min|max|sum|tp99|tp95|tp90)$","type":"string"},"GoAPIErrorResponseV2":{"properties":{"error_code":{"description":"请求异常内部业务状态码","example":"ces.0001","maxLength":256,"minLength":0,"type":"string"},"error_msg":{"description":"请求异常信息","example":"the request format is invalid","maxLength":256,"minLength":0,"type":"string"},"request_id":{"description":"请求ID","example":"txnEntry-DESKTOP-4LPFH08.txnId-466541d0-f1a6-429b-b747-98d4991671c1.ts-1637909316688.c-95","maxLength":256,"minLength":0,"type":"string"}},"type":"object"},"HierarchicalValue":{"description":"多层级告警阈值。当hierarchical_value和value同时使用时以hierarchical_value为准。\n创建或修改告警规则以下2种场景只支持设置一个阈值:\n  1.告警类型为`指标告警`且告警策略为`所有策略都满足才告警`的场景。\n  2.告警类型为`事件告警`的场景。","example":{"critical":12,"info":4,"major":10,"minor":8},"properties":{"critical":{"description":"紧急级别的阈值","example":12,"format":"double","maximum":1.7976931348623156e108,"minimum":-1.7976931348623156e108,"type":"number"},"info":{"description":"提示级别的阈值","example":4,"format":"double","maximum":1.7976931348623156e108,"minimum":-1.7976931348623156e108,"type":"number"},"major":{"description":"重要级别的阈值","example":10,"format":"double","maximum":1.7976931348623156e108,"minimum":-1.7976931348623156e108,"type":"number"},"minor":{"description":"次要级别的阈值","example":8,"format":"double","maximum":1.7976931348623156e108,"minimum":-1.7976931348623156e108,"type":"number"}},"type":"object"},"ListNotificationMaskRequestBody":{"properties":{"dimensions":{"description":"资源的维度信息","items":{"$ref":"#/definitions/ResourceDimension"},"maxItems":4,"minItems":1,"type":"array"},"mask_id":{"description":"屏蔽规则ID,可选","example":"nm1689737291469aj38xNVLK","maxLength":64,"minLength":1,"pattern":"^nm([0-9A-Za-z]){0,62}$","type":"string"},"mask_name":{"description":"屏蔽规则名称,可选,只能为字母、数字、汉字、-、_,最大长度为64","example":"mn_test","maxLength":64,"minLength":1,"pattern":"^([\\u4E00-\\u9FFF]|[a-z]|[A-Z]|[0-9]|_|-)+$","type":"string"},"mask_status":{"description":"屏蔽状态,可选。MASK_EFFECTIVE:已生效,MASK_INEFFECTIVE:未生效。","enum":["MASK_EFFECTIVE","MASK_INEFFECTIVE"],"example":"MASK_EFFECTIVE","maxLength":32,"minLength":1,"type":"string"},"metric_name":{"$ref":"#/definitions/MetricName"},"namespace":{"$ref":"#/definitions/Namespace"},"relation_ids":{"description":"关联编号(目前是告警规则ID)","items":{"$ref":"#/definitions/RelationID"},"maxItems":100,"minItems":1,"type":"array"},"relation_type":{"$ref":"#/definitions/ListRelationType"},"resource_id":{"description":"资源维度值,提供一个维度的资源ID即可,可选","example":"dse23xw43","maxLength":700,"minLength":1,"type":"string"},"resource_level":{"description":"dimension: 子维度,product: 云产品","enum":["dimension","product"],"type":"string"}},"required":["relation_type","relation_ids"],"type":"object"},"ListNotificationMaskResp":{"properties":{"count":{"description":"通知屏蔽列表总数","example":100,"maximum":99999,"minimum":0,"type":"integer"},"notification_masks":{"description":"通知屏蔽列表","items":{"properties":{"create_time":{"$ref":"#/definitions/NotificationMaskCreateTime","description":"告警屏蔽的创建时间,UNIX时间戳,单位毫秒"},"effective_timezone":{"$ref":"#/definitions/EffectiveTimezone","description":"时区,形如:\"GMT-08:00\"、\"GMT+08:00\"、\"GMT+0:00\""},"end_date":{"$ref":"#/definitions/EndDate","description":"屏蔽到期日期,,yyyy-MM-dd"},"end_time":{"$ref":"#/definitions/EndTime","description":"屏蔽到期时间,HH:mm:ss"},"mask_name":{"$ref":"#/definitions/MaskName","description":"屏蔽规则名称"},"mask_status":{"$ref":"#/definitions/MaskStatus","description":"屏蔽状态"},"mask_type":{"$ref":"#/definitions/MaskType","description":"屏蔽类型。START_END_TIME:按起止时间屏蔽,FOREVER_TIME:永久时间屏蔽,CYCLE_TIME:按周期时间屏蔽。"},"metric_names":{"description":"关联指标名称,relation_type为RESOURCE时存在该字段","items":{"$ref":"#/definitions/MetricName"},"maxItems":50,"minItems":0,"type":"array"},"notification_mask_id":{"$ref":"#/definitions/NotificationMaskID","description":"屏蔽规则编号"},"policies":{"description":"告警策略列表。","items":{"$ref":"#/definitions/PoliciesInListResp"},"maxItems":50,"minItems":0,"type":"array"},"product_metrics":{"description":"按云产品维度屏蔽时的指标信息","items":{"$ref":"#/definitions/ProductMetric"},"maxItems":50,"minItems":0,"type":"array"},"product_name":{"description":"资源为云产品时的云产品名称","maxLength":128,"minLength":0,"type":"string"},"relation_id":{"$ref":"#/definitions/RelationID","description":"关联编号,relation_type为ALARM_RULE时存在该字段"},"relation_type":{"$ref":"#/definitions/RelationType","description":"屏蔽告警通知或者屏蔽告警计算的实现方式"},"resource_level":{"description":"dimension: 子维度,product: 云产品","enum":["dimension","product"],"type":"string"},"resource_type":{"$ref":"#/definitions/MaskResourceType","description":"屏蔽资源类型"},"resources":{"description":"关联资源类型,relation_type为RESOURCE时存在该字段,只需要查询出资源的namespace+维度名即可","items":{"$ref":"#/definitions/ResourceCategory"},"maxItems":100,"minItems":1,"type":"array"},"start_date":{"$ref":"#/definitions/StartDate","description":"屏蔽起始日期,yyyy-MM-dd"},"start_time":{"$ref":"#/definitions/StartTime","description":"屏蔽起始时间,HH:mm:ss"},"update_time":{"$ref":"#/definitions/NotificationMaskUpdateTime","description":"告警屏蔽的更新时间,UNIX时间戳,单位毫秒"}},"required":["notification_mask_id","relation_type","mask_status","mask_type"]},"maxItems":100,"minItems":1,"type":"array"}},"required":["notification_masks","count"],"type":"object"},"ListRelationType":{"description":"屏蔽告警通知或者屏蔽告警计算的实现方式。ALARM_RULE:通过告警规则屏蔽告警通知,RESOURCE:通过资源屏蔽告警通知,RESOURCE_POLICY_NOTIFICATION:通过告警策略和告警资源屏蔽告警通知,RESOURCE_POLICY_ALARM:通过告警策略和告警资源屏蔽计算告警,DEFAULT:默认包含RESOURCE、RESOURCE_POLICY_NOTIFICATION(查询告警屏蔽列表时使用)。","enum":["ALARM_RULE","RESOURCE","RESOURCE_POLICY_NOTIFICATION","RESOURCE_POLICY_ALARM","DEFAULT"],"example":"DEFAULT","maxLength":32,"minLength":1,"type":"string"},"MaskName":{"description":"屏蔽规则名称,只能为字母、数字、汉字、-、_,最大长度为64","example":"mn_test","maxLength":64,"minLength":1,"pattern":"^([一-鿿]|[a-z]|[A-Z]|[0-9]|_|-)+$","type":"string"},"MaskResourceType":{"description":"屏蔽资源类型。ALL_INSTANCE:全部资源,MULTI_INSTANCE:多实例资源","enum":["ALL_INSTANCE","MULTI_INSTANCE"],"example":"MULTI_INSTANCE","type":"string"},"MaskStatus":{"description":"屏蔽状态。UN_MASKED:未屏蔽,MASK_EFFECTIVE:已生效,MASK_INEFFECTIVE:未生效。","enum":["UN_MASKED","MASK_EFFECTIVE","MASK_INEFFECTIVE"],"example":"UN_MASKED","maxLength":32,"minLength":1,"type":"string"},"MaskType":{"description":"屏蔽类型。START_END_TIME:按起止时间屏蔽,FOREVER_TIME:永久时间屏蔽,CYCLE_TIME:按周期时间屏蔽。","enum":["START_END_TIME","FOREVER_TIME","CYCLE_TIME"],"example":"START_END_TIME","maxLength":32,"minLength":1,"type":"string"},"MetricExtraInfo":{"description":"告警策略附加信息,默认为空。","properties":{"custom_proc_name":{"description":"用户进程名称","maxLength":250,"minLength":0,"type":"string"},"metric_prefix":{"description":"指标名称前缀","maxLength":4096,"minLength":0,"pattern":"^([a-z]|[A-Z]|[0-9]|_|-|~|\\.|/|:)*$","type":"string"},"metric_type":{"description":"指标类型","maxLength":32,"minLength":0,"pattern":"^([a-z]|[A-Z]|[0-9]|_|-|~|\\.|/|:)*$","type":"string"},"origin_metric_name":{"description":"原始指标名称","maxLength":4096,"minLength":0,"pattern":"^([a-z]|[A-Z]|[0-9]|_|-|~|\\.|/|:)*$","type":"string"}},"required":["origin_metric_name"],"type":"object"},"MetricName":{"description":"资源的监控指标名称,必须以字母开头,只能包含0-9/a-z/A-Z/_,字符长度最短为1,最大为64;如:弹性云服务器中的监控指标cpu_util,表示弹性服务器的CPU使用率;文档数据库中的指标mongo001_command_ps,表示command执行频率;各服务的指标名称可查看:“[服务指标名称](ces_03_0059.xml)”。","example":"cpu_util","maxLength":96,"minLength":1,"pattern":"^([A-Za-z]){1}([0-9A-Za-z]|_|-)*$","type":"string"},"Namespace":{"description":"查询服务的命名空间,各服务命名空间请参考“[服务命名空间](ces_03_0059.xml)”","example":"SYS.ECS","maxLength":32,"minLength":3,"pattern":"^([a-z]|[A-Z]){1}([a-z]|[A-Z]|[0-9]|_)*\\.([a-z]|[A-Z]){1}([a-z]|[A-Z]|[0-9]|_)*$","type":"string"},"NotificationMaskCreateTime":{"description":"告警屏蔽的创建时间,UNIX时间戳,单位毫秒。","example":1504426791000,"format":"int64","type":"integer"},"NotificationMaskID":{"description":"屏蔽规则ID","example":"nm123232232341232132","maxLength":64,"minLength":1,"pattern":"^nm([0-9A-Za-z]){0,62}$","type":"string"},"NotificationMaskUpdateTime":{"description":"告警屏蔽的更新时间,UNIX时间戳,单位毫秒。","example":1604426791000,"format":"int64","type":"integer"},"Period":{"description":"告警条件判断周期,单位为秒,支持的值为1,300,1200,3600,14400,86400。说明:当period设置为1时,表示以原始的指标数据判断告警。当alarm_type为(EVENT.SYS| EVENT.CUSTOM)时允许为0。","enum":[0,1,300,1200,3600,14400,86400],"example":300,"type":"integer"},"PoliciesInListResp":{"properties":{"alarm_level":{"$ref":"#/definitions/AlarmLevel"},"alarm_policy_id":{"$ref":"#/definitions/AlarmPolicyID"},"comparison_operator":{"$ref":"#/definitions/ComparisonOperator"},"count":{"$ref":"#/definitions/Count"},"extra_info":{"$ref":"#/definitions/MetricExtraInfo"},"filter":{"$ref":"#/definitions/Filter"},"hierarchical_value":{"$ref":"#/definitions/HierarchicalValue"},"metric_name":{"$ref":"#/definitions/MetricName"},"period":{"$ref":"#/definitions/Period"},"selected_unit":{"$ref":"#/definitions/SelectedUnit"},"suppress_duration":{"$ref":"#/definitions/SuppressDuration"},"type":{"description":"告警策略类型,已废弃,不推荐使用。","maxLength":32,"minLength":0,"type":"string"},"unit":{"$ref":"#/definitions/Unit"},"value":{"$ref":"#/definitions/Value"}},"required":["alarm_policy_id","metric_name","period","filter","comparison_operator","count"],"type":"object"},"ProductMetric":{"properties":{"dimension_name":{"description":"按云产品维度屏蔽时的指标维度信息,有多个时用\",\"连接","maxLength":128,"minLength":0,"type":"string"},"metric_name":{"$ref":"#/definitions/MetricName"}},"required":["dimension_name","metric_name"],"type":"object"},"RelationID":{"description":"关联编号","example":"al123232232341232132或2d5e1811-a6b2-4ac2-9038-a4c5fc7c19b8","maxLength":64,"minLength":1,"pattern":"^([a-z]|[A-Z]|[0-9]|-){1,64}$","type":"string"},"RelationType":{"description":"屏蔽告警通知或者屏蔽告警计算的实现方式。ALARM_RULE:通过告警规则屏蔽告警通知,RESOURCE:通过资源屏蔽告警通知,RESOURCE_POLICY_NOTIFICATION:通过告警策略和告警资源屏蔽告警通知,RESOURCE_POLICY_ALARM:通过告警策略和告警资源屏蔽计算告警。","enum":["ALARM_RULE","RESOURCE","RESOURCE_POLICY_NOTIFICATION","RESOURCE_POLICY_ALARM"],"example":"ALARM_RULE","maxLength":32,"minLength":1,"type":"string"},"ResourceCategory":{"properties":{"dimension_names":{"description":"资源的维度信息,多个维度通过字母序排序后逗号拼接","items":{"example":"disk_utils,instance_id","maxLength":131,"minLength":1,"type":"string"},"maxItems":100,"minItems":1,"type":"array"},"namespace":{"$ref":"#/definitions/Namespace"}},"required":["namespace","dimension_names"]},"ResourceDimension":{"description":"指标维度","properties":{"name":{"description":"资源维度,如:弹性云服务器,则维度为instance_id;目前最大支持4个维度,各服务资源的指标维度名称可查看:“[服务指标维度](ces_03_0059.xml)”。","example":"instance_id","pattern":"^([a-z]|[A-Z]){1}([a-z]|[A-Z]|[0-9]|_|-){1,32}$","type":"string"},"value":{"description":"资源维度值,为资源的实例ID,如:4270ff17-aba3-4138-89fa-820594c39755。","example":"4270ff17-aba3-4138-89fa-820594c39755","pattern":"^((([a-z]|[A-Z]|[0-9]){1}([a-z]|[A-Z]|[0-9]|_|-|\\.)*)|\\*){1,256}$","type":"string"}},"required":["name","value"]},"SelectedUnit":{"description":"用户在页面中选择的指标单位, 用于后续指标数据回显和计算","example":"Byte/s","maxLength":64,"minLength":0,"type":"string"},"StartDate":{"description":"屏蔽起始日期,yyyy-MM-dd。","example":"yyyy-MM-dd","format":"date","maxLength":10,"minLength":10,"type":"string"},"StartTime":{"description":"屏蔽起始时间,HH:mm:ss。","example":"HH:mm:ss","maxLength":8,"minLength":8,"type":"string"},"SuppressDuration":{"description":"发送告警的周期,值可为0, 300, 600, 900, 1800, 3600, 10800, 21600, 43200, 86400;0表示只告警一次,300表示每5分钟告警一次,600表示每10分钟告警一次,900表示每15分钟告警一次,1800表示每30分钟告警一次,3600表示每1小时告警一次,10800表示每3小时告警一次,21600表示每6小时告警一次,43200表示每12小时告警一次,86400表示每1天告警一次。","enum":[0,300,600,900,1800,3600,10800,21600,43200,86400],"example":300,"format":"int32","type":"integer"},"Unit":{"description":"数据的单位。","example":"%","maxLength":32,"minLength":0,"type":"string"},"Value":{"description":"告警阈值。单一阈值时value和alarm_level配对使用,当hierarchical_value和value同时使用时以hierarchical_value为准。 具体阈值取值请参见附录中各服务监控指标中取值范围,如支持监控的服务列表中ECS的CPU使用率cpu_util取值范围可配置80。 [具体阈值取值请参见附录中各服务监控指标中取值范围,如[支持监控的服务列表](ces_03_0059.xml)中ECS的CPU使用率cpu_util取值范围可配置80。]","format":"double","maximum":1.7976931348623156e108,"minimum":-1.7976931348623156e108,"type":"number"}},"description":null,"group_id":"2062bc6f187f46ae8026a22ef9aceb0f","host":"ces.cn-north-4.myhuaweicloud.com","id":"349826f8682840678014adec7cb4603a","info_version":"v2","method":"post","name":"ListNotificationMasks","parameters":{"AuthToken":{"description":"**参数解释**:\n用户Token。\n**约束限制**:\n不涉及。\n**取值范围**:\n最小字符数量为1,最大为16384。\n**默认取值**:\n不涉及。","in":"header","maxLength":16384,"minLength":1,"name":"X-Auth-Token","required":true,"type":"string","x-order":2},"ContentType":{"default":"application/json; charset=UTF-8","description":"**参数解释**:\n发送的实体的MIME类型。\n**约束限制**:\n不涉及。\n**取值范围**:\n最小字符数量为1,最大为64。\n**默认取值**:\n默认使用application/json; charset=UTF-8。","in":"header","maxLength":64,"minLength":1,"name":"Content-Type","required":true,"type":"string","x-order":1},"Limit":{"default":100,"description":"分页大小","in":"query","maximum":100,"minimum":1,"name":"limit","pattern":"^([1-9]|[1-9][0-9]|100)$","required":false,"type":"integer"},"Offset":{"default":0,"description":"分页偏移量","in":"query","maximum":10000,"minimum":0,"name":"offset","pattern":"^([0]|[1-9]|[1-9][0-9]|[1-9][0-9][0-9]|[1-9][0-9][0-9][0-9]|10000)$","required":false,"type":"integer"},"ProjectId":{"description":"**参数解释**:\n租户ID\n**约束限制**:\n不涉及。\n**取值范围**:\n项目ID,用于明确项目归属,配置后可通过该ID查询项目下资产,可以通过调用API获取,也可以从控制台获取。获取方式请参见“[获取项目ID](ces_03_0057.xml)”。字符串的长度必须在 1 到 64个字符之间。\n**默认取值**:\n不涉及。","in":"path","maxLength":64,"minLength":1,"name":"project_id","required":true,"type":"string"}},"paths":{"/v2/{project_id}/notification-masks/batch-query":{"post":{"consumes":["application/json"],"description":"批量查询指定类型的通知屏蔽规则,目前最多支持100个通知屏蔽规则的批量查询。","operationId":"ListNotificationMasks","parameters":[{"$ref":"#/parameters/ContentType"},{"$ref":"#/parameters/AuthToken"},{"$ref":"#/parameters/ProjectId"},{"$ref":"#/parameters/Offset"},{"$ref":"#/parameters/Limit"},{"description":"批量查询通知屏蔽规则,请求参数。","in":"body","name":"ListNotificationMasksRequestBody","required":true,"schema":{"$ref":"#/definitions/ListNotificationMaskRequestBody"}},{"description":"排序关键字,与sort_dir同时使用。\n目前只支持create_time与update_time\ncreate_time表示按创建时间排序,update_time表示按修改时间排序","enum":["create_time","update_time"],"in":"query","name":"sort_key","required":false,"type":"string"},{"description":"排序顺序,与sort_key同时使用。DESC表示降序排序;ASC表示升序排序;","enum":["ASC","DESC"],"in":"query","name":"sort_dir","required":false,"type":"string"}],"produces":["application/json"],"responses":{"200":{"description":"批量查询通知屏蔽规则成功","examples":{"application/json":{"count":100,"notification_masks":[{"end_date":"yyyy-MM-dd","end_time":"HH:mm:ss","mask_name":"mn_test","mask_status":"UN_MASKED","mask_type":"START_END_TIME","notification_mask_id":"nm123232232341232132","policies":[{"alarm_level":2,"alarm_policy_id":"0f921f55-89b1-4534-ae54-7b40b597b5a6","comparison_operator":">","count":3,"extra_info":{"custom_proc_name":"proc_zombie_count1","metric_prefix":"SlAsh_","metric_type":"string","origin_metric_name":"disk_usedPercent"},"filter":"average","metric_name":"cpu_util","period":300,"suppress_duration":300,"type":"string","unit":"%","value":0}],"relation_id":"al123232232341232132","relation_type":"ALARM_RULE","resource_type":"MULTI_INSTANCE","resources":[{"dimension_names":["disk_utils,instance_id"],"namespace":"SYS.ECS"}],"start_date":"yyyy-MM-dd","start_time":"HH:mm:ss"}]}},"schema":{"$ref":"#/definitions/ListNotificationMaskResp"}},"400":{"description":"参数校验失败","schema":{"$ref":"#/definitions/GoAPIErrorResponseV2"}},"500":{"description":"系统内部错误","schema":{"$ref":"#/definitions/GoAPIErrorResponseV2"}}},"summary":"查询告警通知屏蔽列表","tags":["告警通知屏蔽"],"x-api-type":"open-api","x-is-registered":"Y","x-open-region-cloud":"hc,hk,g42,hk_g42,ctc,cmcc","x-request-examples-1":{"dimensions":[{"name":"instance_id","value":"4270ff17-aba3-4138-89fa-820594c39755"}],"mask_id":"nm1689737291469aj38xNVLK","mask_name":"mn_test","mask_status":"MASK_EFFECTIVE","namespace":"SYS.ECS","relation_ids":["al123232232341232132"],"relation_type":"DEFAULT","resource_id":"dse23xw43"},"x-support-sdk":"Y","x-version":"v2"}}},"product_short":"CES","region_id":"cn-north-4","schemes":["HTTPS"],"security_definitions":null,"summary":"查询告警通知屏蔽列表","tags":"告警通知屏蔽","uri":null,"version":"2.0"}