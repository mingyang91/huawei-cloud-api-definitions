{"base_path":"/","components":null,"consumes":"[\"application/json\",\"text/plain; charset=utf-8\"]","definitions":{"BatchCreateInvocationInfo":{"properties":{"error_code":{"description":"错误码","pattern":"^(invocationmgr\\.[0-9]{4})$","type":"string"},"error_msg":{"description":"错误信息","maxLength":128,"minLength":1,"type":"string"},"instance_id":{"description":"机器id","pattern":"^[a-zA-Z0-9-]{1,64}$","type":"string"},"invocation_id":{"description":"任务id","pattern":"^[a-zA-Z0-9-]{1,64}$","type":"string"},"ret_status":{"description":"任务结果, successful成功,error失败","enum":["successful","error"],"type":"string"}}},"BatchCreateInvocationRequestBody":{"example":{"instance_ids":["instancexxx001","instancexxx002"],"invocation_target":"telescope","invocation_type":"INSTALL"},"properties":{"instance_ids":{"description":"主机id列表(INSTALL和UPDATE时必须)","items":{"pattern":"^[a-zA-Z0-9-]{1,64}$","type":"string"},"maxItems":100,"minItems":1,"type":"array"},"invocation_ids":{"description":"任务ID列表(ROLLBACK和RETRY时必须)","items":{"pattern":"^[a-zA-Z0-9-]{1,64}$","type":"string"},"maxItems":100,"minItems":1,"type":"array"},"invocation_target":{"default":"telescope","description":"任务对象,目前仅支持telescope","enum":["telescope"],"type":"string"},"invocation_type":{"description":"任务类型,INSTALL 安装,UPDATE升级,ROLLBACK回退,RETRY重试,SET_REMOTE_INSTALL_HOST设置远程安装主机,REMOTE_INSTALL执行远程安装","enum":["INSTALL","UPDATE","ROLLBACK","RETRY","SET_REMOTE_INSTALL_HOST","REMOTE_INSTALL"],"type":"string"},"origin":{"description":"Agent任务接口调用源,CES表示由Console调用,APICOM_BMS表示由裸金属服务器调用,ADMIN_SERVER表示由运维平台调用","enum":["CES","APICOM_BMS","ADMIN_SERVER"],"type":"string"},"remote_install_meta":{"description":"创建远程安装任务时需要下发的被安装主机相关信息","items":{"$ref":"#/definitions/RemoteInstallHostInfo"},"maxItems":100,"minItems":0,"type":"array"},"version":{"description":"版本号","maxLength":64,"minLength":0,"pattern":"^([0-9A-Za-z]|_|-|\\.)+$","type":"string"},"version_type":{"description":"插件升级时需要选择升级“基础版本”还是“增强版本”,传值“BASIC_VERSION”表示升级成基础版本,传值“ADVANCE_VERSION”表示升级成增强版本","enum":["BASIC_VERSION","ADVANCE_VERSION"],"type":"string"}},"required":["invocation_type"],"type":"object"},"BatchCreateInvocationResp":{"example":{"invocations":[{"instance_id":"instancexxx001","ret_status":"successful"},{"error_msg":"do not meet the installation conditions","instance_id":"instancexxx002","ret_status":"error"}]},"properties":{"invocations":{"description":"创建任务的信息列表","items":{"$ref":"#/definitions/BatchCreateInvocationInfo"},"maxItems":100,"minItems":0,"type":"array"}}},"ErrorResp":{"properties":{"error_code":{"description":"错误码","pattern":"^(taskmgr\\.[0-9]{4})$","type":"string"},"error_msg":{"description":"错误信息","maxLength":256,"minLength":1,"type":"string"}}},"ErrorResp400":{"allOf":[{"$ref":"#/definitions/ErrorResp"}],"example":{"error_code":"taskmgr.0005","error_msg":"Some content in message body is not correct."}},"ErrorResp401":{"allOf":[{"$ref":"#/definitions/ErrorResp"}],"example":{"error_code":"taskmgr.0003","error_msg":"Authentication fails or the authentication information is not provided"}},"ErrorResp403":{"allOf":[{"$ref":"#/definitions/ErrorResp"}],"example":{"error_code":"taskmgr.0007","error_msg":"The authentication information is incorrect or the service invoker does not have sufficient rights."}},"ErrorResp500":{"allOf":[{"$ref":"#/definitions/ErrorResp"}],"example":{"error_code":"taskmgr.0001","error_msg":"Internal service error"}},"RemoteInstallHostInfo":{"properties":{"instance_name":{"description":"被远程安装的主机名称","maxLength":128,"minLength":1,"type":"string"},"password":{"description":"被远程安装的主机的登录密码","maxLength":3000,"minLength":1,"type":"string"},"port":{"description":"被远程安装的主机的登录端口","maxLength":5,"minLength":1,"type":"string"},"remote_ip":{"description":"被远程安装的主机IP","pattern":"^(([0-9]|\\.){1,15})$","type":"string"},"remote_use_pem":{"default":false,"description":"被远程安装的主机远程连接是否采用秘钥方式(false时为密码方式)","type":"boolean"},"user_name":{"description":"被远程安装的主机的登录用户名","maxLength":16,"minLength":1,"type":"string"}}}},"description":null,"group_id":"2062bc6f187f46ae8026a22ef9aceb0f","host":"ces.cn-north-4.myhuaweicloud.com","id":"711dd0e14ac04ebab14dcee654002fdc","info_version":"v3","method":"post","name":"BatchCreateAgentInvocations","parameters":{"ContentType":{"default":"application/json; charset=UTF-8","description":"发送的实体的MIME类型。默认使用application/json; charset=UTF-8。","in":"header","maxLength":64,"minLength":1,"name":"Content-Type","required":false,"type":"string"},"ProjectAuthToken":{"description":"用户project Token。用户Token也就是调用获取用户Token接口的响应值,该接口是唯一不需要认证的接口。请求响应成功后在响应消息头中包含的“X-Subject-Token”的值即为Token值。","in":"header","maxLength":16384,"minLength":1,"name":"X-Auth-Token","required":false,"type":"string"},"ProjectID":{"description":"项目id","in":"path","maxLength":64,"minLength":1,"name":"project_id","required":true,"type":"string"}},"paths":{"/v3/{project_id}/agent-invocations/batch-create":{"post":{"description":"批量创建Agent任务","operationId":"BatchCreateAgentInvocations","parameters":[{"$ref":"#/parameters/ProjectID"},{"$ref":"#/parameters/ContentType"},{"$ref":"#/parameters/ProjectAuthToken"},{"description":"批量创建Agent任务请求体","in":"body","name":"BatchCreateAgentInvocationsRequestBody","required":true,"schema":{"$ref":"#/definitions/BatchCreateInvocationRequestBody"}}],"responses":{"201":{"description":"Created","examples":{"invocations":[{"instance_id":"instancexxx001","ret_status":"successful"},{"error_msg":"do not meet the installation conditions","instance_id":"instancexxx002","ret_status":"error"}]},"schema":{"$ref":"#/definitions/BatchCreateInvocationResp"}},"400":{"description":"Bad Request","schema":{"$ref":"#/definitions/ErrorResp400"}},"401":{"description":"Unauthorized","schema":{"$ref":"#/definitions/ErrorResp401"}},"403":{"description":"Forbidden","schema":{"$ref":"#/definitions/ErrorResp403"}},"500":{"description":"Internal Server Error","schema":{"$ref":"#/definitions/ErrorResp500"}}},"summary":"批量创建Agent任务","tags":["Agent任务相关接口"],"x-api-type":"open-api","x-constraint":"目前拉美-布宜诺斯艾利斯一、拉美-利马一2个局点不支持该接口\n","x-is-registered":"Y","x-open-region-cloud":"hc,hk","x-support-sdk":"Y","x-version":"v3"}}},"product_short":"CES","region_id":"cn-north-4","schemes":["HTTPS"],"security_definitions":null,"summary":"批量创建Agent任务","tags":"Agent任务相关接口","uri":null,"version":"2.0"}