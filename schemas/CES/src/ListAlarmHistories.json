{"base_path":"/","components":null,"consumes":"[\"application/json\",\"text/plain; charset=utf-8\"]","definitions":{"AdditionalInfo":{"description":"**参数解释**:\n告警记录额外字段,仅针对事件监控告警场景所产生的告警记录信息。","properties":{"event_id":{"description":"**参数解释**:\n该条告警记录对应的事件监控ID,资源所产生的事件;如:ev16031292300990kKN8p17J。\n**取值范围**:\n字符串长度为24。","maxLength":24,"minLength":24,"type":"string"},"resource_id":{"description":"**参数解释**:\n该条告警记录对应的资源ID;如:22d98f6c-16d2-4c2d-b424-50e79d82838f。\n**取值范围**:\n字符串长度最大为128。","maxLength":128,"minLength":0,"type":"string"},"resource_name":{"description":"**参数解释**:\n该条告警记录对应的资源名称;如:ECS-Test01。\n**取值范围**:\n字符串长度最大为128。","maxLength":128,"minLength":0,"type":"string"}}},"AlarmHistoryItemV2":{"description":"告警记录详细信息","properties":{"action_enabled":{"description":"**参数解释**:\n是否发送通知\n**取值范围**:\ntrue:发送通知\nfalse:不发送通知","type":"boolean"},"additional_info":{"$ref":"#/definitions/AdditionalInfo"},"alarm_actions":{"description":"**参数解释**:\n告警触发的动作列表。  结构如下:  {  \"type\": \"notification\", \"notification_list\":\n[\"urn:smn:southchina:68438a86d98e427e907e0097b7e35d47:sd\"]  }  type取值:\nnotification:通知。 autoscaling:弹性伸缩。\nnotification_list:告警状态发生变化时,被通知对象的列表。","items":{"properties":{"notification_list":{"description":"**参数解释**:\n告警状态发生变化时,被通知对象的列表。topicUrn可从SMN获取,具体操作请参考查询Topic列表。","items":{"description":"**参数解释**:\n主题的唯一资源标识。\n**取值范围**:\n不涉及。","example":"urn:smn:123","pattern":"^((urn:smn:([a-z]|[A-Z]|[0-9]|\\-){1,32}:([a-z]|[A-Z]|[0-9]){32}:([a-z]|[A-Z]|[0-9]|\\-|\\_){1,256})|(ct|cg)([a-z]|[A-Z]|[0-9]){22})$","type":"string"},"maxItems":20,"minItems":0,"type":"array"},"type":{"description":"**参数解释**:\n通知类型。\n**取值范围**:\n枚举值。notification为通知组或者主题订阅,contact为云账号联系人,contactGroup为(已废弃)通知组。autoscaling为AS通知,只在AS中使用,不推荐客户使用。groupwatch、ecsRecovery及iecAction,已废弃,不推荐使用。","enum":["notification","autoscaling","groupwatch","ecsRecovery","contact","contactGroup","iecAction"],"example":"notification","type":"string"}}},"maxItems":10,"minItems":0,"type":"array"},"alarm_id":{"description":"**参数解释**:\n告警规则的ID,如:al1603131199286dzxpqK3Ez。\n**取值范围**:\n字符串长度为24","maxLength":24,"minLength":24,"type":"string"},"alarm_recovery_time":{"description":"**参数解释**:\n告警恢复时间,UTC时间。\n**取值范围**:\n不涉及。","format":"date-time","type":"string"},"begin_time":{"description":"**参数解释**:\n产生时间,UTC时间\n**取值范围**:\n不涉及。","format":"date-time","type":"string"},"condition":{"description":"**参数解释**:\n告警触发条件。","properties":{"comparison_operator":{"description":"**参数解释**:\n阈值符号。\n**取值范围**:\n枚举值。支持的值为(>|<|>=|<=|=|!=|cycle_decrease|cycle_increase|cycle_wave);cycle_decrease为环比下降,cycle_increase为环比上升,cycle_wave为环比波动。字符长度在 1 到 10之间。","maxLength":10,"minLength":1,"pattern":"^(>|<|>=|<=|=|!=|cycle_decrease|cycle_increase|cycle_wave)$","type":"string"},"count":{"description":"**参数解释**:\n告警连续触发次数。\n**取值范围**:\n字符串长度在 1 到 180 之间。","maximum":180,"minimum":1,"type":"integer"},"filter":{"description":"**参数解释**:\n聚合方式。\n**取值范围**:\n枚举值。average:平均值,variance:方差,min:最小值,max:最大值,sum:求和。字符长度在 1 到 15之间。","maxLength":15,"minLength":1,"pattern":"^(average|variance|min|max|sum)$","type":"string"},"period":{"description":"**参数解释**:\n指标周期,单位是秒。如想了解各个云服务的指标原始周期可以参考“[支持服务列表](ces_03_0059.xml)”。\n**取值范围**:\n0是默认值,例如事件类告警该字段就用0即可;\n1代表指标的原始周期,比如RDS监控指标原始周期是60s,表示该RDS指标按60s周期为一个数据点参与告警计算;\n300代表指标按5分钟聚合周期为一个数据点参与告警计算;\n1200代表指标按20分钟聚合周期为一个数据点参与告警计算;\n3600代表指标按60分钟聚合周期为一个数据点参与告警计算;\n14400代表指标按4小时聚合周期为一个数据点参与告警计算;\n86400代表指标按1天聚合周期为一个数据点参与告警计算。","enum":[0,1,300,1200,3600,14400,86400],"format":"int32","type":"integer"},"suppress_duration":{"description":"**参数解释**:\n告警抑制时间(告警周期),单位为秒,对应页面上创建告警规则时告警策略最后一个字段,该字段主要为解决告警频繁的问题。\n**取值范围**:\n枚举值,只能为0、300、600、900、1800、3600、10800、21600、43200、86400。\n- 0:在立即触发场景中,0代表不抑制;在累计触发场景,0代表只告警一次。\n- 300代表满足告警触发条件后每5分钟告警一次。\n- 600代表满足告警触发条件后每10分钟告警一次。\n- 900代表满足告警触发条件后每15分钟告警一次。\n- 1800代表满足告警触发条件后每30分钟告警一次。\n- 3600代表满足告警触发条件后每60分钟告警一次。\n- 10800代表满足告警触发条件后每3小时告警一次。\n- 21600代表满足告警触发条件后每6小时告警一次。\n- 43200代表满足告警触发条件后每12小时告警一次。\n- 86400代表满足告警触发条件后每一天告警一次。","enum":[0,300,600,900,1800,3600,10800,21600,43200,86400],"format":"int32","pattern":"^(0|300|600|900|1800|3600|10800|21600|43200|86400)$","type":"integer"},"unit":{"description":"**参数解释**:\n数据的单位。\n**取值范围**:\n字符串长度最大为 32。","maxLength":32,"minLength":0,"type":"string"},"value":{"description":"**参数解释**:\n告警阈值。\n**取值范围**:\n具体阈值取值请参见附录中各服务监控指标中取值范围,如[支持监控的服务列表](ces_03_0059.xml)中ECS的CPU使用率cpu_util取值范围可配置80。最小值为0,最大值为1.7976931348623157e+108。","format":"double","maximum":1.7976931348623156e108,"minimum":0,"type":"number"}}},"data_points":{"description":"**参数解释**:\n计算出该条告警记录的资源监控数据上报时间和监控数值。","items":{"$ref":"#/definitions/DataPointInfo"},"maxItems":2147483647,"minItems":0,"type":"array"},"end_time":{"description":"**参数解释**:\n结束时间,UTC时间\n**取值范围**:\n不涉及。","format":"date-time","type":"string"},"first_alarm_time":{"description":"**参数解释**:\n第一次告警时间,UTC时间\n**取值范围**:\n不涉及。","example":"2025-03-31T19:28:03+08:00","format":"date-time","type":"string"},"last_alarm_time":{"description":"**参数解释**:\n最后一次告警时间,UTC时间。\n**取值范围**:\n不涉及。","format":"date-time","type":"string"},"level":{"description":"**参数解释**:\n告警记录的告警级别。\n**取值范围**:\n值为1,2,3,4;1为紧急,2为重要,3为次要,4为提示。","enum":[1,2,3,4],"format":"int32","type":"integer"},"metric":{"description":"**参数解释**:\n指标信息。","properties":{"dimensions":{"description":"**参数解释**:\n指标维度。\n**取值范围**:\n不涉及。","items":{"description":"**参数解释**:\n指标维度。\n**取值范围**:\n不涉及。","properties":{"name":{"description":"**参数解释**:\n资源维度,如:弹性云服务器,则维度为instance_id;目前最大支持4个维度,各服务资源的指标维度名称可查看:“[服务维度名称](ces_03_0059.xml)”。\n**取值范围**:\n字符串长度在 1 到 32 之间。","maxLength":32,"minLength":1,"pattern":"^([a-z]|[A-Z]){1}([a-z]|[A-Z]|[0-9]|_|-)*$","type":"string"},"value":{"description":"**参数解释**:\n资源维度值,为资源的实例ID,如:4270ff17-aba3-4138-89fa-820594c39755。\n**取值范围**:\n字符串长度在 1 到 256 之间。","maxLength":256,"minLength":1,"pattern":"^((([a-z]|[A-Z]|[0-9]|\\*|_|/|#|\\(|\\)){1}([a-z]|[A-Z]|[0-9]|_|-|\\.|\\*|/|#|\\(|\\))*))$","type":"string"}}},"maxItems":4,"minItems":0,"type":"array"},"metric_name":{"description":"**参数解释**:\n资源的监控指标名称。如:弹性云服务器中的监控指标cpu_util,表示弹性服务器的CPU使用率;文档数据库中的指标mongo001_command_ps,表示command执行频率;各服务的指标名称可查看:“[服务指标名称](ces_03_0059.xml)”。\n**取值范围**:\n字符串长度在 1 到 64 之间。","maxLength":64,"minLength":1,"type":"string"},"namespace":{"description":"**参数解释**:\n查询服务的命名空间,各服务命名空间请参考“[服务命名空间](ces_03_0059.xml)”。\n**取值范围**:\n字符串长度在 3 到 32 之间。","maxLength":32,"minLength":3,"type":"string"}}},"name":{"description":"**参数解释**:\n告警规则的名称,如:alarm-test01。\n**取值范围**:\n字符串长度在 1 到 128 之间。","maxLength":128,"minLength":1,"type":"string"},"ok_actions":{"description":"**参数解释**:\n告警恢复触发的动作。  结构如下:  {  \"type\": \"notification\", \"notification_list\":\n[\"urn:smn:southchina:68438a86d98e427e907e0097b7e35d47:sd\"]  }\ntype取值:  notification:通知。  notification_list:告警状态发生变化时,被通知对象的列表。","items":{"properties":{"notification_list":{"description":"**参数解释**:\n告警状态发生变化时,被通知对象的列表。topicUrn可从SMN获取,具体操作请参考查询Topic列表。","items":{"description":"**参数解释**:\n主题的唯一资源标识。\n**取值范围**:\n不涉及。","example":"urn:smn:123","pattern":"^((urn:smn:([a-z]|[A-Z]|[0-9]|\\-){1,32}:([a-z]|[A-Z]|[0-9]){32}:([a-z]|[A-Z]|[0-9]|\\-|\\_){1,256})|(ct|cg)([a-z]|[A-Z]|[0-9]){22})$","type":"string"},"maxItems":20,"minItems":0,"type":"array"},"type":{"description":"**参数解释**:\n通知类型。\n**取值范围**:\n枚举值。notification为通知组或者主题订阅,contact为云账号联系人,contactGroup为(已废弃)通知组。autoscaling为AS通知,只在AS中使用,不推荐客户使用。groupwatch、ecsRecovery及iecAction,已废弃,不推荐使用。","enum":["notification","autoscaling","groupwatch","ecsRecovery","contact","contactGroup","iecAction"],"example":"notification","type":"string"}}},"maxItems":10,"minItems":0,"type":"array"},"record_id":{"description":"**参数解释**:\n告警记录ID。\n**取值范围**:\n字符串长度为24。","maxLength":24,"minLength":24,"type":"string"},"status":{"description":"**参数解释**:\n告警记录的状态。\n**取值范围**:\n取值为ok,alarm,invalid, ok_manual;\nok为正常,alarm为告警,invalid为已失效,ok_manual为手动恢复。","enum":["ok","alarm","invalid","ok_manual"],"type":"string"},"type":{"description":"**参数解释**:\n告警规则类型。\n**取值范围**:\n枚举值。ALL_INSTANCE为全部资源指标告警,RESOURCE_GROUP为资源分组指标告警,MULTI_INSTANCE为指定资源指标告警,EVENT.SYS为系统事件告警,EVENT.CUSTOM自定义事件告警,DNSHealthCheck为健康检查告警。","enum":["EVENT.SYS","EVENT.CUSTOM","DNSHealthCheck","RESOURCE_GROUP","MULTI_INSTANCE","ALL_INSTANCE"],"example":"EVENT.SYS","pattern":"^(EVENT.SYS|EVENT.CUSTOM|DNSHealthCheck|RESOURCE_GROUP|MULTI_INSTANCE|ALL_INSTANCE)$","type":"string"}},"type":"object"},"DataPointInfo":{"properties":{"time":{"description":"**参数解释**:\n计算出该条告警记录的资源监控数据上报的UTC时间。\n**取值范围**:\n字符串长度在 1 到 64 之间。","maxLength":64,"minLength":1,"type":"string"},"value":{"description":"**参数解释**:\n计算出该条告警记录的资源监控数据在该时间点的监控数值,如:7.019。\n**取值范围**:\n整数,最小值为0,最大值为1.7976931348623157e+308。","format":"double","maximum":1.7976931348623157e308,"minimum":0,"type":"number"}},"type":"object"},"GoAPIErrorResponseV2":{"properties":{"error_code":{"description":"请求异常内部业务状态码","example":"ces.0001","maxLength":256,"minLength":0,"type":"string"},"error_msg":{"description":"请求异常信息","example":"the request format is invalid","maxLength":256,"minLength":0,"type":"string"},"request_id":{"description":"请求ID","example":"txnEntry-DESKTOP-4LPFH08.txnId-466541d0-f1a6-429b-b747-98d4991671c1.ts-1637909316688.c-95","maxLength":256,"minLength":0,"type":"string"}},"type":"object"},"ListAlarmHistoriesResp":{"description":"This is a auto create Response Object","properties":{"alarm_histories":{"description":"**参数解释**:\nalarmHistories列表。","items":{"$ref":"#/definitions/AlarmHistoryItemV2"},"maxItems":100,"minItems":0,"type":"array"},"count":{"description":"**参数解释**:\n告警记录列表总数。\n**取值范围**:\n不涉及。","maximum":2147483647,"minimum":0,"type":"integer"}}}},"description":null,"group_id":"2062bc6f187f46ae8026a22ef9aceb0f","host":"ces.cn-north-4.myhuaweicloud.com","id":"3acdd56627be4a1ab4661b80cd540304","info_version":"v2","method":"get","name":"ListAlarmHistories","parameters":{"AuthToken":{"description":"**参数解释**:\n用户Token。\n**约束限制**:\n不涉及。\n**取值范围**:\n最小字符数量为1,最大为16384。\n**默认取值**:\n不涉及。","in":"header","maxLength":16384,"minLength":1,"name":"X-Auth-Token","required":false,"type":"string","x-order":2},"ContentType":{"default":"application/json; charset=UTF-8","description":"**参数解释**:\n发送的实体的MIME类型。\n**约束限制**:\n不涉及。\n**取值范围**:\n最小字符数量为1,最大为64。\n**默认取值**:\n默认使用application/json; charset=UTF-8。","in":"header","maxLength":64,"minLength":1,"name":"Content-Type","required":false,"type":"string","x-order":1},"ProjectId":{"description":"**参数解释**:\n项目ID。用于明确项目归属,配置后可通过该ID查询项目下资产,可以通过调用API获取,也可以从控制台获取。获取方式请参见“[获取项目ID](ces_03_0057.xml)”。\n**约束限制**:\n不涉及。\n**取值范围**:\n字符串的长度必须在 1 到 64个字符之间。\n**默认取值**:\n不涉及。","in":"path","maxLength":64,"minLength":1,"name":"project_id","required":true,"type":"string"}},"paths":{"/v2/{project_id}/alarm-histories":{"get":{"deprecated":false,"description":"查询告警记录列表","operationId":"ListAlarmHistories","parameters":[{"$ref":"#/parameters/ContentType"},{"$ref":"#/parameters/AuthToken"},{"$ref":"#/parameters/ProjectId"},{"description":"**参数解释**:\n告警ID列表。告警ID:以al开头,后跟22位由字母或数字组成的字符串。\n**约束限制**:\n列表最大长度为50。","in":"query","items":{"maxLength":24,"minLength":24,"type":"string"},"maxItems":50,"minItems":0,"name":"alarm_id","required":false,"type":"array"},{"description":"**参数解释**:\n告警记录ID。\n**约束限制**:\n不涉及。\n**取值范围**:\n以ah开头,后跟22位由字母或数字组成的字符串,字符串长度为24。\n**默认取值**:\n不涉及。","in":"query","maxLength":24,"minLength":24,"name":"record_id","pattern":"^ah([0-9A-Za-z]){22}$","required":false,"type":"string"},{"description":"**参数解释**:\n告警规则名称。\n**约束限制**:\n不涉及。\n**取值范围**:\n最大128字符长度。\n**默认取值**:\n不涉及。","in":"query","maxLength":128,"minLength":0,"name":"name","required":false,"type":"string"},{"description":"**参数解释**:\n告警规则状态列表。告警规则状态:枚举值,ok为正常,alarm为告警,invalid为已失效。\n**约束限制**:\n列表长度最大为3。","in":"query","items":{"enum":["ok","alarm","invalid"],"type":"string"},"maxItems":3,"minItems":0,"name":"status","required":false,"type":"array"},{"description":"**参数解释**:\n告警级别。\n**约束限制**:\n不涉及。\n**取值范围**:\n枚举值,1为紧急,2为重要,3为次要,4为提示。\n**默认取值**:\n不涉及。","in":"query","maximum":4,"minimum":1,"name":"level","required":false,"type":"integer"},{"description":"**参数解释**:\n查询服务的命名空间,各服务命名空间请参考“[服务命名空间](ces_03_0059.xml)”。\n**约束限制**:\n不涉及。\n**取值范围**:\n格式为service.item;service和item必须是字符串,必须以字母开头,只能包含0-9/a-z/A-Z/_。字符串的长度必须在 3 到 32个字符之间。\n**默认取值**:\n不涉及。","in":"query","maxLength":32,"minLength":3,"name":"namespace","pattern":"^([a-z]|[A-Z]){1}([a-z]|[A-Z]|[0-9]|_)*.([a-z]|[A-Z]){1}([a-z]|[A-Z]|[0-9]|_)*$","required":false,"type":"string"},{"description":"**参数解释**:\n告警资源ID。\n**约束限制**:\n不涉及。\n**取值范围**:\n多维度情况按字母升序排列并使用逗号分隔。最大字符长度为2048。\n**默认取值**:\n不涉及。","in":"query","maxLength":2048,"minLength":0,"name":"resource_id","pattern":"^([a-z]|[A-Z]|[0-9]|_|-|:|,|\\*|\\.|/|#|\\(|\\))+$","required":false,"type":"string"},{"description":"**参数解释**:\n查询告警记录的起始更新时间,例如:2022-02-10T10:05:46+08:00。\n**约束限制**:\n不涉及。\n**取值范围**:\n最大字符长度为64。\n**默认取值**:\n不涉及。","in":"query","maxLength":64,"minLength":0,"name":"from","required":false,"type":"string"},{"description":"**参数解释**:\n查询告警记录的截止更新时间,例如:2022-02-10T10:05:47+08:00。\n**约束限制**:\n不涉及。\n**取值范围**:\n最大字符长度为64。\n**默认取值**:\n不涉及。","in":"query","maxLength":64,"minLength":0,"name":"to","required":false,"type":"string"},{"description":"**参数解释**:\n告警类型。\n**约束限制**:\n不涉及。\n**取值范围**:\n枚举值。event:查询事件类型告警,metric:查询指标类型告警。\n**默认取值**:\n不涉及。","enum":["event","metric"],"in":"query","name":"alarm_type","type":"string"},{"description":"**参数解释**:\n查询告警记录的起始创建时间,例如:2022-02-10T10:05:46+08:00。\n**约束限制**:\n不涉及。\n**取值范围**:\n最大字符长度为64。\n**默认取值**:\n不涉及。","in":"query","maxLength":64,"minLength":0,"name":"create_time_from","required":false,"type":"string"},{"description":"**参数解释**:\n查询告警记录的截止创建时间,例如:2022-02-10T10:05:47+08:00。\n**约束限制**:\n不涉及。\n**取值范围**:\n最大字符长度为64。\n**默认取值**:\n不涉及。","in":"query","maxLength":64,"minLength":0,"name":"create_time_to","required":false,"type":"string"},{"default":0,"description":"**参数解释**:\n分页偏移量。\n**约束限制**:\n不涉及。\n**取值范围**:\n整数,最小值为0,最大值为1000000000。\n**默认取值**:\n0","in":"query","maximum":1000000000,"minimum":0,"name":"offset","required":false,"type":"integer"},{"default":100,"description":"**参数解释**:\n分页偏移量。\n**约束限制**:\n不涉及。\n**取值范围**:\n整数,最小值为1,最大值为100。\n**默认取值**:\n100","in":"query","maximum":100,"minimum":1,"name":"limit","pattern":"^([1-9]|[1-9][0-9]|100)$","required":false,"type":"integer"},{"description":"**参数解释**:\n按关键字排序。\n**约束限制**:\n不涉及。\n**取值范围**:\n枚举值。first_alarm_time:告警产生时间, update_time:更新时间, alarm_level:告警级别,record_id表记录主键。\n**默认取值**:\nupdate_time","enum":["first_alarm_time","update_time","alarm_level","record_id"],"in":"query","name":"order_by","required":false,"type":"string"}],"produces":["application/json"],"responses":{"200":{"description":"查询成功","examples":{"application/json":{"alarm_histories":[{"action_enabled":false,"additional_info":{"event_id":"","resource_id":"","resource_name":""},"alarm_actions":[],"alarm_id":"al1604473987569z6n6nkpm1","alarm_recovery_time":"2024-02-11T08:48:08+08:00","begin_time":"2024-02-11T05:48:08+08:00","condition":{"comparison_operator":">=","count":3,"filter":"average","period":1,"suppress_duration":3600,"value":0},"data_points":[{"time":"2022-06-22T16:38:02+08:00","value":873.1507798960139},{"time":"2022-06-22T16:28:02+08:00","value":883.1507798960139},{"time":"2022-06-22T16:18:02+08:00","value":873.4}],"end_time":"2024-02-11T08:48:08+08:00","last_alarm_time":"2024-02-11T06:48:08+08:00","level":2,"metric":{"dimensions":[{"name":"bandwidth_id","value":"79a9cc0c-f626-4f15-bf99-a1f184107f88"}],"metric_name":"downstream_bandwidth","namespace":"SYS.VPC"},"name":"TC_CES_FunctionBaseline_Alarm_008","ok_actions":[],"record_id":"ah1655717086704DEnBrJ999","status":"alarm","type":"ALL_INSTANCE"}],"count":103}},"schema":{"$ref":"#/definitions/ListAlarmHistoriesResp"}},"400":{"description":"参数校验失败","schema":{"$ref":"#/definitions/GoAPIErrorResponseV2"}},"500":{"description":"系统内部错误","schema":{"$ref":"#/definitions/GoAPIErrorResponseV2"}}},"summary":"查询告警记录列表","tags":["告警记录"],"x-api-type":"open-api","x-code-url":"/v2/{project_id}/open-alarm-histories","x-constraint":"","x-first-open-time":"","x-hybridcloud":false,"x-is-registered":"Y","x-open-region-cloud":"hc,hk,g42,hk_g42,ctc,cmcc","x-request-examples-description-1":"查询告警名称为alarm-test01,且时间为2022-02-10T10:05:46+08:00的告警记录列表。","x-request-examples-url-1":"/v2/{project_id}/alarm-histories?limit=10&offset=0&from=2022-02-10T10:05:46+08:00&to=2022-02-10T12:05:46+08:00&alarm_name=alarm-test01","x-scope":"Commercial","x-source":"SelfDeveloped","x-support-sdk":"Y","x-version":"v2"}}},"product_short":"CES","region_id":"cn-north-4","schemes":["HTTPS"],"security_definitions":null,"summary":"查询告警记录列表","tags":"告警记录","uri":null,"version":"2.0"}