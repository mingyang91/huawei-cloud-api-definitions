{"base_path":"/","components":null,"consumes":"[\"application/json\",\"text/plain; charset=utf-8\"]","definitions":{"AdditionalInfo":{"description":"告警记录额外字段,仅针对事件监控告警场景所产生的告警记录信息。","properties":{"event_id":{"description":"该条告警记录对应的事件监控ID,资源所产生的事件;如:ev16031292300990kKN8p17J。","maxLength":24,"minLength":24,"type":"string"},"resource_id":{"description":"该条告警记录对应的资源ID;如:22d98f6c-16d2-4c2d-b424-50e79d82838f。","maxLength":128,"minLength":0,"type":"string"},"resource_name":{"description":"该条告警记录对应的资源名称;如:ECS-Test01。","maxLength":128,"minLength":0,"type":"string"}}},"AlarmCondition":{"description":"告警触发条件","properties":{"comparison_operator":{"description":"告警阈值的比较条件,支持的值为(>|<|>=|<=|=|!=|cycle_decrease|cycle_increase|cycle_wave),cycle_decrease为环比下降,cycle_increase为环比上升,cycle_wave为环比波动","maxLength":10,"minLength":1,"pattern":"^(>|<|>=|<=|=|!=|cycle_decrease|cycle_increase|cycle_wave)$","type":"string"},"count":{"description":"次数","maximum":180,"minimum":1,"type":"integer"},"filter":{"description":"聚合方式, 支持的值为(average|min|max|sum)","maxLength":15,"minLength":1,"pattern":"^(average|min|max|sum)$","type":"string"},"period":{"description":"指标周期,单位是秒; 0是默认值,例如事件类告警该字段就用0即可; 1代表指标的原始周期,比如RDS监控指标原始周期是60s,表示该RDS指标按60s周期为一个数据点参与告警计算;如想了解各个云服务的指标原始周期可以参考[服务命名空间](https://support.huaweicloud.com/usermanual-ces/zh-cn_topic_0202622212.html), 300代表指标按5分钟聚合周期为一个数据点参与告警计算。","enum":[0,1,300,1200,3600,14400,86400],"format":"int32","type":"integer"},"suppress_duration":{"description":"告警抑制时间,单位为秒,对应页面上创建告警规则时告警策略最后一个字段,该字段主要为解决告警频繁的问题,0代表不抑制,满足条件即告警;300代表满足告警触发条件后每5分钟告警一次;","enum":[0,300,600,900,1800,3600,10800,21600,43200,86400],"format":"int32","pattern":"^(0|300|600|900|1800|3600|10800|21600|43200|86400)$","type":"integer"},"unit":{"description":"数据的单位,最大长度为32位。","maxLength":32,"minLength":0,"type":"string"},"value":{"description":"告警阈值,取值范围[0, Number.MAX_VALUE],Number.MAX_VALUE值为1.7976931348623157e+108。具体阈值取值请参见附录中各服务监控指标中取值范围,如支持监控的服务列表中ECS的CPU使用率cpu_util取值范围可配置80。","format":"double","maximum":1.174271e108,"minimum":0,"type":"number"}},"required":["period","filter","comparison_operator","value","count"]},"AlarmHistoryItemV2":{"description":"告警记录详细信息","properties":{"action_enabled":{"description":"是否发送通知,值为true或者false。","type":"boolean"},"additional_info":{"$ref":"#/definitions/AdditionalInfo"},"alarm_actions":{"description":"告警触发的动作。  结构如下:  {  \"type\": \"notification\", \"notification_list\": [\"urn:smn:southchina:68438a86d98e427e907e0097b7e35d47:sd\"]  }  type取值: notification:通知。 autoscaling:弹性伸缩。 notification_list:告警状态发生变化时,被通知对象的列表。","items":{"$ref":"#/definitions/Notification"},"maxItems":10,"minItems":0,"type":"array"},"alarm_id":{"description":"告警规则的ID,如:al1603131199286dzxpqK3Ez。","maxLength":24,"minLength":24,"type":"string"},"alarm_recovery_time":{"description":"告警恢复时间,UTC时间","format":"date-time","type":"string"},"begin_time":{"description":"产生时间,UTC时间","format":"date-time","type":"string"},"condition":{"$ref":"#/definitions/AlarmCondition"},"data_points":{"description":"计算出该条告警记录的资源监控数据上报时间和监控数值。","items":{"$ref":"#/definitions/DataPointInfo"},"maxItems":2147483647,"minItems":0,"type":"array"},"end_time":{"description":"结束时间,UTC时间","format":"date-time","type":"string"},"first_alarm_time":{"description":"第一次告警时间戳,UTC时间","format":"date-time","type":"string"},"last_alarm_time":{"description":"最后一次告警时间,UTC时间","format":"date-time","type":"string"},"level":{"description":"告警记录的告警级别,值为1,2,3,4;1为紧急,2为重要,3为次要,4为提示。","enum":[1,2,3,4],"format":"int32","type":"integer"},"metric":{"$ref":"#/definitions/Metric"},"name":{"description":"告警规则的名称,如:alarm-test01。","maxLength":128,"minLength":1,"type":"string"},"ok_actions":{"description":"告警恢复触发的动作。  结构如下:  {  \"type\": \"notification\", \"notification_list\": [\"urn:smn:southchina:68438a86d98e427e907e0097b7e35d47:sd\"]  } type取值:  notification:通知。  notification_list:告警状态发生变化时,被通知对象的列表。","items":{"$ref":"#/definitions/Notification"},"maxItems":10,"minItems":0,"type":"array"},"record_id":{"description":"告警记录ID","maxLength":24,"minLength":24,"type":"string"},"status":{"description":"告警记录的状态,取值为ok,alarm,invalid; ok为正常,alarm为告警,invalid为已失效。","enum":["ok","alarm","invalid"],"type":"string"},"type":{"$ref":"#/definitions/AlarmType"}},"type":"object"},"AlarmType":{"description":"告警规则类型,ALL_INSTANCE为全部资源指标告警,RESOURCE_GROUP为资源分组指标告警,MULTI_INSTANCE为指定资源指标告警,EVENT.SYS为系统事件告警,EVENT.CUSTOM自定义事件告警,DNSHealthCheck为健康检查告警;","enum":["EVENT.SYS","EVENT.CUSTOM","DNSHealthCheck","RESOURCE_GROUP","MULTI_INSTANCE","ALL_INSTANCE"],"pattern":"^(EVENT.SYS|EVENT.CUSTOM|DNSHealthCheck|RESOURCE_GROUP|MULTI_INSTANCE|ALL_INSTANCE)$","type":"string"},"DataPointInfo":{"properties":{"time":{"description":"计算出该条告警记录的资源监控数据上报的UTC时间","maxLength":64,"minLength":1,"type":"string"},"value":{"description":"计算出该条告警记录的资源监控数据在该时间点的监控数值,如:7.019。","format":"double","maximum":1.7976931348623157e308,"minimum":0,"type":"number"}},"type":"object"},"Dimension":{"description":"指标维度","properties":{"name":{"description":"资源维度,如:弹性云服务器,则维度为instance_id;目前最大支持4个维度,各服务资源的指标维度名称可查看:“[服务指标维度](https://support.huaweicloud.com/usermanual-ces/zh-cn_topic_0202622212.html)”。","pattern":"^([a-z]|[A-Z]){1}([a-z]|[A-Z]|[0-9]|_|-){1,32}$","type":"string"},"value":{"description":"资源维度值,为资源的实例ID,如:4270ff17-aba3-4138-89fa-820594c39755。","pattern":"^((([a-z]|[A-Z]|[0-9]){1}([a-z]|[A-Z]|[0-9]|_|-|\\.)*)|\\*){1,256}$","type":"string"}},"required":["name"]},"GoAPIErrorResponseV2":{"properties":{"error_code":{"description":"请求异常内部业务状态码","example":"ces.0001","maxLength":256,"minLength":0,"type":"string"},"error_msg":{"description":"请求异常信息","example":"the request format is invalid","maxLength":256,"minLength":0,"type":"string"},"request_id":{"description":"请求ID","example":"txnEntry-DESKTOP-4LPFH08.txnId-466541d0-f1a6-429b-b747-98d4991671c1.ts-1637909316688.c-95","maxLength":256,"minLength":0,"type":"string"}},"type":"object"},"ListAlarmHistoriesResp":{"description":"This is a auto create Response Object","properties":{"alarm_histories":{"description":"alarmHistories列表","items":{"$ref":"#/definitions/AlarmHistoryItemV2"},"maxItems":100,"minItems":0,"type":"array"},"count":{"description":"告警记录列表总数","maximum":2147483647,"minimum":0,"type":"integer"}}},"Metric":{"description":"指标信息","properties":{"dimensions":{"description":"指标维度,目前最大可添加4个维度。","items":{"$ref":"#/definitions/Dimension"},"maxItems":4,"minItems":0,"type":"array"},"metric_name":{"description":"资源的监控指标名称,必须以字母开头,只能包含0-9/a-z/A-Z/_,字符长度最短为1,最大为64;如:弹性云服务器中的监控指标cpu_util,表示弹性服务器的CPU使用率;文档数据库中的指标mongo001_command_ps,表示command执行频率;各服务的指标名称可查看:“[服务指标名称](https://support.huaweicloud.com/usermanual-ces/zh-cn_topic_0202622212.html)”。","maxLength":64,"minLength":1,"type":"string"},"namespace":{"description":"查询服务的命名空间,各服务命名空间请参考[服务命名空间](https://support.huaweicloud.com/usermanual-ces/zh-cn_topic_0202622212.html)","maxLength":32,"minLength":3,"type":"string"}}},"Notification":{"properties":{"notification_list":{"description":"告警状态发生变化时,被通知对象的列表。topicUrn可从SMN获取,具体操作请参考查询Topic列表。当type为notification时,notification_list列表不能为空。 说明:若alarm_action_enabled为true,对应的alarm_actions、ok_actions至少有一个不能为空。若alarm_actions、ok_actions同时存在时,notification_list值保持一致。","items":{"$ref":"#/definitions/SMNUrn"},"maxItems":20,"minItems":0,"type":"array"},"type":{"description":"通知类型, notification代表通过SMN通知","pattern":"^(notification|autoscaling|ecsRecovery|contact|contactGroup|iecAction)$","type":"string"}},"required":["type","notification_list"]},"SMNUrn":{"pattern":"^((urn:smn:([a-z]|[A-Z]|[0-9]|\\-){1,32}:([a-z]|[A-Z]|[0-9]){32}:([a-z]|[A-Z]|[0-9]|\\-|\\_){1,256})|(ct|cg)([a-z]|[A-Z]|[0-9]){22})$","type":"string"}},"description":null,"group_id":"2062bc6f187f46ae8026a22ef9aceb0f","host":"ces.cn-north-4.myhuaweicloud.com","id":"3acdd56627be4a1ab4661b80cd540304","info_version":"v2","method":"get","name":"ListAlarmHistories","parameters":{"AuthToken":{"description":"用户Token","in":"header","maxLength":16384,"minLength":1,"name":"X-Auth-Token","required":true,"type":"string","x-order":2},"ContentType":{"default":"application/json; charset=UTF-8","description":"发送的实体的MIME类型。默认使用application/json; charset=UTF-8。","in":"header","maxLength":64,"minLength":1,"name":"Content-Type","required":true,"type":"string","x-order":1},"ProjectId":{"description":"租户ID","in":"path","maxLength":64,"minLength":1,"name":"project_id","pattern":"^[a-zA-Z0-9-]{1,64}$","required":true,"type":"string"}},"paths":{"/v2/{project_id}/alarm-histories":{"get":{"deprecated":false,"description":"查询告警记录列表","operationId":"ListAlarmHistories","parameters":[{"$ref":"#/parameters/ContentType"},{"$ref":"#/parameters/AuthToken"},{"$ref":"#/parameters/ProjectId"},{"description":"告警ID,以al开头,后跟22位由字母或数字组成的字符串","in":"query","maxLength":24,"minLength":24,"name":"alarm_id","required":false,"type":"string"},{"description":"告警记录ID,以ah开头,后跟22位由字母或数字组成的字符串","in":"query","maxLength":24,"minLength":24,"name":"record_id","required":false,"type":"string"},{"description":"告警规则名称","in":"query","maxLength":128,"minLength":0,"name":"name","required":false,"type":"string"},{"description":"告警规则状态, ok为正常,alarm为告警,invalid为已失效","in":"query","maxLength":64,"minLength":0,"name":"status","pattern":"^(ok|alarm|invalid)$","required":false,"type":"string"},{"description":"告警级别, 1为紧急,2为重要,3为次要,4为提示","in":"query","maximum":4,"minimum":1,"name":"level","required":false,"type":"integer"},{"description":"查询服务的命名空间,各服务命名空间请参考[服务命名空间](https://support.huaweicloud.com/usermanual-ces/zh-cn_topic_0202622212.html)","in":"query","maxLength":32,"minLength":3,"name":"namespace","required":false,"type":"string"},{"description":"告警资源ID,多维度情况按字母升序排列并使用逗号分隔","in":"query","maxLength":2048,"minLength":0,"name":"resource_id","required":false,"type":"string"},{"description":"查询告警记录的起始时间,例如:2022-02-10T10:05:46+08:00","in":"query","maxLength":64,"minLength":0,"name":"from","required":false,"type":"string"},{"description":"查询告警记录的截止时间,例如:2022-02-10T10:05:47+08:00","in":"query","maxLength":64,"minLength":0,"name":"to","required":false,"type":"string"},{"default":0,"description":"分页偏移量","in":"query","maximum":999999,"minimum":0,"name":"offset","pattern":"^(0|[1-9]|[1-9][0-9])$","required":false,"type":"integer"},{"default":100,"description":"分页大小","in":"query","maximum":100,"minimum":1,"name":"limit","pattern":"^([1-9]|[1-9][0-9]|100)$","required":false,"type":"integer"},{"description":"按关键字排序, 默认为update_time, {first_alarm_time: 告警产生时间, update_time: 更新时间, alarm_level: 告警级别, record_id:表记录主键}\n","enum":["first_alarm_time","update_time","alarm_level","record_id"],"in":"query","name":"order_by","type":"string"}],"produces":["application/json"],"responses":{"200":{"description":"查询成功","examples":{"application/json":{"alarm_histories":[{"action_enabled":false,"additional_info":{"event_id":"","resource_id":"","resource_name":""},"alarm_actions":[],"alarm_id":"al1604473987569z6n6nkpm1","begin_time":"2024-02-11T05:48:08+08:00","condition":{"comparison_operator":">=","count":3,"filter":"average","period":1,"suppress_duration":3600,"value":0},"data_points":[{"time":"2022-06-22T16:38:02+08:00","value":873.1507798960139},{"time":"2022-06-22T16:28:02+08:00","value":883.1507798960139},{"time":"2022-06-22T16:18:02+08:00","value":873.4}],"end_time":"2024-02-11T08:48:08+08:00","level":2,"metric":{"dimensions":[{"name":"bandwidth_id","value":"79a9cc0c-f626-4f15-bf99-a1f184107f88"}],"metric_name":"downstream_bandwidth","namespace":"SYS.VPC"},"name":"TC_CES_FunctionBaseline_Alarm_008","ok_actions":[],"record_id":"ah1655717086704DEnBrJ999","status":"alarm","type":"ALL_INSTANCE"}],"count":103}},"schema":{"$ref":"#/definitions/ListAlarmHistoriesResp"}},"400":{"description":"参数校验失败","schema":{"$ref":"#/definitions/GoAPIErrorResponseV2"}},"500":{"description":"系统内部错误","schema":{"$ref":"#/definitions/GoAPIErrorResponseV2"}}},"summary":"查询告警记录列表","tags":["告警记录"],"x-constraint":"","x-first-open-time":"","x-hybridcloud":false,"x-is-registered":"Y","x-open-region-cloud":"hc,hk","x-request-examples-description-1":"查询告警名称为alarm-test01,且时间为2022-02-10T10:05:46+08:00的告警记录列表。","x-request-examples-url-1":"/v2/{project_id}/alarm-histories?limit=10&offset=0&from=2022-02-10T10:05:46+08:00&to=2022-02-10T12:05:46+08:00&alarm_name=alarm-test01","x-scope":"Commercial","x-source":"SelfDeveloped","x-support-sdk":"Y"}}},"product_short":"CES","region_id":"cn-north-4","schemes":["HTTPS"],"security_definitions":null,"summary":"查询告警记录列表","tags":"告警记录","uri":null,"version":"2.0"}