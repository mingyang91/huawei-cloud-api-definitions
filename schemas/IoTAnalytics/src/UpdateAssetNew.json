{"base_path":null,"components":null,"consumes":"","definitions":{"AggregateResponse":{"description":"聚合计算","properties":{"expression":{"$ref":"#/definitions/Expression","description":"聚合计算表达式定义"},"inputs":{"description":"输入参数","items":{"$ref":"#/definitions/InputResponse"},"maxItems":10,"type":"array"},"output_property":{"description":"输出属性名(不推荐使用,待废弃,使用outputs替代)","type":"string","x-maxLength":128},"outputs":{"items":{"$ref":"#/definitions/OutputResponse"},"type":"array"},"schedule":{"$ref":"#/definitions/DTSchedule"}},"x-annotations":"@JsonInclude(JsonInclude.Include.NON_NULL)","x-imports":"com.fasterxml.jackson.annotation.JsonInclude","x-java-class":"com.huawei.iot.dtvision.api.model.AggregateResponse"},"AnalysisRequest":{"description":"分析任务","properties":{"aggregate":{"$ref":"#/definitions/DTAggregateRequest"},"name":{"description":"分析任务名,必须是模型中已存在的","type":"string","x-maxLength":64},"stream":{"$ref":"#/definitions/DTStreamRequest"},"transform":{"$ref":"#/definitions/DTTransformRequest"}},"required":["name"],"x-annotations":"@JsonInclude(JsonInclude.Include.NON_NULL)","x-imports":"com.fasterxml.jackson.annotation.JsonInclude","x-java-class":"com.huawei.iot.dtvision.api.model.AnalysisRequest"},"AnalysisResponse":{"properties":{"aggregate":{"$ref":"#/definitions/AggregateResponse"},"analysis_id":{"description":"分析任务ID","type":"string"},"display_name":{"description":"分析任务显示名称","type":"string"},"name":{"description":"分析任务名称","type":"string"},"stream":{"$ref":"#/definitions/StreamResponse"},"transform":{"$ref":"#/definitions/TransformResponse"},"type":{"description":"分析任务类型,转换计算(transform)、聚合计算(aggregate)、流计算(stream)","type":"string"}},"x-annotations":"@JsonInclude(JsonInclude.Include.NON_NULL)","x-imports":"com.fasterxml.jackson.annotation.JsonInclude","x-java-class":"com.huawei.iot.dtvision.api.model.AnalysisResponse"},"AssetModRequest":{"example":{"analyses":[{"aggregate":{"inputs":[{"name":"string","property_reference":{"asset_id":"string"}}],"outputs":[{"name":"string","output_dynamic_asset_id":"string","output_static_asset_id":"string"}]},"name":"string","stream":{"inputs":[{"name":"string","property_reference":{"asset_id":"string"}}]},"transform":{"inputs":[{"name":"string","property_reference":{"asset_id":"string"}}],"outputs":[{"name":"string","output_dynamic_asset_id":"string","output_static_asset_id":"string"}]}}],"display_name":"string","name":"string","parent":"string","properties":[{"device_id":"string","name":"string","value":0}]},"properties":{"analyses":{"description":"分析任务集,最多50个","items":{"$ref":"#/definitions/AnalysisRequest"},"maxItems":50,"type":"array"},"display_name":{"description":"资产显示名称,修改资产时,\"\"代表配置为空、null或不携带代表不修改,正则:\"^[\\\\u4E00-\\\\u9FA5A-Za-z0-9_@#.-]{0,64}$\"","pattern":"^[\\u4E00-\\u9FA5A-Za-z0-9_@#.-]{0,64}$","type":"string","x-maxLength":64},"name":{"description":"资产名称,修改资产时,null或不携带代表不修改,正则:\"^[a-zA-Z][a-zA-Z0-9_-]{0,63}$\"","pattern":"^[a-zA-Z][a-zA-Z0-9_-]{0,63}$","type":"string","x-maxLength":64},"parent":{"description":"父资产ID,根资产的父资产ID为null,修改资产时,null或不携带代表不修改","type":"string","x-maxLength":128},"properties":{"description":"属性集,最多200个","items":{"$ref":"#/definitions/PropertyRequest"},"maxItems":200,"type":"array"}},"type":"object","x-java-class":"com.huawei.iot.dtvision.api.model.AssetModRequest"},"AssetResponse":{"properties":{"analyses":{"description":"分析任务集","items":{"$ref":"#/definitions/AnalysisResponse"},"type":"array"},"asset_id":{"description":"资产ID","type":"string"},"asset_model_id":{"description":"资产模型ID","type":"string"},"asset_model_name":{"description":"资产模型名称","type":"string"},"children":{"description":"子资产ID集","items":{"type":"string"},"type":"array"},"created_time":{"description":"创建时间,格式\"yyyy-MM-dd'T'HH:mm:ss'Z'\"","type":"string"},"display_name":{"description":"资产显示名称","type":"string"},"modified_time":{"description":"修改时间,格式\"yyyy-MM-dd'T'HH:mm:ss'Z'\"","type":"string"},"name":{"description":"资产名称","type":"string"},"parent":{"description":"父资产ID,根资产的父资产ID为null","type":"string"},"properties":{"description":"属性集","items":{"$ref":"#/definitions/PropertyResponse"},"type":"array"},"publish_state":{"description":"资产发布状态,发布中(PUBLISHING),发布完成(PUBLISHED);只能对草稿态(SKETCH)的根资产进行发布,也只有草稿态的根资产有此字段;如果根资产从未发布过则值为null","type":"string"},"published_time":{"description":"发布时间,只能对草稿态(SKETCH)的根资产进行发布,也只有草稿态的根资产有此字段;如果从未发布过则值为null;格式\"yyyy-MM-dd'T'HH:mm:ss'Z'\"","type":"string"},"root":{"description":"根资产ID","type":"string"},"state":{"description":"资产状态,正常状态(ACTIVE),异常状态(INACTIVE);只有草稿态(SKETCH)资产有此状态;资产处于异常状态的场景有:1、该资产存在未填写设备ID的测量数据类别的属性;2、该资产存在未填写静态值的静态配置类别的属性;3、该资产存在分析任务,该分析任务的输入参数存在属性引用类型为引用其他资产属性,且没有为该输入参数配置引用的其他资产的资产ID","type":"string"}},"type":"object","x-annotations":"@JsonInclude(JsonInclude.Include.NON_NULL)","x-imports":"com.fasterxml.jackson.annotation.JsonInclude","x-java-class":"com.huawei.iot.dtvision.api.model.AssetResponse"},"DTAggregateRequest":{"description":"聚合计算","properties":{"inputs":{"description":"输入参数,最多支持10个","items":{"$ref":"#/definitions/InputRequest"},"maxItems":10,"type":"array"},"outputs":{"items":{"$ref":"#/definitions/OutputRequest"},"type":"array"}},"x-java-class":"com.huawei.iot.dtvision.api.model.DTAggregateRequest"},"DTSchedule":{"description":"调度策略","properties":{"period":{"description":"调度周期,正则: \"1m|5m|15m|1h\",表示从每小时第0分0秒开始,每1m、5m、15m、1h调度","pattern":"1m|5m|15m|1h","type":"string"}},"required":["period"],"x-java-class":"com.huawei.iot.dtvision.api.model.DTSchedule"},"DTStreamRequest":{"description":"流计算","properties":{"inputs":{"description":"输入参数,最多支持10个","items":{"$ref":"#/definitions/InputRequest"},"maxItems":10,"type":"array"}},"required":["inputs"],"x-java-class":"com.huawei.iot.dtvision.api.model.DTStreamRequest"},"DTTransformRequest":{"description":"转换计算","properties":{"inputs":{"description":"输入参数,最多支持10个","items":{"$ref":"#/definitions/InputRequest"},"maxItems":10,"type":"array"},"outputs":{"items":{"$ref":"#/definitions/OutputRequest"},"type":"array"}},"x-java-class":"com.huawei.iot.dtvision.api.model.DTTransformRequest"},"DataSchema":{"description":"数据格式","properties":{"data_type":{"description":"数据类型,字符串(string)、整数(integer)、浮点数(double)、对象(object),系统支持的对象型存储大小为1MB,超过时不予存储","pattern":"string|integer|double|object","type":"string"},"max":{"description":"integer或double类型的最大值,当属性值超过范围时系统不予存储,integer时范围:-9223372036854775808 ~ 9223372036854775807;double时范围:-1.7976931348623157E308 ~ 1.7976931348623157E308","type":"number"},"max_length":{"description":"string类型的最大长度,当属性值超过范围时系统不予存储,范围:0 ~ 4096","format":"int32","type":"integer"},"min":{"description":"integer或double类型的的最小值,当属性值超过范围时系统不予存储,integer时范围:-9223372036854775808 ~ 9223372036854775807;double时范围:-1.7976931348623157E308 ~ 1.7976931348623157E308","type":"number"},"min_length":{"description":"string类型的最小长度,当属性值超过范围时系统不予存储,范围:0 ~ 4096","format":"int32","type":"integer"}},"required":["data_type"],"x-annotations":"@JsonInclude(JsonInclude.Include.NON_NULL)","x-imports":"com.fasterxml.jackson.annotation.JsonInclude","x-java-class":"com.huawei.iot.dtvision.api.model.DataSchema"},"Expression":{"allOf":[{"properties":{"time_range":{"description":"时间范围,调度时间往前的时间范围,比如1m表示调度时间往前1分钟到调度时间的时间范围,正则:\"1m|5m|15m|1h\"","pattern":"1m|5m|15m|1h","type":"string"}},"required":["time_range"],"type":"object","x-annotations":"@JsonInclude(JsonInclude.Include.NON_NULL)","x-imports":"com.fasterxml.jackson.annotation.JsonInclude"},{"$ref":"#/definitions/Formula"}],"description":"表达式","x-java-class":"com.huawei.iot.dtvision.api.model.Expression"},"Formula":{"description":"表达式","properties":{"formula":{"description":"公式,最多1024个字符(分析任务单输出场景,配合TransformModel或AggregateModel的output_property使用)","type":"string","x-maxLength":1024},"formulas":{"description":"带名称的公式","items":{"$ref":"#/definitions/NamedFormula"},"type":"array"}},"x-annotations":"@JsonInclude(JsonInclude.Include.NON_NULL)","x-imports":"com.fasterxml.jackson.annotation.JsonInclude","x-java-class":"com.huawei.iot.dtvision.api.model.Formula"},"InputRequest":{"properties":{"name":{"description":"参数名,正则: \"^[A-Za-z][A-Za-z_]{0,31}$\"","pattern":"^[A-Za-z][A-Za-z_]{0,31}$","type":"string","x-maxLength":32},"property_reference":{"$ref":"#/definitions/PropertyReferenceReq"}},"required":["name","property_reference"],"x-java-class":"com.huawei.iot.dtvision.api.model.InputRequest"},"InputResponse":{"properties":{"name":{"description":"参数名","type":"string"},"property_reference":{"$ref":"#/definitions/PropertyReferenceResponse"}},"x-java-class":"com.huawei.iot.dtvision.api.model.InputResponse"},"NamedFormula":{"description":"带名称的公式","properties":{"formula":{"description":"公式,最多1024个字符","type":"string","x-maxLength":1024},"name":{"description":"公式名称,不能和输入参数名重复,正则:\"^[A-Za-z][A-Za-z_]{0,31}$\"","pattern":"^[A-Za-z][A-Za-z_]{0,31}$","type":"string","x-maxLength":32}},"required":["name","formula"]},"OutputRequest":{"description":"输出配置请求","properties":{"name":{"description":"输出参数名称,formulas中定义的name","type":"string","x-maxLength":128},"output_dynamic_asset_id":{"description":"输出资产ID,填写公式动态生成资产ID,可根据入参获取资产ID,如:GetAssetId(\"assetmodelName1\",\"staticPropertyName1\",paramA);修改资产时,如果output_static_asset_id为null则表示置空","type":"string","x-maxLength":1024},"output_static_asset_id":{"description":"输出资产ID,填写模型中定义的输出模型对应的某资产ID;创建资产时,如果是输出到本资产的模型,且output_static_asset_id和output_dynamic_asset_id都未配置,则后台自动配置output_static_asset_id为本资产ID;修改资产时,如果output_static_asset_id为null则表示置空","type":"string","x-maxLength":128}},"required":["name"],"x-annotations":"@JsonInclude(JsonInclude.Include.NON_NULL)","x-imports":"com.fasterxml.jackson.annotation.JsonInclude"},"OutputResponse":{"allOf":[{"$ref":"#/definitions/OutputRequest"},{"properties":{"output_asset_model_id":{"description":"输出模型ID,如果输出到本模型可以不携带","type":"string","x-maxLength":128},"output_property":{"description":"输出属性名","type":"string","x-maxLength":128}},"type":"object"}],"description":"输出配置响应","x-annotations":"@JsonInclude(JsonInclude.Include.NON_NULL)","x-imports":"com.fasterxml.jackson.annotation.JsonInclude"},"PropertyReferenceModel":{"description":"属性引用","properties":{"asset_model_id":{"description":"引用属性所属的资产模型ID,该字段仅当type为“引用其他资产属性”或“引用子资产属性”时有效;使用导入模型和导出模型接口时,该字段无效","type":"string","x-maxLength":128},"asset_model_name":{"description":"引用属性所属的资产模型名称,请求中携带该字段时可以不携带asset_model_id字段","type":"string","x-maxLength":64},"property_name":{"description":"引用属性的名称","type":"string","x-maxLength":64},"type":{"description":"属性引用类型,引用本资产属性(this)、引用其他资产属性(single)、引用子资产属性(children)","pattern":"this|single|children","type":"string"}},"required":["type","property_name"],"x-annotations":"@JsonInclude(JsonInclude.Include.NON_NULL)","x-imports":"com.fasterxml.jackson.annotation.JsonInclude","x-java-class":"com.huawei.iot.dtvision.api.model.PropertyReferenceModel"},"PropertyReferenceReq":{"description":"属性引用","properties":{"asset_id":{"description":"引用的资产ID,只有single型参数才能填写,可填写null置空","type":"string","x-maxLength":128}},"x-java-class":"com.huawei.iot.dtvision.api.model.PropertyReferenceReq"},"PropertyReferenceResponse":{"allOf":[{"$ref":"#/definitions/PropertyReferenceModel"},{"properties":{"asset_id":{"description":"引用的资产ID,修改资产时携带null表示置空","type":"string"}},"type":"object","x-annotations":"@JsonInclude(JsonInclude.Include.NON_NULL)","x-imports":"com.fasterxml.jackson.annotation.JsonInclude","x-java-class":"com.huawei.iot.dtvision.api.model.PropertyReferenceResponse"}],"description":"属性引用"},"PropertyRequest":{"properties":{"device_id":{"description":"设备ID,只有measurement型属性可以填写","type":"string","x-maxLength":128},"name":{"description":"属性名称,必须是模型中已存在的","type":"string","x-maxLength":64},"value":{"description":"值,只有static型属性可以填写","type":"object"}},"required":["name"],"x-java-class":"com.huawei.iot.dtvision.api.model.PropertyRequest"},"PropertyResponse":{"properties":{"data_schema":{"$ref":"#/definitions/DataSchema","description":"属性数据格式定义"},"device_id":{"description":"设备ID","type":"string"},"display_name":{"description":"属性显示名称,正则:\"^[\\\\u4E00-\\\\u9FA5A-Za-z0-9_@#.-]{1,64}$\"","pattern":"^[\\u4E00-\\u9FA5A-Za-z0-9_@#.-]{1,64}$","type":"string","x-maxLength":64},"is_tag":{"description":"属性是否为标签。资产ID、标签属性、时间戳三者组成属性数据唯一键,两条唯一键相同性数据以覆盖方式存储;一个模型中只能配置三个属性为标签,标签配置后标签不能删除,配置标签性也不能删除;只有integer、double、string类型的属性可以被配置为标签。示例:\n资产ID asset1上依次上报如下六组数据: 资产ID 属性A(标签) 属性B    属性C 时间戳 asset1 valueA_1     valueB_1  valueC_1 T1 asset1 valueA_1     valueB_2  valueC_2 T2 asset1 valueA_2     valueB_3  valueC_3 T2 asset1 valueA_2     valueB_4  valueC_4 T2 asset1              valueB_5  valueC_5 T3 asset1              valueB_6  valueC_6 T3\n根据唯一键规则最终存储为如下四组数据: 资产ID 属性A(标签) 属性B    属性C 时间戳 asset1 valueA_1     valueB_1  valueC_1 T1 asset1 valueA_1     valueB_2  valueC_2 T2 asset1 valueA_2     valueB_4  valueC_4 T2 asset1              valueB_6  valueC_6 T3","type":"boolean"},"name":{"description":"属性名称,正则:\"^[a-zA-Z0-9_]{1,64}$\"","pattern":"^[a-zA-Z0-9_]{1,64}$","type":"string","x-maxLength":64},"property_id":{"description":"属性ID","type":"string"},"source_type":{"description":"属性类别,静态配置(static)、测量数据(measurement)、分析任务(analysis)","pattern":"static|measurement|analysis","type":"string"},"unit":{"description":"单位","type":"string","x-maxLength":64,"x-minLength":1},"value":{"description":"静态属性的值,如:1 1.1 \"value\" {\"name\":\"value\"}","type":"object"}},"required":["name","source_type","data_schema"],"type":"object","x-annotations":"@JsonInclude(JsonInclude.Include.NON_NULL)","x-imports":"com.fasterxml.jackson.annotation.JsonInclude","x-java-class":"com.huawei.iot.dtvision.api.model.PropertyResponse"},"StreamOutput":{"description":"流计算输出映射","properties":{"name":{"description":"输出参数名称,必须是接收数据类型为资产数据的实时分析作业中已定义的","type":"string","x-maxLength":128},"output_property":{"description":"输出属性名,必须是本模型分析任务类别的属性的属性名","type":"string","x-maxLength":128}},"required":["name","output_property"],"x-java-class":"com.huawei.iot.dtvision.api.model.StreamOutput"},"StreamResponse":{"description":"流计算","properties":{"inputs":{"description":"输入参数","items":{"$ref":"#/definitions/InputResponse"},"maxItems":10,"type":"array"},"job_id":{"description":"流计算任务ID","type":"string"},"outputs":{"description":"输出属性,最多支持10个","items":{"$ref":"#/definitions/StreamOutput"},"maxItems":10,"type":"array"}},"x-annotations":"@JsonInclude(JsonInclude.Include.NON_NULL)","x-imports":"com.fasterxml.jackson.annotation.JsonInclude","x-java-class":"com.huawei.iot.dtvision.api.model.StreamResponse"},"TransformResponse":{"description":"转换计算","properties":{"expression":{"$ref":"#/definitions/Formula","description":"转换计算表达式定义"},"inputs":{"description":"输入参数","items":{"$ref":"#/definitions/InputResponse"},"maxItems":10,"type":"array"},"output_property":{"description":"输出属性名(不推荐使用,待废弃,使用outputs替代)","type":"string","x-maxLength":128},"outputs":{"items":{"$ref":"#/definitions/OutputResponse"},"type":"array"}},"x-annotations":"@JsonInclude(JsonInclude.Include.NON_NULL)","x-imports":"com.fasterxml.jackson.annotation.JsonInclude","x-java-class":"com.huawei.iot.dtvision.api.model.TransformResponse"}},"description":null,"group_id":"cfd5b7ef8cbe41c8b49ff6f50523b75d","host":"iota.cn-north-4.myhuaweicloud.com","id":"0bdc34bf9c4c4816a58b9a7d181392ef","info_version":"v1","method":"put","name":"UpdateAssetNew","parameters":{},"paths":{"/v1/{project_id}/assets/{asset_id}":{"put":{"description":"修改资产","operationId":"UpdateAssetNew","parameters":[{"description":"项目ID","in":"path","name":"project_id","required":true,"type":"string","x-maxLength":128},{"description":"资产ID","in":"path","name":"asset_id","required":true,"type":"string","x-maxLength":256},{"description":"资产信息","in":"body","name":"asset_info","required":true,"schema":{"$ref":"#/definitions/AssetModRequest"}},{"description":"租户Token","in":"header","name":"X-Auth-Token","required":true,"type":"string","x-maxLength":65535}],"responses":{"200":{"description":"OK","examples":{"example":{"analyses":[{"aggregate":{"expression":{"formula":"string","formulas":[{"formula":"string","name":"string"}],"time_range":"1m|5m|15m|1h"},"inputs":[{"name":"string","property_reference":{"asset_id":"string","asset_model_id":"string","property_name":"string","type":"this|single|children"}}],"output_property":"string","outputs":[{"name":"string","output_asset_model_id":"string","output_dynamic_asset_id":"string","output_property":"string","output_static_asset_id":"string"}],"schedule":{"period":"1m|5m|15m|1h"}},"analysis_id":"string","display_name":"string","name":"string","stream":{"inputs":[{"name":"string","property_reference":{"asset_id":"string","asset_model_id":"string","property_name":"string","type":"this|single|children"}}],"job_id":"string","outputs":[{"name":"string","output_property":"string"}]},"transform":{"expression":{"formula":"string","formulas":[{"formula":"string","name":"string"}]},"inputs":[{"name":"string","property_reference":{"asset_id":"string","asset_model_id":"string","property_name":"string","type":"this|single|children"}}],"output_property":"string","outputs":[{"name":"string","output_asset_model_id":"string","output_dynamic_asset_id":"string","output_property":"string","output_static_asset_id":"string"}]},"type":"transform|aggregate|stream"}],"asset_id":"string","asset_model_id":"string","asset_model_name":"string","children":["string"],"created_time":"string","display_name":"string","modified_time":"string","name":"string","parent":"string","properties":[{"data_schema":{"data_type":"string","max":0,"max_length":0,"min":0,"min_length":0},"device_id":"string","display_name":"string","is_tag":true,"name":"string","property_id":"string","source_type":"static|measurement|analysis","unit":"string","value":0}],"publish_state":"PUBLISHING|PUBLISHED","published_time":"string","root":"string","state":"ACTIVE|INACTIVE"}},"schema":{"$ref":"#/definitions/AssetResponse"}},"400":{"description":"Bad Request","x-Error":["IoTA.99000010","IoTA.01010042"]},"401":{"description":"Unauthorized","x-Error":["IoTA.99000003"]},"403":{"description":"Forbidden","x-Error":["IoTA.99000007","IoTA.99000008","IoTA.99000009","IoTA.01010035","IoTA.01010204","IoTA.01010056","IoTA.99000012"]},"404":{"description":"Not Found","x-Error":["IoTA.01010023","IoTA.01010202","IoTA.01010201"]},"409":{"description":"Conflict","x-Error":["IoTA.99000011","IoTA.01010012","IoTA.01010203","IoTA.01010050","IoTA.01010054"]},"500":{"description":"Internal Server Error","x-Error":["IoTA.99999999"]}},"summary":"修改资产","tags":["AssetNew"],"x-externalAPI":"YES","x-iftype":"OpenAPI","x-open-for-CLOUD":"Y","x-open-for-HCS":"Y","x-returnType":"ResponseEntity<AssetResponse>","x-support-sdk":"Y"}}},"product_short":"IoTAnalytics","region_id":"cn-north-4","schemes":["HTTPS"],"security_definitions":null,"summary":"修改资产","tags":"资产","uri":null,"version":"2.0"}