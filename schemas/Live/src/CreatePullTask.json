{"base_path":"/","components":null,"consumes":"[\"application/json; charset=UTF-8\"]","definitions":{"CreatePullTaskResponseBody":{"properties":{"request_id":{"description":"请求id","example":"58684758-e92f-42db-a754-08e627b6d8dd","maxLength":64,"minLength":1,"type":"string"},"task_id":{"description":"任务id","example":"7864b3dc-e92f-42db-a754-08e627b6d8dd","maxLength":64,"minLength":1,"type":"string"}},"type":"object"},"LivePullStreamTask":{"properties":{"app_name":{"description":"推流app","example":"live","maxLength":128,"minLength":0,"type":"string"},"backup_source_type":{"description":"备源的类型\n- PullLivePushLive:直播\n注意事项:\n1. 仅当source_type为PullVodPushLive生效。\n2. 主直播源拉流中断时,自动使用备源进行拉流。","example":"PullLivePushLive","maxLength":2048,"minLength":0,"type":"string"},"backup_source_urls":{"description":"备源URL,仅当source_type为PullVodPushLive生效。","example":["rtmp://play.example.huawei.com/live/stream1_bak"],"items":{"maxLength":2048,"minLength":1,"type":"string"},"maxItems":30,"minItems":0,"type":"array"},"callback_events":{"description":"要回调的事件列表(不填则回调全部)\n- TaskStart:任务启动回调\n- TaskExit:任务停止回调\n- VodSourceFileStart:仅PullVodPushLive可用,文件启动切换\n- VodSourceFileFinish:仅PullVodPushLive可用,文件播放完毕\n- ResetTaskConfig:仅PullVodPushLive可用,任务更新\n- TaskAlarm:用于告警事件通知","example":["TaskStart","VodSourceFileStart","VodSourceFileFinish","ResetTaskConfig","TaskExit","TaskAlarm"],"items":{"enum":["TaskStart","VodSourceFileStart","VodSourceFileFinish","ResetTaskConfig","TaskExit","TaskAlarm"],"type":"string"},"maxItems":6,"minItems":0,"type":"array"},"callback_url":{"description":"回调接收地址","example":"callback.example.com","maxLength":2048,"minLength":0,"type":"string"},"destination_url":{"description":"完整的目标URL。\n如果指定此参数,domain、app_name和stream_name需要传入空字符串或不传。","example":"rtmp://publish.example.com/live/test","maxLength":2048,"minLength":0,"type":"string"},"domain":{"description":"推流域名","example":"publish.example.huawei.com","maxLength":255,"minLength":0,"type":"string"},"end_time":{"description":"任务结束时间,时间格式:\n\"2006-01-02T15:04:05Z\"\n必须大于开始时间,至多为开始时间+7天","example":"2018-05-19T21:00:00Z","format":"date-time","type":"string"},"push_args":{"description":"推流参数","example":"arg1=value1","maxLength":2048,"minLength":0,"type":"string"},"region":{"description":"任务执行区域,如果指定推流域名,则region需要与推流域名直播源站一致,缺省为租户归属region","example":"cn-north-4","maxLength":64,"minLength":1,"type":"string"},"source_type":{"description":"拉流源类型\nPullLivePushLive:拉转推(拉直播推直播)\nPullVodPushLive:轮播(拉点播推直播)","enum":["PullLivePushLive","PullVodPushLive"],"example":"PullLivePushLive","type":"string"},"source_urls":{"description":"拉流源URL\n当 source_type 为 PullLivePushLive 时,只能填写一个URL\n当 source_type 为 PullVodPushLive 时,可以指定多个轮播源文件URL","example":["rtmp://play.example.huawei.com/live/stream1"],"items":{"maxLength":2048,"minLength":1,"type":"string"},"maxItems":30,"minItems":1,"type":"array"},"start_time":{"description":"任务启动时间,时间格式:\n\"2006-01-02T15:04:05Z\"\n必须小于结束时间,缺省为当前时间","example":"2018-05-19T18:00:00Z","format":"date-time","type":"string"},"stream_name":{"description":"推流流名","example":"test","maxLength":512,"minLength":0,"type":"string"},"vod_loop_time":{"description":"轮播播放次数,仅当source_type为PullVodPushLive生效。缺省值”-1”。-1:无限轮播,以结束时间为准;N:按文件列表播放N轮,以播放完成和结束时间先到的为准。不传、为空(\"\")时按缺省值生效","example":-1,"maxLength":10,"minLength":0,"type":"string"},"vod_refresh_type":{"description":"轮播文件播放形式,仅当source_type为PullVodPushLive生效。缺省值immediate_new_source\nimmediate_new_source:立即播放新的文件源\ncontinue_from_file_start:从上次断流URL文件重新播放(更新任务时有效)\ncontinue_from_break_point:从上次断流URL文件断流位置重新播放(更新任务时有效)","enum":["immediate_new_source","continue_from_file_start","continue_from_break_point"],"example":"immediate_new_source","maxLength":64,"minLength":1,"type":"string"},"vod_start_video_index":{"description":"指定播放文件的下标,仅当source_type为PullVodPushLive生效。缺省值 0,从0开始表示第一个文件,最大值 len(source_urls)-1","example":0,"maximum":2147483647,"minimum":0,"type":"integer"},"vod_start_video_time":{"description":"缺省值 0,指定从上述指定文件的第几秒开始播放,仅当source_type为PullVodPushLive生效","example":0,"maximum":2147483647,"minimum":0,"type":"integer"}},"required":["source_type","source_urls"],"type":"object"},"PullPushErrorResponse":{"properties":{"error_code":{"description":"错误码","maxLength":32,"minLength":1,"type":"string"},"error_msg":{"description":"错误描述","maxLength":1024,"minLength":0,"type":"string"},"request_id":{"description":"请求id","example":"58684758-e92f-42db-a754-08e627b6d8dd","maxLength":64,"minLength":1,"type":"string"}},"type":"object"}},"description":null,"group_id":"f01a6cf256d84c16985bc98f70ef068d","host":"live.cn-north-4.myhuaweicloud.com","id":"4d887050ea1c4d3bb1f4d1fd2152db7b","info_version":"v1","method":"post","name":"CreatePullTask","parameters":{"X-Auth-Token":{"description":"用户Token,使用Token鉴权方式时必填。通过调用IAM服务获取用户Token接口获取(响应消息头中X-Subject-Token的值)。","in":"header","maxLength":256,"minLength":1,"name":"X-Auth-Token","required":false,"type":"string"},"project_id":{"description":"项目ID,获取方法请参考[获取项目ID](live_03_0023.xml)。","in":"path","name":"project_id","required":true,"type":"string","x-example":"70b76xxxxxx34253880af501cdxxxxxx"}},"paths":{"/v1/{project_id}/pull/stream/task":{"post":{"description":"根据租户指定的拉流源以及拉流任务信息创建直播拉流转推任务","operationId":"CreatePullTask","parameters":[{"$ref":"#/parameters/project_id"},{"description":"拉流转推任务配置信息","in":"body","name":"CreatePullTaskRequestBody","required":true,"schema":{"$ref":"#/definitions/LivePullStreamTask"}},{"$ref":"#/parameters/X-Auth-Token"}],"responses":{"200":{"description":"创建拉流转推任务成功","examples":{"application/json":{"request_id":"85968475-e92f-42db-a754-08e627b6d8dd","task_id":"7864b3dc-e92f-42db-a754-08e627b6d8dd"}},"schema":{"$ref":"#/definitions/CreatePullTaskResponseBody"}},"400":{"description":"创建拉流转推任务失败","examples":{"application/json":{"error_code":"LIVE.100011001","error_msg":"Request Illegal","request_id":"85968475-e92f-42db-a754-08e627b6d8dd"}},"schema":{"$ref":"#/definitions/PullPushErrorResponse"}}},"summary":"创建直播拉流转推任务","tags":["拉流管理"],"x-api-type":"open-api","x-apiexplorer-hide":"N","x-external-api":true,"x-is-registered":"Y","x-open-region-cloud":"hc,hk","x-request-examples-1":{"app_name":"live","backup_source_type":"PullLivePushLive","backup_source_urls":["rtmp://play.example.huawei.com/live/stream1_bak"],"callback_events":["TaskStart","TaskExit","TaskAlarm"],"callback_url":"callback.example.com","domain":"publish.example.huawei.com","end_time":"2018-05-19T21:00:00Z","push_args":"arg1=value1","region":"cn-north-4","source_type":"PullLivePushLive","source_urls":["rtmp://play.example.huawei.com/live/stream1"],"start_time":"2018-05-19T18:00:00Z","stream_name":"test"},"x-request-examples-text-1":{"app_name":"live","backup_source_type":"PullLivePushLive","backup_source_urls":["rtmp://play.example.huawei.com/live/stream1_bak"],"callback_events":["TaskStart","TaskExit","TaskAlarm"],"callback_url":"callback.example.com","domain":"publish.example.huawei.com","end_time":"2018-05-19T21:00:00Z","push_args":"arg1=value1","region":"cn-north-4","source_type":"PullLivePushLive","source_urls":["rtmp://play.example.huawei.com/live/stream1"],"start_time":"2018-05-19T18:00:00Z","stream_name":"test"},"x-request-examples-url-1":"POST https://{endpoint}/v1/{project_id}/pull/stream/task","x-support-sdk":"Y"}}},"product_short":"Live","region_id":"cn-north-4","schemes":["HTTPS"],"security_definitions":null,"summary":"创建直播拉流转推任务","tags":"拉流管理","uri":null,"version":"2.0"}