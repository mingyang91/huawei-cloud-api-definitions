{"base_path":"/","components":null,"consumes":"[\"application/json; charset=UTF-8\"]","definitions":{"DashPackageItem":{"description":"DASH频道出流信息","properties":{"ad_marker":{"description":"广告标识。DASH取值:\"xml+bin\"","enum":["xml+bin","xml"],"type":"string"},"ads":{"description":"广告配置","type":"object"},"allow_all_ip_access":{"default":false,"description":"是否放通所有的IP访问,默认:false\ntrue:允许所有的IP地址访问,ip_whitelist配置不生效\nfalse:不允许所有的IP地址访问,ip_whitelist生效,仅在ip_whitelist配置的ip地址才能访问","type":"boolean"},"cdn_identifier_header":{"$ref":"#/definitions/HttpHeader","description":"HttpHeader CDN认证头域"},"enable_access":{"default":false,"description":"当频道mode是ONLY_OS类型时,允许本输出可以直接从源站拉流,默认:false\ntrue:允许output访问\nfalse:禁止output访问","type":"boolean"},"encryption":{"$ref":"#/definitions/Encryption","description":"加密信息"},"ext_args":{"description":"其他额外参数","type":"object"},"ip_whitelist":{"description":"当频道类型mode是ONLY_OS类型时,允许直接从源站拉流的IP白名单","maxLength":2048,"minLength":0,"type":"string"},"manifest_name":{"default":"index","description":"output的索引文件名字\n默认:index\n长度:0-128\n字符集:大小写字母、数字、\"-\"、\".\"、\"_\",不能有/路径","maxLength":128,"minLength":0,"type":"string"},"min_buffer_time":{"description":"最小缓冲时间。单位:秒。取值范围:[1 - 120]","format":"int32","maximum":120,"minimum":1,"type":"integer"},"minimum_update_period":{"description":"索引最短更新周期。单位:秒。取值范围:[1 - 120]","format":"int32","maximum":120,"minimum":1,"type":"integer"},"origin_domain_master":{"description":"源站分发域名-主region\n跟CreateOttChannelInfoReq.region一致\n满足正则:^(\\[a-zA-Z0-9]([a-zA-Z0-9\\-]{0,61}[a-zA-Z0-9])?\\.){2,}[a-zA-Z]{2,16}$\n最大长度255","maxLength":255,"minLength":0,"type":"string"},"origin_domain_slave":{"description":"源站分发域名-备region\n满足正则:^(\\[a-zA-Z0-9]([a-zA-Z0-9\\-]{0,61}[a-zA-Z0-9])?\\.){2,}[a-zA-Z]{2,16}$\n最大长度255","maxLength":255,"minLength":0,"type":"string"},"playlist_window_seconds":{"description":"频道直播返回分片的窗口长度,为频道输出分片的时长乘以数量后得到的值。实际返回的分片数不小于3个。\n\n单位:秒。取值范围:0 - 86400(24小时转化成秒后的取值)","maximum":86400,"minimum":0,"type":"integer"},"request_args":{"$ref":"#/definitions/PackageRequestArgs","description":"播放相关配置"},"segment_duration_seconds":{"description":"频道输出分片的时长,为必选项\n\n单位:秒。取值范围:1-10\n> 修改分片时长会影响已录制内容的时移和回看服务,请谨慎修改!","maximum":10,"minimum":1,"type":"integer"},"slave_url":{"description":"客户自定义的拉流地址,包括方法、域名、路径","maxLength":1024,"minLength":0,"type":"string"},"stream_selection":{"description":"从全量流中过滤出一个码率在[min, max]区间的流。如果不需要码率过滤可不选。","items":{"$ref":"#/definitions/StreamSelectionItem"},"maxItems":24,"minItems":1,"type":"array"},"suggested_presentation_delay":{"description":"建议播放延迟。单位:秒。取值范围:[1 - 120]","format":"int32","maximum":120,"minimum":1,"type":"integer"},"url":{"description":"客户自定义的拉流地址,包括方法、域名、路径","example":"your.pull.domain.com/ott/test/index.mpd","maxLength":1024,"minLength":1,"type":"string"}},"required":["segment_duration_seconds"],"type":"object"},"Encryption":{"description":"加密信息","properties":{"encryption_method":{"default":"SAMPLE-AES","description":"加密方式。\n\n请注意:目前为保留字段,不支持配置。","enum":["SAMPLE-AES","AES-128"],"maxLength":12,"minLength":0,"type":"string"},"http_headers":{"description":"需要添加在drm请求头中的鉴权信息。最多支持配置5个。\n\n仅direct_http请求模式支持配置http_headers。","items":{"$ref":"#/definitions/HttpHeader"},"type":"array"},"key_rotation_interval_seconds":{"description":"密钥缓存时间。如果密钥不变,默认缓存七天。\n\n请注意:目前为保留字段,不支持配置。","format":"int32","maximum":604800,"minimum":0,"type":"integer"},"level":{"default":"content","description":"取值如下:\n- content:一个频道对应一个密钥\n- profile:一个码率对应一个密钥\n\n默认值:content","enum":["content","profile"],"maxLength":12,"minLength":0,"type":"string"},"request_mode":{"description":"请求模式。\n\n取值如下:\n* direct_http:HTTP(S)直接访问DRM。\n* functiongraph_proxy:FunctionGraph代理访问DRM。","enum":["direct_http","functiongraph_proxy"],"type":"string"},"resource_id":{"description":"客户生成的DRM内容ID","maxLength":128,"minLength":1,"type":"string"},"speke_version":{"description":"drm speke 版本号 当前只支持1.0","enum":["1.0"],"example":1.0,"type":"string"},"system_ids":{"description":"system_id枚举值。\n\n取值如下:\n* HLS:FairPlay\n* DASH:Widevine、PlayReady\n* MSS:PlayReady","enum":["Widevine","PlayReady","FairPlay"],"items":{"enum":["Widevine","PlayReady","FairPlay"],"type":"string"},"maxItems":3,"minItems":1,"type":"array"},"url":{"description":"获取密钥的DRM地址","maxLength":2048,"minLength":1,"type":"string"},"urn":{"description":"functiongraph_proxy请求模式需要提供functiongraph的urn。","maxLength":512,"minLength":1,"type":"string"}},"required":["resource_id","system_ids","url","speke_version","request_mode"],"type":"object"},"EndPoints":{"description":"频道出流信息","items":{"$ref":"#/definitions/EndpointItem"},"type":"array"},"EndpointItem":{"description":"拉流打包信息","properties":{"dash_package":{"description":"DASH打包信息","items":{"$ref":"#/definitions/DashPackageItem"},"type":"array"},"hls_package":{"description":"HLS打包信息","items":{"$ref":"#/definitions/HlsPackageItem"},"type":"array"},"mss_package":{"description":"MSS打包信息","items":{"$ref":"#/definitions/MssPackageItem"},"type":"array"}},"type":"object"},"ErrorRsp":{"description":"失败时返回的错误对象","properties":{"app_name":{"description":"组名或应用名,为必填项","maxLength":255,"minLength":1,"type":"string"},"domain":{"description":"推流域名","maxLength":255,"minLength":1,"type":"string"},"id":{"description":"频道ID。频道唯一标识,为必填项","maxLength":255,"minLength":1,"type":"string"},"result_code":{"description":"错误码","maxLength":3,"minLength":3,"type":"string"},"result_msg":{"description":"错误描述","maxLength":255,"minLength":1,"type":"string"}},"required":["result_code","result_msg"]},"HlsPackageItem":{"description":"HLS频道出流信息","properties":{"ad_marker":{"description":"广告标识。\n\nHLS取值:[\"ENHANCED_SCTE35\"]。","items":{"type":"string"},"maxItems":10,"minItems":0,"type":"array"},"ads":{"description":"广告配置","type":"object"},"allow_all_ip_access":{"default":false,"description":"是否放通所有的IP访问,默认:false\ntrue:允许所有的IP地址访问,ip_whitelist配置不生效\nfalse:不允许所有的IP地址访问,ip_whitelist生效,仅在ip_whitelist配置的ip地址才能访问","type":"boolean"},"cdn_identifier_header":{"$ref":"#/definitions/HttpHeader","description":"HttpHeader CDN认证头域"},"enable_access":{"default":false,"description":"当频道mode是ONLY_OS类型时,允许本输出可以直接从源站拉流,默认:false\ntrue:允许output访问\nfalse:禁止output访问","type":"boolean"},"encryption":{"$ref":"#/definitions/Encryption","description":"加密信息"},"ext_args":{"description":"其他额外参数","type":"object"},"hls_version":{"description":"HLS版本号","maxLength":10,"minLength":0,"type":"string"},"ip_whitelist":{"description":"当频道类型mode是ONLY_OS类型时,允许直接从源站拉流的IP白名单","maxLength":2048,"minLength":0,"type":"string"},"manifest_name":{"default":"index","description":"output的索引文件名字\n默认:index\n长度:0-128\n字符集:大小写字母、数字、\"-\"、\".\"、\"_\",不能有/路径","maxLength":128,"minLength":0,"type":"string"},"origin_domain_master":{"description":"源站分发域名-主region\n跟CreateOttChannelInfoReq.region一致\n满足正则:^(\\[a-zA-Z0-9]([a-zA-Z0-9\\-]{0,61}[a-zA-Z0-9])?\\.){2,}[a-zA-Z]{2,16}$\n最大长度255","maxLength":255,"minLength":0,"type":"string"},"origin_domain_slave":{"description":"源站分发域名-备region\n满足正则:^(\\[a-zA-Z0-9]([a-zA-Z0-9\\-]{0,61}[a-zA-Z0-9])?\\.){2,}[a-zA-Z]{2,16}$\n最大长度255","maxLength":255,"minLength":0,"type":"string"},"playlist_window_seconds":{"description":"频道直播返回分片的窗口长度,为频道输出分片的时长乘以数量后得到的值。实际返回的分片数不小于3个。\n\n单位:秒。取值范围:0 - 86400(24小时转化成秒后的取值)","maximum":86400,"minimum":0,"type":"integer"},"request_args":{"$ref":"#/definitions/PackageRequestArgs","description":"播放相关配置"},"segment_duration_seconds":{"description":"频道输出分片的时长,为必选项\n\n单位:秒。取值范围:1-10\n> 修改分片时长会影响已录制内容的时移和回看服务,请谨慎修改!","maximum":10,"minimum":1,"type":"integer"},"slave_url":{"description":"客户自定义的拉流地址,包括方法、域名、路径","maxLength":1024,"minLength":0,"type":"string"},"stream_selection":{"description":"从全量流中过滤出一个码率在[min, max]区间的流。如果不需要码率过滤可不选。","items":{"$ref":"#/definitions/StreamSelectionItem","description":"从全量流中过滤出一个码率在[min, max]区间的流。如果不需要码率过滤可不选。"},"maxItems":24,"minItems":1,"type":"array"},"url":{"description":"客户自定义的拉流地址,包括方法、域名、路径","example":"your.pull.domain.com/ott/test/index.m3u8","maxLength":1024,"minLength":1,"type":"string"}},"required":["segment_duration_seconds"],"type":"object"},"HttpHeader":{"description":"drm加密信息,添加在请求头中的鉴权信息","properties":{"key":{"description":"请求头中key字段名","maxLength":128,"minLength":1,"type":"string"},"value":{"description":"请求头中key对应的value值","maxLength":8000,"minLength":1,"type":"string"}},"required":["key","value"],"type":"object"},"LiveRequestArgs":{"description":"直播相关配置参数","properties":{"delay":{"description":"时延字段","maxLength":20,"minLength":0,"type":"string"},"unit":{"description":"单位","maxLength":20,"minLength":0,"type":"string"}},"type":"object"},"ModifyOttChannelEndPointsReq":{"description":"OTT频道修改打包消息体","properties":{"app_name":{"description":"组名或应用名","example":"live","maxLength":64,"minLength":1,"type":"string"},"domain":{"description":"频道推流域名","example":"www.huaweiott.pushdomain.com","maxLength":255,"minLength":1,"type":"string"},"endpoints":{"$ref":"#/definitions/EndPoints","description":"频道出流信息"},"id":{"description":"频道ID。频道唯一标识,为必填项","example":"channelId","maxLength":512,"minLength":2,"type":"string"}},"required":["domain","app_name","id"]},"MssPackageItem":{"description":"MSS频道出流信息","properties":{"allow_all_ip_access":{"default":false,"description":"是否放通所有的IP访问,默认:false\ntrue:允许所有的IP地址访问,ip_whitelist配置不生效\nfalse:不允许所有的IP地址访问,ip_whitelist生效,仅在ip_whitelist配置的ip地址才能访问","type":"boolean"},"cdn_identifier_header":{"$ref":"#/definitions/HttpHeader","description":"HttpHeader CDN认证头域"},"delay_segment":{"description":"延播时长,单位秒","format":"int32","maximum":10,"minimum":1,"type":"integer"},"enable_access":{"default":false,"description":"当频道mode是ONLY_OS类型时,允许本输出可以直接从源站拉流,默认:false\ntrue:允许output访问\nfalse:禁止output访问","type":"boolean"},"encryption":{"$ref":"#/definitions/Encryption","description":"加密信息"},"ext_args":{"description":"其他额外参数","type":"object"},"ip_whitelist":{"description":"当频道类型mode是ONLY_OS类型时,允许直接从源站拉流的IP白名单","maxLength":2048,"minLength":0,"type":"string"},"manifest_name":{"default":"index","description":"output的索引文件名字\n默认:index\n长度:0-128\n字符集:大小写字母、数字、\"-\"、\".\"、\"_\",不能有/路径","maxLength":128,"minLength":0,"type":"string"},"origin_domain_master":{"description":"源站分发域名-主region\n跟CreateOttChannelInfoReq.region一致\n满足正则:^(\\[a-zA-Z0-9]([a-zA-Z0-9\\-]{0,61}[a-zA-Z0-9])?\\.){2,}[a-zA-Z]{2,16}$\n最大长度255","maxLength":255,"minLength":0,"type":"string"},"origin_domain_slave":{"description":"源站分发域名-备region\n满足正则:^(\\[a-zA-Z0-9]([a-zA-Z0-9\\-]{0,61}[a-zA-Z0-9])?\\.){2,}[a-zA-Z]{2,16}$\n最大长度255","maxLength":255,"minLength":0,"type":"string"},"playlist_window_seconds":{"description":"频道直播返回分片的窗口长度,为频道输出分片的时长乘以数量后得到的值。实际返回的分片数不小于3个。\n\n单位:秒。取值范围:0 - 86400(24小时转化成秒后的取值)","maximum":86400,"minimum":0,"type":"integer"},"request_args":{"$ref":"#/definitions/PackageRequestArgs","description":"播放相关配置"},"segment_duration_seconds":{"description":"频道输出分片的时长,为必选项\n\n单位:秒。取值范围:1-10\n> 修改分片时长会影响已录制内容的时移和回看服务,请谨慎修改!","maximum":10,"minimum":1,"type":"integer"},"slave_url":{"description":"客户自定义的拉流地址,包括方法、域名、路径","maxLength":1024,"minLength":0,"type":"string"},"stream_selection":{"description":"从全量流中过滤出一个码率在[min, max]区间的流。如果不需要码率过滤可不选。","items":{"$ref":"#/definitions/StreamSelectionItem"},"maxItems":24,"minItems":1,"type":"array"},"url":{"description":"客户自定义的拉流地址,包括方法、域名、路径","example":"your.pull.domain.com/ott/test.manifest","maxLength":1024,"minLength":1,"type":"string"}},"required":["segment_duration_seconds"],"type":"object"},"PackageRequestArgs":{"properties":{"live":{"description":"直播播放相关配置","items":{"$ref":"#/definitions/LiveRequestArgs"},"maxItems":20,"minItems":0,"type":"array"},"record":{"description":"录制播放相关配置","items":{"$ref":"#/definitions/RecordRequestArgs"},"maxItems":12,"minItems":0,"type":"array"},"timeshift":{"description":"时移播放相关配置","items":{"$ref":"#/definitions/TimeshiftRequestArgs"},"maxItems":12,"minItems":0,"type":"array"}},"type":"object"},"RecordRequestArgs":{"description":"录制相关配置参数","properties":{"end_time":{"description":"结束时间","maxLength":20,"minLength":0,"type":"string"},"format":{"description":"格式","maxLength":20,"minLength":0,"type":"string"},"start_time":{"description":"开始时间","maxLength":20,"minLength":0,"type":"string"},"unit":{"description":"单位","maxLength":20,"minLength":0,"type":"string"}},"type":"object"},"SourceRsp":{"description":"RTMP推流地址。只有频道入流协议为RTMP_PUSH时,会返回RTMP推流地址","properties":{"bitrate":{"description":"码率。\n\n单位:bps。取值范围:(0,104,857,600](100Mbps)","example":104857600,"format":"int32","maximum":104857600,"minimum":0,"type":"integer"},"enable_snapshot":{"description":"描述是否使用该流做截图","example":false,"type":"boolean"},"height":{"description":"分辨率对应高的值。取值范围:0 - 2160(4K)","example":2160,"format":"int32","maximum":2160,"minimum":0,"type":"integer"},"url":{"description":"RTMP推流地址","example":"string","maxLength":1024,"minLength":1,"type":"string"},"width":{"description":"分辨率对应宽的值。取值范围:0 - 4096(4K)","example":4096,"format":"int32","maximum":4096,"minimum":0,"type":"integer"}},"type":"object"},"StreamSelectionItem":{"description":"从全量流中过滤出一个码率在[min, max]区间的流。如果不需要码率过滤可不选。","properties":{"key":{"description":"拉流URL中用于码率过滤的参数","example":"your.pull.domain.com/ott/test.manifest","maxLength":1024,"minLength":1,"type":"string"},"max_bandwidth":{"description":"最大码率,单位:bps\n\n取值范围:0 - 104,857,600(100Mbps)","type":"integer"},"min_bandwidth":{"description":"最小码率,单位:bps\n\n取值范围:0 - 104,857,600(100Mbps)","format":"int32","type":"integer"}},"type":"object"},"SuccessRsp":{"description":"创建成功响应","properties":{"app_name":{"description":"组名或应用名,为必填项","maxLength":255,"minLength":1,"type":"string"},"domain":{"description":"推流域名","maxLength":255,"minLength":1,"type":"string"},"id":{"description":"频道ID。频道唯一标识,为必填项","maxLength":255,"minLength":1,"type":"string"},"result_code":{"description":"错误码","maxLength":3,"minLength":3,"type":"string"},"result_msg":{"description":"错误描述","maxLength":255,"minLength":1,"type":"string"},"sources":{"description":"推流URL列表。创建频道时,只有入流协议为RTMP_PUSH时,会返回推流URL列表","items":{"$ref":"#/definitions/SourceRsp"},"maxItems":12,"minItems":1,"type":"array"}},"type":"object"},"TimeshiftRequestArgs":{"description":"时移相关配置参数","properties":{"back_time":{"description":"时移时长字段名","maxLength":20,"minLength":0,"type":"string"},"unit":{"description":"单位","maxLength":20,"minLength":0,"type":"string"}},"type":"object"}},"description":null,"group_id":"f01a6cf256d84c16985bc98f70ef068d","host":"live.cn-north-4.myhuaweicloud.com","id":"1f318ea5032e4607836859988da01c16","info_version":"v1","method":"put","name":"ModifyOttChannelInfoEndPoints","parameters":{},"paths":{"/v1/{project_id}/ott/channels/endpoints":{"put":{"description":"修改频道打包信息。","operationId":"ModifyOttChannelInfoEndPoints","parameters":[{"description":"用户Token,使用Token鉴权方式时必选。通过调用IAM服务获取用户Token接口获取(响应消息头中X-Subject-Token的值)。","in":"header","maxLength":256,"minLength":1,"name":"X-Auth-Token","required":true,"type":"string","x-example":"MIIDkgYJKoZIhvcNAQcCoIIDgzCCXXXXX..."},{"description":"服务鉴权Token,服务开启鉴权,必须携带Access-Control-Allow-Internal访问服务。","in":"header","maxLength":2048,"minLength":1,"name":"Access-Control-Allow-Internal","required":false,"type":"string"},{"description":"服务鉴权Token,服务开启鉴权,必须携带Access-Control-Allow-External访问服务。","in":"header","maxLength":2048,"minLength":1,"name":"Access-Control-Allow-External","required":false,"type":"string"},{"description":"项目ID,获取方法请参考[获取项目ID](live_26_0018.xml)。","in":"path","maxLength":64,"minLength":1,"name":"project_id","required":true,"type":"string","x-example":"70b76xxxxxx34253880af501cdxxxxxx"},{"description":"ModifyOttChannelInfoEndPointsRequestBody","in":"body","name":"ModifyOttChannelInfoEndPointsRequestBody","required":true,"schema":{"$ref":"#/definitions/ModifyOttChannelEndPointsReq"}}],"produces":["application/json"],"responses":{"200":{"description":"Demo Information","examples":{"application/json":{"app_name":"ott","domain":"push.testott.hls.com","id":"test","result_code":"LIVE.100000000","result_msg":"SUCCESS"}},"schema":{"$ref":"#/definitions/SuccessRsp"}},"400":{"description":"Error response","examples":{"application/json":{"app_name":"ott","domain":"push.testott.hls.com","id":"","result_code":"LIVE.100011001","result_msg":"param check failed"}},"schema":{"$ref":"#/definitions/ErrorRsp"}}},"summary":"修改频道打包信息","tags":["OTT频道管理"],"x-is-registered":"Y","x-request-examples-1":{"app_name":"ott","domain":"push.testott.hls.com","endpoints":[{"dash_package":[{"playlist_window_seconds":3600,"segment_duration_seconds":4,"stream_selection":[{"key":"bitrate=900000-1800000","max_bandwidth":1800000,"min_bandwidth":900000}],"url":"pull.testott.hls.com/ott/test/index.mpd"}],"hls_package":[{"hls_version":"1","playlist_window_seconds":3600,"segment_duration_seconds":4,"stream_selection":[{"key":"sss","max_bandwidth":1000,"min_bandwidth":100}],"url":"pull.testott.hls.com/ott/test/index.m3u8"}],"mss_package":[{"playlist_window_seconds":3600,"segment_duration_seconds":4,"stream_selection":[{"key":"bitrate=900000-1800000","max_bandwidth":1800000,"min_bandwidth":900000}],"url":"pull.testott.hls.com/ott/channel/manifest"}]}],"id":"test"},"x-request-examples-text-1":{"app_name":"ott","domain":"push.testott.hls.com","endpoints":[{"dash_package":[{"playlist_window_seconds":3600,"segment_duration_seconds":4,"stream_selection":[{"key":"bitrate=900000-1800000","max_bandwidth":1800000,"min_bandwidth":900000}],"url":"pull.testott.hls.com/ott/test/index.mpd"}],"hls_package":[{"hls_version":"1","playlist_window_seconds":3600,"segment_duration_seconds":4,"stream_selection":[{"key":"sss","max_bandwidth":1000,"min_bandwidth":100}],"url":"pull.testott.hls.com/ott/test/index.m3u8"}],"mss_package":[{"playlist_window_seconds":3600,"segment_duration_seconds":4,"stream_selection":[{"key":"bitrate=900000-1800000","max_bandwidth":1800000,"min_bandwidth":900000}],"url":"pull.testott.hls.com/ott/channel/manifest"}]}],"id":"test"},"x-request-examples-url-1":"PUT https://{endpoint}/v1/{project_id}/ott/channels/endpoints","x-support-sdk":"Y"}}},"product_short":"Live","region_id":"cn-north-4","schemes":["HTTPS"],"security_definitions":null,"summary":"修改频道打包信息","tags":"OTT频道管理","uri":null,"version":"2.0"}