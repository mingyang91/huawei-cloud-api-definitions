{"base_path":"/","components":null,"consumes":"[\"application/json; charset=UTF-8\"]","definitions":{"AudioSelectorHlsSelection":{"description":"hls音频选择器","properties":{"group_id":{"description":"hls音频选择器gid","type":"string"},"name":{"description":"hls音频选择器名","maxLength":255,"minLength":1,"type":"string"}},"required":["name","group_id"],"type":"object"},"AudioSelectorLangSelection":{"description":"音频选择器语言设置","properties":{"language_code":{"description":"语言简称,输入2或3个小写字母的语言代码。","maxLength":3,"minLength":2,"type":"string"},"language_selection_policy":{"description":"语言输出策略。\n\n取值如下:\n- LOOSE:宽松匹配,示例“eng”会优先匹配源流中语言为English的音轨,如果匹配不到,则选择PID最小的音轨。\n- STRICT:严格匹配,示例“eng”会严格匹配源流中语言为English的音轨,如果匹配不到,媒体直播服务会自动补齐一个静音分片,当终端使用此音频选择器播放视频时,会静音播放。","enum":["LOOSE","STRICT"],"type":"string"}},"required":["language_code"],"type":"object"},"AudioSelectorPidSelection":{"description":"PID选择器","properties":{"pid":{"description":"设置PID的值","format":"int32","maximum":8191,"minimum":0,"type":"integer"}},"required":["pid"],"type":"object"},"AudioSelectorSettings":{"description":"设置音频选择器","properties":{"audio_hls_selection":{"$ref":"#/definitions/AudioSelectorHlsSelection","description":"设置Hls选择器"},"audio_language_selection":{"$ref":"#/definitions/AudioSelectorLangSelection","description":"设置语言选择器"},"audio_pid_selection":{"$ref":"#/definitions/AudioSelectorPidSelection","description":"设置PID选择器"}},"type":"object"},"ErrorRsp":{"description":"失败时返回的错误对象","properties":{"app_name":{"description":"组名或应用名,为必填项","maxLength":255,"minLength":1,"type":"string"},"domain":{"description":"推流域名","maxLength":255,"minLength":1,"type":"string"},"id":{"description":"频道ID。频道唯一标识,为必填项","maxLength":255,"minLength":1,"type":"string"},"result_code":{"description":"错误码","maxLength":3,"minLength":3,"type":"string"},"result_msg":{"description":"错误描述","maxLength":255,"minLength":1,"type":"string"}},"required":["result_code","result_msg"]},"FailoverConditions":{"description":"主备切换配置","properties":{"input_loss_threshold_msec":{"description":"入流停止的时长阈值。到达此阈值后,自动触发主备切换。\n\n单位:毫秒,取值范围:0 - 3600000。\n\n非必填,默认填2000ms。","maximum":3600000,"minimum":0,"type":"integer"},"input_preference":{"default":"EQUAL","description":"以主入流URL为第一优先级(PRIMARY)或主备URL平等切换(EQUAL)。\n\n如果是平等切换时,使用的是备URL,不会自动切换至主URL。\n\n非必填,默认值为EQUAL。","enum":["EQUAL","PRIMARY"],"type":"string"}}},"InputAudioSelector":{"description":"音频选择器","properties":{"name":{"description":"音频选择器的名称。仅支持大小写字母、数字、中划线和下划线。\n\n同一个频道中每个选择器的名称需要唯一。","maxLength":255,"minLength":1,"type":"string"},"selector_settings":{"$ref":"#/definitions/AudioSelectorSettings","description":"设置音频选择器"}},"required":["name"],"type":"object"},"InputStreamInfo":{"description":"频道入流信息","properties":{"ad_triggers":{"description":"广告触发器配置。\n\n包含如下取值:\n- Splice insert:拼接插入\n- Provider advertisement:提供商广告\n- Distributor advertisement:分销商广告\n- Provider placement opportunity:提供商置放机会\n- Distributor placement opportunity:分销商置放机会","enum":["Splice insert","Provider advertisement","Distributor advertisement","Provider placement opportunity","Distributor placement opportunity"],"items":{"type":"string"},"type":"array"},"audio_selectors":{"description":"设置音频选择器,最多设置8个音频选择器","items":{"$ref":"#/definitions/InputAudioSelector"},"type":"array"},"failover_conditions":{"$ref":"#/definitions/FailoverConditions","description":"非必填,频道供应商提供的主备音视频流URL切换的配置。"},"input_protocol":{"default":"FLV_PULL","description":"频道入流协议\n- FLV_PULL\n- RTMP_PUSH\n- HLS_PULL\n- SRT_PULL\n- SRT_PUSH","enum":["FLV_PULL","RTMP_PUSH","HLS_PULL","SRT_PULL","SRT_PUSH"],"example":"FLV_PULL","type":"string"},"ip_port_mode":{"description":"当推流协议为SRT_PUSH时,如果配置了直推源站,编码器不支持输入streamid,需要打开设置为true","type":"boolean"},"ip_whitelist":{"description":"SRT_PUSH类型时,客户push ip白名单","maxLength":256,"minLength":0,"type":"string"},"max_bandwidth_limit":{"description":"当入流协议为HLS_PULL时,需要配置的最大带宽。\n\n用户提供的拉流URL中,针对不同码率的音视频,均会携带带宽参数“BANDWIDTH”。\n- 如果这里配置最大带宽,媒体直播服务从URL拉流时,会选择小于最大带宽且码率最大的音视频流,推流到源站。\n- 如果这里未配置最大带宽,媒体直播服务从URL拉流时,会默认选择“BANDWIDTH”最高的音视频流,推流到源站。","format":"int32","type":"integer"},"scte35_source":{"description":"广告的scte35信号源。\n\n仅HLS_PULL类型的频道支持此配置,且目前仅支持SEGMENTS。","example":"SEGMENTS,MANIFEST","type":"string"},"secondary_sources":{"description":"备入流数组,非必填项。如果有备入流,则主备入流必须保证路数、codec和分辨率均一致。入流协议为RTMP_PUSH时,无需填写。","items":{"$ref":"#/definitions/SecondarySourcesInfo"},"maxItems":12,"minItems":1,"type":"array"},"sources":{"description":"频道主源流信息。入流协议为RTMP_PUSH和SRT_PUSH时,非必填项。其他情况下,均为必填项。","items":{"$ref":"#/definitions/SourcesInfo"},"maxItems":12,"minItems":1,"type":"array"}},"required":["input_protocol"],"type":"object"},"ModifyOttChannelInputReq":{"description":"OTT频道修改入流消息体","properties":{"app_name":{"description":"组名或应用名","example":"live","maxLength":64,"minLength":1,"type":"string"},"domain":{"description":"频道推流域名","example":"www.huaweiott.pushdomain.com","maxLength":255,"minLength":1,"type":"string"},"id":{"description":"频道ID。频道唯一标识,为必填项","example":"channelId","maxLength":512,"minLength":2,"type":"string"},"input":{"$ref":"#/definitions/InputStreamInfo","description":"频道出流信息"}},"required":["domain","app_name","id"],"type":"object"},"SecondarySourcesInfo":{"description":"主入流信息","properties":{"backup_urls":{"description":"备入流地址列表","items":{"type":"string"},"maxItems":12,"minItems":0,"type":"array"},"bitrate":{"description":"码率。无需直播转码时,此参数为必填项\n\n单位:bps。取值范围:(0,104,857,600](100Mbps)","maximum":104857600,"minimum":0,"type":"integer"},"bitrate_for3u8":{"description":"是否使用bitrate来固定码率。默认值:false","type":"boolean"},"height":{"description":"分辨率对应高的值,非必填项\n\n取值范围:0 - 2160(4K)","maximum":2160,"minimum":0,"type":"integer"},"latency":{"description":"频道为SRT_PULL类型时的拉流时延。","format":"int32","type":"integer"},"passphrase":{"description":"协议为SRT_PUSH时的加密信息","maxLength":79,"minLength":10,"type":"string"},"stream_id":{"description":"频道为SRT_PULL类型时,拉流地址的Stream ID。","type":"string"},"url":{"description":"频道源流URL,用于外部拉流","maxLength":1024,"minLength":1,"type":"string"},"width":{"description":"分辨率对应宽的值,非必填项\n\n取值范围:0 - 4096(4K)","maximum":4096,"minimum":0,"type":"integer"}},"type":"object"},"SourceRsp":{"description":"RTMP推流地址。只有频道入流协议为RTMP_PUSH时,会返回RTMP推流地址","properties":{"bitrate":{"description":"码率。\n\n单位:bps。取值范围:(0,104,857,600](100Mbps)","example":104857600,"format":"int32","maximum":104857600,"minimum":0,"type":"integer"},"enable_snapshot":{"description":"描述是否使用该流做截图","example":false,"type":"boolean"},"height":{"description":"分辨率对应高的值。取值范围:0 - 2160(4K)","example":2160,"format":"int32","maximum":2160,"minimum":0,"type":"integer"},"url":{"description":"RTMP推流地址","example":"string","maxLength":1024,"minLength":1,"type":"string"},"width":{"description":"分辨率对应宽的值。取值范围:0 - 4096(4K)","example":4096,"format":"int32","maximum":4096,"minimum":0,"type":"integer"}},"type":"object"},"SourcesInfo":{"description":"主入流信息","properties":{"backup_urls":{"description":"备入流地址列表","items":{"type":"string"},"maxItems":12,"minItems":0,"type":"array"},"bitrate":{"description":"码率。无需直播转码时,此参数为必填项\n\n单位:bps。取值范围:(0,104,857,600](100Mbps)","maximum":104857600,"minimum":0,"type":"integer"},"bitrate_for3u8":{"description":"是否使用bitrate来固定码率。默认值:false","type":"boolean"},"enable_snapshot":{"default":false,"description":"描述是否使用该流做截图","type":"boolean"},"height":{"description":"分辨率对应高的值,非必填项\n\n取值范围:0 - 2160(4K)","maximum":2160,"minimum":0,"type":"integer"},"latency":{"description":"频道为SRT_PULL类型时的拉流时延。","format":"int32","type":"integer"},"passphrase":{"description":"协议为SRT_PUSH时的加密信息","maxLength":79,"minLength":10,"type":"string"},"stream_id":{"description":"频道为SRT_PULL类型时,拉流地址的Stream ID。","type":"string"},"url":{"description":"频道源流URL,用于外部拉流","maxLength":1024,"minLength":1,"type":"string"},"width":{"description":"分辨率对应宽的值,非必填项\n\n取值范围:0 - 4096(4K)","maximum":4096,"minimum":0,"type":"integer"}},"type":"object"},"SuccessRsp":{"description":"创建成功响应","properties":{"app_name":{"description":"组名或应用名,为必填项","maxLength":255,"minLength":1,"type":"string"},"domain":{"description":"推流域名","maxLength":255,"minLength":1,"type":"string"},"id":{"description":"频道ID。频道唯一标识,为必填项","maxLength":255,"minLength":1,"type":"string"},"result_code":{"description":"错误码","maxLength":3,"minLength":3,"type":"string"},"result_msg":{"description":"错误描述","maxLength":255,"minLength":1,"type":"string"},"sources":{"description":"推流URL列表。创建频道时,只有入流协议为RTMP_PUSH时,会返回推流URL列表","items":{"$ref":"#/definitions/SourceRsp"},"maxItems":12,"minItems":1,"type":"array"}},"type":"object"}},"description":null,"group_id":"f01a6cf256d84c16985bc98f70ef068d","host":"live.cn-north-4.myhuaweicloud.com","id":"14c86901e19a416eaafba601dd34939b","info_version":"v1","method":"put","name":"ModifyOttChannelInfoInput","parameters":{},"paths":{"/v1/{project_id}/ott/channels/input":{"put":{"description":"修改频道入流信息。","operationId":"ModifyOttChannelInfoInput","parameters":[{"description":"用户Token,使用Token鉴权方式时必选。通过调用IAM服务获取用户Token接口获取(响应消息头中X-Subject-Token的值)。","in":"header","maxLength":256,"minLength":1,"name":"X-Auth-Token","required":true,"type":"string","x-example":"MIIDkgYJKoZIhvcNAQcCoIIDgzCCXXXXX..."},{"description":"服务鉴权Token,服务开启鉴权,必须携带Access-Control-Allow-Internal访问服务。","in":"header","maxLength":2048,"minLength":1,"name":"Access-Control-Allow-Internal","required":false,"type":"string"},{"description":"服务鉴权Token,服务开启鉴权,必须携带Access-Control-Allow-External访问服务。","in":"header","maxLength":2048,"minLength":1,"name":"Access-Control-Allow-External","required":false,"type":"string"},{"description":"项目ID,获取方法请参考[获取项目ID](live_26_0018.xml)。","in":"path","maxLength":64,"minLength":1,"name":"project_id","required":true,"type":"string","x-example":"70b76xxxxxx34253880af501cdxxxxxx"},{"description":"ModifyOttChannelInfoInputRequestBody","in":"body","name":"ModifyOttChannelInfoInputRequestBody","required":true,"schema":{"$ref":"#/definitions/ModifyOttChannelInputReq"}}],"produces":["application/json"],"responses":{"200":{"description":"Demo Information","examples":{"application/json":{"app_name":"ott","domain":"push.testott.hls.com","id":"test","result_code":"LIVE.100000000","result_msg":"SUCCESS"}},"schema":{"$ref":"#/definitions/SuccessRsp"}},"400":{"description":"Error response","examples":{"application/json":{"app_name":"test","domain":"push.testott.hls.com","id":"test-abc","result_code":"LIVE.103011019","result_msg":"The resource to access is not exists"}},"schema":{"$ref":"#/definitions/ErrorRsp"}}},"summary":"修改频道入流信息","tags":["OTT频道管理"],"x-is-registered":"Y","x-request-examples-1":{"app_name":"ott","domain":"push.testott.hls.com","id":"test","input":{"input_protocol":"RTMP_PUSH","sources":[{"bitrate":1024,"bitrate_for3u8":false,"enable_snapshot":false,"height":100,"passphrase":"","url":"http://192.168.8.158/ott/adtestdrm.flv?vhost=pull.testott.hls.com","width":100}]}},"x-request-examples-text-1":{"app_name":"ott","domain":"push.testott.hls.com","id":"test","input":{"input_protocol":"RTMP_PUSH","sources":[{"bitrate":1024,"bitrate_for3u8":false,"enable_snapshot":false,"height":100,"passphrase":"","url":"rtmp://192.168.8.158/ott/adtestdrm?vhost=pull.testott.hls.com","width":100}]}},"x-request-examples-url-1":"PUT https://{endpoint}/v1/{project_id}/ott/channels/input","x-support-sdk":"Y"}}},"product_short":"Live","region_id":"cn-north-4","schemes":["HTTPS"],"security_definitions":null,"summary":"修改频道入流信息","tags":"OTT频道管理","uri":null,"version":"2.0"}