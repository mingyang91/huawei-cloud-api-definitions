{"base_path":null,"components":{"parameters":{"PolicyId":{"description":"身份策略ID,长度为1到64个字符,只包含字母、数字和\"-\"的字符串。","in":"path","name":"policy_id","required":true,"schema":{"pattern":"^[a-zA-Z0-9-]{1,64}$","type":"string"}}},"schemas":{"BadRequestErrorResp":{"properties":{"error_code":{"description":"错误码。","type":"string"},"error_msg":{"description":"错误信息。","type":"string"}},"required":["error_code","error_msg"],"type":"object"},"ConflictErrorResp":{"properties":{"error_code":{"description":"错误码。","type":"string"},"error_msg":{"description":"错误信息。","type":"string"},"request_id":{"description":"请求ID。","type":"string"}},"required":["error_code","error_msg","request_id"],"type":"object"},"CreatePolicyVersionReqBody":{"description":"the request body of create policy version request.","properties":{"policy_document":{"$ref":"#/components/schemas/PolicyDocument"},"set_as_default":{"default":false,"description":"是否设置为默认版本。","type":"boolean"}},"required":["policy_document"],"type":"object"},"CreatePolicyVersionResp":{"description":"The response body of create policy version request.","properties":{"policy_version":{"$ref":"#/components/schemas/PolicyVersion"}},"required":["policy_version"],"type":"object"},"ForbiddenErrorResp":{"properties":{"encoded_authorization_message":{"description":"加密后的认证失败信息,可以通过STS5解密接口进行解密。","type":"string"},"error_code":{"description":"错误码。","type":"string"},"error_msg":{"description":"错误信息。","type":"string"},"request_id":{"description":"请求ID。","type":"string"}},"required":["error_code","error_msg","request_id"],"type":"object"},"NotFoundErrorResp":{"properties":{"error_code":{"description":"错误码。","type":"string"},"error_msg":{"description":"错误信息。","type":"string"},"request_id":{"description":"请求ID。","type":"string"}},"required":["error_code","error_msg","request_id"],"type":"object"},"PolicyDocument":{"description":"自定义身份策略或系统预置身份策略的策略文档的json格式。下面的字符`= < > ( ) |`是语法中的特殊字符,不包含在身份策略中。\n\n问号`?`表示元素是可选的。例如`sid_block?`。\n\n竖线`|`表示可选项,括号定义了可选项的范围。例如`(\"Allow\" | \"Deny\")`。\n\n当一个元素允许多个值时,使用重复值`,`以及`...`表示。例如`[ <policy_statement>, <policy_statement>, ... ]`。\n\n下面的递归文法描述了身份策略的语法:\n```\npolicy = {\n  <version_block>,\n  <statement_block>\n}\n\n<version_block> = \"Version\" : (\"5.0\")\n\n<statement_block> = \"Statement\" : [ <policy_statement>, <policy_statement>, ... ]\n\n<policy_statement> = {\n  <sid_block?>,\n  <effect_block>,\n  <action_block>,\n  <resource_block?>,\n  <condition_block?>\n}\n\n<sid_block> = \"Sid\" : <sid_string>\n\n<effect_block> = \"Effect\" : (\"Allow\" | \"Deny\")\n\n<action_block> = (\"Action\" | \"NotAction\") : [ <action_string>, <action_string>, ... ]\n\n<resource_block> = (\"Resource\" | \"NotResource\") : [ <resource_string>, <resource_string>, ... ]\n\n<condition_block> = \"Condition\" : { <condition_map> }\n\n<condition_map> = {\n  <condition_type_string> : { <condition_key_string> : <condition_value_list> },\n  <condition_type_string> : { <condition_key_string> : <condition_value_list> },\n  ...\n}\n\n<condition_value_list> = ( <condition_value> | [ <condition_value>, <condition_value>, ... ] )\n\n<condition_value> = \"string\"\n```","maxLength":131072,"minLength":1,"type":"string"},"PolicyVersion":{"description":"身份策略版本信息。","properties":{"created_at":{"description":"身份策略版本创建时间。","format":"date-time","type":"string"},"document":{"$ref":"#/components/schemas/PolicyDocument"},"is_default":{"description":"是否为默认版本。","type":"boolean"},"version_id":{"$ref":"#/components/schemas/PolicyVersionId"}},"required":["document","version_id","is_default","created_at"],"type":"object"},"PolicyVersionId":{"description":"身份策略版本号,以\"v\"开头后跟数字,例如\"v5\"。","pattern":"^v[1-9][0-9]*$","type":"string"}}},"consumes":"","definitions":null,"description":null,"group_id":"ab48a57262c6411fb8fb72acfcee84e1","host":"iam.cn-north-4.myhuaweicloud.com","id":"0b0e0fb871204114a103a08dc47b700f","info_version":"v5","method":"post","name":"CreatePolicyVersionV5","parameters":null,"paths":{"/v5/policies/{policy_id}/versions":{"post":{"description":"该接口可以用于为指定身份策略创建一个新版本。","operationId":"CreatePolicyVersionV5","parameters":[{"$ref":"#/components/parameters/PolicyId"}],"requestBody":{"content":{"application/json":{"example":{"policy_document":"{\"Version\":\"5.0\",\"Statement\":[{\"Effect\":\"Allow\",\"Action\":[\"*\"]}]}","set_as_default":true},"schema":{"$ref":"#/components/schemas/CreatePolicyVersionReqBody"}}},"required":true},"responses":{"201":{"content":{"application/json":{"example":{"policy_version":{"created_at":"2023-09-25T08:00:51.537Z","document":"{\"Version\":\"5.0\",\"Statement\":[{\"Effect\":\"Allow\",\"Action\":[\"*\"]}]}","is_default":true,"version_id":"v2"}},"schema":{"$ref":"#/components/schemas/CreatePolicyVersionResp"}}},"description":"请求成功。"},"400":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/BadRequestErrorResp"}}},"description":"请求体异常。"},"403":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ForbiddenErrorResp"}}},"description":"没有操作权限。"},"404":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/NotFoundErrorResp"}}},"description":"未找到相应的资源。"},"409":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ConflictErrorResp"}}},"description":"请求冲突。"}},"security":[{"apig-auth-iam-used-authn5":[]}],"summary":"为指定身份策略创建一个新版本","tags":["Policy"],"x-apiexplorer-hide":"N","x-is-registered":"Y","x-request-examples-1":{"policy_document":"{\"Version\":\"5.0\",\"Statement\":[{\"Effect\":\"Allow\",\"Action\":[\"*\"]}]}","set_as_default":true},"x-request-examples-description-1":"为指定身份策略创建一个新版本,并置为默认版本。","x-request-examples-url-1":"POST https://{endpoint}/v5/policies/{policy_id}/versions","x-support-sdk":"Y"}}},"product_short":"IAM","region_id":"cn-north-4","schemes":["HTTPS"],"security_definitions":null,"summary":"为指定身份策略创建一个新版本","tags":"身份策略管理","uri":null,"version":"3.0.3"}