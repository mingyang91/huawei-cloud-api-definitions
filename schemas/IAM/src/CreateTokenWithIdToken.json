{"base_path":"/","components":null,"consumes":"[\"application/json;charset=UTF-8\"]","definitions":{"DomainInfo":{"description":"domain信息。","properties":{"id":{"description":"租户id。","type":"string"},"name":{"description":"租户name。","type":"string"}},"required":["name"]},"FederationUserBody":{"description":"联邦用户信息。","properties":{"OS-FEDERATION":{"$ref":"#/definitions/OsFederationInfo"},"domain":{"$ref":"#/definitions/DomainInfo"},"id":{"description":"user id。","type":"string"},"name":{"description":"user name。","type":"string"}},"required":["OS-FEDERATION","domain"]},"GetIdTokenAuthParams":{"description":"auth信息","properties":{"id_token":{"$ref":"#/definitions/GetIdTokenIdTokenBody"},"scope":{"$ref":"#/definitions/GetIdTokenIdScopeBody"}},"required":["id_token"]},"GetIdTokenIdScopeBody":{"description":"scope信息","properties":{"domain":{"$ref":"#/definitions/GetIdTokenScopeDomainOrProjectBody"},"project":{"$ref":"#/definitions/GetIdTokenScopeDomainOrProjectBody"}}},"GetIdTokenIdTokenBody":{"description":"id token信息","properties":{"id":{"description":"id_token的值","type":"string"}},"required":["id"]},"GetIdTokenRequestBody":{"description":"请求体","properties":{"auth":{"$ref":"#/definitions/GetIdTokenAuthParams"}},"required":["auth"]},"GetIdTokenScopeDomainOrProjectBody":{"description":"scope详细信息","properties":{"id":{"description":"domain id 或者 project id,与name字段至少存在一个。","type":"string"},"name":{"description":"domain name 或者 project name,与id字段至少存在一个。","type":"string"}}},"GroupInfo":{"description":"用户组信息。","items":{"properties":{"id":{"description":"用户组id。","type":"string"},"name":{"description":"用户组名。","type":"string"}},"type":"object"},"type":"array"},"IdpIdInfo":{"description":"身份提供商信息。","properties":{"id":{"description":"身份提供商id。","type":"string"}},"required":["id"]},"OidcScopedToken":{"description":"返回体","properties":{"token":{"$ref":"#/definitions/ScopedTokenInfo"}}},"OsFederationInfo":{"description":"user详细信息。","properties":{"groups":{"$ref":"#/definitions/GroupInfo"},"identity_provider":{"$ref":"#/definitions/IdpIdInfo"},"protocol":{"$ref":"#/definitions/ProtocolIdInfo"}},"required":["identity_provider","protocol","groups"]},"ProjectInfo":{"description":"project信息","properties":{"domain":{"$ref":"#/definitions/DomainInfo"},"id":{"description":"project id","type":"string"},"name":{"description":"project name","type":"string"}},"required":["name"]},"ProtocolIdInfo":{"description":"协议信息。","properties":{"id":{"description":"协议id。","type":"string"}},"required":["id"]},"ScopedTokenInfo":{"description":"token详细信息。","properties":{"catalog":{"description":"catalog信息","items":{"properties":{"id":{"description":"终端节点ID。","type":"string"},"interface":{"description":"接口类型,描述接口在该终端节点的可见性。值为“public”,表示该接口为公开接口。","type":"string"},"region":{"description":"终端节点所属区域。","type":"string"},"region_id":{"description":"终端节点所属区域ID。","type":"string"},"url":{"description":"终端节点的URL。","type":"string"}}},"type":"array"},"domain":{"$ref":"#/definitions/DomainInfo"},"expires_at":{"description":"过期时间。","type":"string"},"issued_at":{"description":"生成时间。","type":"string"},"methods":{"description":"获取token的方式,联邦用户默认为mapped。","items":{"type":"string"},"type":"array"},"project":{"$ref":"#/definitions/ProjectInfo"},"roles":{"description":"roles信息。","items":{"properties":{"id":{"description":"role id","type":"string"},"name":{"description":"name id","type":"string"}}},"type":"array"},"user":{"$ref":"#/definitions/FederationUserBody"}},"required":["expires_at","methods","issued_at","user","roles","catalog"]}},"description":null,"group_id":"ab48a57262c6411fb8fb72acfcee84e1","host":"iam.cn-north-4.myhuaweicloud.com","id":"e5ec5a07bcf54f8491683aa5c00647be","info_version":"v3","method":"post","name":"CreateTokenWithIdToken","parameters":{},"paths":{"/v3.0/OS-AUTH/id-token/tokens":{"post":{"deprecated":false,"description":"获取联邦认证token(OpenId Connect Id token方式)","operationId":"CreateTokenWithIdToken","parameters":[{"description":"身份提供商ID。","in":"header","maxLength":64,"minLength":1,"name":"X-Idp-Id","required":true,"type":"string","x-order":2},{"description":"获取iam token必要的请求体auth参数","in":"body","name":"body","required":true,"schema":{"$ref":"#/definitions/GetIdTokenRequestBody"}}],"responses":{"201":{"description":"创建成功。","examples":{"application/json":{"token":{"expires_at":"2018-03-13T03:00:01.168000Z","issued_at":"2018-03-12T03:00:01.168000Z","methods":["mapped"],"user":{"OS-FEDERATION":{"groups":[{"id":"45a8c8f...","name":"admin"}],"identity_provider":{"id":"idptest"},"protocol":{"id":"oidc"}},"domain":{"id":"063bb260a480...","name":"IAMDomain"},"id":"suvmgvUZc4PaCOEc...","name":"FederationUser"}}}},"headers":{"X-Subject-Token":{"description":"签名后的Token","type":"string"}},"schema":{"$ref":"#/definitions/OidcScopedToken"}},"400":{"description":"参数无效。","examples":{"application/json":{"error_code":"IAM.0011","error_msg":"Request body is invalid."}}},"401":{"description":"认证失败。","examples":{"application/json":{"error_code":"IAM.0001","error_msg":"The request you have made requires authentication."}}},"403":{"description":"没有操作权限。","examples":{"application/json":{"error_code":"IAM.0002","error_msg":"You are not authorized to perform the requested action."}}},"404":{"description":"未找到相应的资源。","examples":{"application/json":{"error_code":"IAM.0004","error_msg":"Could not find %(target)s: %(target_id)s."}}},"500":{"description":"系统内部异常。","examples":{"application/json":{"error_code":"IAM.0006","error_msg":"An unexpected error prevented the server from fulfilling your request."}}}},"summary":"获取联邦认证token(OpenId Connect Id token方式)","tags":["联邦身份认证管理"],"x-apiexplorer-hide":"N","x-constraint":null,"x-interface-type":"internal,global-external,region-external,global-external4obs","x-is-registered":"Y","x-name":"获取联邦认证token(OpenId Connect Id token方式)","x-order":9,"x-publishpath":null,"x-request-examples-1":{"auth":{"id_token":{"id":"eyJhbGciOiJSU..."},"scope":{"project":{"id":"46419baef4324...","name":"cn-north-4"}}}},"x-request-examples-2":{"auth":{"id_token":{"id":"eyJhbGciOiJSU..."},"scope":{"domain":{"id":"063bb260a480...","name":"IAMDomain"}}}},"x-request-examples-3":{"auth":{"id_token":{"id":"eyJhbGciOiJSU..."}}},"x-request-examples-description-1":"获取联邦认证project scoped token","x-request-examples-description-2":"获取联邦认证domain scoped token","x-request-examples-description-3":"获取unscoped token","x-request-examples-text-1":{"auth":{"id_token":{"id":"eyJhbGciOiJSU..."},"scope":{"project":{"id":"46419baef4324...","name":"cn-north-4"}}}},"x-request-examples-text-2":{"auth":{"id_token":{"id":"eyJhbGciOiJSU..."},"scope":{"domain":{"id":"063bb260a480...","name":"IAMDomain"}}}},"x-request-examples-text-3":{"auth":{"id_token":{"id":"eyJhbGciOiJSU..."}}},"x-request-examples-url-1":"POST https://iam.myhuaweicloud.com/v3.0/OS-AUTH/id-token/tokens","x-request-examples-url-2":"POST https://iam.myhuaweicloud.com/v3.0/OS-AUTH/id-token/tokens","x-request-examples-url-3":"POST https://iam.myhuaweicloud.com/v3.0/OS-AUTH/id-token/tokens","x-scope":"TechnicalPreview","x-support-sdk":"Y","x-version":"v3.0"}}},"product_short":"IAM","region_id":"cn-north-4","schemes":["HTTPS"],"security_definitions":null,"summary":"获取联邦认证token(OpenId Connect Id token方式)","tags":"联邦身份认证管理","uri":null,"version":"2.0"}