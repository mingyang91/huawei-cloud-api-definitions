{"base_path":"/","components":null,"consumes":"[\"application/json;charset=UTF-8\"]","definitions":{"DomainInfo":{"description":"domain信息。","properties":{"id":{"description":"租户id。","type":"string"},"name":{"description":"租户name。","type":"string"}},"required":["name"]},"FederationUserBody":{"description":"联邦用户信息。","properties":{"OS-FEDERATION":{"$ref":"#/definitions/OsFederationInfo"},"domain":{"$ref":"#/definitions/DomainInfo"},"id":{"description":"user id。","type":"string"},"name":{"description":"user name。","type":"string"}},"required":["OS-FEDERATION","domain"]},"GroupInfo":{"description":"用户组信息。","items":{"properties":{"id":{"description":"用户组id。","type":"string"},"name":{"description":"用户组名。","type":"string"}},"type":"object"},"type":"array"},"IdpIdInfo":{"description":"身份提供商信息。","properties":{"id":{"description":"身份提供商id。","type":"string"}},"required":["id"]},"OsFederationInfo":{"description":"user详细信息。","properties":{"groups":{"$ref":"#/definitions/GroupInfo"},"identity_provider":{"$ref":"#/definitions/IdpIdInfo"},"protocol":{"$ref":"#/definitions/ProtocolIdInfo"}},"required":["identity_provider","protocol","groups"]},"ProtocolIdInfo":{"description":"协议信息。","properties":{"id":{"description":"协议id。","type":"string"}},"required":["id"]},"UnscopedToken":{"description":"返回体","properties":{"token":{"$ref":"#/definitions/UnscopedTokenInfo"}}},"UnscopedTokenInfo":{"description":"token详细信息。","properties":{"catalog":{"description":"catalog信息。","items":{"properties":{"endpoints":{"items":{"properties":{"id":{"description":"终端节点ID。","type":"string"},"interface":{"description":"接口类型,描述接口在该终端节点的可见性。值为“public”,表示该接口为公开接口。","type":"string"},"region":{"description":"终端节点所属区域。","type":"string"},"region_id":{"description":"终端节点所属区域ID。","type":"string"},"url":{"description":"终端节点的URL。","type":"string"}}},"type":"array"},"id":{"description":"终端节点ID。","type":"string"},"name":{"description":"服务名称。","type":"string"},"type":{"description":"该接口所属服务。","type":"string"}}},"type":"array"},"expires_at":{"description":"过期时间。","type":"string"},"issued_at":{"description":"生成时间。","type":"string"},"methods":{"description":"token获取方式,联邦认证默认为mapped。","items":{"type":"string"},"type":"array"},"roles":{"description":"roles信息。","items":{"properties":{"id":{"description":"role id。","type":"string"},"name":{"description":"name id。","type":"string"}}},"type":"array"},"user":{"$ref":"#/definitions/FederationUserBody"}},"required":["expires_at","methods","issued_at","user"]}},"description":null,"group_id":"ab48a57262c6411fb8fb72acfcee84e1","host":"iam.cn-north-4.myhuaweicloud.com","id":"5524a614b3b0435a94a784a3787d837b","info_version":"v3","method":"post","name":"CreateUnscopedTokenWithIdToken","parameters":{},"paths":{"/v3/OS-FEDERATION/identity_providers/{idp_id}/protocols/{protocol_id}/auth":{"post":{"deprecated":false,"description":"获取联邦认证token(OpenId Connect Id token方式)。","operationId":"CreateUnscopedTokenWithIdToken","parameters":[{"description":"身份提供商id。","in":"path","name":"idp_id","required":true,"type":"string","x-order":2},{"description":"协议id。","in":"path","name":"protocol_id","required":true,"type":"string","x-order":3},{"description":"OpenID Connect身份提供商的ID Token,格式为Bearer {ID Token}。","in":"header","name":"Authorization","required":true,"type":"string","x-example":"Bearer {ID Token}","x-order":1}],"responses":{"201":{"description":"创建成功。","examples":{"application/json":{"token":{"expires_at":"2018-03-13T03:00:01.168000Z","issued_at":"2018-03-12T03:00:01.168000Z","methods":["mapped"],"user":{"OS-FEDERATION":{"groups":[{"id":"45a8c8f...","name":"admin"}],"identity_provider":{"id":"idptest"},"protocol":{"id":"oidc"}},"domain":{"id":"063bb260a480...","name":"IAMDomain"},"id":"suvmgvUZc4PaCOEc...","name":"FederationUser"}}}},"headers":{"X-Subject-Token":{"description":"签名后的Token。","type":"string"}},"schema":{"$ref":"#/definitions/UnscopedToken"}},"400":{"description":"参数无效。","examples":{"application/json":{"error":{"code":400,"message":"Request parameter 'idp id' is invalid.","title":"Bad Request"}}}},"401":{"description":"认证失败。","examples":{"application/json":{"error":{"code":401,"message":"The request you have made requires authentication.","title":"Unauthorized"}}}},"403":{"description":"没有操作权限。","examples":{"application/json":{"error":{"code":403,"message":"You are not authorized to perform the requested action.","title":"Forbidden"}}}},"404":{"description":"未找到相应资源。","examples":{"application/json":{"error":{"code":404,"message":"Could not find %(target)s: %(target_id)s.","title":"Not Found"}}}},"500":{"description":"系统内部异常。","examples":{"application/json":{"error":{"code":500,"message":"An unexpected error prevented the server from fulfilling your request.","title":"Internal Server Error"}}}}},"summary":"获取联邦认证unscoped token(OpenId Connect Id token方式)","tags":["联邦身份认证管理"],"x-apiexplorer-hide":"N","x-constraint":null,"x-is-registered":"Y","x-name":"获取联邦认证unscoped token(OpenId Connect Id token方式)","x-order":10,"x-publishpath":null,"x-request-examples-1":"POST https://iam.myhuaweicloud.com/v3/OS-FEDERATION/identity_providers/{idp_id}/protocols/{protocol_id}/auth","x-request-examples-description-1":"","x-request-examples-text-1":"POST https://iam.myhuaweicloud.com/v3/OS-FEDERATION/identity_providers/{idp_id}/protocols/{protocol_id}/auth","x-request-examples-url-1":"","x-scope":"TechnicalPreview","x-support-sdk":"Y","x-version":"v3.0"}}},"product_short":"IAM","region_id":"cn-north-4","schemes":["HTTPS"],"security_definitions":null,"summary":"获取联邦认证unscoped token(OpenId Connect Id token方式)","tags":"联邦身份认证管理","uri":null,"version":"2.0"}