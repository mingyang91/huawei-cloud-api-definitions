{"base_path":"/","components":null,"consumes":"[\"application/json;charset=UTF-8\"]","definitions":{"AgencyAuth":{"description":"","properties":{"identity":{"$ref":"#/definitions/AgencyAuthIdentity","description":"认证参数。"}},"required":["identity"]},"AgencyAuthIdentity":{"description":"","properties":{"assume_role":{"$ref":"#/definitions/IdentityAssumerole","description":"assume_role的具体信息。"},"methods":{"description":"认证方法,该字段内容为[\"assume_role\"]。","items":{"enum":["assume_role"],"type":"string"},"maxItems":1,"minItems":1,"type":"array"},"policy":{"$ref":"#/definitions/ServicePolicy","description":"自定义策略的具体内容。"}},"required":["assume_role","methods"]},"AssumeroleSessionuser":{"description":"","properties":{"name":{"description":"委托方对应的企业用户名。用户名需满足如下规则:长度5~64,只能包含大写字母、小写字母、数字(0-9)、特殊字符(\"-\"与\"_\")且只能以字母开头。","example":"SessionUserName","type":"string"}}},"ConditionAdditional":{"description":"","items":{"type":"string"},"type":"array"},"CreateTemporaryAccessKeyByAgencyRequestBody":{"description":"","properties":{"auth":{"$ref":"#/definitions/AgencyAuth","description":"认证信息。"}},"required":["auth"]},"CreateTemporaryAccessKeyByAgencyResponseBody":{"description":"","properties":{"credential":{"$ref":"#/definitions/Credential","description":"认证结果信息。"}},"required":["credential"]},"Credential":{"description":"","properties":{"access":{"description":"获取的AK。","example":"WX99FNBSHCNPG9EV3T6S","type":"string"},"expires_at":{"description":"AK/SK和securitytoken的过期时间。","example":"2020-01-08T03:16:01.599000Z","type":"string"},"secret":{"description":"获取的SK。","example":"G8jME3FdItroUAxevyZy5EJJ00lJj6Y52NtVSMzr","type":"string"},"securitytoken":{"description":"securitytoken是将所获的AK、SK等信息进行加密后的字符串。","example":"gQpjbi1ub3J0aC00jN8BogWJ6OgFkxd_e---9bY_7QIw-92jIFQQ-A9RdR...","type":"string"}},"required":["access","expires_at","secret","securitytoken"]},"IdentityAssumerole":{"description":"","properties":{"agency_name":{"description":"委托名。","example":"IAMAgency","type":"string"},"domain_id":{"description":"委托方的账号ID。“domain_id”与“domain_name”至少填写一个。","example":"d78cbac186b744899480f25bd022f468","type":"string"},"domain_name":{"description":"委托方的账号名。“domain_id”与“domain_name”至少填写一个。","example":"IAMDomainA","type":"string"},"duration_seconds":{"default":900,"description":"AK/SK和securitytoken的有效期,时间单位为秒。取值范围:15min ~ 24h ,默认为15min。","example":3600,"format":"int32","maximum":86400,"minimum":900,"type":"integer"},"session_user":{"$ref":"#/definitions/AssumeroleSessionuser","description":"委托方对应的企业用户信息。"}},"required":["agency_name"]},"ServicePolicy":{"description":"","properties":{"Statement":{"description":"授权语句,描述自定义策略的具体内容。","items":{"$ref":"#/definitions/ServiceStatement"},"type":"array"},"Version":{"default":"1.1","description":"权限版本号,创建自定义策略时,该字段值填为“1.1”。\n> - 1.0:系统预置的角色。以服务为粒度,提供有限的服务相关角色用于授权。\n> - 1.1:策略。IAM最新提供的一种细粒度授权的能力,可以精确到具体服务的操作、资源以及请求条件等。","example":"1.1","type":"string"}},"required":["Statement","Version"]},"ServiceStatement":{"description":"","properties":{"Action":{"description":"授权项,指对资源的具体操作权限。\n> - 格式为:服务名:资源类型:操作,例:vpc:ports:create。\n> - 服务名为产品名称,例如ecs、evs和vpc等,服务名仅支持小写。 资源类型和操作没有大小写,要求支持通配符号*,无需罗列全部授权项。","items":{"type":"string"},"type":"array"},"Condition":{"additionalProperties":{"additionalProperties":{"$ref":"#/definitions/ConditionAdditional","description":""},"description":"","type":"object"},"type":"object"},"Effect":{"description":"作用。包含两种:允许(Allow)和拒绝(Deny),既有Allow又有Deny的授权语句时,遵循Deny优先的原则。","enum":["Allow","Deny"],"example":"Allow","type":"string"},"Resource":{"description":"资源。规则如下:\n> - 可填 * 的五段式:<service-name>:<region>:<account-id>:<resource-type>:<resource-path>,例:\"obs:*:*:bucket:*\"。\n> - region字段为*或用户可访问的region。service必须存在且resource属于对应service。","items":{"type":"string"},"type":"array"}},"required":["Action","Effect"]}},"description":null,"group_id":"ab48a57262c6411fb8fb72acfcee84e1","host":"iam.cn-north-4.myhuaweicloud.com","id":"398c9ddfa5cb4c678a75692a3ed726cf","info_version":"v3","method":"post","name":"CreateTemporaryAccessKeyByAgency","parameters":{},"paths":{"/v3.0/OS-CREDENTIAL/securitytokens":{"post":{"consumes":[],"deprecated":false,"description":"该接口可以用于通过委托来获取临时访问密钥(临时AK/SK)和securitytoken。\n\n临时AK/SK和securitytoken是系统颁发给IAM用户的临时访问令牌,有效期为15分钟至24小时,过期后需要重新获取。临时AK/SK和securitytoken遵循权限最小化原则。鉴权时,临时AK/SK和securitytoken必须同时使用,请求头中需要添加“x-security-token”字段,使用方法详情请参考:[API签名参考](https://support.huaweicloud.com/devg-apisign/api-sign-provide.html) 。\n\n该接口可以使用全局区域的Endpoint和其他区域的Endpoint调用。IAM的Endpoint请参见:[地区和终端节点](https://developer.huaweicloud.com/endpoint?IAM)。","operationId":"CreateTemporaryAccessKeyByAgency","parameters":[{"description":"拥有Agent Operator权限的token。","in":"header","name":"X-Auth-Token","required":true,"type":"string","x-example":"MIIDkgYJKoZIhvcNAQcCoIIDgzCCXXXXX...","x-order":1},{"description":"请求体。","in":"body","name":"CreateTemporaryAccessKeyByAgencyRequestBody","required":true,"schema":{"$ref":"#/definitions/CreateTemporaryAccessKeyByAgencyRequestBody"},"x-order":2}],"produces":[],"responses":{"201":{"description":"创建成功。\n\n无论\"session_user\"填写与否,返回都是相同的。若填写了\"session_user\",则在securitytoken中包含了所填写的\"session_user\"信息。","examples":{"application/json":{"credential":{"access":"E6DX0TF2ZREQ4ZAVM5CS","expires_at":"2020-01-08T02:56:19.587000Z","secret":"w9ePum0qdfac39ErLD0UdjofYkqort6Iw2bmR6Si","securitytoken":"gQpjbi1ub3J0aC0..."}}},"schema":{"$ref":"#/definitions/CreateTemporaryAccessKeyByAgencyResponseBody"}},"400":{"description":"参数无效。"},"401":{"description":"认证失败。"},"403":{"description":"没有操作权限。"},"500":{"description":"内部服务错误。"}},"summary":"通过委托获取临时访问密钥","tags":["Credential管理"],"x-apiexplorer-hide":"N","x-constraint":"","x-is-registered":"Y","x-name":"通过委托获取临时访问密钥","x-order":6,"x-publishpath":"","x-request-examples-1":{"auth":{"identity":{"assume_role":{"agency_name":"IAMAgency","domain_name":"IAMDomainA","duration_seconds":3600},"methods":["assume_role"],"policy":{"Statement":[{"Action":["obs:object:*"],"Condition":{"StringEquals":{"obs:prefix":["public"]}},"Effect":"allow","Resource":["obs:*:*:object:*"]}],"Version":"1.1"}}}},"x-request-examples-2":{"auth":{"identity":{"assume_role":{"agency_name":"IAMAgency","domain_name":"IAMDomainA","duration_seconds":3600},"methods":["assume_role"]}}},"x-request-examples-3":{"auth":{"identity":{"assume_role":{"agency_name":"IAMAgency","domain_name":"IAMDomainA","duration_seconds":3600,"session_user":{"name":"SessionUserName"}},"methods":["assume_role"]}}},"x-request-examples-description-1":"填写\"policy\"参数。","x-request-examples-description-2":"不填写\"session_user\"参数。","x-request-examples-description-3":"填写\"session_user\"参数。","x-request-examples-text-1":"{\n    \"auth\": {\n        \"identity\": {\n            \"methods\": [\n                \"assume_role\"\n            ],\n            \"policy\": {\n                \"Version\": \"1.1\",\n                \"Statement\": [\n                    {\n                        \"Effect\": \"allow\",\n                        \"Action\": [\n                            \"obs:object:*\"\n                        ],\n                        \"Resource\": [\n                            \"obs:*:*:object:*\"\n                        ],\n                        \"Condition\": {\n                            \"StringEquals\": {\n                                \"obs:prefix\": [\n                                    \"public\"\n                                ]\n                            }\n                        }\n                    }\n                ]\n            },\n            \"assume_role\": {\n                \"domain_name\": \"IAMDomainA\",\n                \"agency_name\": \"IAMAgency\",\n                \"duration_seconds\": 3600\n            }\n        }\n    }\n}","x-request-examples-text-2":"{\n    \"auth\": {\n        \"identity\": {\n            \"methods\": [\"assume_role\"],\n            \"assume_role\": {\n                \"domain_name\": \"IAMDomainA\",\n                \"agency_name\": \"IAMAgency\",\n                \"duration_seconds\": 3600\n            }\n        }\n    }\n}","x-request-examples-text-3":"{\n    \"auth\": {\n        \"identity\": {\n            \"methods\": [\"assume_role\"],\n            \"assume_role\": {\n                \"domain_name\": \"IAMDomainA\",\n                \"agency_name\": \"IAMAgency\",\n                \"duration_seconds\": 3600,\n                \"session_user\": {\n                    \"name\": \"SessionUserName\"\n                }\n            }\n        }\n    }\n}","x-request-examples-url-1":"POST https://iam.myhuaweicloud.com/v3.0/OS-CREDENTIAL/securitytokens","x-request-examples-url-2":"POST https://iam.myhuaweicloud.com/v3.0/OS-CREDENTIAL/securitytokens","x-request-examples-url-3":"POST https://iam.myhuaweicloud.com/v3.0/OS-CREDENTIAL/securitytokens","x-scope":"Commercial","x-support-sdk":"Y","x-version":"v3.0"}}},"product_short":"IAM","region_id":"cn-north-4","schemes":["HTTPS"],"security_definitions":null,"summary":"通过委托获取临时访问密钥","tags":"Credential管理","uri":null,"version":"2.0"}