{"base_path":null,"components":{"schemas":{"BadRequestErrorResp":{"properties":{"error_code":{"description":"错误码。","type":"string"},"error_msg":{"description":"错误信息。","type":"string"}},"required":["error_code","error_msg"],"type":"object"},"ConflictErrorResp":{"properties":{"error_code":{"description":"错误码。","type":"string"},"error_msg":{"description":"错误信息。","type":"string"},"request_id":{"description":"请求ID。","type":"string"}},"required":["error_code","error_msg","request_id"],"type":"object"},"CreatePolicyReqBody":{"description":"The request body of create policy request.","properties":{"description":{"$ref":"#/components/schemas/PolicyDescription"},"path":{"$ref":"#/components/schemas/Path"},"policy_document":{"$ref":"#/components/schemas/PolicyDocument"},"policy_name":{"$ref":"#/components/schemas/PolicyName"}},"required":["policy_name","policy_document"],"type":"object"},"CreatePolicyResp":{"description":"The response body of create policy request.","properties":{"policy":{"$ref":"#/components/schemas/Policy"}},"required":["policy"],"type":"object"},"ForbiddenErrorResp":{"properties":{"encoded_authorization_message":{"description":"加密后的认证失败信息,可以通过STS5解密接口进行解密。","type":"string"},"error_code":{"description":"错误码。","type":"string"},"error_msg":{"description":"错误信息。","type":"string"},"request_id":{"description":"请求ID。","type":"string"}},"required":["error_code","error_msg","request_id"],"type":"object"},"Path":{"default":"","description":"资源路径,默认为空串。由若干段字符串拼接而成,每段先包含一个或多个字母、数字、\".\"、\",\"、\"+\"、\"@\"、\"=\"、\"_\"或\"-\",并以\"/\"结尾,例如\"foo/bar/\"。","maxLength":512,"pattern":"^([A-Za-z0-9\\.,\\+@=_-]+/)*$","type":"string"},"Policy":{"description":"身份策略。","properties":{"attachment_count":{"description":"附加了本身份策略的实体数量。","format":"int32","type":"integer"},"created_at":{"description":"身份策略创建时间。","format":"date-time","type":"string"},"default_version_id":{"description":"默认版本号。","pattern":"^v[1-9][0-9]*$","type":"string"},"description":{"$ref":"#/components/schemas/PolicyDescription"},"path":{"$ref":"#/components/schemas/Path"},"policy_id":{"$ref":"#/components/schemas/PolicyId"},"policy_name":{"$ref":"#/components/schemas/PolicyName"},"policy_type":{"$ref":"#/components/schemas/PolicyType"},"updated_at":{"description":"身份策略默认版本最近一次的更新时间。","format":"date-time","type":"string"},"urn":{"$ref":"#/components/schemas/Urn"}},"required":["policy_type","policy_name","policy_id","urn","path","default_version_id","attachment_count","created_at","updated_at"],"type":"object"},"PolicyDescription":{"description":"身份策略描述。","maxLength":1000,"type":"string"},"PolicyDocument":{"description":"自定义身份策略或系统预置身份策略的策略文档的json格式。下面的字符`= < > ( ) |`是语法中的特殊字符,不包含在身份策略中。\n\n问号`?`表示元素是可选的。例如`sid_block?`。\n\n竖线`|`表示可选项,括号定义了可选项的范围。例如`(\"Allow\" | \"Deny\")`。\n\n当一个元素允许多个值时,使用重复值`,`以及`...`表示。例如`[ <policy_statement>, <policy_statement>, ... ]`。\n\n下面的递归文法描述了身份策略的语法:\n```\npolicy = {\n  <version_block>,\n  <statement_block>\n}\n\n<version_block> = \"Version\" : (\"5.0\")\n\n<statement_block> = \"Statement\" : [ <policy_statement>, <policy_statement>, ... ]\n\n<policy_statement> = {\n  <sid_block?>,\n  <effect_block>,\n  <action_block>,\n  <resource_block?>,\n  <condition_block?>\n}\n\n<sid_block> = \"Sid\" : <sid_string>\n\n<effect_block> = \"Effect\" : (\"Allow\" | \"Deny\")\n\n<action_block> = (\"Action\" | \"NotAction\") : [ <action_string>, <action_string>, ... ]\n\n<resource_block> = (\"Resource\" | \"NotResource\") : [ <resource_string>, <resource_string>, ... ]\n\n<condition_block> = \"Condition\" : { <condition_map> }\n\n<condition_map> = {\n  <condition_type_string> : { <condition_key_string> : <condition_value_list> },\n  <condition_type_string> : { <condition_key_string> : <condition_value_list> },\n  ...\n}\n\n<condition_value_list> = ( <condition_value> | [ <condition_value>, <condition_value>, ... ] )\n\n<condition_value> = \"string\"\n```","maxLength":131072,"minLength":1,"type":"string"},"PolicyId":{"description":"身份策略ID,长度为1到64个字符,只包含字母、数字和\"-\"的字符串。","pattern":"^[a-zA-Z0-9-]{1,64}$","type":"string"},"PolicyName":{"description":"身份策略名称,长度为1到128个字符,只包含字母、数字、\"_\"、\"+\"、\"=\"、\".\"、\"@\"和\"-\"的字符串。","maxLength":128,"minLength":1,"pattern":"^[\\w+=_.@-]+$","type":"string"},"PolicyType":{"description":"身份策略类型,可以为“自定义”(custom)或“系统预置”(system)。","enum":["custom","system"],"type":"string"},"Urn":{"description":"统一资源名称。","maxLength":1500,"minLength":16,"pattern":"^[A-Za-z0-9/=_:-]+$","type":"string"}}},"consumes":"","definitions":null,"description":null,"group_id":"ab48a57262c6411fb8fb72acfcee84e1","host":"iam.cn-north-4.myhuaweicloud.com","id":"efc198b1811f444097d5f3b5592499c6","info_version":"v5","method":"post","name":"CreatePolicyV5","parameters":null,"paths":{"/v5/policies":{"post":{"description":"该接口可以用于创建一个默认版本为v1的新自定义身份策略。","operationId":"CreatePolicyV5","requestBody":{"content":{"application/json":{"example":{"description":"description","path":"","policy_document":"{\"Version\":\"5.0\",\"Statement\":[{\"Effect\":\"Allow\",\"Action\":[\"*\"]}]}","policy_name":"name"},"schema":{"$ref":"#/components/schemas/CreatePolicyReqBody"}}},"required":true},"responses":{"201":{"content":{"application/json":{"example":{"policy":{"attachment_count":0,"created_at":"2023-09-25T07:49:11.582Z","default_version_id":"v1","description":"description","path":"","policy_id":"string","policy_name":"name","policy_type":"custom","updated_at":"2023-09-25T07:49:11.582Z","urn":"iam::accountid:policy:name"}},"schema":{"$ref":"#/components/schemas/CreatePolicyResp"}}},"description":"请求成功。"},"400":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/BadRequestErrorResp"}}},"description":"请求体异常。"},"403":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ForbiddenErrorResp"}}},"description":"没有操作权限。"},"409":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ConflictErrorResp"}}},"description":"请求冲突。"}},"security":[{"apig-auth-iam-used-authn5":[]}],"summary":"创建自定义身份策略","tags":["Policy"],"x-apiexplorer-hide":"N","x-is-registered":"Y","x-request-examples-1":{"description":"description","path":"","policy_document":"{\"Version\":\"5.0\",\"Statement\":[{\"Effect\":\"Allow\",\"Action\":[\"*\"]}]}","policy_name":"name"},"x-request-examples-description-1":"创建一个名为name的新自定义身份策略。","x-request-examples-url-1":"POST https://{endpoint}/v5/policies","x-support-sdk":"Y"}}},"product_short":"IAM","region_id":"cn-north-4","schemes":["HTTPS"],"security_definitions":null,"summary":"创建自定义身份策略","tags":"身份策略管理","uri":null,"version":"3.0.3"}