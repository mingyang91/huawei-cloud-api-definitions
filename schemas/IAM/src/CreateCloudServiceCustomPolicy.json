{"base_path":"/","components":null,"consumes":"[\"application/json;charset=UTF-8\"]","definitions":{"ConditionAdditional":{"description":"","items":{"type":"string"},"type":"array"},"CreateCloudServiceCustomPolicyRequestBody":{"description":"","properties":{"role":{"$ref":"#/definitions/ServicePolicyRoleOption","description":"自定义策略信息。"}},"required":["role"]},"CreateCloudServiceCustomPolicyResponseBody":{"description":"","properties":{"role":{"$ref":"#/definitions/ServicePolicyRoleResult","description":"自定义策略信息。"}},"required":["role"]},"LinksSelf":{"description":"","properties":{"self":{"description":"资源链接地址。","example":"https://iam.myhuaweicloud.com/v3/regions/la-south-2","type":"string"}},"required":["self"]},"ServicePolicy":{"description":"","properties":{"Statement":{"description":"授权语句,描述自定义策略的具体内容。","items":{"$ref":"#/definitions/ServiceStatement"},"type":"array"},"Version":{"default":"1.1","description":"权限版本号,创建自定义策略时,该字段值填为“1.1”。\n> - 1.0:系统预置的角色。以服务为粒度,提供有限的服务相关角色用于授权。\n> - 1.1:策略。IAM最新提供的一种细粒度授权的能力,可以精确到具体服务的操作、资源以及请求条件等。","example":"1.1","type":"string"}},"required":["Statement","Version"]},"ServicePolicyRoleOption":{"description":"","properties":{"description":{"description":"自定义策略的描述信息。","example":"IAMDescription","type":"string"},"description_cn":{"description":"自定义策略的中文描述信息。","example":"中文描述","type":"string"},"display_name":{"description":"自定义策略展示名。","example":"IAMPolicy","type":"string"},"policy":{"$ref":"#/definitions/ServicePolicy","description":"自定义策略的具体内容。"},"type":{"description":"自定义策略的显示模式。\n> - AX表示在domain层显示。\n> - XA表示在project层显示。\n> - 自定义策略的显示模式只能为AX或者XA,不能在domain层和project层都显示(AA),或者在domain层和project层都不显示(XX)。","example":"AX","type":"string"}},"required":["description","display_name","policy","type"]},"ServicePolicyRoleResult":{"description":"","properties":{"catalog":{"description":"自定义策略所在目录。","example":"CUSTOMED","type":"string"},"created_time":{"description":"自定义策略创建时间。","example":"1577026425747","type":"string"},"description":{"description":"自定义策略的描述信息。","example":"IAMDescription","type":"string"},"description_cn":{"description":"自定义策略的中文描述信息。","example":"中文描述","type":"string"},"display_name":{"description":"自定义策略展示名。","example":"IAMPolicy","type":"string"},"domain_id":{"description":"自定义策略所属账号ID。","example":"9698542758bc422088c0c3eabfc30d12","type":"string"},"id":{"description":"自定义策略ID。","example":"608776087b7649ad92c6f11ffd5bf35a","type":"string"},"links":{"$ref":"#/definitions/LinksSelf","description":"自定义策略的资源链接信息。"},"name":{"description":"自定义策略名。","example":"custom_d78cbac186b744899480f25bd022f468_2","type":"string"},"policy":{"$ref":"#/definitions/ServicePolicy","description":"自定义策略的具体内容。"},"references":{"description":"自定义策略的引用次数。","example":"0","type":"string"},"type":{"description":"自定义策略的显示模式。\n> - AX表示在domain层显示。\n> - XA表示在project层显示。\n> - 自定义策略的显示模式只能为AX或者XA,不能在domain层和project层都显示(AA),或者在domain层和project层都不显示(XX)。","example":"AX","type":"string"},"updated_time":{"description":"自定义策略更新时间。","example":"1579157459495","type":"string"}},"required":["catalog","description","display_name","domain_id","id","links","name","policy","type"]},"ServiceStatement":{"description":"","properties":{"Action":{"description":"授权项,指对资源的具体操作权限。\n> - 格式为:服务名:资源类型:操作,例:vpc:ports:create。\n> - 服务名为产品名称,例如ecs、evs和vpc等,服务名仅支持小写。 资源类型和操作没有大小写,要求支持通配符号*,无需罗列全部授权项。","items":{"type":"string"},"type":"array"},"Condition":{"additionalProperties":{"additionalProperties":{"$ref":"#/definitions/ConditionAdditional","description":""},"description":"","type":"object"},"type":"object"},"Effect":{"description":"作用。包含两种:允许(Allow)和拒绝(Deny),既有Allow又有Deny的授权语句时,遵循Deny优先的原则。","enum":["Allow","Deny"],"example":"Allow","type":"string"},"Resource":{"description":"资源。规则如下:\n> - 可填 * 的五段式:<service-name>:<region>:<account-id>:<resource-type>:<resource-path>,例:\"obs:*:*:bucket:*\"。\n> - region字段为*或用户可访问的region。service必须存在且resource属于对应service。","type":"object"}},"required":["Action","Effect"]}},"description":null,"group_id":"ab48a57262c6411fb8fb72acfcee84e1","host":"iam.cn-north-4.myhuaweicloud.com","id":"58dd2712588d4d04ad3b1797ad4cc9f4","info_version":"v3","method":"post","name":"CreateCloudServiceCustomPolicy","parameters":{},"paths":{"/v3.0/OS-ROLE/roles":{"post":{"consumes":[],"deprecated":false,"description":"该接口可以用于[管理员](https://support.huaweicloud.com/usermanual-iam/iam_01_0001.html)创建云服务自定义策略。\n\n该接口可以使用全局区域的Endpoint和其他区域的Endpoint调用。IAM的Endpoint请参见:[地区和终端节点](https://developer.huaweicloud.com/endpoint?IAM)。","operationId":"CreateCloudServiceCustomPolicy","parameters":[{"description":"拥有Security Administrator权限的token。","in":"header","name":"X-Auth-Token","required":true,"type":"string","x-example":"MIIDkgYJKoZIhvcNAQcCoIIDgzCCXXXXX...","x-order":1},{"description":"请求体。","in":"body","name":"CreateCloudServiceCustomPolicyRequestBody","required":true,"schema":{"$ref":"#/definitions/CreateCloudServiceCustomPolicyRequestBody"},"x-order":2}],"produces":[],"responses":{"201":{"description":"创建成功。","examples":{"application/json":{"role":{"catalog":"CUSTOMED","description":"IAMDescription","description_cn":"中文描述","display_name":"IAMCloudServicePolicy","domain_id":"d78cbac186b744899480f25bd022f468","id":"93879fd90f1046f69e6e0b31c94d2615","links":{"self":"https://iam.myhuaweicloud.com/v3/roles/93879fd90f1046f69e6e0b31c94d2615"},"name":"custom_d78cbac186b744899480f25bd022f468_1","policy":{"Statement":[{"Action":["obs:bucket:GetBucketAcl"],"Condition":{"StringStartWith":{"g:ProjectName":["cn-north-1"]}},"Effect":"Allow","Resource":["obs:*:*:bucket:*"]}],"Version":"1.1"},"type":"AX"}}},"schema":{"$ref":"#/definitions/CreateCloudServiceCustomPolicyResponseBody"}},"400":{"description":"参数无效。"},"401":{"description":"认证失败。"},"403":{"description":"没有操作权限。"},"500":{"description":"内部服务错误。"}},"summary":"创建云服务自定义策略","tags":["自定义策略管理"],"x-apiexplorer-hide":"N","x-constraint":"","x-is-registered":"Y","x-name":"创建云服务自定义策略","x-order":56,"x-publishpath":"","x-request-examples-1":{"role":{"description":"IAMDescription","description_cn":"中文描述","display_name":"IAMCloudServicePolicy","policy":{"Statement":[{"Action":["obs:bucket:GetBucketAcl"],"Condition":{"StringStartWith":{"g:ProjectName":["cn-north-1"]}},"Effect":"Allow","Resource":["obs:*:*:bucket:*"]}],"Version":"1.1"},"type":"AX"}},"x-request-examples-description-1":"","x-request-examples-text-1":"{\n    \"role\": {\n        \"display_name\": \"IAMCloudServicePolicy\",\n        \"type\": \"AX\",\n        \"description\": \"IAMDescription\",\n        \"description_cn\": \"中文描述\",\n        \"policy\": {\n            \"Version\": \"1.1\",\n            \"Statement\": [\n                {\n                    \"Effect\": \"Allow\",\n                    \"Action\": [\n                        \"obs:bucket:GetBucketAcl\"\n                    ],\n                    \"Condition\": {\n                        \"StringStartWith\": {\n                            \"g:ProjectName\": [\n                                \"cn-north-1\"\n                            ]\n                        }\n                    },\n                    \"Resource\": [\n                        \"obs:*:*:bucket:*\"\n                    ]\n                }\n            ]\n        }\n    }\n}","x-request-examples-url-1":"POST https://iam.myhuaweicloud.com/v3.0/OS-ROLE/roles","x-scope":"Commercial","x-support-sdk":"Y","x-version":"v3.0"}}},"product_short":"IAM","region_id":"cn-north-4","schemes":["HTTPS"],"security_definitions":null,"summary":"创建云服务自定义策略","tags":"自定义策略管理","uri":null,"version":"2.0"}