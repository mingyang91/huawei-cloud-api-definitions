{"base_path":"/","components":null,"consumes":"[\"application/json;charset=UTF-8\"]","definitions":{"CreateUnscopeTokenByIDPInitiatedResponseBody":{"description":"","properties":{"token":{"$ref":"#/definitions/IdpToken","description":"联邦认证的unscoped token信息。"}},"required":["token"]},"IdpToken":{"description":"","properties":{"expires_at":{"description":"token到期时间。","example":"2018-03-13T03:00:01.168000Z","type":"string"},"issued_at":{"description":"token产生时间。","example":"2018-03-12T03:00:01.168000Z","type":"string"},"methods":{"description":"获取token的方式。","items":{"type":"string"},"type":"array"},"user":{"$ref":"#/definitions/UnscopedTokenUser","description":"获取token的用户信息。"}},"required":["expires_at","issued_at","methods","user"]},"OsfederationGroups":{"description":"","properties":{"id":{"description":"用户组ID。","example":"b40189e26ea44f959877621b4b298db5","type":"string"},"name":{"description":"用户组名称。","example":"admin","type":"string"}},"required":["id","name"]},"OsfederationIdentityprovider":{"description":"","properties":{"id":{"description":"身份提供商ID。","example":"exampleidentityprovider","type":"string"}},"required":["id"]},"OsfederationProtocol":{"description":"","properties":{"id":{"description":"协议ID。","example":"saml","type":"string"}},"required":["id"]},"TokenDomainResult":{"description":"","properties":{"id":{"description":"用户所属账号ID。","example":"e31ac82d778b4d128cb6fed37fd72cdb","type":"string"},"name":{"description":"用户所属账号名。","example":"exampledomain","type":"string"}},"required":["id","name"]},"TokenUserOsfederation":{"description":"","properties":{"groups":{"description":"用户组信息列表。","items":{"$ref":"#/definitions/OsfederationGroups"},"type":"array"},"identity_provider":{"$ref":"#/definitions/OsfederationIdentityprovider","description":"身份提供商信息。"},"protocol":{"$ref":"#/definitions/OsfederationProtocol","description":"协议信息。","example":"fdec73ffea524aa1b373e40..."}},"required":["groups","identity_provider","protocol"]},"UnscopedTokenUser":{"description":"","properties":{"OS-FEDERATION":{"$ref":"#/definitions/TokenUserOsfederation","description":"联邦身份认证信息。","example":"2016-11-06T15:32:17.000000"},"domain":{"$ref":"#/definitions/TokenDomainResult","description":"用户所属账号信息。"},"id":{"description":"用户ID。","example":"QNSzD0bycqUXE4hiRNfyFcWfoOs8z6gT","type":"string"},"name":{"description":"用户名称。","example":"FederationUser","type":"string"}},"required":["OS-FEDERATION","domain","id","name"]}},"description":null,"group_id":"ab48a57262c6411fb8fb72acfcee84e1","host":"iam.cn-north-4.myhuaweicloud.com","id":"5ff90e3c8a1d4c47acbc341db62ba4bf","info_version":"v3","method":"post","name":"CreateUnscopeTokenByIdpInitiated","parameters":{},"paths":{"/v3.0/OS-FEDERATION/tokens":{"post":{"consumes":["application/x-www-form-urlencoded"],"deprecated":false,"description":"该接口可以用于通过IdP initiated的联邦认证方式获取unscoped token。\n\nUnscoped token不能用来鉴权,若联邦用户需要使用token进行鉴权,请参考[获取联邦认证scoped token](https://support.huaweicloud.com/api-iam/iam_13_0604.html)获取scoped token。\n\n该接口可以使用全局区域的Endpoint和其他区域的Endpoint调用。IAM的Endpoint请参见:[地区和终端节点](https://developer.huaweicloud.com/endpoint?IAM)。\n> - 该接口支持在命令行侧调用,需要客户端使用IdP initiated的联邦认证方式获取SAMLResponse,并采用浏览器提交表单数据的方式,获取unscoped token。","operationId":"CreateUnscopeTokenByIdpInitiated","parameters":[{"description":"身份提供商ID。","in":"header","name":"X-Idp-Id","required":true,"type":"string","x-example":"test_local_idp","x-order":1},{"description":"在IdP认证成功后返回的响应体。详情请参见:[获取联邦认证unscoped token(IdP initiated)](https://support.huaweicloud.com/api-iam/iam_02_0003.html)。","in":"formData","name":"SAMLResponse","required":true,"type":"string","x-example":"SAMLResponse=PD94bWwgdmVyc2lvbj0iMS4wIiBl4WXZ1OGNmYmRzWk1ZeWlLKy96anpEbm1rT2FrVVBrUmlSWEpLYUt5NzJtUmtoRFBCNjgwVQpzalU3R2hKNHE4ZG48L3hlbmM6Q2lwaGVyVmFsdWU%2BPC94ZW5jOkNpcGhlckRhdGE%2BPC94ZW5jOkVuY3J5cHRlZERhdGE%2BPC9zYW1sMjpFbmNyeXB0ZWRBc3NlcnRpb24%2BPC9zYW1sMnA6UmVzcG9uc2U%2B","x-order":2}],"produces":[],"responses":{"201":{"description":"创建成功。","examples":{"application/json":{"token":{"expires_at":"2020-02-13T14:21:34.042000Z","issued_at":"2020-02-12T14:21:34.042000Z","methods":["mapped"],"user":{"OS-FEDERATION":{"groups":[{"id":"06aa22601502cec4a23ac0084a74038f","name":"admin"}],"identity_provider":{"id":"ACME"},"protocol":{"id":"saml"}},"domain":{"id":"06ba0970a097acc0f36c0086bb6cfe0","name":"IAMDomain"},"id":"LdUTYSC7zmJVIic3yaCbLBXDxPAdDxLg","name":"FederationUser"}}}},"headers":{"X-Subject-Token":{"description":"签名后的unscoped token。","type":"string","x-example":"MIIatAYJKoZIhvcNAQcCoIIapTCCGqECAQExDTALB..."}},"schema":{"$ref":"#/definitions/CreateUnscopeTokenByIDPInitiatedResponseBody"}},"400":{"description":"参数无效。"},"401":{"description":"认证失败。"},"403":{"description":"没有操作权限。"},"405":{"description":"不允许的方法。"},"413":{"description":"请求体过大。"},"500":{"description":"内部服务错误。"},"503":{"description":"服务不可用。"}},"summary":"获取联邦认证unscoped token(IdP initiated)","tags":["联邦身份认证管理"],"x-apiexplorer-hide":"N","x-constraint":"","x-is-registered":"Y","x-name":"获取联邦认证unscoped token(IdP initiated)","x-order":102,"x-publishpath":"","x-request-examples-1":"SAMLResponse=PD94b...","x-request-examples-description-1":"","x-request-examples-text-1":"SAMLResponse=PD94b...","x-request-examples-url-1":"POST https://iam.myhuaweicloud.com/v3.0/OS-FEDERATION/tokens","x-scope":"Commercial","x-support-sdk":"Y","x-version":"v3.0"}}},"product_short":"IAM","region_id":"cn-north-4","schemes":["HTTPS"],"security_definitions":null,"summary":"获取联邦认证unscoped token(IdP initiated)","tags":"联邦身份认证管理","uri":null,"version":"2.0"}