{"base_path":null,"components":{"schemas":{"Agency":{"description":"委托或信任委托。","properties":{"agency_id":{"$ref":"#/components/schemas/AgencyId"},"agency_name":{"$ref":"#/components/schemas/AgencyName"},"created_at":{"description":"委托或信任委托创建时间。","format":"date-time","type":"string"},"description":{"description":"委托或信任委托描述信息。","type":"string"},"max_session_duration":{"$ref":"#/components/schemas/MaxSessionDuration"},"path":{"$ref":"#/components/schemas/Path"},"trust_domain_id":{"description":"被委托方账号ID,仅存在于委托中,不存在于信任委托中。","type":"string"},"trust_domain_name":{"description":"被委托方账号名,仅存在于委托中,不存在于信任委托中。","type":"string"},"trust_policy":{"$ref":"#/components/schemas/TrustPolicyDocument"},"urn":{"$ref":"#/components/schemas/Urn"}},"required":["urn","created_at","max_session_duration","path","agency_id","agency_name"],"type":"object"},"AgencyId":{"description":"委托或信任委托ID,长度为1到64个字符,只包含字母、数字和\"-\"的字符串。","maxLength":64,"minLength":1,"pattern":"^[a-zA-Z0-9-]{1,64}$","type":"string"},"AgencyName":{"description":"委托或信任委托名称,长度为1到64个字符,只包含字母、数字、\"_\"、\"+\"、\"=\"、\",\"、\".\"、\"@\"和\"-\"的字符串。","maxLength":64,"minLength":1,"pattern":"^[\\w+=,.@-]+$","type":"string"},"ConflictErrorResp":{"properties":{"error_code":{"description":"错误码。","type":"string"},"error_msg":{"description":"错误信息。","type":"string"},"request_id":{"description":"请求ID。","type":"string"}},"required":["error_code","error_msg","request_id"],"type":"object"},"CreateServiceLinkedAgencyReqBody":{"properties":{"description":{"description":"服务关联委托描述信息,不能包含特定字符\"@\"、\"#\"、\"%\"、\"&\"、\"<\"、\">\"、\"\\\\\"、\"$\"、\"^\"和\"*\"的字符串。","maxLength":1000,"pattern":"^[^@#%&<>\\\\\\$\\^\\*]*$","type":"string"},"service_principal":{"$ref":"#/components/schemas/ServicePrincipal"}},"required":["service_principal"],"type":"object"},"CreateServiceLinkedAgencyResp":{"properties":{"agency":{"$ref":"#/components/schemas/Agency"}},"required":["agency"],"type":"object"},"ForbiddenErrorResp":{"properties":{"encoded_authorization_message":{"description":"加密后的认证失败信息,可以通过STS5解密接口进行解密。","type":"string"},"error_code":{"description":"错误码。","type":"string"},"error_msg":{"description":"错误信息。","type":"string"},"request_id":{"description":"请求ID。","type":"string"}},"required":["error_code","error_msg","request_id"],"type":"object"},"MaxSessionDuration":{"default":3600,"description":"委托或信任委托最大会话时长,默认为3600秒,取值范围为[3600,43200]。","format":"int32","maximum":43200,"minimum":3600,"type":"integer"},"NotFoundErrorResp":{"properties":{"error_code":{"description":"错误码。","type":"string"},"error_msg":{"description":"错误信息。","type":"string"},"request_id":{"description":"请求ID。","type":"string"}},"required":["error_code","error_msg","request_id"],"type":"object"},"Path":{"default":"","description":"资源路径,默认为空串。由若干段字符串拼接而成,每段先包含一个或多个字母、数字、\".\"、\",\"、\"+\"、\"@\"、\"=\"、\"_\"或\"-\",并以\"/\"结尾,例如\"foo/bar/\"。","maxLength":512,"pattern":"^([A-Za-z0-9\\.,\\+@=_-]+/)*$","type":"string"},"ServicePrincipal":{"description":"服务主体,由\"service.\"开头,后跟一个长度为1到56个字符,只包含字母、数字和\"-\"的字符串。","pattern":"^service\\.[a-zA-Z0-9-]{1,56}$","type":"string"},"TrustPolicyDocument":{"description":"信任委托信任策略的策略文档的json格式。下面的字符`= < > ( ) |`是语法中的特殊字符,不包含在信任策略中。\n\n问号`?`表示元素是可选的。例如`sid_block?`。\n\n竖线`|`表示可选项,括号定义了可选项的范围。例如`(\"Allow\" | \"Deny\")`。\n\n当一个元素允许多个值时,使用重复值`,`以及`...`表示。例如`[ <policy_statement>, <policy_statement>, ... ]`。\n\n下面的递归文法描述了信任策略的语法:\n```\npolicy = {\n  <version_block>,\n  <statement_block>\n}\n\n<version_block> = \"Version\" : (\"5.0\")\n\n<statement_block> = \"Statement\" : [ <policy_statement>, <policy_statement>, ... ]\n\n<policy_statement> = {\n  <sid_block?>,\n  <principal_block>,\n  <effect_block>,\n  <action_block>,\n  <resource_block?>,\n  <condition_block?>\n}\n\n<sid_block> = \"Sid\" : <sid_string>\n\n<principal_block> = (\"Principal\" | \"NotPrincipal\") : <principal_map>\n\n<principal_map> = { <principal_map_entry>, <principal_map_entry>, ... }\n\n<principal_map_entry> = (\"IAM\" | \"Service\") : [ <principal_id_string>, ... | <service_principal_string>, ... ]\n\n<effect_block> = \"Effect\" : (\"Allow\" | \"Deny\")\n\n<action_block> = (\"Action\" | \"NotAction\") : [ <action_string>, <action_string>, ... ]\n\n<resource_block> = (\"Resource\" | \"NotResource\") : [ <resource_string>, <resource_string>, ... ]\n\n<condition_block> = \"Condition\" : { <condition_map> }\n\n<condition_map> = {\n  <condition_type_string> : { <condition_key_string> : <condition_value_list> },\n  <condition_type_string> : { <condition_key_string> : <condition_value_list> },\n  ...\n}\n\n<condition_value_list> = ( <condition_value> | [ <condition_value>, <condition_value>, ... ] )\n\n<condition_value> = \"string\"\n```","maxLength":131072,"minLength":1,"type":"string"},"Urn":{"description":"统一资源名称。","maxLength":1500,"minLength":16,"pattern":"^[A-Za-z0-9/=_:-]+$","type":"string"}}},"consumes":"","definitions":null,"description":null,"group_id":"ab48a57262c6411fb8fb72acfcee84e1","host":"iam.cn-north-4.myhuaweicloud.com","id":"f4cfcbe1c9e4402abdb302e63e771909","info_version":"v5","method":"put","name":"CreateServiceLinkedAgencyV5","parameters":null,"paths":{"/v5/service-linked-agencies":{"put":{"description":"该接口可以用于创建服务关联委托。","operationId":"CreateServiceLinkedAgencyV5","requestBody":{"content":{"application/json":{"example":{"description":"description","service_principal":"service.xxx"},"schema":{"$ref":"#/components/schemas/CreateServiceLinkedAgencyReqBody"}}},"description":"服务主体信息","required":true},"responses":{"201":{"content":{"application/json":{"example":{"agency":{"agency_id":"id","agency_name":"name","created_at":"2023-09-11T10:13:25.414Z","description":"description","max_session_duration":3600,"path":"service-linked-agency/service.xxx/","trust_domain_id":null,"trust_domain_name":null,"trust_policy":"{\"Version\":\"5.0\",\"Statement\":[{\"Action\":[\"sts:agencies:assume\",\"sts::tagSession\",\"sts::setSourceIdentity\"],\"Effect\":\"Allow\",\"Principal\":{\"Service\":[\"service.xxx\"]}}]}","urn":"iam::accountid:agency:service-linked-agency/service.xxx/name"}},"schema":{"$ref":"#/components/schemas/CreateServiceLinkedAgencyResp"}}},"description":"请求成功。"},"403":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ForbiddenErrorResp"}}},"description":"没有操作权限。"},"404":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/NotFoundErrorResp"}}},"description":"未找到相应的资源。"},"409":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ConflictErrorResp"}}},"description":"请求冲突。"}},"security":[{"apig-auth-iam-used-authn5":[]}],"summary":"创建服务关联委托","tags":["Agency"],"x-apiexplorer-hide":"N","x-is-registered":"Y","x-request-examples-1":{"description":"description","service_principal":"service.xxx"},"x-request-examples-description-1":"创建服务主体为service.xxx的服务关联委托。","x-request-examples-url-1":"PUT https://{endpoint}/v5/service-linked-agencies","x-support-sdk":"Y"}}},"product_short":"IAM","region_id":"cn-north-4","schemes":["HTTPS"],"security_definitions":null,"summary":"创建服务关联委托","tags":"委托及信任委托管理","uri":null,"version":"3.0.3"}