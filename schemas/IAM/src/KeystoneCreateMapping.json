{"base_path":"/","components":null,"consumes":"[\"application/json;charset=UTF-8\"]","definitions":{"KeystoneCreateMappingRequestBody":{"description":"","properties":{"mapping":{"$ref":"#/definitions/MappingOption","description":"映射信息。"}},"required":["mapping"]},"KeystoneCreateMappingResponseBody":{"description":"","properties":{"mapping":{"$ref":"#/definitions/MappingResult","description":"映射信息。"}},"required":["mapping"]},"LinksSelf":{"description":"","properties":{"self":{"description":"资源链接地址。","example":"https://iam.myhuaweicloud.com/v3/regions/la-south-2","type":"string"}},"required":["self"]},"MappingOption":{"description":"","properties":{"rules":{"description":"将联邦用户映射为本地用户的规则列表。","items":{"$ref":"#/definitions/MappingRules"},"type":"array"}},"required":["rules"]},"MappingResult":{"description":"","properties":{"id":{"description":"映射ID。","example":"ACME","type":"string"},"links":{"$ref":"#/definitions/LinksSelf","description":"映射的资源链接信息。"},"rules":{"description":"将联邦用户映射为本地用户的规则列表。","items":{"$ref":"#/definitions/MappingRules"},"type":"array"}},"required":["id","links","rules"]},"MappingRules":{"properties":{"local":{"description":"表示联邦用户在本系统中的用户信息。 user:联邦用户在本系统中的用户名称。group:联邦用户在本系统中所属用户组。","items":{"$ref":"#/definitions/RulesLocal"},"type":"array"},"remote":{"description":"表示联邦用户在IdP中的用户信息。由断言属性及运算符组成的表达式,取值由断言决定。","items":{"$ref":"#/definitions/RulesRemote"},"type":"array"}},"required":["local","remote"],"type":"object"},"RulesLocal":{"description":"联邦用户映射到IAM中的身份信息","properties":{"group":{"description":"联邦用户在本系统中所属用户组","properties":{"name":{"description":"联邦用户在本系统中所属用户组","example":"admin","type":"string"}},"required":["name"]},"groups":{"description":"联邦用户在本系统中所属用户组列表","required":true,"type":"string"},"user":{"description":"联邦用户在本系统中的用户名称","properties":{"name":{"description":"联邦用户在本系统中的用户名称","example":"{0}","type":"string"}},"required":["name"]}},"type":"object"},"RulesRemote":{"description":"","properties":{"any_one_of":{"description":"输入属性值中包含指定值才生效,并返回布尔值,返回值不能用于local块中的占位符。在同一个remote数组元素中,any_one_of与not_any_of互斥,两者至多填写一个,不能同时填写。","items":{"type":"string"},"type":"array"},"not_any_of":{"description":"输入属性值中不包含指定值才生效,并返回布尔值,返回值不能用于local块中的占位符。在同一个remote数组元素中,any_one_of与not_any_of互斥,两者至多填写一个,不能同时填写。","items":{"type":"string"},"type":"array"},"type":{"description":"表示IdP断言中的属性。","example":"UserName","type":"string"}},"required":["type"]}},"description":null,"group_id":"ab48a57262c6411fb8fb72acfcee84e1","host":"iam.cn-north-4.myhuaweicloud.com","id":"1b5ea943f7dc49d5b579cde81f175d31","info_version":"v3","method":"put","name":"KeystoneCreateMapping","parameters":{},"paths":{"/v3/OS-FEDERATION/mappings/{id}":{"put":{"consumes":[],"deprecated":false,"description":"该接口可以用于[管理员](https://support.huaweicloud.com/usermanual-iam/iam_01_0001.html)注册映射。\n\n该接口可以使用全局区域的Endpoint和其他区域的Endpoint调用。IAM的Endpoint请参见:[地区和终端节点](https://developer.huaweicloud.com/endpoint?IAM)。","operationId":"KeystoneCreateMapping","parameters":[{"description":"拥有Security Administrator权限的token。","in":"header","name":"X-Auth-Token","required":true,"type":"string","x-example":"MIIDkgYJKoZIhvcNAQcCoIIDgzCCA38CAQExDTALBglghkgBZQMEAgEwgXXXXX...","x-order":1},{"description":"待注册的映射ID。","in":"path","name":"id","required":true,"type":"string","x-example":"ACME","x-order":2},{"description":"请求体。","in":"body","name":"KeystoneCreateMappingRequestBody","required":true,"schema":{"$ref":"#/definitions/KeystoneCreateMappingRequestBody"},"x-order":3}],"produces":[],"responses":{"201":{"description":"创建成功。","examples":{"application/json":{"mapping":{"id":"ACME","links":{"self":"https://iam.myhuaweicloud.com/v3/OS-FEDERATION/mappings/ACME"},"rules":[{"local":[{"user":{"name":"LocalUser"}},{"group":{"name":"LocalGroup"}}],"remote":[{"type":"UserName"},{"not_any_of":["Contractor","Guest"],"type":"orgPersonType"}]}]}}},"schema":{"$ref":"#/definitions/KeystoneCreateMappingResponseBody"}},"400":{"description":"参数无效。"},"401":{"description":"认证失败。"},"403":{"description":"没有操作权限。"},"404":{"description":"未找到相应的资源。"},"405":{"description":"不允许的方法。"},"409":{"description":"资源冲突。"},"413":{"description":"请求体过大。"},"500":{"description":"内部服务错误。"},"503":{"description":"服务不可用。"}},"summary":"注册映射","tags":["联邦身份认证管理"],"x-apiexplorer-hide":"N","x-constraint":"","x-is-registered":"Y","x-name":"注册映射","x-order":90,"x-publishpath":"","x-request-examples-1":{"mapping":{"rules":[{"local":[{"user":{"name":"LocalUser"}},{"group":{"name":"LocalGroup"}}],"remote":[{"type":"UserName"},{"not_any_of":["Contractor","Guest"],"type":"orgPersonType"}]}]}},"x-request-examples-description-1":"","x-request-examples-text-1":"{\n    \"mapping\": {\n        \"rules\": [\n            {\n                \"local\": [\n                    {\n                        \"user\": {\n                            \"name\": \"LocalUser\"\n                        }\n                    },\n                    {\n                        \"group\": {\n                            \"name\": \"LocalGroup\"\n                        }\n                    }\n                ],\n                \"remote\": [\n                    {\n                        \"type\": \"UserName\"\n                    },\n                    {\n                        \"type\": \"orgPersonType\",\n                        \"not_any_of\": [\n                            \"Contractor\",\n                            \"Guest\"\n                        ]\n                    }\n                ]\n            }\n        ]\n    }\n}","x-request-examples-url-1":"PUT https://iam.myhuaweicloud.com/v3/OS-FEDERATION/mappings/{id}","x-scope":"Commercial","x-support-sdk":"Y","x-version":"v3"}}},"product_short":"IAM","region_id":"cn-north-4","schemes":["HTTPS"],"security_definitions":null,"summary":"注册映射","tags":"联邦身份认证管理","uri":null,"version":"2.0"}