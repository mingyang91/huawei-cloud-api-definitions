{"base_path":null,"components":null,"consumes":"[\"application/json;charset=UTF-8\"]","definitions":{"ActionDeviceAlarm":{"description":"上报设备告警消息结构","properties":{"alarm_status":{"description":"**参数说明**:告警状态。\n**取值范围**:\n- fault:上报告警。\n- recovery:恢复告警。","example":"fault","pattern":"(fault|recovery)","type":"string"},"description":{"description":"**参数说明**:告警的描述信息。","example":"****设备属性异常。","maxLength":256,"type":"string"},"dimension":{"description":"**参数说明**:告警维度,与告警名称和告警级别组合起来共同标识一条告警,默认不携带该字段为用户维度告警,支持设备维度和资源空间维度告警。\n**取值范围**:\n- device:设备维度。\n- app:资源空间维度。","example":"device","pattern":"(device|app)","type":"string"},"name":{"description":"**参数说明**:告警名称。","example":"设备属性异常","maxLength":256,"type":"string"},"severity":{"description":"**参数说明**:告警级别。\n**取值范围**:warning(警告)、minor(一般)、major(严重)和critical(致命)。","example":"warning","pattern":"(warning|minor|major|critical)","type":"string"}},"required":["alarm_status","name","severity"],"title":"上报设备告警消息内容","type":"object","x-annotations":["@JsonInclude(JsonInclude.Include.NON_NULL)","@JsonIgnoreProperties(ignoreUnknown = true)"],"x-imports":["com.fasterxml.jackson.annotation.JsonInclude","com.fasterxml.jackson.annotation.JsonIgnoreProperties"],"x-onlyCustomAnnotation":true},"ActionDeviceCommand":{"description":"下发设备命令消息结构","properties":{"cmd":{"$ref":"#/definitions/CMD","description":"**参数说明**:下发的命令信息。"},"device_id":{"description":"**参数说明**:下发命令的设备ID。\n- 当创建设备数据规则时,若device_id为空,则命令下发给触发条件的设备。 \n- 当创建定时规则时,不允许为空。\n**取值范围**:长度不超过128,只允许字母、数字、下划线(_)、连接符(-)的组合。","example":"3a9e52d9-3ebf-4985-89e9-6d2396748a2f","pattern":"^[a-zA-Z0-9_-]{1,128}$","type":"string"}},"required":["cmd"],"title":"下发设备命令消息内容","type":"object","x-annotations":["@JsonInclude(JsonInclude.Include.NON_NULL)","@JsonIgnoreProperties(ignoreUnknown = true)"],"x-imports":["com.fasterxml.jackson.annotation.JsonInclude","com.fasterxml.jackson.annotation.JsonIgnoreProperties"],"x-onlyCustomAnnotation":true},"ActionSmnForwarding":{"description":"发送给SMN消息结构","properties":{"message_content":{"description":"**参数说明**:短信或邮件的内容。","example":"message_content","maxLength":1024,"type":"string"},"message_template_name":{"description":"**参数说明**:SMN服务对应的模板名称。","example":"message_template_name","pattern":"^[a-zA-Z0-9][a-zA-Z0-9-_]{0,63}$","type":"string"},"message_title":{"description":"**参数说明**:短信或邮件的主题。最大长度支持UTF-8编码后的521个字节。","example":"message_title","type":"string"},"project_id":{"description":"**参数说明**:SMN服务对应的projectId信息。","example":"project_id","type":"string"},"region_name":{"description":"**参数说明**:SMN服务对应的region区域。","example":"region_name","maxLength":256,"type":"string"},"theme_name":{"description":"**参数说明**:SMN服务对应的主题名称。","example":"theme_name","maxLength":256,"type":"string"},"topic_urn":{"description":"**参数说明**:SMN服务对应的topic的主题URN。","example":"topic_urn","maxLength":256,"type":"string"}},"required":["message_title","project_id","region_name","theme_name","topic_urn"],"title":"SMN发送信息","type":"object","x-annotations":["@JsonInclude(JsonInclude.Include.NON_NULL)","@JsonIgnoreProperties(ignoreUnknown = true)"],"x-imports":["com.fasterxml.jackson.annotation.JsonInclude","com.fasterxml.jackson.annotation.JsonIgnoreProperties"],"x-onlyCustomAnnotation":true},"CMD":{"description":"给设备下发命令的命令内容,在动作的type为“DEVICE_CMD”时有效,且为必选","properties":{"buffer_timeout":{"default":172800,"description":"**参数说明**:设备命令的缓存时间,单位为秒,表示物联网平台在把命令下发给设备前缓存命令的有效时间,超过这个时间后命令将不再下发,默认值为172800s(48小时)。\n如果buffer_timeout设置为0,则无论物联网平台上设置的命令下发模式是什么,该命令都会立即下发给设备。","example":0,"format":"int32","maximum":31536000,"minimum":0,"type":"integer"},"command_body":{"description":"**参数说明**:设备命令参数,Json格式。\n使用LWM2M协议设备命令示例:{\"value\":\"1\"},里面是一个个键值对,每个键都是产品模型中命令的参数名(paraName)。\n使用MQTT协议设备命令示例:{\"header\": {\"mode\": \"ACK\",\"from\": \"/users/testUser\",\"method\": \"SET_TEMPERATURE_READ_PERIOD\",\"to\":\"/devices/{device_id}/services/{service_id}\"},\"body\": {\"value\" : \"1\"}}。\n- mode:必选,设备收到命令后是否需要回复确认消息,默认为ACK模式。ACK表示需要回复确认消息,NOACK表示不需要回复确认消息,其它值无效。\n- from:可选,命令发送方的地址。App发起请求时格式为/users/{userId} ,应用服务器发起请求时格式为/{serviceName},物联网平台发起请求时格式为/cloud/{serviceName}。\n- to:可选,命令接收方的地址,格式为/devices/{device_id}/services/{service_id}。\n- method:可选,产品模型中定义的命令名称。\n- body:可选,命令的消息体,里面是一个个键值对,每个键都是产品模型中命令的参数名(paraName)。具体格式需要应用和设备约定。","example":{"value":0},"properties":{},"type":"object","x-Type":"object"},"command_name":{"description":"**参数说明**:设备命令名称,在设备关联的产品模型中定义。","example":"SET_LIGHT_SWITCH","maxLength":128,"type":"string","x-NotEmpty":true},"mode":{"description":"**参数说明**:设备命令的下发模式,仅当buffer_timeout的值大于0时有效。\n- ACTIVE:主动模式,物联网平台主动将命令下发给设备。\n- PASSIVE:被动模式,物联网平台创建设备命令后,会直接缓存命令。等到设备再次上线或者上报上一条命令的执行结果后才下发命令。","type":"string"},"response_timeout":{"default":1800,"description":"**参数说明**:命令响应的有效时间,单位为秒,表示设备接收到命令后,在response_timeout时间内响应有效,超过这个时间未收到命令的响应,则认为命令响应超时,默认值为1800s。","example":1800,"format":"int32","maximum":31536000,"minimum":1,"type":"integer"},"service_id":{"description":"**参数说明**:设备命令所属的设备服务ID,在设备关联的产品模型中定义。","example":"Switch","maxLength":64,"type":"string","x-NotEmpty":true}},"required":["command_body","command_name","service_id"],"title":"设备下发命令结构体","type":"object","x-annotations":["@JsonInclude(JsonInclude.Include.NON_NULL)","@JsonIgnoreProperties(ignoreUnknown = true)"],"x-imports":["com.fasterxml.jackson.annotation.JsonInclude","com.fasterxml.jackson.annotation.JsonIgnoreProperties"],"x-onlyCustomAnnotation":true},"ConditionGroup":{"description":"规则条件组","properties":{"conditions":{"description":"**参数说明**:规则的条件列表,单个规则最多支持设置10个条件。","items":{"$ref":"#/definitions/RuleCondition"},"type":"array","x-maxLength":10},"logic":{"description":"**参数说明**:规则条件列表中多个条件之间的逻辑关系,默认值:and。\n**取值范围**:\n- and:逻辑且。\n- or:逻辑或。","example":"or","pattern":"(and|or)","type":"string"},"time_range":{"$ref":"#/definitions/TimeRange","description":"**参数说明**:规则条件触发的有效时间段。"}},"title":"规则条件组","type":"object","x-annotations":["@JsonInclude(JsonInclude.Include.NON_NULL)","@JsonIgnoreProperties(ignoreUnknown = true)"],"x-imports":["com.fasterxml.jackson.annotation.JsonInclude","com.fasterxml.jackson.annotation.JsonIgnoreProperties"],"x-onlyCustomAnnotation":true},"DailyTimerType":{"description":"条件中每日定时类型的信息,自定义结构。","properties":{"days_of_week":{"description":"**参数说明**:星期列表,以逗号分隔。1代表周日,2代表周一,依次类推,默认为每天。","example":"2,3,4,5,6","maxLength":128,"pattern":"^[1-7](,[1-7]){0,6}$","type":"string"},"time":{"description":"**参数说明**:规则触发的时间,格式:HH:MM。","example":"07:00","maxLength":128,"pattern":"^((1|0?)[0-9]|2[0-3]){1}:([0-5]{0,1}[0-9]){1}$","type":"string"}},"required":["time"],"title":"每日定时类型","type":"object","x-annotations":["@JsonInclude(JsonInclude.Include.NON_NULL)","@JsonIgnoreProperties(ignoreUnknown = true)"],"x-imports":["com.fasterxml.jackson.annotation.JsonInclude","com.fasterxml.jackson.annotation.JsonIgnoreProperties"],"x-onlyCustomAnnotation":true},"DeviceDataCondition":{"description":"条件中设备数据类型的信息,自定义结构。","properties":{"device_id":{"description":"**参数说明**:设备ID,用于唯一标识一个设备,在注册设备时由物联网平台分配获得。存在该参数时设备属性触发根据指定设备触发,该参数值和product_id不能同时为空。如果该参数和product_id同时存在时,以该参数值对应的设备进行条件过滤。\n**取值范围**:长度不超过128,只允许字母、数字、下划线(_)、连接符(-)的组合。","example":"07b69d78-c716-4be6-9545-869920738397","pattern":"^[a-zA-Z0-9_-]{1,128}$","type":"string"},"filters":{"description":"数据过滤条件。","items":{"$ref":"#/definitions/PropertyFilter"},"type":"array","x-maxLength":10},"product_id":{"description":"**参数说明**:设备关联的产品ID,用于唯一标识一个产品模型,创建产品后获得。方法请参见 [创建产品](https://support.huaweicloud.com/api-iothub/iot_06_v5_0050.html)。存在该参数且device_id为空时设备属性触发匹配该产品下所有设备触发,该参数值和device_id不能同时为空。","example":"074abacf-cdb1-4f52-8c88-5864e50d332c","maxLength":128,"type":"string"}},"title":"设备属性数据类型","type":"object","x-annotations":["@JsonInclude(JsonInclude.Include.NON_NULL)","@JsonIgnoreProperties(ignoreUnknown = true)"],"x-imports":["com.fasterxml.jackson.annotation.JsonInclude","com.fasterxml.jackson.annotation.JsonIgnoreProperties"],"x-onlyCustomAnnotation":true},"DeviceLinkageStatusCondition":{"description":"条件中设备状态类型的信息,自定义结构。","properties":{"device_id":{"description":"**参数说明**:设备ID,用于唯一标识一个设备,在注册设备时由物联网平台分配获得。存在该参数时设备状态触发根据指定设备触发,该参数值和product_id不能同时为空。如果该参数和product_id同时存在时,以该参数值对应的设备进行条件过滤。\n**取值范围**:长度不超过128,只允许字母、数字、下划线(_)、连接符(-)的组合。","example":"07b69d78-c716-4be6-9545-869920738397","pattern":"^[a-zA-Z0-9_-]{1,128}$","type":"string"},"duration":{"default":0,"description":"**持续时长**:设备状态持续时长,取值范围: 0-60(分钟)。","example":0,"format":"int32","maximum":60,"minimum":0,"type":"integer"},"product_id":{"description":"**参数说明**:设备关联的产品ID,用于唯一标识一个产品模型,创建产品后获得。方法请参见 [创建产品](https://support.huaweicloud.com/api-iothub/iot_06_v5_0050.html)。存在该参数且device_id为空时设备状态触发匹配该产品下所有设备触发,该参数值和device_id不能同时为空。","example":"074abacf-cdb1-4f52-8c88-5864e50d332c","maxLength":128,"type":"string"},"status_list":{"description":"**参数说明**:状态列表,设备状态条件携带该参数。\n**取值范围**:\n- ONLINE:设备上线\n- OFFLINE:设备下线","example":"[ONLINE,OFFLINE]","items":{"maxLength":128,"type":"string"},"type":"array","x-maxLength":2}},"title":"设备联动状态类型","type":"object","x-annotations":["@JsonInclude(JsonInclude.Include.NON_NULL)","@JsonIgnoreProperties(ignoreUnknown = true)"],"x-imports":["com.fasterxml.jackson.annotation.JsonInclude","com.fasterxml.jackson.annotation.JsonIgnoreProperties"],"x-onlyCustomAnnotation":true},"DeviceSide":{"description":"端侧设备信息","properties":{"device_ids":{"description":"**参数说明**:端侧执行下发的目标设备ID列表。设备ID,用于唯一标识一个设备,在注册设备时由物联网平台分配获得。","example":["07b69d78-c716-4be6-9545-869920738397"],"items":{"maxLength":128,"type":"string"},"maxItems":5,"type":"array"}},"title":"端侧设备信息","type":"object","x-annotations":["@JsonInclude(JsonInclude.Include.NON_NULL)","@JsonIgnoreProperties(ignoreUnknown = true)"],"x-imports":["com.fasterxml.jackson.annotation.JsonInclude","com.fasterxml.jackson.annotation.JsonIgnoreProperties"],"x-onlyCustomAnnotation":true},"PropertyFilter":{"description":"设备属性过滤信息,自定义结构。","properties":{"in_values":{"description":"**参数说明**:当operator为in时该字段必填,使用该字段传递比较表达式右值,上限为20个。","items":{"maxLength":128,"type":"string"},"type":"array","x-maxLength":20},"operator":{"description":"**参数说明**:数据比较的操作符。\n**取值范围**:当前支持的操作符有:>,<,>=,<=,=,in:表示在指定值中匹配和between:表示数值区间。","example":"<","pattern":"(>|<|>=|<=|=|between|in|geo.circle.in|geo.circle.out)","type":"string"},"path":{"description":"**参数说明**:设备属性的路径信息,格式:service_id/DataProperty,例如门磁状态为“DoorWindow/status”。","example":"StreetLight/visibility","maxLength":128,"type":"string"},"strategy":{"$ref":"#/definitions/Strategy","description":"**参数说明**:规则条件的处理策略,用于确定规则是否判断上次数据是否满足条件。当rule_type为DEVICE_LINKAGE时,该参数值不能为空。端侧执行不支持该字段。"},"value":{"description":"**参数说明**:数据比较表达式的右值。与数据比较操作符between联用时,右值表示最小值和最大值,用逗号隔开,如“20,30”表示大于等于20小于30。","example":"30","maxLength":64,"type":"string"}},"required":["operator","path"],"title":"设备属性过滤信息","type":"object","x-annotations":["@JsonInclude(JsonInclude.Include.NON_NULL)","@JsonIgnoreProperties(ignoreUnknown = true)"],"x-imports":["com.fasterxml.jackson.annotation.JsonInclude","com.fasterxml.jackson.annotation.JsonIgnoreProperties"],"x-onlyCustomAnnotation":true},"Rule":{"description":"规则请求结构体","properties":{"actions":{"description":"**参数说明**:规则的动作列表,单个规则最多支持设置10个动作。","items":{"$ref":"#/definitions/RuleAction"},"type":"array","x-maxLength":10,"x-minLength":1},"app_id":{"description":"**参数说明**:资源空间ID。此参数为非必选参数,存在多资源空间的用户需要使用该接口时,建议携带该参数指定创建的规则归属到哪个资源空间下,否则创建的规则将会归属到[默认资源空间](https://support.huaweicloud.com/usermanual-iothub/iot_01_0006.html#section0)下。\n**取值范围**:长度不超过36,只允许字母、数字、下划线(_)、连接符(-)的组合。","pattern":"^[a-zA-Z0-9_-]{1,36}$","type":"string"},"condition_group":{"$ref":"#/definitions/ConditionGroup","description":"**参数说明**:规则的条件组,包含简单规则和复杂规则集合。"},"description":{"description":"**参数说明**:规则的描述信息。","maxLength":256,"type":"string"},"device_side":{"$ref":"#/definitions/DeviceSide","description":"**参数说明**:端侧执行下发设备信息,当规则类型为DEVICE_SIDE时,该参数必填。"},"name":{"description":"**参数说明**:规则名称。","example":"openLight","maxLength":128,"minLength":1,"type":"string"},"rule_type":{"description":"**参数说明**:规则的类型。\n**取值范围**:\n- DEVICE_LINKAGE:云端联动规则。 \n- DEVICE_SIDE:端侧规则。","example":"DEVICE_LINKAGE","pattern":"(DEVICE_LINKAGE|DATA_FORWARDING|EDGE|DEVICE_SIDE)","type":"string"},"status":{"description":"**参数说明**:规则的状态,默认值:active。\n**取值范围**:\n- active:激活。\n- inactive:未激活。","pattern":"(active|inactive)","type":"string"}},"required":["actions","condition_group","name","rule_type"],"title":"规则请求结构体","type":"object","x-annotations":["@JsonInclude(JsonInclude.Include.NON_NULL)","@JsonIgnoreProperties(ignoreUnknown = true)"],"x-imports":["com.fasterxml.jackson.annotation.JsonInclude","com.fasterxml.jackson.annotation.JsonIgnoreProperties"],"x-onlyCustomAnnotation":true},"RuleAction":{"description":"规则动作结构体","properties":{"device_alarm":{"$ref":"#/definitions/ActionDeviceAlarm","description":"上报设备告警消息内容。当规则类型为DEVICE_LINKAGE且type为DEVICE_ALARM时,必填。"},"device_command":{"$ref":"#/definitions/ActionDeviceCommand","description":"下发设备命令消息内容。当type为DEVICE_CMD时,必填。"},"smn_forwarding":{"$ref":"#/definitions/ActionSmnForwarding","description":"发送给SMN消息结构。当规则类型为DEVICE_LINKAGE且type为SMN_FORWARDING时,必填。"},"type":{"description":"**参数说明**:规则动作的类型,端侧执行只支持下发设备命令消息类型。\n**取值范围**:\n- DEVICE_CMD:下发设备命令消息类型。\n- SMN_FORWARDING:发送SMN消息类型。\n- DEVICE_ALARM:上报设备告警消息类型。当选择该类型时,condition中必须有DEVICE_DATA条件类型。该类型动作只能唯一。","example":"DEVICE_CMD","pattern":"(DEVICE_CMD|SMN_FORWARDING|DEVICE_ALARM|DIS_FORWARDING|OBS_FORWARDING|ROMA_FORWARDING|IoTA_FORWARDING|KAFKA_FORWARDING)","type":"string"}},"required":["type"],"title":"规则动作结构体","type":"object","x-Doc-ignore":"dis_forwarding,obs_forwarding,roma_forwarding,iota_forwarding,kafka_forwarding","x-annotations":["@JsonInclude(JsonInclude.Include.NON_NULL)","@JsonIgnoreProperties(ignoreUnknown = true)"],"x-imports":["com.fasterxml.jackson.annotation.JsonInclude","com.fasterxml.jackson.annotation.JsonIgnoreProperties"],"x-onlyCustomAnnotation":true},"RuleCondition":{"description":"规则条件结构体","properties":{"daily_timer_condition":{"$ref":"#/definitions/DailyTimerType","description":"**参数说明**:条件中每日定时类型的信息,当type为DAILY_TIMER时,为必选参数。"},"device_linkage_status_condition":{"$ref":"#/definitions/DeviceLinkageStatusCondition","description":"**参数说明**:条件中设备状态类型的信息,当规则类型为DEVICE_LINKAGE且type为DEVICE_LINKAGE_STATUS时,为必选参数。"},"device_property_condition":{"$ref":"#/definitions/DeviceDataCondition","description":"**参数说明**:条件中设备数据类型的信息,当type为DEVICE_DATA时,为必选参数。"},"simple_timer_condition":{"$ref":"#/definitions/SimpleTimerType","description":"**参数说明**:条件中简单定时类型的信息,当type为SIMPLE_TIMER时,为必选参数。"},"type":{"description":"**参数说明**:规则条件的类型。\n**取值范围**:\n- DEVICE_DATA:设备属性数据类型条件。\n- SIMPLE_TIMER:简单定时类型条件。\n- DAILY_TIMER:每日定时类型条件。\n- DEVICE_LINKAGE_STATUS:设备状态类型条件。","example":"DEVICE_DATA","pattern":"(DEVICE_DATA|DAILY_TIMER|SIMPLE_TIMER|DEVICE_LINKAGE_STATUS|DEVICE_STATUS|DEVICE_LIFE_CYCLE|DEVICE_MESSAGE|MESSAGE_RESULTS)","type":"string"}},"required":["type"],"title":"规则条件结构体","type":"object","x-Doc-ignore":"device_message_condition,device_status_condition","x-annotations":["@JsonInclude(JsonInclude.Include.NON_NULL)","@JsonIgnoreProperties(ignoreUnknown = true)"],"x-imports":["com.fasterxml.jackson.annotation.JsonInclude","com.fasterxml.jackson.annotation.JsonIgnoreProperties"],"x-onlyCustomAnnotation":true},"RuleResponse":{"description":"规则响应结构体","properties":{"actions":{"description":"规则的动作列表,单个规则最多支持设置10个动作。","items":{"$ref":"#/definitions/RuleAction"},"type":"array","x-maxLength":10,"x-minLength":1},"app_id":{"description":"资源空间ID。此参数为非必选参数,存在多资源空间的用户需要使用该接口时,建议携带该参数指定创建的规则归属到哪个资源空间下,否则创建的规则将会归属到[默认资源空间](https://support.huaweicloud.com/usermanual-iothub/iot_01_0006.html#section0)下。","pattern":"^[a-zA-Z0-9_-]{1,36}$","type":"string"},"condition_group":{"$ref":"#/definitions/ConditionGroup","description":"规则的条件组,包含简单规则和复杂规则集合。"},"description":{"description":"规则的描述信息。","maxLength":256,"type":"string"},"device_side":{"$ref":"#/definitions/DeviceSide","description":"**参数说明**:端侧执行下发设备信息,当规则类型为DEVICE_SIDE时,该参数必填。"},"edge_node_ids":{"description":"归属边缘侧节点设备ID列表。","items":{"pattern":"^[a-zA-Z0-9_-]{1,128}$","type":"string"},"type":"array","x-maxLength":100},"last_update_time":{"description":"规则最后更新时间,使用UTC时区,格式:yyyyMMdd'T'HHmmss'Z'。","type":"string"},"name":{"description":"规则名称。","maxLength":128,"minLength":1,"type":"string"},"rule_id":{"description":"规则id。","maxLength":128,"type":"string"},"rule_type":{"description":"规则的类型\n- DEVICE_LINKAGE:云端联动规则。\n- DEVICE_SIDE:端侧规则。","pattern":"(DEVICE_LINKAGE|DATA_FORWARDING|EDGE|DEVICE_SIDE)","type":"string"},"status":{"description":"规则的状态,默认值:active。\n- active:激活。\n- inactive:未激活。","pattern":"(active|inactive)","type":"string"}},"required":["actions","condition_group","name","rule_type"],"title":"规则响应结构体","type":"object","x-annotations":["@JsonInclude(JsonInclude.Include.NON_NULL)","@JsonIgnoreProperties(ignoreUnknown = true)"],"x-imports":["com.fasterxml.jackson.annotation.JsonInclude","com.fasterxml.jackson.annotation.JsonIgnoreProperties"],"x-onlyCustomAnnotation":true},"SimpleTimerType":{"description":"条件中简单定时类型的信息,自定义结构。","properties":{"repeat_count":{"description":"**参数说明**:规则触发的重复次数。","example":1,"format":"int32","maximum":9999,"minimum":1,"type":"integer"},"repeat_interval":{"description":"**参数说明**:规则触发的重复时间间隔,单位为秒。","example":1,"format":"int32","maximum":31536000,"minimum":1,"type":"integer"},"start_time":{"description":"**参数说明**:规则触发的开始时间,使用UTC时区,格式:yyyyMMdd'T'HHmmss'Z'。","example":"20190122T141500Z","maxLength":128,"type":"string"}},"required":["repeat_count","repeat_interval","start_time"],"title":"简单定时类型","type":"object","x-annotations":["@JsonInclude(JsonInclude.Include.NON_NULL)","@JsonIgnoreProperties(ignoreUnknown = true)"],"x-imports":["com.fasterxml.jackson.annotation.JsonInclude","com.fasterxml.jackson.annotation.JsonIgnoreProperties"],"x-onlyCustomAnnotation":true},"Strategy":{"description":"配置条件处理策略,用于确定规则是否判断上次数据是否满足条件。当rule_type类型为 “DEVICE_LINKAGE”时,为必选参数。默认为pulse触发类型,事件有效性为永久有效","properties":{"event_valid_time":{"description":"**参数说明**:设备数据的有效时间,单位为秒,设备数据的产生时间以上报数据中的eventTime为基准。","example":300,"format":"int32","minimum":-1,"type":"integer"},"trigger":{"description":"**参数说明**:规则条件触发的判断策略,默认为pulse。\n**取值范围**:\n- pulse:设备上报的数据满足条件则触发,不判断上一次上报的数据。\n- reverse:设备上一次上报的数据不满足条件,本次上报的数据满足条件则触发。","example":"reverse","pattern":"(pulse|reverse)","type":"string"}},"title":"条件处理策略","type":"object","x-annotations":["@JsonInclude(JsonInclude.Include.NON_NULL)","@JsonIgnoreProperties(ignoreUnknown = true)"],"x-imports":["com.fasterxml.jackson.annotation.JsonInclude","com.fasterxml.jackson.annotation.JsonIgnoreProperties"],"x-onlyCustomAnnotation":true},"TimeRange":{"description":"规则有效时间段","properties":{"days_of_week":{"description":"**参数说明**:星期列表,以逗号分隔。1代表周日,2代表周一,依次类推,默认为每天。星期列表中的日期为开始时间的日期。","example":"2,3,4,5,6","pattern":"^[1-7](,[1-7]){0,6}$","type":"string"},"end_time":{"description":"**参数说明**:规则条件触发的结束时间,格式:HH:mm。若结束时间与开始时间一致,则时间为全天。","example":"23:00","pattern":"^((1|0?)[0-9]|2[0-3]){1}:([0-5]{0,1}[0-9]){1}$","type":"string"},"start_time":{"description":"**参数说明**:规则条件触发的开始时间,格式:HH:mm。","example":"18:00","pattern":"^((1|0?)[0-9]|2[0-3]){1}:([0-5]{0,1}[0-9]){1}$","type":"string"}},"required":["end_time","start_time"],"title":"规则有效时间段","type":"object","x-annotations":["@JsonInclude(JsonInclude.Include.NON_NULL)","@JsonIgnoreProperties(ignoreUnknown = true)"],"x-imports":["com.fasterxml.jackson.annotation.JsonInclude","com.fasterxml.jackson.annotation.JsonIgnoreProperties"],"x-onlyCustomAnnotation":true}},"description":null,"group_id":"bf0cdd341d8b4c6f833486a40289d422","host":"iotda.cn-north-4.myhuaweicloud.com","id":"cbb9cd0ef2fe49f4b598539df7f30cf5","info_version":"v5","method":"put","name":"UpdateRule","parameters":{},"paths":{"/v5/iot/{project_id}/rules/{rule_id}":{"put":{"consumes":["application/json"],"description":"应用服务器可调用此接口修改物联网平台中指定规则的配置。","operationId":"UpdateRule","parameters":[{"description":"**参数说明**:项目ID。获取方法请参见 [获取项目ID](https://support.huaweicloud.com/api-iothub/iot_06_v5_1001.html)。","in":"path","name":"project_id","pattern":"^[a-fA-F0-9]{1,32}$","required":true,"type":"string","x-example":"04ed32dc1b0025b52fe3c01a27c2b0a8"},{"description":"**参数说明**:用户Token。通过调用IAM服务 [获取IAM用户Token](https://support.huaweicloud.com/api-iam/iam_30_0001.html)接口获取,接口返回的响应消息头中“X-Subject-Token”就是需要获取的用户Token。简要的获取方法样例请参见 [Token认证](https://support.huaweicloud.com/api-iothub/iot_06_v5_0091.html#section0)。","in":"header","name":"X-Auth-Token","required":true,"type":"string","x-example":"********"},{"description":"**参数说明**:实例ID。物理多租下各实例的唯一标识,一般华为云租户无需携带该参数,仅在物理多租场景下从管理面访问API时需要携带该参数。您可以在IoTDA管理控制台界面,选择左侧导航栏“总览”页签查看当前实例的ID。","in":"header","name":"Instance-Id","pattern":"[a-f0-9-]{1,36}","required":false,"type":"string","x-example":"********"},{"description":"**参数说明**:规则ID,用于唯一标识一条规则,在创建规则时由物联网平台分配获得。\n**取值范围**:长度不超过32,只允许字母、数字的组合。","in":"path","name":"rule_id","pattern":"^[a-zA-Z0-9]{1,32}$","required":true,"type":"string","x-example":"5eb3628d017d9105d0cf9aec"},{"description":"**参数说明**:请求的body对象,详细请看规则结构体。","in":"body","name":"UpdateRuleRequestBody","required":true,"schema":{"$ref":"#/definitions/Rule"}}],"produces":["application/json"],"responses":{"200":{"description":"OK","examples":{"application/json":{"actions":[{"device_command":{"cmd":{"buffer_timeout":0,"command_body":{"value":0},"command_name":"SET_LIGHT_SWITCH","response_timeout":1800,"service_id":"Switch"},"device_id":"3a9e52d9-3ebf-4985-89e9-6d2396748a2f"},"type":"DEVICE_CMD"}],"app_id":"9562bf8541e44361b6ae3a7e9fbe1144","condition_group":{"conditions":[{"device_property_condition":{"device_id":"07b69d78-c716-4be6-9545-869920738397","filters":[{"operator":"<","path":"StreetLight/visibility","strategy":{"event_valid_time":300,"trigger":"reverse"},"value":"30"}]},"type":"DEVICE_DATA"}],"logic":"and"},"last_update_time":"20221017T025425Z","name":"openLight","rule_id":"5eb3628d017d9105d0cf9aec","rule_type":"DEVICE_LINKAGE","status":"active"}},"schema":{"$ref":"#/definitions/RuleResponse"}},"400":{"description":"Bad Request","x-Error":["IOTDA.000006","IOTDA.001001","IOTDA.010000","IOTDA.010004","IOTDA.010005","IOTDA.010006","IOTDA.010007","IOTDA.010008","IOTDA.010009","IOTDA.010010","IOTDA.010011","IOTDA.010012","IOTDA.010013"]},"403":{"description":"Forbidden","x-Error":["IOTDA.000004","IOTDA.000021","IOTDA.001000","IOTDA.001002","IOTDA.001005","IOTDA.001006","IOTDA.001007","IOTDA.010003"]},"404":{"description":"Not Found","x-Error":["IOTDA.010002"]},"500":{"description":"Internal Server Error","x-Error":["IOTDA.000007","IOTDA.000020"]}},"summary":"修改规则","tags":["RuleManagement"],"x-externalAPI":true,"x-iftype":"OpenAPI_new","x-is-registered":"Y","x-publishpath":"iot_06_v5_0085","x-request-examples-1":{"actions":[{"device_alarm":{"alarm_status":"fault","description":"****设备属性异常。","name":"设备属性异常","severity":"warning"},"device_command":{"cmd":{"buffer_timeout":0,"command_body":{"value":0},"command_name":"SET_LIGHT_SWITCH","mode":"string","response_timeout":1800,"service_id":"Switch"},"device_id":"3a9e52d9-3ebf-4985-89e9-6d2396748a2f"},"smn_forwarding":{"message_content":"message_content","message_title":"message_title","project_id":"project_id","region_name":"region_name","theme_name":"theme_name","topic_urn":"topic_urn"},"type":"DEVICE_CMD"}],"app_id":"string","condition_group":{"conditions":[{"daily_timer_condition":{"days_of_week":"2,3,4,5,6","time":"07:00"},"device_property_condition":{"device_id":"07b69d78-c716-4be6-9545-869920738397","filters":[{"operator":"<","path":"StreetLight/visibility","strategy":{"event_valid_time":300,"trigger":"reverse"},"value":"30"}],"product_id":"074abacf-cdb1-4f52-8c88-5864e50d332c"},"simple_timer_condition":{"repeat_count":1,"repeat_interval":1,"start_time":"20190122T141500Z"},"type":"DEVICE_DATA"}],"logic":"or","time_range":{"days_of_week":"2,3,4,5,6","end_time":"23:00","start_time":"18:00"}},"description":"string","name":"openLight","rule_type":"DEVICE_LINKAGE","status":"string"},"x-request-examples-url-1":"PUT https://{endpoint}/v5/iot/{project_id}/rules/{rule_id}","x-support-sdk":"Y"}}},"product_short":"IoTDA","region_id":"cn-north-4","schemes":["HTTPS"],"security_definitions":null,"summary":"修改规则","tags":"设备联动规则","uri":null,"version":"2.0"}