{"base_path":null,"components":null,"consumes":"[\"application/json;charset=UTF-8\"]","definitions":{"CreateProvisioningTemplate":{"description":"创建预调配模板请求体。","properties":{"description":{"description":"**参数说明**:预调配模板的描述信息。\n**取值范围**:长度不超过2048,只允许中文、字母、数字、以及_?'#().,&%@!-等字符的组合","example":"myTemplate","maxLength":2048,"pattern":"^[\\u4e00-\\u9fa5a-zA-Z0-9_? '#()\\.,&%@!-]*$","type":"string"},"template_body":{"$ref":"#/definitions/ProvisioningTemplateBody","description":"**参数说明**:预调配模板详细内容,json格式。"},"template_name":{"description":"**参数说明**:预调配模板名称。\n**取值范围**:长度不超过128,只允许中文、字母、数字、下划线(_)、连接符(-)的组合。","example":"myTemplate","pattern":"^[\\u4e00-\\u9fa5a-zA-Z0-9_-]{1,128}$","type":"string"}},"required":["template_body","template_name"],"title":"创建预调配模板结构体","type":"object","x-imports":"javax.validation.constraints.Size;javax.validation.constraints.NotNull;javax.validation.constraints.Pattern;javax.validation.Valid;"},"DeviceResource":{"description":"预调配模板设备资源详情结构体。","properties":{"device_name":{"$ref":"#/definitions/ParameterRef","description":"设备名称"},"node_id":{"$ref":"#/definitions/ParameterRef","description":"设备标识码"},"product_id":{"description":"**参数说明**:设备所属的产品id,可以是一个明确的静态字符串id,也可以是动态的模板参数引用\n- 明确的静态字符串:\"642bf260f2f9030e44210d8d\"。**取值范围**:长度不超过36,只允许字母、数字、下划线(_)、连接符(-)的组合。\"\n- 参数引用: {\"ref\" : \"iotda::certificate::country\"}","example":"642bf260f2f9030e44210d8d","properties":{},"type":"object"},"tags":{"description":"**参数说明**:设备绑定的标签列表","items":{"$ref":"#/definitions/TagRef"},"type":"array","x-maxLength":5,"x-minLength":0}},"required":["node_id","product_id"],"title":"预调配模板设备资源详情结构体。","type":"object","x-imports":"javax.validation.constraints.Size;javax.validation.constraints.NotNull;javax.validation.constraints.Pattern;javax.validation.Valid;"},"ParameterRef":{"properties":{"ref":{"description":"参数引用名称","pattern":"iotda::certificate::country|iotda::certificate::organization|iotda::certificate::organizational_unit|iotda::certificate::distinguished_name_qualifier|iotda::certificate::state_name|iotda::certificate::common_name|iotda::certificate::serial_number","type":"string"}},"required":["ref"],"type":"object","x-imports":"javax.validation.constraints.Size;javax.validation.constraints.NotNull;javax.validation.constraints.Pattern;javax.validation.Valid;"},"PolicyResource":{"description":"预调配模板设备策略资源详情结构体。","properties":{"policy_ids":{"description":"**参数说明**:设备需要绑定的策略id列表","items":{"type":"string"},"type":"array","x-annotations":["@PatternInList(regexp = \"^[a-fA-F0-9]{24}$\")"],"x-maxLength":5,"x-minLength":0}},"title":"预调配模板设备策略资源详情结构体。","type":"object","x-imports":"javax.validation.constraints.Size;javax.validation.constraints.NotNull;javax.validation.constraints.Pattern;javax.validation.Valid;com.huawei.m2m.validator.PatternInList"},"ProvisioningTemplateBase":{"description":"预调配模板详情返回结构体。","properties":{"create_time":{"description":"在物联网平台创建预调配模板的时间。格式:yyyyMMdd'T'HHmmss'Z',如20151212T121212Z。","example":"20190303T081011Z","type":"string"},"description":{"description":"**参数说明**:预调配模板的描述信息。\n**取值范围**:长度不超过2048,只允许中文、字母、数字、以及_?'#().,&%@!-等字符的组合","example":"myTemplate","maxLength":2048,"type":"string"},"template_body":{"$ref":"#/definitions/ProvisioningTemplateBody","description":"**参数说明**:预调配模板详细内容,json格式。"},"template_id":{"description":"**参数说明**:预调配模板ID。","example":"61c42b5db8e64206a656202a","pattern":"^[a-fA-F0-9]{24}$","type":"string"},"template_name":{"description":"**参数说明**:预调配模板名称。\n**取值范围**:长度不超过128,只允许中文、字母、数字、下划线(_)、连接符(-)的组合。","example":"myTemplate","type":"string"},"update_time":{"description":"在物联网平台更新预调配模板的时间。格式:yyyyMMdd'T'HHmmss'Z',如20151212T121212Z。","example":"20190303T081011Z","type":"string"}},"title":"预调配模板详情返回结构体","type":"object"},"ProvisioningTemplateBody":{"description":"预调配模板详细内容。","properties":{"parameters":{"description":"**参数说明**:预调配模板参数, ,配置格式为{\"parameter\":{\"type\":\"String\"}} ,其中parameter目前支持从预调配设备的证书的使用者字段提取内容,证书必须包含模板中定义的所有参数值,华为云IoT平台定义了可在预调配模板中声明和引用的如下参数:\n- iotda::certificate::country (国家/地区,C )\n- iotda::certificate::organization (组织,O)\n- iotda::certificate::organizational_unit (组织单位,OU)\n- iotda::certificate::distinguished_name_qualifier (可辨别名称限定符,dnQualifier)\n- iotda::certificate::state_name (省市,ST)\n- iotda::certificate::common_name (公用名,CN)\n- iotda::certificate::serial_number (序列号,serialNumber)\n\ntype描述parameter的类型,目前仅支持string。\n\n配置样例:\n\n'{\"iotda::certificate::country\":{\"type\":\"String\"},\n\n\"iotda::certificate::organization\":{\"type\":\"String\"},\n\n\"iotda::certificate::organizational_unit\":{\"type\":\"String\"},\n\n\"iotda::certificate::distinguished_name_qualifier\":{\"type\":\"String\"},\n\n\"iotda::certificate::state_name\":{\"type\":\"String\"},\n\n\"iotda::certificate::common_name\":{\"type\":\"String\"},\n\n\"iotda::certificate::serial_number\":{\"type\":\"String\"}}'","example":"{\"iotda::certificate::country\":{\"type\":\"String\"},\"iotda::certificate::organization\":{\"type\":\"String\"},\"iotda::certificate::organizational_unit\":{\"type\":\"String\"},\"iotda::certificate::distinguished_name_qualifier\":{\"type\":\"String\"},\"iotda::certificate::state_name\":{\"type\":\"String\"},\"iotda::certificate::common_name\":{\"type\":\"String\"},\"iotda::certificate::serial_number\":{\"type\":\"String\"}}","properties":{},"type":"object"},"resources":{"$ref":"#/definitions/TemplateResource"}},"required":["parameters","resources"],"title":"预调配模板详细内容。","type":"object","x-imports":"javax.validation.constraints.Size;javax.validation.constraints.NotNull;javax.validation.constraints.Pattern;javax.validation.Valid;"},"TagRef":{"properties":{"tag_key":{"description":"**参数说明**:标签键名称,可以是一个明确的静态字符串,也可以是动态的模板参数引用\n- 明确的静态字符串:\"myTagKey\"。**取值范围**:长度不超过64,只允许中文、字母、数字、以及_.-等字符的组合\n- 参数引用: {\"ref\" : \"iotda::certificate::country\"}","example":"myTagKey","properties":{},"type":"object"},"tag_value":{"description":"**参数说明**:标签值,可以是一个明确的静态字符串,也可以是动态的模板参数引用\n- 明确的静态字符串:\"myTagValue\"。**取值范围**:长度不超过128,只允许中文、字母、数字、以及_.-等字符的组合。\n- 参数引用: {\"ref\" : \"iotda::certificate::country\"}","example":{"ref":"iotda::certificate::country"},"properties":{},"type":"object"}},"type":"object","x-imports":"javax.validation.constraints.Size;javax.validation.constraints.NotNull;javax.validation.constraints.Pattern;javax.validation.Valid;"},"TemplateResource":{"description":"预调配模板设备资源结构体。","properties":{"device":{"$ref":"#/definitions/DeviceResource"},"policy":{"$ref":"#/definitions/PolicyResource"}},"required":["device"],"title":"预调配模板设备资源结构体。","type":"object","x-imports":"javax.validation.constraints.Size;javax.validation.constraints.NotNull;javax.validation.constraints.Pattern;javax.validation.Valid;"}},"description":null,"group_id":"bf0cdd341d8b4c6f833486a40289d422","host":"iotda.cn-north-4.myhuaweicloud.com","id":"ab1010c4416540198ab163995483a230","info_version":"v5","method":"post","name":"CreateProvisioningTemplate","parameters":{},"paths":{"/v5/iot/{project_id}/provisioning-templates":{"post":{"consumes":["application/json"],"description":"应用服务器可调用此接口在物联网平台创建一个预调配模板。用户的设备未在平台注册时,可以通过预调配模板在设备首次接入物联网平台时将设备信息自动注册到物联网平台。\n- 该预调配模板至少需要绑定到一个设备CA证书下才能生效。\n- 一个实例最多可有10个预调配模板。\n- 仅标准版实例、企业版实例支持该接口调用,基础版不支持。","operationId":"CreateProvisioningTemplate","parameters":[{"description":"**参数说明**:项目ID。获取方法请参见 [获取项目ID](https://support.huaweicloud.com/api-iothub/iot_06_v5_1001.html) 。","in":"path","name":"project_id","pattern":"^[a-fA-F0-9]{1,32}$","required":true,"type":"string","x-example":"04ed32dc1b0025b52fe3c01a27c2b0a8"},{"description":"**参数说明**:实例ID。物理多租下各实例的唯一标识,建议携带该参数,在使用专业版时必须携带该参数。您可以在IoTDA管理控制台界面,选择左侧导航栏“总览”页签查看当前实例的ID,具体获取方式请参考[查看实例详情](https://support.huaweicloud.com/usermanual-iothub/iot_01_0079.html#section1) 。","in":"header","name":"Instance-Id","pattern":"[0-9a-f-]{1,36}","required":false,"type":"string","x-example":"1a7ffc5c-d89c-44dd-8265-b1653d951ce0"},{"description":"request","in":"body","name":"CreateProvisioningTemplateRequestBody","required":true,"schema":{"$ref":"#/definitions/CreateProvisioningTemplate"}}],"produces":["application/json"],"responses":{"201":{"description":"Created","examples":{"application/json":{"create_time":"20230810T070547Z","description":"myTemplate","template_body":{"parameters":{"iotda::certificate::common_name":{"type":"String"},"iotda::certificate::country":{"type":"String"},"iotda::certificate::distinguished_name_qualifier":{"type":"String"},"iotda::certificate::organization":{"type":"String"},"iotda::certificate::organizational_unit":{"type":"String"},"iotda::certificate::serial_number":{"type":"String"},"iotda::certificate::state_name":{"type":"String"}},"resources":{"device":{"device_name":{"ref":"iotda::certificate::organization"},"node_id":{"ref":"iotda::certificate::common_name"},"product_id":{"ref":"iotda::certificate::organization"}},"policy":{"policy_ids":["5c90fa7d3c4e4405e8525079"]}}},"template_id":"5c90fa7d3c4e4405e8525079","template_name":"myTemplate","update_time":"20230810T070547Z"}},"schema":{"$ref":"#/definitions/ProvisioningTemplateBase"}},"400":{"description":"Bad Request","x-Error":["IOTDA.000006","IOTDA.015300","IOTDA.015302","IOTDA.015305"]},"401":{"description":"Unauthorized"},"403":{"description":"Forbidden","x-Error":["IOTDA.015306"]},"500":{"description":"Internal Server Error"}},"summary":"创建预调配模板","tags":["ProvisioningTemplateManagement"],"x-apig-name":"IoTDA_API","x-imports":"org.springframework.http.ResponseEntity;","x-is-registered":"N","x-request-examples-description-1":"创建预调配模板-参数引用","x-request-examples-description-2":"创建预调配模板-部分参数自定义","x-request-examples-text-1":{"description":"myTemplate","template_body":{"parameters":{"iotda::certificate::common_name":{"type":"String"},"iotda::certificate::country":{"type":"String"},"iotda::certificate::distinguished_name_qualifier":{"type":"String"},"iotda::certificate::organization":{"type":"String"},"iotda::certificate::organizational_unit":{"type":"String"},"iotda::certificate::serial_number":{"type":"String"},"iotda::certificate::state_name":{"type":"String"}},"resources":{"device":{"device_name":{"ref":"iotda::certificate::organization"},"node_id":{"ref":"iotda::certificate::common_name"},"product_id":{"ref":"iotda::certificate::organization"},"tags":[{"tag_key":{"ref":"iotda::certificate::organization"},"tag_value":{"ref":"iotda::certificate::organizational_unit"}}]},"policy":{"policy_ids":["5c90fa7d3c4e4405e8525079"]}}},"template_name":"myTemplate"},"x-request-examples-text-2":{"description":"myTemplate2","template_body":{"parameters":{"iotda::certificate::common_name":{"type":"String"},"iotda::certificate::country":{"type":"String"},"iotda::certificate::distinguished_name_qualifier":{"type":"String"},"iotda::certificate::organization":{"type":"String"},"iotda::certificate::organizational_unit":{"type":"String"},"iotda::certificate::serial_number":{"type":"String"},"iotda::certificate::state_name":{"type":"String"}},"resources":{"device":{"device_name":{"ref":"iotda::certificate::organization"},"node_id":{"ref":"iotda::certificate::common_name"},"product_id":"642bf260f2f9030e44210d8d","tags":[{"tag_key":"myTagKey","tag_value":"myTagValue"}]},"policy":{"policy_ids":["5c90fa7d3c4e4405e8525079"]}}},"template_name":"myTemplate2"},"x-request-examples-url-1":"POST https://{endpoint}/v5/iot/{project_id}/provisioning-templates","x-request-examples-url-2":"POST https://{endpoint}/v5/iot/{project_id}/provisioning-templates","x-returnType":"ResponseEntity<ProvisioningTemplateBase>","x-support-sdk":"Y"}}},"product_short":"IoTDA","region_id":"cn-north-4","schemes":["HTTPS"],"security_definitions":null,"summary":"创建预调配模板","tags":"预调配模板管理","uri":null,"version":"2.0"}