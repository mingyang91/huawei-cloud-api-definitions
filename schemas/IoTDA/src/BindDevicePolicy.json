{"base_path":null,"components":null,"consumes":"[\"application/json;charset=UTF-8\"]","definitions":{"BindDevicePolicy":{"description":"绑定策略请求体。","properties":{"target_ids":{"description":"策略绑定的目标ID列表","example":["deivceId1","deivceId2"],"items":{"type":"string"},"type":"array","x-annotations":["@PatternInList(regexp = \"^[a-zA-Z0-9_-]{1,128}$\")"],"x-maxLength":20,"x-minLength":1},"target_type":{"description":"**参数说明**:策略绑定的目标类型。\n**取值范围**:device|product|app,device表示设备,product表示产品,app表示整个资源空间。","example":"device","pattern":"(device|product|app)","type":"string"}},"required":["target_ids","target_type"],"title":"绑定策略请求体","type":"object","x-imports":"javax.validation.constraints.Size;javax.validation.constraints.NotNull;javax.validation.constraints.Pattern;javax.validation.Valid;com.huawei.m2m.validator.PatternInList;"},"DevicePolicyBindOrUnbindFailureDetail":{"description":"策略绑定失败详情结构体。","properties":{"error_code":{"description":"错误码。","example":"IOTDA.015204","type":"string"},"error_msg":{"description":"错误详情。","example":"Operation not allowed. The number of policies bound to the target reaches the upper limit (5).","type":"string"},"target_id":{"description":"失败的目标id。","example":"5c90fa7d3c4e4405e8525079","type":"string"}},"type":"object"},"DevicePolicyBindOrUnbindResponse":{"description":"绑定策略返回体。","properties":{"failure_targets":{"description":"失败的目标id列表","items":{"$ref":"#/definitions/DevicePolicyBindOrUnbindFailureDetail"},"type":"array"},"policy_id":{"description":"策略ID。","example":"5c90fa7d3c4e4405e8525079","type":"string"},"success_targets":{"description":"成功的目标id列表。","example":["deivceId1","deivceId2"],"items":{"type":"string"},"type":"array"},"target_type":{"description":"**参数说明**:策略的目标类型。\n**取值范围**:device|product|app,device表示设备,product表示产品,app表示整个资源空间。","example":"device","type":"string"}},"title":"绑定策略返回体","type":"object","x-imports":"javax.validation.constraints.Size;javax.validation.constraints.NotNull;javax.validation.constraints.Pattern;javax.validation.Valid;com.huawei.m2m.validator.PatternInList;"}},"description":null,"group_id":"bf0cdd341d8b4c6f833486a40289d422","host":"iotda.cn-north-4.myhuaweicloud.com","id":"d2ac967ef8f846479d7a7ddf355cf9e8","info_version":"v5","method":"post","name":"BindDevicePolicy","parameters":{},"paths":{"/v5/iot/{project_id}/device-policies/{policy_id}/bind":{"post":{"consumes":["application/json"],"description":"应用服务器可调用此接口在物联网平台上为批量设备绑定目标策略,目前支持绑定目标类型为:设备、产品,当目标类型为产品时,该产品下所有设备都会生效。","operationId":"BindDevicePolicy","parameters":[{"description":"**参数说明**:项目ID。获取方法请参见 [获取项目ID](https://support.huaweicloud.com/api-iothub/iot_06_v5_1001.html) 。","in":"path","name":"project_id","pattern":"^[a-fA-F0-9]{1,32}$","required":true,"type":"string","x-example":"04ed32dc1b0025b52fe3c01a27c2b0a8"},{"description":"**参数说明**:实例ID。物理多租下各实例的唯一标识,建议携带该参数,在使用专业版时必须携带该参数。您可以在IoTDA管理控制台界面,选择左侧导航栏“总览”页签查看当前实例的ID,具体获取方式请参考[查看实例详情](https://support.huaweicloud.com/usermanual-iothub/iot_01_0079.html#section1) 。","in":"header","name":"Instance-Id","pattern":"[0-9a-f-]{1,36}","required":false,"type":"string","x-example":"1a7ffc5c-d89c-44dd-8265-b1653d951ce0"},{"description":"策略ID","in":"path","name":"policy_id","pattern":"^[a-fA-F0-9]{24}$","required":true,"type":"string"},{"description":"request","in":"body","name":"BindDevicePolicyRequestBody","required":true,"schema":{"$ref":"#/definitions/BindDevicePolicy"}}],"produces":["application/json"],"responses":{"200":{"description":"OK","examples":{"application/json":{"failure_targets":[{"error_code":"IOTDA.015204","error_msg":"Operation not allowed. The number of policies bound to the target reaches the upper limit (5).","target_id":"64a7ba7ef9cb063d27e16b97_123458"}],"policy_id":"5c90fa7d3c4e4405e8525079","success_targets":["64a7ba7ef9cb063d27e16b97_123456","64a7ba7ef9cb063d27e16b97_123457"],"target_type":"device"}},"schema":{"$ref":"#/definitions/DevicePolicyBindOrUnbindResponse"}},"400":{"description":"Bad Request","x-Error":["IOTDA.015203","IOTDA.015204","IOTDA.015205"]},"401":{"description":"Unauthorized"},"403":{"description":"Forbidden"},"404":{"description":"Not Found","x-Error":["IOTDA.015202"]},"500":{"description":"Internal Server Error"}},"summary":"绑定设备策略","tags":["PolicyManagement"],"x-apig-name":"IoTDA_API","x-imports":"org.springframework.http.ResponseEntity;","x-is-registered":"N","x-request-examples-description-1":"为设备绑定策略","x-request-examples-description-2":"为产品绑定策略","x-request-examples-text-1":{"target_ids":["64a7ba7ef9cb063d27e16b97_123456","64a7ba7ef9cb063d27e16b97_123457"],"target_type":"device"},"x-request-examples-text-2":{"target_ids":["64a7ba7ef9cb063d27e16b97"],"target_type":"product"},"x-request-examples-url-1":"POST https://{endpoint}/v5/iot/{project_id}/device-policies/{policy_id}/bind","x-request-examples-url-2":"POST https://{endpoint}/v5/iot/{project_id}/device-policies/{policy_id}/bind","x-returnType":"ResponseEntity<DevicePolicyBindOrUnbindResponse>","x-support-sdk":"Y"}}},"product_short":"IoTDA","region_id":"cn-north-4","schemes":["HTTPS"],"security_definitions":null,"summary":"绑定设备策略","tags":"设备策略管理","uri":null,"version":"2.0"}