{"base_path":null,"components":null,"consumes":"[\"application/json;charset=UTF-8\"]","definitions":{"AddTunnelDto":{"description":"创建隧道请求结构体","properties":{"device_id":{"description":"**参数说明**:设备ID","example":"1a7ffc5c-d89c-44dd-8265-b1653d951ce0","pattern":"^[a-zA-Z0-9_-]{1,128}$","type":"string"}},"required":["device_id"],"type":"object"},"TunnelAccessInfo":{"description":"创建隧道成功时返回的隧道接入信息","properties":{"expires_in":{"description":"鉴权信息的过期时间, 单位:秒","example":86400,"maximum":86400000,"minimum":0,"type":"integer"},"tunnel_access_token":{"description":"鉴权信息","example":"d144a524-1997-4b99-94bf-f27128da8a34","pattern":"^[a-zA-Z0-9_-]{1,128}$","type":"string","x-sensitive":true},"tunnel_id":{"description":"隧道ID","example":"d144a524-1997-4b99-94bf-f27128da8a34","pattern":"^[a-zA-Z0-9_-]{1,64}$","type":"string"},"tunnel_uri":{"description":"websocket接入地址","example":"wss://xxx/xx/","maxLength":2048,"minLength":1,"type":"string"}}}},"description":null,"group_id":"bf0cdd341d8b4c6f833486a40289d422","host":"iotda.cn-north-4.myhuaweicloud.com","id":"2a777e61edd24a41b00ef00103d976a2","info_version":"v5","method":"post","name":"AddTunnel","parameters":{},"paths":{"/v5/iot/{project_id}/tunnels":{"post":{"consumes":["application/json"],"description":"用户可以通过该接口创建隧道(WebSocket协议),应用服务器和设备可以通过该隧道进行数据传输。\n\n- 该API接口在基础版不支持。\n- 该API调用后平台会向对应的MQTT/MQTTS设备下发隧道地址及密钥,同时给应用服务器也返回隧道地址及密钥,设备可以通过该地址及密钥创建WebSocket协议连接。\n- 一个设备无法创建多个隧道。\n- 具体应用可见“设备远程登录”功能,请参见[设备远程登录](https://support.huaweicloud.com/usermanual-iothub/iot_01_00301.html)。","operationId":"AddTunnel","parameters":[{"description":"**参数说明**:项目ID。获取方法请参见 [获取项目ID](https://support.huaweicloud.com/api-iothub/iot_06_v5_1001.html) 。","in":"path","name":"project_id","pattern":"^[a-fA-F0-9]{1,32}$","required":true,"type":"string","x-example":"04ed32dc1b0025b52fe3c01a27c2b0a8"},{"description":"**参数说明**:用户Token。通过调用IAM服务 [获取IAM用户Token](https://support.huaweicloud.com/api-iam/iam_30_0001.html)接口获取,接口返回的响应消息头中“X-Subject-Token”就是需要获取的用户Token。简要的获取方法样例请参见 [Token认证](https://support.huaweicloud.com/api-iothub/iot_06_v5_0091.html#section0)。","in":"header","name":"X-Auth-Token","required":false,"type":"string","x-effective-scene":"huaweicloud","x-example":"MIIDkgYJKoZIhvcNAQcCoIIDgzCCXXXXX..."},{"description":"**参数说明**:实例ID。物理多租下各实例的唯一标识,建议携带该参数,在使用专业版时必须携带该参数。您可以在IoTDA管理控制台界面,选择左侧导航栏“总览”页签查看当前实例的ID,具体获取方式请参考[查看实例详情](https://support.huaweicloud.com/usermanual-iothub/iot_01_0121.html) 。","in":"header","name":"Instance-Id","pattern":"[0-9a-f-]{1,36}","required":false,"type":"string","x-example":"1a7ffc5c-d89c-44dd-8265-b1653d951ce0"},{"description":"创建隧道请求体","in":"body","name":"AddTunnelRequestBody","required":true,"schema":{"$ref":"#/definitions/AddTunnelDto"}}],"produces":["application/json"],"responses":{"201":{"description":"创建设备隧道成功","examples":{"application/json":{"expires_in":86400,"tunnel_access_token":"MIIDkgYJKoZIhvcNAQcCoIIDgzCCXXXXX","tunnel_id":"d144a524-1997-4b99-94bf-f27128da8a34","tunnel_uri":"wss://tunnel.st1.iotda-app.cn-XXX.myhuaweicloud.com/v5/iot/tunnels/XXX/source-connect"}},"schema":{"$ref":"#/definitions/TunnelAccessInfo"},"x-SuccessCode":true},"400":{"description":"输入参数不正确","x-Error":["IOTDA.019708","IOTDA.000006"]},"403":{"description":"鉴权认证失败","x-Error":["IOTDA.021102","IOTDA.014016","IOTDA.019706","IOTDA.019707","IOTDA.014016"]}},"summary":"创建设备隧道","tags":["TunnelManagement"],"x-iftype":"OpenAPI_new","x-imports":"javax.validation.Valid;org.springframework.http.ResponseEntity","x-is-registered":"Y","x-request-examples-1":{"device_id":"b64b7a625b84c1334befb648b_test"},"x-request-examples-description-1":"创建设备隧道,设备id为b64b7a625b84c1334befb648b_test。","x-request-examples-url-1":"POST https://{endpoint}/v5/iot/{project_id}/tunnels","x-returnType":"ResponseEntity<TunnelAccessInfo>","x-support-sdk":"Y"}}},"product_short":"IoTDA","region_id":"cn-north-4","schemes":["HTTPS"],"security_definitions":null,"summary":"创建设备隧道","tags":"设备隧道管理","uri":null,"version":"2.0"}