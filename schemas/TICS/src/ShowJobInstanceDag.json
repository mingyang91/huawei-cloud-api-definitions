{"base_path":null,"components":{"parameters":{"content-Type":{"description":"消息体的类型(格式)\n","in":"header","name":"Content-Type","required":true,"schema":{"default":"application/json","example":"application/json","readOnly":true,"type":"string"}},"instance_id":{"description":"实例id,最大32位,字母和数字组成","in":"path","name":"instance_id","required":true,"schema":{"maxLength":32,"minLength":0,"pattern":"[\\w]{0,32}","type":"string"}},"league_id":{"description":"联盟id,最大32位,字母和数字组成","in":"path","name":"league_id","required":true,"schema":{"maxLength":32,"minLength":0,"pattern":"[\\w]{0,32}","type":"string"}},"project_id":{"description":"项目id,最大32位,字母和数字组成","in":"path","name":"project_id","required":true,"schema":{"maxLength":32,"minLength":0,"pattern":"[\\w]{0,32}","type":"string"}},"round_id":{"description":"轮数,最小值0最大值0x7fffffff","in":"query","name":"round_id","required":true,"schema":{"format":"int32","maximum":2147483647,"minimum":0,"type":"integer"},"style":"form"},"x-auth-token":{"description":"用户凭证","in":"header","name":"X-Auth-Token","required":true,"schema":{"example":"MIIjKAYJKoZIhvcNAQcxxxx","pattern":"^[\\w|\\+|\\-|=|{|}|\"|:|\\.|,|\\[|\\]]+","type":"string"}}},"schemas":{"DeployVo":{"properties":{"node_id":{"description":"节点Id","example":"4ccb7df8aa0c4ae484879bf8eb8add57","maxLength":32,"minLength":0,"type":"string"},"node_name":{"description":"节点名称","example":"agent1234","maxLength":128,"minLength":0,"type":"string"},"node_partner_alias":{"description":"参与方别名","example":"tics_user","maxLength":128,"minLength":0,"type":"string"},"node_type":{"description":"节点类型,AGENT.计算节点,AGG.聚合节点,AGG_MANAGER.聚合器管理节点,SERVER.控制节点","enum":["AGENT","AGG","AGG_MANAGER","SERVER"],"type":"string"},"stages":{"description":"执行阶段","items":{"$ref":"#/components/schemas/StageVo"},"maxItems":1000,"minItems":0,"type":"array"}},"required":["node_id","node_name","node_partner_alias"],"title":"DeployVo","type":"object"},"ErrorMessage":{"properties":{"error_code":{"description":"错误码","readOnly":true,"type":"string"},"error_msg":{"description":"错误信息","readOnly":true,"type":"string"}},"title":"ErrorMessage","type":"object"},"ProcessorVo":{"properties":{"end_time":{"description":"结束时间","format":"int64","readOnly":true,"type":"integer"},"exec_duration_nano":{"description":"执行时长","example":600000,"format":"int64","readOnly":true,"type":"integer"},"id":{"description":"执行过程id","example":"88db64845d5242ee896fc46cc9e4c9ba","maxLength":32,"minLength":0,"readOnly":true,"type":"string"},"last_step_task_ins_id":{"description":"上游子任务id","items":{"readOnly":true,"type":"string"},"readOnly":true,"type":"array"},"start_time":{"description":"开始时间","format":"int64","readOnly":true,"type":"integer"},"task_in_record_cnt":{"description":"输入个数","example":2,"format":"int64","readOnly":true,"type":"integer"},"task_name":{"description":"执行过程名称","example":"数据加密过程","maxLength":128,"minLength":0,"readOnly":true,"type":"string"},"task_out_record_cnt":{"description":"输出个数","example":2,"format":"int64","readOnly":true,"type":"integer"},"task_show_info":{"description":"processor对外展示信息,k,v","readOnly":true,"type":"object"},"task_status":{"description":"执行状态,作业任务状态,NEW.新建,SUBMITING.提交中,ACCEPTED.已接收,DEPLOYING.部署中,RUNNING.运行中,SUCCEEDED.成功,FAILED.失败,TERMINATED.中止,TERMINATING.中止中,PENDING.等待中","enum":["ACCEPTED","DEPLOYING","FAILED","NEW","PENDING","RUNNING","SUBMITING","SUCCEEDED","TERMINATED","TERMINATING"],"type":"string"}},"required":["id","task_name"],"title":"ProcessorVo","type":"object"},"StageVo":{"properties":{"id":{"description":"执行阶段id","format":"int32","readOnly":true,"type":"integer"},"last_step_stage_id":{"description":"上游的stageId","items":{"format":"int32","readOnly":true,"type":"integer"},"readOnly":true,"type":"array"},"processors":{"description":"执行过程","items":{"$ref":"#/components/schemas/ProcessorVo"},"readOnly":true,"type":"array"},"stage_name":{"description":"执行阶段名称","example":"数据加密阶段","maxLength":128,"minLength":0,"type":"string"}},"required":["id"],"title":"StageVo","type":"object"}}},"consumes":"","definitions":null,"description":null,"group_id":"ef1ca49eb70841c38ff5ecd124444f8f","host":"tics.cn-north-4.myhuaweicloud.com","id":"e2a13e36872f49dab3859865f3201c0d","info_version":"v1","method":"get","name":"ShowJobInstanceDag","parameters":null,"paths":{"/v1/{project_id}/leagues/{league_id}/job-instances/{instance_id}/dag":{"get":{"description":"获取实例执行图","operationId":"ShowJobInstanceDag","parameters":[{"$ref":"#/components/parameters/project_id"},{"$ref":"#/components/parameters/instance_id"},{"$ref":"#/components/parameters/league_id"},{"$ref":"#/components/parameters/round_id"},{"$ref":"#/components/parameters/x-auth-token"},{"$ref":"#/components/parameters/content-Type"}],"responses":{"200":{"content":{"application/json":{"example":[{"node_id":"efb586519206414eb280e5ea1693cbe3","node_name":"agent_跨region_ief","node_partner_alias":"league_creator","node_type":"AGENT","stages":[{"id":502,"last_step_stage_id":[],"processors":[{"end_time":1667482476000,"exec_duration_nano":361,"id":"SQLExecute_@efb586519206414eb280e5ea1693cbe3#be9d","last_step_task_ins_id":["SQLValidate_@efb586519206414eb280e5ea1693cbe3#e660"],"start_time":1667482475000,"task_in_record_cnt":0,"task_name":"本地SQL计算","task_out_record_cnt":14,"task_show_info":{"ACCUMULATED_COLLECT_INPUT_TIME":"2ms","ACCUMULATED_OUTPUT_SIZE":"14","ACCUMULATED_PROCESS_INPUT_TIME":"359ms","CURRENT_ITERATION_COUNT":"1","FIRST_ITERATION_COLLECT_INPUT_START_TIME":"2022/11/03 21:34:35 GMT+8:00","FIRST_ITERATION_PROCESS_INPUT_START_TIME":"2022/11/03 21:34:35 GMT+8:00","LAST_ITERATION_COLLECT_INPUT_END_TIME":"2022/11/03 21:34:35 GMT+8:00","LAST_ITERATION_PROCESS_INPUT_END_TIME":"2022/11/03 21:34:35 GMT+8:00","datasets":"de","sql":"SELECT `DEPARTMENT_ID`, `EMPLOYEE_ID`, `AVG_SALARY`, `NEW_TIME` FROM `LEAGUE_CREATOR`.`DE`"},"task_status":"SUCCEEDED"},{"end_time":1667482475000,"exec_duration_nano":0,"id":"SQLValidate_@efb586519206414eb280e5ea1693cbe3#e660","last_step_task_ins_id":[],"start_time":1667482475000,"task_in_record_cnt":0,"task_name":"隐私规则检查","task_out_record_cnt":0,"task_show_info":{"ACCUMULATED_COLLECT_INPUT_TIME":"0ms","ACCUMULATED_OUTPUT_SIZE":"0","ACCUMULATED_PROCESS_INPUT_TIME":"0ms","CURRENT_ITERATION_COUNT":"1","FIRST_ITERATION_COLLECT_INPUT_START_TIME":"2022/11/03 21:34:35 GMT+8:00","FIRST_ITERATION_PROCESS_INPUT_START_TIME":"2022/11/03 21:34:35 GMT+8:00","LAST_ITERATION_COLLECT_INPUT_END_TIME":"2022/11/03 21:34:35 GMT+8:00","LAST_ITERATION_PROCESS_INPUT_END_TIME":"2022/11/03 21:34:35 GMT+8:00","sql":"SELECT `DEPARTMENT_ID`, `EMPLOYEE_ID`, `AVG_SALARY`, `NEW_TIME`\nFROM `LEAGUE_CREATOR`.`DE`","sqlValidateResult":"success"},"task_status":"SUCCEEDED"},{"end_time":1667482476000,"exec_duration_nano":364,"id":"SaveResult_@efb586519206414eb280e5ea1693cbe3#cbf4","last_step_task_ins_id":["SQLExecute_@efb586519206414eb280e5ea1693cbe3#be9d"],"start_time":1667482475000,"task_in_record_cnt":14,"task_name":"结果存储","task_out_record_cnt":0,"task_show_info":{"ACCUMULATED_COLLECT_INPUT_TIME":"362ms","ACCUMULATED_OUTPUT_SIZE":"0","ACCUMULATED_PROCESS_INPUT_TIME":"2ms","CURRENT_ITERATION_COUNT":"1","FIRST_ITERATION_COLLECT_INPUT_START_TIME":"2022/11/03 21:34:35 GMT+8:00","FIRST_ITERATION_PROCESS_INPUT_START_TIME":"2022/11/03 21:34:35 GMT+8:00","LAST_ITERATION_COLLECT_INPUT_END_TIME":"2022/11/03 21:34:35 GMT+8:00","LAST_ITERATION_PROCESS_INPUT_END_TIME":"2022/11/03 21:34:35 GMT+8:00","filename":"/output/sql/efb586519206414eb280e5ea1693cbe3/0c8c73c00d3d4b59a820e39f319d8204/20221103213432-709b11224f3d4804b2bb4abc4b809d55.csv","saveResultRecordCount":"14"},"task_status":"SUCCEEDED"}],"stage_name":"最终结果存储阶段_502"}]}],"schema":{"items":{"$ref":"#/components/schemas/DeployVo"},"type":"array"}}},"description":"获取实例执行图成功"},"401":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorMessage"}}},"description":"操作无权限"},"500":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorMessage"}}},"description":"内部服务器错误"}},"summary":"获取实例执行图","tags":["作业实例管理"],"x-api-type":"doc-open","x-is-registered":"Y","x-request-examples-description-1":"获取实例执行图","x-request-examples-url-1":"get /v1/{project_id}/leagues/{league_id}/job-instances/{instance_id}/dag?round_id=1","x-support-sdk":"Y"}}},"product_short":"TICS","region_id":"cn-north-4","schemes":["HTTPS"],"security_definitions":null,"summary":"获取实例执行图","tags":"作业实例管理","uri":null,"version":"3.0.3"}