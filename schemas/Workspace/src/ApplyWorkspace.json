{"base_path":null,"components":null,"consumes":"[\"application/json\",\"application/json;charset=utf-8\"]","definitions":{"AccessConfigReq":{"description":"接入配置","properties":{"access_mode":{"description":"接入方式。\n- INTERNET:表示Internet接入。\n- DEDICATED:表示专线接入。\n- BOTH:表示两种接入方式都支持。","enum":["INTERNET","DEDICATED","BOTH"],"maxLength":55,"minLength":1,"type":"string"},"dedicated_cidrs":{"description":"专线接入网段列表,多个网段信息用分号隔开,列表长度不超过5。","example":"192.168.0.0/24;10.0.0.0/16","maxLength":100,"minLength":0,"type":"string"}},"required":["access_mode"]},"AdDomain":{"description":"域信息。","properties":{"active_dns_ip":{"description":"主DNS IP地址。域类型为LOCAL_AD时需要配置。","maxLength":255,"minLength":1,"pattern":"^((\\d{1,2}|1\\d\\d|2[0-4]\\d|25[0-5])\\.){3}(\\d{1,2}|1\\d\\d|2[0-4]\\d|25[0-5])$","type":"string"},"active_domain_ip":{"description":"主域控制器IP地址。域类型为LOCAL_AD时需要配置。","maxLength":255,"minLength":1,"pattern":"^((\\d{1,2}|1\\d\\d|2[0-4]\\d|25[0-5])\\.){3}(\\d{1,2}|1\\d\\d|2[0-4]\\d|25[0-5])$","type":"string"},"active_domain_name":{"description":"主域控制器名称。域类型为LOCAL_AD时需要配置。","maxLength":55,"minLength":1,"type":"string"},"delete_computer_object":{"default":0,"description":"是否在删除桌面的同时删除AD上对应的计算机对象,0代表不删除,1代表删除。","format":"int32","maximum":1,"minimum":0,"type":"integer"},"domain_admin_account":{"description":"域管理员帐号。域类型为LOCAL_AD时需要配置。\n必须为AD服务器上已经存在的域管理员帐号。","maxLength":55,"minLength":1,"type":"string"},"domain_name":{"description":"域名称。域类型为LOCAL_AD时需要配置。\n域名必须为AD服务器上已经存在的域名,且长度不超过55。","maxLength":55,"minLength":1,"type":"string"},"domain_password":{"description":"域管理员账号密码。域类型为LOCAL_AD时需要配置。","maxLength":255,"minLength":1,"type":"string","x-isSensitive":true},"domain_type":{"description":"域类型。\n- LITE_AS:本地认证。\n- LOCAL_AD:本地AD。\n说明:域类型为“LOCAL_AD”时,请确保所选VPC网络与AD所属网络可连通。","enum":["LITE_AS","LOCAL_AD"],"maxLength":55,"minLength":1,"type":"string"},"standby_dns_ip":{"description":"备DNS IP地址。域类型为LOCAL_AD时且配置备节点时需要配置。","maxLength":255,"minLength":0,"pattern":"^((\\d{1,2}|1\\d\\d|2[0-4]\\d|25[0-5])\\.){3}(\\d{1,2}|1\\d\\d|2[0-4]\\d|25[0-5])$","type":"string"},"standby_domain_ip":{"description":"备域控制器IP地址。域类型为LOCAL_AD时且配置备节点时需要配置。","maxLength":255,"minLength":0,"pattern":"^((\\d{1,2}|1\\d\\d|2[0-4]\\d|25[0-5])\\.){3}(\\d{1,2}|1\\d\\d|2[0-4]\\d|25[0-5])$","type":"string"},"standby_domain_name":{"description":"备域控制器名称。域类型为LOCAL_AD时且配置备节点时需要配置。","maxLength":55,"minLength":0,"type":"string"},"tls_config":{"$ref":"#/definitions/TlsConfig"},"use_ldaps":{"default":false,"description":"是否开启LDAPS。","type":"boolean"}},"required":["domain_type"]},"ApplyRuleInfo":{"description":"认证应用对象信息,为null时代表对所有应用对象生效。","properties":{"rule":{"description":"认证应用对象。\n- INTERNET:互联网接入,rule_type为ACCESS_MODE时可选该值\n- PRIVATE:专线接入,rule_type为ACCESS_MODE时可选该值","maxLength":255,"minLength":0,"type":"string"},"rule_type":{"description":"认证应用对象类型。\n- ACCESS_MODE:接入类型","maxLength":255,"minLength":0,"type":"string"}}},"ApplySharedVpcDedicatedParam":{"description":"共享Vpc专线入参","properties":{"address":{"description":"租户指定的共享Vpc专线地址","maxLength":255,"minLength":0,"type":"string"},"availability_zone":{"description":"开通服务资源使用的可用分区,默认随机使用2个可用区","items":{"maxLength":255,"minLength":0,"type":"string"},"maxItems":10,"minItems":0,"type":"array"},"port":{"description":"租户指定共享Vpc专线地址端口","maximum":65535,"minimum":1025,"type":"integer"}}},"ApplyWorkspaceReq":{"description":"申请开通云办公服务请求","properties":{"access_mode":{"description":"接入方式。\n- INTERNET:表示Internet接入。\n- DEDICATED:表示专线接入。\n- BOTH:表示两种接入方式都支持。","enum":["INTERNET","DEDICATED","BOTH"],"maxLength":55,"minLength":0,"type":"string"},"ad_domains":{"$ref":"#/definitions/AdDomain","description":"域信息。"},"apply_shared_vpc_dedicated_param":{"$ref":"#/definitions/ApplySharedVpcDedicatedParam"},"assist_auth_config":{"$ref":"#/definitions/AssistAuthMethodConfigRequest"},"auth_type":{"description":"主认证方式。\n- KERBEROS:KERBEROS。\n- KERBEROS_THIRD_SSO:第三方登录认证。","enum":["KERBEROS","KERBEROS_THIRD_SSO"],"type":"string","x-is_inner_param":true},"availability_zone":{"description":"开通服务资源使用的可用分区。","maxLength":55,"minLength":0,"type":"string","x-is_inner_param":true},"dedicated_subnets":{"description":"专线接入网段列表,多个网段信息用分号隔开,列表长度不超过5。","example":"192.168.0.0/24;10.0.0.0/16","maxLength":100,"minLength":0,"type":"string"},"enterprise_id":{"description":"企业ID。\n企业ID是您在云桌面服务的唯一标识,终端用户登录时需要填写企业ID,若不自定义设置企业ID,系统将自动生成您的企业ID。格式为由半角数字、字母、_-组成,长度范围小于等于32个字符。","maxLength":32,"minLength":0,"pattern":"^[a-zA-Z0-9_-]+$","type":"string"},"enterprise_project_id":{"default":"0","description":"企业项目ID,默认\"0\"","maxLength":255,"minLength":0,"type":"string","x-is_inner_param":true},"is_send_email":{"description":"桌面退订是否发送邮件通知。","type":"boolean"},"manage_subnet_cidr":{"description":"管理子网网段。\n注:不能与172.16.0.0/12以及subnet_ids参数下子网的网段冲突。","maxLength":255,"minLength":0,"type":"string"},"publicip_type":{"description":"外部网络。","maxLength":55,"minLength":0,"type":"string","x-is_inner_param":true},"site_configs":{"description":"边缘开户信息","items":{"$ref":"#/definitions/SiteConfigsRequest"},"maxItems":10,"minItems":0,"type":"array","x-is_inner_param":true},"subnet_ids":{"description":"指定业务子网的网络ID,子网不能与172.16.0.0/12冲突。","items":{"$ref":"#/definitions/Subnet"},"maxItems":100,"minItems":0,"type":"array","x-maxLength":100,"x-minLength":0},"third_gateway_info":{"$ref":"#/definitions/ThirdGatewayConfigInfo","description":"第三方网关配置信息,对接AD场景时生效。"},"vpc_id":{"description":"VPC ID。","maxLength":255,"minLength":0,"type":"string"}},"required":["ad_domains"]},"ApplyWorkspaceRsp":{"description":"开通服务响应。","properties":{"job_id":{"description":"开通云办公服务的任务ID。","maxLength":255,"minLength":1,"type":"string"}}},"AssistAuthMethodConfigRequest":{"description":"辅助认证策略请求","properties":{"auth_type":{"$ref":"#/definitions/AuthAssistEnum"},"otp_config_info":{"$ref":"#/definitions/OtpConfigInfo"},"radius_auth_config":{"$ref":"#/definitions/RadiusAuthConfig"},"radius_gateway_config":{"$ref":"#/definitions/RadiusGatewayConfig"}}},"AuthAssistEnum":{"description":"认证类型。\nOTP:OTP辅助认证\nRADIUS: RADIUS认证","enum":["OTP","RADIUS_GATEWAY","RADIUS"],"maxLength":24,"minLength":0,"type":"string"},"AuthServerAccessMode":{"description":"辅助认证服务接入模式\nINTERNET:互联网接入\nDEDICATED:专线接入\nSYSTEM_DEFAULT:系统默认","enum":["INTERNET","DEDICATED","SYSTEM_DEFAULT"],"type":"string"},"BaseResponse":{"description":"API响应基类","properties":{"encoded_authorization_message":{"description":"加密后的详细拒绝原因,用户可以自行调用STS服务的decode-authorization-message接口进行解密。","readOnly":true,"type":"string"},"error_code":{"description":"错误码。","maxLength":12,"minLength":0,"type":"string"},"error_msg":{"description":"错误描述。","maxLength":1000,"minLength":0,"type":"string"}}},"NetworkConfigReq":{"description":"网络配置","properties":{"subnet_ids":{"description":"指定业务子网的网络id","items":{"maxLength":5000,"minLength":0,"type":"string"},"maxItems":100,"minItems":0,"type":"array"},"vpc_id":{"description":"VPC ID","maxLength":255,"minLength":0,"type":"string"}}},"OtpConfigInfo":{"description":"OTP辅助认证方式配置","properties":{"app_id":{"description":"认证服务接入账号","maxLength":24,"minLength":0,"type":"string"},"app_secret":{"description":"认证服务接入密码","maxLength":128,"minLength":0,"type":"string","x-isSensitive":true},"apply_rule":{"$ref":"#/definitions/ApplyRuleInfo"},"auth_server_access_mode":{"$ref":"#/definitions/AuthServerAccessMode"},"auth_url":{"description":"辅助认证服务器地址","maxLength":255,"minLength":0,"type":"string"},"cert_content":{"description":"pem格式证书内容","maxLength":8192,"minLength":0,"type":"string","x-isSensitive":true},"enable":{"description":"是否启用","type":"boolean"},"receive_mode":{"$ref":"#/definitions/ReceiveModeEnum"}}},"RadiusAuthConfig":{"description":"Radius认证配置信息","properties":{"auth_protocol":{"description":"身份验证类型: pap或chap,选择短信验证码时才可用","maxLength":4,"minLength":0,"type":"string"},"check_code_attributes":{"description":"过滤短信拓展字段","properties":{},"type":"object","x-type":"Map<Integer,String>"},"domain_in_user_prefix":{"default":"0","description":"用户前缀中的域。0代表禁用,1代表开启域前缀,2代表开启域后缀,默认值为0。","maxLength":1,"minLength":0,"type":"string"},"enable":{"description":"是否启用","type":"boolean"},"obtain_code_attributes":{"description":"过滤短信拓展字段","properties":{},"type":"object","x-type":"Map<Integer,String>"},"radius_attempt_time":{"description":"尝试次数,取值范围1-10","format":"int32","maximum":10,"minimum":1,"type":"integer"},"radius_auth_type":{"description":"认证类型。静态密码: \"STATIC\",动态口令: \"DYNAMIC\"","enum":["STATIC","DYNAMIC"],"maxLength":7,"minLength":0,"type":"string"},"radius_configs":{"description":"Radius主机配置列表","items":{"$ref":"#/definitions/RadiusHost"},"maxItems":10,"minItems":0,"type":"array","x-maxLength":10,"x-minLength":0},"radius_secret":{"description":"Radius密码","maxLength":255,"minLength":0,"type":"string"},"radius_timeout":{"description":"超时时间,取值范围1-300s","format":"int32","maximum":300,"minimum":1,"type":"integer"},"verification_code_conditions":{"default":0,"description":"验证码失败次数","format":"int32","maximum":5,"minimum":0,"type":"integer"},"verification_code_display_enable":{"default":true,"description":"验证码开关,默认开启","type":"boolean"}}},"RadiusGatewayConfig":{"description":"短信辅助认证配置","properties":{"app_id":{"description":"用户名","maxLength":255,"minLength":0,"type":"string"},"cert_content":{"description":"证书内容(PEM)","maxLength":8192,"minLength":0,"type":"string"},"enable":{"description":"是否启用","type":"boolean"},"password":{"description":"密码","maxLength":64,"minLength":0,"type":"string"},"token_url":{"description":"获取token地址","maxLength":255,"minLength":0,"type":"string"},"verification_cipher_url":{"description":"获取验证码地址","maxLength":255,"minLength":0,"type":"string"}}},"RadiusHost":{"description":"Radius主机配置信息","properties":{"accept_port":{"description":"接收端口","format":"int32","maximum":66635,"minimum":1,"type":"integer"},"auth_port":{"description":"认证端口","format":"int32","maximum":65535,"minimum":1,"type":"integer"},"name":{"description":"名称","maxLength":255,"minLength":0,"type":"string"},"nas_id":{"description":"NAS ID","maxLength":255,"minLength":0,"type":"string"},"radius_ip":{"description":"IP地址","maxLength":255,"minLength":0,"type":"string"}}},"ReceiveModeEnum":{"description":"验证码接收模式\nVMFA:虚拟MFA设备\nHMFA:硬件MFA设备","enum":["VMFA","HMFA"],"type":"string"},"SiteConfigsRequest":{"properties":{"access_config":{"$ref":"#/definitions/AccessConfigReq","description":"接入配置"},"availability_zone":{"description":"开通服务资源使用的可用分区","maxLength":55,"minLength":0,"type":"string","x-is_inner_param":true},"network_config":{"$ref":"#/definitions/NetworkConfigReq","description":"网络配置"}},"required":["access_config","network_config"]},"Subnet":{"properties":{"subnet_id":{"description":"子网的网络ID。","maxLength":255,"minLength":1,"type":"string"}},"required":["subnet_id"]},"ThirdGatewayConfigInfo":{"description":"第三方网关配置信息。","properties":{"cert_content":{"description":"第三方证书","maxLength":8192,"minLength":0,"type":"string","x-isSensitive":true},"login_url":{"description":"第三方登录url","maxLength":255,"minLength":0,"type":"string"},"logout_url":{"description":"第三方登出url","maxLength":255,"minLength":0,"type":"string"},"token_url":{"description":"第三方网关token校验地址","maxLength":255,"minLength":0,"type":"string"},"verification_cipher_url":{"description":"校验证书url","maxLength":255,"minLength":0,"type":"string"}},"required":["cert_content","login_url","logout_url","token_url","verification_cipher_url"]},"TlsConfig":{"description":"TLS信息。","properties":{"cert_end_time":{"description":"证书生效截止时间,时间参考样例 2022-01-25T09:24:27。","maxLength":255,"minLength":0,"type":"string"},"cert_pem":{"description":"pem内容, 有则更新,无则上传。查询不返回。","maxLength":8192,"minLength":0,"type":"string"},"cert_start_time":{"description":"证书生效开始时间,时间参考样例 2022-01-25T09:24:27。","maxLength":255,"minLength":0,"type":"string"}}}},"description":null,"group_id":"7383c32d5d5e4d0481c071faeb994404","host":"workspace.cn-north-4.myhuaweicloud.com","id":"ce961238bdb5476fa547a1b7fa097e6a","info_version":"v2","method":"post","name":"ApplyWorkspace","parameters":{},"paths":{"/v2/{project_id}/workspaces":{"post":{"description":"该接口用于开通云办公服务。\n\n作为异步接口,调用成功说明云办公服务后台收到了开通请求,但服务是否开通成功需要通过任务查询接口(GET /v2/{project_id}/workspace-sub-jobs)查询该任务的执行状态。","operationId":"ApplyWorkspace","parameters":[{"description":"用户Token。\n\n通过调用IAM服务获取用户Token接口获取(响应消息头中X-Subject-Token的值)。","in":"header","maxLength":40000,"minLength":1,"name":"X-Auth-Token","required":false,"type":"string","x-example":"MIIDkgYJKoZIhvcNAQcCoIIDgzCCXXXXXX..."},{"description":"发送的实体的MIME类型。","in":"header","maxLength":255,"minLength":1,"name":"Content-Type","required":true,"type":"string","x-example":"application/json"},{"description":"项目ID。","in":"path","maxLength":255,"minLength":1,"name":"project_id","required":true,"type":"string","x-example":"2b31ed520xxxxxxebedb6e57xxxxxxxx"},{"description":"开通云办公服务请求。","in":"body","name":"ApplyWorkspaceRequestBody","required":true,"schema":{"$ref":"#/definitions/ApplyWorkspaceReq"}}],"responses":{"200":{"description":"开通云办公服务响应。","examples":{"application/json":{"job_id":"0000000059071dbc01591661d3990019"}},"schema":{"$ref":"#/definitions/ApplyWorkspaceRsp"}},"400":{"description":"由于包含语法错误,当前请求无法被服务器理解。","schema":{"$ref":"#/definitions/BaseResponse"}},"401":{"description":"鉴权失败。","schema":{"$ref":"#/definitions/BaseResponse"}},"403":{"description":"没有操作权限。","schema":{"$ref":"#/definitions/BaseResponse"}},"404":{"description":"找不到资源。","schema":{"$ref":"#/definitions/BaseResponse"}},"500":{"description":"服务内部错误,具体返回错误码请参见错误码说明。","schema":{"$ref":"#/definitions/BaseResponse"}}},"schemes":["https"],"summary":"开通云办公服务","tags":["Workspace"],"x-api-type":"open-api","x-apiexplorer-hide":"N","x-apig-group":"public,internal_token","x-apigateway-request-type":"public","x-is-registered":"Y","x-methodAnnotations":["@EnableAuth","@IamAuthMeta(authLevel = IamAuthLevel.PROJECT, abacAction = \"workspace:tenants:open\",  needApigwJwtAuthCheck = false, needRbacCheck = false, authContextInitializerName = \"workspaceTenantAuthContextInitializer\")","@CtsMeta(serviceType = \"Workspace\", resourceType = \"workspace\", traceName = \"openService\")"],"x-request-examples-1":{"access_mode":"INTERNET","ad_domains":{"domain_type":"LITE_AS"},"is_send_email":true,"subnet_ids":[{"subnet_id":"067b30a9-1b73-4804-a808-699c5f6c4e09"}],"vpc_id":"e8f985fa-5161-4cb8-bf5a-155058ea58c9"},"x-request-examples-2":{"access_mode":"INTERNET","ad_domains":{"active_dns_ip":"192.161.43.66","active_domain_ip":"192.161.43.66","active_domain_name":"AD-xxx-0001.vdesktop.huawei.com","domain_admin_account":"vdsadmin","domain_name":"xxxx.xxxx.com","domain_password":"xxxxxxxxxx@","domain_type":"LOCAL_AD","standby_dns_ip":"192.161.43.67","standby_domain_ip":"192.161.43.67","standby_domain_name":"AD-xxx-0002.vdesktop.huawei.com"},"is_send_email":true,"subnet_ids":[{"subnet_id":"598d4599-059f-40ca-9cce-841b784d13e6"}],"vpc_id":"27823fc4-5808-4f3b-a5bc-24c7a80742b8"},"x-request-examples-3":{"access_mode":"DEDICATED","ad_domains":{"active_dns_ip":"192.161.43.66","active_domain_ip":"192.161.43.66","active_domain_name":"AD-xxx-0001.vdesktop.huawei.com","domain_admin_account":"vdsadmin","domain_name":"xxxx.xxxx.com","domain_password":"xxxxxxxxxx@","domain_type":"LOCAL_AD","standby_dns_ip":"192.161.43.67","standby_domain_ip":"192.161.43.67","standby_domain_name":"AD-xxx-0002.vdesktop.huawei.com"},"dedicated_subnets":"192.168.0.0/24;10.0.0.0/16","is_send_email":true,"subnet_ids":[{"subnet_id":"598d4599-059f-40ca-9cce-841b784d13e6"}],"vpc_id":"27823fc4-5808-4f3b-a5bc-24c7a80742b8"},"x-request-examples-url-1":"POST /v2/fb2e5ec048384c8f9469d22db0037908/workspaces","x-support-sdk":"Y"}}},"product_short":"Workspace","region_id":"cn-north-4","schemes":["HTTPS"],"security_definitions":{"apig-auth-app":{"in":"header","name":"Authorization","type":"apiKey","x-apigateway-auth-type":"AppSigv1"},"apig-auth-iam":{"in":"header","name":"unused","type":"apiKey","x-apigateway-auth-type":"IAM"},"apig-auth-iam-used-authn5":{"in":"header","name":"unused","type":"apiKey","x-apigateway-auth-opt":{"inner-auth-type":"iam_auth_n5"},"x-apigateway-auth-type":"IAM"}},"summary":"开通云办公服务","tags":"云办公服务","uri":null,"version":"2.0"}