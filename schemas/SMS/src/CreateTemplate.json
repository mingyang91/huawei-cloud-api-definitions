{"base_path":"/","components":null,"consumes":"[\"application/json;charset=UTF-8\"]","definitions":{"CreateTemplateReq":{"description":"This is a auto create Body Object","properties":{"template":{"$ref":"#/definitions/TemplateRequest","description":"模板信息"}},"required":["template"]},"CreateTemplateResp":{"description":"创建模板响应","properties":{"id":{"description":"服务端返回的新添加的模板的ID","maxLength":255,"minLength":0,"type":"string"}},"required":["id"],"type":"object"},"Forbiddenstatus":{"description":"接口请求鉴权失败时返回的response body格式","properties":{"details":{"description":"详细错误信息","items":{"properties":{"error_code":{"description":"SMS错误代码","example":"SMS.9004","maxLength":65535,"minLength":0,"type":"string"},"error_msg":{"description":"SMS错误信息","example":"You do not have permission to perform action XXX on resource XXX.","maxLength":65535,"minLength":0,"type":"string"}}},"maxItems":20,"minItems":1,"type":"array"},"encoded_authorization_message":{"description":"加密授权信息","example":"XXXXXX","maxLength":65535,"minLength":0,"type":"string"},"error_code":{"description":"错误代码","example":"SMS.9004","maxLength":255,"minLength":0,"type":"string"},"error_msg":{"description":"错误信息","example":"The current account does not have the permission to execute policy. You do not have permission to perform action XXX on resource XXX.","maxLength":255,"minLength":0,"type":"string"},"error_param":{"description":"错误参数","example":["You do not have permission to perform action XXX on resource XXX."],"items":{"example":"XXXXXX","maxLength":65535,"minLength":0,"type":"string"},"maxItems":20,"minItems":1,"type":"array"}},"type":"object"},"Nics":{"description":"网卡资源","properties":{"cidr":{"description":"子网网关/掩码","maxLength":255,"minLength":0,"type":"string"},"id":{"description":"子网ID,如果是自动创建,使用\"autoCreate\"","maxLength":255,"minLength":0,"type":"string"},"ip":{"description":"虚拟机IP地址,如果没有这个字段,自动分配IP","maxLength":255,"minLength":0,"type":"string"},"name":{"description":"子网名称","maxLength":255,"minLength":0,"type":"string"}},"required":["id","name","cidr"]},"PublicIp":{"description":"公网ip","properties":{"bandwidth_share_type":{"description":"带宽共享类型(长文本信息,非枚举数据,来源于EIP服务)\n详细类型请参考EIP服务API文档中“查询弹性公网IP详情”部分,查看响应参数的中bandwidth_share_type字段描述","maxLength":255,"minLength":0,"type":"string"},"bandwidth_size":{"description":"带宽大小,单位:Mbit/s。\n调整带宽时的最小单位会根据带宽范围不同存在差异。\n小于等于300Mbit/s,默认最小单位为1Mbit/s。300Mbit/s~1000Mbit/s,默认最小单位为50Mbit/s。大于1000Mbit/s:默认最小单位为500Mbit/s。","format":"int32","maximum":2000,"minimum":1,"type":"integer","x-annotations":"如果share_type是PER,该参数必选项;如果share_type是WHOLE并且ID有值,该参数会忽略。"},"type":{"description":"弹性公网IP类型,默认为5_bgp。\n详细类型请参考EIP服务API文档中“查询弹性公网IP详情”部分,查看响应参数的中type字段描述","maxLength":255,"minLength":0,"type":"string"}},"required":["type","bandwidth_size"],"type":"object"},"SgObject":{"description":"安全组object","properties":{"id":{"description":"安全组ID","maxLength":255,"minLength":0,"type":"string"},"name":{"description":"安全组名称","maxLength":255,"minLength":0,"type":"string"}},"required":["id","name"]},"TemplateDisk":{"description":"磁盘模板","properties":{"device_use":{"description":"磁盘使用","maxLength":255,"minLength":0,"type":"string"},"disktype":{"description":"磁盘类型,同volumetype字段(非枚举数据,来源于EVS服务)\n详细类型请参考EIP服务API文档中“查询单个云硬盘详情”部分,查看响应参数的中volume_type字段描述","maxLength":255,"minLength":0,"type":"string"},"id":{"description":"磁盘ID","format":"int64","maximum":9223372036854775807,"minimum":0,"type":"integer"},"index":{"description":"磁盘序号,从0开始","format":"int32","maximum":2147483647,"minimum":0,"type":"integer"},"name":{"description":"磁盘名称","maxLength":255,"minLength":0,"type":"string"},"size":{"description":"磁盘大小,单位:GB","format":"int64","maximum":9223372036854775807,"minimum":0,"type":"integer"}},"required":["index","name","disktype","size"],"type":"object"},"TemplateRequest":{"description":"自动创建虚拟机模板","properties":{"availability_zone":{"description":"可用区","maxLength":255,"minLength":0,"type":"string"},"data_volume_type":{"description":"数据盘磁盘类型\n(非枚举数据,来源于EVS服务)\n常见类型如:SAS:串行连接SCSI,SSD:固态硬盘,SATA:串口硬盘等。\n详细类型请参考EIP服务API文档中“查询单个云硬盘详情”部分,查看响应参数的中volume_type字段描述","maxLength":255,"minLength":0,"type":"string"},"disk":{"description":"磁盘信息","items":{"$ref":"#/definitions/TemplateDisk"},"maxItems":65535,"minItems":0,"type":"array"},"flavor":{"description":"虚拟机规格","maxLength":65535,"minLength":0,"type":"string"},"image_id":{"description":"新建目的虚拟机用户选择的镜像版本Id值","maxLength":255,"minLength":0,"type":"string"},"is_template":{"description":"是否是通用模板,如果模板关联一个任务,则不算通用模板","type":"boolean"},"name":{"description":"模板名称\n仅由中文字符、下划线、短横线、数字、英文大小写字母组成","maxLength":64,"minLength":1,"pattern":"[\\u4e00-\\u9fa5-_0-9a-zA-Z]*","type":"string"},"nics":{"description":"网卡信息,支持多个网卡,如果是自动创建,只填一个,ID使用“autoCreate”","items":{"$ref":"#/definitions/Nics"},"maxItems":65535,"minItems":0,"type":"array"},"projectid":{"description":"项目ID","maxLength":255,"minLength":0,"type":"string"},"publicip":{"$ref":"#/definitions/PublicIp"},"region":{"description":"Region信息","maxLength":255,"minLength":0,"type":"string"},"security_groups":{"description":"安全组,支持多个安全组,如果是自动创建,只填一个,ID使用“autoCreate”","items":{"$ref":"#/definitions/SgObject"},"maxItems":65535,"minItems":0,"type":"array"},"target_password":{"description":"目的端密码","maxLength":1024,"minLength":0,"type":"string"},"target_server_name":{"description":"目标端服务器名称","maxLength":255,"minLength":0,"type":"string"},"volumetype":{"description":"磁盘类型\n(非枚举数据,来源于EVS服务)\n常见类型如:SAS:串行连接SCSI,SSD:固态硬盘,SATA:串口硬盘等。\n详细类型请参考EIP服务API文档中“查询单个云硬盘详情”部分,查看响应参数的中volume_type字段描述","maxLength":255,"minLength":0,"type":"string"},"vpc":{"$ref":"#/definitions/VpcObject"}},"required":["name"],"type":"object"},"VpcObject":{"description":"vpc对象","properties":{"cidr":{"description":"VPC的网段,默认192.168.0.0/16","maxLength":255,"minLength":1,"type":"string"},"id":{"description":"虚拟私有云ID,如果是自动创建,填“autoCreate”","maxLength":255,"minLength":1,"type":"string"},"name":{"description":"虚拟私有云名称","maxLength":255,"minLength":1,"type":"string"}},"type":"object"}},"description":null,"group_id":"b335e41b37154b9c865b003f5fa2e3dd","host":"sms.cn-north-4.myhuaweicloud.com","id":"a8f08b1fa0e1420f806f4d0766330009","info_version":"v3","method":"post","name":"CreateTemplate","parameters":{},"paths":{"/v3/vm/templates":{"post":{"consumes":["application/json"],"deprecated":false,"description":"新增源端模板信息。","operationId":"CreateTemplate","parameters":[{"description":"This is a auto create Body Object","in":"body","name":"CreateTemplateRequestBody","required":true,"schema":{"$ref":"#/definitions/CreateTemplateReq"}},{"description":"X-Auth-Token \n用户Token。  \n通过调用IAM服务获取用户Token接口获取(响应消息头中X-Subject-Token的值)。","in":"header","maxLength":16384,"minLength":1,"name":"X-Auth-Token","required":true,"type":"string","x-annotations":"","x-order":1}],"produces":["application/json"],"responses":{"200":{"description":"新增模板信息成功","examples":{"application/json":{"id":"xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxx0001"}},"schema":{"$ref":"#/definitions/CreateTemplateResp"}},"403":{"description":"鉴权失败","examples":{"application/json":{"details":[{"error_code":"SMS.9004","error_msg":"You do not have permission to perform action XXX on resource XXX."}],"encoded_authorization_message":"XXXXXX","error_code":"SMS.9004","error_msg":"The current account does not have the permission to execute policy. You do not have permission to perform action XXX on resource XXX.","error_param":["You do not have permission to perform action XXX on resource XXX."]}},"schema":{"$ref":"#/definitions/Forbiddenstatus"}}},"summary":"新增模板信息","tags":["模板管理"],"x-api-type":"TenantOpenAPI","x-apiErrorCodes":[{"errorCode":"SMS.6010","errorDescription":"请求体不是json格式","errorDescriptionEn":"The request body is not in the JSON format.","errorMessage":"The request body is not in the JSON format.","httpStatus":"400","solution":"请按要求设置请求体","solutionEn":""},{"errorCode":"SMS.6011","errorDescription":"请求体json不符合规范","errorDescriptionEn":"The request body json does not meet the specifications","errorMessage":"The request body json does not meet the specifications","httpStatus":"400","solution":"请按要求设置请求体","solutionEn":"Please set request body as required"},{"errorCode":"SMS.6012","errorDescription":"请求体为空","errorDescriptionEn":"empty request body.","errorMessage":"empty request body.","httpStatus":"400","solution":"请按要求设置请求体","solutionEn":""},{"errorCode":"SMS.7112","errorDescription":"模板名称重复","errorDescriptionEn":"template name is used!","errorMessage":"template name is used!","httpStatus":"400","solution":"请修改模板名称","solutionEn":""}],"x-apiexplorer-hide":"false","x-apigateway-auth-type":"IAM","x-apigateway-match-mode":"NORMAL","x-apigateway-request-type":"public","x-constraint":"","x-is-registered":"Y","x-name":"新增模板信息","x-open-region-cloud":"hc,hk","x-order":0,"x-publishpath":"CreateTemplate","x-request-examples-1":{"template":{"availability_zone":"availability_zone","disk":[{"disktype":"","index":0,"name":"system","size":40}],"flavor":"s2.medium.2","image_id":"","is_template":false,"name":"","nics":[{"cidr":"192.168.0.0/16","id":"xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxx0001","ip":"","name":"sms-1566979244(192.168.0.0/16)"}],"projectid":"xxxxxxxxxxxxxxxxxxxxxxxx00000001","publicip":{"bandwidth_share_type":"PER","bandwidth_size":5,"type":"5_bgp"},"region":"region","security_groups":[{"id":"xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxx0001","name":"kubernetes.io-default-sg(入方向:udp/1-65535;tcp/22,1-65535,3389; 出方向:--)"}],"target_server_name":"abcd","volumetype":"","vpc":{"id":"xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxx0001","name":"sms-1566979232(192.168.0.0/16)"}}},"x-request-examples-2":{"template":{"availability_zone":"availability_zone","disk":[{"device_use":"BOOT","disktype":"SATA","id":"0","index":0,"name":"Disk 0","size":40}],"flavor":"c3.medium.2","is_template":true,"name":"xxxx","nics":[{"cidr":"192.168.0.0/16","id":"xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxx0001","ip":"","name":"Migrate-SSd-35"}],"projectid":"xxxxxxxxxxxxxxxxxxxxxxxx00000001","publicip":{"bandwidth_share_type":"PER","bandwidth_size":10,"type":"5_g-vm"},"region":"region","security_groups":[{"id":"xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxx0001","name":"Migrate-dddd"}],"target_password":"********","target_server_name":"ggg-win16-t","volumetype":"SATA","vpc":{"cidr":"192.168.0.0/16","id":"xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxx0001","name":"Migrate-SSd-1"}}},"x-request-examples-description-1":"创建迁移任务的模板信息,模板名称是xxxx,region信息是region,项目ID是00924d0ad2df4f21ac476dd9f3288xxx。","x-request-examples-description-2":"创建模板的参数","x-request-examples-text-1":{"template":{"availability_zone":"availability_zone","disk":[{"disktype":"","index":0,"name":"system","size":40}],"flavor":"s2.medium.2","image_id":"","is_template":false,"name":"","nics":[{"cidr":"192.168.0.0/16","id":"xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxx0001","ip":"","name":"sms-1566979244(192.168.0.0/16)"}],"projectid":"xxxxxxxxxxxxxxxxxxxxxxxx00000001","publicip":{"bandwidth_share_type":"PER","bandwidth_size":5,"type":"5_bgp"},"region":"region","security_groups":[{"id":"xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxx0001","name":"kubernetes.io-default-sg(入方向:udp/1-65535;tcp/22,1-65535,3389; 出方向:--)"}],"target_server_name":"abcd","volumetype":"","vpc":{"id":"xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxx0001","name":"sms-1566979232(192.168.0.0/16)"}}},"x-request-examples-text-2":{"template":{"availability_zone":"availability_zone","disk":[{"device_use":"BOOT","disktype":"SATA","id":"0","index":0,"name":"Disk 0","size":40}],"flavor":"c3.medium.2","is_template":true,"name":"xxxx","nics":[{"cidr":"192.168.0.0/16","id":"xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxx0001","ip":"","name":"Migrate-SSd-35"}],"projectid":"xxxxxxxxxxxxxxxxxxxxxxxx00000001","publicip":{"bandwidth_share_type":"PER","bandwidth_size":10,"type":"5_g-vm"},"region":"region","security_groups":[{"id":"xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxx0001","name":"Migrate-dddd"}],"target_password":"********","target_server_name":"ggg-win16-t","volumetype":"SATA","vpc":{"cidr":"192.168.0.0/16","id":"xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxx0001","name":"Migrate-SSd-1"}}},"x-request-examples-url-1":"POST https://{endpoint}/v3/vm/templates","x-request-examples-url-2":"POST https://{endpoint}/v3/vm/templates","x-scope":"Commercial","x-support-sdk":"Y","x-version":"v3"}}},"product_short":"SMS","region_id":"cn-north-4","schemes":["HTTPS"],"security_definitions":null,"summary":"新增模板信息","tags":"模板管理","uri":null,"version":"2.0"}