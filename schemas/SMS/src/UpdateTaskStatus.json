{"base_path":"/","components":null,"consumes":"[\"application/json;charset=UTF-8\"]","definitions":{"Forbiddenstatus":{"description":"接口请求鉴权失败时返回的response body格式","properties":{"details":{"description":"详细错误信息","items":{"properties":{"error_code":{"description":"SMS错误代码","example":"SMS.9004","maxLength":65535,"minLength":0,"type":"string"},"error_msg":{"description":"SMS错误信息","example":"You do not have permission to perform action XXX on resource XXX.","maxLength":65535,"minLength":0,"type":"string"}}},"maxItems":20,"minItems":1,"type":"array"},"encoded_authorization_message":{"description":"加密授权信息","example":"XXXXXX","maxLength":65535,"minLength":0,"type":"string"},"error_code":{"description":"错误代码","example":"SMS.9004","maxLength":255,"minLength":0,"type":"string"},"error_msg":{"description":"错误信息","example":"The current account does not have the permission to execute policy. You do not have permission to perform action XXX on resource XXX.","maxLength":255,"minLength":0,"type":"string"},"error_param":{"description":"错误参数","example":["You do not have permission to perform action XXX on resource XXX."],"items":{"example":"XXXXXX","maxLength":65535,"minLength":0,"type":"string"},"maxItems":20,"minItems":1,"type":"array"}},"type":"object"},"UpdateTaskStatusReq":{"description":"This is a auto create Body Object","properties":{"is_need_consistency_check":{"default":false,"description":"是否进行一致性校验","type":"boolean"},"operation":{"description":"操作任务的具体动作\nstart:开始任务\nstop:停止任务\ntest:测试\ncutover:启动目的端\nclone_test:克隆测试\nrestart:重新开始\nnetwork_check:网络质量检测\nskip:跳过一致性校验子任务\nclear:清理快照资源\nmigration_test: 开始迁移演练\nerror_for_overspeed:处理任务超速,任务自动暂停","enum":["start","stop","test","clone_test","restart","network_check","clear","skip","migration_test"],"type":"string"},"switch_hce":{"default":false,"description":"是否切换hce,仅支持linux的迁移任务","type":"boolean"},"template_id":{"description":"模板id","maxLength":255,"minLength":0,"type":"string"}},"required":["operation"],"type":"object"}},"description":null,"group_id":"b335e41b37154b9c865b003f5fa2e3dd","host":"sms.cn-north-4.myhuaweicloud.com","id":"445ddf959e084967b32624838c2df728","info_version":"v3","method":"post","name":"UpdateTaskStatus","parameters":{},"paths":{"/v3/tasks/{task_id}/action":{"post":{"consumes":["application/json"],"deprecated":false,"description":"管理迁移任务,包括启动任务,暂停任务,同步任务,日志上传,删除快照资源等。","operationId":"UpdateTaskStatus","parameters":[{"description":"This is a auto create Body Object","in":"body","name":"UpdateTaskStatusRequestBody","required":true,"schema":{"$ref":"#/definitions/UpdateTaskStatusReq"}},{"description":"X-Auth-Token \n用户Token。  \n通过调用IAM服务获取用户Token接口获取(响应消息头中X-Subject-Token的值)。","in":"header","maxLength":16384,"minLength":1,"name":"X-Auth-Token","required":true,"type":"string","x-annotations":"","x-order":1},{"description":"迁移任务ID","in":"path","maxLength":36,"minLength":1,"name":"task_id","required":true,"type":"string","x-order":2}],"produces":["application/json"],"responses":{"200":{"description":"管理迁移任务成功","examples":{"application/json":{}},"schema":{"description":"管理迁移任务成功","type":"string"}},"403":{"description":"鉴权失败","examples":{"application/json":{"details":[{"error_code":"SMS.9004","error_msg":"You do not have permission to perform action XXX on resource XXX."}],"encoded_authorization_message":"XXXXXX","error_code":"SMS.9004","error_msg":"The current account does not have the permission to execute policy. You do not have permission to perform action XXX on resource XXX.","error_param":["You do not have permission to perform action XXX on resource XXX."]}},"schema":{"$ref":"#/definitions/Forbiddenstatus"}}},"summary":"管理迁移任务","tags":["任务管理"],"x-api-type":"TenantOpenAPI","x-apiErrorCodes":[{"errorCode":"SMS.6010","errorDescription":"请求体不是json格式","errorDescriptionEn":"The request body is not in the JSON format.","errorMessage":"The request body is not in the JSON format.","httpStatus":"400","solution":"请按要求设置请求体","solutionEn":""},{"errorCode":"SMS.6011","errorDescription":"请求体json不符合规范","errorDescriptionEn":"The request body json does not meet the specifications","errorMessage":"The request body json does not meet the specifications","httpStatus":"400","solution":"请按要求设置请求体","solutionEn":"Please set request body as required"},{"errorCode":"SMS.6526","errorDescription":"用户配额不足,无法测试或割接到新虚拟机","errorDescriptionEn":"Insufficient user quota to test or cut over to new virtual machine","errorMessage":"Insufficient user quota to test or cut over to new virtual machine","httpStatus":"400","solution":"请扩大虚拟机配额","solutionEn":""},{"errorCode":"SMS.7714","errorDescription":"只有运行和同步状态的任务可以暂停","errorDescriptionEn":"Only tasks in Migrating or Synchronizing status can be paused.","errorMessage":"Only tasks in Migrating or Synchronizing status can be paused.","httpStatus":"400","solution":"请调整任务状态","solutionEn":""},{"errorCode":"SMS.7715","errorDescription":"只有执行成功或者处于同步阶段任务才能同步","errorDescriptionEn":"Only tasks in Succeeded status can be syncrhonized.","errorMessage":"Only tasks in Succeeded status can be syncrhonized.","httpStatus":"400","solution":"请调整任务状态","solutionEn":""},{"errorCode":"SMS.7716","errorDescription":"上次日志收集完成前不能再收集日志","errorDescriptionEn":"Logs can be collected until the last log collection is complete.","errorMessage":"Logs can be collected until the last log collection is complete.","httpStatus":"400","solution":"请等待日志收集完成","solutionEn":""},{"errorCode":"SMS.7717","errorDescription":"启动任务前不能收集日志","errorDescriptionEn":"Logs cannot be collected before the migration task is started.","errorMessage":"Logs cannot be collected before the migration task is started.","httpStatus":"400","solution":"请先启动任务","solutionEn":""},{"errorCode":"SMS.7718","errorDescription":"只能处于同步失败阶段的才能回滚","errorDescriptionEn":"Rollback can be performed only when data synchronization fails.","errorMessage":"Rollback can be performed only when data synchronization fails.","httpStatus":"400","solution":"请调整任务状态","solutionEn":""},{"errorCode":"SMS.7703","errorDescription":"任务不存在","errorDescriptionEn":"Task doesn't exist.","errorMessage":"Task doesn't exist","httpStatus":"404","solution":"请检查任务是否存在","solutionEn":""},{"errorCode":"SMS.7720","errorDescription":"只能跳过一致性校验子任务","errorDescriptionEn":"Only subtask in consistency check can be skipped.","errorMessage":"Only subtask in consistency check can be skipped.","httpStatus":"400","solution":"请检查当前子任务是否为一致性校验","solutionEn":""}],"x-apiexplorer-hide":"false","x-apigateway-auth-type":"IAM","x-apigateway-match-mode":"NORMAL","x-apigateway-request-type":"public","x-constraint":"","x-is-registered":"Y","x-name":"管理迁移任务","x-open-region-cloud":"hc,hk","x-order":16,"x-publishpath":"UpdateTaskStatus","x-request-examples-1":{"operation":"clone_test","template_id":"xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxx0001"},"x-request-examples-2":{"operation":"test"},"x-request-examples-3":{"operation":"start"},"x-request-examples-4":{"operation":"stop"},"x-request-examples-5":{"operation":"restart"},"x-request-examples-6":{"operation":"clear"},"x-request-examples-7":{"operation":"skip"},"x-request-examples-8":{"operation":"migration_test"},"x-request-examples-description-1":"管理迁移任务。操作类型是克隆时,需要指定模板id。克隆ID为7a9a9540-ff28-4869-b9e4-855fbe12xxxx的任务的目的端服务器","x-request-examples-description-2":"启动目的端","x-request-examples-description-3":"启动ID为7a9a9540-ff28-4869-b9e4-855fbe12xxxx的任务","x-request-examples-description-4":"暂停ID为7a9a9540-ff28-4869-b9e4-855fbe12xxxx的任务","x-request-examples-description-5":"重启ID为7a9a9540-ff28-4869-b9e4-855fbe12xxxx任务","x-request-examples-description-6":"清理ID为7a9a9540-ff28-4869-b9e4-855fbe12xxxx任务的快照资源","x-request-examples-description-7":"跳过一致性校验子任务","x-request-examples-description-8":"开始迁移演练任务","x-request-examples-text-1":{"operation":"clone_test","template_id":"xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxx0001"},"x-request-examples-text-2":{"operation":"test"},"x-request-examples-text-3":{"operation":"start"},"x-request-examples-text-4":{"operation":"stop"},"x-request-examples-text-5":{"operation":"restart"},"x-request-examples-text-6":{"operation":"clear"},"x-request-examples-text-7":{"operation":"skip"},"x-request-examples-text-8":{"operation":"migration_test"},"x-request-examples-url-1":"POST https://{endpoint}/v3/tasks/7a9a9540-ff28-4869-b9e4-855fbe12xxxx/action","x-request-examples-url-2":"POST https://{endpoint}/v3/tasks/7a9a9540-ff28-4869-b9e4-855fbe12xxxx/action","x-request-examples-url-3":"POST https://{endpoint}/v3/tasks/7a9a9540-ff28-4869-b9e4-855fbe12xxxx/action","x-request-examples-url-4":"POST https://{endpoint}/v3/tasks/7a9a9540-ff28-4869-b9e4-855fbe12xxxx/action","x-request-examples-url-5":"POST https://{endpoint}/v3/tasks/7a9a9540-ff28-4869-b9e4-855fbe12xxxx/action","x-request-examples-url-6":"POST https://{endpoint}/v3/tasks/7a9a9540-ff28-4869-b9e4-855fbe12xxxx/action","x-request-examples-url-7":"POST https://{endpoint}/v3/tasks/7a9a9540-ff28-4869-b9e4-855fbe12xxxx/action","x-request-examples-url-8":"POST https://{endpoint}/v3/tasks/7a9a9540-ff28-4869-b9e4-855fbe12xxxx/action","x-scope":"Commercial","x-support-sdk":"Y","x-version":"v3"}}},"product_short":"SMS","region_id":"cn-north-4","schemes":["HTTPS"],"security_definitions":null,"summary":"管理迁移任务","tags":"任务管理","uri":null,"version":"2.0"}