{"base_path":"/","components":null,"consumes":"[\"application/json;charset=UTF-8\"]","definitions":{"Forbiddenstatus":{"description":"接口请求鉴权失败时返回的response body格式","properties":{"details":{"description":"详细错误信息","items":{"properties":{"error_code":{"description":"SMS错误代码","example":"SMS.9004","maxLength":65535,"minLength":0,"type":"string"},"error_msg":{"description":"SMS错误信息","example":"You do not have permission to perform action XXX on resource XXX.","maxLength":65535,"minLength":0,"type":"string"}}},"maxItems":20,"minItems":1,"type":"array"},"encoded_authorization_message":{"description":"加密授权信息","example":"XXXXXX","maxLength":65535,"minLength":0,"type":"string"},"error_code":{"description":"错误代码","example":"SMS.9004","maxLength":255,"minLength":0,"type":"string"},"error_msg":{"description":"错误信息","example":"The current account does not have the permission to execute policy. You do not have permission to perform action XXX on resource XXX.","maxLength":255,"minLength":0,"type":"string"},"error_param":{"description":"错误参数","example":["You do not have permission to perform action XXX on resource XXX."],"items":{"example":"XXXXXX","maxLength":65535,"minLength":0,"type":"string"},"maxItems":20,"minItems":1,"type":"array"}},"type":"object"},"PutCopyStateReq":{"description":"源端复制状态\ncopystate与migrationcycle忽略大小写,但必须满足一些搭配,否则更新失败,接口报错:\nmigrationcycle状态为\nchecking时,copystate只能为unavailable/waiting\nsetting时, waiting/premigready/premiging/premiged/premigfailed\nreplicating时,init/replicate/deleting/stopping/error/stopped\nsyncing时,syncing/cloning/deleting/stopping/error/stopped\ncutovering时,cutovering/deleting/stopping/error/stopped\ncutovered时,finished/deleting/stopping/error/stopped","properties":{"copystate":{"description":"源端服务器状态\nunavailable: 环境校验不通过\nwaiting: 等待\ninit: 初始化\nreplicate: 复制\nsyncing: 持续同步\nstopping: 暂停中\nstopped: 已暂停\nskipping: 跳过中\ndeleting: 删除中\nclearing: 清理快照资源中\ncleared: 清理快照资源完成\nclearfailed: 清理快照资源失败\npremigready: 迁移演练就绪\npremiging: 迁移演练中\npremiged: 迁移演练完成\npremigfailed: 迁移演练失败\ncloning: 等待克隆完成\ncutovering: 启动目的端中\nfinished: 启动目的端完成\nerror: 错误","enum":["unavailable","waiting","init","replicate","syncing","stopping","stopped","skipping","deleting","clearing","cleared","clearfailed","premigready","premiging","premiged","premigfailed","cloning","cutovering","finished","error"],"type":"string"},"migrationcycle":{"description":"迁移周期\nno_ready:未就绪\nready_for_test:已就绪\ntesting:测试中\ntested:测试完成\ncutovering:启动目的端中\ncutovered:启动目的端完成\nchecking:检查中\nsetting:设置中\nreplicating:复制中\nsyncing:同步中","enum":["no_ready","ready_for_test","testing","tested","cutovering","cutovered","checking","setting","replicating","syncing"],"type":"string"}},"required":["copystate","migrationcycle"],"type":"object"}},"description":null,"group_id":"b335e41b37154b9c865b003f5fa2e3dd","host":"sms.cn-north-4.myhuaweicloud.com","id":"e0566bc3fcc6403b97aee6e6adf11003","info_version":"v3","method":"put","name":"UpdateCopyState","parameters":{},"paths":{"/v3/sources/{source_id}/changestate":{"put":{"consumes":["application/json"],"deprecated":false,"description":"更新任务对应源端复制状态。\n在以下情况下不校验请求参数且更新不会生效:“迁移服务器”列表中“实时状态”一栏为“校验失败”、“暂停中”、“已暂停”、“删除中”、“迁移已完成”、“资源清理中”、“资源清理失败”时。","operationId":"UpdateCopyState","parameters":[{"description":"用户Token。  \n通过调用IAM服务获取用户Token接口获取(响应消息头中X-Subject-Token的值)。","in":"header","maxLength":16384,"minLength":1,"name":"X-Auth-Token","required":true,"type":"string","x-annotations":"","x-order":1},{"description":"源端服务器在主机迁移服务中的ID","in":"path","maxLength":36,"minLength":1,"name":"source_id","required":true,"type":"string","x-order":2},{"description":"源端复制状态请求","in":"body","name":"UpdateCopyStateRequestBody","required":true,"schema":{"$ref":"#/definitions/PutCopyStateReq"},"x-annotations":"","x-order":3}],"produces":["application/json"],"responses":{"200":{"description":"更新任务对应源端复制状态成功","examples":{"application/json":{}},"schema":{"description":"更新任务对应源端复制状态成功","type":"string"}},"403":{"description":"鉴权失败","examples":{"application/json":{"details":[{"error_code":"SMS.9004","error_msg":"You do not have permission to perform action XXX on resource XXX."}],"encoded_authorization_message":"XXXXXX","error_code":"SMS.9004","error_msg":"The current account does not have the permission to execute policy. You do not have permission to perform action XXX on resource XXX.","error_param":["You do not have permission to perform action XXX on resource XXX."]}},"schema":{"$ref":"#/definitions/Forbiddenstatus"}}},"summary":"更新任务对应源端复制状态","tags":["源端管理"],"x-api-type":"TenantOpenAPI","x-apiErrorCodes":[{"errorCode":"SMS.7703","errorDescription":"任务不存在","errorDescriptionEn":"Task doesn't exist","errorMessage":"Task doesn't exist","httpStatus":"404","solution":"请检查任务是否存在","solutionEn":""}],"x-apiexplorer-hide":"false","x-apigateway-auth-type":"IAM","x-apigateway-match-mode":"NORMAL","x-apigateway-request-type":"public","x-constraint":"","x-is-registered":"Y","x-name":"更新任务对应源端复制状态","x-open-region-cloud":"hc,hk","x-order":7,"x-publishpath":"UpdateCopyState","x-request-examples-1":{"copystate":"WAITING","migrationcycle":"cutovered"},"x-request-examples-description-1":"更新源端dcdbe339-b02d-4578-95a1-9c9c547dxxxx任务的复制状态,更改源端服务器状态为WAITING,迁移周期为cutovered。","x-request-examples-text-1":{"copystate":"WAITING","migrationcycle":"cutovered"},"x-request-examples-url-1":"PUT https://{endpoint}/v3/sources/dcdbe339-b02d-4578-95a1-9c9c547dxxxx/changestate","x-scope":"Commercial","x-support-sdk":"Y","x-version":"v3"}}},"product_short":"SMS","region_id":"cn-north-4","schemes":["HTTPS"],"security_definitions":null,"summary":"更新任务对应源端复制状态","tags":"源端管理","uri":null,"version":"2.0"}