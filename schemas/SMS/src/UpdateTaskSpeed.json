{"base_path":"/","components":null,"consumes":"[\"application/json;charset=UTF-8\"]","definitions":{"Forbiddenstatus":{"description":"接口请求鉴权失败时返回的response body格式","properties":{"details":{"description":"详细错误信息","items":{"properties":{"error_code":{"description":"SMS错误代码","example":"SMS.9004","maxLength":65535,"minLength":0,"type":"string"},"error_msg":{"description":"SMS错误信息","example":"You do not have permission to perform action XXX on resource XXX.","maxLength":65535,"minLength":0,"type":"string"}}},"maxItems":20,"minItems":1,"type":"array"},"encoded_authorization_message":{"description":"加密授权信息","example":"XXXXXX","maxLength":65535,"minLength":0,"type":"string"},"error_code":{"description":"错误代码","example":"SMS.9004","maxLength":255,"minLength":0,"type":"string"},"error_msg":{"description":"错误信息","example":"The current account does not have the permission to execute policy. You do not have permission to perform action XXX on resource XXX.","maxLength":255,"minLength":0,"type":"string"},"error_param":{"description":"错误参数","example":["You do not have permission to perform action XXX on resource XXX."],"items":{"example":"XXXXXX","maxLength":65535,"minLength":0,"type":"string"},"maxItems":20,"minItems":1,"type":"array"}},"type":"object"},"UpdateTaskSpeedReq":{"description":"This is a auto create Body Object","properties":{"agent_cpu_usage":{"description":"Agent的CPU使用率,0到100,单位是百分比","example":10.0,"format":"double","maximum":100,"minimum":0,"type":"number"},"agent_disk_io":{"description":"Agent的磁盘I/O值,单位是Mbit/s","example":100.0,"format":"double","maximum":10000.0,"minimum":0,"type":"number"},"agent_mem_usage":{"description":"Agent的内存使用值,单位是MB","example":100.0,"format":"double","maximum":1048576.0,"minimum":0,"type":"number"},"agent_time":{"description":"Agent的当前时间,用于超速检测,因为限速值是可以分时间段设置的","example":"2024-09-20T15:30:00","maxLength":30,"minLength":0,"type":"string"},"compress_rate":{"description":"实施文件压缩率","format":"double","maximum":10000,"minimum":0,"type":"number"},"migrate_speed":{"description":"实施迁移速率,单位Mbit/s","format":"double","maximum":10000,"minimum":0,"type":"number"},"need_migration_test":{"description":"是否开启迁移演练","type":"boolean"},"process_trace":{"description":"迁移或同步时,具体的迁移详情","maxLength":2048,"minLength":0,"type":"string"},"progress":{"description":"当前上报的子任务的最新百分比进度","format":"int32","maximum":100,"minimum":0,"type":"integer"},"remain_time":{"description":"剩余时间","format":"int64","maximum":2147483647,"minimum":0,"type":"integer"},"replicatesize":{"description":"当前任务已经复制的数据量大小(B)","format":"int64","maximum":9223372036854775807,"minimum":0,"type":"integer"},"subtask_name":{"description":"当前上报进度的子任务名称,子任务名称包括:\n创建虚拟机 CREATE_CLOUD_SERVER\n配置安全通道 SSL_CONFIG\n挂载代理镜像 ATTACH_AGENT_IMAGE\n卸载代理镜像 DETTACH_AGENT_IMAGE\nLinux分区格式化 FORMAT_DISK_LINUX\nLinux分区格式化(文件级) FORMAT_DISK_LINUX_FILE\nLinux分区格式化(块级) FORMAT_DISK_LINUX_BLOCK\nWindows分区格式化 FORMAT_DISK_WINDOWS\nLinux文件级数据迁移 MIGRATE_LINUX_FILE,\nLinux块级数据迁移 MIGRATE_LINUX_BLOCK\nWindows块级数据迁移 MIGRATE_WINDOWS_BLOCK\n克隆一个虚拟机 CLONE_VM\nLinux文件级数据同步 SYNC_LINUX_FILE\nLinux块级数据同步 SYNC_LINUX_BLOCK\nWindows块级数据同步 SYNC_WINDOWS_BLOCK\nLinux配置修改 CONFIGURE_LINUX\nLinux配置修改(块级)CONFIGURE_LINUX_BLOCK\nLinux配置修改(文件级) CONFIGURE_LINUX_FILE\nWindows配置修改 CONFIGURE_WINDOWS","enum":["CREATE_CLOUD_SERVER","SSL_CONFIG","ATTACH_AGENT_IMAGE","DETTACH_AGENT_IMAGE","FORMAT_DISK_LINUX","FORMAT_DISK_LINUX_FILE","FORMAT_DISK_LINUX_BLOCK","FORMAT_DISK_WINDOWS","MIGRATE_LINUX_FILE","MIGRATE_LINUX_BLOCK","MIGRATE_WINDOWS_BLOCK","CLONE_VM","SYNC_LINUX_FILE","SYNC_LINUX_BLOCK","SYNC_WINDOWS_BLOCK","CONFIGURE_LINUX","CONFIGURE_LINUX_BLOCK","CONFIGURE_LINUX_FILE","CONFIGURE_WINDOWS"],"maxLength":255,"minLength":0,"type":"string"},"total_cpu_usage":{"description":"主机的CPU使用率,0到100,单位是百分比","example":50.0,"format":"double","maximum":100,"minimum":0,"type":"number"},"total_disk_io":{"description":"主机的磁盘I/O值,单位是Mbit/s","example":1000.0,"format":"double","maximum":10000.0,"minimum":0,"type":"number"},"total_mem_usage":{"description":"主机的内存使用值,单位是MB","example":500.0,"format":"double","maximum":1048576.0,"minimum":0,"type":"number"},"totalsize":{"description":"当前任务的总迁移数据大小","format":"int64","maximum":9223372036854775807,"minimum":0,"type":"integer"}},"required":["subtask_name","progress","replicatesize","totalsize","process_trace"],"type":"object"}},"description":null,"group_id":"b335e41b37154b9c865b003f5fa2e3dd","host":"sms.cn-north-4.myhuaweicloud.com","id":"d700892a5c9445bbb0f94aa978f478d3","info_version":"v3","method":"put","name":"UpdateTaskSpeed","parameters":{},"paths":{"/v3/tasks/{task_id}/progress":{"put":{"consumes":["application/json"],"description":"此接口由安装在源端服务器上的迁移Agent在数据迁移阶段调用,用来将迁移的具体进度上报给SMS服务端。\n迁移Agent自动调用此接口用于上报数据迁移进度,您无需调用此接口。","operationId":"UpdateTaskSpeed","parameters":[{"description":"This is a auto create Body Object","in":"body","name":"UpdateTaskSpeedRequestBody","required":false,"schema":{"$ref":"#/definitions/UpdateTaskSpeedReq"}},{"description":"X-Auth-Token \n用户Token。  \n通过调用IAM服务获取用户Token接口获取(响应消息头中X-Subject-Token的值)。","in":"header","maxLength":16384,"minLength":1,"name":"X-Auth-Token","required":true,"type":"string","x-annotations":"","x-order":1},{"description":"主机迁移任务的ID","in":"path","maxLength":36,"minLength":1,"name":"task_id","required":true,"type":"string","x-order":2}],"produces":["application/json"],"responses":{"200":{"description":"上报数据迁移进度和速率成功","examples":{"application/json":{}},"schema":{"description":"上报数据迁移进度和速率成功","type":"string"}},"403":{"description":"鉴权失败","examples":{"application/json":{"details":[{"error_code":"SMS.9004","error_msg":"You do not have permission to perform action XXX on resource XXX."}],"encoded_authorization_message":"XXXXXX","error_code":"SMS.9004","error_msg":"The current account does not have the permission to execute policy. You do not have permission to perform action XXX on resource XXX.","error_param":["You do not have permission to perform action XXX on resource XXX."]}},"schema":{"$ref":"#/definitions/Forbiddenstatus"}}},"summary":"上报数据迁移进度和速率","tags":["任务管理"],"x-api-type":"TenantOpenAPI","x-apiErrorCodes":[{"errorCode":"SMS.6004","errorDescription":"非法的子任务名称","errorDescriptionEn":"subtask name is illegal","errorMessage":"subtask name is illegal","httpStatus":"400","solution":"请输入正确的子任务名称","solutionEn":""},{"errorCode":"SMS.6101","errorDescription":"迁移进度不符合范围","errorDescriptionEn":"Migration progress does not meet the scope","errorMessage":"Migration progress does not meet the scope","httpStatus":"400","solution":"迁移进度应该为0~100的整数","solutionEn":"Migration progress should be an integer from 0 to 100"},{"errorCode":"SMS.6102","errorDescription":"参数Json格式不满足要求","errorDescriptionEn":"The parameter JSON format does not meet the requirements","errorMessage":"The parameter JSON format does not meet the requirements","httpStatus":"400","solution":"请按要求输入正确的Json格式","solutionEn":"Please enter the correct JSON format as required"},{"errorCode":"SMS.7703","errorDescription":"任务不存在","errorDescriptionEn":"Task doesn't exist","errorMessage":"Task doesn't exist","httpStatus":"404","solution":"请检查任务是否存在","solutionEn":""}],"x-apiexplorer-hide":"false","x-apigateway-auth-type":"IAM","x-apigateway-match-mode":"NORMAL","x-apigateway-request-type":"public","x-constraint":"","x-is-registered":"Y","x-name":"上报数据迁移进度和速率","x-open-region-cloud":"hc,hk","x-order":17,"x-publishpath":"UpdateTaskSpeed","x-request-examples-1":{"process_trace":"","progress":100,"replicatesize":1000,"subtask_name":"ATTACH_AGENT_IMAGE","totalsize":100000},"x-request-examples-description-1":"上报具体的数据迁移进度,当前的子任务名称是ATTACH_AGENT_IMAGE,任务进度为100,当前任务总迁移数据大小为10000.","x-request-examples-text-1":{"process_trace":"","progress":100,"replicatesize":1000,"subtask_name":"ATTACH_AGENT_IMAGE","totalsize":100000},"x-request-examples-url-1":"PUT https://{endpoint}/v3/tasks/7a9a9540-ff28-4869-b9e4-855fbe12xxxx/progress","x-scope":"Commercial","x-support-sdk":"Y","x-version":"v3"}}},"product_short":"SMS","region_id":"cn-north-4","schemes":["HTTPS"],"security_definitions":null,"summary":"上报数据迁移进度和速率","tags":"任务管理","uri":null,"version":"2.0"}