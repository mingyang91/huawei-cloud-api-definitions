{"base_path":"/v2","components":null,"consumes":"[\"application/json;charset=UTF-8\"]","definitions":{"BasePage":{"description":"分页基本信息","properties":{"size":{"description":"本次返回的列表长度","format":"int32","type":"integer"},"total":{"description":"满足条件的记录数","format":"int64","type":"integer"}},"required":["size","total"]},"ErrorMsg":{"properties":{"error_code":{"description":"错误码","type":"string"},"error_msg":{"description":"错误描述","type":"string"}},"required":["error_code","error_msg"]},"MemberBase":{"properties":{"host":{"description":"后端服务器地址\n\n后端实例类型为ip时必填","maxLength":64,"type":"string"},"is_backup":{"default":false,"description":"是否备用节点。\n\n开启后对应后端服务为备用节点,仅当非备用节点全部故障时工作。\n\n实例需要升级到对应版本才支持此功能,若不支持请联系技术支持。","type":"boolean"},"member_group_name":{"description":"后端服务器组名称。为后端服务地址选择服务器组,便于统一修改对应服务器组的后端地址。","type":"string"},"port":{"description":"后端服务器端口","format":"int32","maximum":65535,"minimum":0,"type":"integer"},"status":{"description":"后端服务器状态\n  - 1:可用\n  - 2:不可用","enum":[1,2],"format":"int32","type":"integer"},"weight":{"description":"权重值。\n\n允许您对后端服务进行评级,权重值越大,转发到该云服务的请求数量越多。","format":"int32","maximum":10000,"minimum":0,"type":"integer"}}},"MemberInfo":{"allOf":[{"$ref":"#/definitions/MemberBase"},{"properties":{"ecs_id":{"description":"后端云服务器的编号。\n\n后端实例类型为ecs时必填,支持英文,数字,“-”,“_”,1 ~ 64字符。","maxLength":255,"type":"string"},"ecs_name":{"description":"后端云服务器的名称。\n\n后端实例类型为ecs时必填,支持汉字,英文,数字,“-”,“_”,“.”,1 ~ 64字符。","maxLength":64,"type":"string"}},"type":"object"}]},"VpcMemberCreate":{"properties":{"members":{"description":"后端实例列表","items":{"$ref":"#/definitions/MemberInfo"},"type":"array"}},"required":["members"]},"VpcMemberInfo":{"allOf":[{"$ref":"#/definitions/MemberInfo"},{"properties":{"create_time":{"description":"后端实例增加到VPC通道的时间","format":"date-time","type":"string"},"id":{"description":"后端实例对象的编号","type":"string"},"member_group_id":{"description":"后端服务器组编号","type":"string"},"vpc_channel_id":{"description":"VPC通道的编号","type":"string"}},"type":"object"}]},"VpcMemberPage":{"allOf":[{"$ref":"#/definitions/BasePage"},{"properties":{"members":{"description":"本次查询到的云服务器列表","items":{"$ref":"#/definitions/VpcMemberInfo"},"type":"array"}},"type":"object"}]}},"description":null,"group_id":"d0b771ab4a6d46a895580726f0d5479b","host":"apig.cn-north-4.myhuaweicloud.com","id":"a39c7cb2e7054b83bd402fc132e43495","info_version":"v2","method":"post","name":"AddingBackendInstancesV2","parameters":{"apic_instance_id":{"description":"实例ID,在API网关控制台的“实例信息”中获取。","in":"path","name":"instance_id","required":true,"type":"string","x-example":"f0fa1789-3b76-433b-a787-9892951c620e","x-sec-authority-parameter":"Y"},"apic_project_id":{"description":"项目ID,获取方式请参见[获取项目ID](apig-api-180713009.xml)。","in":"path","name":"project_id","required":true,"type":"string","x-example":"73d69ae0cfcf460190522d06b60f05ad","x-sec-authority-parameter":"Y"},"apic_vpc_channel_id":{"description":"VPC通道的编号","in":"path","name":"vpc_channel_id","required":true,"type":"string","x-example":"56a7d7358e1b42459c9d730d65b14e59"},"apic_x_auth_token":{"description":"用户Token。通过调用IAM服务获取用户Token接口获取(响应消息头中X-Subject-Token的值)。","in":"header","name":"X-Auth-Token","required":true,"type":"string","x-example":"MIIDkgYJKoZIhvcNAQcCoIIDgzCCXXXXXX..."}},"paths":{"/{project_id}/apigw/instances/{instance_id}/vpc-channels/{vpc_channel_id}/members":{"post":{"description":"为指定的VPC通道添加后端实例\n\n若指定地址的后端实例已存在,则更新对应后端实例信息。若请求体中包含多个重复地址的后端实例定义,则使用第一个定义。","operationId":"AddingBackendInstancesV2","parameters":[{"$ref":"#/parameters/apic_x_auth_token"},{"$ref":"#/parameters/apic_project_id"},{"$ref":"#/parameters/apic_instance_id"},{"$ref":"#/parameters/apic_vpc_channel_id"},{"description":"添加或更新后端实例的请求体","in":"body","name":"AddingBackendInstancesV2RequestBody","required":true,"schema":{"$ref":"#/definitions/VpcMemberCreate"}}],"responses":{"201":{"description":"Created","examples":{"application/json":{"members":[{"create_time":"2020-07-23T09:13:24Z","ecs_id":"3082720c-3c15-409c-9ae3-4983ddfb6a9d","ecs_name":"APIGtest","host":"192.168.2.25","id":"683b6807cad54122a6777ad047a6178e","is_backup":false,"member_group_id":"cf868f0224084710a1e188b7d3057c52","member_group_name":"test","port":22,"status":1,"vpc_channel_id":"105c6902457144a4820dff8b1ad63331","weight":1}],"size":1,"total":1},"application/json-1":{"members":[{"create_time":"2020-07-23T09:03:53Z","ecs_id":"1082720c-3c15-409c-9ae3-4983ddfb6a9d","ecs_name":"APIGtest02","host":"192.168.0.17","id":"5c868f0224084710a1e188b7d3057c52","is_backup":false,"member_group_id":"df868f0224084710a1e188b7d3057c52","member_group_name":"test02","port":22,"status":1,"vpc_channel_id":"105c6902457144a4820dff8b1ad63331","weight":2},{"create_time":"2020-07-23T07:24:34Z","ecs_id":"ebe1104f-1254-4ac6-8ed7-366bec84f36e","ecs_name":"APIGtest01","host":"192.168.0.39","id":"33ac0e39d005492eb1f4683e66d1a0d1","is_backup":false,"member_group_id":"ef868f0224084710a1e188b7d3057c42","member_group_name":"test01","port":22,"status":1,"vpc_channel_id":"105c6902457144a4820dff8b1ad63331","weight":1}],"size":2,"total":2}},"schema":{"$ref":"#/definitions/VpcMemberPage"}},"400":{"description":"Bad Request","examples":{"application/json":{"error_code":"APIG.2004","error_msg":"The parameter value is outside the allowable range,parameterName:weight. Please refer to the support documentation"}},"schema":{"$ref":"#/definitions/ErrorMsg"}},"401":{"description":"Unauthorized","examples":{"application/json":{"error_code":"APIG.1002","error_msg":"Incorrect token or token resolution failed"}},"schema":{"$ref":"#/definitions/ErrorMsg"}},"403":{"description":"Forbidden","examples":{"application/json":{"error_code":"APIG.1005","error_msg":"No permissions to request this method"}},"schema":{"$ref":"#/definitions/ErrorMsg"}},"404":{"description":"Not Found","examples":{"application/json":{"error_code":"APIG.3023","error_msg":"The VPC channel does not exist,id:56a7d7358e1b42459c9d730d65b14e59"}},"schema":{"$ref":"#/definitions/ErrorMsg"}},"500":{"description":"Internal Server Error","examples":{"application/json":{"error_code":"APIG.9999","error_msg":"System error"}},"schema":{"$ref":"#/definitions/ErrorMsg"}}},"schemes":["https"],"summary":"添加或更新后端实例","tags":["专享版-VPC通道管理"],"x-api-framework":"RestfulAPI","x-api-position":"管理面","x-api-type":"open-api","x-api-user":"IAM普通租户","x-apigateway-request-type":"public","x-is-registered":"Y","x-open-region-cloud":"hws,hws_hk,cmcc,ctc,dt,g42,hk_g42,hk_sbc,hk_tm,hws_eu,hws_ocb,ocb,sbc,tm","x-order":6,"x-produc-type":"apig","x-request-examples-1":{"members":[{"host":"192.168.2.25","member_group_name":"test","weight":1}]},"x-request-examples-2":{"members":[{"ecs_id":"1082720c-3c15-409c-9ae3-4983ddfb6a9d","ecs_name":"APIGtest02","weight":2}]},"x-request-examples-description-1":"VPC通道添加后端服务器地址","x-request-examples-description-2":"VPC通道添加云服务器","x-support-sdk":"Y"}}},"product_short":"APIG","region_id":"cn-north-4","schemes":["HTTPS"],"security_definitions":null,"summary":"添加或更新后端实例","tags":"专享版-VPC通道管理","uri":null,"version":"2.0"}