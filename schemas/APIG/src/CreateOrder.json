{"base_path":"/v2","components":null,"consumes":"[\"application/json;charset=UTF-8\"]","definitions":{"ErrorMsg":{"properties":{"error_code":{"description":"错误码","type":"string"},"error_msg":{"description":"错误描述","type":"string"}},"required":["error_code","error_msg"]},"InstanceAbstractReq":{"properties":{"description":{"description":"实例描述。支持除>和<以外的字符,长度为0~255。","pattern":"^[^><]{0,255}$","type":"string"},"maintain_begin":{"description":"维护时间窗开始时间。时间格式为 xx:00:00,xx取值为02,06,10,14,18,22。\n\n在这个时间段内,运维人员可以对该实例的节点进行维护操作。维护期间,业务可以正常使用,可能会发生闪断。维护操作通常几个月一次。","pattern":"^([0-1][0-9]|[2][0-4]):00:00$","type":"string"},"maintain_end":{"description":"维护时间窗结束时间。时间格式为 xx:00:00,与维护时间窗开始时间相差4个小时。\n\n在这个时间段内,运维人员可以对该实例的节点进行维护操作。维护期间,业务可以正常使用,可能会发生闪断。维护操作通常几个月一次。","pattern":"^([0-1][0-9]|[2][0-4]):00:00$","type":"string"}}},"InstanceCreateReq":{"allOf":[{"$ref":"#/definitions/InstanceAbstractReq"},{"properties":{"available_zone_ids":{"description":"可用区列表。\n\n可用区指在同一地域下,电力、网络隔离的物理区域,可用区之内内网互通,不同可用区之间物理隔离。选择多个AZ部署可以有效提升可靠性。\n\n获取方法:通过文档中实例管理的可用区列表接口查询。","example":["xx-xxx-4a","xx-xxx-4b"],"items":{"type":"string"},"type":"array"},"bandwidth_charging_mode":{"default":"bandwidth","description":"出公网带宽计费类型,实例需要开启出公网功能时需要填写:\n- bandwidth:按带宽计费\n- traffic:按流量计费","enum":["bandwidth","traffic"],"type":"string"},"bandwidth_size":{"default":5,"description":"出公网带宽\n\n实例需要开启出公网功能时需要填写,绑定后使用者可以利用该出口访问公网上的互联网资源","format":"int32","type":"integer"},"eip_id":{"description":"弹性公网IP ID。\n\n实例需要开启公网访问,且loadbalancer_provider为lvs时需要填写,绑定后使用者可以通过该入口从公网访问APIG实例中的API等资源\n\n获取方法:登录虚拟私有云服务的控制台界面,在弹性公网IP的详情页面查找弹性公网IP ID。","example":"41f961ab-2bdd-4ca7-9b59-cfc4fcef10c9","type":"string"},"enterprise_project_id":{"description":"企业项目ID,企业账号必填。\n\n获取方法如下:\n- 方法1:登录企业项目管理界面,在项目管理详情页面查找项目ID。\n- 方法2:通过企业项目管理的API接口查询,具体方法请参见《企业管理API参考》的“查询企业项目列表”章节。","type":"string"},"ingress_bandwidth_charging_mode":{"default":"bandwidth","description":"入公网带宽计费类型,实例需要开启入公网功能,且loadbalancer_provider为elb时需要填写:\n- bandwidth:按带宽计费\n- traffic:按流量计费","enum":["bandwidth","traffic"],"type":"string"},"ingress_bandwidth_size":{"default":5,"description":"入公网带宽\n\n实例需要开启入公网功能,且loadbalancer_provider为elb时需要填写,绑定后使用者可以通过该入口从公网访问APIG实例中的API等资源","format":"int32","type":"integer"},"instance_id":{"description":"实例编号,不填写自动生成","pattern":"^[a-f0-9][a-fA-F0-9_-]{34}[a-f0-9]$","type":"string"},"instance_name":{"description":"实例名称。\n\n中英文字符开头,只能由中英文字符、数字、中划线、下划线组成,长度为3~64。\n\n> 中文字符必须为UTF-8或者unicode编码。","maxLength":64,"minLength":3,"pattern":"^([a-zA-Z]|[\\u4e00-\\u9fa5])([a-zA-Z0-9_-]|[\\u4e00-\\u9fa5]){2,63}$","type":"string"},"ipv6_enable":{"description":"公网访问是否支持IPv6。\n\n当前仅部分region部分可用区支持IPv6","type":"boolean"},"loadbalancer_provider":{"default":"lvs","description":"实例使用的负载均衡器类型\n- lvs Linux虚拟服务器\n- elb 弹性负载均衡,elb仅部分region支持","enum":["lvs","elb"],"example":"elb","type":"string"},"security_group_id":{"description":"指定实例所属的安全组。\n\n获取方法如下:\n- 方法1:登录虚拟私有云服务的控制台界面,在安全组的详情页面查找安全组ID。\n- 方法2:通过虚拟私有云服务的API接口查询,具体方法请参见《虚拟私有云服务API参考》的“查询安全组列表”章节。","example":"4b95a790-5cfc-463d-8de5-42199e55371c","pattern":"^[a-f0-9][a-fA-F0-9_-]{34}[a-f0-9]$","type":"string"},"spec_id":{"description":"实例规格:\n- BASIC:基础版实例\n- PROFESSIONAL:专业版实例\n- ENTERPRISE:企业版实例\n- PLATINUM:铂金版实例\n- BASIC_IPV6:基础版IPV6实例\n- PROFESSIONAL_IPV6:专业版IPV6实例\n- ENTERPRISE_IPV6:企业版IPV6实例\n- PLATINUM_IPV6:铂金版IPV6实例\n- PLATINUM_X2:铂金版 x2实例\n- PLATINUM_X3:铂金版 x3实例\n- PLATINUM_X4:铂金版 x4实例\n- PLATINUM_X5:铂金版 x5实例\n- PLATINUM_X6:铂金版 x6实例\n- PLATINUM_X7:铂金版 x7实例\n- PLATINUM_X8:铂金版 x8实例\n\n当前仅部分region支持铂金版 x2、铂金版 x3、铂金版 x4、铂金版 x5、铂金版 x6、铂金版 x7、铂金版 x8","enum":["BASIC","PROFESSIONAL","ENTERPRISE","PLATINUM","BASIC_IPV6","PROFESSIONAL_IPV6","ENTERPRISE_IPV6","PLATINUM_IPV6","PLATINUM_X2","PLATINUM_X3","PLATINUM_X4","PLATINUM_X5","PLATINUM_X6","PLATINUM_X7","PLATINUM_X8"],"type":"string"},"subnet_id":{"description":"子网的网络ID。\n\n获取方法如下:\n- 方法1:登录虚拟私有云服务的控制台界面,单击VPC下的子网,进入子网详情页面,查找网络ID。\n- 方法2:通过虚拟私有云服务的API接口查询,具体方法请参见《虚拟私有云服务API参考》的“查询子网列表”章节。","example":"a3bd29e4-d5bc-414c-a79a-1f35ee4ead88","type":"string"},"tags":{"description":"标签列表。\n\n一个实例默认最多支持创建20个标签","items":{"$ref":"#/definitions/TmsKeyValue"},"maxItems":20,"minItems":0,"type":"array"},"vpc_id":{"description":"虚拟私有云ID。\n\n获取方法如下:\n  - 方法1:登录虚拟私有云服务的控制台界面,在虚拟私有云的详情页面查找VPC ID。\n  - 方法2:通过虚拟私有云服务的API接口查询,具体方法请参见《虚拟私有云服务API参考》的“查询VPC列表”章节。","example":"0402ea19-5457-4032-9d1b-eb48b98f6c66","type":"string"},"vpcep_service_name":{"description":"终端节点服务的名称。\n\n支持英文、数字、中划线、下划线,0~16个字符。\n\n如果您不填写该参数,系统生成的终端节点服务的名称为{region}.apig.{service_id}。\n如果您填写该参数,系统生成的终端节点服务的名称为{region}.{vpcep_service_name}.{service_id}。\n实例创建完成后,可以在实例管理->终端节点管理页面修改该名称。","example":"apig_vpcep1","pattern":"^[a-zA-Z0-9_-]{0,16}$","type":"string"}},"type":"object"}],"required":["instance_name","spec_id","vpc_id","subnet_id","security_group_id","available_zone_ids"]},"InstanceCreateReqV2":{"allOf":[{"$ref":"#/definitions/InstanceCreateReq"},{"properties":{"available_zone_ids":{"description":"可用区列表","items":{"type":"string"},"type":"array"},"bandwidth_charging_mode":{"description":"带宽收费模式:\n- bandwidth\n- traffic","enum":["bandwidth","traffic"],"type":"string"},"ingress_bandwidth_charging_mode":{"description":"入口带宽收费模式:\n- bandwidth\n- traffic","enum":["bandwidth","traffic"],"type":"string"},"ingress_bandwidth_size":{"description":"入口带宽大小","type":"integer"},"loadbalancer_provider":{"description":"负载均衡器类型:\n- lvs\n- elb","enum":["lvs","elb"],"type":"string"}},"type":"object"}]},"InstanceOrderReq":{"properties":{"charging_mode":{"description":"计费模式。","type":"integer"},"composite_product_id":{"description":"组合产品编号","type":"string"},"instance_info":{"$ref":"#/definitions/InstanceCreateReqV2","description":"实例信息"},"is_auto_renew":{"description":"是否支持自动续费","type":"integer"},"payment_mode":{"description":"支付模式。","type":"string"},"period_num":{"description":"订购周期数","type":"integer"},"period_type":{"description":"订购周期类型:\n- 2:月\n- 3:年","type":"integer"},"product_id":{"description":"产品编号","type":"string"},"promotion_id":{"description":"促销产品编号","type":"string"},"promotion_info":{"description":"促销信息","type":"string"},"promotion_plan_id":{"description":"促销计划编号","type":"string"}}},"OrderResp":{"properties":{"order_id":{"description":"订单编号","type":"string"}}},"TmsKeyValue":{"properties":{"key":{"description":"键。\n\n支持可用 UTF-8 格式表示的字母(包含中文)、数字和空格,以及以下字符: _ . : = + - @;\n\\_sys\\_开头属于系统标签,租户不能输入","maxLength":128,"minLength":1,"type":"string"},"value":{"description":"值。\n\n支持可用 UTF-8 格式表示的字母(包含中文)、数字和空格,以及以下字符: _ . : / = + - @","maxLength":255,"minLength":0,"type":"string"}}}},"description":null,"group_id":"d0b771ab4a6d46a895580726f0d5479b","host":"apig.cn-north-4.myhuaweicloud.com","id":"55a253e0d3764d45af3dd92f3c750abb","info_version":"v2","method":"post","name":"CreateOrder","parameters":{"apic_project_id":{"description":"项目ID,获取方式请参见[获取项目ID](apig-api-180713009.xml)。","in":"path","name":"project_id","required":true,"type":"string","x-example":"73d69ae0cfcf460190522d06b60f05ad"},"apic_x_auth_token":{"description":"用户Token。通过调用IAM服务获取用户Token接口获取(响应消息头中X-Subject-Token的值)。","in":"header","name":"X-Auth-Token","required":true,"type":"string","x-example":"MIIDkgYJKoZIhvcNAQcCoIIDgzCCXXXXXX..."}},"paths":{"/{project_id}/apigw/prepay-instances":{"post":{"description":"创建包周期专享版实例。","operationId":"CreateOrder","parameters":[{"$ref":"#/parameters/apic_x_auth_token"},{"$ref":"#/parameters/apic_project_id"},{"description":"创建包周期专享版实例的请求体","in":"body","name":"CreateOrderRequestBody","required":true,"schema":{"$ref":"#/definitions/InstanceOrderReq"}}],"responses":{"200":{"description":"OK","examples":{"application/json":{"order_id":"CS2306142249SHP53"}},"schema":{"$ref":"#/definitions/OrderResp"}},"401":{"description":"Unauthorized","examples":{"application/json":{"error_code":"APIC.7102","error_msg":"Incorrect token or token resolution failed"}},"schema":{"$ref":"#/definitions/ErrorMsg"}},"403":{"description":"Forbidden","examples":{"application/json":{"error_code":"APIC.7106","error_msg":"No permissions to request for the method"}},"schema":{"$ref":"#/definitions/ErrorMsg"}},"500":{"description":"Internal Server Error","examples":{"application/json":{"error_code":"APIC.9000","error_msg":"Failed to request internal service"}},"schema":{"$ref":"#/definitions/ErrorMsg"}}},"schemes":["https"],"summary":"创建专享版实例(包周期)","tags":["专享版-实例管理"],"x-api-framework":"RestfulAPI","x-api-position":"管理面","x-api-type":"open-api","x-api-user":"IAM普通租户","x-apigateway-request-type":"public","x-is-registered":"Y","x-open-region-cloud":"hws","x-request-examples-1":{"charging_mode":1,"instance_info":{"available_zone_ids":["xx-xxx-7b","xx-xxx-7a"],"bandwidth_size":5,"description":"test create instance","eip_id":"41f961ab-2bdd-4ca7-9b59-cfc4fcef10c9","enterprise_project_id":"0","instance_name":"apig-demo","maintain_begin":"22:00:00","maintain_end":"02:00:00","security_group_id":"36d0ec18-bd10-4da7-86f3-ad7a5ddc55d7","spec_id":"PROFESSIONAL","subnet_id":"a938121c-11c4-4c91-b983-bc9acd347bb5","vpc_id":"0957108c-257c-4ce0-9e93-527d279ce763"},"period_num":1,"period_type":2,"product_id":"00301-35126-0--0"},"x-support-sdk":"Y"}}},"product_short":"APIG","region_id":"cn-north-4","schemes":["HTTPS"],"security_definitions":null,"summary":"创建专享版实例(包周期)","tags":"专享版-实例管理","uri":null,"version":"2.0"}