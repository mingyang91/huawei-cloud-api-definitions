{"base_path":"/v1.0","components":null,"consumes":"[\"application/json;charset=UTF-8\"]","definitions":{"ThrottleBindingListResp":{"properties":{"throttle_applys":{"description":"API与流控策略的绑定关系列表","items":{"$ref":"#/definitions/ThrottleBindingResp"},"type":"array"}}},"ThrottleBindingReq":{"properties":{"publish_ids":{"description":"API的发布记录编号","example":["374a6d5a-20c7-4ea1-82e1-19fce4556956","65e6fe53-1ac3-4481-ba36-9f0bc6f22057"],"items":{"type":"string"},"type":"array"},"strategy_id":{"description":"流控策略编号","example":"0325b671-2d50-4614-9868-22102262695d","type":"string"}},"required":["strategy_id","publish_ids"]},"ThrottleBindingResp":{"properties":{"apply_time":{"description":"绑定时间","type":"string"},"id":{"description":"绑定关系的ID","type":"string"},"publish_id":{"description":"API的发布记录编号","type":"string"},"scope":{"description":"策略作用域,取值如下:\n- 1: 整个API\n- 2: 单个用户\n- 3: 单个APP\n目前只支持1","type":"integer"},"strategy_id":{"description":"流控策略的ID","type":"string"}}}},"description":null,"group_id":"d0b771ab4a6d46a895580726f0d5479b","host":"apig.cn-north-4.myhuaweicloud.com","id":"3577f4784c0a4eab873b26d25d83b3b7","info_version":"v1","method":"post","name":"AssociateRequestThrottlingPolicy","parameters":{},"paths":{"/apigw/throttle-bindings":{"post":{"description":"将流控策略应用于API,则所有对该API的访问将会受到该流控策略的限制。当一定时间内的访问次数超过流控策略设置的API最大访问次数限制后,后续的访问将会被拒绝,从而能够较好的保护后端API免受异常流量的冲击,保障服务的稳定运行。为指定的共享版-API绑定流控策略,绑定时,需要指定在哪个环境上生效。同一个API发布到不同的环境可以绑定不同的流控策略;一个API在发布到特定环境后只能绑定一个默认的流控策略。","operationId":"AssociateRequestThrottlingPolicy","parameters":[{"description":"用户Token。通过调用IAM服务获取用户Token接口获取(响应消息头中X-Subject-Token的值)。","in":"header","name":"X-Auth-Token","required":true,"type":"string","x-example":"MIIDkgYJKoZIhvcNAQcCoIIDgzCCXXXXXX..."},{"description":"API的发布记录编号","in":"query","name":"publish_ids","required":true,"type":"string","x-example":["374a6d5a-20c7-4ea1-82e1-19fce4556956","65e6fe53-1ac3-4481-ba36-9f0bc6f22057"]},{"description":"流控策略编号","in":"query","name":"strategy_id","required":true,"type":"string","x-example":"0325b671-2d50-4614-9868-22102262695d"},{"description":"绑定流控策略的请求体","in":"body","name":"AssociateRequestThrottlingPolicyRequestBody","required":true,"schema":{"$ref":"#/definitions/ThrottleBindingReq"}}],"responses":{"201":{"description":"Created","examples":{"application/json":{"throttle_applys":[{"apply_time":"2017-12-29T03:01:11.138456Z","id":"507c6a9f-8322-4dc2-8ba5-b4d74e3690d3","publish_id":"374a6d5a-20c7-4ea1-82e1-19fce4556956","scope":1,"strategy_id":"0325b671-2d50-4614-9868-22102262695d"},{"apply_time":"2017-12-29T03:01:11.138456Z","id":"90f05978-06a3-4096-8bea-b5e2fa12b843","publish_id":"65e6fe53-1ac3-4481-ba36-9f0bc6f22057","scope":1,"strategy_id":"0325b671-2d50-4614-9868-22102262695d"}]}},"schema":{"$ref":"#/definitions/ThrottleBindingListResp"}},"400":{"description":"Bad Request"},"401":{"description":"Unauthorized"},"403":{"description":"Forbidden"},"404":{"description":"Not Found"},"500":{"description":"Internal Server Error"}},"schemes":["https"],"summary":"绑定流控策略","tags":["共享版-API绑定流控策略"],"x-is-registered":"Y","x-request-examples-1":{"publish_ids":["374a6d5a-20c7-4ea1-82e1-19fce4556956","65e6fe53-1ac3-4481-ba36-9f0bc6f22057"],"strategy_id":"0325b671-2d50-4614-9868-22102262695d"},"x-support-sdk":"N"}}},"product_short":"APIG","region_id":"cn-north-4","schemes":["HTTPS"],"security_definitions":null,"summary":"绑定流控策略","tags":"共享版-API绑定流控策略","uri":null,"version":"2.0"}