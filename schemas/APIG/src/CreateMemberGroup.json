{"base_path":"/v2","components":null,"consumes":"[\"application/json;charset=UTF-8\"]","definitions":{"BasePage":{"description":"分页基本信息","properties":{"size":{"description":"本次返回的列表长度","format":"int32","type":"integer"},"total":{"description":"满足条件的记录数","format":"int64","type":"integer"}},"required":["size","total"]},"ErrorMsg":{"properties":{"error_code":{"description":"错误码","type":"string"},"error_msg":{"description":"错误描述","type":"string"}},"required":["error_code","error_msg"]},"MemberGroupCreate":{"properties":{"dict_code":{"description":"VPC通道后端服务器组的字典编码\n\n支持英文,数字,特殊字符(-_.)\n\n暂不支持","maxLength":64,"minLength":3,"pattern":"([a-zA-Z0-9._-]){2,63}$","type":"string"},"member_group_name":{"description":"VPC通道后端服务器组名称。支持汉字、英文、数字、下划线、中划线、点,且只能以英文和汉字开头,3-64字符。\n> 中文字符必须为UTF-8或者unicode编码。","type":"string"},"member_group_remark":{"description":"VPC通道后端服务器组描述。","maxLength":255,"type":"string"},"member_group_weight":{"description":"VPC通道后端服务器组权重值。\n\n当前服务器组存在服务器且此权重值存在时,自动使用此权重值分配权重。","format":"int32","maximum":100,"minimum":0,"type":"integer"},"microservice_labels":{"description":"VPC通道后端服务器组的标签,仅VPC通道类型为微服务时支持。","items":{"$ref":"#/definitions/MicroserviceLabel"},"type":"array"},"microservice_port":{"description":"VPC通道后端服务器组的端口号,仅VPC通道类型为微服务时支持。端口号为0时后端服务器组下的所有地址沿用原来负载端口继承逻辑。","example":80,"format":"int32","maximum":65535,"minimum":0,"type":"integer"},"microservice_version":{"description":"VPC通道后端服务器组的版本,仅VPC通道类型为微服务时支持。","maxLength":64,"type":"string"}},"required":["member_group_name"]},"MemberGroupCreateBatch":{"properties":{"member_groups":{"description":"后端服务器组列表","items":{"$ref":"#/definitions/MemberGroupCreate"},"type":"array"}}},"MemberGroupInfo":{"allOf":[{"$ref":"#/definitions/MemberGroupCreate"},{"properties":{"create_time":{"description":"VPC通道后端服务器组创建时间","format":"date-time","type":"string"},"member_group_id":{"description":"VPC通道后端服务器组编号","type":"string"},"update_time":{"description":"VPC通道后端服务器组更新时间","format":"date-time","type":"string"}},"type":"object"}]},"MemberGroupPage":{"allOf":[{"$ref":"#/definitions/BasePage"},{"properties":{"member_groups":{"description":"VPC通道后端服务器组列表","items":{"$ref":"#/definitions/MemberGroupInfo"},"type":"array"}},"type":"object"}]},"MicroserviceLabel":{"properties":{"label_name":{"description":"标签名称。\n\n以字母或者数字开头和结尾,由字母、数字、连接符('-')、下划线('_')、点号('.')组成且63个字符之内。","example":"clusterid","maxLength":63,"minLength":1,"pattern":"^[a-zA-Z0-9]$|(^[a-zA-Z0-9]([a-zA-Z0-9._-]{0,61})[a-zA-Z0-9]$)","type":"string"},"label_value":{"description":"标签值。\n\n以字母或者数字开头和结尾,由字母、数字、连接符('-')、下划线('_')、点号('.')组成且63个字符之内。","example":"c429700c-5dc4-482a-9c0e-99f6c0635113","maxLength":63,"minLength":1,"pattern":"^[a-zA-Z0-9]$|(^[a-zA-Z0-9]([a-zA-Z0-9._-]{0,61})[a-zA-Z0-9]$)","type":"string"}},"required":["label_name","label_value"]}},"description":null,"group_id":"d0b771ab4a6d46a895580726f0d5479b","host":"apig.cn-north-4.myhuaweicloud.com","id":"fe69a502e1454b21960fdc15cc13bc03","info_version":"v2","method":"post","name":"CreateMemberGroup","parameters":{"apic_instance_id":{"description":"实例ID,在API网关控制台的“实例信息”中获取。","in":"path","name":"instance_id","required":true,"type":"string","x-example":"f0fa1789-3b76-433b-a787-9892951c620e","x-sec-authority-parameter":"Y"},"apic_project_id":{"description":"项目ID,获取方式请参见[获取项目ID](apig-api-180713009.xml)。","in":"path","name":"project_id","required":true,"type":"string","x-example":"73d69ae0cfcf460190522d06b60f05ad","x-sec-authority-parameter":"Y"},"apic_vpc_channel_id":{"description":"VPC通道的编号","in":"path","name":"vpc_channel_id","required":true,"type":"string","x-example":"56a7d7358e1b42459c9d730d65b14e59"},"apic_x_auth_token":{"description":"用户Token。通过调用IAM服务获取用户Token接口获取(响应消息头中X-Subject-Token的值)。","in":"header","name":"X-Auth-Token","required":true,"type":"string","x-example":"MIIDkgYJKoZIhvcNAQcCoIIDgzCCXXXXXX..."}},"paths":{"/{project_id}/apigw/instances/{instance_id}/vpc-channels/{vpc_channel_id}/member-groups":{"post":{"description":"在APIG中创建VPC通道后端服务器组,VPC通道后端实例可以选择是否关联后端实例服务器组,以便管理后端服务器节点。\n\n如果指定名称的后端服务器组已存在,则更新对应后端服务器组信息。如果请求体中包含多个重复名称的后端服务器定义,则使用第一个定义。","operationId":"CreateMemberGroup","parameters":[{"$ref":"#/parameters/apic_x_auth_token"},{"$ref":"#/parameters/apic_project_id"},{"$ref":"#/parameters/apic_instance_id"},{"$ref":"#/parameters/apic_vpc_channel_id"},{"description":"创建VPC通道后端服务器组的请求体","in":"body","name":"CreateMemberGroupRequestBody","required":true,"schema":{"$ref":"#/definitions/MemberGroupCreateBatch"}}],"responses":{"201":{"description":"Created","examples":{"application/json":{"member_groups":[{"create_time":"2020-07-23T07:24:33Z","member_group_id":"105c6902457144a4820dff8b1ad63331","member_group_name":"vpc_member_group","member_group_remark":"","member_group_weight":10,"microservice_labels":[],"microservice_port":0,"microservice_version":"","update_time":"2020-07-23T07:24:33Z"}],"size":1,"total":1},"application/json-2":{"member_groups":[{"create_time":"2020-07-23T07:24:33Z","member_group_id":"105c6902457144a4820dff8b1ad63331","member_group_name":"vpc_member_group","member_group_remark":"","member_group_weight":10,"microservice_labels":[{"label_name":"cluster_id","label_value":"c429700c-5dc4-482a-9c0e-99f6c0635113"}],"microservice_port":80,"microservice_version":"v1","update_time":"2020-07-23T07:24:33Z"}],"size":1,"total":1}},"schema":{"$ref":"#/definitions/MemberGroupPage"}},"400":{"description":"Bad Request","examples":{"application/json":{"error_code":"APIG.2001","error_msg":"The request parameters must be specified, parameter name:name"}},"schema":{"$ref":"#/definitions/ErrorMsg"}},"401":{"description":"Unauthorized","examples":{"application/json":{"error_code":"APIG.1002","error_msg":"Incorrect token or token resolution failed"}},"schema":{"$ref":"#/definitions/ErrorMsg"}},"403":{"description":"Forbidden","examples":{"application/json":{"error_code":"APIG.1005","error_msg":"No permissions to request this method"}},"schema":{"$ref":"#/definitions/ErrorMsg"}},"404":{"description":"Not Found","examples":{"application/json":{"error_code":"APIG.3023","error_msg":"The VPC channel does not exist,id:56a7d7358e1b42459c9d730d65b14e59"}},"schema":{"$ref":"#/definitions/ErrorMsg"}},"500":{"description":"Internal Server Error","examples":{"application/json":{"error_code":"APIG.9999","error_msg":"System error"}},"schema":{"$ref":"#/definitions/ErrorMsg"}}},"schemes":["https"],"summary":"添加或更新VPC通道后端服务器组","tags":["专享版-VPC通道管理"],"x-api-framework":"RestfulAPI","x-api-position":"管理面","x-api-type":"open-api","x-api-user":"IAM普通租户","x-apigateway-request-type":"public","x-is-registered":"Y","x-open-region-cloud":"hws,hws_hk","x-order":13,"x-produc-type":"apig","x-request-examples-1":{"member_groups":[{"member_group_name":"vpc_member_group","member_group_weight":10}]},"x-request-examples-2":{"member_groups":[{"member_group_name":"vpc_member_group","member_group_weight":10,"microservice_labels":[{"label_name":"cluster_id","label_value":"c429700c-5dc4-482a-9c0e-99f6c0635113"}],"microservice_port":80,"microservice_version":"v1"}]},"x-request-examples-description-1":"创建服务器类型的VPC通道后端服务器组","x-request-examples-description-2":"创建微服务类型的VPC通道后端服务器组","x-support-sdk":"Y"}}},"product_short":"APIG","region_id":"cn-north-4","schemes":["HTTPS"],"security_definitions":null,"summary":"添加或更新VPC通道后端服务器组","tags":"专享版-VPC通道管理","uri":null,"version":"2.0"}