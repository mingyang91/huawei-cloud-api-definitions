{"base_path":"/","components":null,"consumes":"[\"application/json;charset=UTF-8\"]","definitions":{"ErrorUpResultInfo":{"description":"调用失败时的返回值。","properties":{"error_code":{"description":"错误码。","enum":["LTS.2001","LTS.2002","LTS.2003","LTS.2004","LTS.2005","LTS.2006","LTS.2007","LTS.2008","LTS.2009","LTS.2010","LTS.2011","LTS.2012","LTS.2013","LTS.0301"],"type":"string"},"error_msg":{"description":"调用失败响应信息描述。","example":"Invalid projectId","type":"string"}},"type":"object"},"FieldModel":{"description":"创建结构化模板中的字段模型","properties":{"field_name":{"description":"字段名称","example":"date","maxLength":64,"minLength":1,"type":"string"},"is_analysis":{"description":"是否开启快速分析。","example":"true","type":"boolean"}},"required":["field_name"]},"StructConfig":{"description":"结构化配置参数体","properties":{"demo_fields":{"description":"示例字段数组,只需要填写与模板中is_analysis状态不同的字段","items":{"$ref":"#/definitions/FieldModel"},"maxItems":199,"minItems":0,"type":"array"},"log_group_id":{"description":"日志组ID,获取方式请参见:获取账号ID、项目ID、日志组ID、日志流ID(https://support.huaweicloud.com/api-lts/lts_api_0006.html)。","example":"a520d104-1d05-493f-8ab1-edd01db848f0","maxLength":36,"minLength":36,"type":"string"},"log_stream_id":{"description":"日志流ID,获取方式请参见:获取账号ID、项目ID、日志组ID、日志流ID(https://support.huaweicloud.com/api-lts/lts_api_0006.html)。","example":"11061260-96cf-4dab-a7a3-ea0d7944b55b","maxLength":36,"minLength":36,"type":"string"},"quick_analysis":{"description":"是否开启demo_fields和tag_fields快速分析,为true时,所有的demo_fields和tag_fields全部字段均打开快速分析;不填或者为false,以模板中的demo_fields和tag_fields中的is_analysis决定是否开启快速分析。","example":"true","type":"boolean"},"tag_fields":{"description":"Tag字段数组,只需要填写与模板中is_analysis状态不同的字段","items":{"$ref":"#/definitions/FieldModel"},"maxItems":50,"minItems":0,"type":"array"},"template_id":{"description":"所用模板id。当使用系统模板时,当前属性可以为空","example":"3927291c-6fef-4fa6-9515-xxxxxxxxxxxx","maxLength":36,"minLength":0,"type":"string"},"template_name":{"description":"所用模板名称,会对模板名称及id进行校验","maxLength":64,"minLength":1,"type":"string"},"template_type":{"description":"所用模板类型,分为built_in及custom两种类型,对应系统模板和自定义模板,系统模板分为CTS,VPC和ELB三种。","enum":["built_in","custom"],"example":"custom","type":"string"}},"required":["log_group_id","log_stream_id","template_id","template_name","template_type"]}},"description":null,"group_id":"8f58e31c452f407885dec582b8542111","host":"lts.cn-north-4.myhuaweicloud.com","id":"aa09ac85feeb4cacabf81efccaca058e","info_version":"v2","method":"put","name":"UpdateStructConfig","parameters":{},"paths":{"/v3/{project_id}/lts/struct/template":{"put":{"description":"该接口通过结构化模板修改结构化配置","operationId":"UpdateStructConfig","parameters":[{"description":"项目ID,获取方式请参见:获取账号ID、项目ID、日志组ID、日志流ID(https://support.huaweicloud.com/api-lts/lts_api_0006.html)。","in":"path","maxLength":32,"minLength":32,"name":"project_id","required":true,"type":"string"},{"description":"从IAM服务获取的用户Token,获取方式请参见:获取用户Token(https://support.huaweicloud.com/api-iam/iam_30_0001.html)","in":"header","maxLength":2000,"minLength":1000,"name":"X-Auth-Token","pattern":"X-Auth-Token","required":true,"type":"string"},{"default":"application/json;charset=UTF-8","description":"该字段填为:application/json;charset=UTF-8。","in":"header","maxLength":30,"minLength":30,"name":"Content-Type","required":true,"type":"string"},{"description":"修改结构化配置的请求体","in":"body","name":"UpdateStructConfigRequestBody","required":true,"schema":{"$ref":"#/definitions/StructConfig"}}],"produces":["application/json"],"responses":{"201":{"description":"请求响应成功。","examples":{"application/json":""},"schema":{"type":"string"}},"400":{"description":"BadRequest 非法请求 建议根据error_msg直接修改该请求。","examples":{"application/json":{"error_code":"LTS.2014","error_msg":"Failed to create struct config."}},"schema":{"$ref":"#/definitions/ErrorUpResultInfo"}},"500":{"description":"表明服务端能被请求访问到,但是服务内部出错。","examples":{"application/json":{"error_code":"LTS.2016","error_msg":"Failed to update struct config"}},"schema":{"$ref":"#/definitions/ErrorUpResultInfo"}}},"summary":"通过结构化模板修改结构化配置(新)","tags":["结构化配置"],"x-is-registered":"Y","x-request-examples-1":"/v3/{project_id}/lts/struct/template\n{\n  \"log_group_id\": \"17f23e52-a23d-46e0-8bc5-xxxxxxxxxxxx\",\n  \"log_stream_id\": \"b4d56d47-b4c4-453e-9047-xxxxxxxxxxxx\",\n  \"demo_fields\": [\n    {\n      \"field_name\": \"code\",\n      \"is_analysis\": true\n    },\n    {\n      \"field_name\": \"event_type\",\n      \"is_analysis\": true\n    },\n    {\n      \"field_name\": \"project_id\",\n      \"is_analysis\": true\n    },\n    {\n      \"field_name\": \"record_time\",\n      \"is_analysis\": false\n    },\n    {\n      \"field_name\": \"resource_id\",\n      \"is_analysis\": true\n    },\n    {\n      \"field_name\": \"resource_name\",\n      \"is_analysis\": true\n    },\n    {\n      \"field_name\": \"resource_type\",\n      \"is_analysis\": false\n    },\n    {\n      \"field_name\": \"service_type\",\n      \"is_analysis\": true\n    },\n    {\n      \"field_name\": \"source_ip\",\n      \"is_analysis\": false\n    },\n    {\n      \"field_name\": \"time\",\n      \"is_analysis\": false\n    },\n    {\n      \"field_name\": \"trace_id\",\n      \"is_analysis\": false\n    },\n    {\n      \"field_name\": \"trace_name\",\n      \"is_analysis\": true\n    },\n    {\n      \"field_name\": \"trace_rating\",\n      \"is_analysis\": true\n    },\n    {\n      \"field_name\": \"trace_type\",\n      \"is_analysis\": true\n    },\n    {\n      \"field_name\": \"tracker_name\",\n      \"is_analysis\": true\n    },\n    {\n      \"field_name\": \"user.domain.id\",\n      \"is_analysis\": true\n    },\n    {\n      \"field_name\": \"user.domain.name\",\n      \"is_analysis\": true\n    },\n    {\n      \"field_name\": \"user.id\",\n      \"is_analysis\": true\n    },\n    {\n      \"field_name\": \"user.name\",\n      \"is_analysis\": false\n    }\n  ],\n  \"tag_fields\": [],\n  \"template_type\": \"built_in\",\n  \"template_name\": \"CTS\",\n  \"template_id\": \"\",\n  \"quick_analysis\": false\n}","x-request-examples-2":{"demo_fields":[{"field_name":"msec","is_analysis":false},{"field_name":"access_log_topic_id","is_analysis":false},{"field_name":"time_iso8601","is_analysis":false},{"field_name":"log_ver","is_analysis":true},{"field_name":"remote_addr","is_analysis":true},{"field_name":"remote_port","is_analysis":false},{"field_name":"status","is_analysis":false},{"field_name":"request_method","is_analysis":false},{"field_name":"scheme","is_analysis":true},{"field_name":"host","is_analysis":true},{"field_name":"router_request_uri","is_analysis":true},{"field_name":"server_protocol","is_analysis":true},{"field_name":"request_length","is_analysis":true},{"field_name":"bytes_sent","is_analysis":false},{"field_name":"body_bytes_sent","is_analysis":false},{"field_name":"request_time","is_analysis":false},{"field_name":"upstream_status","is_analysis":false},{"field_name":"upstream_connect_time","is_analysis":false},{"field_name":"upstream_header_time","is_analysis":false},{"field_name":"upstream_response_time","is_analysis":false},{"field_name":"upstream_addr","is_analysis":false},{"field_name":"http_user_agent","is_analysis":false},{"field_name":"http_referer","is_analysis":false},{"field_name":"http_x_forwarded_for","is_analysis":false},{"field_name":"lb_name","is_analysis":false},{"field_name":"listener_name","is_analysis":false},{"field_name":"listener_id","is_analysis":false},{"field_name":"pool_name","is_analysis":false},{"field_name":"member_name","is_analysis":false},{"field_name":"tenant_id","is_analysis":false},{"field_name":"eip_address","is_analysis":false},{"field_name":"eip_port","is_analysis":false},{"field_name":"upstream_addr_priv","is_analysis":false},{"field_name":"certificate_id","is_analysis":false},{"field_name":"ssl_protocol","is_analysis":false},{"field_name":"ssl_cipher","is_analysis":false},{"field_name":"sni_domain_name","is_analysis":false},{"field_name":"tcpinfo_rtt","is_analysis":false}],"log_group_id":"17f23e52-a23d-46e0-8bc5-xxxxxxxxxxxx","log_stream_id":"b4d56d47-b4c4-453e-9047-xxxxxxxxxxxx","quick_analysis":false,"tag_fields":[],"template_id":"","template_name":"ELB","template_type":"built_in"},"x-request-examples-3":{"demo_fields":[{"field_name":"version","is_analysis":false},{"field_name":"project_id","is_analysis":true},{"field_name":"interface_id","is_analysis":false},{"field_name":"srcaddr","is_analysis":true},{"field_name":"dstaddr","is_analysis":true},{"field_name":"srcport","is_analysis":false},{"field_name":"dstport","is_analysis":false},{"field_name":"protocol","is_analysis":false},{"field_name":"packets","is_analysis":false},{"field_name":"bytes","is_analysis":false},{"field_name":"start","is_analysis":false},{"field_name":"end","is_analysis":false},{"field_name":"action","is_analysis":true},{"field_name":"log_status","is_analysis":true}],"log_group_id":"17f23e52-a23d-46e0-8bc5-xxxxxxxxxxxx","log_stream_id":"b4d56d47-b4c4-453e-9047-xxxxxxxxxxxx","quick_analysis":false,"tag_fields":[],"template_id":"","template_name":"VPC","template_type":"built_in"},"x-request-examples-4":{"demo_fields":[{"field_name":"date","is_analysis":true},{"field_name":"num","is_analysis":false}],"log_group_id":"17f23e52-a23d-46e0-8bc5-xxxxxxxxxxxx","log_stream_id":"b4d56d47-b4c4-453e-9047-xxxxxxxxxxxx","quick_analysis":false,"tag_fields":[{"field_name":"hostIP","is_analysis":true}],"template_id":"47629e46-287d-478c-8888-xxxxxxxxxxxx","template_name":"regexTemplate","template_type":"custom"},"x-request-examples-description-1":"系统模板:CTS","x-request-examples-description-2":"系统模板:ELB","x-request-examples-description-3":"系统模板:VPC","x-request-examples-description-4":"自定义模板","x-request-examples-text-1":"/v3/{project_id}/lts/struct/template\n{\n  \"log_group_id\": \"17f23e52-a23d-46e0-8bc5-xxxxxxxxxxxx\",\n  \"log_stream_id\": \"b4d56d47-b4c4-453e-9047-xxxxxxxxxxxx\",\n  \"demo_fields\": [\n    {\n      \"field_name\": \"code\",\n      \"is_analysis\": true\n    },\n    {\n      \"field_name\": \"event_type\",\n      \"is_analysis\": true\n    },\n    {\n      \"field_name\": \"project_id\",\n      \"is_analysis\": true\n    },\n    {\n      \"field_name\": \"record_time\",\n      \"is_analysis\": false\n    },\n    {\n      \"field_name\": \"resource_id\",\n      \"is_analysis\": true\n    },\n    {\n      \"field_name\": \"resource_name\",\n      \"is_analysis\": true\n    },\n    {\n      \"field_name\": \"resource_type\",\n      \"is_analysis\": false\n    },\n    {\n      \"field_name\": \"service_type\",\n      \"is_analysis\": true\n    },\n    {\n      \"field_name\": \"source_ip\",\n      \"is_analysis\": false\n    },\n    {\n      \"field_name\": \"time\",\n      \"is_analysis\": false\n    },\n    {\n      \"field_name\": \"trace_id\",\n      \"is_analysis\": false\n    },\n    {\n      \"field_name\": \"trace_name\",\n      \"is_analysis\": true\n    },\n    {\n      \"field_name\": \"trace_rating\",\n      \"is_analysis\": true\n    },\n    {\n      \"field_name\": \"trace_type\",\n      \"is_analysis\": true\n    },\n    {\n      \"field_name\": \"tracker_name\",\n      \"is_analysis\": true\n    },\n    {\n      \"field_name\": \"user.domain.id\",\n      \"is_analysis\": true\n    },\n    {\n      \"field_name\": \"user.domain.name\",\n      \"is_analysis\": true\n    },\n    {\n      \"field_name\": \"user.id\",\n      \"is_analysis\": true\n    },\n    {\n      \"field_name\": \"user.name\",\n      \"is_analysis\": false\n    }\n  ],\n  \"tag_fields\": [],\n  \"template_type\": \"built_in\",\n  \"template_name\": \"CTS\",\n  \"template_id\": \"\",\n  \"quick_analysis\": false\n}","x-request-examples-text-2":{"demo_fields":[{"field_name":"msec","is_analysis":false},{"field_name":"access_log_topic_id","is_analysis":false},{"field_name":"time_iso8601","is_analysis":false},{"field_name":"log_ver","is_analysis":true},{"field_name":"remote_addr","is_analysis":true},{"field_name":"remote_port","is_analysis":false},{"field_name":"status","is_analysis":false},{"field_name":"request_method","is_analysis":false},{"field_name":"scheme","is_analysis":true},{"field_name":"host","is_analysis":true},{"field_name":"router_request_uri","is_analysis":true},{"field_name":"server_protocol","is_analysis":true},{"field_name":"request_length","is_analysis":true},{"field_name":"bytes_sent","is_analysis":false},{"field_name":"body_bytes_sent","is_analysis":false},{"field_name":"request_time","is_analysis":false},{"field_name":"upstream_status","is_analysis":false},{"field_name":"upstream_connect_time","is_analysis":false},{"field_name":"upstream_header_time","is_analysis":false},{"field_name":"upstream_response_time","is_analysis":false},{"field_name":"upstream_addr","is_analysis":false},{"field_name":"http_user_agent","is_analysis":false},{"field_name":"http_referer","is_analysis":false},{"field_name":"http_x_forwarded_for","is_analysis":false},{"field_name":"lb_name","is_analysis":false},{"field_name":"listener_name","is_analysis":false},{"field_name":"listener_id","is_analysis":false},{"field_name":"pool_name","is_analysis":false},{"field_name":"member_name","is_analysis":false},{"field_name":"tenant_id","is_analysis":false},{"field_name":"eip_address","is_analysis":false},{"field_name":"eip_port","is_analysis":false},{"field_name":"upstream_addr_priv","is_analysis":false},{"field_name":"certificate_id","is_analysis":false},{"field_name":"ssl_protocol","is_analysis":false},{"field_name":"ssl_cipher","is_analysis":false},{"field_name":"sni_domain_name","is_analysis":false},{"field_name":"tcpinfo_rtt","is_analysis":false}],"log_group_id":"17f23e52-a23d-46e0-8bc5-xxxxxxxxxxxx","log_stream_id":"b4d56d47-b4c4-453e-9047-xxxxxxxxxxxx","quick_analysis":false,"tag_fields":[],"template_id":"","template_name":"ELB","template_type":"built_in"},"x-request-examples-text-3":{"demo_fields":[{"field_name":"version","is_analysis":false},{"field_name":"project_id","is_analysis":true},{"field_name":"interface_id","is_analysis":false},{"field_name":"srcaddr","is_analysis":true},{"field_name":"dstaddr","is_analysis":true},{"field_name":"srcport","is_analysis":false},{"field_name":"dstport","is_analysis":false},{"field_name":"protocol","is_analysis":false},{"field_name":"packets","is_analysis":false},{"field_name":"bytes","is_analysis":false},{"field_name":"start","is_analysis":false},{"field_name":"end","is_analysis":false},{"field_name":"action","is_analysis":true},{"field_name":"log_status","is_analysis":true}],"log_group_id":"17f23e52-a23d-46e0-8bc5-xxxxxxxxxxxx","log_stream_id":"b4d56d47-b4c4-453e-9047-xxxxxxxxxxxx","quick_analysis":false,"tag_fields":[],"template_id":"","template_name":"VPC","template_type":"built_in"},"x-request-examples-text-4":{"demo_fields":[{"field_name":"date","is_analysis":true},{"field_name":"num","is_analysis":false}],"log_group_id":"17f23e52-a23d-46e0-8bc5-xxxxxxxxxxxx","log_stream_id":"b4d56d47-b4c4-453e-9047-xxxxxxxxxxxx","quick_analysis":false,"tag_fields":[{"field_name":"hostIP","is_analysis":true}],"template_id":"47629e46-287d-478c-8888-xxxxxxxxxxxx","template_name":"regexTemplate","template_type":"custom"},"x-request-examples-url-1":"PUT https://{endpoint}/v3/{project_id}/lts/struct/template","x-support-sdk":"Y"}}},"product_short":"LTS","region_id":"cn-north-4","schemes":["HTTPS"],"security_definitions":null,"summary":"通过结构化模板修改结构化配置(新)","tags":"结构化配置","uri":null,"version":"2.0"}