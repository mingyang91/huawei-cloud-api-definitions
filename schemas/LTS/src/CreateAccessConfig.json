{"base_path":"/","components":null,"consumes":"[\"application/json;charset=UTF-8\"]","definitions":{"AccessConfigBaseLogInfo":{"description":"日志接入基础日志信息。","properties":{"log_group_id":{"description":"日志组ID","maxLength":36,"minLength":36,"type":"string"},"log_stream_id":{"description":"日志流ID","maxLength":36,"minLength":36,"type":"string"}}},"AccessConfigBaseLogInfoCreate":{"description":"日志接入基础日志信息。","properties":{"log_group_id":{"description":"日志组ID","maxLength":36,"minLength":36,"type":"string"},"log_stream_id":{"description":"日志流ID","maxLength":36,"minLength":36,"type":"string"}},"required":["log_group_id","log_stream_id"]},"AccessConfigDeatilCreate":{"description":"日志接入详细信息","properties":{"black_paths":{"description":"采集路径黑名单。\n1. 路径必须以/或者字母:\\\\开头\n2. 不能包含特殊字符<> ' | \" 且不能只输入/\n3. 第一级目录不支持通配符*:不能以/**   /*开头\n4.**只能出现一次\n最小长度:1\n最大长度:128","items":{"maxLength":128,"minLength":1,"type":"string"},"maxItems":9,"minItems":0,"type":"array"},"containerNameRegex":{"description":"K8s 容器名称正则匹配,仅CCE接入类型时使用","type":"string"},"excludeEnvs":{"additionalProperties":{"type":"string"},"description":"环境变量黑名单,最多支持创建30个,keyname不支持重名,仅CCE接入类型时使用","type":"object"},"excludeK8sLabels":{"additionalProperties":{"type":"string"},"description":"K8s Label黑名单,最多支持创建30个,keyname不支持重名,仅CCE接入类型时使用","type":"object"},"excludeLabels":{"additionalProperties":{"type":"string"},"description":"容器 Label黑名单,最多支持创建30个,keyname不支持重名,仅CCE接入类型时使用","type":"object"},"format":{"$ref":"#/definitions/AccessConfigFormatCreate","description":"日志格式。single与multi必须选择一种。"},"includeEnvs":{"additionalProperties":{"type":"string"},"description":"环境变量白名单,最多支持创建30个,keyname不支持重名,仅CCE接入类型时使用","type":"object"},"includeK8sLabels":{"additionalProperties":{"type":"string"},"description":"K8s Label白名单,最多支持创建30个,keyname不支持重名,仅CCE接入类型时使用","type":"object"},"includeLabels":{"additionalProperties":{"type":"string"},"description":"容器 Label白名单,最多支持创建30个,keyname不支持重名,仅CCE接入类型时使用","type":"object"},"logEnvs":{"additionalProperties":{"type":"string"},"description":"环境变量日志标签,最多支持创建30个,keyname不支持重名,仅CCE接入类型时使用","type":"object"},"logK8s":{"additionalProperties":{"type":"string"},"description":"K8s Label日志标签,最多支持创建30个,keyname不支持重名,仅CCE接入类型时使用","type":"object"},"logLabels":{"additionalProperties":{"type":"string"},"description":"容器 Label日志标签,最多支持创建30个,keyname不支持重名,仅CCE接入类型时使用","type":"object"},"namespaceRegex":{"description":"K8s Namespace正则匹配,仅CCE接入类型时使用","type":"string"},"pathType":{"description":"CCE接入类型,仅CCE接入类型时使用","enum":["HOST_FILE","CONTAINER_STDOUT","CONTAINER_FILE"],"type":"string"},"paths":{"description":"采集路径。\n1. 路径必须以/或者字母:\\\\开头\n2. 不能包含特殊字符<> ' | \" 且不能只输入/\n3. 第一级目录不支持通配符*:不能以/**   /*开头\n4.**只能出现一次``\nCCE类型中 容器路径和主机路径必填,标准输出不用\n最小长度:1\n最大长度:128","items":{"maxLength":128,"minLength":1,"type":"string"},"maxItems":9,"minItems":1,"type":"array"},"podNameRegex":{"description":"K8s Pod正则匹配,仅CCE接入类型时使用","type":"string"},"stderr":{"description":"标准输出开关标准错误开关,仅CCE接入类型时使用","type":"boolean"},"stdout":{"description":"标准输出开关,仅CCE接入类型时使用","type":"boolean"},"windows_log_info":{"$ref":"#/definitions/AccessConfigWindowsLogInfoCreate","description":"日志接入采集Windows事件日志"}},"required":["format"],"type":"object"},"AccessConfigFormatCreate":{"description":"日志格式","properties":{"multi":{"$ref":"#/definitions/AccessConfigFormatMutilCreate"},"single":{"$ref":"#/definitions/AccessConfigFormatSingleCreate"}}},"AccessConfigFormatMutilCreate":{"description":"日志接入格式多行日志","properties":{"mode":{"description":"单行日志。time:日志时间,regular:正则模式。","enum":["time","regular"],"type":"string"},"value":{"description":"日志时间。\n当mode为\"regular\",则输入正则表达式\n当mode为\"time\",则时间通配符:用日志打印时间来标识一条日志数据,通过时间通配符来匹配日志,每条日志的行首显示日志的打印时间;如果日志中的时间格式为:2019-01-01 23:59:59,时间通配符应该填写为:YYYY-MM-DD hh:mm:ss;如果日志中的时间格式为:19-1-1 23:59:59,时间通配符应该填写为:YY-M-D hh:mm:ss","maxLength":64,"minLength":1,"type":"string"}}},"AccessConfigFormatSingleCreate":{"description":"日志接入格式单行日志","properties":{"mode":{"description":"单行日志。system:系统时间,wildcard:时间通配符。","enum":["system","wildcard"],"type":"string"},"value":{"description":"日志时间。\n当mode为”system”,则填入当前时间戳。\n当mode为\"wildcard\",则时间通配符:用日志打印时间来标识一条日志数据,通过时间通配符来匹配日志,每条日志的行首显示日志的打印时间;如果日志中的时间格式为:2019-01-01 23:59:59,时间通配符应该填写为:YYYY-MM-DD hh:mm:ss;如果日志中的时间格式为:19-1-1 23:59:59,时间通配符应该填写为:YY-M-D hh:mm:ss","maxLength":64,"minLength":1,"type":"string"}}},"AccessConfigHostGroupIdList":{"description":"日志接入主机组ID列表","properties":{"host_group_id_list":{"description":"主机组ID列表","items":{"maxLength":36,"minLength":36,"type":"string"},"maxItems":1000,"minItems":1,"type":"array"}},"required":["host_group_id_list"]},"AccessConfigHostGroupIdListCreate":{"description":"日志接入主机组ID列表","properties":{"host_group_id_list":{"description":"主机组ID列表","items":{"maxLength":36,"minLength":36,"type":"string"},"maxItems":1000,"minItems":1,"type":"array"}},"required":["host_group_id_list"]},"AccessConfigInfo":{"description":"日志接入配置","properties":{"access_config_detail":{"$ref":"#/definitions/AccessConfigDeatilCreate","description":"日志接入详细信息"},"access_config_id":{"description":"日志接入ID","maxLength":36,"minLength":36,"type":"string"},"access_config_name":{"description":"日志接入名称","maxLength":64,"minLength":1,"pattern":"^(?!\\.)(?!_)(?!.*?\\.$)[\\u4e00-\\u9fa5a-zA-Z0-9-_.]{1,64}$","type":"string"},"access_config_tag":{"description":"标签信息。KEY不能重复,最多20个标签","items":{"$ref":"#/definitions/accessConfigTag"},"type":"array"},"access_config_type":{"description":"日志接入类型。AGENT:ECS接入  K8S_CCE: CCE接入","enum":["AGENT","K8S_CCE"],"type":"string"},"binary_collect":{"description":"日志拆分","type":"boolean"},"cluster_id":{"description":"CCE集群ID","type":"string"},"create_time":{"description":"创建时间","format":"int64","maximum":9999999999999,"minimum":1,"type":"integer"},"host_group_info":{"$ref":"#/definitions/AccessConfigHostGroupIdList","description":"日志接入主机组ID列表"},"log_info":{"$ref":"#/definitions/AccessConfigQueryLogInfo","description":"日志接入日志详情"},"log_split":{"description":"二进制采集","type":"boolean"}},"type":"object"},"AccessConfigQueryLogInfo":{"allOf":[{"$ref":"#/definitions/AccessConfigBaseLogInfo"},{"properties":{"log_group_name":{"description":"日志组名称","maxLength":128,"minLength":1,"type":"string"},"log_stream_name":{"description":"日志流名称","maxLength":128,"minLength":1,"type":"string"}},"type":"object"}],"description":"日志接入日志详情"},"AccessConfigTimeOffset":{"description":"日志接入偏移时间","properties":{"offset":{"description":"偏移时间。\n当\"unit\"选择\"day\"时,范围为1~7天。\n当\"unit\"选择\"hour\"时,范围为1~168小时。\n当\"unit\"选择\"sec\"时,范围为1~604800秒。","format":"int64","maximum":604800,"minimum":1,"type":"integer"},"unit":{"description":"偏移时间单位。day :天,hour:小时,sec:秒","enum":["day","hour","sec"],"type":"string"}},"required":["offset","unit"]},"AccessConfigWindowsLogInfoCreate":{"description":"日志接入采集Windows事件日志","properties":{"categorys":{"description":"采集Windows事件日志类型。Application:应用系统,System:系统,Security:安全,Setup:启动","items":{"enum":["Application","System","Security","Setup"],"type":"string"},"type":"array"},"event_level":{"description":"事件等级。information:info,warning:告警,error:错误,critical:关键,verbose:冗长","items":{"enum":["information","warning","error","critical","verbose"],"type":"string"},"maxItems":5,"minItems":1,"type":"array"},"time_offset":{"$ref":"#/definitions/AccessConfigTimeOffset"}},"required":["categorys","time_offset","event_level"],"type":"object"},"CreateAccessConfigRequestBody":{"description":"创建日志接入请求体","properties":{"access_config_detail":{"$ref":"#/definitions/AccessConfigDeatilCreate"},"access_config_name":{"description":"日志接入名称。\n满足正则表达式:^(?!\\.)(?!_)(?!.*?\\.$)[\\u4e00-\\u9fa5a-zA-Z0-9-_.]{1,64}$","maxLength":64,"minLength":1,"pattern":"^(?!\\.)(?!_)(?!.*?\\.$)[\\u4e00-\\u9fa5a-zA-Z0-9-_.]{1,64}$","type":"string"},"access_config_tag":{"description":"标签信息。KEY不能重复,最多20个标签","items":{"$ref":"#/definitions/accessConfigTag"},"type":"array"},"access_config_type":{"description":"日志接入类型。AGENT:ECS接入,K8S_CCE:CCE接入","enum":["AGENT","K8S_CCE"],"type":"string"},"binary_collect":{"description":"二进制采集","type":"boolean"},"cluster_id":{"description":"CCE集群ID,当CCE类型时,为必填","type":"string"},"host_group_info":{"$ref":"#/definitions/AccessConfigHostGroupIdListCreate"},"log_info":{"$ref":"#/definitions/AccessConfigBaseLogInfoCreate"},"log_split":{"description":"日志拆分","type":"boolean"}},"required":["access_config_name","access_config_type","access_config_detail","log_info"],"type":"object"},"ErrorResultInfo400":{"description":"调用失败时的返回值。","properties":{"error_code":{"description":"错误码。","type":"string"},"error_msg":{"description":"调用失败响应信息描述。","type":"string"}},"required":["error_code","error_msg"],"type":"object"},"accessConfigTag":{"properties":{"key":{"maxLength":128,"minLength":1,"type":"string"},"value":{"maxLength":128,"minLength":1,"type":"string"}}}},"description":null,"group_id":"8f58e31c452f407885dec582b8542111","host":"lts.cn-north-4.myhuaweicloud.com","id":"384f4a7bd6794152ad5197edef534ad6","info_version":"v2","method":"post","name":"CreateAccessConfig","parameters":{},"paths":{"/v3/{project_id}/lts/access-config":{"post":{"description":"创建日志接入","operationId":"CreateAccessConfig","parameters":[{"default":"None","description":"项目ID,获取方式请参见:[获取帐号租户ID、项目资源集ID、日志组ID、日志流ID](lts_api_0006.xml)。","in":"path","maxLength":32,"minLength":32,"name":"project_id","required":true,"type":"string"},{"default":"None","description":"从IAM服务获取的用户Token。","in":"header","maxLength":2000,"minLength":1000,"name":"X-Auth-Token","required":true,"type":"string"},{"default":"None","description":"该字段填为:application/json;charset=UTF-8。","in":"header","maxLength":30,"minLength":30,"name":"Content-Type","required":true,"type":"string"},{"description":"创建日志接入请求体","in":"body","name":"CreateAccessConfigRequestBody","required":true,"schema":{"$ref":"#/definitions/CreateAccessConfigRequestBody"}}],"produces":["application/json"],"responses":{"200":{"description":"创建日志接入请求响应成功","examples":{"application/json":{"access_config_detail":{"containerNameRegex":"container-1","format":{"single":{"mode":"system","value":"1678969382000"}},"namespaceRegex":"default","pathType":"container_stdout","paths":[],"podNameRegex":"mystdout-6d7458d77c-rhjcc","stderr":true,"stdout":true},"access_config_id":"03b16999-95cf-453b-9668-7aa1fafa564e","access_config_name":"myapinew32Y","access_config_tag":[{"key":"my01","value":"001"},{"key":"my02","value":"002"}],"access_config_type":"K8S_CCE","binary_collect":true,"create_time":1685626665176,"log_info":{"log_group_id":"9575cb24-290c-478e-a5db-88d6d1dc513b","log_group_name":"my-group","log_stream_id":"eea03c27-e041-4bec-bd03-6afa10a6561a","log_stream_name":"lts-topic-cceapi"},"log_split":true}},"schema":{"$ref":"#/definitions/AccessConfigInfo"}},"400":{"description":"非法请求 建议根据error_msg直接修改该请求。","examples":{"application/json":{"error_code":"LTS.1807","error_msg":"Invalid access config name"}},"schema":{"$ref":"#/definitions/ErrorResultInfo400"}},"500":{"description":"表明服务端能被请求访问到,但是服务内部出错。","examples":{"application/json":{"error_code":"LTS.0010","error_msg":"The system encountered an internal error"}},"schema":{"$ref":"#/definitions/ErrorResultInfo400"}}},"summary":"创建日志接入","tags":["日志接入"],"x-is-registered":"Y","x-open-region-cloud":"hws,hws_hk","x-request-examples-1":{"access_config_detail":{"black_paths":["/testxxx","/tesxxx"],"format":{"multi":{"mode":"time","value":"YYYY-MM-DD hh:mm:ss"}},"paths":["/test/xxx","/texxx"],"windows_log_info":{"categorys":["System","Security","Setup"],"event_level":["warning","error","critical","verbose"],"time_offset":{"offset":111,"unit":"hour"}}},"access_config_name":"Tesxxx","access_config_tag":[{"key":"xxx","value":"xxx"},{"key":"xxx1","value":"xxx1"}],"access_config_type":"AGENT","host_group_info":{"host_group_id_list":["4ee44d4f-a72b-40cf-a3c7-1xxxxx"]},"log_info":{"log_group_id":"b179326d-c3be-4217-a3d9-xxxx","log_stream_id":"020a6fa0-4740-4888-af06-98xxxxxx"}},"x-request-examples-2":{"access_config_detail":{"containerNameRegex":"my","excludeEnvs":{"h":"8"},"excludeK8sLabels":{"e":"5"},"excludeLabels":{"b":"2"},"format":{"single":{"mode":"system","value":"1678969382000"}},"includeEnvs":{"g":"7"},"includeK8sLabels":{"d":"4"},"includeLabels":{"a":"1"},"logEnvs":{"i":"9"},"logK8s":{"f":"6"},"logLabels":{"c":"3"},"namespaceRegex":"default","pathType":"CONTAINER_STDOUT","podNameRegex":"abc","stderr":"false","stdout":"true"},"access_config_name":"myapinew322","access_config_tag":[{"key":"my01","value":"001"},{"key":"my02","value":"002"}],"access_config_type":"K8S_CCE","binary_collect":"false","host_group_info":{"host_group_id_list":["12b0bbd1-4eda-456b-a641-647aa66bdeab"]},"log_info":{"log_group_id":"9575cb24-290c-478e-a5db-88d6d1dc513b","log_stream_id":"3581bee9-8698-476e-a0ba-b0f310ed99cf"},"log_split":"false"},"x-request-examples-description-1":"创建日志接入(ECS接入)","x-request-examples-description-2":"创建日志接入(CCE接入)","x-request-examples-text-1":{"access_config_detail":{"black_paths":["/testxxx","/tesxxx"],"format":{"multi":{"mode":"time","value":"YYYY-MM-DD hh:mm:ss"}},"paths":["/test/xxx","/texxx"],"windows_log_info":{"categorys":["System","Security","Setup"],"event_level":["warning","error","critical","verbose"],"time_offset":{"offset":111,"unit":"hour"}}},"access_config_name":"Tesxxx","access_config_tag":[{"key":"xxx","value":"xxx"},{"key":"xxx1","value":"xxx1"}],"access_config_type":"AGENT","host_group_info":{"host_group_id_list":["4ee44d4f-a72b-40cf-a3c7-1xxxxx"]},"log_info":{"log_group_id":"b179326d-c3be-4217-a3d9-xxxx","log_stream_id":"020a6fa0-4740-4888-af06-98xxxxxx"}},"x-request-examples-text-2":{"access_config_detail":{"containerNameRegex":"my","excludeEnvs":{"h":"8"},"excludeK8sLabels":{"e":"5"},"excludeLabels":{"b":"2"},"format":{"single":{"mode":"system","value":"1678969382000"}},"includeEnvs":{"g":"7"},"includeK8sLabels":{"d":"4"},"includeLabels":{"a":"1"},"logEnvs":{"i":"9"},"logK8s":{"f":"6"},"logLabels":{"c":"3"},"namespaceRegex":"default","pathType":"CONTAINER_STDOUT","podNameRegex":"abc","stderr":"false","stdout":"true"},"access_config_name":"myapinew322","access_config_tag":[{"key":"my01","value":"001"},{"key":"my02","value":"002"}],"access_config_type":"K8S_CCE","binary_collect":"false","host_group_info":{"host_group_id_list":["12b0bbd1-4eda-456b-a641-647aa66bdeab"]},"log_info":{"log_group_id":"9575cb24-290c-478e-a5db-88d6d1dc513b","log_stream_id":"3581bee9-8698-476e-a0ba-b0f310ed99cf"},"log_split":"false"},"x-request-examples-url-1":"POST https://{endpoint}/v3/{project_id}/lts/access-config","x-request-examples-url-2":"POST https://{endpoint}/v3/{project_id}/lts/access-config","x-support-sdk":"Y"}}},"product_short":"LTS","region_id":"cn-north-4","schemes":["HTTPS"],"security_definitions":null,"summary":"创建日志接入","tags":"日志接入","uri":null,"version":"2.0"}