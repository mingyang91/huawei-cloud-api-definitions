{"base_path":"/","components":null,"consumes":"[\"application/json;charset=UTF-8\"]","definitions":{"ErrorUpResultInfo1":{"description":"调用失败时的返回值。","properties":{"error_code":{"description":"错误码。","maxLength":8,"minLength":8,"type":"string"},"error_msg":{"description":"调用失败响应信息描述。","example":"Invalid projectId","type":"string"}}},"ListLogContextRequestBody":{"description":"查询上下文日志请求体。","properties":{"__time__":{"description":"自定义时间特性时间字段,字段值需要从日志结果中获取,毫秒级时间戳。若已开启云端结构化自定义时间功能,需要使用该字段和line_num字段共同进行上下文查询。","type":"string"},"backwardsSize":{"description":"指定起始日志往前(上文)的日志条数,取值范围 [0, 500] ,默认值100","format":"int32","maximum":500,"minimum":0,"type":"integer"},"forwardsSize":{"description":"指定起始日志往后(下文)的日志条数,取值范围 [0, 500] ,默认值100","format":"int32","maximum":500,"minimum":0,"type":"integer"},"line_num":{"description":"日志单行序列号,字段值需要从日志结果中获取,纳秒级时间戳。","type":"string"}},"type":"object"},"ListLogContextResponseBody":{"properties":{"backwards_count":{"description":"向前查询到的日志条数。","format":"int32","maximum":500,"minimum":0,"type":"integer"},"forwards_count":{"description":"向后查询到的日志条数。","format":"int32","maximum":500,"minimum":0,"type":"integer"},"isQueryComplete":{"description":"是否查询完成。","type":"boolean"},"logs":{"description":"上下文日志信息。","items":{"$ref":"#/definitions/LogContents"},"type":"array"},"total_count":{"description":"返回的总日志条数,包含请求参数中所指定的起始日志。","format":"int32","type":"integer"}},"type":"object"},"LogContents":{"description":"参数集","properties":{"content":{"description":"日志原数据。","example":"warn:2020/04/09 06:57:01 helloworld.go:108: the main process is running now.","maxLength":10000,"minLength":1,"type":"string"},"labels":{"additionalProperties":{"type":"string"},"description":"该条日志包含的 labels。","type":"object"},"line_num":{"description":"日志单行序列号。","example":"15390682339830002","maxLength":19,"minLength":19,"type":"string"}},"type":"object"}},"description":null,"group_id":"8f58e31c452f407885dec582b8542111","host":"lts.cn-north-4.myhuaweicloud.com","id":"2a09a84c7ac34e4ca67876122d987ab5","info_version":"v2","method":"post","name":"ListLogContext","parameters":{},"paths":{"/v2/{project_id}/groups/{log_group_id}/streams/{log_stream_id}/context":{"post":{"description":"查询上下文日志 该接口用于查询指定日志前(上文)后(下文)的若干条日志。","operationId":"ListLogContext","parameters":[{"description":"项目ID,获取方式请参见:[获取项目ID,获取账号ID,日志组ID、日志流ID](lts_api_0006.xml)","in":"path","maxLength":32,"minLength":32,"name":"project_id","required":true,"type":"string"},{"default":"None","description":"日志组ID,获取方式请参见:[获取项目ID,获取账号ID,日志组ID、日志流ID](lts_api_0006.xml)","in":"path","maxLength":36,"minLength":36,"name":"log_group_id","required":true,"type":"string","x-example":"bf36c2ad-8620-xxxx-xxxx-ba80a88axxxx"},{"default":"None","description":"日志流ID,获取方式请参见:[获取项目ID,获取账号ID,日志组ID、日志流ID](lts_api_0006.xml)","in":"path","maxLength":36,"minLength":36,"name":"log_stream_id","required":true,"type":"string","x-example":"a78be692-xxxx-41a8-xxxx-1ac1377dxxxx"},{"description":"从IAM服务获取的用户Token,获取方式请参见:[获取用户Token](lts_api_0004.xml)","in":"header","maxLength":2000,"minLength":1000,"name":"X-Auth-Token","pattern":"X-Auth-Token","required":true,"type":"string"},{"description":"该字段填为:application/json;charset=UTF-8。","in":"header","maxLength":30,"minLength":30,"name":"Content-Type","required":true,"type":"string"},{"description":"查询上下文日志的请求体","in":"body","name":"ListLogContextRequestBody","required":true,"schema":{"$ref":"#/definitions/ListLogContextRequestBody"}}],"produces":["application/json"],"responses":{"200":{"description":"查询上下文日志数据请求响应成功","examples":{"application/json":{"backwards_count":1,"forwards_count":2,"logs":[{"content":"2024-09-01/09:30:00 this log is Error NO 1","labels":{"appName":"default_appname","category":"LTS","clusterId":"CONFIG_FILE","clusterName":"CONFIG_FILE","containerName":"CONFIG_FILE","nameSpace":"CONFIG_FILE","podName":"default_procname"},"line_num":"1725154215000000000"},{"content":"2024-09-01/09:30:01 this log is Error NO 1","labels":{"appName":"default_appname","category":"LTS","clusterId":"CONFIG_FILE","clusterName":"CONFIG_FILE","containerName":"CONFIG_FILE","nameSpace":"CONFIG_FILE","podName":"default_procname"},"line_num":"1725154216000000000"},{"content":"2024-09-01/09:30:02 this log is Error NO 1","labels":{"appName":"default_appname","category":"LTS","clusterId":"CONFIG_FILE","clusterName":"CONFIG_FILE","containerName":"CONFIG_FILE","nameSpace":"CONFIG_FILE","podName":"default_procname"},"line_num":"1725154217000000000"}],"total_count":3}},"schema":{"$ref":"#/definitions/ListLogContextResponseBody"}},"400":{"description":"BadRequest 非法请求建议根据error_msg直接修改该请求。","examples":{"application/json":{"error_code":"LTS.0009","error_msg":"Failed to validate the request body"}},"schema":{"$ref":"#/definitions/ErrorUpResultInfo1"}},"500":{"description":"InternalServerError。 表明服务端能被请求访问到,但是服务内部出错。","schema":{"$ref":"#/definitions/ErrorUpResultInfo1"}}},"summary":"查询上下文日志","tags":["日志管理"],"x-api-framework":"Other","x-api-position":"Region_ZONE","x-api-privacy-parameter":"{}","x-api-sensitiveinfo":"{}","x-api-type":"open-api","x-api-user":"IAM_User","x-api-userinput-untrust":"{}","x-authority-parameter-body":"{}","x-authority-parameter-url":"project_id,log_group_id,log_stream_id","x-iam-auth-meta-anno":{"abacAction":"lts:logStream:searchLogHistogram","abacActionAlias":["lts:sqlalarmrules:create"],"authLevel":"PROJECT","model":"v5-pkitoken","needAbacCheck":true,"needAbacResourceCheck":false,"needApigwJwtAuthCheck":true,"needCbcCheck":true,"needResourceTagCheck":false,"opType":"query","supportAllGrantedEps":false},"x-is-registered":"Y","x-open-region-cloud":"hws,hws_hk","x-request-examples-1":{"backwardsSize":100,"forwardsSize":100,"line_num":"1725154216000000000"},"x-request-examples-2":{"__time__":"1725154216000","backwardsSize":100,"forwardsSize":100,"line_num":"1725154216000000000"},"x-request-examples-description-1":"查询上下文日志","x-request-examples-description-2":"查询上下文日志,且已开启云端结构化的自定义时间功能。","x-request-examples-text-1":{"backwardsSize":100,"forwardsSize":100,"line_num":"1725154216000000000"},"x-request-examples-text-2":{"__time__":"1725154216000","backwardsSize":100,"forwardsSize":100,"line_num":"1725154216000000000"},"x-request-examples-url-1":"POST https://{endpoint}/v2/{project_id}/groups/{log_group_id}/streams/{log_stream_id}/context","x-request-examples-url-2":"POST https://{endpoint}/v2/{project_id}/groups/{log_group_id}/streams/{log_stream_id}/context","x-sec-auditlog":"N","x-sec-privacy-batchtype":"single","x-sec-privacy-datalevel":"L1","x-sec-upload-download":"N","x-support-sdk":"Y"}}},"product_short":"LTS","region_id":"cn-north-4","schemes":["HTTPS"],"security_definitions":null,"summary":"查询上下文日志","tags":"日志管理","uri":null,"version":"2.0"}