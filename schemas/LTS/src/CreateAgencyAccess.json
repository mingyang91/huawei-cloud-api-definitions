{"base_path":"/","components":null,"consumes":"[\"application/json;charset=UTF-8\"]","definitions":{"Error400DetailV":{"properties":{"message":{"$ref":"#/definitions/Error400Messagebody","description":"错误信息body体"}},"type":"object"},"Error400Messagebody":{"properties":{"code":{"description":"错误码\n最小长度:8\n最大长度:36","type":"string"},"details":{"description":"错误描述\n最小长度:2\n最大长度:512","type":"string"}},"type":"object"},"LTSAccessConfigInfoRespon200":{"properties":{"access_config_id":{"description":"跨账号日志接入id","type":"string"},"access_config_name":{"description":"跨账号日志接入名称","type":"string"},"access_config_type":{"description":"跨账号日志接入类型","enum":["Agent","CRD","AGENCYACCESS","K8S_CCE","K8S_CUSTOM","CLOUD_STREAM_AGENCY"],"type":"object"},"agency_log_access":{"$ref":"#/definitions/PreviewAgencyLogAccessReqBody","description":"委托接入信息"},"create_time":{"description":"创建时间","format":"int64","type":"integer"},"group_id":{"description":"日志组ID","type":"string"},"log_group_name":{"description":"日志组名称","type":"string"},"log_stream_id":{"description":"日志流ID","type":"string"},"log_stream_name":{"description":"日志流名称","type":"string"},"project_id":{"description":"项目ID","type":"string"}},"type":"object"},"PreviewAgencyLogAccessReqBody":{"properties":{"agency_access_type":{"description":"日志访问类型","enum":["AGENCYACCESS"],"type":"string"},"agency_domain_name":{"description":"委托账号名称","type":"string"},"agency_log_access":{"description":"跨账号日志接入配置名称","type":"string"},"agency_name":{"description":"委托名称","type":"string"},"agency_project_id":{"description":"委托项目id","type":"string"},"be_agency_project_id":{"description":"被委托项目id","type":"string"},"log_agencyGroup_id":{"description":"委托日志组id","type":"string"},"log_agencyGroup_name":{"description":"委托日志组名称","type":"string"},"log_agencyStream_id":{"description":"委托日志流id","type":"string"},"log_agencyStream_name":{"description":"委托日志流名称","type":"string"},"log_beAgencygroup_id":{"description":"被委托日志组id","type":"string"},"log_beAgencygroup_name":{"description":"被委托日志组名称","type":"string"},"log_beAgencystream_id":{"description":"被委托日志流id","type":"string"},"log_beAgencystream_name":{"description":"被委托日志流名称","type":"string"}},"required":["agency_access_type","agency_log_access","log_agencyStream_name","log_agencyStream_id","log_agencyGroup_name","log_agencyGroup_id","log_beAgencystream_name","log_beAgencystream_id","log_beAgencygroup_name","log_beAgencygroup_id","be_agency_project_id","agency_project_id","agency_domain_name","agency_name"],"type":"object"},"PreviewAgencyLogAccessReqListBody":{"properties":{"preview_agency_list":{"description":"预览代理列表","items":{"$ref":"#/definitions/PreviewAgencyLogAccessReqBody"},"type":"array"}},"required":["preview_agency_list"],"type":"object"}},"description":null,"group_id":"8f58e31c452f407885dec582b8542111","host":"lts.cn-north-4.myhuaweicloud.com","id":"635e69e64ba241c185ac958d89d6aae8","info_version":"v2","method":"post","name":"CreateAgencyAccess","parameters":{},"paths":{"/v2.0/{project_id}/lts/createAgencyAccess":{"post":{"description":"新建跨账号日志接入","operationId":"CreateAgencyAccess","parameters":[{"description":"项目ID,账号ID,日志组ID、日志流ID,获取方式请参见:[获取项目ID,获取账号ID,日志组ID、日志流ID](lts_api_0006.xml)","in":"path","maxLength":64,"minLength":1,"name":"project_id","required":true,"type":"string"},{"description":"跨账号日志接入请求参数","in":"body","name":"PreviewAgencyLogAccessReqListBody","required":true,"schema":{"$ref":"#/definitions/PreviewAgencyLogAccessReqListBody"}},{"description":"从IAM服务获取的用户Token,获取方式请参见:[获取用户Token]","in":"header","maxLength":10000,"minLength":1,"name":"X-Auth-Token","required":true,"type":"string"},{"description":"该字段填为:application/json;charset=utf8。","in":"header","maxLength":30,"minLength":30,"name":"Content-Type","required":true,"type":"string"}],"responses":{"200":{"description":"跨账号日志接入成功","examples":{"application/json":[{"access_config_id":"e929f40e-d1cf-4d59-b656-a2995cbd3229","access_config_name":"rule_lb30","access_config_type":"AGENCYACCESS","agency_log_access":{"agency_accessConfig_id":"e929f40e-d1cf-4d59-b656-a2995cbd3229","agency_access_type":"AGENCYACCESS","agency_domain_name":"paas_aom_z00418070_01","agency_log_access":"rule_lb30","agency_name":"wenshufeng","agency_project_id":"a0a12b069ab4491185d7cf26c3e86ada","be_agency_project_id":"2a473356cca5487f8373be891bffc1cf","log_agencyGroup_id":"f06cbfa0-7243-4031-9380-ae0465bd3997","log_agencyGroup_name":"lts-group-sgq","log_agencyStream_id":"beb169ff-e6e9-4bea-8e77-50afdec74071","log_agencyStream_name":"lts-topic-bug","log_beAgencygroup_id":"1e749063-d9f5-474f-a537-00cad4e9a108","log_beAgencygroup_name":"lts-group-sgqECS","log_beAgencystream_id":"36ce06b0-c6bf-436d-9abe-39de86da28bb","log_beAgencystream_name":"lts-topic-ECS"},"binary_collect":false,"create_time":1694400753168,"group_id":"1e749063-d9f5-474f-a537-00cad4e9a108","hostGroupNum":0,"hostNum":0,"host_group_info_list":[],"host_rule_info":{"black_paths":[],"pathType":"host_file","paths":[],"stderr":false,"stdout":false},"id":"","indexId":"","key":"","log_group_name":"lts-group-sgqECS","log_split":false,"log_stream_id":"36ce06b0-c6bf-436d-9abe-39de86da28bb","log_stream_name":"lts-topic-ECS","pathNum":0,"project_id":"2a473356cca5487f8373be891bffc1cf","tag_list":[]}]},"schema":{"items":{"$ref":"#/definitions/LTSAccessConfigInfoRespon200"},"type":"array"}},"400":{"description":"跨账号日志接入创建失败","examples":{"application/json":{"message":{"code":"LTS.0420","details":"Agency not existed, check domain name and agency name"}}},"schema":{"$ref":"#/definitions/Error400DetailV"}},"500":{"description":"服务内部错误","examples":{"application/json":{"message":{"code":"LTS.0010","details":"The system encountered an internal error"}}},"schema":{"$ref":"#/definitions/Error400DetailV"}}},"summary":"新建跨账号日志接入","tags":["日志接入"],"x-is-registered":"Y","x-open-region-cloud":"hws","x-request-examples-1":{"preview_agency_list":[{"agency_accessConfig_id":"","agency_access_type":"AGENCYACCESS","agency_domain_name":"paas_aom_z00418070_01","agency_log_access":"rule_lb30","agency_name":"wenshufeng","agency_project_id":"a0a12b069ab4491185d7cf26c3e86ada","be_agency_project_id":"2a473356cca5487f8373be891bffc1cf","log_agencyGroup_id":"f06cbfa0-7243-4031-9380-ae0465bd3997","log_agencyGroup_name":"lts-group-sgq","log_agencyStream_id":"beb169ff-e6e9-4bea-8e77-50afdec74071","log_agencyStream_name":"lts-topic-bug","log_beAgencygroup_id":"1e749063-d9f5-474f-a537-00cad4e9a108","log_beAgencygroup_name":"lts-group-sgqECS","log_beAgencystream_id":"36ce06b0-c6bf-436d-9abe-39de86da28bb","log_beAgencystream_name":"lts-topic-ECS"}]},"x-request-examples-description-1":"新建跨账号日志接入","x-request-examples-text-1":{"preview_agency_list":[{"agency_accessConfig_id":"","agency_access_type":"AGENCYACCESS","agency_domain_name":"paas_aom_z00418070_01","agency_log_access":"rule_lb30","agency_name":"wenshufeng","agency_project_id":"a0a12b069ab4491185d7cf26c3e86ada","be_agency_project_id":"2a473356cca5487f8373be891bffc1cf","log_agencyGroup_id":"f06cbfa0-7243-4031-9380-ae0465bd3997","log_agencyGroup_name":"lts-group-sgq","log_agencyStream_id":"beb169ff-e6e9-4bea-8e77-50afdec74071","log_agencyStream_name":"lts-topic-bug","log_beAgencygroup_id":"1e749063-d9f5-474f-a537-00cad4e9a108","log_beAgencygroup_name":"lts-group-sgqECS","log_beAgencystream_id":"36ce06b0-c6bf-436d-9abe-39de86da28bb","log_beAgencystream_name":"lts-topic-ECS"}]},"x-request-examples-url-1":"POST   https://{endpoint}//v2.0/{project_id}/lts/createAgencyAccess","x-support-sdk":"Y"}}},"product_short":"LTS","region_id":"cn-north-4","schemes":["HTTPS"],"security_definitions":null,"summary":"新建跨账号日志接入","tags":"日志接入","uri":null,"version":"2.0"}