{"base_path":"/","components":null,"consumes":"[\"application/json;charset=UTF-8\"]","definitions":{"ErrorResultInfo":{"description":"调用失败时的返回值。","properties":{"error_code":{"description":"错误码。","enum":["LTS.0403"],"type":"string"},"error_msg":{"description":"调用失败响应信息描述。","enum":["Invalid projectId"],"type":"string"}},"type":"object"},"LogContents":{"description":"参数集","properties":{"content":{"description":"日志原数据。","example":"warn:2020/04/09 06:57:01 helloworld.go:108: the main process is running now.","maxLength":10000,"minLength":1,"type":"string"},"labels":{"additionalProperties":{"type":"string"},"description":"该条日志包含的 labels。","type":"object"},"line_num":{"description":"日志单行序列号。","example":"15390682339830002","maxLength":19,"minLength":19,"type":"string"}},"type":"object"},"QueryLtsLogParams":{"description":"此参数在请求实体中,采用json字符串格式","properties":{"__time__":{"description":"若已开启自定义时间功能,需要使用该字段进行分页查询。","type":"string"},"end_time":{"description":"搜索结束时间(UTC时间,毫秒级)。","maxLength":13,"minLength":13,"type":"string"},"highlight":{"default":true,"description":"日志关键词高亮显示,默认为true(高亮显示),false为取消高亮显示。","type":"boolean"},"is_analysis_query":{"description":"是否为带管道符的sql分析语句。当该参数为true时,将依照body体中的query参数内容进行查询,且body体中除start_time与end_time以外的参数失效,分页、排序、查询结果条数等功能请依照sql语法规则实现。查询结果的响应体不同于未启用时的查询方式,将以默认列存的形式返回查询结果。当前仅对内测用户开放。响应示例:{\"analysisLogs\":[{\"field1\":\"1\",\"field2\":\"2\",\"field3\":\"3\"},{\"field1\":\"1\",\"field2\":\"2\",\"field3\":\"3\"},{\"field1\":\"1\",\"field2\":\"2\",\"field3\":\"3\"}]}","type":"boolean"},"is_count":{"description":"日志条数统计。默认为false(不统计),true为统计日志条数。","type":"boolean"},"is_desc":{"default":false,"description":"顺序或者倒序查询, 默认为false(顺序查询)","type":"boolean"},"is_iterative":{"default":false,"description":"日志迭代查询,默认为false(不开启迭代),true为开启迭代。","type":"boolean"},"keywords":{"description":"支持关键词精确搜索。关键词指相邻两个分词符之间的单词,例:error","example":"error","type":"string"},"labels":{"additionalProperties":{"type":"string"},"description":"日志过滤条件集合,不同日志来源所需字段不同。","type":"object"},"limit":{"description":"表示每次查询的日志条数,不填时默认为50,建议您设置为100。","format":"int32","maximum":5000,"minimum":1,"type":"integer"},"line_num":{"description":"日志单行序列号,第一次查询时不需要此参数,后续分页查询时需要使用,可从上次查询的返回信息中获取。line_num应在start_time 和 end_time 之间。","maxLength":19,"minLength":19,"type":"string"},"query":{"description":"使用带管道符的sql分析语句进行查询,需要query参数is_analysis_query为true时生效。","type":"string"},"search_type":{"description":"首次查询为 “init”, 分页查询时为 “forwards”或者“backwards”, 默认为首次查询“init”, 与 is_desc 参数配合进行分页查询。","enum":["forwards","backwards"],"type":"string"},"start_time":{"description":"搜索起始时间(UTC时间,毫秒级)。","maxLength":13,"minLength":13,"type":"string"}},"required":["start_time","end_time"],"type":"object"},"QueryLtsLogResponseBody":{"description":"lts查询结果详细","properties":{"analysisLogs":{"description":"分析日志返回响应体","items":{"type":"object"},"type":"array"},"count":{"description":"日志条数。","maxLength":5000,"minLength":0,"type":"integer"},"isQueryComplete":{"description":"是否查询完成。","type":"boolean"},"logs":{"description":"日志信息。","items":{"$ref":"#/definitions/LogContents"},"maxItems":5000,"minItems":0,"type":"array"}},"type":"object"}},"description":null,"group_id":"8f58e31c452f407885dec582b8542111","host":"lts.cn-north-4.myhuaweicloud.com","id":"f319d8bd68544fda9635ef1d9b8f3a02","info_version":"v2","method":"post","name":"ListLogs","parameters":{},"paths":{"/v2/{project_id}/groups/{log_group_id}/streams/{log_stream_id}/content/query":{"post":{"consumes":["application/json"],"description":"该接口用于查询指定日志流下的日志内容。","operationId":"ListLogs","parameters":[{"default":"None","description":"项目ID,获取方式请参见:获取账号ID、项目ID、日志组ID、日志流ID(https://support.huaweicloud.com/api-lts/lts_api_0006.html)。","in":"path","maxLength":32,"minLength":32,"name":"project_id","required":true,"type":"string","x-example":"2b31ed520xxxxxxebedb6e57xxxxxxxx"},{"default":"None","description":"日志组id。","in":"path","maxLength":36,"minLength":36,"name":"log_group_id","required":true,"type":"string","x-example":"bf36c2ad-8620-xxxx-xxxx-ba80a88axxxx"},{"default":"None","description":"日志流id。","in":"path","maxLength":36,"minLength":36,"name":"log_stream_id","required":true,"type":"string","x-example":"a78be692-xxxx-41a8-xxxx-1ac1377dxxxx"},{"default":"None","description":"从IAM服务获取的用户Token,获取方式请参见:获取用户Token(https://support.huaweicloud.com/api-iam/iam_30_0001.html)","in":"header","maxLength":2000,"minLength":1000,"name":"X-Auth-Token","required":true,"type":"string","x-example":"MIIDkgYJKoZIhvcNAQcCoIIDgzCCXXXXXX..."},{"default":"application/json;charset=UTF-8","description":"该字段填为:application/json;charset=UTF-8。","in":"header","maxLength":30,"minLength":30,"name":"Content-Type","required":true,"type":"string"},{"description":"该参数需要在调用时,放在请求body中,为JSON字符串。","in":"body","name":"ListLogsRequestBody","required":true,"schema":{"$ref":"#/definitions/QueryLtsLogParams"}}],"produces":["application/json"],"responses":{"200":{"description":"请求响应成功。","schema":{"$ref":"#/definitions/QueryLtsLogResponseBody"}},"400":{"description":"BadRequest。非法请求。 建议根据error_msg直接修改该请求,不要重试该请求。","examples":{"applications/json":{"error_code":"LTS.0009","error_msg":"Failed to validate the request body"}},"schema":{"$ref":"#/definitions/ErrorResultInfo"}},"401":{"description":"AuthFailed。鉴权失败, 请确认token后再次请求 。","examples":{"applications/json":{"error_code":"LTS.0414","error_msg":"Invalid token"}},"schema":{"$ref":"#/definitions/ErrorResultInfo"}},"403":{"description":"Forbidden。\n请求被拒绝访问。\n返回该状态码,表明请求能够到达服务端,且服务端能够理解用户请求,但是拒绝做更多的事情,因为该请求被设置为拒绝访问,建议直接修改该请求,不要重试该请求。","examples":{"applications/json":{"error_code":"LTS.0001","error_msg":"Invalid projectId"}},"schema":{"$ref":"#/definitions/ErrorResultInfo"}},"500":{"description":"InternalServerError。\n表明服务端能被请求访问到,但是服务内部出错。","examples":{"applications/json":{"error_code":"LTS.0202","error_msg":"Failed to query lts log"}},"schema":{"$ref":"#/definitions/ErrorResultInfo"}},"503":{"description":"ServiceUnavailable。\n被请求的服务无效,  服务不可用。","schema":{"type":"string"}}},"summary":"查询日志","tags":["日志管理"],"x-is-registered":"Y","x-open-region-cloud":"hk,hc","x-publishpath":"lts_api_0022","x-request-examples-1":{"end_time":1538970364983,"keywords":"","labels":{"service_type":"DLI"},"start_time":1538970064983},"x-request-examples-text-1":"/v2/{project_id}/{log_group_id}/{log_stream_id}/content/query\n{\n  \"start_time\": 1538970064983,\n  \"end_time\": 1538970364983,\n  \"labels\":\n      {\n        \"service_type\": \"DLI\"\n      },\n  \"keywords\": \"\"\n}","x-request-examples-url-1":"POST https://{endpoint}/v2/{project_id}/{log_group_id}/{log_stream_id}/content/query","x-support-sdk":"Y"}}},"product_short":"LTS","region_id":"cn-north-4","schemes":["HTTPS"],"security_definitions":null,"summary":"查询日志","tags":"日志管理","uri":null,"version":"2.0"}