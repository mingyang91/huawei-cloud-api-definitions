{"base_path":"/","components":null,"consumes":"[\"application/json;charset=UTF-8\"]","definitions":{"Annotations":{"properties":{"alarm_action_rule_name":{"description":"**参数解释:**\n告警行动规则名称。\n**取值范围:**\n不涉及。","type":"string"},"alarm_rule_alias":{"description":"**参数解释:**\n告警规则别名。\n**取值范围:**\n不涉及。","type":"string"},"alarm_rule_url":{"description":"**参数解释:**\n告警规则url。\n**取值范围:**\n不涉及。","type":"string"},"alarm_status":{"description":"**参数解释:**\n告警触发状态。\n**取值范围:**\n- 触发(firing)\n- 恢复(resolved)","type":"string"},"condition_expression":{"description":"**参数解释:**\n告警触发条件表达式。\n**取值范围:**\n不涉及。","type":"string"},"condition_expression_with_value":{"description":"**参数解释:**\n告警触发表达式带值。例如:条件表达式为pv > 0,则condition_expression_with_value取值为:100 > 0。\n**取值范围:**\n不涉及。","type":"string"},"current_value":{"description":"当前值","maxLength":1024,"minLength":1,"type":"string"},"frequency":{"description":"**参数解释:**\n告警统计周期。\n**取值范围:**\n不涉及。","type":"string"},"log_info":{"description":"日志组/流id,名称","maxLength":1024,"minLength":1,"type":"string"},"message":{"description":"告警列表详情","maxLength":1024,"minLength":1,"type":"string"},"notification_frequency":{"description":"**参数解释:**\n通知频率。\n**取值范围:**\n不涉及。","type":"string"},"old_annotations":{"description":"(sql/关键词)告警详情原始数据","maxLength":10000,"minLength":0,"type":"string"},"record_id":{"description":"**参数解释:**\n告警ID。\n**取值范围:**\n不涉及。","type":"string"},"recovery_policy":{"description":"**参数解释:**\n是否开启告警恢复开关。\n**取值范围:**\n- true: 开启告警恢复\n- false: 关闭告警恢复","type":"boolean"},"results":{"description":"**参数解释:**\n告警通知的详细信息。","items":{"$ref":"#/definitions/results"},"type":"array"},"type":{"description":"**参数解释:**\n告警规则类型。\n**取值范围:**\n- sql: sql告警\n- keywords: 关键词告警","type":"string"}},"required":["message","log_info","current_value","old_annotations"],"title":"Annotations","type":"object"},"Events":{"properties":{"annotations":{"$ref":"#/definitions/Annotations","description":"告警详情","maxLength":5000,"minLength":0,"type":"object"},"arrives_at":{"description":"到达时间(时间戳)","example":1628327321403,"format":"int64","type":"integer"},"ends_at":{"description":"告警清除时间(时间戳)","example":1628327321403,"format":"int64","type":"integer"},"id":{"description":"告警id","maxLength":64,"minLength":0,"type":"string"},"metadata":{"$ref":"#/definitions/Metadata","description":"告警信息","maxLength":2048,"minLength":0,"type":"object"},"starts_at":{"description":"告警产生时间(时间戳)","example":1628327321403,"format":"int64","type":"integer"},"timeout":{"description":"告警自动清除时间(时间戳)","example":1628327321403,"format":"int64","type":"integer"},"type":{"description":"告警规则类型(SQL/关键词)","maxLength":16,"minLength":0,"type":"string"}},"required":["annotations","arrives_at","ends_at","id","metadata","starts_at","timeout","type"],"title":"Events","type":"object"},"ListActiveOrHistoryAlarmsRequestBody":{"properties":{"alarm_level_ids":{"description":"告警级别(\"Critical\",\"Major\",\"Minor\",\"Info\")","items":{"type":"string"},"maxItems":4,"minItems":0,"type":"array"},"end_time":{"description":"自定义时间段结束时间(时间戳)","example":1628327321403,"format":"int64","type":"integer"},"search":{"description":"关键字检索条件","maxLength":1024,"minLength":1,"type":"string"},"sort":{"$ref":"#/definitions/Sort","description":"排序检索条件","type":"object"},"start_time":{"description":"自定义时间段开始时间(时间戳)","example":1628327321403,"format":"int64","type":"integer"},"step":{"description":"关键字检索条件","format":"int32","type":"integer"},"time_range":{"description":"非自定义时间段时间范围(单位为分钟)","type":"string"},"whether_custom_field":{"description":"是否自定义查询时间段","type":"boolean"}},"required":["whether_custom_field"],"title":"ListActiveOrHistoryAlarmsRequestBody","type":"object"},"ListActiveOrHistoryAlarmsRespBody":{"properties":{"events":{"description":"告警信息","items":{"$ref":"#/definitions/Events"},"type":"array"},"page_info":{"$ref":"#/definitions/PageInfo","description":"分页详情","maxLength":2048,"minLength":0,"type":"object"}},"required":["events","page_info"],"title":"ListActiveOrHistoryAlarmsRespBody","type":"object"},"Metadata":{"properties":{"event_id":{"description":"告警id","maxLength":1024,"minLength":1,"type":"string"},"event_name":{"description":"告警名称","maxLength":1024,"minLength":1,"type":"string"},"event_severity":{"description":"告警级别","maxLength":1024,"minLength":1,"type":"string"},"event_subtype":{"description":"**参数解释:**\n告警类型。\n**取值范围:**\n- sql: sql告警\n- keywords:关键词告警","type":"string"},"event_type":{"description":"告警类型","maxLength":1024,"minLength":1,"type":"string"},"log_group_name":{"description":"日志组原始名称","type":"string"},"log_stream_name":{"description":"日志流原始名称","type":"string"},"lts_alarm_type":{"description":"告警规则类型(SQL/关键词)","maxLength":100,"minLength":1,"type":"string"},"resource_id":{"description":"日志组/流名称","maxLength":1024,"minLength":1,"type":"string"},"resource_provider":{"description":"告警源","maxLength":1024,"minLength":1,"type":"string"},"resource_type":{"description":"资源类型","maxLength":1024,"minLength":1,"type":"string"}},"required":["event_type","event_id","event_severity","event_name","resource_type","resource_id","resource_provider","lts_alarm_type","log_group_name","log_stream_name","event_subtype"],"title":"Metadata","type":"object"},"PageInfo":{"properties":{"current_count":{"description":"本页返回条目数量","type":"string"},"next_marker":{"description":"返回下一页查询地址(为空时,代表后面没有数据)","maxLength":5000,"minLength":0,"type":"string"},"previous_marker":{"description":"返回前一页查询地址","maxLength":5000,"minLength":0,"type":"string"}},"required":["next_marker","previous_marker","current_count"],"title":"PageInfo","type":"object"},"Sort":{"properties":{"order":{"description":"排序顺序","enum":["desc","asc"],"type":"string"},"order_by":{"description":"排序字段","items":{"type":"string"},"maxItems":1,"minItems":1,"type":"array"}},"required":["order_by","order"],"title":"Sort","type":"object"},"results":{"properties":{"eps_id":{"description":"**参数解释:**\n企业项目ID。\n**取值范围:**\n不涉及。","type":"string"},"log_group_name":{"description":"**参数解释:**\n日志组名称。\n**取值范围:**\n不涉及。","type":"string"},"log_group_name_alias":{"description":"**参数解释:**\n日志组别名。\n**取值范围:**\n不涉及。","type":"string"},"log_stream_name":{"description":"**参数解释:**\n日志流名称。\n**取值范围:**\n不涉及。","type":"string"},"log_stream_name_alias":{"description":"**参数解释:**\n日志流别名。\n**取值范围:**\n不涉及。","type":"string"},"time":{"description":"**参数解释:**\n告警统计周期,例如:1小时。\n**取值范围:**\n不涉及。","type":"string"}},"required":["eps_id","log_group_name","log_group_name_alias","log_stream_name","log_stream_name_alias","time"],"type":"object"}},"description":null,"group_id":"8f58e31c452f407885dec582b8542111","host":"lts.cn-north-4.myhuaweicloud.com","id":"5bc1bb6748a04b1cb35988727bf4dbbf","info_version":"v2","method":"post","name":"ListActiveOrHistoryAlarms","parameters":{},"paths":{"/v2/{project_id}/{domain_id}/lts/alarms/sql-alarm/query":{"post":{"description":"该接口用于查询告警列表","operationId":"ListActiveOrHistoryAlarms","parameters":[{"default":"None","description":"项目ID,获取方式请参见:获取账号ID、项目ID、日志组ID、日志流ID(https://support.huaweicloud.com/api-lts/lts_api_0006.html)。","in":"path","maxLength":32,"minLength":32,"name":"project_id","required":true,"type":"string"},{"default":"None","description":"domainId","in":"path","maxLength":32,"minLength":32,"name":"domain_id","required":true,"type":"string"},{"description":"是活动告警还是历史告警","enum":["active_alert","history_alert"],"in":"query","name":"type","required":true,"type":"string"},{"description":"取值为上一页数据的最后一条记录的id(填写上一页数据返回得previous_marker或者next_marker值。)","in":"query","maxLength":1000,"minLength":0,"name":"marker","required":false,"type":"string"},{"description":"每页数据量","format":"int32","in":"query","maximum":1000,"minimum":0,"name":"limit","required":false,"type":"integer"},{"default":"None","description":"从IAM服务获取的用户Token,获取方式请参见:获取用户Token(https://support.huaweicloud.com/api-iam/iam_30_0001.html)","in":"header","maxLength":2000,"minLength":1000,"name":"X-Auth-Token","pattern":"X-Auth-Token","required":true,"type":"string"},{"default":"application/json;charset=UTF-8","description":"该字段填为:application/json;charset=UTF-8。","in":"header","maxLength":30,"minLength":30,"name":"Content-Type","required":true,"type":"string"},{"description":"查询活动告警或者历史告警的请求体","in":"body","name":"ListActiveOrHistoryAlarmsRequestBody","required":true,"schema":{"$ref":"#/definitions/ListActiveOrHistoryAlarmsRequestBody"}}],"produces":["application/json"],"responses":{"200":{"description":"请求响应成功。","schema":{"$ref":"#/definitions/ListActiveOrHistoryAlarmsRespBody"}}},"summary":"查询活动或历史告警列表","tags":["告警列表"],"x-is-registered":"Y","x-publishpath":"lts_api_0091","x-request-examples-text-1":"/v2/{project_id}/{domain_id}/lts/alarms/sql-alarm/query?type={type}&marker={marker}&limit={limit}\n{\n  \"whether_custom_field\": false,\n  \"start_time\": 0,\n  \"end_time\": 0,\n  \"time_range\": \"30\",\n  \"search\": \"\",\n  \"alarm_level_ids\": [\n    \"Critical\",\n    \"Major\",\n    \"Minor\",\n    \"Info\"\n    ],\n  \"sort\": {\n    \"order_by\": [\n      \"starts_at\"\n      ],\n      \"order\": \"desc\"\n  }\n}","x-request-examples-url-1":"POST https://{endpoint}/v2/{project_id}/{domain_id}/lts/alarms/sql-alarm/query","x-support-sdk":"Y"}}},"product_short":"LTS","region_id":"cn-north-4","schemes":["HTTPS"],"security_definitions":null,"summary":"查询活动或历史告警列表","tags":"告警列表","uri":null,"version":"2.0"}