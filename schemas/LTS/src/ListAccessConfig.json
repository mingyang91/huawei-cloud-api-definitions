{"base_path":"/","components":null,"consumes":"[\"application/json;charset=UTF-8\"]","definitions":{"AccessConfigBaseLogInfo":{"description":"日志接入基础日志信息。","properties":{"log_group_id":{"description":"日志组ID","maxLength":36,"minLength":36,"type":"string"},"log_stream_id":{"description":"日志流ID","maxLength":36,"minLength":36,"type":"string"}}},"AccessConfigDeatilCreate":{"description":"日志接入详细信息","properties":{"black_paths":{"description":"采集路径黑名单。\n1. 路径必须以/或者字母:\\\\开头\n2. 不能包含特殊字符<> ' | \" 且不能只输入/\n3. 第一级目录不支持通配符*:不能以/**   /*开头\n4.**只能出现一次\n最小长度:1\n最大长度:128","items":{"maxLength":128,"minLength":1,"type":"string"},"maxItems":9,"minItems":0,"type":"array"},"containerNameRegex":{"description":"K8s 容器名称正则匹配,仅CCE接入类型时使用","type":"string"},"excludeEnvs":{"additionalProperties":{"type":"string"},"description":"环境变量黑名单,最多支持创建30个,keyname不支持重名,仅CCE接入类型时使用","type":"object"},"excludeK8sLabels":{"additionalProperties":{"type":"string"},"description":"K8s Label黑名单,最多支持创建30个,keyname不支持重名,仅CCE接入类型时使用","type":"object"},"excludeLabels":{"additionalProperties":{"type":"string"},"description":"容器 Label黑名单,最多支持创建30个,keyname不支持重名,仅CCE接入类型时使用","type":"object"},"format":{"$ref":"#/definitions/AccessConfigFormatCreate","description":"日志格式。single与multi必须选择一种。"},"includeEnvs":{"additionalProperties":{"type":"string"},"description":"环境变量白名单,最多支持创建30个,keyname不支持重名,仅CCE接入类型时使用","type":"object"},"includeK8sLabels":{"additionalProperties":{"type":"string"},"description":"K8s Label白名单,最多支持创建30个,keyname不支持重名,仅CCE接入类型时使用","type":"object"},"includeLabels":{"additionalProperties":{"type":"string"},"description":"容器 Label白名单,最多支持创建30个,keyname不支持重名,仅CCE接入类型时使用","type":"object"},"logEnvs":{"additionalProperties":{"type":"string"},"description":"环境变量日志标签,最多支持创建30个,keyname不支持重名,仅CCE接入类型时使用","type":"object"},"logK8s":{"additionalProperties":{"type":"string"},"description":"K8s Label日志标签,最多支持创建30个,keyname不支持重名,仅CCE接入类型时使用","type":"object"},"logLabels":{"additionalProperties":{"type":"string"},"description":"容器 Label日志标签,最多支持创建30个,keyname不支持重名,仅CCE接入类型时使用","type":"object"},"namespaceRegex":{"description":"K8s Namespace正则匹配,仅CCE接入类型时使用","type":"string"},"pathType":{"description":"CCE接入类型,仅CCE接入类型时使用","enum":["HOST_FILE","CONTAINER_STDOUT","CONTAINER_FILE"],"type":"string"},"paths":{"description":"采集路径。\n1. 路径必须以/或者字母:\\\\开头\n2. 不能包含特殊字符<> ' | \" 且不能只输入/\n3. 第一级目录不支持通配符*:不能以/**   /*开头\n4.**只能出现一次``\nCCE类型中 容器路径和主机路径必填,标准输出不用\n最小长度:1\n最大长度:128","items":{"maxLength":128,"minLength":1,"type":"string"},"maxItems":9,"minItems":1,"type":"array"},"podNameRegex":{"description":"K8s Pod正则匹配,仅CCE接入类型时使用","type":"string"},"stderr":{"description":"标准输出开关标准错误开关,仅CCE接入类型时使用","type":"boolean"},"stdout":{"description":"标准输出开关,仅CCE接入类型时使用","type":"boolean"},"windows_log_info":{"$ref":"#/definitions/AccessConfigWindowsLogInfoCreate","description":"日志接入采集Windows事件日志"}},"required":["format"],"type":"object"},"AccessConfigFormatCreate":{"description":"日志格式","properties":{"multi":{"$ref":"#/definitions/AccessConfigFormatMutilCreate"},"single":{"$ref":"#/definitions/AccessConfigFormatSingleCreate"}}},"AccessConfigFormatMutilCreate":{"description":"日志接入格式多行日志","properties":{"mode":{"description":"单行日志。time:日志时间,regular:正则模式。","enum":["time","regular"],"type":"string"},"value":{"description":"日志时间。\n当mode为\"regular\",则输入正则表达式\n当mode为\"time\",则时间通配符:用日志打印时间来标识一条日志数据,通过时间通配符来匹配日志,每条日志的行首显示日志的打印时间;如果日志中的时间格式为:2019-01-01 23:59:59,时间通配符应该填写为:YYYY-MM-DD hh:mm:ss;如果日志中的时间格式为:19-1-1 23:59:59,时间通配符应该填写为:YY-M-D hh:mm:ss","maxLength":64,"minLength":1,"type":"string"}}},"AccessConfigFormatSingleCreate":{"description":"日志接入格式单行日志","properties":{"mode":{"description":"单行日志。system:系统时间,wildcard:时间通配符。","enum":["system","wildcard"],"type":"string"},"value":{"description":"日志时间。\n当mode为”system”,则填入当前时间戳。\n当mode为\"wildcard\",则时间通配符:用日志打印时间来标识一条日志数据,通过时间通配符来匹配日志,每条日志的行首显示日志的打印时间;如果日志中的时间格式为:2019-01-01 23:59:59,时间通配符应该填写为:YYYY-MM-DD hh:mm:ss;如果日志中的时间格式为:19-1-1 23:59:59,时间通配符应该填写为:YY-M-D hh:mm:ss","maxLength":64,"minLength":1,"type":"string"}}},"AccessConfigHostGroupIdList":{"description":"日志接入主机组ID列表","properties":{"host_group_id_list":{"description":"主机组ID列表","items":{"maxLength":36,"minLength":36,"type":"string"},"maxItems":1000,"minItems":1,"type":"array"}},"required":["host_group_id_list"]},"AccessConfigInfo":{"description":"日志接入配置","properties":{"access_config_detail":{"$ref":"#/definitions/AccessConfigDeatilCreate","description":"日志接入详细信息"},"access_config_id":{"description":"日志接入ID","maxLength":36,"minLength":36,"type":"string"},"access_config_name":{"description":"日志接入名称","maxLength":64,"minLength":1,"pattern":"^(?!\\.)(?!_)(?!.*?\\.$)[\\u4e00-\\u9fa5a-zA-Z0-9-_.]{1,64}$","type":"string"},"access_config_tag":{"description":"标签信息。KEY不能重复,最多20个标签","items":{"$ref":"#/definitions/accessConfigTag"},"type":"array"},"access_config_type":{"description":"日志接入类型。AGENT:ECS接入  K8S_CCE: CCE接入","enum":["AGENT","K8S_CCE"],"type":"string"},"application_id":{"description":"ServiceStage应用ID","type":"string"},"binary_collect":{"description":"日志拆分","type":"boolean"},"cluster_id":{"description":"CCE集群ID","type":"string"},"component_id":{"description":"ServiceStage组件ID","items":{"type":"string"},"type":"array"},"create_time":{"description":"创建时间","format":"int64","maximum":9999999999999,"minimum":1,"type":"integer"},"demo_fields":{"description":"示例日志解析字段","items":{"$ref":"#/definitions/DemoFieldAccess"},"type":"array"},"demo_log":{"description":"示例日志","type":"string"},"encoding_format":{"description":"编码格式,默认UTF-8","type":"string"},"environment_id":{"description":"ServiceStage环境ID","type":"string"},"host_group_info":{"$ref":"#/definitions/AccessConfigHostGroupIdList","description":"日志接入主机组ID列表"},"incremental_collect":{"description":"采集策略:增量/全量","type":"boolean"},"log_info":{"$ref":"#/definitions/AccessConfigQueryLogInfo","description":"日志接入日志详情"},"log_split":{"description":"二进制采集","type":"boolean"},"processor_type":{"description":"IC结构化解析类型","type":"string"},"processors":{"description":"IC结构化解析器","items":{"$ref":"#/definitions/Processor"},"type":"array"}},"type":"object"},"AccessConfigQueryLogInfo":{"allOf":[{"$ref":"#/definitions/AccessConfigBaseLogInfo"},{"properties":{"log_group_name":{"description":"日志组名称","maxLength":128,"minLength":1,"type":"string"},"log_stream_name":{"description":"日志流名称","maxLength":128,"minLength":1,"type":"string"}},"type":"object"}],"description":"日志接入日志详情"},"AccessConfigTimeOffset":{"description":"日志接入偏移时间","properties":{"offset":{"description":"偏移时间。\n当\"unit\"选择\"day\"时,范围为1~7天。\n当\"unit\"选择\"hour\"时,范围为1~168小时。\n当\"unit\"选择\"sec\"时,范围为1~604800秒。","format":"int64","maximum":604800,"minimum":1,"type":"integer"},"unit":{"description":"偏移时间单位。day :天,hour:小时,sec:秒","enum":["day","hour","sec"],"type":"string"}},"required":["offset","unit"]},"AccessConfigWindowsLogInfoCreate":{"description":"日志接入采集Windows事件日志","properties":{"categorys":{"description":"采集Windows事件日志类型。Application:应用系统,System:系统,Security:安全,Setup:启动","items":{"enum":["Application","System","Security","Setup"],"type":"string"},"type":"array"},"event_level":{"description":"事件等级。information:info,warning:告警,error:错误,critical:关键,verbose:冗长","items":{"enum":["information","warning","error","critical","verbose"],"type":"string"},"maxItems":5,"minItems":1,"type":"array"},"time_offset":{"$ref":"#/definitions/AccessConfigTimeOffset"}},"required":["categorys","time_offset","event_level"],"type":"object"},"DemoFieldAccess":{"properties":{"field_name":{"description":"字段名称需和keys中字段保持一致","type":"string"},"field_value":{"description":"字段值","type":"string"}},"type":"object"},"Detail":{"properties":{"dest_keys":{"description":"字段重命名替换的字段名称列表","items":{"type":"string"},"type":"array"},"drop_keys":{"description":"删除的字段列表","items":{"type":"string"},"type":"array"},"exclude":{"additionalProperties":{"type":"string"},"description":"日志过滤白名单规则 key长度最大为256,value最大长度为128,key不可以重复","type":"object"},"expand_connector":{"description":"json解析字段名称连接符","type":"string"},"expand_depth":{"description":"json解析深度,默认为1层最大4层","format":"int32","type":"integer"},"fields":{"additionalProperties":{"type":"string"},"description":"添加的字段列表:<字段名称 : 字段内容>","type":"object"},"include":{"additionalProperties":{"type":"string"},"description":"日志过滤白名单规则 key长度最大为256,value最大长度为128,key不可以重复","type":"object"},"keep_source":{"description":"是否上传原始日志","type":"boolean"},"keep_source_if_parse_error":{"description":"是否上传解析失败日志","type":"boolean"},"keys":{"description":"字段名称列表 与field_name字段保持一致","items":{"type":"string"},"type":"array"},"multi_line_regex":{"description":"首行正则表达式","type":"string"},"regex":{"description":"正则解析正则表达式 单行完全正则,多行完全正则需填此字段","type":"string"},"set_time":{"description":"是否开启自定义时间的开关","type":"boolean"},"source_format":{"description":"自定义时间时间格式","type":"string"},"source_key":{"description":"自定义时间key字段名称","type":"string"},"source_keys":{"description":"字段重命名源字段名称列表","items":{"type":"string"},"type":"array"},"source_value":{"description":"自定义时间字段value","type":"string"},"split_sep":{"description":"分隔符 自定义字符最大长度10,自定义字符串最大长度30","type":"string"},"split_type":{"description":"分隔符类型:char-自定义字符;special_char-不可见字符;string-自定义字符串","type":"string"}},"type":"object"},"ErrorResultInfo400":{"description":"调用失败时的返回值。","properties":{"error_code":{"description":"错误码。","type":"string"},"error_msg":{"description":"调用失败响应信息描述。","type":"string"}},"required":["error_code","error_msg"],"type":"object"},"GetAccessConfigListRequestBody":{"description":"查询日志接入列表请求体","properties":{"access_config_name_list":{"description":"接入配置名称列表","items":{"maxLength":64,"minLength":1,"pattern":"^(?!\\.)(?!_)(?!.*?\\.$)[\\u4e00-\\u9fa5a-zA-Z0-9-_.]{1,64}$","type":"string"},"maxItems":1000,"minItems":0,"type":"array"},"access_config_tag_list":{"description":"接入配置标签,KEY不能重复,最多20个标签","items":{"$ref":"#/definitions/accessConfigTag"},"type":"array"},"host_group_name_list":{"description":"主机组名称列表","items":{"maxLength":64,"minLength":1,"pattern":"^(?!\\.)(?!_)(?!.*?\\.$)[\\u4e00-\\u9fa5a-zA-Z0-9-_.]{1,64}$","type":"string"},"maxItems":1000,"minItems":0,"type":"array"},"log_group_name_list":{"description":"日志组名称列表","items":{"maxLength":64,"minLength":1,"type":"string"},"maxItems":1000,"minItems":0,"type":"array"},"log_stream_name_list":{"description":"日志流名称列表","items":{"maxLength":64,"minLength":1,"type":"string"},"maxItems":1000,"minItems":0,"type":"array"}},"required":["access_config_name_list","host_group_name_list","log_group_name_list","log_stream_name_list"],"type":"object"},"GetAccessConfigListResponseBody":{"description":"查询日志接入响应体","properties":{"result":{"description":"日志接入列表","items":{"$ref":"#/definitions/AccessConfigInfo"},"maxItems":1000,"minItems":0,"type":"array"},"total":{"description":"日志接入总数","format":"int64","maximum":1000,"minimum":0,"type":"integer"}},"required":["result","total"]},"Processor":{"properties":{"detail":{"$ref":"#/definitions/Detail","description":"解析器配置"},"type":{"description":"解析器类型 processor_regex 正则解析 processor_split_string 分词符 processor_json json解析器类型 processor_gotime自定义时间类型 processor_filter_regex日志过滤 processor_drop删除字段类型 processor_rename修改字段类型","type":"string"}},"type":"object"},"accessConfigTag":{"properties":{"key":{"maxLength":128,"minLength":1,"type":"string"},"value":{"maxLength":128,"minLength":1,"type":"string"}}}},"description":null,"group_id":"8f58e31c452f407885dec582b8542111","host":"lts.cn-north-4.myhuaweicloud.com","id":"b22ec2954f054f94844630c6fd0569d4","info_version":"v2","method":"post","name":"ListAccessConfig","parameters":{},"paths":{"/v3/{project_id}/lts/access-config-list":{"post":{"description":"查询日志接入列表","operationId":"ListAccessConfig","parameters":[{"default":"None","description":"项目ID,获取方式请参见:[获取帐号租户ID、项目资源集ID、日志组ID、日志流ID](lts_api_0006.xml)。","in":"path","maxLength":32,"minLength":32,"name":"project_id","required":true,"type":"string"},{"default":"None","description":"从IAM服务获取的用户Token。","in":"header","maxLength":2000,"minLength":1000,"name":"X-Auth-Token","required":true,"type":"string"},{"default":"None","description":"该字段填为:application/json;charset=UTF-8。","in":"header","maxLength":30,"minLength":30,"name":"Content-Type","required":true,"type":"string"},{"description":"查询日志接入请求体","in":"body","name":"ListAccessConfigRequestBody","required":true,"schema":{"$ref":"#/definitions/GetAccessConfigListRequestBody"}}],"produces":["application/json"],"responses":{"200":{"description":"查询日志接入列表请求响应成功","examples":{"application/json":{"result":[{"access_config_detail":{"containerNameRegex":"my","excludeEnvs":{"h":"8"},"excludeK8sLabels":{"e":"5"},"excludeLabels":{"b":"2"},"format":{"single":{"mode":"system","value":"1678969382000"}},"includeEnvs":{"g":"7"},"includeK8sLabels":{"d30":"4"},"includeLabels":{"a":"1"},"logEnvs":{"i":"9"},"logK8s":{"f":"6"},"logLabels":{"c":"3"},"namespaceRegex":"default","pathType":"container_stdout","paths":[],"podNameRegex":"abc","stderr":false,"stdout":true},"access_config_id":"c3152f88-8b06-4f7f-bbbe-129512f49f87","access_config_name":"myapinew322","access_config_tag":[{"key":"my01","value":"001"},{"key":"my02","value":"002"}],"access_config_type":"K8S_CCE","binary_collect":false,"create_time":1684467787996,"host_group_info":{"host_group_id_list":["12b0bbd1-4eda-456b-a641-647aa66bdeab"]},"log_info":{"log_group_id":"9575cb24-290c-478e-a5db-88d6d1dc513b","log_group_name":"my-group","log_stream_id":"3581bee9-8698-476e-a0ba-b0f310ed99cf","log_stream_name":"lts-topic-api"},"log_split":false},{"access_config_detail":{"containerNameRegex":"my","excludeEnvs":{"h":"8"},"excludeK8sLabels":{"e":"5"},"excludeLabels":{"b":"2"},"format":{"single":{"mode":"system","value":"1678969382000"}},"includeEnvs":{"g":"7"},"includeK8sLabels":{"d":"4","d1":"4","d10":"4","d11":"4","d12":"4","d13":"4","d14":"4","d15":"4","d16":"4","d17":"4","d18":"4","d2":"4","d3":"4","d4":"4","d5":"4","d6":"4","d7":"4","d8":"4","d9":"4"},"includeLabels":{"a":"1"},"logEnvs":{"i":"9"},"logK8s":{"f":"6"},"logLabels":{"c":"3"},"namespaceRegex":"default","pathType":"container_stdout","paths":[],"podNameRegex":"abc","stderr":false,"stdout":true},"access_config_id":"550cd738-7b16-4724-9c59-aba61bf16528","access_config_name":"myapinew32","access_config_tag":[{"key":"my01","value":"001"},{"key":"my02","value":"002"}],"access_config_type":"K8S_CCE","binary_collect":false,"create_time":1684463134956,"host_group_info":{"host_group_id_list":["12b0bbd1-4eda-456b-a641-647aa66bdeab"]},"log_info":{"log_group_id":"9575cb24-290c-478e-a5db-88d6d1dc513b","log_group_name":"my-group","log_stream_id":"3581bee9-8698-476e-a0ba-b0f310ed99cf","log_stream_name":"lts-topic-api"},"log_split":false}],"total":2}},"schema":{"$ref":"#/definitions/GetAccessConfigListResponseBody"}},"400":{"description":"非法请求 建议根据error_msg直接修改该请求。","examples":{"application/json":"{\n  \"error_code\": \"LTS.1807\",\n  \"error_msg\": \"Invalid access config name\"\n}\n{ \n  \"error_code\" : \"LTS.2209\", \n  \"error_msg\" : \"Invalid access config paramkeys\" \n}"},"schema":{"$ref":"#/definitions/ErrorResultInfo400"}},"500":{"description":"表明服务端能被请求访问到,但是服务内部出错。","examples":{"application/json":{"error_code":"LTS.0010","error_msg":"The system encountered an internal error"}},"schema":{"$ref":"#/definitions/ErrorResultInfo400"}}},"summary":"查询日志接入","tags":["日志接入"],"x-is-registered":"Y","x-open-region-cloud":"hws,hws_hk","x-request-examples-1":"/v3/{project_id}/lts/access-config-list  \n{\n    \"access_config_name_list\" : [\"采xx2\", \"22x\", \"2x\", \"采集Wjxxxx\"],\n    \"host_group_name_list\" : [\"wwxx\"],\n    \"log_group_name_list\" : [\"lts-grxx\", \"lts-xx\", \"lts-gxx\"],\n    \"log_stream_name_list\" : [\"lts-topixx\", \"lts-txx\"],\n    \"access_config_tag_list\" : [{\n                    \"key\" : \"xxx\",\n                    \"value\" : \"xxx\"\n                }, {\n                    \"key\" : \"xxx1\",\n                    \"value\" : \"xxx1\"\n                }\n            ]\n}\n","x-request-examples-description-1":"查询日志接入信息,根据传入的Body体进行过滤。","x-request-examples-text-1":"/v3/{project_id}/lts/access-config-list  \n{\n    \"access_config_name_list\" : [\"采xx2\", \"22x\", \"2x\", \"采集Wjxxxx\"],\n    \"host_group_name_list\" : [\"wwxx\"],\n    \"log_group_name_list\" : [\"lts-grxx\", \"lts-xx\", \"lts-gxx\"],\n    \"log_stream_name_list\" : [\"lts-topixx\", \"lts-txx\"],\n    \"access_config_tag_list\" : [{\n                    \"key\" : \"xxx\",\n                    \"value\" : \"xxx\"\n                }, {\n                    \"key\" : \"xxx1\",\n                    \"value\" : \"xxx1\"\n                }\n            ]\n}\n","x-request-examples-url-1":"POST https://{endpoint}/v3/{project_id}/lts/access-config-list","x-support-sdk":"Y"}}},"product_short":"LTS","region_id":"cn-north-4","schemes":["HTTPS"],"security_definitions":null,"summary":"查询日志接入","tags":"日志接入","uri":null,"version":"2.0"}