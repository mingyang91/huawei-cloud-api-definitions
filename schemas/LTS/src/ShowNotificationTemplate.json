{"base_path":"/","components":null,"consumes":"[\"application/json;charset=UTF-8\"]","definitions":{"CreateNotificationTemplateRequestBody":{"description":"创建通知规则请求体","properties":{"desc":{"description":"模板描述,必填,只含有汉字、数字、字母、下划线不能以下划线开头和结尾,长度为0--1024","example":"这是一个描叙","maxLength":1024,"minLength":0,"type":"string"},"locale":{"description":"语言,必填,目前可填zh-cn和en-us","enum":["zh-cn","en-us"],"example":"zh-cn","type":"string"},"name":{"description":"通知规则名称,必填,只含有汉字、数字、字母、下划线、中划线,不能以下划线等特殊符号开头和结尾,长度为 1 - 100,创建后不可修改","example":"keywords_template","maxLength":100,"minLength":1,"type":"string"},"source":{"description":"模板来源,目前必填为LTS,否则会筛选不出来","example":"LTS","maxLength":3,"minLength":3,"type":"string"},"templates":{"description":"模板正文,为一个数组","example":[{"content":"告警级别:${event_severity};\n发生时间:${starts_at};\n资源标识:${resources};\n统计类型:关键词统计;\n表达式:$event.annotations.condition_expression;\n当前值: $event.annotations.current_value;\n统计周期:$event.annotations.frequency;","sub_type":"sms"},{"content":"告警级别:${event_severity};\n发生时间:${starts_at};\n资源标识:${resources};\n统计类型:关键词统计;\n表达式:$event.annotations.condition_expression;\n当前值: $event.annotations.current_value;\n统计周期:$event.annotations.frequency;","sub_type":"dingding"},{"content":"告警级别:${event_severity};\n发生时间:${starts_at};\n资源标识:${resources};\n统计类型:关键词统计;\n表达式:$event.annotations.condition_expression;\n当前值: $event.annotations.current_value;\n统计周期:$event.annotations.frequency;","sub_type":"wechat"},{"content":"告警级别:${event_severity};\n发生时间:${starts_at};\n资源标识:${resources};\n统计类型:关键词统计;\n表达式:$event.annotations.condition_expression;\n当前值: $event.annotations.current_value;\n统计周期:$event.annotations.frequency;","sub_type":"webhook"},{"content":"告警级别:${event_severity};\n发生时间:${starts_at};\n告警源:$event.metadata.resource_provider;\n资源类型:$event.metadata.resource_type;\n资源标识:${resources};\n统计类型:关键词统计;\n表达式:$event.annotations.condition_expression;\n当前值: $event.annotations.current_value;\n统计周期:$event.annotations.frequency;\n查询时间:$event.annotations.results[0].time;\n查询日志:$event.annotations.results[0].raw_results;","sub_type":"email"}],"items":{"$ref":"#/definitions/SubTemplate"},"maxItems":5,"minItems":1,"type":"array"},"type":{"description":"保留字段,非必填,只支持sms(短信),dingding(钉钉),wechat(企业微信),email(邮件)和webhook(网络钩子)","enum":["sms","dingding","wechat","webhook","email"],"items":{"type":"string"},"maxItems":5,"minItems":0,"type":"array"}},"required":["name","source","locale","templates"]},"ErrorUpResultInfo1":{"description":"调用失败时的返回值。","properties":{"error_code":{"description":"错误码。","maxLength":8,"minLength":8,"type":"string"},"error_msg":{"description":"调用失败响应信息描述。","example":"Invalid projectId","type":"string"}}},"NotificationTemplate":{"allOf":[{"$ref":"#/definitions/CreateNotificationTemplateRequestBody"},{"properties":{"create_time":{"description":"创建时间,为毫秒时间戳","format":"int64","maximum":1700000000000,"minimum":0,"type":"integer"},"modify_time":{"description":"更新时间,为毫秒时间戳","format":"int64","maximum":1700000000000,"minimum":0,"type":"integer"},"project_id":{"description":"项目ID,获取方式请参见:获取账号ID、项目ID、日志组ID、日志流ID(https://support.huaweicloud.com/api-lts/lts_api_0006.html)。","maxLength":32,"minLength":32,"type":"string"}},"required":["create_time","modify_time","project_id"],"type":"object"}]},"SubTemplate":{"description":"子模版数据结构","properties":{"content":{"description":"子模版正文,$符号后所跟变量仅支持以下变量,根据不同告警类型(关键词告警和sql告警),所支持的变量亦不相同。\n目前两种告警类型有共同变量如下:告警级别:${event_severity};发生时间:${starts_at};告警源:$event.metadata.resource_provider;资源类型:$event.metadata.resource_type;资源标识:${resources};统计类型:关键词统计;表达式:$event.annotations.condition_expression;当前值: $event.annotations.current_value;统计周期:$event.annotations.frequency;\n关键词告警特有变量:查询时间:$event.annotations.results[0].time;查询日志:$event.annotations.results[0].raw_results;\nsql告警特有变量:日志组/流名称:$event.annotations.results[0].resource_id;查询语句:$event.annotations.results[0].sql;查询时间:$event.annotations.results[0].time;查询URL:$event.annotations.results[0].url;查询日志:$event.annotations.results[0].raw_results;\n变量后面的分号\";\"为英文符号,必须添加,否则模板会出现替换失败的情况","example":"告警级别:${event_severity};\n发生时间:${starts_at};\n告警源:$event.metadata.resource_provider;\n资源类型:$event.metadata.resource_type;\n资源标识:${resources};\n统计类型:关键词统计;\n表达式:$event.annotations.condition_expression;\n当前值: $event.annotations.current_value;\n统计周期:$event.annotations.frequency;\n查询时间:$event.annotations.results[0].time;\n查询日志:$event.annotations.results[0].raw_results;","maxLength":1024,"minLength":2,"type":"string"},"sendType":{"description":"**参数解释:** \n当消息模板类型为webhook时生效,决定该消息的渲染方式。\n**取值范围:** \n- HTML\n- JSON","type":"string"},"sub_type":{"description":"模板子类型,只支持以下5种类型:sms,dingding,wechat,webhook,email","enum":["sms","dingding","wechat","webhook","email"],"example":"email","type":"string"},"topic":{"description":"邮件主题,只有sub_type=email时生效","type":"string"},"version":{"description":"**参数解释:** \n消息模板的适用版本。\n**取值范围:** \n v1:标识为LTS的消息模板。","type":"string"}},"required":["sub_type","content"]}},"description":null,"group_id":"8f58e31c452f407885dec582b8542111","host":"lts.cn-north-4.myhuaweicloud.com","id":"2816748877ed459089f5ed05b1bb68af","info_version":"v2","method":"get","name":"ShowNotificationTemplate","parameters":{},"paths":{"/v2/{project_id}/{domain_id}/lts/events/notification/template/{template_name}":{"get":{"description":"该接口用于查询单个通知模板","operationId":"ShowNotificationTemplate","parameters":[{"description":"项目ID,获取方式请参见:获取账号ID、项目ID、日志组ID、日志流ID(https://support.huaweicloud.com/api-lts/lts_api_0006.html)。","in":"path","maxLength":32,"minLength":32,"name":"project_id","required":true,"type":"string"},{"description":"账号id,获取方式请参见:获取账号ID、项目ID、日志组ID、日志流ID(https://support.huaweicloud.com/api-lts/lts_api_0006.html)。","in":"path","maxLength":32,"minLength":32,"name":"domain_id","required":true,"type":"string"},{"description":"template_name","in":"path","maxLength":100,"minLength":1,"name":"template_name","required":true,"type":"string"},{"description":"从IAM服务获取的用户Token,获取方式请参见:获取用户Token(https://support.huaweicloud.com/api-iam/iam_30_0001.html)","in":"header","maxLength":2000,"minLength":1000,"name":"X-Auth-Token","pattern":"X-Auth-Token","required":true,"type":"string"},{"default":"application/json;charset=UTF-8","description":"该字段填为:application/json;charset=UTF-8。","in":"header","maxLength":30,"minLength":30,"name":"Content-Type","required":true,"type":"string"}],"produces":["application/json"],"responses":{"200":{"description":"请求响应成功。","schema":{"$ref":"#/definitions/NotificationTemplate"}},"500":{"description":"表明服务端能被请求访问到,但是服务内部出错。","examples":{"application/json":{"error_code":"LTS.2018","error_msg":"Failed to get notification template."}},"schema":{"$ref":"#/definitions/ErrorUpResultInfo1"}}},"summary":"查询单个消息模板","tags":["消息模板管理"],"x-is-registered":"Y","x-request-examples-1":"/v2/{project_id}/{domain_id}/lts/events/notification/template/{template_name}","x-request-examples-text-1":"/v2/{project_id}/{domain_id}/lts/events/notification/template/{template_name}","x-request-examples-url-1":"GET https://{endpoint}/v2/{project_id}/{domain_id}/lts/events/notification/template/{template_name}","x-support-sdk":"Y"}}},"product_short":"LTS","region_id":"cn-north-4","schemes":["HTTPS"],"security_definitions":null,"summary":"查询单个消息模板","tags":"消息模板管理","uri":null,"version":"2.0"}