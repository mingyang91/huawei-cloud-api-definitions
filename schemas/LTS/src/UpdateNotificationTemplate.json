{"base_path":"/","components":null,"consumes":"[\"application/json;charset=UTF-8\"]","definitions":{"CreateNotificationTemplateResBody":{"properties":{"desc":{"description":"**参数解释:** \n消息模板描述。\n**取值范围:** \n不涉及。","type":"string"},"locale":{"description":"**参数解释:** \n消息头语言,系统在发送消息时会默认添加消息头,中文如:“尊敬的用户...”;英文如:“Dear User...”。\n**取值范围:** \n- zh-cn\n- en-us","type":"string"},"name":{"description":"**参数解释:** \n消息模板名称。\n**取值范围:** \n不涉及。","type":"string"},"source":{"description":"**参数解释:** \n消息模板来源。\n**取值范围:** \n不涉及。","type":"string"},"templates":{"description":"**参数解释:** \n不同通知渠道下消息模板的详细信息。","items":{"$ref":"#/definitions/SubTemplateResBody"},"type":"array"},"type":{"description":"**参数解释:** \n消息通知方式。\n**取值范围:** \n- sms\n- dingding\n- wechat\n- webhook\n- email\n- voice\n- feishu\n- welink","items":{"type":"string"},"type":"array"}},"required":["name","source","templates"],"type":"object"},"ErrorUpResultInfo1":{"description":"调用失败时的返回值。","properties":{"error_code":{"description":"错误码。","maxLength":8,"minLength":8,"type":"string"},"error_msg":{"description":"调用失败响应信息描述。","example":"Invalid projectId","type":"string"}}},"SubTemplateResBody":{"properties":{"content":{"description":"**参数解释:** \n对应通知渠道的消息模板正文,$符号后所跟变量仅支持以下变量,根据不同告警类型(关键词告警和sql告警),所支持的变量亦不相同。目前两种告警类型有共同变量如下:\n告警级别:${event_severity};\n发生时间:${starts_at};\n告警源:$event.metadata.resource_provider;\n资源类型:$event.metadata.resource_type;\n资源标识:${resources};\n统计类型:关键词统计;\n表达式:$event.annotations.condition_expression;\n当前值: $event.annotations.current_value;\n统计周期:$event.annotations.frequency;\n关键词告警特有变量:\n查询时间:$event.annotations.results[0].time;\n查询日志:$event.annotations.results[0].raw_results;\nsql告警特有变量:\n日志组/流名称:$event.annotations.results[0].resource_id;\n查询语句:$event.annotations.results[0].sql;\n查询时间:$event.annotations.results[0].time;\n查询URL:$event.annotations.results[0].url;\n查询日志:$event.annotations.results[0].raw_results; \n告警级别:${event_severity};\n发生时间:${starts_at};\n告警源:$event.metadata.resource_provider;\n资源类型:$event.metadata.resource_type;\n资源标识:${resources};\n统计类型:关键词统计;\n表达式:$event.annotations.condition_expression;\n当前值: $event.annotations.current_value;\n统计周期:$event.annotations.frequency;\n关键词告警特有变量:\n查询时间:$event.annotations.results[0].time;\n查询日志:$event.annotations.results[0].raw_results;\nsql告警特有变量:\n日志组/流名称:$event.annotations.results[0].resource_id;\n查询语句:$event.annotations.results[0].sql;\n查询时间:$event.annotations.results[0].time;\n查询URL:$event.annotations.results[0].url;\n查询日志:$event.annotations.results[0].raw_results; \n\n>变量后面的分号\";\"为英文符号,必须添加,否则模板会出现替换失败的情况。\n\n**取值范围:** \n不涉及。","type":"string"},"sendType":{"description":"**参数解释:** \n当消息模板类型为webhook时生效,决定该消息的渲染方式。\n**取值范围:** \n- HTML\n- JSON","type":"string"},"sub_type":{"description":"**参数解释:** \n消息模板的通知渠道。\n**取值范围:** \n- sms\n- dingding\n- wechat\n- webhook\n- email\n- voice\n- feishu\n- welink","type":"string"},"topic":{"description":"**参数解释:** \n邮件主题。通知渠道为邮件时生效,即sub_type=email。\n**取值范围:** \n不涉及。","type":"string"},"version":{"description":"**参数解释:** \n消息模板的适用版本。\n**取值范围:** \n v1:标识为LTS的消息模板。","type":"string"}},"type":"object"},"UpdateNotificationTemplateRequestBody":{"properties":{"desc":{"description":"模板描述,非必填,只含有汉字、数字、字母、下划线不能以下划线开头和结尾,长度为0--1024","maxLength":1024,"minLength":0,"type":"string"},"locale":{"description":"语言,必填,目前可填zh-cn和en-us","enum":["zh-cn","en-us"],"type":"string"},"name":{"description":"通知规则名称,必填,只含有汉字、数字、字母、下划线、中划线,不能以下划线等特殊符号开头和结尾,长度为 1 - 100,创建后不可修改","maxLength":100,"minLength":1,"type":"string"},"source":{"description":"模板来源,目前必填为LTS,否则会筛选不出来","maxLength":3,"minLength":3,"type":"string"},"templates":{"description":"模板正文,为一个数组","items":{"$ref":"#/definitions/UpdateSubTemplate"},"type":"array"},"type":{"description":"保留字段,非必填","items":{"type":"string"},"type":"array"}},"required":["name","source","locale","templates"],"type":"object"},"UpdateSubTemplate":{"properties":{"content":{"description":"子模板正文,$符号后所跟变量仅支持以下变量,根据不同告警类型(关键词告警和sql告警),所支持的变量亦不相同。目前两种告警类型有共同变量如下:\n\n告警级别:${event_severity};\n发生时间:${starts_at};\n告警源:$event.metadata.resource_provider;\n资源类型:$event.metadata.resource_type;\n资源标识:${resources};\n统计类型:关键词统计;\n表达式:$event.annotations.condition_expression;\n当前值: $event.annotations.current_value;\n统计周期:$event.annotations.frequency;\n关键词告警特有变量:\n查询时间:$event.annotations.results[0].time;\n查询日志:$event.annotations.results[0].raw_results;\nsql告警特有变量:\n日志组/流名称:$event.annotations.results[0].resource_id;\n查询语句:$event.annotations.results[0].sql;\n查询时间:$event.annotations.results[0].time;\n查询URL:$event.annotations.results[0].url;\n查询日志:$event.annotations.results[0].raw_results; \n\n>变量后面的分号\";\"为英文符号,必须添加,否则模板会出现替换失败的情况。","type":"string"},"sub_type":{"description":"模板子类型,只支持以下类型:sms,dingding(钉钉),wechat(微信),webhook,email","enum":["sms","dingding","wechat","webhook","email","voice"],"type":"string"},"topic":{"description":"邮件主题,只有sub_type=email时生效","type":"string"}},"required":["sub_type","content"],"type":"object"}},"description":null,"group_id":"8f58e31c452f407885dec582b8542111","host":"lts.cn-north-4.myhuaweicloud.com","id":"bc1f01f7ba4d482d928b5a8b52a00e21","info_version":"v2","method":"put","name":"UpdateNotificationTemplate","parameters":{},"paths":{"/v2/{project_id}/{domain_id}/lts/events/notification/templates":{"put":{"description":"该接口用于修改通知模板,根据名称进行修改。","operationId":"UpdateNotificationTemplate","parameters":[{"description":"项目ID,获取方式请参见:获取账号ID、项目ID、日志组ID、日志流ID(https://support.huaweicloud.com/api-lts/lts_api_0006.html)。","in":"path","maxLength":32,"minLength":32,"name":"project_id","required":true,"type":"string"},{"description":"账号id,获取方式请参见:获取账号ID、项目ID、日志组ID、日志流ID(https://support.huaweicloud.com/api-lts/lts_api_0006.html)。","in":"path","maxLength":32,"minLength":32,"name":"domain_id","required":true,"type":"string"},{"description":"从IAM服务获取的用户Token,获取方式请参见:获取用户Token(https://support.huaweicloud.com/api-iam/iam_30_0001.html)","in":"header","maxLength":2000,"minLength":1000,"name":"X-Auth-Token","pattern":"X-Auth-Token","required":true,"type":"string"},{"default":"application/json;charset=UTF-8","description":"该字段填为:application/json;charset=UTF-8。","in":"header","maxLength":30,"minLength":30,"name":"Content-Type","required":true,"type":"string"},{"description":"创建关键字告警的请求体","in":"body","name":"UpdateNotificationTemplateRequestBody","required":true,"schema":{"$ref":"#/definitions/UpdateNotificationTemplateRequestBody"}}],"produces":["application/json"],"responses":{"201":{"description":"请求响应成功。","schema":{"$ref":"#/definitions/CreateNotificationTemplateResBody"}},"400":{"description":"BadRequest 非法请求 建议根据error_msg直接修改该请求。","examples":{"application/json":{"error_code":"LTS.2016","error_msg":"desc is invalid!"}},"schema":{"$ref":"#/definitions/ErrorUpResultInfo1"}},"500":{"description":"表明服务端能被请求访问到,但是服务内部出错。","examples":{"application/json":{"error_code":"LTS.2016","error_msg":"Failed to update notification template"}},"schema":{"$ref":"#/definitions/ErrorUpResultInfo1"}}},"summary":"修改消息模板","tags":["消息模板管理"],"x-is-registered":"Y","x-request-examples-1":"/v2/{project_id}/{domain_id}/lts/events/notification/templates\n{\"name\":\"关键词模板111\",\"desc\":\"关键字中文模板\",\"type\":[],\"source\":\"LTS\",\"locale\":\"zh-cn\",\"templates\":[{\"sub_type\":\"sms\",\"content\":\"告警级别:${event_severity};\\n发生时间:${starts_at};\\n资源标识:${resources};\\n统计类型:关键词统计;\\n表达式:$event.annotations.condition_expression;\\n当前值: $event.annotations.current_value;\\n统计周期:$event.annotations.frequency;\"},{\"sub_type\":\"dingding\",\"content\":\"告警级别:${event_severity};\\n发生时间:${starts_at};\\n资源标识:${resources};\\n统计类型:关键词统计;\\n表达式:$event.annotations.condition_expression;\\n当前值: $event.annotations.current_value;\\n统计周期:$event.annotations.frequency;\"},{\"sub_type\":\"wechat\",\"content\":\"告警级别:${event_severity};\\n发生时间:${starts_at};\\n资源标识:${resources};\\n统计类型:关键词统计;\\n表达式:$event.annotations.condition_expression;\\n当前值: $event.annotations.current_value;\\n统计周期:$event.annotations.frequency;\"},{\"sub_type\":\"webhook\",\"content\":\"告警级别:${event_severity};\\n发生时间:${starts_at};\\n资源标识:${resources};\\n统计类型:关键词统计;\\n表达式:$event.annotations.condition_expression;\\n当前值: $event.annotations.current_value;\\n统计周期:$event.annotations.frequency;\"},{\"sub_type\":\"email\",\"content\":\"告警级别:${event_severity};\\n发生时间:${starts_at};\\n告警源:$event.metadata.resource_provider;\\n资源类型:$event.metadata.resource_type;\\n资源标识:${resources};\\n统计类型:关键词统计;\\n表达式:$event.annotations.condition_expression;\\n当前值: $event.annotations.current_value;\\n统计周期:$event.annotations.frequency;\\n查询时间:$event.annotations.results[0].time;\\n查询日志:$event.annotations.results[0].raw_results;\"}]}","x-request-examples-text-1":"/v2/{project_id}/{domain_id}/lts/events/notification/templates\n{\"name\":\"关键词模板111\",\"desc\":\"关键字中文模板\",\"type\":[],\"source\":\"LTS\",\"locale\":\"zh-cn\",\"templates\":[{\"sub_type\":\"sms\",\"content\":\"告警级别:${event_severity};\\n发生时间:${starts_at};\\n资源标识:${resources};\\n统计类型:关键词统计;\\n表达式:$event.annotations.condition_expression;\\n当前值: $event.annotations.current_value;\\n统计周期:$event.annotations.frequency;\"},{\"sub_type\":\"dingding\",\"content\":\"告警级别:${event_severity};\\n发生时间:${starts_at};\\n资源标识:${resources};\\n统计类型:关键词统计;\\n表达式:$event.annotations.condition_expression;\\n当前值: $event.annotations.current_value;\\n统计周期:$event.annotations.frequency;\"},{\"sub_type\":\"wechat\",\"content\":\"告警级别:${event_severity};\\n发生时间:${starts_at};\\n资源标识:${resources};\\n统计类型:关键词统计;\\n表达式:$event.annotations.condition_expression;\\n当前值: $event.annotations.current_value;\\n统计周期:$event.annotations.frequency;\"},{\"sub_type\":\"webhook\",\"content\":\"告警级别:${event_severity};\\n发生时间:${starts_at};\\n资源标识:${resources};\\n统计类型:关键词统计;\\n表达式:$event.annotations.condition_expression;\\n当前值: $event.annotations.current_value;\\n统计周期:$event.annotations.frequency;\"},{\"sub_type\":\"email\",\"content\":\"告警级别:${event_severity};\\n发生时间:${starts_at};\\n告警源:$event.metadata.resource_provider;\\n资源类型:$event.metadata.resource_type;\\n资源标识:${resources};\\n统计类型:关键词统计;\\n表达式:$event.annotations.condition_expression;\\n当前值: $event.annotations.current_value;\\n统计周期:$event.annotations.frequency;\\n查询时间:$event.annotations.results[0].time;\\n查询日志:$event.annotations.results[0].raw_results;\"}]}","x-request-examples-url-1":"PUT https://{endpoint}/v2/{project_id}/{domain_id}/lts/events/notification/templates","x-support-sdk":"Y"}}},"product_short":"LTS","region_id":"cn-north-4","schemes":["HTTPS"],"security_definitions":null,"summary":"修改消息模板","tags":"消息模板管理","uri":null,"version":"2.0"}