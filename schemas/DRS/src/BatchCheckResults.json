{"base_path":"/","components":null,"consumes":"[\"application/json\"]","definitions":{"BatchQueryPrecheckResultReq":{"description":"批量查询预检查结果请求体","properties":{"jobs":{"description":"批量查询预检查结果请求列表。\n约束:不能包含空对象。集合中的元素取值严格匹配UUID规则。任务id不能重复。","items":{"description":"","type":"string"},"type":"array"}},"required":["jobs"]},"BatchQueryPrecheckResultResp":{"description":"批量查询预检查结果返回体","properties":{"count":{"description":"总记录数。","format":"int32","type":"integer"},"results":{"description":"批量查询预检查结果响应体集合。","items":{"$ref":"#/definitions/QueryPreCheckResp","description":"获取预检查结果返回体"},"type":"array"}}},"PrecheckFailSubJobVO":{"description":"预检查失败子任务信息体","properties":{"check_result":{"description":"检查结果。","type":"string"},"id":{"description":"预检查失败子任务id。","type":"string"},"name":{"description":"预检查失败子任务名称。","type":"string"}}},"PrecheckResult":{"description":"预检查结果信息体","properties":{"data":{"description":"加密的数据。","type":"string"},"failed_reason":{"description":"失败原因。","type":"string"},"failed_sub_jobs":{"description":"失败的子任务信息。","items":{"$ref":"#/definitions/PrecheckFailSubJobVO","description":"子任务预检查失败项信息体"},"type":"array"},"group":{"description":"检查项分组","type":"string"},"item":{"description":"检查项。","type":"string"},"raw_error_msg":{"description":"行错误信息。","type":"string"},"result":{"description":"检查结果","enum":["PASSED","ALARM","FAILED"],"type":"string"}}},"QueryPreCheckResp":{"description":"获取预检查结果返回体","properties":{"error_code":{"description":"任务错误码。","type":"string"},"error_msg":{"description":"错误信息","type":"string"},"job_direction":{"description":"迁移方向。\n- up-入云 灾备场景时对应本云为备\n- down-出云 灾备场景时对应本云为主\n- non-dbs-自建","enum":["up","down","non-dbs"],"type":"string"},"precheck_id":{"description":"预检查id。","type":"string"},"precheck_result":{"description":"预检查各项结果。","items":{"$ref":"#/definitions/PrecheckResult"},"type":"array"},"process":{"description":"预检查进度百分比。","type":"string"},"rds_instance_id":{"description":"RDS实例id。","type":"string"},"result":{"description":"返回的预检查结果是否通过。true表示预检查通过,通过后才可进行启动任务。","type":"boolean"},"total_passed_rate":{"description":"预检查通过百分比。","type":"string"}},"type":"object"}},"description":null,"group_id":"506538835790436b8e209e5a6684d485","host":"drs.cn-north-4.myhuaweicloud.com","id":"c29d4191a4f64b00b5a55fff92b80db3","info_version":"v3","method":"post","name":"BatchCheckResults","parameters":{},"paths":{"/v3/{project_id}/jobs/batch-precheck-result":{"post":{"description":"批量查询任务的预检查结果。","operationId":"BatchCheckResults","parameters":[{"description":"租户在某一region下的project ID。","in":"path","name":"project_id","required":true,"type":"string","x-order":1},{"description":"从IAM服务获取的用户Token","in":"header","name":"X-Auth-Token","required":true,"type":"string","x-order":2},{"default":"en-us","description":"请求语言类型","enum":["en-us","zh-cn"],"in":"header","name":"X-Language","required":false,"type":"string","x-example":"en-us","x-order":3},{"default":"application/json","description":"指定类型为application/json。","in":"header","name":"Content-Type","required":true,"type":"string","x-example":"application/json","x-order":4},{"description":"批量查询预检查结果请求列表。\n约束:\n- 不能包含空对象。\n- 集合中的元素取值严格匹配UUID规则。\n- 任务id不能重复。","in":"body","name":"requestBody","required":true,"schema":{"$ref":"#/definitions/BatchQueryPrecheckResultReq"},"x-order":5}],"responses":{"200":{"description":"OK","examples":{"application/json":{"count":1,"results":[{"job_direction":"up","precheck_id":"140b5236-88ad-43c8-811c-1268453jb101","precheck_result":[{"data":"{\"diskSizeTimes\":\"1.5\",\"dstVolumeSize\":\"37660000000\",\"srcIndexSize\":0,\"size\":\"0\",\"srcIndexAmount\":0}","group":"db_disk_size","item":"dstDbDiskSize","result":"PASSED"},{"group":"db_params","item":"checkIncreSrcDbExistedInDstDb","result":"PASSED"},{"group":"db_params","item":"dbCharacterSetConsistency","result":"PASSED"},{"group":"db_params","item":"dbClockConsistency","result":"PASSED"},{"group":"db_params","item":"dbCollationServerConsistency","result":"PASSED"},{"group":"db_params","item":"dbIsolationLevelConsistency","result":"PASSED"},{"group":"db_params","item":"dbParamConsistency","result":"PASSED"},{"group":"db_params","item":"dbServerUuidConsistency","result":"PASSED"},{"group":"db_params","item":"dstMaxAllowedPacketCheck","result":"PASSED"},{"group":"db_params","item":"hasForeignKeyOnUnselectedTable","result":"PASSED"},{"group":"db_params","item":"innodbStrictModeConsistency","result":"PASSED"},{"group":"db_params","item":"isUserRequireSslLink","result":"PASSED"},{"group":"db_params","item":"sqlModeConsistency","result":"PASSED"},{"group":"db_params","item":"sqlModeNoEngine","result":"PASSED"},{"group":"db_params","item":"srcBinlogFormatCheck","result":"PASSED"},{"group":"db_params","item":"srcBinlogRowImageCheck","result":"PASSED"},{"group":"db_params","item":"srcDbBinlogExpireLogsDays","result":"PASSED"},{"group":"db_params","item":"srcDbBinlogIsOff","result":"PASSED"},{"group":"db_params","item":"srcDbExistUnsupportEngineTable","result":"PASSED"},{"group":"db_params","item":"srcDbIndexKeyLength","result":"PASSED"},{"group":"db_params","item":"srcDbNameContainsUnsupportedSymbols","result":"PASSED"},{"group":"db_params","item":"srcDbServerIdCheck","result":"PASSED"},{"group":"db_params","item":"srcDstTableNameCaseSensitiveCheck","result":"PASSED"},{"group":"db_params","item":"srcHasNoPkTableWhenTgtHasInvisiblePk","result":"PASSED"},{"group":"db_params","item":"srcRoutinesWithoutPrivilegeCheck","result":"PASSED"},{"group":"db_params","item":"srcTableNameContainsNonAscii","result":"PASSED"},{"group":"db_params","item":"srcTriggerAndEventCheck","result":"PASSED"},{"group":"db_params","item":"srcViewNameContainsNonAscii","result":"PASSED"},{"group":"db_params","item":"srclogSlaveUpdatesCheck","result":"PASSED"},{"group":"db_params","item":"userRequirementIsEnoughForDefiner","result":"PASSED"},{"group":"db_params","item":"userSelectObjectsCheck","result":"PASSED"},{"data":"","failed_reason":"","group":"db_target_status","item":"dstStatusCheck","result":"PASSED"},{"group":"db_user_privilege","item":"dstDbPrivilegesIsEnough","result":"PASSED"},{"group":"db_user_privilege","item":"srcDbPrivilegesIsEnoughForIncre","result":"PASSED"},{"group":"db_version","item":"dbVersionMeetRequirement","result":"PASSED"},{"group":"db_version","item":"dstDbVersionSupport","result":"PASSED"},{"group":"db_version","item":"srcDbVersionSupport","result":"PASSED"},{"group":"network","item":"dstDbConnection","result":"PASSED"},{"group":"network","item":"srcDbConnection","result":"PASSED"}],"process":"100%","rds_instance_id":"e05a3679efe241d8b5dee80b17c1a863in01","result":true,"total_passed_rate":"100%"}]}},"schema":{"$ref":"#/definitions/BatchQueryPrecheckResultResp"}},"400":{"description":"Bad Request"}},"summary":"批量查询预检查结果","tags":["公共接口管理"],"x-constraint":"","x-is-registered":"Y","x-name":"批量查询预检查结果","x-order":7,"x-publishpath":"BatchCheckResults","x-request-examples-1":{"jobs":["a281f62f-4631-45d6-a2d3-679a9f4jb105"]},"x-request-examples-2":{"jobs":["140b5236-88ad-43c8-811c-1268453jb101"]},"x-request-examples-description-1":"实时迁移DDS查询预检查结果","x-request-examples-description-2":"实时迁移MySQL查询预检查结果","x-request-examples-text-1":{"jobs":["a281f62f-4631-45d6-a2d3-679a9f4jb105"]},"x-request-examples-text-2":{"jobs":["140b5236-88ad-43c8-811c-1268453jb101"]},"x-request-examples-url-1":"https://{EndPoint}/v3/054ba152d480d55b2f5dc0069e7ddef0/jobs/batch-precheck-result","x-request-examples-url-2":"https://{EndPoint}/v3/054ba152d480d55b2f5dc0069e7ddef0/jobs/batch-precheck-result","x-scope":"Commercial","x-support-sdk":"Y","x-version":"v3"}}},"product_short":"DRS","region_id":"cn-north-4","schemes":["HTTPS"],"security_definitions":null,"summary":"批量查询预检查结果","tags":"公共接口管理","uri":null,"version":"2.0"}