{"base_path":"/","components":null,"consumes":"[\"application/json\"]","definitions":{"BaseEndpoint":{"description":"数据库基本信息体。","properties":{"db_name":{"description":"指定数据库名称。例如:\n- oracle:serviceName.orcl。","type":"string"},"db_password":{"description":"数据库密码。","example":"******","type":"string"},"db_port":{"description":"数据库端口。\n\n约束:输入范围为1-65535之间的整数。","example":"3306","type":"string"},"db_user":{"description":"数据库用户名。","example":"root","type":"string"},"endpoint_name":{"description":"数据库场景类型。取值:\n- oracle:云下自建Oracle数据库。\n- ecs_oracle:华为云ECS自建Oracle数据库。\n- cloud_gaussdbv5:华为云数据库GaussDB分布式。\n- mysql:他云/本地自建MySQL数据库。\n- ecs_mysql:华为云ECS自建MySQL数据库。\n- cloud_mysql:华为云数据库RDS for MySQL。\n- redis:云下自建Redis数据。\n- ecs_redis:华为云ECS自建Redis数据。\n- rediscluster:云下自建Redis集群数据库。\n- ecs_rediscluster:华为云ECS自建Redis集群数据库。\n- cloud_gaussdb_redis:华为云数据库GeminiDB Redis。\n- postgresql: 云下自建PostgreSQL数据库。\n- ecs_postgresql: 华为云ECS自建PostgreSQL数据库。\n- cloud_postgresql: 华为云数据库RDS for PostgreSQL。\n- mongodb: 云下自建MongoDB数据库。\n- ecs_mongodb: 华为云ECS自建MongoDB数据库。\n- cloud_mongodb: 华为云文档数据库服务DDS。","enum":["oracle","ecs_oracle","cloud_gaussdbv5","mysql","ecs_mysql","cloud_mysql","redis","ecs_redis","rediscluster","ecs_rediscluster","cloud_gaussdb_redis","postgresql","ecs_postgresql","cloud_postgresql","mongodb","ecs_mongodb","cloud_mongodb"],"type":"string"},"id":{"description":"数据库信息ID。","type":"string"},"instance_id":{"description":"华为云数据库实例ID。","type":"string"},"instance_name":{"description":"华为云数据库实例名称。","type":"string"},"ip":{"description":"数据库IP。\n约束:\n- 数据库为自建MongoDB时,数据库IP与端口之间用“:”英文冒号拼接,多个值之间请用“,”英文逗号隔开,最多支持填写3个IP地址或域名。\n- 数据库为DDS实例时,数据库IP与端口之间用“:”英文冒号拼接,多个IP端口之间请用“,”英文逗号分隔。\n- 数据库为Redis集群时,请填写源端Redis集群所有分片的IP地址和对应端口,数据库IP与端口之间用“:”英文冒号拼接,多个IP端口之间请用“,”英文逗号分隔,并且推荐填写集群分片的Slave节点的IP地址。最多支持填写32个IP地址或域名,多个值之间请用英文逗号隔开。\n示例:\n- MySQL:ip\n- MongoDB:ip:port,ip:port,ip:port\n- DDS:ip:port,ip:port\n - Redis集群:ip:port,ip:port","example":"MySQL:ip;MongoDB:ip:port,ip:port,ip:port;DDS:ip:port,ip:port;Redis集群:ip:port,ip:port;","type":"string"},"source_sharding":{"description":"物理源库信息。","items":{"$ref":"#/definitions/BaseEndpoint"},"type":"array"}},"required":["endpoint_name","db_user","db_password"],"type":"object"},"CloudVpcInfo":{"description":"数据库实例所在VPC,子网,安全组等信息,当数据库实例类型为ecs(华为云ECS自建数据库),cloud(华为云数据库)时为必填项。","properties":{"security_group_id":{"description":"数据库实例所在的安全组ID,获取方法如下:\n方法1:登录虚拟私有云服务的控制台界面,在安全组的详情页面查找安全组ID。\n方法2:通过虚拟私有云服务的API接口查询,具体操作可参考查询安全组列表。","example":"2a1f7fc8-3307-42a7-aa6f-42c8b9b8f8c5","type":"string"},"subnet_id":{"description":"数据库实例所在子网ID,获取方法如下:\n方法1:登录虚拟私有云服务的控制台界面,单击VPC下的子网,进入子网详情页面,查找网络ID。\n方法2:通过虚拟私有云服务的API接口查询,具体操作可参考查询子网列表。","example":"54886391-4bf0-443a-8145-e2bfacfdf5ca","type":"string"},"vpc_id":{"description":"数据库实例所在的虚拟私有云ID,获取方法如下:\n方法1:登录虚拟私有云服务的控制台界面,在虚拟私有云的详情页面查找VPC ID。\n方法2:通过虚拟私有云服务的API接口查询,具体操作可参考查询VPC列表。","example":"ab155e40-35f2-4463-b22b-c67a56e2fbb9","type":"string"}},"required":["vpc_id","subnet_id"]},"ConnectionConfig":{"properties":{"driver_name":{"description":"驱动程序名称。","maxLength":128,"minLength":0,"type":"string"}},"type":"object"},"ConnectionResp":{"description":"连接响应体。","properties":{"config":{"$ref":"#/definitions/ConnectionConfig","description":"连接的配置项。"},"connection_id":{"description":"连接ID。","maxLength":255,"minLength":1,"type":"string"},"create_time":{"description":"连接创建时间,格式为时间戳。","exclusiveMaximum":true,"exclusiveMinimum":true,"format":"int64","maximum":2147483647,"minimum":0,"type":"integer"},"db_type":{"description":"连接类型。","maxLength":128,"minLength":1,"type":"string"},"description":{"description":"描述。","maxLength":512,"minLength":0,"type":"string"},"endpoint":{"$ref":"#/definitions/BaseEndpoint","description":"数据库基本信息。"},"enterprise_project_id":{"description":"企业项目ID。","maxLength":128,"minLength":0,"type":"string"},"name":{"description":"连接名称。","maxLength":128,"minLength":1,"type":"string"},"ssl":{"$ref":"#/definitions/EndpointSslConfig","description":"数据库SSL证书信息。"},"vpc":{"$ref":"#/definitions/CloudVpcInfo","description":"数据库实例所在VPC,子网,安全组等信息。"}},"required":["connection_id","name","create_time","db_type","endpoint"],"type":"object"},"EndpointSslConfig":{"description":"数据库SSL证书信息体。如果数据库启用了SSL安全连接,请确保相关配置正确,并输入SSL证书相关参数,否则无需填写此参数。","properties":{"ssl_cert_check_sum":{"description":"SSL证书内容checksum值,后端校验,源库安全连接必选。","type":"string"},"ssl_cert_key":{"description":"SSL证书内容,用base64加密。","type":"string"},"ssl_cert_name":{"description":"SSL证书名字。","type":"string"},"ssl_cert_password":{"description":"SSL证书密码,证书文件后缀为.p12时必填。","type":"string"},"ssl_link":{"description":"是否SSL安全连接。如果数据库启用了SSL安全连接,参数值为true。","type":"boolean"}},"type":"object"},"ErrorResp":{"description":"请求失败时返回的错误对象响应体。","properties":{"error_code":{"description":"错误码。","example":"DRS.00000000","maxLength":12,"minLength":12,"type":"string"},"error_msg":{"description":"错误描述。","example":"Success","maxLength":512,"minLength":1,"type":"string"}},"required":["error_code","error_msg"],"type":"object"},"QueryConnectionsResp":{"description":"连接列表响应体。","properties":{"connections":{"description":"连接信息列表。","items":{"$ref":"#/definitions/ConnectionResp"},"maxItems":65535,"minItems":0,"type":"array"},"count":{"description":"列表中的项目总数,与分页无关。","format":"int32","maximum":65535,"minimum":0,"type":"integer"}},"required":["connections","count"],"type":"object"}},"description":null,"group_id":"506538835790436b8e209e5a6684d485","host":"drs.cn-north-4.myhuaweicloud.com","id":"2479add0691549cf9040d2153505044d","info_version":"v5","method":"get","name":"ListConnections","parameters":{},"paths":{"/v5/{project_id}/connections":{"get":{"description":"查询连接列表,可根据连接类型进行查询。","operationId":"ListConnections","parameters":[{"description":"租户在某一Region下的Project ID。 获取方法请参见[获取项目ID。](https://support.huaweicloud.com/api-drs/drs_api_0106.html)","in":"path","maxLength":128,"minLength":1,"name":"project_id","required":true,"type":"string"},{"description":"发送的实体的MIME类型。推荐用户默认使用application/json,如果API是对象、镜像上传等接口,媒体类型可按照流类型的不同进行确定。","in":"header","maxLength":128,"minLength":1,"name":"Content-Type","required":true,"type":"string"},{"description":"从IAM服务获取的用户Token。 用户Token也就是调用获取用户Token接口的响应值,该接口是唯一不需要认证的接口。 请求响应成功后在响应消息头中包含的“X-Subject-Token”的值即为Token值。","in":"header","maxLength":30000,"minLength":1,"name":"X-Auth-Token","required":true,"type":"string"},{"description":"请求语言类型。","in":"header","maxLength":64,"minLength":1,"name":"X-Language","required":false,"type":"string"},{"description":"连接ID。","in":"query","maxLength":128,"minLength":0,"name":"connection_id","required":false,"type":"string"},{"description":"连接类型。\n- mysql\n- oracle\n- postgresql\n- mongodb","enum":["mysql","oracle","postgresql","mongodb"],"in":"query","name":"db_type","required":false,"type":"string"},{"description":"连接名称,忽略大小写。","in":"query","maxLength":128,"minLength":0,"name":"name","required":false,"type":"string"},{"description":"云上数据库实例ID。","in":"query","maxLength":128,"minLength":0,"name":"inst_id","required":false,"type":"string"},{"description":"连接IP。","in":"query","maxLength":512,"minLength":0,"name":"ip","required":false,"type":"string"},{"description":"连接描述。","in":"query","maxLength":128,"minLength":0,"name":"description","required":false,"type":"string"},{"description":"时间区间用“,”分割。示例:2024-05-17T07:46:00.414Z,2024-05-20T07:46:00.999Z。","in":"query","maxLength":128,"minLength":0,"name":"create_time","required":false,"type":"string"},{"description":"企业项目ID。","in":"query","maxLength":128,"minLength":0,"name":"enterprise_project_id","required":false,"type":"string"},{"description":"偏移量,默认值为0,表示查询该偏移量后面的记录。","exclusiveMaximum":true,"exclusiveMinimum":true,"format":"int32","in":"query","maximum":65535,"minimum":0,"name":"offset","required":false,"type":"integer"},{"description":"查询返回记录的数量限制,默认值为10。","exclusiveMaximum":true,"exclusiveMinimum":true,"format":"int32","in":"query","maximum":65535,"minimum":1,"name":"limit","required":false,"type":"integer"},{"description":"值为“true”时会使得offset和limit参数失效并返回所有记录。","in":"query","name":"fetch_all","required":false,"type":"boolean"},{"description":"返回结果按该关键字排序,默认为“created_at”。","in":"query","maxLength":128,"minLength":0,"name":"sort_key","required":false,"type":"string"},{"description":"降序或升序(分别对应desc和asc,默认为“desc”)。","in":"query","maxLength":128,"minLength":0,"name":"sort_dir","required":false,"type":"string"}],"responses":{"200":{"description":"OK","examples":{"application/json":{"connections":[{"connection_id":"835e1d79-24ac-411d-a1c8-22c000280659","create_time":1716879012121,"db_type":"mysql","description":"description","endpoint":{"db_port":"3306","db_user":"root","endpoint_name":"mysql","ip":"127.0.0.1"},"enterprise_project_id":"0","name":"DRS-mysql","ssl":{"ssl_link":false}}],"count":1}},"schema":{"$ref":"#/definitions/QueryConnectionsResp"}},"400":{"description":"Bad Request","examples":{"application/json":{"error_code":"DRS.10000001","error_msg":"Failed."}},"schema":{"$ref":"#/definitions/ErrorResp"}}},"summary":"查询连接列表","tags":["连接管理"],"x-is-registered":"Y","x-order":1,"x-request-examples-description-1":"查询连接列表示例。","x-request-examples-url-1":"https://{endpoint}/v5/5237e10fe9aa4ad5b16b6a5245248314/connections?name=&ip=&type=&offset=0&limit=10&connection_id=75e4f531-13ff-48c7-bb2f-eb743e5fe26d","x-support-sdk":"Y"}}},"product_short":"DRS","region_id":"cn-north-4","schemes":["HTTPS"],"security_definitions":null,"summary":"查询连接列表","tags":"连接管理","uri":null,"version":"2.0"}