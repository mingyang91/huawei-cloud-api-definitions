{"base_path":"/","components":null,"consumes":"[\"application/json\"]","definitions":{"BatchCreateJobReq":{"description":"批量创建实时迁移任务请求体","properties":{"jobs":{"description":"创建任务请求体","items":{"$ref":"#/definitions/CreateJobReq","description":""},"type":"array"}},"required":["jobs"]},"BatchCreateJobResp":{"description":"批量创建任务返回体","properties":{"count":{"description":"总记录数。","format":"int32","type":"integer"},"results":{"description":"批量创建任务的响应体集合。","items":{"$ref":"#/definitions/CreateJobResp","description":""},"type":"array"}},"required":["count","results"]},"CreateJobReq":{"description":"创建任务请求体","properties":{"bind_eip":{"description":"是否绑定eip,网络类型为eip时必填且为true","example":true,"type":"boolean"},"charging_mode":{"description":"计费模式,不填默认为按需计费。\n取值范围:\n- period:包年包月。\n- on_demand:按需计费。","enum":["period","on_demand"],"type":"string"},"customize_sutnet_id":{"description":"DRS实例所在子网ID,对应目标库相同VPC下已创建的子网(subnet)的网络ID,UUID格式。","example":"352ad828-3467-4f03-987a-c55a5a9dd417","pattern":"[0-9a-z]{8}-[0-9a-z]{4}-[0-9a-z]{4}-[0-9a-z]{4}-[0-9a-z]{12}","type":"string"},"db_use_type":{"description":"迁移场景,migration-实时迁移,sync-实时同步,cloudDataGuard-实时灾备","enum":["migration","sync","cloudDataGuard"],"example":"migration","type":"string"},"description":{"description":"任务描述。\n **约束**:任务描述不能超过256位,且不能包含!<>&'\"\\特殊字符。","type":"string"},"engine_type":{"description":"引擎类型\n- mysql:MySQL到MySQL迁移,MySQL到MySQL同步\n- mongodb:MongoDB到DDS迁移\n- cloudDataGuard-mysql:MySQL到MySQL灾备\n- gaussdbv5:GaussDB同步\n- mysql-to-kafka:MySQL到Kafka同步\n- taurus-to-kafka:GaussDB(for MySQL)到Kafka同步\n- gaussdbv5ha-to-kafka:GaussDB主备版到Kafka同步\n- postgresql:PostgreSQL到PostgreSQL同步","enum":["mysql","mongodb","cloudDataGuard-mysql","gaussdbv5","postgresql","mysql-to-kafka","taurus-to-kafka","gaussdbv5ha-to-kafka"],"example":"mysql","type":"string"},"expired_days":{"description":"任务处于异常状态一段时间后,将会自动结束,单位为天。(范围14-100),不传默认为14天。","example":"14","type":"string"},"is_target_readonly":{"description":"指定目标实例是否限制为只读,MySQL迁移和灾备,且job_direction为up时设置有效。(灾备场景下,单主灾备且本云为备为必填且为true,不填默认设置为true)。","type":"boolean"},"job_direction":{"description":"迁移方向,up :入云 ,灾备场景时对应本云为备,down:出云,灾备场景时对应本云为主,non-dbs:自建","enum":["up","down","non-dbs"],"example":"up","type":"string"},"master_az":{"description":"主备任务主任务所在可用区code,可以通过查询规格未售罄的可用区接口获取\n- master_az和slave_az同时填写时生效\n- 目前支持mysql,gaussdbv5ha-to-kafka","example":"az2xahz","type":"string"},"multi_write":{"default":false,"description":"- db_use_type 是cloudDataGuard时,必填,灾备类型是双主灾备时 muti_write取值true, 否则为false。\n- db_use_type 是其他类型时,muti_write是非必选参数","example":false,"type":"boolean"},"name":{"description":"任务名称,约束:任务名称在4位到50位之间,不区分大小写,可以包含字母、数字、中划线或下划线,不能包括其他特殊字符。","example":"DRS-9228","maxLength":50,"minLength":4,"type":"string"},"net_type":{"description":"网络类型","enum":["vpn","vpc","eip"],"example":"eip","type":"string"},"node_num":{"description":"节点个数。MongoDB数据库时对应源端分片个数,源库为集群时必填,[1-32],MySQL双主灾备时会默认设置为2。","format":"int32","maximum":32,"minimum":1,"type":"integer"},"node_type":{"default":"high","description":"规格类型。","enum":["high"],"example":"high","type":"string"},"period_order":{"$ref":"#/definitions/PeriodOrderInfo","description":"包年包月信息。"},"product_id":{"description":"产品id。","type":"string"},"public_ip_list":{"description":"指定公网IP的信息","items":{"$ref":"#/definitions/PublicIpConfig"},"type":"array"},"slave_az":{"description":"主备任务备任务所在可用区code,可以通过查询规格未售罄的可用区接口获取\n- master_az和slave_az同时填写时生效\n- 目前支持mysql,gaussdbv5ha-to-kafka","example":"az2xahz","type":"string"},"source_endpoint":{"$ref":"#/definitions/Endpoint","description":"源库信息"},"sys_tags":{"description":"企业项目,不填默认为default,key值必须为_sys_enterprise_project_id,value为企业项目ID,只能有一个企业项目。","items":{"$ref":"#/definitions/ResourceTag"},"type":"array"},"tags":{"description":"标签信息。","items":{"$ref":"#/definitions/ResourceTag"},"type":"array"},"target_endpoint":{"$ref":"#/definitions/Endpoint","description":"目标库信息"},"task_type":{"description":"迁移模式,FULL_TRANS 全量,FULL_INCR_TRANS 全量+增量,INCR_TRANS 增量,灾备场景单主灾备仅支持全量加增量(FULL_INCR_TRANS)","enum":["FULL_TRANS","FULL_INCR_TRANS","INCR_TRANS"],"example":"FULL_INCR_TRANS","type":"string"}},"required":["db_use_type","name","engine_type","job_direction","net_type","node_type","source_endpoint","target_endpoint","task_type","customize_sutnet_id"],"type":"object"},"CreateJobResp":{"description":"创建任务响应体","properties":{"child_ids":{"description":"子任务ID,有子任务时返回该字段。","items":{"description":"","type":"string"},"type":"array"},"create_time":{"description":"创建时间,时间戳","example":"1599188556112","type":"string"},"error_code":{"description":"错误码","type":"string"},"error_msg":{"description":"错误信息","type":"string"},"id":{"description":"任务ID","example":"e11eaf8f-71ef-4fad-8890-aed7572ajb11","type":"string"},"name":{"description":"任务名称","example":"DRS-zltest1","type":"string"},"status":{"description":"任务状态","example":"CREATING","type":"string"}},"required":["id"]},"Endpoint":{"description":"数据库信息体","properties":{"az_code":{"description":"数据库所在可用区azCode","type":"string"},"cluster_mode":{"default":"Sharding4.0+","description":"MongDB集群4.0及以上版本,当集群实例无法获取到分片节点的IP时,source_endpoint中需要填写,值为:Sharding4.0+。","enum":["Sharding4.0+"],"example":"Sharding4.0+","type":"string"},"db_name":{"description":"服务名serviceName,源库为oracle场景时必填。约束:不能超过128位,不能包含!<>&'\"\\特殊字符。待还原数据库名称是指备份文件中包含的数据库名称,当您选择部分数据库恢复时,需要选择恢复一个或者多个数据库。","type":"string"},"db_password":{"description":"数据库密码。","type":"string"},"db_port":{"description":"数据库端口。约束:输入范围为1-65535之间的整数。","format":"int32","type":"integer"},"db_type":{"description":"数据库类型,测试连接之后修改调用时必填。","enum":["mysql","mongodb","gaussdbv5","postgresql","kafka","gaussdbv5ha","taurus"],"example":"mysql","type":"string"},"db_user":{"description":"数据库用户。","type":"string"},"inst_id":{"description":"RDS实例ID,数据库为RDS实例必填(灾备场景下job_direction为down时source_endpoint中该值为必填,job_direction为up时target_endpoint中该值为必填)。","example":"e05a3679efe241d8b5dee80b17c1a863in01","type":"string"},"inst_name":{"description":"RDS实例名称。","type":"string"},"ip":{"description":"数据库ip","type":"string"},"kafka_security_config":{"$ref":"#/definitions/KafkaSecurity","description":"Kafka安全认证相关,非安全认证不需要此参数。"},"mongo_ha_mode":{"description":"mongo ha模式。","type":"string"},"project_id":{"description":"RDS实例projectId","type":"string"},"region":{"description":"RDS实例所在Region,数据库为RDS实例时必填(灾备场景下job_direction为down时source_endpoint中该值为必填,job_direction为up时target_endpoint中该值为必填)。","example":"cn-xianhz-1","type":"string"},"safe_mode":{"description":"MRS集群运行模式,取值:\n- 0普通集群\n- 1安全集群","example":0,"format":"int32","type":"integer"},"security_group_id":{"description":"数据库所在的安全组id。","type":"string"},"ssl_cert_check_sum":{"description":"SSL证书内容checksum值,后端校验,源库安全连接必选。","type":"string"},"ssl_cert_key":{"description":"SSL证书内容,用base64加密","type":"string"},"ssl_cert_name":{"description":"SSL证书名字","type":"string"},"ssl_cert_password":{"description":"SSL证书密码,证书文件后缀为.p12","type":"string"},"ssl_link":{"description":"是否SSL安全连接。","type":"boolean"},"subnet_id":{"description":"数据库所在的子网id","type":"string"},"topic":{"description":"kafka topic名称","type":"string"},"vpc_id":{"description":"数据库所在的虚拟私有云id","type":"string"}},"type":"object"},"KafkaSecurity":{"description":"Kafka安全认证相关参数","properties":{"delegation_tokens":{"description":"是否为委托令牌鉴权,安全协议为SASL_SSL和SASL_PLAINTEXT时,SASL机制选择“SCRAM-SHA-256”或者“SCRAM-SHA-512”时生效。","type":"boolean"},"enable_key_store":{"description":"是否开启SSL双向认证。","type":"boolean"},"endpoint_algorithm":{"description":"主机名端点识别算法,指定通过服务端证书验证服务端主机名的端点识别算法,不填表示禁用主机名验证。对应Kafka字段:ssl.endpoint.identification.algorithm。","type":"string"},"key_password":{"description":"Keystore私钥密码,开启SSL双向认证时,set_private_key_password为true时必填。对应Kafka字段:ssl.key.password。","type":"string"},"key_store_key":{"description":"Keystore证书,开启SSL双向认证时需要。","type":"string"},"key_store_key_name":{"description":"Keystore证书名称,开启SSL双向认证时需要。","type":"string"},"key_store_password":{"description":"Keystore证书密码,证书设置了密码时需要。对应Kafka字段:ssl.keystore.password。","type":"string"},"sasl_mechanism":{"description":"SASL机制,用于客户端连接的SASL机制,对应Kafka字段:sasl.mechanism,支持以下四项,取值:\n- GSSAPI\n- PLAIN\n- SCRAM-SHA-256\n- SCRAM-SHA-512","type":"string"},"set_private_key_password":{"description":"是否设置Keystore私钥密码,默认为false。","type":"boolean"},"trust_store_key":{"description":"安全证书base64转码后的值,安全协议为SSL、SASL_SSL时必填。","type":"string"},"trust_store_key_name":{"description":"证书名称,安全协议为SSL、SASL_SSL时必填。","type":"string"},"trust_store_password":{"description":"证书密码,证书设置了密码时必填。","type":"string"},"type":{"description":"安全协议,安全认证时必填,对应Kafka字段:security.protocol。\n- PLAINTEXT:无安全认证方式,仅需输入IP和端口进行连接。\n- SASL_PLAINTEXT:使用SASL机制连接Kafka,需要设置SASL相关配置。\n- SSL:使用SSL加密方式连接Kafka,需要设置SSL相关配置。\n- SASL_SSL:使用SASL及SSL加密认证方式,需要设置SSL及SASL相关参数配置信息。","enum":["PLAINTEXT","SASL_PLAINTEXT","SASL_SSL","SSL"],"type":"string"}},"type":"object"},"PeriodOrderInfo":{"description":"包年/包月信息体","properties":{"is_auto_renew":{"description":"是否自动续订。\n取值范围:\n- 0:表示不自动续订。\n- 1:表示自动续订。","enum":[0,1],"format":"int32","type":"integer"},"period_num":{"description":"订购周期数。\n取值范围:\n- period_type=2(周期类型为月)时,取值为[1,9]。\n- period_type=3(周期类型为年)时,取值为[1,3]。","format":"int32","type":"integer"},"period_type":{"description":"订购周期类型。\n取值范围:\n- 2:表示周期类型为月。\n- 3:表示周期类型为年。","enum":[2,3],"format":"int32","type":"integer"}},"type":"object"},"PublicIpConfig":{"description":"租户公网IP信息","properties":{"id":{"description":"指定公网IP的ID","type":"string"},"public_ip":{"description":"指定公网IP","type":"string"},"type":{"description":"指定公网IP绑定任务的类型:\n- 主备任务:主是master,备是slave\n- 其他固定传master","enum":["master","slave"],"type":"string"}},"required":["id","public_ip","type"],"type":"object"},"ResourceTag":{"description":"标签信息体","properties":{"key":{"description":"标签键,最大长度36,只能包含字母、数字、下划线、中划线和中文,需要修改标签时填写。","type":"string"},"value":{"description":"标签值,最大长度43,只能包含字母、数字、下划线、中划线和中文,需要修改标签时填写。","type":"string"}}}},"description":null,"group_id":"506538835790436b8e209e5a6684d485","host":"drs.cn-north-4.myhuaweicloud.com","id":"1c2f6061c07c44a094614ed518a0a207","info_version":"v3","method":"post","name":"BatchCreateJobs","parameters":{},"paths":{"/v3/{project_id}/jobs/batch-creation":{"post":{"description":"根据请求参数不同,可以批量创建实时迁移、实时同步、实时灾备任务。","operationId":"BatchCreateJobs","parameters":[{"description":"从IAM服务获取的用户Token","in":"header","name":"X-Auth-Token","required":true,"type":"string","x-order":1},{"default":"en-us","description":"请求语言类型","enum":["en-us","zh-cn"],"in":"header","name":"X-Language","required":false,"type":"string","x-example":"en-us","x-order":2},{"default":"application/json","description":"Content-Type,指定类型为application/json。","in":"header","name":"Content-Type","required":true,"type":"string","x-example":"application/json","x-order":3},{"description":"租户在某一region下的project ID。","in":"path","name":"project_id","required":true,"type":"string","x-order":4},{"description":"批量创建任务请求体","in":"body","name":"requestBody","required":true,"schema":{"$ref":"#/definitions/BatchCreateJobReq"},"x-order":5}],"responses":{"202":{"description":"Accepted","examples":{"application/json":{"count":1,"results":[{"create_time":"1599188556112","id":"e11eaf8f-71ef-4fad-8890-aed7572ajb11","name":"DRS-9228","status":"CREATING"}]}},"schema":{"$ref":"#/definitions/BatchCreateJobResp"}},"400":{"description":"Bad Request"}},"summary":"批量创建任务","tags":["公共接口管理"],"x-constraint":"","x-is-registered":"Y","x-name":"批量创建任务","x-order":0,"x-publishpath":"BatchCreateJobs","x-request-examples-1":{"jobs":[{"bind_eip":true,"customize_sutnet_id":"faf513f3-7a88-4a5c-bec7-238699c29c17","db_use_type":"migration","engine_type":"mongodb","job_direction":"up","name":"DRS-3371","net_type":"eip","node_type":"high","source_endpoint":{"db_type":"mongodb"},"target_endpoint":{"db_type":"mongodb","inst_id":"3cadd5a0ef724f55ac7fa5bcb5f4fc5fin02","region":"cn-xianhz-1"},"task_type":"FULL_INCR_TRANS"}]},"x-request-examples-2":{"jobs":[{"bind_eip":true,"customize_sutnet_id":"0cf77cfb-3785-4065-a9c4-74b7bb2df071","db_use_type":"sync","engine_type":"mysql","job_direction":"up","master_az":"az2xahz","name":"DRS-test3","net_type":"eip","node_type":"high","slave_az":"az3xahz","source_endpoint":{"db_type":"mysql"},"target_endpoint":{"db_type":"mysql","inst_id":"64e8d7a31afa476ca85609a17af83765in01","project_id":"054ba152d480d55b2f5dc0069e7ddef0","region":"cn-xianhz-1"},"task_type":"FULL_INCR_TRANS"}]},"x-request-examples-3":{"jobs":[{"bind_eip":true,"customize_sutnet_id":"352ad828-3467-4f03-987a-c55a5a9dd417","db_use_type":"migration","engine_type":"mysql","is_target_readonly":false,"job_direction":"up","name":"DRS-9228","net_type":"eip","node_type":"high","source_endpoint":{"db_type":"mysql"},"target_endpoint":{"db_type":"mysql","inst_id":"e05a3679efe241d8b5dee80b17c1a863in01","region":"cn-xianhz-1"},"task_type":"FULL_INCR_TRANS"}]},"x-request-examples-4":{"jobs":[{"bind_eip":true,"customize_sutnet_id":"352ad828-3467-4f03-987a-c55a5a9dd417","db_use_type":"cloudDataGuard","engine_type":"cloudDataGuard-mysql","is_target_readonly":true,"job_direction":"up","multi_write":false,"name":"DRS-api-test","net_type":"eip","node_type":"high","source_endpoint":{"db_type":"mysql"},"target_endpoint":{"db_type":"mysql","inst_id":"e05a3679efe241d8b5dee80b17c1a863in01","project_id":"054ba152d480d55b2f5dc0069e7ddef0","region":"cn-xianhz-1"},"task_type":"FULL_INCR_TRANS"}]},"x-request-examples-description-1":"批量创建DDS副本实时迁移任务示例","x-request-examples-description-2":"创建MySQL主备任务","x-request-examples-description-3":"批量创建MySQL实时迁移任务请求示例","x-request-examples-description-4":"批量创建MySQL实时灾备任务,本云为备示例","x-request-examples-text-1":{"jobs":[{"bind_eip":true,"customize_sutnet_id":"faf513f3-7a88-4a5c-bec7-238699c29c17","db_use_type":"migration","engine_type":"mongodb","job_direction":"up","name":"DRS-3371","net_type":"eip","node_type":"high","source_endpoint":{"db_type":"mongodb"},"target_endpoint":{"db_type":"mongodb","inst_id":"3cadd5a0ef724f55ac7fa5bcb5f4fc5fin02","region":"cn-xianhz-1"},"task_type":"FULL_INCR_TRANS"}]},"x-request-examples-text-2":{"jobs":[{"bind_eip":true,"customize_sutnet_id":"0cf77cfb-3785-4065-a9c4-74b7bb2df071","db_use_type":"sync","engine_type":"mysql","job_direction":"up","master_az":"az2xahz","name":"DRS-test3","net_type":"eip","node_type":"high","slave_az":"az3xahz","source_endpoint":{"db_type":"mysql"},"target_endpoint":{"db_type":"mysql","inst_id":"64e8d7a31afa476ca85609a17af83765in01","project_id":"054ba152d480d55b2f5dc0069e7ddef0","region":"cn-xianhz-1"},"task_type":"FULL_INCR_TRANS"}]},"x-request-examples-text-3":{"jobs":[{"bind_eip":true,"customize_sutnet_id":"352ad828-3467-4f03-987a-c55a5a9dd417","db_use_type":"migration","engine_type":"mysql","is_target_readonly":false,"job_direction":"up","name":"DRS-9228","net_type":"eip","node_type":"high","source_endpoint":{"db_type":"mysql"},"target_endpoint":{"db_type":"mysql","inst_id":"e05a3679efe241d8b5dee80b17c1a863in01","region":"cn-xianhz-1"},"task_type":"FULL_INCR_TRANS"}]},"x-request-examples-text-4":{"jobs":[{"bind_eip":true,"customize_sutnet_id":"352ad828-3467-4f03-987a-c55a5a9dd417","db_use_type":"cloudDataGuard","engine_type":"cloudDataGuard-mysql","is_target_readonly":true,"job_direction":"up","multi_write":false,"name":"DRS-api-test","net_type":"eip","node_type":"high","source_endpoint":{"db_type":"mysql"},"target_endpoint":{"db_type":"mysql","inst_id":"e05a3679efe241d8b5dee80b17c1a863in01","project_id":"054ba152d480d55b2f5dc0069e7ddef0","region":"cn-xianhz-1"},"task_type":"FULL_INCR_TRANS"}]},"x-request-examples-url-1":"https://{endpoint}/v3/054ba152d480d55b2f5dc0069e7ddef0/jobs/batch-creation","x-request-examples-url-2":"https://{endpoint}/v3/054ba152d480d55b2f5dc0069e7ddef0/jobs/batch-creation","x-request-examples-url-3":"https://{endpoint}/v3/054ba152d480d55b2f5dc0069e7ddef0/jobs/batch-creation","x-request-examples-url-4":"https://{endpoint}/v3/054ba152d480d55b2f5dc0069e7ddef0/jobs/batch-creation","x-scope":"Commercial","x-support-sdk":"Y","x-version":"v3"}}},"product_short":"DRS","region_id":"cn-north-4","schemes":["HTTPS"],"security_definitions":null,"summary":"批量创建任务","tags":"公共接口管理","uri":null,"version":"2.0"}