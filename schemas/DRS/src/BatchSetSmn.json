{"base_path":"/","components":null,"consumes":"[\"application/json\"]","definitions":{"BatchImportSmnInfoReq":{"description":"录入、修改收件方式与信息请求体。","properties":{"alarm_notify_info":{"$ref":"#/definitions/BatchSetAlarmNotifyInfo","description":"收件方式与信息"},"jobs":{"description":"任务信息","items":{"$ref":"#/definitions/SelectedSetAlarmTaskReq"},"type":"array"}},"required":["jobs","alarm_notify_info"]},"BatchImportSmnResp":{"description":"批量录入收件方式返回体","properties":{"count":{"format":"int32","type":"integer"},"results":{"items":{"$ref":"#/definitions/ImportSmnResp"},"type":"array"}}},"BatchSetAlarmNotifyInfo":{"description":"修改收件方式与信息体","properties":{"alarm_to_user":{"description":"异常告警是否通知用户,不填默认为false","type":"boolean"},"delay_time":{"description":"订阅延迟时间","format":"int64","type":"integer"},"rpo_delay":{"description":"rpo延迟时间","format":"int64","type":"integer"},"rto_delay":{"description":"rto延迟时间","format":"int64","type":"integer"},"subscriptions":{"description":"手动输入手机号、邮箱模式时填写","items":{"$ref":"#/definitions/SubscriptionInfo"},"type":"array"},"topic_urn":{"description":"主题资源标识","type":"string"}}},"ImportSmnResp":{"description":"录入SMN返回体","properties":{"error_code":{"description":"错误码","type":"string"},"error_msg":{"description":"错误信息","type":"string"},"id":{"description":"任务ID","type":"string"},"status":{"description":"状态\n取值:success,failed","type":"string"}},"type":"object"},"SelectedSetAlarmTaskReq":{"description":"需要设置SMN的任务信息。","properties":{"engine_type":{"description":"引擎类型","type":"string"},"job_id":{"description":"任务ID","type":"string"},"status":{"description":"任务状态\nCREATING:创建中 - CREATE_FAILED:创建失败 - CONFIGURATION:配置中 - STARTJOBING:启动中 - WAITING_FOR_START:等待启动中 - START_JOB_FAILED:启动失败 - PAUSING:已暂停 - FULL_TRANSFER_STARTED:全量开始,灾备场景下为初始化 - FULL_TRANSFER_FAILED:全量失败,灾备场景下为初始化失败 - FULL_TRANSFER_COMPLETE:全量完成,灾备场景下为初始化完成 - INCRE_TRANSFER_STARTED:增量开始,灾备场景下为灾备中 - INCRE_TRANSFER_FAILED:增量失败,灾备场景下为灾备异常 - RELEASE_RESOURCE_STARTED:结束任务中 - RELEASE_RESOURCE_FAILED:结束任务失败 - RELEASE_RESOURCE_COMPLETE:已结束 - REBUILD_NODE_STARTED:故障恢复中 - REBUILD_NODE_FAILED:故障恢复失败 - CHANGE_JOB_STARTED:任务变更中 - CHANGE_JOB_FAILED:任务变更失败 - DELETED:已删除 - CHILD_TRANSFER_STARTING:再编辑子任务启动中 - CHILD_TRANSFER_STARTED:再编辑子任务迁移中 - CHILD_TRANSFER_COMPLETE:再编辑子任务迁移完成 - CHILD_TRANSFER_FAILED:再编辑子任务迁移失败 - RELEASE_CHILD_TRANSFER_STARTED:再编辑子任务结束中 - RELEASE_CHILD_TRANSFER_COMPLETE:再编辑子任务已结束 - NODE_UPGRADE_START:升级开始 - NODE_UPGRADE_COMPLETE:升级完成 - NODE_UPGRADE_FAILED:升级失败","type":"string"}},"required":["job_id","status","engine_type"],"type":"object"},"SubscriptionInfo":{"description":"收件方式与信息体","properties":{"endpoints":{"description":"短信或者邮件列表","example":["string"],"items":{"type":"string"},"type":"array"},"protocol":{"description":"收件方式,sms:短信,email:邮件","enum":["sms","email"],"example":"sms","type":"string"}}}},"description":null,"group_id":"506538835790436b8e209e5a6684d485","host":"drs.cn-north-4.myhuaweicloud.com","id":"a452eb364917466a8c65971f980f4814","info_version":"v3","method":"post","name":"BatchSetSmn","parameters":{},"paths":{"/v3/{project_id}/jobs/batch-set-smn":{"post":{"description":"批量设置异常通知,已结束的任务不支持设置。\n- 支持选择已有的SMN主题和手动输入手机号、邮箱两种方式,具体根据自己使用情况选择","operationId":"BatchSetSmn","parameters":[{"description":"租户在某一Region下的Project ID。","in":"path","name":"project_id","required":true,"type":"string"},{"description":"从IAM服务获取的用户Token。","in":"header","name":"X-Auth-Token","required":true,"type":"string"},{"description":"录入、修改收件方式与信息请求体","in":"body","name":"batchImportSmnInfoReq","required":true,"schema":{"$ref":"#/definitions/BatchImportSmnInfoReq"}},{"default":"en-us","description":"请求语言类型","enum":["en-us","zh-cn"],"in":"header","name":"X-Language","required":false,"type":"string"},{"default":"application/json","description":"Content-Type,指定类型为application/json。","in":"header","name":"Content-Type","required":true,"type":"string"}],"responses":{"200":{"description":"OK","examples":{"application/json":{"count":1,"results":[{"id":"ed3723ca-d34a-42b0-9829-0baef12jb20b","status":"success"}]}},"schema":{"$ref":"#/definitions/BatchImportSmnResp"}}},"summary":"批量配置异常通知","tags":["公共接口管理"],"x-is-registered":"Y","x-order":22,"x-request-examples-1":{"alarm_notify_info":{"delay_time":1200,"topic_urn":"urn:smn:cn-north-7:04f9aca88c00d3202fd4c01ed679daf0:drs-zw"},"jobs":[{"engine_type":"mysql","job_id":"c7296a3b-0d9f-424c-8d74-816ca62jb2a2","status":"CONFIGURATION"}]},"x-request-examples-2":{"alarm_notify_info":{"delay_time":100,"subscriptions":[{"endpoints":["18681846949"],"protocol":"sms"},{"endpoints":["123456@qq.com"],"protocol":"email"}]},"jobs":[{"engine_type":"oracle-to-dws","job_id":"2b36da5c-44a7-41af-8889-247b14djb2a2","status":"INCRE_TRANSFER_STARTED"}]},"x-request-examples-description-1":"关联已有的SMN主题方式","x-request-examples-description-2":"手动输入手机号、邮箱方式","x-request-examples-text-1":{"alarm_notify_info":{"delay_time":1200,"topic_urn":"urn:smn:cn-north-7:04f9aca88c00d3202fd4c01ed679daf0:drs-zw"},"jobs":[{"engine_type":"mysql","job_id":"c7296a3b-0d9f-424c-8d74-816ca62jb2a2","status":"CONFIGURATION"}]},"x-request-examples-text-2":{"alarm_notify_info":{"delay_time":100,"subscriptions":[{"endpoints":["18681846949"],"protocol":"sms"},{"endpoints":["123456@qq.com"],"protocol":"email"}]},"jobs":[{"engine_type":"oracle-to-dws","job_id":"2b36da5c-44a7-41af-8889-247b14djb2a2","status":"INCRE_TRANSFER_STARTED"}]},"x-request-examples-url-1":"https://{endpoint}/v3/0ac6eb2c8000d2ee2fd9c006dededbe6/jobs/batch-set-smn","x-request-examples-url-2":"https://{endpoint}/v3/0ac6eb2c8000d2ee2fd9c006dededbe6/jobs/batch-set-smn","x-support-sdk":"Y"}}},"product_short":"DRS","region_id":"cn-north-4","schemes":["HTTPS"],"security_definitions":null,"summary":"批量配置异常通知","tags":"公共接口管理","uri":null,"version":"2.0"}