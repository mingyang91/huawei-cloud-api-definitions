{"base_path":"/","components":null,"consumes":"[\"application/json\"]","definitions":{"BatchDataTransformationReq":{"description":"批量数据加工规则请求体","properties":{"jobs":{"description":"批量数据加工规则请求列表","items":{"$ref":"#/definitions/CheckDataTransformationReq","description":""},"type":"array"}},"required":["jobs"]},"BatchDataTransformationResp":{"description":"批量数据加工规则返回体","properties":{"count":{"description":"总数","format":"int32","type":"integer"},"results":{"description":"批量数据加工响应列表","items":{"$ref":"#/definitions/DataTransformationResp","description":""},"type":"array"}}},"CheckDataTransformationReq":{"description":"校验数据加工规则请求体","properties":{"config_transformation":{"$ref":"#/definitions/ConfigTransformationVo","description":"- 配置信息,如果存在多张关联表,请生成多条配置规则。满足配置条件的数据将暂存到缓存中,在数据过滤的场景进行使用。\n- 配置的库名和表名支持数字、字母和下划线。\n- 配置的列名、主键、索引,请确保与源库配置表的字段名保持大小写一致。"},"job_id":{"description":"任务id","type":"string"},"object_info":{"description":"对象信息,生成加工规则时需要填写。","items":{"$ref":"#/definitions/DatabaseObjectVO"},"type":"array"},"transformation_info":{"$ref":"#/definitions/TransformationInfo","description":"加工信息。"}},"required":["transformation_info"]},"ConfigTransformationVo":{"description":"数据同步配置库规则信息体","properties":{"col_names":{"description":"列名。长度限制256。","type":"string"},"db_name":{"description":"库名。长度限制256。","type":"string"},"db_table_name":{"description":"库名.表名。","type":"string"},"indexs":{"description":"优化查询所需的索引。长度限制256。","type":"string"},"prim_key_or_index":{"description":"主键或唯一索引。长度限制256。","type":"string"},"table_name":{"description":"表名。长度限制256。","type":"string"},"values":{"description":"过滤条件。长度限制256。","type":"string"}},"required":["col_names","db_name","db_table_name","indexs","prim_key_or_index","table_name","values"]},"DataTransformationResp":{"description":"数据加工返回体","properties":{"error_code":{"description":"错误码","type":"string"},"error_msg":{"description":"错误信息","type":"string"},"id":{"description":"任务id","type":"string"},"status":{"description":"状态","enum":["success","failed"],"type":"string"}}},"DatabaseObjectVO":{"description":"数据库对象信息体","properties":{"id":{"description":"数据库对象和数据库表名称,例如格式为hec-*-*-drs_test1。","type":"string"},"select":{"description":"是否选择高级配置,值为true。","type":"string"}}},"TransformationInfo":{"description":"数据加工信息","properties":{"transformation_type":{"description":"- 生成加工规则值为contentConditionalFilter\n- 生成配置规则值为configConditionalFilter","enum":["contentConditionalFilter","configConditionalFilter"],"type":"string"},"value":{"description":"过滤条件,生成加工规则值为sql条件语句,生成配置规则值为config。长度限制256。","type":"string"}},"required":["transformation_type","value"]}},"description":null,"group_id":"506538835790436b8e209e5a6684d485","host":"drs.cn-north-4.myhuaweicloud.com","id":"5c067bff6a594415a7367dc7eb5f6844","info_version":"v3","method":"post","name":"BatchChangeData","parameters":{},"paths":{"/v3/{project_id}/jobs/batch-transformation":{"post":{"description":"数据复制服务支持对同步的对象进行加工,即可以为选择的对象添加规则。","operationId":"BatchChangeData","parameters":[{"description":"租户在某一region下的project ID。","in":"path","name":"project_id","required":true,"type":"string","x-order":1},{"description":"从IAM服务获取的用户Token","in":"header","name":"X-Auth-Token","required":true,"type":"string","x-order":2},{"default":"en-us","description":"请求语言类型","enum":["en-us","zh-cn"],"in":"header","name":"X-Language","required":false,"type":"string","x-example":"en-us","x-order":3},{"default":"application/json","description":"指定类型为application/json。","in":"header","name":"Content-Type","required":true,"type":"string","x-example":"application/json","x-order":4},{"description":"批量数据加工规则请求体","in":"body","name":"requestBody","required":true,"schema":{"$ref":"#/definitions/BatchDataTransformationReq"},"x-order":5}],"responses":{"200":{"description":"OK","examples":{"application/json":{"count":1,"results":[{"id":"e894593d-5e0a-4652-af7e-1b0c239jb201","status":"success"}]}},"schema":{"$ref":"#/definitions/BatchDataTransformationResp"}},"400":{"description":"Bad Request"}},"summary":"批量数据加工","tags":["实时同步管理"],"x-apiErrorCodes":"[]","x-constraint":"- 每张表仅支持添加一个校验规则。\n- Oracle为源库的数据过滤每次最多支持20000张表,MySQL为源库的数据过滤每次最多支持10000张表。\n- 过滤条件不支持使用某种数据库引擎特有的packege、函数、变量、常量等写法,须使用通用SQL标准。","x-is-registered":"Y","x-name":"批量数据加工","x-order":24,"x-publishpath":"BatchChangeData","x-request-examples-1":{"jobs":[{"config_transformation":{"col_names":"id,name","db_name":"lxl_test1","db_table_name":"lxl_test1.test_1","indexs":"name","prim_key_or_index":"id","table_name":"test_1","values":"name like '%a%'"},"job_id":"e894593d-5e0a-4652-af7e-1b0c239jb201","object_info":[],"transformation_info":{"transformation_type":"configConditionalFilter","value":"config"}}]},"x-request-examples-2":{"jobs":[{"job_id":"e894593d-5e0a-4652-af7e-1b0c239jb201","object_info":[{"id":"lxl_test1-*-*-test_1","select":"true"}],"transformation_info":{"transformation_type":"contentConditionalFilter","value":"id>5"}}]},"x-request-examples-description-1":"MySQL数据生成配置规则示例","x-request-examples-description-2":"MySQL数据生成加工规则示例","x-request-examples-text-1":{"jobs":[{"config_transformation":{"col_names":"id,name","db_name":"lxl_test1","db_table_name":"lxl_test1.test_1","indexs":"name","prim_key_or_index":"id","table_name":"test_1","values":"name like '%a%'"},"job_id":"e894593d-5e0a-4652-af7e-1b0c239jb201","object_info":[],"transformation_info":{"transformation_type":"configConditionalFilter","value":"config"}}]},"x-request-examples-text-2":{"jobs":[{"job_id":"e894593d-5e0a-4652-af7e-1b0c239jb201","object_info":[{"id":"lxl_test1-*-*-test_1","select":"true"}],"transformation_info":{"transformation_type":"contentConditionalFilter","value":"id>5"}}]},"x-request-examples-url-1":"https://{endpoint}/v3/054ba152d480d55b2f5dc0069e7ddef0/jobs/batch-transformation","x-request-examples-url-2":"https://{endpoint}/v3/054ba152d480d55b2f5dc0069e7ddef0/jobs/batch-transformation","x-scope":"Commercial","x-support-sdk":"Y","x-version":"v3"}}},"product_short":"DRS","region_id":"cn-north-4","schemes":["HTTPS"],"security_definitions":null,"summary":"批量数据加工","tags":"实时同步管理","uri":null,"version":"2.0"}