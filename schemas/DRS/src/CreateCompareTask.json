{"base_path":"/","components":null,"consumes":"[\"application/json\"]","definitions":{"CompareObjectInfo":{"description":"","properties":{"db_name":{"description":"库名。","type":"string"},"table_name":{"description":"该库下的表名列表。","items":{"description":"","type":"string"},"type":"array"}},"required":["db_name"]},"CompareObjectInfoWithToken":{"description":"","properties":{"db_name":{"description":"库名。","type":"string"},"table_name_with_token":{"description":"该库下的表信息列表(带token)。","example":"[{\"table_name\":\"\",\"min_token\":\"\",\"max_token\":\"\"}]","items":{"$ref":"#/definitions/CompareTableInfoWithToken","description":""},"type":"array"}},"required":["db_name"]},"CompareTableInfoWithToken":{"description":"","properties":{"max_token":{"description":"该表的max token。","type":"string"},"min_token":{"description":"该表的min token。","type":"string"},"table_name":{"description":"表名。","type":"string"}},"required":["table_name"]},"CreateCompareTaskReq":{"description":"","properties":{"data_level_compare_info":{"$ref":"#/definitions/CreateDataLevelCompareReq","description":"数据级对比信息,不创建数据级对比时可以不传。object_level_compare_type和data_level_compare_info都为空时,只查询已创建的对比任务列表。","example":"{\"conflict_policy\":\"\",\"compare_type\":\"\",\"compare_mode\":\"\",\"start_time\":\"\",\"CompareObjectInfo\":[{\"db_name\":\"\",\"table_name\":[]}],\"CompareObjectInfoWithToken\":[{\"db_name\":\"\",\"CompareTableInfoWithToken\":[{\"table_name\":\"\",\"min_token\":\"\",\"max_token\":\"\"}]}]}"},"job_id":{"description":"任务id。","type":"string"},"object_level_compare_type":{"description":"对象级对比类型,取值为空代表不创建对象级对比。object_level_compare_type和data_level_compare_info都为空时,只查询已创建的对比任务列表。","enum":["objects"],"example":"objects","type":"string"}},"required":["job_id"]},"CreateCompareTaskResp":{"description":"","properties":{"data_level_compare_create_result":{"$ref":"#/definitions/CreateCompareTaskResult","description":"创建数据级对比的结果。"},"error_code":{"description":"错误码。","type":"string"},"error_msg":{"description":"错误信息。","type":"string"},"job_id":{"description":"任务id。","type":"string"},"object_level_compare_create_result":{"$ref":"#/definitions/CreateCompareTaskResult","description":"创建对象级对比的结果。","example":"{\"compare_task_id\":\"\",\"status\":\"\",\"error_code\":\"\",\"error_msg\":\"\"}"}},"required":["job_id"]},"CreateCompareTaskResult":{"description":"","properties":{"compare_task_id":{"description":"对比任务创建成功后,返回对比任务的id,用于查询该对比任务的结果。","type":"string"},"error_code":{"description":"错误码。","type":"string"},"error_msg":{"description":"错误信息。","type":"string"}}},"CreateDataLevelCompareReq":{"description":"","properties":{"compare_mode":{"default":"quick_comparison","description":"数据级对比模式,取值为空时需要在compare_object_infos或者compare_object_infos_with_token传对象信息,quick_comparison-快速对比,需要加入该功能的白名单才能使用。","enum":["quick_comparison"],"example":"quick_comparison","type":"string"},"compare_object_infos":{"description":"数据级对比的对象。非“快速对比”模式时,compare_object_infos和compare_object_infos_with_token根据链路二选一传值,不允许都为空。","example":"[{\"db_name\":\"\",\"table_name\":[]}]","items":{"$ref":"#/definitions/CompareObjectInfo","description":""},"type":"array"},"compare_object_infos_with_token":{"description":"数据级对比的对象(Cassandra灾备专用,带token信息)。非“快速对比”模式时,compare_object_infos和compare_object_infos_with_token根据链路二选一传值,不允许都为空。","example":"[{\"db_name\":\"\",\"CompareTableInfoWithToken\":[{\"table_name\":\"\",\"min_token\":\"\",\"max_token\":\"\"}]}]","items":{"$ref":"#/definitions/CompareObjectInfoWithToken","description":""},"type":"array"},"compare_type":{"description":"数据级对比类型,lines-行对比,contents-内容对比。","enum":["lines","contents"],"example":"lines","type":"string"},"conflict_policy":{"description":"一个任务只允许有一个未完成的数据级对比任务,该字段决定对未完成数据级对比任务的处理方式。cancel-取消后重新创建,keep-保持未完成的不再创建。","enum":["cancel","keep"],"example":"keep","type":"string"},"start_time":{"description":"对比任务启动时间,取值为空代表立即启动。","type":"string"}},"required":["compare_type","conflict_policy"]}},"description":null,"group_id":"506538835790436b8e209e5a6684d485","host":"drs.cn-north-4.myhuaweicloud.com","id":"0d2f74a7182c44d494f6f101bcdd7950","info_version":"v3","method":"post","name":"CreateCompareTask","parameters":{},"paths":{"/v3/{project_id}/jobs/create-compare-task":{"post":{"consumes":["application/json"],"description":"创建对比任务。","operationId":"CreateCompareTask","parameters":[{"description":"租户在某一region下的project ID。","in":"path","name":"project_id","required":true,"type":"string","x-order":1},{"description":"从IAM服务获取的用户Token。","in":"header","name":"X-Auth-Token","required":true,"type":"string","x-order":2},{"default":"en-us","description":"请求语言类型","enum":["en-us","zh-cn"],"in":"header","name":"X-Language","required":false,"type":"string","x-example":"en-us","x-order":3},{"default":"application/json","description":"指定类型为application/json。","in":"header","name":"Content-Type","required":true,"type":"string","x-example":"application/json","x-order":4},{"description":"创建对比任务的请求体。","in":"body","name":"requestBody","required":true,"schema":{"$ref":"#/definitions/CreateCompareTaskReq"},"x-order":5}],"produces":["application/json"],"responses":{"200":{"description":"OK","examples":{"application/json":{"data_level_compare_create_result":{"compare_task_id":"08cad1f8-9de2-42fa-b8ce-6c36daf730f6"},"job_id":"94800607-3cd8-4f7d-a340-63a10f8jb502","object_level_compare_create_result":{"compare_task_id":"dc1683d9-bdf2-4be9-967f-6ef0953369bc"}}},"schema":{"$ref":"#/definitions/CreateCompareTaskResp"}},"400":{"description":"Bad Request"}},"summary":"创建对比任务","tags":["公共接口管理"],"x-constraint":"当前版本仅支持MySQL灾备任务在“灾备中”时创建对比任务,父任务不支持调用。","x-is-registered":"Y","x-name":"创建对比任务","x-order":18,"x-publishpath":"CreateCompareTask","x-request-examples-1":{"data_level_compare_info":{"compare_mode":null,"compare_object_infos":[{"db_name":"may_5","table_name":["table_name_0","table_name_1"]}],"compare_type":"contents","conflict_policy":"keep","start_time":null},"job_id":"94800607-3cd8-4f7d-a340-63a10f8jb502","object_level_compare_type":"objects"},"x-request-examples-description-1":"创建对比任务示例","x-request-examples-text-1":{"data_level_compare_info":{"compare_mode":null,"compare_object_infos":[{"db_name":"may_5","table_name":["table_name_0","table_name_1"]}],"compare_type":"contents","conflict_policy":"keep","start_time":null},"job_id":"94800607-3cd8-4f7d-a340-63a10f8jb502","object_level_compare_type":"objects"},"x-request-examples-url-1":"https://{endpoint}/v3/054ba152d480d55b2f5dc0069e7ddef0/jobs/create-compare-task","x-scope":"Commercial","x-support-sdk":"Y","x-version":"v3"}}},"product_short":"DRS","region_id":"cn-north-4","schemes":["HTTPS"],"security_definitions":null,"summary":"创建对比任务","tags":"公共接口管理","uri":null,"version":"2.0"}