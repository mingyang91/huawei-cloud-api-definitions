{"base_path":"/","components":null,"consumes":"[\"application/json\"]","definitions":{"AlarmNotifyConfig":{"description":"异常通知信息设置信息体。配置该参数时,代表当任务状态异常时,系统将发送通知给指定的SMN Topic。","properties":{"alarm_to_user":{"default":false,"description":"异常告警是否通知用户。","type":"boolean"},"delay_time":{"default":0,"description":"时延阈值(单位为s)。取值:\n- 最小值:1\n- 最大值:3600\n- 缺省值:0\n- 说明:\n1.源数据库和目标数据库之间的同步有时会存在一个时间差,称为时延,单位为秒。\n2.时延阈值设置是指时延超过一定的值并持续6分钟后,DRS可以发送通知给指定收件人。(初次进入增量迁移阶段,会有较多数据等待同步,存在较大的时延,属于正常情况,不在此功能的监控范围之内。)\n3.只有全量+增量的任务支持此选项。","format":"int64","maximum":3600,"minimum":1,"type":"integer"},"rpo_delay":{"default":0,"description":"RPO时延阈值(单位为s)。取值:\n- 最小值:1\n- 最大值:3600\n- 缺省值:0\n- 说明:\nRPO时延阈值设置是业务数据库与DRS实例间同步的时延超过一定的值并持续6分钟后,DRS可以发送通知给指定收件人。(初次进入增量灾备阶段,会有较多数据等待同步,存在较大的时延,属于正常情况,不在此功能的监控范围之内。)","format":"int64","maximum":3600,"minimum":1,"type":"integer"},"rto_delay":{"default":0,"description":"RTO时延阈值(s)。取值:\n- 最小值:1\n- 最大值:3600\n- 缺省值:0\n- 说明:\nRTO时延阈值设置是DRS实例与灾备数据库间同步的时延超过一定的值并持续6分钟后,DRS可以发送通知给指定收件人。","format":"int64","maximum":3600,"minimum":1,"type":"integer"},"topic_urn":{"description":"SMN主题URN。","example":"urn:smn:cn-east-3:05f03202268025e12f4bc00a36a6c166:test","type":"string"}},"required":["alarm_to_user"],"type":"object"},"BaseEndpoint":{"description":"数据库基本信息体。","properties":{"db_name":{"description":"指定数据库名称。例如:\n- oracle:serviceName.orcl。","type":"string"},"db_password":{"description":"数据库密码。","example":"******","type":"string"},"db_port":{"description":"数据库端口。\n\n约束:输入范围为1-65535之间的整数。","example":"3306","type":"string"},"db_user":{"description":"数据库用户名。","example":"root","type":"string"},"endpoint_name":{"description":"数据库场景类型。取值:\n- oracle:云下自建Oracle数据库。\n- ecs_oracle:华为云ECS自建Oracle数据库。\n- cloud_gaussdbv5:华为云数据库GaussDB分布式。\n- mysql:他云/本地自建MySQL数据库。\n- ecs_mysql:华为云ECS自建MySQL数据库。\n- cloud_mysql:华为云数据库RDS for MySQL。\n- redis:云下自建Redis数据。\n- ecs_redis:华为云ECS自建Redis数据。\n- rediscluster:云下自建Redis集群数据库。\n- ecs_rediscluster:华为云ECS自建Redis集群数据库。\n- cloud_gaussdb_redis:华为云数据库GeminiDB Redis。\n- postgresql: 云下自建PostgreSQL数据库。\n- ecs_postgresql: 华为云ECS自建PostgreSQL数据库。\n- cloud_postgresql: 华为云数据库RDS for PostgreSQL。\n- mongodb: 云下自建MongoDB数据库。\n- ecs_mongodb: 华为云ECS自建MongoDB数据库。\n- cloud_mongodb: 华为云文档数据库服务DDS。","enum":["oracle","ecs_oracle","cloud_gaussdbv5","mysql","ecs_mysql","cloud_mysql","redis","ecs_redis","rediscluster","ecs_rediscluster","cloud_gaussdb_redis","postgresql","ecs_postgresql","cloud_postgresql","mongodb","ecs_mongodb","cloud_mongodb"],"type":"string"},"id":{"description":"数据库信息ID。","type":"string"},"instance_id":{"description":"华为云数据库实例ID。","type":"string"},"instance_name":{"description":"华为云数据库实例名称。","type":"string"},"ip":{"description":"数据库IP。\n约束:\n- 数据库为自建MongoDB时,数据库IP与端口之间用“:”英文冒号拼接,多个值之间请用“,”英文逗号隔开,最多支持填写3个IP地址或域名。\n- 数据库为DDS实例时,数据库IP与端口之间用“:”英文冒号拼接,多个IP端口之间请用“,”英文逗号分隔。\n- 数据库为Redis集群时,请填写源端Redis集群所有分片的IP地址和对应端口,数据库IP与端口之间用“:”英文冒号拼接,多个IP端口之间请用“,”英文逗号分隔,并且推荐填写集群分片的Slave节点的IP地址。最多支持填写32个IP地址或域名,多个值之间请用英文逗号隔开。\n示例:\n- MySQL:ip\n- MongoDB:ip:port,ip:port,ip:port\n- DDS:ip:port,ip:port\n - Redis集群:ip:port,ip:port","example":"MySQL:ip;MongoDB:ip:port,ip:port,ip:port;DDS:ip:port,ip:port;Redis集群:ip:port,ip:port;","type":"string"},"source_sharding":{"description":"物理源库信息。","items":{"$ref":"#/definitions/BaseEndpoint"},"type":"array"}},"required":["endpoint_name","db_user","db_password"],"type":"object"},"BaseEndpointConfig":{"description":"数据库基本设置信息体,当源库或者目标库在特定场景下需要额外设置时填写。例如:\n- 实时迁移入云场景:云数据库(RDS for MySQL)、云数据库 GaussDB(for MySQL) 主备版作为目标库(target_endpoint)时,需要设置“只读”或者“读写”(is_target_readonly)。\n- 实时迁移入云场景:分布式数据库中间件DDM作为目标库,源库为MySQL分库分表时,需要设置“端数据库实例个数”。\n- 实时迁移入云场景:MongoDB作为源库时,需要设置“源数据库实例类型”为非集群、集群或者集群(MongoDB 4.0+),并且实例类型为“集群”时,还需要设置“源端分片个数”(source_shard_num)。\n- 实时灾备场景:单主灾备且本云为备时,云数据库(RDS for MySQL)、云数据库 GaussDB(for MySQL) 主备版、分布式数据库中间件DDM、文档数据库服务DDS等作为目标库(target_endpoint)时,需要设置“只读”或者“读写”(is_target_readonly)。\n- 实时灾备场景:云数据库GaussDB(for Cassandra) 灾备时,需要设置“是否迁移TTL”,如果参数为true时,还需要设置TTL列名。","properties":{"is_target_readonly":{"default":true,"description":"目标实例是否设置为为只读。\n- MySQL迁移和灾备,且job_direction为up时设置有效。(灾备场景下,单主灾备且本云为备为必填且为true,不填默认设置为true)。","type":"boolean"},"node_num":{"default":0,"description":"Redis集群到GeminiDB Redis迁移场景填写,连接源端Redis集群的子任务个数,输入值在1到16之间,且输入值不能大于源端Redis集群的分片个数,请根据源端Redis集群的规模合理选择。建议集群的每4个分片设置1个源端分片个数,即每1个子任务连接源端集群的4个分片。","format":"int32","maximum":16,"minimum":1,"type":"integer"}},"type":"object"},"BaseResp":{"description":"基础响应体。","properties":{"total_count":{"description":"列表中的项目总数,与分页无关。","format":"int32","type":"integer"}},"required":["total_count"]},"BatchAsyncJobDetailResp":{"allOf":[{"$ref":"#/definitions/BaseResp"},{"properties":{"jobs":{"description":"查询租户指定ID批量异步任务详情响应体。","items":{"$ref":"#/definitions/JobDetailResp"},"type":"array"}},"required":["jobs"],"type":"object"}],"description":"查询租户指定ID批量异步任务详情响应体。"},"CloudBaseInfo":{"description":"数据库实例所在Region,项目等信息,当数据库实例类型为ecs(华为云ECS自建数据库),cloud(华为云数据库)时为必填项。","properties":{"az_code":{"description":"数据库所在可用分区(AZ)名称。","example":"cn-north-4a:华北-北京四-可用区1","type":"string"},"project_id":{"description":"租户在某一Region下的Project ID。 获取方法请参见获取项目ID。","example":"054ba152d480d55b2f5dc0069e7ddef0","type":"string"},"region":{"description":"区域ID,当数据库实例类型为ecs(华为云ECS自建数据库),cloud(华为云数据库)时为必填项。获取方法请参见地区和终端节点。\n注意:当该Region下存在子项目时,Region ID为区域项目ID与子项目ID,由“_”下划线拼接,例如:cn-north-4_abc。","example":"cn-north-4:华北-北京四,cn-east-3:华东-上海一,cn-south-1:华南-广州","type":"string"}},"required":["region","project_id"]},"CloudVpcInfo":{"description":"数据库实例所在VPC,子网,安全组等信息,当数据库实例类型为ecs(华为云ECS自建数据库),cloud(华为云数据库)时为必填项。","properties":{"security_group_id":{"description":"数据库实例所在的安全组ID,获取方法如下:\n方法1:登录虚拟私有云服务的控制台界面,在安全组的详情页面查找安全组ID。\n方法2:通过虚拟私有云服务的API接口查询,具体操作可参考查询安全组列表。","example":"2a1f7fc8-3307-42a7-aa6f-42c8b9b8f8c5","type":"string"},"subnet_id":{"description":"数据库实例所在子网ID,获取方法如下:\n方法1:登录虚拟私有云服务的控制台界面,单击VPC下的子网,进入子网详情页面,查找网络ID。\n方法2:通过虚拟私有云服务的API接口查询,具体操作可参考查询子网列表。","example":"54886391-4bf0-443a-8145-e2bfacfdf5ca","type":"string"},"vpc_id":{"description":"数据库实例所在的虚拟私有云ID,获取方法如下:\n方法1:登录虚拟私有云服务的控制台界面,在虚拟私有云的详情页面查找VPC ID。\n方法2:通过虚拟私有云服务的API接口查询,具体操作可参考查询VPC列表。","example":"ab155e40-35f2-4463-b22b-c67a56e2fbb9","type":"string"}},"required":["vpc_id","subnet_id"]},"CompareJobInfo":{"description":"对比列表信息体。","properties":{"compare_job_tag":{"additionalProperties":{"type":"string"},"description":"对比任务的标签。","type":"object"},"compute_type":{"description":"对比计算资源。","type":"string"},"dynamic_compare_delay":{"default":-1,"description":"动态比对时延。","format":"int64","maximum":9223372036854775807,"minimum":-1,"type":"integer"},"end_time":{"description":"结束时间。","type":"string"},"error_msg":{"description":"失败原因。","type":"string"},"export_status":{"description":"导出比对结果状态。","type":"string"},"id":{"description":"对比任务ID。","type":"string"},"options":{"additionalProperties":{"type":"string"},"description":"对比任务选项。","type":"object"},"report_remain_seconds":{"description":"导出比对结果有效期剩余时间。","format":"int64","type":"integer"},"start_time":{"description":"开始时间。","type":"string"},"status":{"description":"对比任务的状态。取值:\n- RUNNING:运行中。\n- WAITING_FOR_RUNNING:等待启动中。\n- SUCCESSFUL:完成。\n- FAILED:失败。\n- CANCELLED:已取消。\n- TIMEOUT_INTERRUPT:超时中断。\n- FULL_DOING:全量校验中。\n- INCRE_DOING:增量校验中。","enum":["RUNNING","WAITING_FOR_RUNNING","SUCCESSFUL","FAILED","CANCELLED","TIMEOUT_INTERRUPT","FULL_DOING","INCRE_DOING"],"type":"string"},"type":{"description":"对比类型。","type":"string"}},"type":"object"},"CompareResultInfo":{"description":"查询对比任务信息体。","properties":{"content_compare_detail_infos":{"description":"内容对比详情信息体。","items":{"$ref":"#/definitions/ContentCompareDetailInfo"},"type":"array"},"content_compare_overview_infos":{"description":"内容对比概览信息体。","items":{"$ref":"#/definitions/ContentCompareOverviewInfo"},"type":"array"},"content_diff_detail_info":{"$ref":"#/definitions/ContentDiffDetailInfo","description":"内容对比不一致数据的详情。"},"data_compare_task_list":{"description":"数据对比任务列表。","items":{"$ref":"#/definitions/CompareJobInfo"},"type":"array"},"line_compare_detail_infos":{"description":"行数对比任务表级详情。","items":{"$ref":"#/definitions/TableLineCompareDetailInfo"},"type":"array"},"line_compare_overview_infos":{"description":"行数对比概览信息体。","items":{"$ref":"#/definitions/LineCompareOverviewInfo"},"type":"array"},"objects_compare_detail_infos":{"description":"对象级对比详情信息体。","items":{"$ref":"#/definitions/ObjectsCompareDetailInfo"},"type":"array"},"objects_compare_overview_info":{"$ref":"#/definitions/ObjectsCompareTaskInfo","description":"对象级对比任务信息体。"}},"type":"object"},"ConnectionManagement":{"properties":{"driver_management":{"$ref":"#/definitions/DriverManagement","description":"驱动管理。"}},"type":"object"},"ContentCompareDetailInfo":{"description":"内容对比详情信息体。","properties":{"content_compare_result":{"description":"内容对比结果。取值:\n- true:一致。\n- false:不一致。","type":"boolean"},"difference_row_num":{"description":"对比不一致行数。","format":"int64","type":"integer"},"line_compare_result":{"description":"行对比结果。取值:\n- true:一致。\n- false:不一致。","type":"boolean"},"message":{"description":"失败原因。","type":"string"},"source_db":{"description":"源库库名。","type":"string"},"source_row_num":{"description":"源库表行数。","format":"int64","type":"integer"},"source_table_name":{"description":"源库表名。","type":"string"},"target_db":{"description":"目标库库名。","type":"string"},"target_row_num":{"description":"目标库表行数。","format":"int64","type":"integer"},"target_table_name":{"description":"目标库表名。","type":"string"}},"type":"object"},"ContentCompareOverviewInfo":{"description":"内容对比概览信息体。","properties":{"compare_result":{"description":"对比结果。","example":"true-一致,false-不一致","type":"boolean"},"source_db":{"description":"源库库名。","type":"string"},"status":{"description":"对比结果。取值:\n- CONSISTENT:一致。\n- INCONSISTENT:不一致。\n- COMPARING:正在对比。\n- WAITING_FOR_COMPARISON:等待对比。\n- FAILED_TO_COMPARE:对比失败。\n- TARGET_DB_NOT_EXIST:目标库不存在。\n- CAN_NOT_COMPARE:无法对比。\n- WAIT_FOR_COMPARE:命令已下发,等待对比结果。\n- CANCELED:已取消。","enum":["CONSISTENT","INCONSISTENT","COMPARING","WAITING_FOR_COMPARISON","FAILED_TO_COMPARE","TARGET_DB_NOT_EXIST","CAN_NOT_COMPARE","WAIT_FOR_COMPARE","CANCELED"],"type":"string"},"target_db":{"description":"目标库库名。","type":"string"}},"type":"object"},"ContentDiffDetailInfo":{"description":"内容对比不一致数据的详情。","properties":{"contents_infos":{"description":"信息列表。","items":{"$ref":"#/definitions/ContentDiffDetailVO"},"type":"array"},"count":{"description":"数量。","format":"int64","type":"integer"},"source_meta_is_null":{"description":"对比不一致详情:只有目标库存在。","format":"int64","type":"integer"},"source_target_meta_not_null":{"description":"对比不一致详情:源和目标端均存在。","format":"int64","type":"integer"},"target_meta_is_null":{"description":"对比不一致详情:只有源库存在。","format":"int64","type":"integer"}},"type":"object"},"ContentDiffDetailVO":{"description":"内容对比详情信息体。","properties":{"source_key_value":{"description":"源库KEY值。","items":{"type":"string"},"type":"array"},"source_select_sql":{"description":"查询源库SQL。","type":"string"},"target_key_value":{"description":"目标库KEY值。","items":{"type":"string"},"type":"array"},"target_select_sql":{"description":"查询目标库SQL。","type":"string"}},"type":"object"},"CustomizedDns":{"description":"客户自定义DNS服务。","properties":{"dns_ip":{"description":"设置客户自定义DNS IP。","maxLength":15,"minLength":0,"type":"string"},"is_set_dns":{"description":"是否设置客户自定义DNS。","type":"boolean"},"set_dns_action":{"description":"设置客户自定义DNS的行为。\n- add:新增客户自定义DNS IP。\n- keep:保持客户自定义DNS IP。\n- update:更新客户自定义DNS IP(当DNS IP变化时更新生效)。\n- recover:还原系统默认DNS IP(还原时可能会导致域名解析失败,请谨慎操作)。","enum":["add","keep","update","recover"],"type":"string"}},"required":["is_set_dns","set_dns_action","dns_ip"],"type":"object"},"DbParam":{"description":"数据库参数名、目标数据库参数值。","properties":{"key":{"description":"数据库参数名。","example":"binlog_stmt_cache_size","type":"string"},"target_value":{"description":"目标数据库参数值。","example":"32678","type":"string"}},"required":["key","target_value"]},"DbParamInfo":{"description":"数据库参数信息体。MySQL迁移和MySQL灾备需要修改的数据库参数,部分参数的修改需重启目标库后生效,建议在迁移开始前或迁移结束后重启目标库,具体参数值与有效范围请通过“批量获取数据库参数”接口查询。约束:\n- 实时灾备场景:双主灾备时父任务不支持。\n当前支持的参数:\n常规参数:\n- character_set_server:服务器字符集。\n- collation_server:服务器默认排序。\n- connect_timeout:mysqld服务器在回Bad handshake响应之前等待连接数据包的时间(秒)。\n- explicit_defaults_for_timestamp:处理TIMESTAMP字段的默认值、NULL值时是否开启非标准行为。默认该参数是关闭的,即开启非标准行为。\n- innodb_flush_log_at_trx_commit:当重新安排并批量处理与提交相关的I/O操作时,可以控制提交操作在严格遵守ACID合规性和高性能之间的平衡。当值设为0时,每秒把事务日志缓存区的数据写入日志文件并刷新到磁盘;当设为默认值1时,是为了保证完整的ACID,每次提交事务时,把事务日志从缓存区写到日志文件中,并刷新日志文件的数据到磁盘上;如果设为2,每次提交事务都会把事务日志从缓存区写入日志文件,大约每隔一秒会刷新到磁盘。\n- innodb_lock_wait_timeout:放弃事务前,InnoDB事务等待行锁的时间。\n- max_connections:允许同时连接的客户端总数。如果设定值为default,表示该参数随内存规格变化。\n- net_read_timeout:中止读数据之前从一个连接等待更多数据的秒数。\n- net_write_timeout:中止写之前等待一个块被写入连接的秒数。\n性能参数:\n- binlog_cache_size:在事务中,为二进制日志存储SQL语句的缓存容量。该参数必须设置为4096的倍数。目标库允许值:4096~16777216。\n- binlog_stmt_cache_size:此变量决定在事务中,二进制日志存储下发的非事务语句的缓存空间。该参数必须设置为4096的倍数。目标库允许值:4096~16777216。\n- bulk_insert_buffer_size:限制MyISAM缓存树每个线程的大小,单位为字节。目标库允许值:0~18446744073709551615。\n- innodb_buffer_pool_size:对于缓存数据及其表格索引,innodb使用的内存缓存字节大小。如果设定值为default,表示该参数随内存规格变化(建议不高于目标库实例总内存的70%)。该参数必须设置为134217728的倍数。目标库允许值:536870912~1717986918。\n- long_query_time:当SQL语句执行时间超过此数值时,就会被记录到慢日志中,单位为秒。目标库允许值:0.03~3600。\n- read_buffer_size:对每个进行顺序扫描的线程将分配一个缓冲区。如果要进行大量顺序扫描,可增大参数值以提升性能。目标库允许值:8192~2147479552。\n- read_rnd_buffer_size:在key-sort操作后按排序读取行时,避免读取磁盘。增大该参数值可提升ORDER BY操作的性能。该参数必须设置为4096的倍数。目标库允许值:1~2147483647。\n- sort_buffer_size:增大该参数值可提升ORDER BY或GROUP BY操作的性能。目标库允许值:32768~18446744073709551615。\n- sync_binlog:同步binlog(MySQL持久化到硬盘,或依赖于操作系统)。目标库允许值:0~4294967295。\n示例:\n{\n    'common' : [\n        {\\'key\\':\\'character_set_server\\',\\'target_value\\':\\'utf8mb4\\'}\n    ],\n    'performance' : [\n        {\\'key\\':\\'long_query_time\\',\\'target_value\\':\\'1\\'}\n    ]\n}","properties":{"common":{"description":"常规参数。只有对比结果为不一致的目标库参数能被修改。","items":{"$ref":"#/definitions/DbParam"},"type":"array"},"performance":{"description":"性能参数。对比结果一致也可以修改目标库的值。","items":{"$ref":"#/definitions/DbParam"},"type":"array"}},"type":"object"},"DriverManagement":{"properties":{"driver_name":{"description":"驱动名称。","type":"string"}},"type":"object"},"EndpointSslConfig":{"description":"数据库SSL证书信息体。如果数据库启用了SSL安全连接,请确保相关配置正确,并输入SSL证书相关参数,否则无需填写此参数。","properties":{"ssl_cert_check_sum":{"description":"SSL证书内容checksum值,后端校验,源库安全连接必选。","type":"string"},"ssl_cert_key":{"description":"SSL证书内容,用base64加密。","type":"string"},"ssl_cert_name":{"description":"SSL证书名字。","type":"string"},"ssl_cert_password":{"description":"SSL证书密码,证书文件后缀为.p12时必填。","type":"string"},"ssl_link":{"description":"是否SSL安全连接。如果数据库启用了SSL安全连接,参数值为true。","type":"boolean"}},"type":"object"},"ErrorResp":{"description":"请求失败时返回的错误对象响应体。","properties":{"error_code":{"description":"错误码。","example":"DRS.00000000","maxLength":12,"minLength":12,"type":"string"},"error_msg":{"description":"错误描述。","example":"Success","maxLength":512,"minLength":1,"type":"string"}},"required":["error_code","error_msg"],"type":"object"},"FailedToBindEipChildInfo":{"description":"绑定EIP失败的子任务信息","properties":{"id":{"description":"子任务ID","type":"string"},"name":{"description":"子任务名称","type":"string"}},"type":"object"},"JobBaseInfo":{"description":"创建任务基本信息体。","properties":{"charging_mode":{"description":"计费模式,默认按需。取值:\n- period:包周期。\n- on_demand:按需。","enum":["period","on_demand"],"type":"string"},"description":{"description":"任务描述。\n约束:任务描述不能超过256位,且不能包含!<>&'\"\\特殊字符。","maxLength":256,"minLength":0,"type":"string"},"engine_type":{"description":"引擎类型。取值:\n- oracle-to-gaussdbv5:Oracle同步到GaussDB分布式版,实时同步场景使用。\n- redis-to-gaussredis:Redis同步到GeminiDB Redis,实时迁移场景使用。\n- rediscluster-to-gaussredis:Redis集群同步到GeminiDB Redis,实时迁移场景使用。\n- mysql-to-mysql:MySQL同步到MySQL,实时同步场景使用。","enum":["oracle-to-gaussdbv5","redis-to-gaussredis","rediscluster-to-gaussredis","mysql-to-mysql"],"type":"string"},"enterprise_project_id":{"default":"0","description":"企业项目ID。\n缺省值:\"0\",表示\"default\"企业项目。","type":"string"},"expired_days":{"default":"14","description":"任务处于异常状态一段时间后,将会自动结束。单位为天。(范围14-100),不传默认为14天。","example":"14","type":"string"},"is_open_fast_clean":{"description":"是否开启云数据库RDS for MySQL/MariaDB的binlog快速清理。","type":"boolean"},"job_direction":{"description":"迁移方向。取值:\n- up:入云 ,灾备场景时对应本云为备。\n- down:出云,灾备场景时对应本云为主。\n- non-dbs:自建。","enum":["up","down","non-dbs"],"type":"string"},"job_type":{"description":"任务场景。取值:\n- migration:实时迁移。\n- sync:实时同步。\n- cloudDataGuard:实时灾备。","enum":["migration","sync","cloudDataGuard"],"type":"string"},"multi_write":{"description":"灾备类型是否双主灾备。说明:\n- job_type 是cloudDataGuard时,必填,灾备类型是双主灾备时,multi_write取值true, 否则为false。\n- job_type 是其他类型时,multi_write是非必选参数。","example":"","type":"boolean"},"name":{"description":"任务名称。\n约束:任务名称在4位到50位之间,不区分大小写,可以包含字母、数字、中划线或下划线,不能包括其他特殊字符。\n- 最小长度:4\n- 最大长度:50","example":"DRS-0001","maxLength":50,"minLength":4,"type":"string"},"net_type":{"description":"网络类型。取值:\n- eip:公网网络。\n- vpc:VPC网络,灾备场景不支持选择VPC网络。\n- vpn:VPN、专线网络。","enum":["eip","vpc","vpn"],"example":"","type":"string"},"start_time":{"description":"任务定时启动时间。","type":"string"},"tags":{"description":"标签信息,最多添加10个标签。","example":[{"key":"1","value":"a"},{"key":"2","value":"b"}],"items":{"$ref":"#/definitions/ResourceTag"},"type":"array"},"task_type":{"description":"迁移模式。取值:\n- FULL_TRANS :全量。\n- FULL_INCR_TRANS:全量+增量。\n- INCR_TRANS:增量。","enum":["FULL_TRANS","FULL_INCR_TRANS","INCR_TRANS"],"type":"string"}},"type":"object"},"JobDetailResp":{"description":"任务详情响应体。","properties":{"alarm_notify":{"$ref":"#/definitions/AlarmNotifyConfig","description":"异常通知信息设置信息体。配置该参数时,代表当任务状态异常时,系统将发送通知给指定的SMN Topic。"},"base_info":{"$ref":"#/definitions/JobBaseInfo","description":"任务基本信息体。"},"bind_public_ip_state":{"description":"是否成功绑定公网IP","type":"string"},"children":{"description":"多任务时,存在子任务绑定失败时,返回子任务的信息","items":{"$ref":"#/definitions/FailedToBindEipChildInfo"},"type":"array"},"compare_result":{"$ref":"#/definitions/CompareResultInfo","description":"任务对比结果。"},"connection_management":{"$ref":"#/definitions/ConnectionManagement","description":"连接管理。"},"create_time":{"description":"任务创建时间。","type":"string"},"db_param":{"$ref":"#/definitions/DbParamInfo","description":"数据库参数信息体。"},"id":{"description":"任务ID。","type":"string"},"instance_features":{"additionalProperties":{"type":"string"},"description":"由开关和版本共同控制的任务级别的功能列表。","type":"object"},"is_writable":{"description":"解除目标库只读操作后,目标库解除只读是否成功。\n- pending:目标库解除操作进行中。\n- success:目标库解除只读操作成功。","enum":["pending","success"],"type":"string"},"logs":{"description":"日志查询结果信息体。","items":{"$ref":"#/definitions/TaskLogInfo"},"type":"array"},"master_job_id":{"description":"多任务主节点的任务ID。","type":"string"},"metrics":{"$ref":"#/definitions/QueryMetricResult","description":"Node节点指标项。"},"migration_object_progress_info":{"$ref":"#/definitions/QueryMigrationObjectProgressInfo","description":"迁移中对象进度信息体。"},"network_results":{"description":"网络打通测试结果信息体。","items":{"$ref":"#/definitions/QueryNetworkResult"},"type":"array"},"node_info":{"$ref":"#/definitions/JobNodeInfo","description":"任务实例信息体。"},"period_order":{"$ref":"#/definitions/PeriodOrderInfo","description":"包年/包月信息体。"},"policy_config":{"$ref":"#/definitions/PolicyConfig","description":"策略信息体。设置迁移、同步策略,包括冲突策略、过滤DROP Datase、对象同步范围等。"},"precheck_result":{"$ref":"#/definitions/QueryPreCheckResult","description":"预检查结果信息体。"},"progress_info":{"$ref":"#/definitions/JobProgressInfo","description":"任务进度信息体。"},"public_ip_list":{"description":"指定公网IP的信息","items":{"$ref":"#/definitions/PublicIpConfig"},"type":"array"},"source_endpoint":{"description":"任务源数据库信息体。","items":{"$ref":"#/definitions/JobEndpointInfo"},"type":"array"},"speed_limit":{"description":"限速信息体。\n- 限速:自定义的最大迁移速度,迁移过程中的迁移速度将不会超过该速度。 \n- 不限速:对迁移速度不进行限制,通常会最大化使用源数据库的出口带宽。该流速模式同时会对源数据库造成读消耗,消耗取决于源数据库的出口带宽。比如:源数据库的出口带宽为100MB/s,假设高速模式使用了80%带宽,则迁移对源数据库将造成80MB/s的读操作IO消耗。","items":{"$ref":"#/definitions/SpeedLimitInfo"},"type":"array"},"status":{"description":"任务状态。\n- CREATING:创建中\n- CREATE_FAILED:创建失败\n- CONFIGURATION:配置中\n- STARTJOBING:启动中\n- WAITING_FOR_START:等待启动中\n- START_JOB_FAILED:启动失败\n- PAUSING:已暂停\n- FULL_TRANSFER_STARTED:全量开始,灾备场景下为初始化\n- FULL_TRANSFER_FAILED:全量失败,灾备场景下为初始化失败\n- FULL_TRANSFER_COMPLETE:全量完成,灾备场景下为初始化完成\n- INCRE_TRANSFER_STARTED:增量开始,灾备场景下为灾备中\n- INCRE_TRANSFER_FAILED:增量失败,灾备场景下为灾备异常\n- RELEASE_RESOURCE_STARTED:结束任务中\n- RELEASE_RESOURCE_FAILED:结束任务失败\n- RELEASE_RESOURCE_COMPLETE:已结束\n- REBUILD_NODE_STARTED:故障恢复中\n- REBUILD_NODE_FAILED:故障恢复失败\n- CHANGE_JOB_STARTED:任务变更中\n- CHANGE_JOB_FAILED:任务变更失败\n- DELETED:已删除\n- CHILD_TRANSFER_STARTING:再编辑子任务启动中\n- CHILD_TRANSFER_STARTED:再编辑子任务迁移中\n- CHILD_TRANSFER_COMPLETE:再编辑子任务迁移完成\n- CHILD_TRANSFER_FAILED:再编辑子任务迁移失败\n- RELEASE_CHILD_TRANSFER_STARTED:再编辑子任务结束中\n- RELEASE_CHILD_TRANSFER_COMPLETE:再编辑子任务已结束\n- NODE_UPGRADE_START:升级开始\n- NODE_UPGRADE_COMPLETE:升级完成\n- NODE_UPGRADE_FAILED:升级失败","enum":["CREATING","CREATE_FAILED","CONFIGURATION","STARTJOBING","WAITING_FOR_START","START_JOB_FAILED","PAUSING","FULL_TRANSFER_STARTED","FULL_TRANSFER_FAILED","FULL_TRANSFER_COMPLETE","INCRE_TRANSFER_STARTED","INCRE_TRANSFER_FAILED","RELEASE_RESOURCE_STARTED","RELEASE_RESOURCE_FAILED","RELEASE_RESOURCE_COMPLETE","REBUILD_NODE_STARTED","REBUILD_NODE_FAILED","CHANGE_JOB_STARTED","CHANGE_JOB_FAILED","DELETED","CHILD_TRANSFER_STARTING","CHILD_TRANSFER_STARTED","CHILD_TRANSFER_COMPLETE","CHILD_TRANSFER_FAILED","RELEASE_CHILD_TRANSFER_STARTED","RELEASE_CHILD_TRANSFER_COMPLETE","NODE_UPGRADE_START","NODE_UPGRADE_COMPLETE","NODE_UPGRADE_FAILED"],"example":"CONFIGURATION","type":"string"},"support_import_file_resp":{"$ref":"#/definitions/SupportImportFileResult","description":"对象导入信息。"},"target_endpoint":{"description":"任务目标数据库信息体。","items":{"$ref":"#/definitions/JobEndpointInfo"},"type":"array"},"task_version":{"description":"任务版本。","type":"string"},"total_count":{"description":"列表中的项目总数,与分页无关。","format":"int32","type":"integer"},"tuning_params":{"$ref":"#/definitions/TuningParamInfo","description":"高级设置信息体。"},"user_migration":{"$ref":"#/definitions/UserMigrationInfo","description":"用户迁移信息体。"}},"type":"object"},"JobEndpointInfo":{"description":"创建任务数据库信息体。","properties":{"cloud":{"$ref":"#/definitions/CloudBaseInfo","description":"数据库实例所在Region,项目等信息。"},"config":{"$ref":"#/definitions/BaseEndpointConfig","description":"数据库基本设置信息体。"},"customized_dns":{"$ref":"#/definitions/CustomizedDns","description":"客户自定义DNS服务。"},"db_type":{"description":"数据库类型。取值: \n- oracle:Oracle。\n- gaussdbv5:GaussDB分布式版。\n- redis:Redis。\n- rediscluster:Redis集群版。\n- gaussredis: GeminiDB Redis。\n- mysql:MySQL。","enum":["oracle","gaussdbv5","redis","rediscluster","gaussredis","mysql"],"example":"oracle","type":"string"},"endpoint":{"$ref":"#/definitions/BaseEndpoint","description":"数据库基本信息体。"},"endpoint_role":{"description":"数据库实例角色。取值:\n- so:源库。\n- ta:目标库。","enum":["so","ta"],"type":"string"},"endpoint_type":{"description":"数据库实例类型。取值: \n- offline:自建数据库。\n- ecs:华为云ECS自建数据库。\n- cloud:华为云数据库。","enum":["offline","ecs","cloud"],"type":"string"},"ssl":{"$ref":"#/definitions/EndpointSslConfig","description":"数据库SSL证书信息体。"},"vpc":{"$ref":"#/definitions/CloudVpcInfo","description":"数据库实例所在VPC,子网,安全组等信息。"}},"required":["db_type","endpoint_type","endpoint_role","endpoint"],"type":"object"},"JobNodeBaseInfo":{"description":"任务实例基本信息体。","properties":{"arch":{"description":"CPU架构。取值:\n- x86\n- arm","enum":["x86","arm"],"type":"string"},"availability_zone":{"description":"可用区ID。\n约束:对于任务实例类型不是单机的实例,需要分别为实例所有节点指定可用区,并用“,”英文逗号隔开。示例:\n- 实例类型为single:\"cn-north-4a\"\n- 实例类型为ha:\"cn-north-4a,cn-north-4b\"","type":"string"},"instance_type":{"description":"实例类型。取值:\n- single:单机。\n- ha:主备。","enum":["single","ha"],"type":"string"},"role":{"description":"任务主备角色。","type":"string"},"status":{"description":"状态。","type":"string"}},"required":["instance_type","arch","availability_zone"],"type":"object"},"JobNodeInfo":{"description":"任务实例信息体。","properties":{"base_info":{"$ref":"#/definitions/JobNodeBaseInfo","description":"任务实例基本信息。"},"spec":{"$ref":"#/definitions/JobNodeSpecInfo","description":"任务实例规格信息体。"},"vpc":{"$ref":"#/definitions/JobNodeVpcInfo","description":"任务实例VPC信息体,自建任务必填。"}},"required":["spec"],"type":"object"},"JobNodeSpecInfo":{"description":"任务实例规格信息体。","properties":{"node_type":{"description":"实例规格编码。取值:\n- micro:极小规格。\n- small:小规格。\n- medium:中规格。\n- high:大规格。","enum":["micro","small","medium","high"],"type":"string"}},"required":["node_type"],"type":"object"},"JobNodeVpcInfo":{"description":"任务实例VPC信息体。","properties":{"custom_node_ip":{"description":"指定创建任务实例IP地址,多个IP端口之间请用“,”英文逗号分隔,目前仅支持设置IPv4地址,获取方法如下:\n- 方法1:登录虚拟私有云服务的控制台界面,单击VPC下的子网,进入子网详情页面,查找子网的网段,选择未被占用的IP 。\n- 方法2:通过虚拟私有云服务的API接口查询,具体操作可参考查询私有IP列表,选择“device_owner”为空的私有IP。","type":"string"},"security_group_id":{"description":"任务实例所在的安全组ID。","example":"2a1f7fc8-3307-42a7-aa6f-42c8b9b8f8c5","type":"string"},"subnet_id":{"description":"任务实例所在子网ID。","example":"54886391-4bf0-443a-8145-e2bfacfdf5ca","type":"string"},"vpc_id":{"description":"任务实例所在虚拟私有云ID。","example":"ab155e40-35f2-4463-b22b-c67a56e2fbb9","type":"string"}},"required":["vpc_id","subnet_id"],"type":"object"},"JobProgressInfo":{"description":"任务进度信息。","properties":{"incr_trans_delay":{"description":"增量迁移时延(单位:s)。","example":17,"type":"string"},"incr_trans_delay_millis":{"description":"增量迁移时延(单位:ms)。","example":17771,"type":"string"},"process_time":{"description":"迁移时间。","example":"2022-11-14T17:11:54Z","type":"string"},"progress":{"description":"迁移对比百分比。","example":100,"type":"string"},"progress_map":{"additionalProperties":{"$ref":"#/definitions/ProgressCompleteInfo"},"description":"全量迁移进度详情。","example":"\"progress_map\": {                 \"struct\": {                     \"completed\": \"100%\"                 },                 \"data\": {                     \"completed\": \"100%\"                 },                 \"index\": {                     \"completed\": \"100%\"                 }             }","type":"object"},"remaining_time":{"description":"预计剩余时间。","type":"string"},"task_mode":{"description":"迁移模式。","example":"FULL_INCR_TRANS","type":"string"},"transfer_status":{"description":"迁移状态。","example":"INCRE_TRANSFER_STARTED","type":"string"}},"type":"object"},"LineCompareOverviewInfo":{"description":"行数对比概览信息体。","properties":{"source_db_name":{"description":"源库库名。","type":"string"},"status":{"description":"行对比结果。取值:\n- CONSISTENT:一致。\n- INCONSISTENT:不一致。\n- COMPARING:正在对比。\n- WAITING_FOR_COMPARISON:等待对比。\n- FAILED_TO_COMPARE:对比失败。\n- TARGET_DB_NOT_EXIST:目标库不存在。\n- CAN_NOT_COMPARE:无法对比。","enum":["CONSISTENT","INCONSISTENT","COMPARING","WAITING_FOR_COMPARISON","FAILED_TO_COMPARE","TARGET_DB_NOT_EXIST","CAN_NOT_COMPARE"],"type":"string"},"target_db_name":{"description":"目标库库名。","type":"string"}},"type":"object"},"MigrationObjectOverviewInfo":{"description":"迁移详情概览。","properties":{"dst_count":{"description":"已迁移数量。","type":"string"},"end_time":{"description":"结束时间。","type":"string"},"src_count":{"description":"待迁移数量。","type":"string"},"start_time":{"description":"开始时间。","type":"string"},"status":{"description":"状态.","type":"string"},"type":{"description":"类型。","type":"string"}},"type":"object"},"ObjectsCompareDetailInfo":{"description":"对象级对比详情信息体。","properties":{"error_message":{"description":"失败原因。","type":"string"},"source_db_name":{"description":"源库名称。","type":"string"},"source_db_value":{"description":"源库对比值。","type":"string"},"target_db_name":{"description":"目标库名称。","type":"string"},"target_db_value":{"description":"目标库对比值。","type":"string"}},"type":"object"},"ObjectsCompareOverviewInfo":{"description":"对象对比结果信息体。","properties":{"source_count":{"description":"源数量。","format":"int64","type":"integer"},"status":{"description":"对比结果。取值:\nCONSISTENT:一致。\nINCONSISTENT:不一致。\nCOMPARING:正在对比。\nWAITING_FOR_COMPARISON:等待对比。\nFAILED_TO_COMPARE:对比失败。\nTARGET_DB_NOT_EXIST:目标库不存在。\nCAN_NOT_COMPARE:无法对比。","enum":["CONSISTENT","INCONSISTENT","COMPARING","WAITING_FOR_COMPARISON","FAILED_TO_COMPARE","TARGET_DB_NOT_EXIST","CAN_NOT_COMPARE"],"type":"string"},"target_count":{"description":"目标数量。","format":"int64","type":"integer"},"type":{"description":"对象类型。取值:\n- DB:数据库。\n- TABLE:表。\n- VIEW:视图。\n- EVENT:事件。\n- ROUTINE:存储过程和函数。\n- INDEX:索引。\n- TRIGGER:触发器。\n- SYNONYM:同义词。\n- FUNCTION:函数。\n- PROCEDURE:存储过程。\n- TYPE:自定义类型。\n- RULE:规则。\n- DEFAULT_TYPE:缺省值。\n- PLAN_GUIDE:执行计划。\n- CONSTRAINT:约束。\n- FILE_GROUP:文件组。\n- PARTITION_FUNCTION:分区函数。\n- PARTITION_SCHEME:分区方案。\n- TABLE_COLLATION:表的排序规则。\n- EXTENSIONS:插件。","enum":["DB","TABLE","VIEW","EVENT","ROUTINE","INDEX","TRIGGER","SYNONYM","FUNCTION","PROCEDURE","TYPE","RULE","DEFAULT_TYPE","PLAN_GUIDE","CONSTRAINT","FILE_GROUP","PARTITION_FUNCTION","PARTITION_SCHEME","TABLE_COLLATION","EXTENSIONS"],"type":"string"}},"type":"object"},"ObjectsCompareTaskInfo":{"description":"对象级对比任务信息体。","properties":{"compare_job_id":{"description":"对比任务ID。","type":"string"},"compare_results":{"description":"对比结果。","items":{"$ref":"#/definitions/ObjectsCompareOverviewInfo"},"type":"array"},"create_time":{"description":"对比任务创建时间。","type":"string"},"error_msg":{"description":"失败原因。","type":"string"},"export_status":{"description":"导出比对结果状态。","type":"string"},"report_remain_seconds":{"description":"导出比对结果有效期剩余时间。","format":"int64","type":"integer"},"start_time":{"description":"对比任务开始时间。","type":"string"},"status":{"description":"对比任务状态。取值:\n- RUNNING:运行中。\n- WAITING_FOR_RUNNING:等待启动中。\n- SUCCESSFUL:完成。\n- FAILED:失败。\n- CANCELLED:已取消。","enum":["RUNNING","WAITING_FOR_RUNNING","SUCCESSFUL","FAILED","CANCELLED"],"type":"string"}},"type":"object"},"PeriodOrderInfo":{"description":"包年/包月信息体。","properties":{"is_auto_renew":{"default":0,"description":"是否自动续订。取值:\n- 0:否(默认值,需要客户手动去支付)。\n- 1:是(自动支付)。","enum":[0,1],"format":"int32","type":"integer"},"period_num":{"description":"订购周期数。根据period_type取值不同,代表不同周期数,例如:\n- 当period_type为2时,period_num为1代表1月。\n- 当period_type为3时,period_num为1代表1年。","format":"int32","type":"integer"},"period_type":{"default":3,"description":"订购周期类型。取值:\n- 2:月。\n- 3:年。","enum":[2,3],"format":"int32","type":"integer"}},"required":["period_type","period_num"],"type":"object"},"PolicyConfig":{"description":"策略信息体。设置迁移、同步策略,包括冲突策略、过滤DROP Datase、对象同步范围等。","properties":{"conflict_policy":{"description":"增量阶段冲突策略。该冲突策略特指增量同步中的冲突处理策略,全量阶段的冲突默认忽略。取值:\n- ignore:忽略。当同步数据与目标库已有数据冲突时(主键/唯一键重复等),DRS将忽略源库的冲突数据,并保留目标库中的冲突数据,继续进行后续同步。\t\n- stop:报错。当同步数据与目标库已有数据冲突时(主键/唯一键重复等),同步任务将失败并立即中止。可在同步日志中查看详细信息。\t\n- overwrite:覆盖。当同步数据与目标库已有数据冲突时(主键/唯一键重复等),将覆盖原来的冲突数据。\n\n场景区别:\n- 实时迁移场景:不支持。\n- 实时同步场景:支持。","enum":["ignore","stop","overwrite"],"type":"string"},"data_sync_topology_type":{"default":"one2one","description":"数据同步拓扑。数据同步功能支持多种同步拓扑,您可以根据业务需求规划您的同步实例。参考链接。取值:\n- one2one:一对一。\n- one2many:一对多。\n- many2one:多对一。","enum":["one2one","one2many","many2one"],"type":"string"},"ddl_trans":{"default":true,"description":"对象同步范围:同步增量阶段是否同步DDL。取值:\n- true:增量阶段同步DDL。\n- false:增量阶段不同步DDL。","type":"boolean"},"dml_types":{"description":"DML同步类型。","type":"string"},"filter_ddl_policy":{"description":"过滤DDL策略。取值:\n- drop_database\n\n场景区别:\n- 实时迁移场景:MySQL迁移可填\"\",表示不过滤DROP DATABASE。\n- 实时同步场景:MySQL同步只能填\"drop_database\"。","enum":["drop_database"],"type":"string"},"increment_read_mode":{"description":"oracle-gausssdb增量读取方式:logminer,xstream","type":"string"},"index_trans":{"default":true,"description":"对象同步范围:是否同步普通索引。DRS将默认同步主键/唯一索引,普通索引是指除主键/唯一索引以外的其他类型索引。取值:\n- true:将会同步全部的索引。\n- false:仅同步主键/唯一索引,普通索引不会同步。","type":"boolean"},"is_create_table_with_index":{"description":"索引与表结构是否同时建立。","type":"boolean"},"support_ddl_info":{"description":"增量支持的DDL。取值:\n- \"CREATE_TABLE,ADD_COLUMN,MODIFY_COLUMN,CHANGE_COLUMN,DROP_INDEX,ADD_INDEX,CREATE_INDEX,RENAME_INDEX\"。\n- 含义解释:\n- CREATE_TABLE:创建表。\n- ADD_COLUMN:加列。\n- MODIFY_COLUMN:改列属性。\n- CHANGE_COLUMN:改列属性。\n- DROP_INDEX:删除索引。\n- ADD_INDEX:加索引。\n- CREATE_INDEX:创建索引。\n- RENAME_INDEX:重命名索引。\n- 使用提示:\n1.一对一,一对多场景,如果业务上认为源和目标应该使用保持严格一致,那么高危类DDL也应该勾选并同步。\n2.一对一,一对多场景,如果业务上确定某个高危DDL不应该发生,则可以不勾选同步高危类DDL,这样DRS将拦截过滤这个DDL,从而起到保护目标数据的作用,但需要知晓过滤DDL的附带问题是可能导致同步失败,例如过滤删列动作。\n3.多对一数据聚合场景,最佳实践是推荐只选择同步加列DDL,其他大部分DDL同步都因目标表修改而导致其他任务失败/数据不一致的情况发生,常见情况有:a、同步truncate导致目标数据全部被清空; b、同步创建索引导致目标表被锁定; c、同步rename导致其他任务找不到目标表而失败;d、同步改列导致其他任务因数据类型不兼容而失败;","enum":["CREATE_TABLE","ADD_COLUMN","MODIFY_COLUMN","CHANGE_COLUMN","DROP_INDEX","ADD_INDEX","CREATE_INDEX","RENAME_INDEX"],"type":"string"},"sync_type_policy":{"description":"同步数据类型。取值:supportAllType(同步所有类型),tableData(同步数据),tableStructure(同步表结构),constraintData(索引同步)。\n说明:除supportAllType以外,其他类型可组合填写,例如:\"tableData,tableStructure\" 。","type":"string"}},"type":"object"},"PrecheckFailSubJobResult":{"description":"失败子任务详情。","properties":{"check_result":{"description":"子任务检查结果。","type":"string"},"id":{"description":"子任务ID。","type":"string"},"name":{"description":"子任务名称。","type":"string"}},"type":"object"},"PrecheckResult":{"description":"预检查项结果。","properties":{"data":{"description":"失败数据。","type":"string"},"failed_reason":{"description":"失败原因。","type":"string"},"failed_sub_jobs":{"description":"失败子任务详情。","items":{"$ref":"#/definitions/PrecheckFailSubJobResult"},"type":"array"},"group":{"description":"检查项分组。","type":"string"},"is_skipped":{"description":"是否已跳过。","type":"boolean"},"is_support_skip":{"description":"是否支持跳过。","type":"boolean"},"item":{"description":"检查项。","type":"string"},"raw_error_msg":{"description":"失败详情。","type":"string"},"result":{"description":"检查结果。取值:\n- PASSED:检查通过。\n- ALARM:检查告警项。\n- FAILED:检查失败。","enum":["PASSED","ALARM","FAILED"],"type":"string"}},"type":"object"},"ProgressCompleteInfo":{"description":"全量迁移进度。","properties":{"completed":{"description":"完成进度。","type":"string"},"remaining_time":{"description":"预计剩余时间。","type":"string"}},"type":"object"},"PublicIpConfig":{"description":"租户公网IP信息","properties":{"id":{"description":"指定公网IP的ID","type":"string"},"public_ip":{"description":"指定公网IP","type":"string"},"type":{"description":"指定公网IP绑定任务的类型:\n- 主备任务:主是master,备是slave\n- 其他固定为master","enum":["master","slave"],"type":"string"}},"required":["id","public_ip","type"],"type":"object"},"QueryMetricResult":{"description":"Node节点指标项。","properties":{"apply_average_commit_time":{"description":"事务平均提交时间。","type":"string"},"apply_average_execute_time":{"description":"事务平均执行时间。","type":"string"},"apply_current_state":{"description":"同步状态。","type":"string"},"apply_ddl_rate":{"description":"DDL TPS。","type":"string"},"apply_rows_rate":{"description":"写目标库频率。","type":"string"},"apply_transactions_rate":{"description":"DML TPS。","type":"string"},"cpu_util":{"description":"CPU使用率。","type":"string"},"disk_read_bytes_rate":{"description":"磁盘读吞吐量。","type":"string"},"disk_write_bytes_rate":{"description":"磁盘写吞吐量。","type":"string"},"job_id":{"description":"任务ID。","type":"string"},"mem_util":{"description":"内存使用率。","type":"string"},"network_incoming_bytes_rate":{"description":"网络输入吞吐量。","type":"string"},"network_outgoing_bytes_rate":{"description":"网络输出吞吐量。","type":"string"},"node_id":{"description":"实例ID。","type":"string"},"time_stamp":{"description":"上报时间。","format":"date","type":"string"}},"type":"object"},"QueryMigrationObjectProgressInfo":{"description":"迁移中对象进度信息体。","properties":{"create_time":{"description":"数据生成时间。","format":"date","type":"string"},"end_time":{"description":"结束时间。","type":"string"},"full_complete_time":{"description":"全量完成时间。","format":"date","type":"string"},"full_start_time":{"description":"全量开始时间。","format":"date","type":"string"},"incr_start_time":{"description":"增量开始时间。","format":"date","type":"string"},"migration_object_overview":{"description":"概览详情。","items":{"$ref":"#/definitions/MigrationObjectOverviewInfo"},"type":"array"}},"type":"object"},"QueryNetworkResult":{"description":"测试连接结果响应体。","properties":{"error_code":{"description":"测试连接失败错误码。","type":"string"},"error_msg":{"description":"测试连接失败错误内容。","type":"string"},"ip":{"description":"测试连接IP。","type":"string"},"result":{"description":"测试连接结果。","type":"string"},"status":{"description":"测试连接是否成功。取值:\n- success:成功。\n- failed:不成功。","enum":["success","failed"],"type":"string"},"success":{"description":"测试连接是否成功。","type":"boolean"}},"required":["success","status"],"type":"object"},"QueryPreCheckResult":{"description":"预检查结果信息体。","properties":{"job_direction":{"description":"迁移方向。","type":"string"},"precheck_results":{"description":"预检查各项结果。","items":{"$ref":"#/definitions/PrecheckResult"},"type":"array"},"process":{"description":"预检查进度百分比。","type":"string"},"rds_instance_id":{"description":"数据库实例ID。","type":"string"},"result":{"description":"返回的预检查结果是否通过。","type":"boolean"},"total_passed_rate":{"description":"预检查通过百分比。","type":"string"}},"type":"object"},"ResourceTag":{"description":"标签信息体。","properties":{"key":{"description":"标签键。\n约束:最大长度36,只能包含字母、数字、下划线、中划线和中文。","maxLength":36,"minLength":1,"type":"string"},"value":{"description":"标签值。标签的值可以包含任意语种字母、数字、空格和_ . : / = + - @。","maxLength":43,"minLength":1,"type":"string"}},"type":"object"},"SpeedLimitInfo":{"description":"限速信息体。\n- 限速:自定义的最大迁移速度,迁移过程中的迁移速度将不会超过该速度。\n- 不限速:对迁移速度不进行限制,通常会最大化使用源数据库的出口带宽。该流速模式同时会对源数据库造成读消耗,消耗取决于源数据库的出口带宽。比如:源数据库的出口带宽为100MB/s,假设高速模式使用了80%带宽,则迁移对源数据库将造成80MB/s的读操作IO消耗。","properties":{"begin":{"description":"开始限速时间,此时间为UTC时间,开始时间为整时,若有分钟,则会忽略,格式为hh:mm,小时数为两位,例如:01:00。","example":"01:00","type":"string"},"end":{"description":"结束时间,此时间为UTC时间,输入必须为59分结尾,格式为hh:mm,例如:15:59。","example":"15:59","type":"string"},"speed":{"description":"限速值,取值范围为1~9999,单位为MB/s。","example":"50","type":"string"}},"required":["begin","end","speed"],"type":"object"},"SupportImportFileResult":{"description":"对象导入信息。","properties":{"file_size":{"description":"文件导入阈值。","type":"string"},"previous_select":{"description":"上一次选择对象的方式。","type":"string"}},"type":"object"},"TableLineCompareDetailInfo":{"description":"行数对比任务表级详情。","properties":{"difference_row_num":{"description":"差异值。","type":"string"},"message":{"description":"信息。","type":"string"},"source_row_num":{"description":"源库表行数。","type":"string"},"source_table_name":{"description":"源库表名称。","type":"string"},"status":{"description":"对比结果。取值:\n- CONSISTENT:一致。\n- INCONSISTENT:不一致。\n- COMPARING:正在对比。\n- WAITING_FOR_COMPARISON:等待对比。\n- FAILED_TO_COMPARE:对比失败。\n- TARGET_DB_NOT_EXIST:目标库不存在。\n- CAN_NOT_COMPARE:无法对比。","enum":["CONSISTENT","INCONSISTENT","COMPARING","WAITING_FOR_COMPARISON","FAILED_TO_COMPARE","TARGET_DB_NOT_EXIST","CAN_NOT_COMPARE"],"type":"string"},"target_row_num":{"description":"目标库表行数。","type":"string"},"target_table_name":{"description":"目标库表名称。","type":"string"}},"type":"object"},"TaskLogInfo":{"description":"日志查询结果信息体。","properties":{"create_time":{"description":"日志时间。","type":"string"},"level":{"description":"日志级别。","type":"string"},"message":{"description":"日志信息。","type":"string"}},"type":"object"},"TuningParamInfo":{"description":"高级设置信息体。","properties":{"full_sync":{"description":"全量调优参数。","items":{"$ref":"#/definitions/TuningParameter"},"type":"array"},"incre_apply":{"description":"增量回放调优参数。","items":{"$ref":"#/definitions/TuningParameter"},"type":"array"},"incre_capture":{"description":"增量抓取调优参数。","items":{"$ref":"#/definitions/TuningParameter"},"type":"array"},"incre_relay":{"description":"增量日志拉取调优参数。","items":{"$ref":"#/definitions/TuningParameter"},"type":"array"}},"required":["full_sync","incre_capture","incre_apply","incre_relay"],"type":"object"},"TuningParameter":{"description":"调优参数。","properties":{"availability":{"description":"是否可用。","type":"boolean"},"param_name":{"description":"参数名称。","type":"string"},"param_value":{"description":"参数取值。","type":"string"}},"required":["param_name","param_value","availability"],"type":"object"},"UserMigrationInfo":{"description":"用户迁移信息体。","properties":{"is_migrate_user":{"description":"是否迁移用户。","type":"boolean"},"is_set_password":{"description":"是否统一重置密码。取值:\n- true:重置密码为统一密码。\n- false:不统一重置密码。\n当前支持的场景: \n- 实时迁移场景:MySQL迁移。","type":"boolean"},"password":{"description":"重置后的统一密码。统一重置密码为true时必填。\n约束:密码不能为空。","type":"string"},"role_list":{"items":{"$ref":"#/definitions/UserMigrationRole"},"type":"array"},"user_list":{"items":{"$ref":"#/definitions/UserMigrationList"},"type":"array"}},"required":["is_migrate_user","is_set_password"],"type":"object"},"UserMigrationList":{"description":"用户迁移信息用户列表字段。当前支持的场景: \n- 实时迁移场景:MySQL迁移,MongoDB迁移。","properties":{"account":{"description":"用户。","type":"string"},"id":{"description":"用户ID。","type":"string"},"is_set_password":{"description":"是否重置该用户密码。当前支持的场景:\n- 实时迁移场景:MySQL迁移。","type":"boolean"},"password":{"description":"重置后的密码。统一重置密码或单个用户重置密码为true时必填,约束:密码不能为空。","type":"string"}},"required":["id","account"],"type":"object"},"UserMigrationRole":{"description":"用户迁移信息角色列表字段。当前支持的场景: \n- 实时迁移场景:MongoDB迁移。","properties":{"role":{"description":"角色。","type":"string"}},"required":["role"],"type":"object"}},"description":null,"group_id":"506538835790436b8e209e5a6684d485","host":"drs.cn-north-4.myhuaweicloud.com","id":"bdc91bd860374e02866a51b71f0d3dff","info_version":"v5","method":"get","name":"ListAsyncJobDetail","parameters":{},"paths":{"/v5/{project_id}/batch-async-jobs/{async_job_id}":{"get":{"consumes":["application/json"],"description":"查询租户指定ID批量异步任务详情,默认为任务的“create_time”降序排序获取结果,支持分页查询。","operationId":"ListAsyncJobDetail","parameters":[{"description":"租户在某一Region下的Project ID。\n获取方法请参见[获取项目ID。](https://support.huaweicloud.com/api-drs/drs_api_0106.html)","in":"path","name":"project_id","required":true,"type":"string"},{"description":"批量异步创建的任务ID,由创建批量异步任务接口返回。","in":"path","name":"async_job_id","required":true,"type":"string"},{"default":"application/json","description":"发送的实体的MIME类型。推荐用户默认使用application/json,如果API是对象、镜像上传等接口,媒体类型可按照流类型的不同进行确定。","in":"header","name":"Content-Type","required":true,"type":"string"},{"description":"从IAM服务获取的用户Token。\n\n用户Token也就是调用获取用户Token接口的响应值,该接口是唯一不需要认证的接口。\n\n请求响应成功后在响应消息头中包含的“X-Subject-Token”的值即为Token值。","in":"header","name":"X-Auth-Token","required":true,"type":"string"},{"default":"en-us","description":"请求语言类型。","enum":["en-us","zh-cn"],"in":"header","name":"X-Language","required":false,"type":"string"},{"description":"偏移量,表示查询该偏移量后面的记录。","format":"int32","in":"query","name":"offset","required":false,"type":"integer"},{"description":"查询返回记录的数量限制。","format":"int32","in":"query","name":"limit","required":false,"type":"integer"}],"produces":["application/json"],"responses":{"200":{"description":"OK","examples":{"application/json":{"jobs":[{"alarm_notify":{"alarm_to_user":true,"delay_time":60,"topic_urn":"urn:smn:cn-north-4:f2c2468c3ee7410c862a461ca073d2f2:test"},"base_info":{"charging_mode":"on_demand","description":"","engine_type":"oracle-to-gaussdbv5","enterprise_project_id":"0","expired_days":14,"job_direction":"up","job_type":"sync","name":"DRS-1234","net_type":"eip","tags":[{"key":"test","value":"test"}],"task_type":"FULL_INCR_TRANS"},"create_time":"2022-11-07T16:15:18Z","id":"c7debc9c-8e09-4a5d-8dd6-cc44f78jb20r","node_info":{"spec":{"node_type":"medium"}},"policy_config":{"ddl_trans":false},"source_endpoint":[{"db_type":"oracle","endpoint":{"db_name":"serviceName.orcl","db_port":"1521","db_user":"ORACLE_USER","endpoint_name":"oracle","id":"f59e6118-da89-4fdb-9b98-65f56709928a","ip":"******"},"endpoint_role":"so","endpoint_type":"offline","ssl":{"ssl_link":false}}],"speed_limit":[{"begin":"16:00","end":"15:59","speed":"10"}],"status":"CONFIGURATION","target_endpoint":[{"cloud":{"az_code":"cn-north-4a,cn-north-4g,cn-north-4c","project_id":"9dc8c0f3f74c4dbb23c29cf0318ee561","region":"cn-north-4"},"db_type":"gaussdbv5","endpoint":{"db_user":"root","endpoint_name":"cloud_gaussdbv5","id":"10deb576-8885-473b-a213-4d76e668dc0d","instance_id":"c2c7579bc09c490b9d8009db715aeb0ain14"},"endpoint_role":"ta","endpoint_type":"cloud","vpc":{"security_group_id":"039a3s89-665a-43e2-9b4f-bda7d9ee148d","subnet_id":"2cb54324-ae63-4fbb-85b7-7d59f4a88f8f","vpc_id":"2cb5d364-ae63-4fbb-85b7-7d59f4a88f8f"}}]},{"base_info":{"charging_mode":"on_demand","description":"","engine_type":"oracle-to-gaussdbv5","enterprise_project_id":"0","expired_days":14,"job_direction":"up","job_type":"sync","name":"DRS-2345","net_type":"vpn","tags":[{"key":"test","value":"test"}],"task_type":"FULL_INCR_TRANS"},"create_time":"2022-11-05T15:32:22Z","id":"dc6016cf-f3b6-4c2d-b4d7-5084b0fjb20r","node_info":{"spec":{"node_type":"high"}},"policy_config":{"ddl_trans":false},"source_endpoint":[{"db_type":"oracle","endpoint":{"db_name":"serviceName.orcl","db_port":"1521","db_user":"ORACLE_USER","endpoint_name":"oracle","id":"6a2aea81-c01d-4313-b93e-6a17f9351c51","ip":"******"},"endpoint_role":"so","endpoint_type":"offline","ssl":{"ssl_link":false}}],"status":"INCRE_TRANSFER_STARTED","target_endpoint":[{"cloud":{"az_code":"cn-north-4a,cn-north-4g,cn-north-4c","project_id":"9dc8c0f3f74c4dbb23c29cf0318ee561","region":"cn-north-4"},"db_type":"gaussdbv5","endpoint":{"db_user":"root","endpoint_name":"cloud_gaussdbv5","id":"f59e6118-da89-4fdb-9b98-65f56709928a","instId":"c2c7579bc09c490b9d8009db715aeb0ain14"},"endpoint_role":"ta","endpoint_type":"cloud","ssl":{"ssl_link":false},"vpc":{"security_group_id":"039a3s89-665a-43e2-9b4f-bda7d9ee148d","subnet_id":"2cb54324-ae63-4fbb-85b7-7d59f4a88f8f","vpc_id":"2cb5d364-ae63-4fbb-85b7-7d59f4a88f8f"}}]}],"total_count":2}},"schema":{"$ref":"#/definitions/BatchAsyncJobDetailResp"}},"400":{"description":"Bad Request","examples":{"application/json":{"error_code":"DRS.10000001","error_msg":"Failed."}},"schema":{"$ref":"#/definitions/ErrorResp"}}},"summary":"查询指定ID批量异步任务详情","tags":["批量异步实例管理"],"x-is-registered":"Y","x-order":4,"x-request-examples-description-1":"查询租户指定ID批量异步任务详情。","x-request-examples-url-1":"https://{endpoint}/v5/054ba152d480d55b2f5dc0069e7ddef0/batch-async-jobs/bd4193aa-072d-4ce6-beec-adffc7252341","x-support-sdk":"Y"}}},"product_short":"DRS","region_id":"cn-north-4","schemes":["HTTPS"],"security_definitions":null,"summary":"查询指定ID批量异步任务详情","tags":"批量异步实例管理","uri":null,"version":"2.0"}