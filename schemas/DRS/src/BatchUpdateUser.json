{"base_path":"/","components":null,"consumes":"[\"application/json\"]","definitions":{"BatchUpdateSrcUserReq":{"description":"批量更新迁移用户请求体","properties":{"jobs":{"description":"批量更新迁移用户请求列表","items":{"$ref":"#/definitions/UpdateUserReq","description":""},"type":"array"}},"required":["jobs"]},"BatchUpdateSrcUserResp":{"description":"更新迁移用户响应体","properties":{"all_counts":{"description":"总数","type":"integer"},"results":{"description":"迁移用户信息","items":{"$ref":"#/definitions/QueryUserResp","description":""},"type":"array"}}},"QueryRoleDetailResp":{"description":"迁移角色响应体","properties":{"comment":{"description":"说明。","type":"string"},"inherits_roles":{"description":"继承的角色。","items":{"description":"","type":"string"},"type":"array"},"is_transfer":{"description":"是否支持迁移。","type":"boolean"},"privileges":{"description":"角色权限。","type":"string"},"role":{"description":"角色。","type":"string"},"selected":{"description":"是否选择。","type":"boolean"}}},"QueryUserDetailResp":{"description":"迁移用户响应体","properties":{"account":{"description":"账户。","type":"string"},"comment":{"description":"说明。","type":"string"},"id":{"description":"用户账户id。","type":"string"},"is_transfer":{"description":"是否支持迁移","type":"boolean"},"no_parent_account":{"description":"无法同步父子关系的父用户","type":"string"},"no_privileges":{"description":"无法同步的用户权限","type":"string"},"parent_account":{"description":"父用户","type":"string"},"password":{"description":"密码。","type":"string"},"privileges":{"description":"权限","readOnly":true,"type":"string"},"roles":{"description":"账号拥有的角色","items":{"type":"string"},"type":"array"},"selected":{"description":"是否选择。","type":"boolean"}},"type":"object"},"QueryUserResp":{"description":"迁移用户响应体","properties":{"is_global_password":{"description":"是否使用全局密码","type":"string"},"is_success":{"description":"是否成功","type":"boolean"},"job_id":{"description":"任务id","type":"string"},"message":{"description":"错误码","type":"string"},"roles_list":{"description":"角色列表数据","items":{"$ref":"#/definitions/QueryRoleDetailResp","description":""},"type":"array"},"user_list":{"description":"用户列表数据","items":{"$ref":"#/definitions/QueryUserDetailResp","description":""},"type":"array"}}},"UpdateUserReq":{"description":"更新迁移用户请求体","properties":{"is_migrate_user":{"description":"是否迁移用户","type":"boolean"},"is_set_password":{"description":"是否设置密码","type":"boolean"},"is_sync_object_privilege":{"description":"是否同步权限,不填默认为false,PG同步使用。","type":"boolean"},"job_id":{"description":"任务ID","type":"string"},"list":{"description":"用户迁移信息,迁移用户时必填","items":{"$ref":"#/definitions/UserAccountVO"},"type":"array"},"password":{"description":"全局密码。","type":"string"},"user_roles":{"description":"角色迁移信息,迁移用户时必填","items":{"$ref":"#/definitions/UserRoleVO"},"type":"array"}},"required":["job_id","is_set_password","is_migrate_user"]},"UserAccountVO":{"description":"用户信息","properties":{"account":{"description":"用户","type":"string"},"comment":{"description":"说明","type":"string"},"id":{"description":"用户账户ID。","type":"string"},"is_set_password":{"description":"是否重置密码。","type":"boolean"},"is_transfer":{"description":"是否支持迁移","type":"boolean"},"password":{"description":"密码","type":"string"},"privileges":{"description":"权限列表","items":{"description":"","type":"string"},"type":"array"},"roles":{"description":"角色","items":{"description":"","type":"string"},"type":"array"},"selected":{"description":"是否选择。","type":"boolean"}},"required":["account","id","is_transfer","roles","selected"]},"UserRoleVO":{"description":"用户的角色信息","properties":{"comment":{"description":"说明","type":"string"},"inherits_roles":{"description":"继承角色列表","items":{"description":"","type":"string"},"type":"array"},"is_transfer":{"description":"是否支持迁移。","type":"boolean"},"privileges":{"description":"权限","type":"string"},"role":{"description":"角色","type":"string"},"selected":{"description":"是否选择。","type":"boolean"}},"required":["is_transfer","privileges","role"]}},"description":null,"group_id":"506538835790436b8e209e5a6684d485","host":"drs.cn-north-4.myhuaweicloud.com","id":"8715ff3d777c4d1bbb5b337f33da40e8","info_version":"v3","method":"put","name":"BatchUpdateUser","parameters":{},"paths":{"/v3/{project_id}/jobs/batch-update-user":{"put":{"description":"数据库的迁移过程中,迁移用户需要进行单独处理,该接口可以批量设置需要迁移的用户和角色。","operationId":"BatchUpdateUser","parameters":[{"description":"租户在某一region下的project ID。","in":"path","name":"project_id","required":true,"type":"string","x-order":1},{"description":"从IAM服务获取的用户Token","in":"header","name":"X-Auth-Token","required":true,"type":"string","x-order":2},{"default":"en-us","description":"请求语言类型","enum":["en-us","zh-cn"],"in":"header","name":"X-Language","required":false,"type":"string","x-example":"en-us","x-order":3},{"default":"application/json","description":"指定类型为application/json。","in":"header","name":"Content-Type","required":true,"type":"string","x-example":"application/json","x-order":4},{"description":"批量更新迁移用户请求体","in":"body","name":"requestBody","required":true,"schema":{"$ref":"#/definitions/BatchUpdateSrcUserReq"},"x-order":5}],"responses":{"200":{"description":"OK","examples":{"application/json":{"all_counts":1,"results":[{"is_success":true,"job_id":"71604be1-f441-42f1-a09f-c5a52f0djb15"}]}},"schema":{"$ref":"#/definitions/BatchUpdateSrcUserResp"}},"400":{"description":"Bad Request"}},"summary":"批量更新迁移用户信息","tags":["实时迁移管理"],"x-constraint":"仅实时迁移支持。","x-is-registered":"Y","x-name":"批量更新迁移用户信息","x-order":30,"x-publishpath":"BatchUpdateUser","x-request-examples-1":{"jobs":[{"is_migrate_user":true,"is_set_password":false,"job_id":"71604be1-f441-42f1-a09f-c5a52f0djb15","list":[{"account":"fastunit.test8","comment":"","id":"fastunit.test8","is_set_password":true,"is_transfer":true,"password":null,"privileges":null,"roles":["admin.clusterAdmin"],"selected":true}],"password":"","user_roles":[{"comment":"","inherits_roles":["astunit.roletest1"],"is_transfer":true,"privileges":"[{u''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''resource'''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''': {u''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''db'''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''': u''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''fastunit'''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''', u''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''collection'''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''': u''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''coll''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''}, u''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''actions'''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''': [u''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''find'''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''', u''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''insert'''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''', u''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''remove'''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''', u''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''update'''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''']}]","role":"fastunit.roletest2","selected":true}]}]},"x-request-examples-2":{"jobs":[{"is_migrate_user":false,"is_set_password":false,"job_id":"a281f62f-4631-45d6-a2d3-679a9f4jb105"}]},"x-request-examples-description-1":"设置迁移用户示例","x-request-examples-description-2":"不迁移用户示例","x-request-examples-text-1":{"jobs":[{"is_migrate_user":true,"is_set_password":false,"job_id":"71604be1-f441-42f1-a09f-c5a52f0djb15","list":[{"account":"fastunit.test8","comment":"","id":"fastunit.test8","is_set_password":true,"is_transfer":true,"password":null,"privileges":null,"roles":["admin.clusterAdmin"],"selected":true}],"password":"","user_roles":[{"comment":"","inherits_roles":["astunit.roletest1"],"is_transfer":true,"privileges":"[{u''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''resource'''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''': {u''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''db'''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''': u''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''fastunit'''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''', u''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''collection'''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''': u''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''coll''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''}, u''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''actions'''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''': [u''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''find'''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''', u''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''insert'''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''', u''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''remove'''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''', u''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''update'''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''']}]","role":"fastunit.roletest2","selected":true}]}]},"x-request-examples-text-2":{"jobs":[{"is_migrate_user":false,"is_set_password":false,"job_id":"a281f62f-4631-45d6-a2d3-679a9f4jb105"}]},"x-request-examples-url-1":"https://{endpoint}/v3/054ba152d480d55b2f5dc0069e7ddef0/jobs/batch-update-user","x-request-examples-url-2":"https://{endpoint}/drs/v3/0549a6a31000d4e82fd1c00c3d6f2d76/jobs/batch-update-user","x-scope":"Commercial","x-support-sdk":"Y","x-version":"v3"}}},"product_short":"DRS","region_id":"cn-north-4","schemes":["HTTPS"],"security_definitions":null,"summary":"批量更新迁移用户信息","tags":"实时迁移管理","uri":null,"version":"2.0"}