{"base_path":"/","components":null,"consumes":"[\"application/json\"]","definitions":{"BatchQueryParamReq":{"description":"","properties":{"jobs":{"description":"查询任务ID集合。","items":{"description":"","type":"string"},"type":"array"},"refresh":{"description":"是否重新获取数据库参数,1代表是,0代表否(从缓存中获取),第一次调用时请设置为1。","type":"string"}},"required":["jobs","refresh"]},"BatchQueryParamsResp":{"description":"批量查询数据库参数返回体","properties":{"count":{"description":"总数","format":"int32","type":"integer"},"params_list":{"description":"查询数据库参数响应体","items":{"$ref":"#/definitions/QueryDbParamsResp","description":""},"type":"array"}}},"QueryDbParamsResp":{"description":"数据库参数信息响应体","properties":{"params":{"example":"[{\"group\":\"performance\",\"key\":\"binlog_cache_size\",\"source_value\":\"32768\",\"target_value\":\"4096\",\"compare_result\":\"false\",\"data_type\":\"figure\",\"value_range\":\"4096-16777216\",\"need_restart\":\"false\"},{\"group\":\"performance\",\"key\":\"binlog_stmt_cache_size\",\"source_value\":\"32768\",\"target_value\":\"32768\",\"compare_result\":\"true\",\"data_type\":\"figure\",\"value_range\":\"4096-16777216\",\"need_restart\":\"false\"},{\"group\":\"performance\",\"key\":\"bulk_insert_buffer_size\",\"source_value\":\"8388608\",\"target_value\":\"8388608\",\"compare_result\":\"true\",\"data_type\":\"figure\",\"value_range\":\"0-18446744073709551615\",\"need_restart\":\"false\"},{\"group\":\"common\",\"key\":\"character_set_server\",\"source_value\":\"utf8\",\"target_value\":\"utf8\",\"compare_result\":\"true\",\"value_range\":\"utf8|latin1|gbk|utf8mb4\",\"need_restart\":\"true\"},{\"group\":\"common\",\"key\":\"collation_server\",\"source_value\":\"utf8_general_ci\",\"target_value\":\"utf8_general_ci\",\"compare_result\":\"true\",\"value_range\":\"latin1_german1_ci|latin1_swedish_ci|latin1_danish_ci|latin1_german2_ci|latin1_bin|latin1_general_ci|latin1_general_cs|latin1_spanish_ci|gbk_chinese_ci|gbk_bin|utf8_general_ci|utf8_bin|utf8_unicode_ci|utf8_icelandic_ci|utf8_latvian_ci|utf8_romanian_ci|utf8_slovenian_ci|utf8_polish_ci|utf8_estonian_ci|utf8_spanish_ci|utf8_swedish_ci|utf8_turkish_ci|utf8_czech_ci|utf8_danish_ci|utf8_lithuanian_ci|utf8_slovak_ci|utf8_spanish2_ci|utf8_roman_ci|utf8_persian_ci|utf8_esperanto_ci|utf8_hungarian_ci|utf8_sinhala_ci|utf8mb4_general_ci|utf8mb4_bin|utf8mb4_unicode_ci|utf8mb4_icelandic_ci|utf8mb4_latvian_ci|utf8mb4_romanian_ci|utf8mb4_slovenian_ci|utf8mb4_polish_ci|utf8mb4_estonian_ci|utf8mb4_spanish_ci|utf8mb4_swedish_ci|utf8mb4_turkish_ci|utf8mb4_czech_ci|utf8mb4_danish_ci|utf8mb4_lithuanian_ci|utf8mb4_slovak_ci|utf8mb4_spanish2_ci|utf8mb4_roman_ci|utf8mb4_persian_ci|utf8mb4_esperanto_ci|utf8mb4_hungarian_ci|utf8mb4_sinhala_ci\",\"need_restart\":\"true\"},{\"group\":\"common\",\"key\":\"connect_timeout\",\"source_value\":\"10\",\"target_value\":\"10\",\"compare_result\":\"true\",\"value_range\":\"2-31536000\",\"need_restart\":\"false\"},{\"group\":\"common\",\"key\":\"explicit_defaults_for_timestamp\",\"source_value\":\"OFF\",\"target_value\":\"OFF\",\"compare_result\":\"true\",\"value_range\":\"ON|OFF\",\"need_restart\":\"true\"},{\"group\":\"performance\",\"key\":\"innodb_buffer_pool_size\",\"source_value\":\"536870912\",\"target_value\":\"536870912\",\"compare_result\":\"true\",\"data_type\":\"figure\",\"value_range\":\"5242880-2147483648\",\"need_restart\":\"true\"},{\"group\":\"common\",\"key\":\"innodb_flush_log_at_trx_commit\",\"source_value\":\"1\",\"target_value\":\"1\",\"compare_result\":\"true\",\"value_range\":\"0|1|2\",\"need_restart\":\"false\"},{\"group\":\"common\",\"key\":\"innodb_lock_wait_timeout\",\"source_value\":\"50\",\"target_value\":\"50\",\"compare_result\":\"true\",\"value_range\":\"1-1073741824\",\"need_restart\":\"false\"},{\"group\":\"performance\",\"key\":\"key_buffer_size\",\"source_value\":\"16777216\",\"target_value\":\"16777216\",\"compare_result\":\"true\",\"data_type\":\"figure\",\"value_range\":\"8-9223372036854771712\",\"need_restart\":\"false\"},{\"group\":\"performance\",\"key\":\"long_query_time\",\"source_value\":\"1.000000\",\"target_value\":\"1.000000\",\"compare_result\":\"true\",\"data_type\":\"figure\",\"value_range\":\"0.03-3600\",\"need_restart\":\"false\"},{\"group\":\"common\",\"key\":\"max_connections\",\"source_value\":\"800\",\"target_value\":\"800\",\"compare_result\":\"true\",\"value_range\":\"1-100000\",\"need_restart\":\"false\"},{\"group\":\"common\",\"key\":\"net_read_timeout\",\"source_value\":\"30\",\"target_value\":\"30\",\"compare_result\":\"true\",\"value_range\":\"1-31536000\",\"need_restart\":\"false\"},{\"group\":\"common\",\"key\":\"net_write_timeout\",\"source_value\":\"60\",\"target_value\":\"60\",\"compare_result\":\"true\",\"value_range\":\"1-31536000\",\"need_restart\":\"false\"},{\"group\":\"performance\",\"key\":\"read_buffer_size\",\"source_value\":\"262144\",\"target_value\":\"262144\",\"compare_result\":\"true\",\"data_type\":\"figure\",\"value_range\":\"8192-2147479552\",\"need_restart\":\"false\"},{\"group\":\"performance\",\"key\":\"read_rnd_buffer_size\",\"source_value\":\"524288\",\"target_value\":\"524288\",\"compare_result\":\"true\",\"data_type\":\"figure\",\"value_range\":\"1-2147483647\",\"need_restart\":\"false\"},{\"group\":\"performance\",\"key\":\"sort_buffer_size\",\"source_value\":\"262144\",\"target_value\":\"262144\",\"compare_result\":\"true\",\"data_type\":\"figure\",\"value_range\":\"32768-18446744073709551615\",\"need_restart\":\"false\"},{\"group\":\"performance\",\"key\":\"sync_binlog\",\"source_value\":\"1\",\"target_value\":\"1\",\"compare_result\":\"true\",\"data_type\":\"figure\",\"value_range\":\"0-4294967295\",\"need_restart\":\"false\"},{\"group\":\"common\",\"key\":\"tx_isolation\",\"source_value\":\"REPEATABLE-READ\",\"target_value\":\"REPEATABLE-READ\",\"compare_result\":\"true\",\"value_range\":\"READ-UNCOMMITTED|READ-COMMITTED|REPEATABLE-READ|SERIALIZABLE\",\"need_restart\":\"false\"}]","items":{"$ref":"#/definitions/params"},"type":"array"}}},"params":{"description":"数据参数信息体","properties":{"compare_result":{"description":"参数对比结果","enum":["true","false"],"example":"false","type":"string"},"data_type":{"description":"参数类型","example":"figure","type":"string"},"error_code":{"description":"错误码","type":"string"},"error_message":{"description":"错误信息","type":"string"},"group":{"description":"分组。\n- common-常规参数\n- performance-性能参数","enum":["common","performance"],"example":"performance","type":"string"},"key":{"description":"参数名","example":"binlog_cache_size","type":"string"},"need_restart":{"description":"是否需要重启","enum":["true","false"],"example":"false","type":"string"},"source_value":{"description":"源数据库参数值","type":"string"},"target_value":{"description":"目标数据库参数值","type":"string"},"value_range":{"description":"参数范围","example":"4096-16777216","type":"string"}},"type":"object"}},"description":null,"group_id":"506538835790436b8e209e5a6684d485","host":"drs.cn-north-4.myhuaweicloud.com","id":"bfe6e7c62e1a4b65b1a1445a37da6279","info_version":"v3","method":"post","name":"BatchShowParams","parameters":{},"paths":{"/v3/{project_id}/jobs/batch-get-params":{"post":{"description":"在进行数据库迁移时,为了确保迁移成功后业务应用的使用不受影响,数据复制服务提供了参数对比功能帮助您进行源库和目标库参数一致性对比,此接口可以获取源库和目标库的数据库参数。","operationId":"BatchShowParams","parameters":[{"description":"租户在某一region下的project ID。","in":"path","name":"project_id","required":true,"type":"string","x-order":1},{"description":"从IAM服务获取的用户Token","in":"header","name":"X-Auth-Token","required":true,"type":"string","x-order":2},{"default":"en-us","description":"请求语言类型","enum":["en-us","zh-cn"],"in":"header","name":"X-Language","required":false,"type":"string","x-example":"en-us","x-order":3},{"default":"application/json","description":"指定类型为application/json。","in":"header","name":"Content-Type","required":true,"type":"string","x-example":"application/json","x-order":4},{"description":"批量查询任务信息请求列表","in":"body","name":"requestBody","required":true,"schema":{"$ref":"#/definitions/BatchQueryParamReq"},"x-order":5}],"responses":{"202":{"description":"Accepted","examples":{"application/json":{"count":1,"params_list":[{"params":[{"compare_result":"false","data_type":"figure","group":"performance","key":"binlog_cache_size","need_restart":"false","source_value":"16384","target_value":"32768","value_range":"4096-16777216"},{"compare_result":"true","data_type":"figure","group":"performance","key":"binlog_stmt_cache_size","need_restart":"false","source_value":"32768","target_value":"32768","value_range":"4096-16777216"},{"compare_result":"true","data_type":"figure","group":"performance","key":"bulk_insert_buffer_size","need_restart":"false","source_value":"8388608","target_value":"8388608","value_range":"0-18446744073709551615"},{"compare_result":"true","data_type":null,"group":"common","key":"character_set_server","need_restart":"true","source_value":"utf8","target_value":"utf8","value_range":"utf8|latin1|gbk|utf8mb4"},{"compare_result":"true","data_type":null,"group":"common","key":"collation_server","need_restart":"true","source_value":"utf8_general_ci","target_value":"utf8_general_ci","value_range":"latin1_german1_ci|latin1_swedish_ci|latin1_danish_ci|latin1_german2_ci|latin1_bin|latin1_general_ci|latin1_general_cs|latin1_spanish_ci|gbk_chinese_ci|gbk_bin|utf8_general_ci|utf8_bin|utf8_unicode_ci|utf8_icelandic_ci|utf8_latvian_ci|utf8_romanian_ci|utf8_slovenian_ci|utf8_polish_ci|utf8_estonian_ci|utf8_spanish_ci|utf8_swedish_ci|utf8_turkish_ci|utf8_czech_ci|utf8_danish_ci|utf8_lithuanian_ci|utf8_slovak_ci|utf8_spanish2_ci|utf8_roman_ci|utf8_persian_ci|utf8_esperanto_ci|utf8_hungarian_ci|utf8_sinhala_ci|utf8mb4_general_ci|utf8mb4_bin|utf8mb4_unicode_ci|utf8mb4_icelandic_ci|utf8mb4_latvian_ci|utf8mb4_romanian_ci|utf8mb4_slovenian_ci|utf8mb4_polish_ci|utf8mb4_estonian_ci|utf8mb4_spanish_ci|utf8mb4_swedish_ci|utf8mb4_turkish_ci|utf8mb4_czech_ci|utf8mb4_danish_ci|utf8mb4_lithuanian_ci|utf8mb4_slovak_ci|utf8mb4_spanish2_ci|utf8mb4_roman_ci|utf8mb4_persian_ci|utf8mb4_esperanto_ci|utf8mb4_hungarian_ci|utf8mb4_sinhala_ci"},{"compare_result":"true","data_type":null,"group":"common","key":"connect_timeout","need_restart":"false","source_value":"10","target_value":"10","value_range":"2-31536000"},{"compare_result":"true","data_type":null,"group":"common","key":"explicit_defaults_for_timestamp","need_restart":"true","source_value":"OFF","target_value":"OFF","value_range":"ON|OFF"},{"compare_result":"true","data_type":"figure","group":"performance","key":"innodb_buffer_pool_size","need_restart":"true","source_value":"536870912","target_value":"536870912","value_range":"5242880-2147483648"},{"compare_result":"true","data_type":null,"group":"common","key":"innodb_flush_log_at_trx_commit","need_restart":"false","source_value":"1","target_value":"1","value_range":"0|1|2"},{"compare_result":"true","data_type":null,"group":"common","key":"innodb_lock_wait_timeout","need_restart":"false","source_value":"50","target_value":"50","value_range":"1-1073741824"},{"compare_result":"true","data_type":"figure","group":"performance","key":"key_buffer_size","need_restart":"false","source_value":"16777216","target_value":"16777216","value_range":"8-9223372036854771712"},{"compare_result":"true","data_type":"figure","group":"performance","key":"long_query_time","need_restart":"false","source_value":"1.000000","target_value":"1.000000","value_range":"0.03-3600"},{"compare_result":"true","data_type":null,"group":"common","key":"max_connections","need_restart":"false","source_value":"800","target_value":"800","value_range":"1-100000"},{"compare_result":"true","data_type":null,"group":"common","key":"net_read_timeout","need_restart":"false","source_value":"30","target_value":"30","value_range":"1-31536000"},{"compare_result":"true","data_type":null,"group":"common","key":"net_write_timeout","need_restart":"false","source_value":"60","target_value":"60","value_range":"1-31536000"},{"compare_result":"true","data_type":"figure","group":"performance","key":"read_buffer_size","need_restart":"false","source_value":"262144","target_value":"262144","value_range":"8192-2147479552"},{"compare_result":"true","data_type":"figure","group":"performance","key":"read_rnd_buffer_size","need_restart":"false","source_value":"524288","target_value":"524288","value_range":"1-2147483647"},{"compare_result":"true","data_type":"figure","group":"performance","key":"sort_buffer_size","need_restart":"false","source_value":"262144","target_value":"262144","value_range":"32768-18446744073709551615"},{"compare_result":"true","data_type":"figure","group":"performance","key":"sync_binlog","need_restart":"false","source_value":"1","target_value":"1","value_range":"0-4294967295"},{"compare_result":"true","data_type":null,"group":"common","key":"tx_isolation","need_restart":"false","source_value":"REPEATABLE-READ","target_value":"REPEATABLE-READ","value_range":"READ-UNCOMMITTED|READ-COMMITTED|REPEATABLE-READ|SERIALIZABLE"}]}]}},"schema":{"$ref":"#/definitions/BatchQueryParamsResp"}},"400":{"description":"Bad Request"}},"summary":"批量获取数据库参数","tags":["公共接口管理"],"x-constraint":"- 目前仅MySQL迁移和MySQL灾备支持参数对比的功能,job_direction为up时才能调用,任务状态为CONFIGURATION才能调用,双主灾备时父任务不支持。\n- 对于上述参数“innodb_buffer_pool_size”,参数对比功能对应用到目标数据库的值做了内控,最大不会超过目标数据库总内存的70%。所以有时候是无法完全和源数据库该参数取值一致,这是为了避免目标数据库设置过大,而导致数据库无法启动,如果您觉得上述最大值偏小,可以在数据库中通过执行命令手动设置更大的值。\n[具体可参考参数对比详细介绍](https://support.huaweicloud.com/usermanual-drs/drs_08_0001.html)","x-is-registered":"Y","x-name":"批量获取数据库参数","x-order":9,"x-publishpath":"BatchShowParams","x-request-examples-1":{"jobs":["140b5236-88ad-43c8-811c-1268453jb101"],"refresh":1},"x-request-examples-description-1":"批量获取数据库参数请求体示例","x-request-examples-text-1":{"jobs":["140b5236-88ad-43c8-811c-1268453jb101"],"refresh":1},"x-request-examples-url-1":"https://{endpoint}/drs/v3/054ba152d480d55b2f5dc0069e7ddef0/jobs/batch-get-params","x-scope":"Commercial","x-support-sdk":"Y","x-version":"v3"}}},"product_short":"DRS","region_id":"cn-north-4","schemes":["HTTPS"],"security_definitions":null,"summary":"批量获取数据库参数","tags":"公共接口管理","uri":null,"version":"2.0"}