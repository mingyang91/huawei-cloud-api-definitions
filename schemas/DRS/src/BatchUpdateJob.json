{"base_path":"/","components":null,"consumes":"[\"application/json\"]","definitions":{"AlarmNotifyInfo":{"description":"异常通知信息","properties":{"alarm_to_user":{"description":"异常告警是否通知用户","type":"boolean"},"delay_time":{"default":0,"description":"订阅延迟时间(单位为s)","format":"int64","maximum":3600,"minimum":1,"type":"integer"},"rpo_delay":{"default":0,"description":"rpo延迟时间","format":"int64","maximum":3600,"minimum":1,"type":"integer"},"rto_delay":{"default":0,"description":"rto延迟时间","format":"int64","maximum":3600,"minimum":1,"type":"integer"},"subscriptions":{"description":"收件方式与信息体","items":{"$ref":"#/definitions/SubscriptionInfo","description":"收件方式与信息体"},"type":"array"}}},"BatchModifyJobReq":{"description":"批量修改任务请求体","properties":{"jobs":{"description":"修改任务请求体","items":{"$ref":"#/definitions/ModifyJobReq","description":""},"type":"array"}},"required":["jobs"]},"BatchModifyJobResp":{"description":"批量修改任务返回体","properties":{"count":{"description":"总数","format":"int32","type":"integer"},"results":{"description":"批量修改任务返回列表","items":{"$ref":"#/definitions/ModifyJobResp","description":""},"type":"array"}}},"Endpoint":{"description":"数据库信息体","properties":{"az_code":{"description":"数据库所在可用区azCode","type":"string"},"cluster_mode":{"default":"Sharding4.0+","description":"MongDB集群4.0及以上版本,当集群实例无法获取到分片节点的IP时,source_endpoint中需要填写,值为:Sharding4.0+。","enum":["Sharding4.0+"],"example":"Sharding4.0+","type":"string"},"db_name":{"description":"服务名serviceName,源库为oracle场景时必填。约束:不能超过128位,不能包含!<>&'\"\\特殊字符。待还原数据库名称是指备份文件中包含的数据库名称,当您选择部分数据库恢复时,需要选择恢复一个或者多个数据库。","type":"string"},"db_password":{"description":"数据库密码。","type":"string"},"db_port":{"description":"数据库端口。约束:输入范围为1-65535之间的整数。","format":"int32","type":"integer"},"db_type":{"description":"数据库类型,测试连接之后修改调用时必填。","enum":["mysql","mongodb","gaussdbv5","postgresql","kafka","gaussdbv5ha","taurus"],"example":"mysql","type":"string"},"db_user":{"description":"数据库用户。","type":"string"},"inst_id":{"description":"RDS实例ID,数据库为RDS实例必填(灾备场景下job_direction为down时source_endpoint中该值为必填,job_direction为up时target_endpoint中该值为必填)。","example":"e05a3679efe241d8b5dee80b17c1a863in01","type":"string"},"inst_name":{"description":"RDS实例名称。","type":"string"},"ip":{"description":"数据库ip","type":"string"},"mongo_ha_mode":{"description":"mongo ha模式。","type":"string"},"project_id":{"description":"RDS实例projectId","type":"string"},"region":{"description":"RDS实例所在Region,数据库为RDS实例时必填(灾备场景下job_direction为down时source_endpoint中该值为必填,job_direction为up时target_endpoint中该值为必填)。","example":"cn-xianhz-1","type":"string"},"safe_mode":{"description":"MRS集群运行模式,取值:\n- 0普通集群\n- 1安全集群","example":0,"format":"int32","type":"integer"},"security_group_id":{"description":"数据库所在的安全组id。","type":"string"},"ssl_cert_check_sum":{"description":"SSL证书内容checksum值,后端校验,源库安全连接必选。","type":"string"},"ssl_cert_key":{"description":"SSL证书内容,用base64加密","type":"string"},"ssl_cert_name":{"description":"SSL证书名字","type":"string"},"ssl_cert_password":{"description":"SSL证书密码,证书文件后缀为.p12","type":"string"},"ssl_link":{"description":"是否SSL安全连接。","type":"boolean"},"subnet_id":{"description":"数据库所在的子网id","type":"string"},"topic":{"description":"kafka topic名称","type":"string"},"vpc_id":{"description":"数据库所在的虚拟私有云id","type":"string"}},"type":"object"},"ModifyJobReq":{"description":"修改任务描述信息、名称,设置异常通知信息、限速等。","properties":{"alarm_notify":{"$ref":"#/definitions/AlarmNotifyInfo","description":"设置异常通知信息"},"db_use_type":{"description":"迁移类型,migration-实时迁移,sync-实时同步,cloudDataGuard-实时灾备","enum":["migration","sync","cloudDataGuard"],"type":"string"},"description":{"description":"任务描述,修改任务描述时必填。","maxLength":256,"minLength":0,"pattern":"^[^!<>=&\"\\\\']{0,256}$","type":"string"},"engine_type":{"description":"引擎类型,测试连接之后修改调用时必填。mysql:迁移,同步使用。mongodb:迁移使用。cloudDataGuard-mysql:灾备使用","enum":["mysql","mongodb","cloudDataGuard-mysql","gaussdbv5","postgresql","mysql-to-kafka","taurus-to-kafka","gaussdbv5ha-to-kafka"],"type":"string"},"is_recreate":{"description":"是否为重建任务。","type":"boolean"},"is_target_readonly":{"description":"目标实例是否限制为只读。","type":"boolean"},"job_direction":{"description":"迁移方向,up 入云 灾备场景时对应本云为备,down 出云 灾备场景时对应本云为主,non-dbs 自建","enum":["up","down","non-dbs"],"type":"string"},"job_id":{"description":"任务id","pattern":"[0-9a-z]{8}-[0-9a-z]{4}-[0-9a-z]{4}-[0-9a-z]{4}-[0-9a-z]{12}","type":"string"},"name":{"description":"任务名称,修改任务名称时必填","type":"string"},"net_type":{"description":"网络类型,测试连接之后修改调用时必填。","enum":["vpc","vpn","eip"],"type":"string"},"node_type":{"default":"high","description":"node规格类型,测试连接之后修改调用时必填。","enum":["high"],"example":"high","type":"string"},"product_id":{"description":"产品ID。","type":"string"},"replace_definer":{"description":"所有Definer是否迁移到该用户下,MySQL数据库支持该设置,测试连接之后修改调用时必填。\n- true:迁移后,所有源数据库对象的Definer都会迁移至该用户下,其他用户需要授权后才具有数据库对象权限\n- false:迁移后,将保持源数据库对象Definer定义不变,选择此选项,需要配合下一步用户权限迁移功能,将源数据库的用户全部迁移,这样才能保持源数据库的权限体系完全不变。","example":true,"type":"boolean"},"source_endpoint":{"$ref":"#/definitions/Endpoint","description":"源库信息,测试连接之后调用必填。"},"store_db_info":{"description":"保存数据库信息,测试连接之后修改调用时必填为true。","type":"boolean"},"tags":{"description":"标签信息","items":{"$ref":"#/definitions/ResourceTag"},"type":"array"},"target_endpoint":{"$ref":"#/definitions/Endpoint","description":"目标库信息,测试连接之后调用必填。"},"task_type":{"description":"任务模式,FULL_TRANS:全量;FULL_INCR_TRANS:全量+增量;INCR_TRANS:增量。","enum":["FULL_TRANS","INCR_TRANS","FULL_INCR_TRANS"],"example":"FULL_INCR_TRANS","type":"string"}},"required":["job_id"]},"ModifyJobResp":{"properties":{"error_code":{"description":"错误码","type":"string"},"error_msg":{"description":"错误信息","type":"string"},"id":{"description":"任务ID","type":"string"},"status":{"description":"状态。\n- success 成功\n- failed 失败","enum":["success","failed"],"type":"string"}},"required":["id","status"],"type":"object"},"ResourceTag":{"description":"标签信息体","properties":{"key":{"description":"标签键,最大长度36,只能包含字母、数字、下划线、中划线和中文,需要修改标签时填写。","type":"string"},"value":{"description":"标签值,最大长度43,只能包含字母、数字、下划线、中划线和中文,需要修改标签时填写。","type":"string"}}},"SubscriptionInfo":{"description":"收件方式与信息体","properties":{"endpoints":{"description":"短信或者邮件列表","example":["string"],"items":{"type":"string"},"type":"array"},"protocol":{"description":"收件方式,sms:短信,email:邮件","enum":["sms","email"],"example":"sms","type":"string"}}}},"description":null,"group_id":"506538835790436b8e209e5a6684d485","host":"drs.cn-north-4.myhuaweicloud.com","id":"8a1a5e5e29f64f608ee795b3810b3876","info_version":"v3","method":"put","name":"BatchUpdateJob","parameters":{},"paths":{"/v3/{project_id}/jobs/batch-modification":{"put":{"description":"批量修改任务名称或描述,设置异常通知信息。","operationId":"BatchUpdateJob","parameters":[{"description":"租户在某一region下的project ID。","in":"path","name":"project_id","required":true,"type":"string","x-order":1},{"description":"从IAM服务获取的用户Token","in":"header","name":"X-Auth-Token","required":true,"type":"string","x-order":2},{"default":"en-us","description":"请求语言类型","enum":["en-us","zh-cn"],"in":"header","name":"X-Language","required":false,"type":"string","x-example":"en-us","x-order":3},{"default":"application/json","description":"指定类型为application/json。","in":"header","name":"Content-Type","required":true,"type":"string","x-example":"application/json","x-order":4},{"description":"批量修改任务名称请求体","in":"body","name":"requestBody","required":true,"schema":{"$ref":"#/definitions/BatchModifyJobReq"},"x-order":5}],"responses":{"202":{"description":"Accepted","examples":{"application/json":{"count":1,"results":[{"id":"efa2bd29-8780-494f-a2ee-188b003ejb11","status":"success"}]}},"schema":{"$ref":"#/definitions/BatchModifyJobResp"}},"400":{"description":"Bad Request"}},"summary":"批量修改任务","tags":["公共接口管理"],"x-constraint":"- 测试连接成功之后需要调用该接口,请按照示例填写信息,否则可能导致后续任务发生错误。\n- 修改名称、描述、异常通知时,任务不处于结束或者删除状态时可以调用。\n- 测试连接之后调用,需要任务处于CONFIGURATION状态,双主灾备时父任务不支持调用。","x-is-registered":"Y","x-name":"批量修改任务","x-order":15,"x-publishpath":"BatchUpdateJob","x-request-examples-1":{"jobs":[{"alarm_notify":{"alarm_to_user":"false","delay_time":0,"rpo_delay":0,"rto_delay":0,"subscriptions":[{"endpoints":["150xxxxxxxx"],"protocol":"sms"},{"endpoints":["abc@huawei.com"],"protocol":"email"}]},"job_id":"8d0e8e36-a618-490d-8a46-8c61ac9jb502"}]},"x-request-examples-2":{"jobs":[{"description":"test description","job_id":"140b5236-88ad-43c8-811c-1268453jb101"}]},"x-request-examples-3":{"jobs":[{"job_id":"140b5236-88ad-43c8-811c-1268453jb101","name":"testName"}]},"x-request-examples-4":{"jobs":[{"engine_type":"mysql","job_id":"1fded2ab-ce99-4b0e-9cc9-9ce7e17jb101","name":"DRS-5646","net_type":"eip","node_type":"high","replace_definer":true,"source_endpoint":{"db_password":"******","db_port":"3306","db_type":"mysql","db_user":"root","ip":"192.168.0.27","project_id":"054ba152d480d55b2f5dc0069e7ddef0","region":"cn-xianhz-1","ssl_link":false},"store_db_info":true,"target_endpoint":{"db_password":"******","db_type":"mysql","db_user":"root","inst_id":"3def1ac7f8ab4ae48d7c025339f80414in01","project_id":"054ba152d480d55b2f5dc0069e7ddef0","region":"cn-xianhz-1"}}]},"x-request-examples-5":{"jobs":[{"engine_type":"mongodb","job_id":"741d91cf-67e8-4126-ad0f-32f6cccjb105","name":"DRS-4513","net_type":"eip","node_type":"high","source_endpoint":{"db_name":"admin","db_password":"******","db_port":0,"db_type":"mongodb","db_user":"rwuser","ip":"192.168.11.231:8635,192.168.10.12:8635","project_id":"0549a6a31000d4e82fd1c00c3d6f2d76","region":"cn-xianhz-1","ssl_link":false},"store_db_info":true,"target_endpoint":{"db_password":"******","db_type":"mongodb","db_user":"rwuser","inst_id":"3cadd5a0ef724f55ac7fa5bcb5f4fc5fin02","project_id":"0549a6a31000d4e82fd1c00c3d6f2d76","region":"cn-xianhz-1"}}]},"x-request-examples-description-1":"批量设置任务异常通知信息请求示例","x-request-examples-description-2":"批量修改任务描述示例","x-request-examples-description-3":"批量修改任务名称示例","x-request-examples-description-4":"MySQL测试连接之后调用示例","x-request-examples-description-5":"MongoDB测试连接之后调用示例","x-request-examples-text-1":{"jobs":[{"alarm_notify":{"alarm_to_user":"false","delay_time":0,"rpo_delay":0,"rto_delay":0,"subscriptions":[{"endpoints":["150xxxxxxxx"],"protocol":"sms"},{"endpoints":["abc@huawei.com"],"protocol":"email"}]},"job_id":"8d0e8e36-a618-490d-8a46-8c61ac9jb502"}]},"x-request-examples-text-2":{"jobs":[{"description":"test description","job_id":"140b5236-88ad-43c8-811c-1268453jb101"}]},"x-request-examples-text-3":{"jobs":[{"job_id":"140b5236-88ad-43c8-811c-1268453jb101","name":"testName"}]},"x-request-examples-text-4":{"jobs":[{"engine_type":"mysql","job_id":"1fded2ab-ce99-4b0e-9cc9-9ce7e17jb101","name":"DRS-5646","net_type":"eip","node_type":"high","replace_definer":true,"source_endpoint":{"db_password":"******","db_port":"3306","db_type":"mysql","db_user":"root","ip":"192.168.0.27","project_id":"054ba152d480d55b2f5dc0069e7ddef0","region":"cn-xianhz-1","ssl_link":false},"store_db_info":true,"target_endpoint":{"db_password":"******","db_type":"mysql","db_user":"root","inst_id":"3def1ac7f8ab4ae48d7c025339f80414in01","project_id":"054ba152d480d55b2f5dc0069e7ddef0","region":"cn-xianhz-1"}}]},"x-request-examples-text-5":{"jobs":[{"engine_type":"mongodb","job_id":"741d91cf-67e8-4126-ad0f-32f6cccjb105","name":"DRS-4513","net_type":"eip","node_type":"high","source_endpoint":{"db_name":"admin","db_password":"******","db_port":0,"db_type":"mongodb","db_user":"rwuser","ip":"192.168.11.231:8635,192.168.10.12:8635","project_id":"0549a6a31000d4e82fd1c00c3d6f2d76","region":"cn-xianhz-1","ssl_link":false},"store_db_info":true,"target_endpoint":{"db_password":"******","db_type":"mongodb","db_user":"rwuser","inst_id":"3cadd5a0ef724f55ac7fa5bcb5f4fc5fin02","project_id":"0549a6a31000d4e82fd1c00c3d6f2d76","region":"cn-xianhz-1"}}]},"x-request-examples-url-1":"https://{Endpoint}/v3/054ba152d480d55b2f5dc0069e7ddef0/jobs/batch-modification","x-request-examples-url-2":"https://{EndPoint}/v3/054ba152d480d55b2f5dc0069e7ddef0/jobs/batch-modification","x-request-examples-url-3":"https://{EndPoint}/v3/054ba152d480d55b2f5dc0069e7ddef0/jobs/batch-modification","x-request-examples-url-4":"https://{Endpoint}/v3/054ba152d480d55b2f5dc0069e7ddef0/jobs/batch-modification","x-request-examples-url-5":"https://{Endpoint}/v3/054ba152d480d55b2f5dc0069e7ddef0/jobs/batch-modification","x-scope":"Commercial","x-support-sdk":"Y","x-version":"v3"}}},"product_short":"DRS","region_id":"cn-north-4","schemes":["HTTPS"],"security_definitions":null,"summary":"批量修改任务","tags":"公共接口管理","uri":null,"version":"2.0"}