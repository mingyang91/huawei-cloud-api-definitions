{"base_path":"/","components":null,"consumes":"[\"application/json\"]","definitions":{"BatchJobActionReq":{"description":"任务动作请求体。","properties":{"action":{"description":"需要执行的特定操作。","enum":["testConnection"],"example":"testConnection","type":"string"},"job_id":{"description":"任务ID(集群模式 取父任务的任务ID)。","type":"string"},"property":{"description":"操作对应的参数(API参考文档-批量测试连接-集群模式-property字段数据结构说明)[字段说明参考](https://support.huaweicloud.com/api-drs/drs_03_0106.html)","example":"[{\"dbtype\":\"mongodb\",\"dbport\":0,\"ssllink\":false,\"nettype\":\"eip\",\"endpointtype\":\"so\",\"ip\":\"192.168.7.217:8635\",\"dbName\":\"admin\",\"dbuser\":\"rwuser\",\"dbpassword\":\"******\"},{\"dbtype\":\"mongodb\",\"dbport\":0,\"ssllink\":false,\"nettype\":\"eip\",\"endpointtype\":\"so\",\"ip\":\"192.168.7.72:8635\",\"dbName\":\"admin\",\"dbuser\":\"rwuser\",\"dbpassword\":\"******\"},{\"ip\":\"192.168.7.37:8635\",\"nettype\":\"eip\",\"dbtype\":\"mongodb\",\"dbport\":0,\"dbuser\":\"rwuser\",\"dbpassword\":\"******\",\"ssllink\":false,\"sslcertkey\":\"\",\"sslcertname\":\"\",\"sslcertchecksum\":\"\",\"endpointtype\":\"ls\",\"dbName\":\"admin\"}]","type":"string"}},"required":["action","job_id","property"],"type":"object"},"BatchSpecialTestConnectionReq":{"description":"集群批量测试连接任务请求体","properties":{"jobs":{"description":"集群批量测试连接任务请求列表","items":{"$ref":"#/definitions/BatchJobActionReq","description":""},"type":"array"}},"required":["jobs"]},"BatchTestConnectionJobResp":{"description":"批量测试连接响应体","properties":{"count":{"description":"总记录数。","format":"int32","type":"integer"},"results":{"description":"批量测试连接响应体集合。","items":{"$ref":"#/definitions/CheckJobResp","description":"测试连接响应体"},"type":"array"}},"required":["count","results"]},"CheckJobResp":{"description":"响应体","properties":{"error_code":{"description":"错误码。","type":"string"},"error_msg":{"description":"错误信息。","type":"string"},"id":{"description":"任务id。","type":"string"},"status":{"description":"测试结果。\n- true:成功\n- false:失败","enum":["true","false"],"type":"string"},"success":{"description":"是否成功","type":"boolean"}},"required":["id","status"],"type":"object"}},"description":null,"group_id":"506538835790436b8e209e5a6684d485","host":"drs.cn-north-4.myhuaweicloud.com","id":"daefb7f97f98465896870f4009adfa3a","info_version":"v3","method":"post","name":"BatchValidateClustersConnections","parameters":{},"paths":{"/v3/{project_id}/jobs/cluster/batch-connection":{"post":{"description":"- 批量测试连接(集群模式)。\n- 主备任务测试连接","operationId":"BatchValidateClustersConnections","parameters":[{"description":"租户在某一Region下的Project ID。","in":"path","name":"project_id","required":true,"type":"string","x-order":1},{"description":"从IAM服务获取的用户Token","in":"header","name":"X-Auth-Token","required":true,"type":"string","x-order":2},{"default":"en-us","description":"请求语言类型","enum":["en-us","zh-cn"],"in":"header","name":"X-Language","required":false,"type":"string","x-example":"en-us","x-order":3},{"default":"application/json","description":"指定类型为application/json。","in":"header","name":"Content-Type","required":true,"type":"string","x-example":"application/json","x-order":4},{"description":"集群批量测试连接任务请求体","in":"body","name":"requestBody","required":true,"schema":{"$ref":"#/definitions/BatchSpecialTestConnectionReq"},"x-order":5}],"responses":{"200":{"description":"OK","examples":{"application/json":{"count":1,"results":[{"id":"0eb704d0-5a1c-4cbd-b675-91152f06jb11","status":"true"}]}},"schema":{"$ref":"#/definitions/BatchTestConnectionJobResp"}},"400":{"description":"Bad Request"}},"summary":"批量测试连接-集群模式","tags":["公共接口管理"],"x-constraint":"任务创建成功之后才能进行测试连接。","x-is-registered":"Y","x-name":"批量测试连接-集群模式","x-order":2,"x-publishpath":"BatchValidateClustersConnections","x-request-examples-1":{"jobs":[{"action":"testConnection","job_id":"35d0d60b-4605-4686-b35d-3a3d059fjb15","property":"[{\"dbtype\":\"mongodb\",\"dbport\":0,\"ssllink\":false,\"nettype\":\"eip\",\"endpointtype\":\"so\",\"encrypt\":{\"elementId\":\"encrypt_switch\",\"offLabel\":\"OFF\",\"onLabel\":\"ON\",\"disable\":false,\"ip\":\"192.168.7.217:8635\",\"dbName\":\"admin\",\"dbuser\":\"rwuser\",\"dbpassword\":\"******\"},{\"dbtype\":\"mongodb\",\"dbport\":0,\"ssllink\":false,\"nettype\":\"eip\",\"endpointtype\":\"so\",\"encrypt\":{\"elementId\":\"encrypt_switch\",\"offLabel\":\"OFF\",\"onLabel\":\"ON\",\"disable\":false,\"ip\":\"192.168.7.72:8635\",\"dbName\":\"admin\",\"dbuser\":\"rwuser\",\"dbpassword\":\"******\"},{\"ip\":\"192.168.7.37:8635\",\"nettype\":\"eip\",\"dbtype\":\"mongodb\",\"dbport\":0,\"dbuser\":\"rwuser\",\"dbpassword\":\"******\",\"ssllink\":false,\"sslcertkey\":\"\",\"sslcertname\":\"\",\"sslcertchecksum\":\"\",\"endpointtype\":\"ls\",\"dbName\":\"admin\"}]"}]},"x-request-examples-2":{"jobs":[{"action":"testConnection","job_id":"0ac45233-8de7-4f02-9de1-d71cab7jb201","property":"[{\"ip\":\"192.168.2.232:3306\",\"dbtype\":\"mysql\",\"dbuser\":\"root\",\"dbpassword\":\"******\",\"ssllink\":false,\"projectId\":\"054ba152d480d55b2f5dc0069e7ddef0\",\"region\":\"cn-xianhz-1\",\"nettype\":\"eip\",\"endpointtype\":\"so\"}]"}]},"x-request-examples-3":{"jobs":[{"action":"testConnection","job_id":"f85c660b-c4d0-4571-ac53-629d906jb20i","property":"[{\"ip\":\"192.168.0.131:9092\",\"dbtype\":\"kafka\",\"dbuser\":\"******\",\"dbpassword\":\"******\",\"ssllink\":false,\"projectId\":\"5237e10fe9aa4ad5b16b6a5245248314\",\"region\":\"cn-southwest-244\",\"vpcid\":\"f7ea6af9-dee8-456f-b3d7-0cc34b4c9cbf\",\"subnetid\":\"b04c1704-5bd9-4195-9bda-ea2a14e0537e\",\"kafkaSecurityConfig\":{\"type\":\"SASL_PLAINTEXT\",\"sasl_mechanism\":\"PLAIN\"},\"nettype\":\"vpc\",\"dbUseType\":\"sync\",\"endpointtype\":\"ta\"}]"}]},"x-request-examples-description-1":"DDS集群源库测试连接示例","x-request-examples-description-2":"MySQL主备任务测试连接","x-request-examples-description-3":"MySQL-Kafka实时同步主备任务,Kafka认证方式为SASL_PLAINTEXT","x-request-examples-text-1":{"jobs":[{"action":"testConnection","job_id":"35d0d60b-4605-4686-b35d-3a3d059fjb15","property":"[{\"dbtype\":\"mongodb\",\"dbport\":0,\"ssllink\":false,\"nettype\":\"eip\",\"endpointtype\":\"so\",\"encrypt\":{\"elementId\":\"encrypt_switch\",\"offLabel\":\"OFF\",\"onLabel\":\"ON\",\"disable\":false,\"ip\":\"192.168.7.217:8635\",\"dbName\":\"admin\",\"dbuser\":\"rwuser\",\"dbpassword\":\"******\"},{\"dbtype\":\"mongodb\",\"dbport\":0,\"ssllink\":false,\"nettype\":\"eip\",\"endpointtype\":\"so\",\"encrypt\":{\"elementId\":\"encrypt_switch\",\"offLabel\":\"OFF\",\"onLabel\":\"ON\",\"disable\":false,\"ip\":\"192.168.7.72:8635\",\"dbName\":\"admin\",\"dbuser\":\"rwuser\",\"dbpassword\":\"******\"},{\"ip\":\"192.168.7.37:8635\",\"nettype\":\"eip\",\"dbtype\":\"mongodb\",\"dbport\":0,\"dbuser\":\"rwuser\",\"dbpassword\":\"******\",\"ssllink\":false,\"sslcertkey\":\"\",\"sslcertname\":\"\",\"sslcertchecksum\":\"\",\"endpointtype\":\"ls\",\"dbName\":\"admin\"}]"}]},"x-request-examples-text-2":{"jobs":[{"action":"testConnection","job_id":"0ac45233-8de7-4f02-9de1-d71cab7jb201","property":"[{\"ip\":\"192.168.2.232:3306\",\"dbtype\":\"mysql\",\"dbuser\":\"root\",\"dbpassword\":\"******\",\"ssllink\":false,\"projectId\":\"054ba152d480d55b2f5dc0069e7ddef0\",\"region\":\"cn-xianhz-1\",\"nettype\":\"eip\",\"endpointtype\":\"so\"}]"}]},"x-request-examples-text-3":{"jobs":[{"action":"testConnection","job_id":"f85c660b-c4d0-4571-ac53-629d906jb20i","property":"[{\"ip\":\"192.168.0.131:9092\",\"dbtype\":\"kafka\",\"dbuser\":\"******\",\"dbpassword\":\"******\",\"ssllink\":false,\"projectId\":\"5237e10fe9aa4ad5b16b6a5245248314\",\"region\":\"cn-southwest-244\",\"vpcid\":\"f7ea6af9-dee8-456f-b3d7-0cc34b4c9cbf\",\"subnetid\":\"b04c1704-5bd9-4195-9bda-ea2a14e0537e\",\"kafkaSecurityConfig\":{\"type\":\"SASL_PLAINTEXT\",\"sasl_mechanism\":\"PLAIN\"},\"nettype\":\"vpc\",\"dbUseType\":\"sync\",\"endpointtype\":\"ta\"}]"}]},"x-request-examples-url-1":"https://{endpoint}/v3/054ba152d480d55b2f5dc0069e7ddef0/jobs/cluster/batch-connection","x-request-examples-url-2":"https://{endpoint}/v3/054ba152d480d55b2f5dc0069e7ddef0/jobs/cluster/batch-connection","x-request-examples-url-3":"https://{endpoint}/v3/054ba152d480d55b2f5dc0069e7ddef0/jobs/cluster/batch-connection","x-scope":"Commercial","x-support-sdk":"Y","x-version":"v3"}}},"product_short":"DRS","region_id":"cn-north-4","schemes":["HTTPS"],"security_definitions":null,"summary":"批量测试连接-集群模式","tags":"公共接口管理","uri":null,"version":"2.0"}