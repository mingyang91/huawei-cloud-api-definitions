{"base_path":null,"components":null,"consumes":"","definitions":{"AccessConfigurationDataItems":{"description":"访问方式配置项。","properties":{"access_control":{"$ref":"#/definitions/AccessControl"},"domain_names":{"description":"内网访问方式域名。","items":{"type":"string"},"type":"array"},"elb_id":{"description":"用户选择的elb的ID。","type":"string"},"metadata":{"$ref":"#/definitions/AccessConfigurationMetadata"},"ports":{"description":"访问方式配置端口、协议、证书、URL路径等信息列表。","items":{"$ref":"#/definitions/AccessConfigurationPort"},"type":"array"},"private_ip":{"description":"响应体参数,用户选择的elb的私网ip。","type":"string"},"public_ip":{"description":"响应体参数,用户选择的elb的公网ip。","type":"string"},"type":{"description":"访问方式类型。","enum":["ClusterIP","LoadBalancer","Ingress"],"type":"string"},"uid":{"description":"访问方式的uid。","type":"string"}},"type":"object"},"AccessConfigurationHttpPath":{"description":"匹配路径和域名信息。","properties":{"hostname":{"description":"域名/不填,不填时表示使用IP。","type":"string"},"path":{"description":"URL路径。","type":"string"},"url_match_mode":{"description":"URL路径匹配模式,支持前缀匹配、正则匹配、精准匹配。","enum":["STARTS_WITH","REGEX","EQUAL_TO"],"type":"string"}},"type":"object"},"AccessConfigurationMetadata":{"description":"访问方式配置元数据。","properties":{"annotations":{"additionalProperties":{"type":"string"},"description":"附加参数。\n\n举例:负载均衡分配策略使用加权轮询算法,不启用健康检查。配置如下:\n- \"kubernetes.io/elb.health-check-flag\": \"off\"\n- \"kubernetes.io/elb.lb-algorithm\": \"ROUND_ROBIN\"\n","type":"object"}},"type":"object"},"AccessConfigurationPort":{"description":"访问方式配置端口、协议、证书等信息。","properties":{"certificate":{"description":"证书。","type":"string"},"default_certificate":{"description":"默认证书,访问方式配置为转发策略且协议为HTTPS时配置,未配置域名证书对时使用默认证书。","type":"string"},"elb_id":{"description":"用户选择的elb的ID。","type":"string"},"paths":{"items":{"$ref":"#/definitions/AccessConfigurationHttpPath"},"type":"array"},"policy":{"description":"安全策略。","enum":["tls-1-2-strict","tls-1-2","tls-1-1","tls-1-0"],"type":"string"},"port":{"description":"访问端口。","type":"integer"},"protocol":{"description":"协议,负载均衡支持TCP,负载均衡与路由配置支持HTTP、HTTPS。","enum":["TCP","HTTP","HTTPS"],"type":"string"},"target_port":{"description":"监听端口。","type":"integer"}},"type":"object"},"AccessControl":{"description":"访问控制配置,允许配置黑名单、白名单。","properties":{"black":{"description":"黑名单数组。\n- 每行一个IP地址或网段,以回车结束。\n- 每个IP地址组最多可添加300个IP地址或网段。\n","items":{"type":"string"},"type":"array"},"white":{"description":"白名单数组。\n- 每行一个IP地址或网段,以回车结束。\n- 每个IP地址组最多可添加300个IP地址或网段。\n","items":{"type":"string"},"type":"array"}},"type":"object"},"ApiVersionObj":{"description":"API版本,固定值“v1”,该值不可修改。","enum":["v1"],"type":"string"},"ComponentConfigurationKindObj":{"description":"API类型,固定值“ComponentConfiguration”,该值不可修改。","enum":["ComponentConfiguration"],"type":"string"},"ConfigurationData":{"description":"组件配置数据。","properties":{"metadata":{"$ref":"#/definitions/ConfigurationDataMetadata"},"spec":{"$ref":"#/definitions/ConfigurationRequestDataSpec"}},"type":"object"},"ConfigurationDataMetadata":{"description":"组件配置元数据。","properties":{"annotations":{"additionalProperties":{"type":"string"},"description":"附加参数。\n\n举例:负载均衡分配策略使用加权轮询算法,不启用健康检查。配置如下:\n- \"kubernetes.io/elb.health-check-flag\": \"off\"\n- \"kubernetes.io/elb.lb-algorithm\": \"ROUND_ROBIN\"\n","type":"object"}},"type":"object"},"ConfigurationItem":{"properties":{"data":{"$ref":"#/definitions/ConfigurationData"},"type":{"description":"组件配置类型。","enum":["rds","cse","env","access","scaling","volume","healthCheck","lifecycle","apm2","log","customMetric"],"type":"string"}},"required":["type","data"],"type":"object"},"ConfigurationRequestDataSpec":{"description":"组件配置数据规格详情。","properties":{"advanced":{"$ref":"#/definitions/ScaleConfigurationDataAdvanced","description":"伸缩策略高级配置。\n\nConfigurationItem.type为\"scaling\"时,配置此参数。\n","type":"object"},"config_center_addr":{"description":"CSE配置中心地址。\n\nConfigurationItem.type为\"cse\"时,配置此参数。\n","type":"string","x-sec-sensitiveinfo":"Y"},"cse_id":{"description":"CSE引擎ID。\n\nConfigurationItem.type为\"cse\"时,配置此参数。\n","type":"string","x-sec-authority-parameter":"Y"},"envs":{"$ref":"#/definitions/EnvConfigurationDataAnnotations","description":"环境变量配置。\n\nConfigurationItem.type为\"env\"时,配置此参数。\n\n常用环境变量如下:\n- TZ: 时区设置,东八区可设置为Asia/Shanghai。\n- LANG: 语言字符集设置,中文UTF8可设置为zh_CN.UTF-8。\n","x-api-inputuntrust-envparam":"Env"},"instrumentation":{"description":"探针注入方式。\n\nConfigurationItem.type为\"apm2\"时,配置此参数。\n","type":"string"},"ip":{"description":"弹性公网IP,响应体参数,未配置域名时返回此参数。","type":"string"},"items":{"description":"访问方式配置列表。\n\nConfigurationItem.type为\"access\"时,配置此参数。\n","items":{"$ref":"#/definitions/AccessConfigurationDataItems"},"type":"array"},"livenessProbe":{"$ref":"#/definitions/HealthCheckConfigurationLivenessProbe","description":"组件健康检查配置的存活探针配置。\n\nConfigurationItem.type为\"healthCheck\"时,配置此参数。\n"},"log_paths":{"description":"自定义日志路径数组。\n\nConfigurationItem.type为\"log\"时,配置此参数。\n","items":{"type":"string"},"type":"array","x-api-inputuntrust-envparam":"Env"},"max_replica_count":{"description":"伸缩策略配置最大伸缩个数。\n\nConfigurationItem.type为\"scaling\"时,配置此参数。\n","type":"integer"},"metrics":{"description":"自定义监控指标配置指标名称。\n\nConfigurationItem.type为\"customMetric\"时,配置此参数。\n","items":{"type":"string"},"type":"array"},"min_replica_count":{"description":"伸缩策略配置最小伸缩个数。\n\nConfigurationItem.type为\"scaling\"时,配置此参数。\n","type":"integer"},"path":{"description":"自定义监控指标配置采集路径。\n\nConfigurationItem.type为\"customMetric\"时,配置此参数。\n","type":"string","x-api-inputuntrust-envparam":"Env"},"port":{"description":"自定义监控指标配置采集端口。\n\nConfigurationItem.type为\"customMetric\"时,配置此参数。\n","type":"integer"},"postStart":{"description":"生命周期管理组件配置启动后处理。\n\nConfigurationItem.type为\"lifecycle\"时,配置此参数。\n","properties":{"exec":{"$ref":"#/definitions/LifeCycleConfigurationExec"}},"type":"object"},"preStop":{"description":"生命周期管理组件配置停止前处理。\n\nConfigurationItem.type为\"lifecycle\"时,配置此参数。\n","properties":{"exec":{"$ref":"#/definitions/LifeCycleConfigurationExec"}},"type":"object"},"rds_address":{"description":"RDS数据库地址。\n\nConfigurationItem.type为\"rds\"时,配置此参数。\n","type":"string","x-sec-sensitiveinfo":"Y"},"rds_db_name":{"description":"RDS数据库名称。\n\nConfigurationItem.type为\"rds\"时,配置此参数。\n","type":"string"},"rds_id":{"description":"RDS数据库实例ID。\n\nConfigurationItem.type为\"rds\"时,配置此参数。\n","type":"string"},"rds_password":{"description":"RDS数据库密码。\n\nConfigurationItem.type为\"rds\"时,配置此参数。\n","type":"string","x-sec-sensitiveinfo":"Y"},"rds_port":{"description":"RDS数据库端口。\n\nConfigurationItem.type为\"rds\"时,配置此参数。\n","type":"string"},"rds_username":{"description":"RDS数据库用户名称。\n\nConfigurationItem.type为\"rds\"时,配置此参数。\n","type":"string"},"readinessProbe":{"$ref":"#/definitions/HealthCheckConfigurationReadinessProbe","description":"组件健康检查配置的就绪探针配置。\n\nConfigurationItem.type为\"healthCheck\"时,配置此参数。\n"},"scale_strategy":{"description":"伸缩策略配置策略类型。\n\nConfigurationItem.type为\"scaling\"时,配置此参数。\n","enum":["metric","time","mix"],"type":"string"},"service_center_addr":{"description":"CSE服务注册发现地址。\n\nConfigurationItem.type为\"cse\"时,配置此参数。\n","type":"string","x-sec-sensitiveinfo":"Y"},"startupProbe":{"$ref":"#/definitions/HealthCheckConfigurationStartupProbe","description":"组件健康检查配置的启动探针配置。\n\nConfigurationItem.type为\"healthCheck\"时,配置此参数。\n"},"triggers":{"description":"伸缩策略配置触发器列表。\n\nConfigurationItem.type为\"scaling\"时,配置此参数。\n","items":{"$ref":"#/definitions/ScaleConfigurationDataTrigger"},"type":"array"},"volumes":{"description":"云存储配置列表。\n\nConfigurationItem.type为\"volume\"时,配置此参数。\n","items":{"$ref":"#/definitions/VolumeConfigurationDataVolume"},"type":"array"}},"type":"object"},"CreateComponentConfigurationRequestBody":{"properties":{"api_version":{"$ref":"#/definitions/ApiVersionObj"},"items":{"description":"配置项列表。","items":{"$ref":"#/definitions/ConfigurationItem"},"type":"array"},"kind":{"$ref":"#/definitions/ComponentConfigurationKindObj"}},"required":["api_version","kind","items"],"type":"object"},"CronTriggerScheduler":{"properties":{"cron":{"description":"触发时间点,以五位cron表达式表示。","type":"string"},"target_replica":{"description":"要求达到的实例数。","type":"integer"}},"type":"object"},"EnvConfigurationDataAnnotations":{"additionalProperties":{"type":"string"},"description":"环境变量配置。\n常用环境变量如下:\n- TZ: 时区设置,东八区可设置为Asia/Shanghai。\n- LANG: 语言字符集设置,中文UTF8可设置为zh_CN.UTF-8。","type":"object"},"HealthCheckConfigurationExec":{"description":"健康检查配置中执行命令检查。","properties":{"command":{"description":"shell语句。","items":{"type":"string"},"type":"array"}},"type":"object"},"HealthCheckConfigurationHttpGet":{"description":"健康检查配置中HTTP请求检查信息。","properties":{"path":{"description":"URL路径。","type":"string"},"port":{"description":"端口。","type":"integer"},"scheme":{"description":"协议。","enum":["HTTP","HTTPS"],"type":"string"}},"type":"object"},"HealthCheckConfigurationLivenessProbe":{"description":"组件健康检查配置的存活探针配置。","properties":{"exec":{"$ref":"#/definitions/HealthCheckConfigurationExec"},"failureThreshold":{"description":"最大失败次数。","type":"integer"},"httpGet":{"$ref":"#/definitions/HealthCheckConfigurationHttpGet"},"initialDelaySeconds":{"description":"延迟时间,单位为s。","type":"integer"},"periodSeconds":{"description":"检测周期,单位为s。","type":"integer"},"successThreshold":{"description":"成功阈值。","type":"integer"},"tcpSocket":{"$ref":"#/definitions/HealthCheckConfigurationTcpSocket"},"timeoutSeconds":{"description":"超时时间,单位为s。","type":"integer"}},"type":"object"},"HealthCheckConfigurationReadinessProbe":{"description":"组件健康检查配置的就绪探针配置。","properties":{"exec":{"$ref":"#/definitions/HealthCheckConfigurationExec"},"failureThreshold":{"description":"最大失败次数。","type":"integer"},"httpGet":{"$ref":"#/definitions/HealthCheckConfigurationHttpGet"},"initialDelaySeconds":{"description":"延迟时间,单位为s。","type":"integer"},"periodSeconds":{"description":"检测周期,单位为s。","type":"integer"},"successThreshold":{"description":"成功阈值。","type":"integer"},"tcpSocket":{"$ref":"#/definitions/HealthCheckConfigurationTcpSocket"},"timeoutSeconds":{"description":"超时时间,单位为s。","type":"integer"}},"type":"object"},"HealthCheckConfigurationStartupProbe":{"description":"组件健康检查配置的启动探针配置。","properties":{"exec":{"$ref":"#/definitions/HealthCheckConfigurationExec"},"failureThreshold":{"description":"最大失败次数。","type":"integer"},"httpGet":{"$ref":"#/definitions/HealthCheckConfigurationHttpGet"},"initialDelaySeconds":{"description":"延迟时间,单位为s。","type":"integer"},"periodSeconds":{"description":"检测周期,单位为s。","type":"integer"},"successThreshold":{"description":"成功阈值。","type":"integer"},"tcpSocket":{"$ref":"#/definitions/HealthCheckConfigurationTcpSocket"},"timeoutSeconds":{"description":"超时时间,单位为s。","type":"integer"}},"type":"object"},"HealthCheckConfigurationTcpSocket":{"description":"健康检查配置中TCP端口检查信息。","properties":{"port":{"description":"端口。","type":"integer"}},"type":"object"},"LifeCycleConfigurationExec":{"description":"执行命令。","properties":{"command":{"description":"shell语句。","items":{"type":"string"},"type":"array"}},"type":"object"},"ScaleConfigurationDataAdvanced":{"description":"伸缩策略高级配置。","properties":{"disable_scaledown":{"description":"是否禁用自动缩容。","type":"boolean"},"scaledown_rate":{"description":"缩容步长。","type":"integer"},"scaledown_stabilization_seconds":{"description":"缩容冷却时间窗。","type":"integer"},"scaleup_rate":{"description":"扩容步长。","type":"integer"},"scaleup_stabilization_seconds":{"description":"扩容冷却时间窗。","type":"integer"}},"type":"object"},"ScaleConfigurationDataTrigger":{"description":"伸缩策略触发器。","properties":{"metadata":{"$ref":"#/definitions/ScalingTriggerMeta"},"type":{"description":"指标类型。","enum":["cpu","memory","cron"],"type":"string"}},"type":"object"},"ScalingTriggerMeta":{"description":"trigger元数据。","properties":{"period_type":{"description":"生效周期。\n\nScaleConfigurationDataTrigger.type为\"cron\"时,配置此参数。\n","enum":["day","week","month"],"type":"string"},"schedulers":{"description":"每个周期内触发的时间点和实例数。\n\nScaleConfigurationDataTrigger.type为\"cron\"时,配置此参数。\n","items":{"$ref":"#/definitions/CronTriggerScheduler"},"type":"array"},"type":{"description":"数据类型,当前只支持利用率,默认值为Utilization。\n\nScaleConfigurationDataTrigger.type为\"cpu、memory\"时,配置此参数。\n","type":"string"},"value":{"description":"触发指标的阈值。\n\nScaleConfigurationDataTrigger.type为\"cpu、memory\"时,配置此参数。\n","type":"string"}},"type":"object"},"VolumeConfigurationDataVolume":{"description":"云存储配置数据。","properties":{"mount_info":{"items":{"$ref":"#/definitions/VolumeConfigurationMountInfo"},"type":"array"},"resource_name":{"description":"云存储名称。","type":"string"},"resource_sub_type":{"description":"云存储子类型。","enum":["object_bucket","parallel_file_system","sfs3.0"],"type":"string"},"resource_type":{"description":"云存储类型。","enum":["obs","sfs"],"type":"string"},"umask":{"description":"设置目录或文件缺省权限,默认值0027,sfs3.0类型的云存储不支持配置此参数。","type":"string"},"volume_id":{"description":"云存储ID。","type":"string","x-sec-authority-parameter":"Y"}},"type":"object"},"VolumeConfigurationMountInfo":{"description":"云存储配置挂载信息。","properties":{"access_mode":{"description":"读写权限。","enum":["ReadWriteMany","ReadOnlyMany"],"type":"string"},"path":{"description":"容器挂载路径。","type":"string"},"sub_path":{"description":"子路径。","type":"string"}},"type":"object"}},"description":null,"group_id":"233de030b8054c65a90cfefe2e0b09aa","host":"cae.cn-north-4.myhuaweicloud.com","id":"fe403792293b4d089339329182082827","info_version":"v1","method":"post","name":"CreateComponentConfiguration","parameters":{"param_header_x_auth_token":{"description":"用户Token。    \n- 获取Token,请参考《[统一身份认证服务API参考](https://support.huaweicloud.com/api-iam/iam_30_0001.html)》的“获取用户Token”章节。          \n- 请求响应成功后在响应消息头中包含的“X-Subject-Token”的值即为Token值。","in":"header","maxLength":16384,"name":"X-Auth-Token","required":true,"type":"string","x-order":52},"param_header_x_enterprise_project_id":{"description":"企业项目ID。 \n- 创建环境时,环境会绑定企业项目ID。     \n- 最大长度36字节,带“-”连字符的UUID格式,或者是字符串“0”。    \n- 该字段不传(或传为字符串“0”)时,则查询默认企业项目下的资源。\n\n> 关于企业项目ID的获取及企业项目特性的详细信息,请参见《[企业管理服务用户指南](https://support.huaweicloud.com/usermanual-em/zh-cn_topic_0126101490.html)》。","in":"header","name":"X-Enterprise-Project-ID","pattern":"^[0-9a-z]{8}-[0-9a-z]{4}-[0-9a-z]{4}-[0-9a-z]{4}-[0-9a-z]{12}$|^0$","required":false,"type":"string","x-order":53},"param_header_x_environment_id":{"description":"环境ID。     \n- 获取环境ID,通过《[云应用引擎API参考](https://support.huaweicloud.com/api-cae/ListEnvironments.html)》的“获取环境列表”章节获取环境信息。    \n- 请求响应成功后在响应体的items数组中的一个元素即为一个环境的信息,其中id字段即是环境ID。","in":"header","name":"X-Environment-ID","pattern":"^[0-9a-z]{8}-[0-9a-z]{4}-[0-9a-z]{4}-[0-9a-z]{4}-[0-9a-z]{12}$","required":true,"type":"string","x-order":54},"param_path_project_id":{"description":"项目ID,获取项目ID请参见[获取项目ID](https://support.huaweicloud.com/api-cae/cae_06_0021.html)。","in":"path","name":"project_id","required":true,"type":"string","x-order":1,"x-sec-authority-parameter":"Y"}},"paths":{"/v1/{project_id}/cae/applications/{application_id}/components/{component_id}/configurations":{"post":{"consumes":["application/json"],"description":"创建组件配置。","operationId":"CreateComponentConfiguration","parameters":[{"$ref":"#/parameters/param_path_project_id"},{"description":"应用ID。","in":"path","name":"application_id","required":true,"type":"string","x-sec-authority-parameter":"Y"},{"description":"组件ID。","in":"path","name":"component_id","required":true,"type":"string","x-sec-authority-parameter":"Y"},{"$ref":"#/parameters/param_header_x_auth_token"},{"$ref":"#/parameters/param_header_x_enterprise_project_id"},{"$ref":"#/parameters/param_header_x_environment_id"},{"in":"body","name":"body","required":true,"schema":{"$ref":"#/definitions/CreateComponentConfigurationRequestBody"}}],"produces":["application/json"],"responses":{"200":{"description":"请求成功。"}},"summary":"创建组件配置","tags":["ComponentConfiguration"],"x-api-framework":"RestfulAPI","x-api-position":"Region_ZONE","x-api-sensitiveinfo":{"RequesBody":"rds_password,rds_address,config_center_addr,service_center_addr"},"x-api-type":"open-api","x-api-user":"IAM_User","x-apiexplorer-hide":"false","x-authority-parameter-body":"cse_id, volume_id","x-authority-parameter-url":"project_id, application_id, component_id","x-is-registered":"Y","x-open-region-cloud":"hws","x-request-examples-1":{"api_version":"v1","items":[{"data":{"spec":{"rds_address":"100.xx.xx.xxx","rds_db_name":"cae","rds_id":"a5fdee4cf88c4277a68688a014f444bdin01","rds_password":"xxx","rds_port":"3306","rds_username":"cae"}},"type":"rds"}],"kind":"ComponentConfiguration"},"x-request-examples-10":{"api_version":"v1","items":[{"data":{"spec":{"log_paths":["/var/log/error.log"]}},"type":"log"}],"kind":"ComponentConfiguration"},"x-request-examples-11":{"api_version":"v1","items":[{"data":{"spec":{"instrumentation":"automatic"}},"type":"apm2"}],"kind":"ComponentConfiguration"},"x-request-examples-12":{"api_version":"v1","items":[{"data":{"spec":{"metrics":["myapp_processed_ops_total"],"path":"/metrics","port":2112}},"type":"customMetric"}],"kind":"ComponentConfiguration"},"x-request-examples-2":{"api_version":"v1","items":[{"data":{"spec":{"config_center_addr":"https://192.168.1.xxx:30103,https://192.168.1.xxx:30103","cse_id":"25779525-1aac-44be-abda-f9164f1b41b8","service_center_addr":"https://192.168.1.xxx:30100,https://192.168.1.xxx:30100"}},"type":"cse"}],"kind":"ComponentConfiguration"},"x-request-examples-3":{"api_version":"v1","items":[{"data":{"spec":{"envs":{"TZ":"Asia/Shanghai"}}},"type":"env"}],"kind":"ComponentConfiguration"},"x-request-examples-4":{"api_version":"v1","items":[{"data":{"spec":{"items":[{"ports":[{"port":8080,"protocol":"TCP","target_port":80}],"type":"ClusterIP"},{"access_control":{"ip_list":["170.126.0.0/16"],"type":"white"},"elb_id":"xxx","ports":[{"port":9090,"protocol":"TCP","target_port":80}],"type":"LoadBalancer"}]}},"type":"access"}],"kind":"ComponentConfiguration"},"x-request-examples-5":{"api_version":"v1","items":[{"data":{"metadata":{"annotations":{"kubernetes.io/elb.health-check-flag":"off","kubernetes.io/elb.lb-algorithm":"ROUND_ROBIN"}},"spec":{"items":[{"access_control":{"ip_list":["10.120.1.1","10.120.1.2"],"type":"black"},"ports":[{"default_certificate":"test","paths":[{"hostname":"test.example.com","path":"/test1","url_match_mode":"STARTS_WITH"}],"policy":"tls-1-2-strict","port":8443,"protocol":"HTTPS","target_port":80},{"certificate":"test1","default_certificate":"test","paths":[{"hostname":"test.example.cn","path":"/test2","url_match_mode":"STARTS_WITH"}],"policy":"tls-1-2-strict","port":8443,"protocol":"HTTPS","target_port":80}],"type":"Ingress"}]}},"type":"access"}],"kind":"ComponentConfiguration"},"x-request-examples-6":{"api_version":"v1","items":[{"data":{"spec":{"advanced":{"disable_scaledown":false,"scaledown_rate":99,"scaledown_stabilization_seconds":300,"scaleup_rate":4,"scaleup_stabilization_seconds":0},"max_replica_count":3,"min_replica_count":1,"scale_strategy":"metric","triggers":[{"metadata":{"type":"Utilization","value":"30"},"type":"cpu"},{"metadata":{"type":"Utilization","value":"30"},"type":"memory"}]}},"type":"scaling"}],"kind":"ComponentConfiguration"},"x-request-examples-7":{"api_version":"v1","items":[{"data":{"spec":{"volumes":[{"mount_info":[{"access_mode":"ReadWriteMany","path":"/tmp"}],"resource_name":"test-nacos","resource_sub_type":"object_bucket","resource_type":"obs","umask":"0027","volume_id":"bef119d0-c7d1-4b58-9794-8b74faf80a59"},{"mount_info":[{"access_mode":"ReadWriteMany","path":"/temp"}],"resource_name":"test","resource_sub_type":"parallel_file_system","resource_type":"obs","umask":"0027","volume_id":"a061934d-52e3-4b36-aea7-6c51879f84c9"}]}},"type":"volume"}],"kind":"ComponentConfiguration"},"x-request-examples-8":{"api_version":"v1","items":[{"data":{"spec":{"livenessProbe":{"failureThreshold":3,"httpGet":{"httpHeaders":[],"path":"","port":80,"scheme":"HTTP"},"initialDelaySeconds":1,"periodSeconds":10,"successThreshold":1,"timeoutSeconds":1},"readinessProbe":{"failureThreshold":3,"httpGet":{"httpHeaders":[],"path":"","port":80,"scheme":"HTTP"},"periodSeconds":10,"successThreshold":1,"timeoutSeconds":1},"startupProbe":{"failureThreshold":3,"httpGet":{"httpHeaders":[{"name":"x-auth-token","value":"xxx"}],"path":"","port":80,"scheme":"HTTP"},"periodSeconds":10,"successThreshold":1,"timeoutSeconds":1}}},"type":"healthCheck"}],"kind":"ComponentConfiguration"},"x-request-examples-9":{"api_version":"v1","items":[{"data":{"spec":{"postStart":{"exec":{"command":["/bin/sh","-c","echo service start"]}},"preStop":{"exec":{"command":["/bin/sh","-c","echo service end"]}}}},"type":"lifecycle"}],"kind":"ComponentConfiguration"},"x-request-examples-description-1":"创建云数据库RDS组件配置,数据库名称为“cae”,地址为100.xx.xx.xxx,端口号为3306。","x-request-examples-description-10":"创建自定义日志配置,创建自定义路径“/var/log/error.log”。","x-request-examples-description-11":"创建性能管理配置,探针注入方式为自动注入。","x-request-examples-description-12":"创建自定义监控指标配置,采集路径为/metrics,采集端口为2112,指定一个自定义监控指标,名称为myapp_processed_ops_total。","x-request-examples-description-2":"创建微服务引擎CSE组件配置,配置中心地址:“https://192.168.1.xxx:30103,https://192.168.1.xxx:30103”,服务注册发现地址:“https://192.168.1.xxx:30100,https://192.168.1.xxx:30100”。","x-request-examples-description-3":"创建环境变量组件配置,配置时区为Asia/Shanghai,且注入一个名称为password的凭据做为环境变量。","x-request-examples-description-4":"创建内网访问方式和负载均衡类型的外网访问方式组件配置。\n- 内网访问方式类型为ClusterIP,监听端口为80,访问端口为8080,协议为TCP。\n- 外网访问方式类型为LoadBalancer,监听端口为80,访问端口为9090,协议为TCP,配置白名单访问控制,仅允许170.126.0.0/16网段的用户访问。","x-request-examples-description-5":"创建转发策略类型的外网访问方式组件配置,如下请求示例配置了两条转发策略,两条策略的对外协议为HTTPS、负载均衡策略为默认策略,使用加权轮询算法、访问端口为8443,配置黑名单访问策略,不允许10.120.1.1和10.120.1.2这两个IP访问,安全策略为tls-1-2-strict,服务器默认证书是test。\n- 第一条转发策略域名设置为test.example.com,URL匹配规则为前缀匹配,匹配路径为/test1,监听端口设置为80,第一条访问策略未配置域名证书对,使用默认证书test。\n- 第二条转发策略域名设置为test.example.cn,URL匹配规则为前缀匹配,匹配路径为/test2,监听端口设置为80,第二条访问策略配置了域名证书对,使用域名证书对中的证书test1。","x-request-examples-description-6":"创建伸缩策略组件配置,配置最大实例数3个,最小实例数1个,cpu使用率30%,内存使用率30%,缩容冷却时间窗5分钟,每次最大缩容99个实例,最大扩容4个实例,禁止缩容功能关闭。","x-request-examples-description-7":"创建云存储配置组件配置(OBS桶配置、OBS并行文件系统、SFS3.0容量型配置),配置存储桶,挂载路径为/tmp,权限设置为读写;配置并行文件系统,挂载路径为/temp,权限设置为读写。","x-request-examples-description-8":"创建健康检查组件配置(配置存活探针、就绪探针、启动探针)。\n- 配置存活探针,类型为livenessProbe,检测周期10s,延迟时间1s,超时时间1s,成功阈值1,最大失败次数3,端口为80,协议HTTP,路径、请求头未设置。\n- 配置就绪探针,类型为readinessProbe,检测周期10s,延迟时间0s(0可不传),超时时间1s,成功阈值1,最大失败次数3,端口为80,协议HTTP,路径、请求头未设置。\n- 配置启动探针,类型为startupProbe,检测周期10s,延迟时间0s(0可不传),超时时间1s,成功阈值1,最大失败次数3,端口为80,协议HTTP,路径未设置,请求头设置x-auth-token。","x-request-examples-description-9":"创建生命周期管理组件配置(配置启动后处理、停止前处理)。配置启动后命令脚本“/bin/sh -c \"echo service start\"”,配置停止前命令脚本“/bin/sh -c \"echo service end\"”。","x-request-examples-url-1":"POST https://{endpoint}/v1/{project_id}/cae/applications/{application_id}/components/{component_id}/configurations","x-request-examples-url-10":"POST https://{endpoint}/v1/{project_id}/cae/applications/{application_id}/components/{component_id}/configurations","x-request-examples-url-11":"POST https://{endpoint}/v1/{project_id}/cae/applications/{application_id}/components/{component_id}/configurations","x-request-examples-url-12":"POST https://{endpoint}/v1/{project_id}/cae/applications/{application_id}/components/{component_id}/configurations","x-request-examples-url-2":"POST https://{endpoint}/v1/{project_id}/cae/applications/{application_id}/components/{component_id}/configurations","x-request-examples-url-3":"POST https://{endpoint}/v1/{project_id}/cae/applications/{application_id}/components/{component_id}/configurations","x-request-examples-url-4":"POST https://{endpoint}/v1/{project_id}/cae/applications/{application_id}/components/{component_id}/configurations","x-request-examples-url-5":"POST https://{endpoint}/v1/{project_id}/cae/applications/{application_id}/components/{component_id}/configurations","x-request-examples-url-6":"POST https://{endpoint}/v1/{project_id}/cae/applications/{application_id}/components/{component_id}/configurations","x-request-examples-url-7":"POST https://{endpoint}/v1/{project_id}/cae/applications/{application_id}/components/{component_id}/configurations","x-request-examples-url-8":"POST https://{endpoint}/v1/{project_id}/cae/applications/{application_id}/components/{component_id}/configurations","x-request-examples-url-9":"POST https://{endpoint}/v1/{project_id}/cae/applications/{application_id}/components/{component_id}/configurations","x-sec-auditlog":"Y","x-sec-privacy-datalevel":"L3","x-sec-upload-download":"N","x-support-sdk":"Y"}}},"product_short":"CAE","region_id":"cn-north-4","schemes":["HTTPS"],"security_definitions":null,"summary":"创建组件配置","tags":"组件配置","uri":null,"version":"2.0"}