{"base_path":null,"components":null,"consumes":"","definitions":{"CreateNoticeRuleResp":{"properties":{"api_version":{"description":"API版本,固定值“v1”,该值不可修改。","type":"string"},"kind":{"description":"API类型,固定值“NoticeRule”,该值不可修改。","type":"string"},"spec":{"$ref":"#/definitions/CreateNoticeRuleRespItem","description":"请求数据。"}},"required":["api_version","kind","spec"],"type":"object"},"CreateNoticeRuleRespItem":{"properties":{"enable":{"description":"是否启用。","type":"boolean"},"event_name":{"description":"触发事件名称。","type":"string"},"id":{"description":"通知规则的唯一标识。","type":"string"},"name":{"description":"通知名称。","type":"string"},"notification":{"$ref":"#/definitions/NoticeRuleNotification","description":"通知的机制。"},"scope":{"$ref":"#/definitions/NoticeRuleScope","description":"生效的通知规则范围。"},"trigger_policy":{"$ref":"#/definitions/TriggerPolicy","description":"触发策略。"}},"type":"object"},"NoticeRuleNotification":{"properties":{"endpoint":{"description":"通知的终端地址。\nemail协议,接入点必须是邮件地址。\nsms协议,接入点必须是一个电话号码。\nwechat协议,参考https://support.huaweicloud.com/smn_faq/smn_faq_0027.html获取订阅终端,\n企业微信群消息为SMN服务公测功能,需提交工单申请开通。","type":"string"},"protocol":{"description":"通知的协议类型,包括短信,邮件,企业微信群消息等。","enum":["email","sms","wechat"],"type":"string"},"template":{"description":"通知的模板语言。\nZH,中文。\nEN,英文。","enum":["ZH","EN"],"type":"string"}},"required":["protocol","endpoint"],"type":"object"},"NoticeRuleScope":{"properties":{"applications":{"description":"生效的应用id列表。","items":{"type":"string"},"type":"array"},"components":{"description":"生效的组件id列表。","items":{"type":"string"},"type":"array"},"environments":{"description":"生效的环境id列表。","items":{"type":"string"},"type":"array"},"type":{"description":"生效范围的类型。包括environments(对指定环境下所有组件生效),applications(对指定应用下所有组件生效),components(对指定的组件生效)。","enum":["environments","applications","components"],"type":"string"}},"required":["type"],"type":"object"},"TriggerPolicy":{"properties":{"count":{"description":"触发次数,选择累计触发时需设置该参数。","format":"int32","type":"integer"},"operator":{"description":"比较符,支持'>'和'>='。","enum":[">",">="],"type":"string"},"period":{"description":"触发周期,选择累计触发时需设置该参数,默认单位为s,支持5分钟、20分钟、1小时、4小时、24小时。","enum":[300,1200,3600,14400,86400],"format":"int32","type":"integer"},"trigger_type":{"description":"触发类型,accumulative: 累计触发,immediately: 立即触发。","enum":["accumulative","immediately"],"type":"string"}},"required":["trigger_type"],"type":"object"},"UpdateNoticeRuleItem":{"properties":{"enable":{"description":"是否启用。","type":"boolean"},"event_name":{"description":"触发事件名称,支持实例调度成功、实例调度失败、健康检查成功、健康检查失败、镜像拉取成功、镜像拉取失败、容器启动成功、容器启动失败、卷挂载成功、卷挂载失败。","enum":["Scheduled","FailedScheduling","Healthy","Unhealthy","Pulled","FailedPullImage","Started","BackOffStart","SuccessfulMountVolume","FailedMount"],"type":"string"},"scope":{"$ref":"#/definitions/NoticeRuleScope","description":"生效的通知规则范围。"},"trigger_policy":{"$ref":"#/definitions/TriggerPolicy","description":"触发策略。"}},"required":["scope","trigger_policy"],"type":"object"},"UpdateNoticeRuleReq":{"properties":{"api_version":{"description":"API版本,固定值“v1”,该值不可修改。","type":"string"},"kind":{"description":"API类型,固定值“NoticeRule”,该值不可修改。","type":"string"},"spec":{"$ref":"#/definitions/UpdateNoticeRuleItem","description":"请求数据。"}},"required":["api_version","kind","spec"],"type":"object"}},"description":null,"group_id":"233de030b8054c65a90cfefe2e0b09aa","host":"cae.cn-north-4.myhuaweicloud.com","id":"d968f66ac6d54253b5ab6e1cf6d395d3","info_version":"v1","method":"put","name":"UpdateNoticeRule","parameters":{"param_header_x_auth_token":{"description":"用户Token。    \n- 获取Token,请参考《[统一身份认证服务API参考](https://support.huaweicloud.com/api-iam/iam_30_0001.html)》的“获取用户Token”章节。          \n- 请求响应成功后在响应消息头中包含的“X-Subject-Token”的值即为Token值。","in":"header","maxLength":16384,"name":"X-Auth-Token","required":true,"type":"string","x-order":52},"param_header_x_enterprise_project_id":{"description":"企业项目ID。 \n- 创建环境时,环境会绑定企业项目ID。     \n- 最大长度36字节,带“-”连字符的UUID格式,或者是字符串“0”。    \n- 该字段不传(或传为字符串“0”)时,则查询默认企业项目下的资源。\n\n> 关于企业项目ID的获取及企业项目特性的详细信息,请参见《[企业管理服务用户指南](https://support.huaweicloud.com/usermanual-em/zh-cn_topic_0126101490.html)》。","in":"header","name":"X-Enterprise-Project-ID","pattern":"^[0-9a-z]{8}-[0-9a-z]{4}-[0-9a-z]{4}-[0-9a-z]{4}-[0-9a-z]{12}$|^0$","required":false,"type":"string","x-order":53},"param_path_project_id":{"description":"项目ID,获取项目ID请参见[获取项目ID](https://support.huaweicloud.com/api-cae/cae_06_0021.html)。","in":"path","name":"project_id","required":true,"type":"string","x-order":1,"x-sec-authority-parameter":"Y"}},"paths":{"/v1/{project_id}/cae/notice-rules/{rule_id}":{"put":{"consumes":["application/json"],"description":"修改事件通知规则。","operationId":"UpdateNoticeRule","parameters":[{"$ref":"#/parameters/param_path_project_id"},{"$ref":"#/parameters/param_header_x_auth_token"},{"$ref":"#/parameters/param_header_x_enterprise_project_id"},{"in":"body","name":"body","required":true,"schema":{"$ref":"#/definitions/UpdateNoticeRuleReq"}},{"in":"path","name":"rule_id","required":true,"type":"string"}],"produces":["application/json"],"responses":{"200":{"description":"请求成功。","examples":{"application/json":"{\n  \"api_version\": \"v1\",\n  \"kind\": \"NoticeRule\",\n  \"spec\": {\n    \"name\": \"test\",\n    \"event_name\": \"Started\",\n    \"scope\": {\n      \"type\": \"environments\",\n      \"environments\": [\n        \"f3c12180-b34a-42d8-bb5a-12ba0a6b579e\"\n      ]\n    },\n    \"trigger_policy\": {\n      \"trigger_type\": \"immediately\"\n    },\n    \"notification\": {\n      \"protocol\": \"email\",\n      \"endpoint\": \"123@example.com\"\n    },\n    \"enable\": true\n  }\n}"},"schema":{"$ref":"#/definitions/CreateNoticeRuleResp"}}},"summary":"修改事件通知规则。","tags":["NoticeRule"],"x-api-framework":"RestfulAPI","x-api-position":"Region_ZONE","x-api-type":"open-api","x-api-user":"IAM_User","x-apiexplorer-hide":"false","x-authority-parameter-url":"project_id","x-is-registered":"Y","x-open-region-cloud":"hws,hws_eu,hws_hk","x-request-examples-1":{"api_version":"v1","kind":"NoticeRule","spec":{"enable":true,"event_name":"Started","scope":{"environments":["f3c12180-b34a-42d8-bb5a-12ba0a6b579e"],"type":"environments"},"trigger_policy":{"trigger_type":"immediately"}}},"x-request-examples-description-1":"修改事件通知规则。","x-request-examples-url-1":"PUT https://{endpoint}/v1/{project_id}/cae/notice-rules/{rule_id}","x-sec-auditlog":"N","x-sec-privacy-datalevel":"L3","x-sec-upload-download":"N","x-support-sdk":"Y"}}},"product_short":"CAE","region_id":"cn-north-4","schemes":["HTTPS"],"security_definitions":null,"summary":"修改事件通知规则。","tags":"事件通知规则","uri":null,"version":"2.0"}