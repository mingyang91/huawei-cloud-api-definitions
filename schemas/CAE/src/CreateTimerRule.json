{"base_path":null,"components":null,"consumes":"","definitions":{"ApiVersionObj":{"description":"API版本,固定值“v1”,该值不可修改。","enum":["v1"],"type":"string"},"AppInfo":{"properties":{"app_id":{"description":"应用ID。","type":"string"},"app_name":{"description":"应用名称。","type":"string"}},"type":"object"},"ComponentInfo":{"properties":{"component_id":{"description":"组件ID。","type":"string"},"component_name":{"description":"组件名称。","type":"string"}},"type":"object"},"CreateTimerRuleReq":{"properties":{"api_version":{"$ref":"#/definitions/ApiVersionObj"},"kind":{"$ref":"#/definitions/TimeRuleKindObj"},"spec":{"$ref":"#/definitions/UpdateTimerRuleDetails","description":"启停规则规格信息。"}},"type":"object"},"CreateTimerRuleResponseBody":{"properties":{"api_version":{"$ref":"#/definitions/ApiVersionObj"},"items":{"items":{"$ref":"#/definitions/TimerRuleDetails"},"type":"array"},"kind":{"$ref":"#/definitions/TimeRuleKindObj"}},"type":"object"},"TimeRuleKindObj":{"description":"API类型,固定值“TimerRule”,该值不可修改。","enum":["TimerRule"],"type":"string"},"TimerRuleDetails":{"description":"启停规则列表。","properties":{"apps":{"description":"定时启停规则所包含的所有应用,只在生效范围为application的时候需要填写。","items":{"$ref":"#/definitions/AppInfo"},"type":"array"},"component_number":{"description":"定时启停规则包含的组件个数,在创建定时启停规则时会忽略。","type":"integer"},"components":{"description":"在定时启停规则所包含的所有组件,只在生效范围为component的时候需要填写。","items":{"$ref":"#/definitions/ComponentInfo"},"type":"array"},"cron":{"description":"cron表达式。","type":"string"},"effective_policy":{"description":"定时启停规则的定时类别: onetime/periodic。","type":"string"},"effective_range":{"description":"定时启停规则生效范围: component/application/environment。","type":"string"},"env_id":{"description":"环境ID。","type":"string"},"id":{"description":"定时启停规则ID,在创建定时启停规则时会忽略。","type":"string"},"last_execution_status":{"description":"上次执行的状态:abnormal/normal/executing,在创建定时启停规则时会忽略。","type":"string"},"name":{"description":"定时启停规则名称。","type":"string"},"status":{"description":"定时启停规则状态(是否开启):on/off。","type":"string"},"type":{"description":"定时启停规则的类型:stop/start。","type":"string"}},"type":"object"},"UpdateTimerRuleDetails":{"description":"修改启停规则规格信息","properties":{"apps":{"description":"定时启停规则所包含的所有应用,只在生效范围为application的时候需要填写。","items":{"$ref":"#/definitions/AppInfo"},"type":"array"},"components":{"description":"在定时启停规则所包含的所有组件,只在生效范围为component的时候需要填写。","items":{"$ref":"#/definitions/ComponentInfo"},"type":"array"},"cron":{"description":"cron表达式。","type":"string"},"effective_policy":{"description":"定时启停规则的定时类别: onetime/periodic。","type":"string"},"effective_range":{"description":"定时启停规则生效范围: component/application/environment。","type":"string"},"name":{"description":"定时启停规则名称。","type":"string","x-api-inputuntrust-envparam":"Env"},"status":{"description":"定时启停规则状态(是否开启):on/off。","type":"string"},"type":{"description":"定时启停规则的类型:stop/start。","type":"string"}},"required":["name","type","status","cron","effective_policy","effective_range"],"type":"object"}},"description":null,"group_id":"233de030b8054c65a90cfefe2e0b09aa","host":"cae.cn-north-4.myhuaweicloud.com","id":"599c4bedde09403e95b286c5f5de9cb0","info_version":"v1","method":"post","name":"CreateTimerRule","parameters":{"param_header_x_auth_token":{"description":"用户Token。    \n- 获取Token,请参考《[统一身份认证服务API参考](https://support.huaweicloud.com/api-iam/iam_30_0001.html)》的“获取用户Token”章节。          \n- 请求响应成功后在响应消息头中包含的“X-Subject-Token”的值即为Token值。","in":"header","maxLength":16384,"name":"X-Auth-Token","required":true,"type":"string","x-order":52},"param_header_x_enterprise_project_id":{"description":"企业项目ID。 \n- 创建环境时,环境会绑定企业项目ID。     \n- 最大长度36字节,带“-”连字符的UUID格式,或者是字符串“0”。    \n- 该字段不传(或传为字符串“0”)时,则查询默认企业项目下的资源。\n\n> 关于企业项目ID的获取及企业项目特性的详细信息,请参见《[企业管理服务用户指南](https://support.huaweicloud.com/usermanual-em/zh-cn_topic_0126101490.html)》。","in":"header","name":"X-Enterprise-Project-ID","pattern":"^[0-9a-z]{8}-[0-9a-z]{4}-[0-9a-z]{4}-[0-9a-z]{4}-[0-9a-z]{12}$|^0$","required":false,"type":"string","x-order":53},"param_header_x_environment_id":{"description":"环境ID。     \n- 获取环境ID,通过《[云应用引擎API参考](https://support.huaweicloud.com/api-cae/ListEnvironments.html)》的“获取环境列表”章节获取环境信息。    \n- 请求响应成功后在响应体的items数组中的一个元素即为一个环境的信息,其中id字段即是环境ID。","in":"header","name":"X-Environment-ID","pattern":"^[0-9a-z]{8}-[0-9a-z]{4}-[0-9a-z]{4}-[0-9a-z]{4}-[0-9a-z]{12}$","required":true,"type":"string","x-order":54},"param_path_project_id":{"description":"项目ID,获取项目ID请参见[获取项目ID](https://support.huaweicloud.com/api-cae/cae_06_0021.html)。","in":"path","name":"project_id","required":true,"type":"string","x-order":1,"x-sec-authority-parameter":"Y"}},"paths":{"/v1/{project_id}/cae/timer-rules":{"post":{"consumes":["application/json"],"description":"创建定时启停规则。","operationId":"CreateTimerRule","parameters":[{"$ref":"#/parameters/param_path_project_id"},{"$ref":"#/parameters/param_header_x_auth_token"},{"$ref":"#/parameters/param_header_x_enterprise_project_id"},{"$ref":"#/parameters/param_header_x_environment_id"},{"in":"body","name":"body","required":true,"schema":{"$ref":"#/definitions/CreateTimerRuleReq"}}],"produces":["application/json"],"responses":{"200":{"description":"请求成功。","examples":{"application/json":"{\n  \"api_version\": \"v1\",\n  \"kind\": \"TimerRule\",\n  \"items\": [\n    {\n      \"id\": \"string\",\n      \"name\": \"string\",\n      \"type\": \"start\",\n      \"env_id\": \"string\",\n      \"cron\": \"0 16 17 31 1 ? 2023\",\n      \"component_number\": 2,\n      \"status\": \"off\",\n      \"last_execution_status\": \"normal\",\n      \"effective_range\": \"application\",\n      \"effective_policy\": \"onetime\",\n      \"apps\": [\n        {\n          \"app_id\": \"string\",\n          \"app_name\": \"string\"\n        }\n      ]\n  ]\n}"},"schema":{"$ref":"#/definitions/CreateTimerRuleResponseBody"}}},"summary":"创建定时启停规则","tags":["timer-rules"],"x-api-framework":"RestfulAPI","x-api-position":"Region_ZONE","x-api-type":"open-api","x-api-user":"IAM_User","x-api-userinput-untrust":{"EnvParam":"name"},"x-apiexplorer-hide":"false","x-authority-parameter-url":"project_id","x-is-registered":"Y","x-open-region-cloud":"hws","x-request-examples-1":{"api_version":"v1","kind":"TimerRule","spec":{"cron":"0 55 16 22 2 ? 2023","effective_policy":"onetime","effective_range":"environment","env_id":"c41a8e9f-5447-406a-8783-85885f3870a3","name":"test","status":"on","type":"start"}},"x-request-examples-description-1":"创建定时启停规则,策略名称为“test”,是一个启动策略,生效组件范围涉及环境中的所有组件,触发策略为“执行一次”。","x-request-examples-url-1":"POST https://{endpoint}/v1/{project_id}/cae/timer-rules","x-sec-auditlog":"Y","x-sec-privacy-datalevel":"L3","x-sec-upload-download":"N","x-support-sdk":"Y"}}},"product_short":"CAE","region_id":"cn-north-4","schemes":["HTTPS"],"security_definitions":null,"summary":"创建定时启停规则","tags":"定时启停规则","uri":null,"version":"2.0"}