{"base_path":"/","components":null,"consumes":"","definitions":{"IAM5ErrorDetails":{"description":"调用下游服务的报错信息集合,IAM5鉴权错误时才会返回此信息0。","properties":{"error_code":{"description":"下游服务错误码","type":"string"},"error_msg":{"description":"下游服务报错信息","type":"string"}}},"RestErrorResponse":{"properties":{"details":{"description":"调用下游服务的报错信息集合,IAM5鉴权错误时才会返回此字段。","items":{"$ref":"#/definitions/IAM5ErrorDetails"},"type":"array"},"encoded_authorization_message":{"description":"编码 (加密) 后的详细拒绝原因,用户可以自行调用 STS 服务的decode-authorization-message接口进行解码,可参考STS5联调自验证。IAM5鉴权错误时才会返回此字段。","type":"string"},"error_code":{"description":"错误码","type":"string"},"error_msg":{"description":"错误信息","type":"string"}},"title":"RestErrorResponse","type":"object"},"TmsResourceInstance":{"properties":{"resource_detail":{"description":"资源细节","type":"object"},"resource_id":{"description":"资源id","type":"string"},"resource_name":{"description":"资源名称","type":"string"},"sysTags":{"description":"系统标签键值对","items":{"$ref":"#/definitions/TmsResourceTag"},"type":"array"},"tags":{"description":"系统标签键值对","items":{"$ref":"#/definitions/TmsResourceTag"},"type":"array"}},"type":"object"},"TmsResourceInstancesRequest":{"example":{"action":"count","limit":1},"properties":{"action":{"description":"操作标识","type":"string"},"limit":{"default":1000,"description":"查询记录数,默认为1000","format":"int32","type":"integer"},"matches":{"description":"tms资源标签","items":{"$ref":"#/definitions/TmsResourceTag"},"type":"array"},"not_tags":{"description":"不标识于标签","items":{"$ref":"#/definitions/TmsResourceInstancesTag"},"type":"array"},"not_tags_any":{"description":"不标识于标签","items":{"$ref":"#/definitions/TmsResourceInstancesTag"},"type":"array"},"offset":{"default":0,"description":"索引位置,默认为0","format":"int32","type":"integer"},"sys_tags":{"description":"系统标签","items":{"$ref":"#/definitions/TmsResourceInstancesTag"},"type":"array"},"tags":{"description":"标签","items":{"$ref":"#/definitions/TmsResourceInstancesTag"},"type":"array"},"tags_any":{"description":"任意标签的资源筛选标识","items":{"$ref":"#/definitions/TmsResourceInstancesTag"},"type":"array"},"without_any_tag":{"description":"无任何标签的资源筛选标识","type":"string"}},"type":"object"},"TmsResourceInstancesResponse":{"properties":{"resources":{"description":"资源列表","items":{"$ref":"#/definitions/TmsResourceInstance"},"type":"array"},"total_count":{"description":"资源总数","format":"int32","type":"integer"}},"type":"object"},"TmsResourceInstancesTag":{"properties":{"key":{"description":"标签键","type":"string"},"values":{"description":"标签值列表","items":{"type":"string"},"type":"array"}},"type":"object"},"TmsResourceTag":{"description":"TMS标签信息详情","properties":{"key":{"description":"标签键","type":"string"},"value":{"description":"标签值","type":"string"}}}},"description":null,"group_id":"29975c0bd7ce463ca70ad5c074e3974b","host":"waf.cn-north-4.myhuaweicloud.com","id":"180e8fdfa5ad451eac21f4a9a09fa698","info_version":"v1","method":"post","name":"ConfirmTmsResourceInstances","parameters":{},"paths":{"/v1/{project_id}/waf/{resource_type}/resource-instances/action":{"post":{"description":"使用标签过滤实例,标签管理服务需要提供按标签过滤各服务实例并汇总显示在列表中,需要各服务提供查询能力。","operationId":"ConfirmTmsResourceInstances","parameters":[{"description":"**参数解释:**\n用户Token,通过调用IAM服务获取用户Token接口获取(响应消息头中X-Subject-Token的值)\n**约束限制:**\n不涉及\n**取值范围:**\n不涉及\n**默认取值:**\n不涉及","in":"header","maxLength":32768,"minLength":1,"name":"X-Auth-Token","required":true,"type":"string"},{"default":"application/json;charset=utf8","description":"**参数解释:**\n内容类型\n**约束限制:**\n不涉及\n**取值范围:**\n不涉及\n**默认取值:**\napplication/json;charset=utf8","in":"header","maxLength":2000,"minLength":0,"name":"Content-Type","required":true,"type":"string"},{"default":"","description":"**参数解释:**\n项目ID,对应控制台用户名->我的凭证->项目列表->项目ID\n**约束限制:**\n不涉及\n**取值范围:**\n只能由英文字母、数字组成,且长度为32个字符。\n**默认取值:**\n不涉及","in":"path","maxLength":32,"minLength":32,"name":"project_id","required":true,"type":"string"},{"description":"**参数解释:**\n资源类型,目前支持waf-instance,waf\n**约束限制:**\n不涉及\n**取值范围:**\n只能由英文字母、数字组成,且长度为32个字符。\n**默认取值:**\n不涉及","in":"path","name":"resource_type","required":true,"type":"string"},{"description":"**参数解释:**\n查询请求body\n**约束限制:**\n不涉及\n**取值范围:**\n不涉及\n**默认取值:**\n不涉及","in":"body","name":"tmsResourceInstancesRequest","required":true,"schema":{"$ref":"#/definitions/TmsResourceInstancesRequest"}}],"produces":["application/json"],"responses":{"200":{"description":"请求成功","examples":{"application/json":{"resources":[{"resource_detail":{"create_time":"2023-09-01T10:00:00Z","status":"running","type":"ECS"},"resource_id":"res-123456","resource_name":"server-01","sysTags":[{"key":"sys_owner","value":"system"}],"tags":[{"key":"environment","value":"production"},{"key":"department","value":"IT"}]}],"total_count":1}},"schema":{"$ref":"#/definitions/TmsResourceInstancesResponse"}},"400":{"description":"请求失败","schema":{"$ref":"#/definitions/RestErrorResponse"}},"401":{"description":"token权限不足","schema":{"$ref":"#/definitions/RestErrorResponse"}},"500":{"description":"服务器内部错误","schema":{"$ref":"#/definitions/RestErrorResponse"}}},"summary":"查询资源实例","tags":["租户资源"],"x-api-type":"open-api","x-is-registered":"Y","x-request-examples-description-1":"查询资源实例","x-request-examples-text-1":{"action":"count","limit":1},"x-request-examples-url-1":"POST https://{endpoint}/v1/{project_id}/waf/{resource_type}/resource-instances/action?enterprise_project_id=0","x-support-international":false,"x-support-sdk":"Y"}}},"product_short":"WAF","region_id":"cn-north-4","schemes":["HTTPS"],"security_definitions":null,"summary":"查询资源实例","tags":"租户资源","uri":null,"version":"2.0"}