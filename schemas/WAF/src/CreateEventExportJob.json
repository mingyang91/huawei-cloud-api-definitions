{"base_path":"/","components":null,"consumes":"","definitions":{"AsyncJobReqBody":{"description":"**参数解释:**\n下发自定义导出攻击事件的异步任务的请求体,用于配置攻击事件日志的导出条件和字段\n**约束限制:**\n不涉及\n**取值范围:**\n不涉及\n**默认取值:**\n不涉及","example":{"dump_columns":["id"],"recent":"today"},"properties":{"actions":{"description":"**参数解释:**\n查询指定防护动作列表的日志,仅导出执行这些动作的攻击事件(如block-拦截、log-日志)\n**约束限制:**\n不涉及\n**取值范围:**\n不涉及\n**默认取值:**\n不涉及","example":["block"],"items":{"type":"string"},"type":"array"},"attacks":{"description":"**参数解释:**\n查询指定攻击类型列表的日志,仅导出这些类型的攻击事件(如SQL注入、XSS等)\n**约束限制:**\n不涉及\n**取值范围:**\n不涉及\n**默认取值:**\n不涉及","example":["custom_custom"],"items":{"type":"string"},"type":"array"},"dump_columns":{"description":"**参数解释:**\n需要导出的列名称,指定攻击事件日志中需要导出的字段(如时间、事件ID、攻击类型等)\n**约束限制:**\n不涉及\n**取值范围:**\n不涉及\n**默认取值:**\n不涉及","example":["time","id","policy_id","host","url","attack","rule","payload","payload_location","action","request_line","headers","cookie","body","sip","region","enterprise_project_id","enterprise_project_name"],"items":{"type":"string"},"type":"array"},"hosts":{"description":"**参数解释:**\n查询指定host列表的日志,仅导出这些域名对应的攻击事件\n**约束限制:**\n不涉及\n**取值范围:**\n不涉及\n**默认取值:**\n不涉及","items":{"type":"string"},"type":"array"},"ids":{"description":"**参数解释:**\n查询指定事件ID列表的日志,仅导出包含这些ID的攻击事件\n**约束限制:**\n不涉及\n**取值范围:**\n不涉及\n**默认取值:**\n不涉及","example":["30-0000-0000-0000-20820220704173644-829e1e8a"],"items":{"type":"string"},"type":"array"},"instances":{"description":"**参数解释:**\n查询指定instance列表的日志,仅导出这些实例对应的攻击事件\n**约束限制:**\n不涉及\n**取值范围:**\n不涉及\n**默认取值:**\n不涉及","items":{"type":"string"},"type":"array"},"nactions":{"description":"**参数解释:**\n查询不包含防护动作列表的日志,排除执行这些动作的攻击事件\n**约束限制:**\n不涉及\n**取值范围:**\n不涉及\n**默认取值:**\n不涉及","example":["log"],"items":{"type":"string"},"type":"array"},"nattacks":{"description":"**参数解释:**\n查询不包含攻击类型列表的日志,排除这些类型的攻击事件\n**约束限制:**\n不涉及\n**取值范围:**\n不涉及\n**默认取值:**\n不涉及","example":["custom_geoip"],"items":{"type":"string"},"type":"array"},"nids":{"description":"**参数解释:**\n查询不包含事件ID列表的日志,排除这些ID对应的攻击事件\n**约束限制:**\n不涉及\n**取值范围:**\n不涉及\n**默认取值:**\n不涉及","example":["30-0000-0000-0000-20820220704173644-829e1e88"],"items":{"type":"string"},"type":"array"},"nrules":{"description":"**参数解释:**\n查询不包含命中的规则id列表的日志,排除命中这些规则的攻击事件\n**约束限制:**\n不涉及\n**取值范围:**\n不涉及\n**默认取值:**\n不涉及","example":["8544dd6afac74c249cd777fd3bf42935"],"items":{"type":"string"},"type":"array"},"nsips":{"description":"**参数解释:**\n查询不包含源ip列表的日志,排除这些IP对应的攻击事件\n**约束限制:**\n不涉及\n**取值范围:**\n不涉及\n**默认取值:**\n不涉及","example":["10.63.36.198"],"items":{"type":"string"},"type":"array"},"nurls":{"description":"**参数解释:**\n查询不包含攻击的url链接列表的日志,排除这些URL对应的攻击事件\n**约束限制:**\n不涉及\n**取值范围:**\n不涉及\n**默认取值:**\n不涉及","example":["/xxx"],"items":{"type":"string"},"type":"array"},"recent":{"description":"**参数解释:**\n查询日志的时间范围,如1day(1天)、1week(1周)、1month(1个月)\n**约束限制:**\n不涉及\n**取值范围:**\n不涉及\n**默认取值:**\n不涉及","example":"1week","type":"string"},"rules":{"description":"**参数解释:**\n查询指定命中的规则id列表的日志,仅导出命中这些规则的攻击事件\n**约束限制:**\n不涉及\n**取值范围:**\n不涉及\n**默认取值:**\n不涉及","example":["a3b6e9418e694f9d9a38da137a745419"],"items":{"type":"string"},"type":"array"},"sip":{"description":"**参数解释:**\n查询指定源ip(模糊查询),导出包含该IP(模糊匹配)的攻击事件\n**约束限制:**\n不涉及\n**取值范围:**\n不涉及\n**默认取值:**\n不涉及","type":"string"},"sips":{"description":"**参数解释:**\n查询指定源ip列表的日志,仅导出这些IP对应的攻击事件\n**约束限制:**\n不涉及\n**取值范围:**\n不涉及\n**默认取值:**\n不涉及","example":["10.63.36.198","10.142.4.114"],"items":{"type":"string"},"type":"array"},"url":{"description":"**参数解释:**\n查询指定攻击的url(模糊查询),导出包含该URL(模糊匹配)的攻击事件\n**约束限制:**\n不涉及\n**取值范围:**\n不涉及\n**默认取值:**\n不涉及","type":"string"},"urls":{"description":"**参数解释:**\n查询指定攻击的url链接列表的日志,仅导出这些URL对应的攻击事件\n**约束限制:**\n不涉及\n**取值范围:**\n不涉及\n**默认取值:**\n不涉及","example":["/cc","/zyh_test","/zyh_test123"],"items":{"type":"string"},"type":"array"}},"required":["recent","dump_columns"]},"AsyncJobResponse":{"description":"**参数解释:**\n异步任务的响应体,返回攻击事件导出异步任务的状态、描述和ID\n**约束限制:**\n不涉及\n**取值范围:**\n不涉及\n**默认取值:**\n不涉及","properties":{"job_id":{"description":"**参数解释:**\n异步任务的ID,用于查询任务进度或结果的唯一标识\n**约束限制:**\n不涉及\n**取值范围:**\n不涉及\n**默认取值:**\n不涉及","example":"ee335384e4b24c1daf698756c274132e","type":"string"},"message":{"description":"**参数解释:**\n异步任务的描述,说明当前任务的进展或结果\n**约束限制:**\n不涉及\n**取值范围:**\n不涉及\n**默认取值:**\n不涉及","example":"防护事件数据转储中","type":"string"},"status":{"description":"**参数解释:**\n异步任务的状态,如RUNNING(运行中)、SUCCESS(成功)、FAILED(失败)\n**约束限制:**\n不涉及\n**取值范围:**\n不涉及\n**默认取值:**\n不涉及","example":"RUNNING","type":"string"}}},"IAM5ErrorDetails":{"description":"调用下游服务的报错信息集合,IAM5鉴权错误时才会返回此信息0。","properties":{"error_code":{"description":"下游服务错误码","type":"string"},"error_msg":{"description":"下游服务报错信息","type":"string"}}},"RestErrorResponse":{"properties":{"details":{"description":"调用下游服务的报错信息集合,IAM5鉴权错误时才会返回此字段。","items":{"$ref":"#/definitions/IAM5ErrorDetails"},"type":"array"},"encoded_authorization_message":{"description":"编码 (加密) 后的详细拒绝原因,用户可以自行调用 STS 服务的decode-authorization-message接口进行解码,可参考STS5联调自验证。IAM5鉴权错误时才会返回此字段。","type":"string"},"error_code":{"description":"错误码","type":"string"},"error_msg":{"description":"错误信息","type":"string"}},"title":"RestErrorResponse","type":"object"}},"description":null,"group_id":"29975c0bd7ce463ca70ad5c074e3974b","host":"waf.cn-north-4.myhuaweicloud.com","id":"2d914a9000894b93a54e5db7d273f23a","info_version":"v1","method":"post","name":"CreateEventExportJob","parameters":{},"paths":{"/v1/{project_id}/waf/event/job/export":{"post":{"description":"**参数解释:**\n下发自定义导出攻击事件的异步任务\n**约束限制:**\n不涉及\n**取值范围:**\n不涉及\n**默认取值:**\n不涉及","operationId":"CreateEventExportJob","parameters":[{"description":"**参数解释:**\n租户项目ID\n**约束限制:**\n不涉及\n**取值范围:**\n不涉及\n**默认取值:**\n不涉及","in":"path","name":"project_id","required":true,"type":"string"},{"description":"**参数解释:**\n租户token\n**约束限制:**\n不涉及\n**取值范围:**\n不涉及\n**默认取值:**\n不涉及","in":"header","name":"X-Auth-Token","required":true,"type":"string"},{"description":"**参数解释:**\n内容类型\n**约束限制:**\n不涉及\n**取值范围:**\n不涉及\n**默认取值:**\n不涉及","in":"header","name":"Content-Type","required":true,"type":"string"},{"description":"**参数解释:**\n下发自定义导出攻击事件的异步任务的请求体\n**约束限制:**\n不涉及\n**取值范围:**\n不涉及\n**默认取值:**\n不涉及","in":"body","name":"AsyncJobReqBody","required":true,"schema":{"$ref":"#/definitions/AsyncJobReqBody"}}],"produces":["application/json"],"responses":{"200":{"description":"**参数解释:**\nOK\n**约束限制:**\n不涉及\n**取值范围:**\n不涉及\n**默认取值:**\n不涉及","examples":{"application/json":{"job_id":"f67a449d22634193a7edd4edb5b29ee5","message":"Checking domain name configuration","status":"RUNNING"}},"schema":{"$ref":"#/definitions/AsyncJobResponse"}},"400":{"description":"**参数解释:**\n请求失败\n**约束限制:**\n不涉及\n**取值范围:**\n不涉及\n**默认取值:**\n不涉及","schema":{"$ref":"#/definitions/RestErrorResponse"}},"401":{"description":"**参数解释:**\ntoken权限不足\n**约束限制:**\n不涉及\n**取值范围:**\n不涉及\n**默认取值:**\n不涉及","schema":{"$ref":"#/definitions/RestErrorResponse"}},"500":{"description":"**参数解释:**\n服务器内部错误\n**约束限制:**\n不涉及\n**取值范围:**\n不涉及\n**默认取值:**\n不涉及","schema":{"$ref":"#/definitions/RestErrorResponse"}}},"summary":"下发自定义导出攻击事件的异步任务","tags":["事件管理"],"x-api-type":"open-api","x-is-registered":"Y","x-support-international":true,"x-support-sdk":"Y"}}},"product_short":"WAF","region_id":"cn-north-4","schemes":["HTTPS"],"security_definitions":null,"summary":"下发自定义导出攻击事件的异步任务","tags":"事件管理","uri":null,"version":"2.0"}