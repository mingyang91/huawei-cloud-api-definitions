{"base_path":"/","components":null,"consumes":"[\"application/json\"]","definitions":{"AppConfigs":{"description":"应用模板网络参数配置","properties":{"dns_policy":{"description":"应用实例DNS策略,可选值Default、ClusterFirst、ClusterFirstWithHostNet,默认为Default。应用实例启用主机网络时只能选填Default、ClusterFirstWithHostNet,不启用主机网络时只能选填Default、ClusterFirst","type":"string"},"host_network":{"description":"默认为true,其中true表示主机网络,而false表示端口映射","type":"boolean"},"host_pid":{"description":"应用实例是否与主机共PID命名空间,默认值false","type":"boolean"},"ports":{"description":"容器端口映射值","items":{"$ref":"#/definitions/Ports"},"type":"array"},"privileged":{"description":"默认为false,表示是否开启特权模式","type":"boolean"},"restart_policy":{"description":"应用实例重启模式:\n- Always:当容器终止退出后,总是重启容器\n- Onfailure:容器异常退出(退出码非0)时才重启容器\n- Never:容器终止退出后,不重启容器","type":"string"},"run_as_user":{"description":"容器运行用户ID,输入范围为0~65534的整数","type":"integer"}},"type":"object"},"AppResp":{"description":"应用模板配置","properties":{"alias":{"description":"应用模板别名,中文英文字母、数字、中划线、下划线,最大64字符","type":"string"},"app_versions":{"description":"app详情","items":{"$ref":"#/definitions/AppVersionDetail"},"type":"array"},"created_at":{"description":"创建时间","type":"string"},"description":{"description":"应用模板描述,最大长度255,不允许^ ~ # $ % & * < > ( ) [ ] { } ' \" \\","type":"string"},"icon_url":{"description":"应用图标存储url地址,最大长度2083","type":"string"},"id":{"description":"应用模板ID","type":"string"},"name":{"description":"应用模板名称,只允许英文小写字母、数字、中划线,最大长度32, 英文小写字母或数字开头和结尾\nName为必填字段,且本租户中唯一","type":"string"},"project_id":{"description":"项目ID","type":"string"},"updated_at":{"description":"更新时间","type":"string"},"visibility":{"description":"模板类型","type":"string"}},"required":["id","name","alias","description","icon_url","created_at","updated_at","project_id","visibility","app_versions"]},"AppShowResp":{"description":"应用模板","properties":{"app":{"$ref":"#/definitions/AppResp"}},"required":["app"]},"AppUpdate":{"properties":{"alias":{"description":"应用模板别名,中文、英文字母、数字、中划线、下划线,最大64字符","type":"string"},"description":{"description":"应用模板描述,最大长度255,不允许^ ~ # $ % & * < > ( ) [ ] { } ' \" \\","type":"string"}}},"AppVersionDetail":{"description":"app详情","properties":{"arch":{"description":"架构","type":"string"},"args":{"description":"参数","items":{"type":"string"},"type":"array"},"command":{"description":"启动命令","items":{"type":"string"},"type":"array"},"configs":{"$ref":"#/definitions/AppConfigs","description":"容器特殊参数"},"created_at":{"description":"创建时间","type":"string"},"envs":{"description":"环境变量","items":{"$ref":"#/definitions/Env"},"type":"array"},"id":{"description":"应用版本ID","type":"string"},"image_url":{"description":"镜像存储地址","type":"string"},"liveness_probe":{"$ref":"#/definitions/ProbeDetail","description":"工作负载存活探针"},"npu_type":{"description":"NPU芯片类型,可填:D310,D910","type":"string"},"project_id":{"description":"项目ID","type":"string"},"readiness_probe":{"$ref":"#/definitions/ProbeDetail","description":"工作负载业务探针"},"resources":{"$ref":"#/definitions/Resources"},"updated_at":{"description":"更新时间\n只有更新后才会出现该字段","type":"string"},"version":{"description":"应用版本号","type":"string"},"volumes":{"description":"卷配置","items":{"$ref":"#/definitions/Volumes"},"type":"array"}},"required":["envs","volumes"],"type":"object"},"ConfigsMap":{"description":"环境变量引用配置项时使用。","properties":{"key":{"description":"配置项的属性名","type":"string"},"name":{"description":"配置项的名称","type":"string"}},"required":["name","key"]},"Env":{"description":"环境变量","properties":{"field_path":{"description":"该参数目前只支持赋值\"status.hostIP\",即引用边缘节点的IP地址作为环境变量。","type":"string"},"name":{"description":"环境变量的key,由大小写字母或下划线开头,由数字、大小写字母、下划线组成,最大长度2048个字符,不允许重复","type":"string"},"value":{"description":"环境变量的value,最大长度20480个字符。value、value_from和field_path必须三选一使用。","type":"string"},"value_from":{"$ref":"#/definitions/ValueFrom","description":"环境变量可使用配置项和密钥导入"}},"required":["name"]},"HttpGetDetail":{"description":"执行http探测","properties":{"host":{"description":"请求的主机地址,默认为容器IP","type":"string"},"path":{"description":"必须要以/开头,构造结果为:协议类型://主机地址:端口路径","type":"string"},"port":{"description":"探测的http端口,1到65535之间的整数","format":"int32","type":"integer"},"scheme":{"description":"协议类型,HTTP或HTTPS,默认HTTP","type":"string"}},"required":["path","port"]},"LimitsRequests":{"description":"资源配置限制","properties":{"cpu":{"description":"cpu核数,大于等于0.01,最大1000;请求不需要带单位","format":"float","type":"number"},"gpu":{"description":"Gpu显存大小,单位兆,大于等于0.01,最大1024000;请求不需要带单位","format":"float","type":"number"},"memory":{"description":"内存大小,单位兆,大于等于0.01,最大1024000。注意:内存的limits值最小为4;请求不需要带单位","format":"float","type":"number"},"npu":{"description":"Npu个数,大于0,最大1000;请求不需要带单位","type":"integer"}}},"Ports":{"description":"容器端口映射值","properties":{"container_port":{"description":"构成一堆映射的容器端口","format":"int32","type":"integer"},"host_ip":{"description":"对应网卡地址","type":"string"},"host_port":{"description":"构成一对映射的物理机对应网卡端口","format":"int32","type":"integer"}}},"ProbeDetail":{"description":"探针配置","properties":{"exec_command":{"description":"执行探测的命令行命令,长度1-10240内的字符串","type":"string"},"http_get":{"$ref":"#/definitions/HttpGetDetail","description":"执行http探测"},"initial_delay_seconds":{"description":"表示从工作负载启动后从多久开始探测,大于0且不大于3600的整数,默认为10","format":"int32","type":"integer"},"timeout_seconds":{"description":"表示探测超时时间,大于0且不大于3600的整数,默认为1","format":"int32","type":"integer"}}},"Resources":{"description":"容器使用的资源","properties":{"limits":{"$ref":"#/definitions/LimitsRequests","description":"允许容器使用的最大资源"},"requests":{"$ref":"#/definitions/LimitsRequests","description":"容器需要使用的最小资源"}}},"Secrets":{"description":"环境变量引用密钥时使用。使用ValueFrom时,secret与configmap必须二选一。","properties":{"key":{"description":"密钥的属性名","type":"string"},"name":{"description":"密钥的名称","type":"string"}},"required":["name","key"]},"UpdateAppBody":{"description":"更新应用模板的请求体","properties":{"app":{"$ref":"#/definitions/AppUpdate","description":"更新应用模板配置"}},"required":["app"],"type":"object"},"ValueFrom":{"properties":{"configmap":{"$ref":"#/definitions/ConfigsMap"},"secret":{"$ref":"#/definitions/Secrets"}}},"Volumes":{"description":"卷配置","properties":{"destination":{"description":"卷挂载路径,必须是合法的路径","type":"string"},"name":{"description":"卷名称,小写字母或数字,最长63个字符","type":"string"},"read_only":{"description":"读写权限,configMap和secret类型只支持读权限","type":"boolean"},"source":{"description":"卷来源,type为hostPath时输入路径,要求以/开头,后面可包含中划线,反斜杠,下划线,点号,字母,数字; secret时输入secret名称,configMap时输入configMap名称,emptyDir时输入disk或memory","type":"string"},"type":{"description":"卷的类型,支持configMap,secret,emptyDir,hostPath","type":"string"}},"required":["name","type","source","destination"],"type":"object"}},"description":null,"group_id":"cdaa2d3f4fbb4dc38b6a6c55f9222ed9","host":"ief.cn-north-4.myhuaweicloud.com","id":"e190a35339c745148dfe6fca04b49d3b","info_version":"v1","method":"put","name":"UpdateApp","parameters":{"Content-Type":{"description":"消息体的类型(格式),默认取值为“application/json”","in":"header","name":"Content-Type","required":true,"type":"string"},"IEF-Instance-Id":{"description":"铂金版实例ID,专业版实例为空值","in":"header","name":"ief-instance-id","required":false,"type":"string"},"X-Auth-Token":{"description":"用户Token。\n通过调用IAM服务获取用户Token接口获取(响应消息头中X-Subject-Token的值)。","in":"header","name":"X-Auth-Token","required":true,"type":"string","x-example":"MIIDkgYJKoZIhvcNAQcCoIIDgzCCXXXXXX..."}},"paths":{"/v2/{project_id}/edgemgr/apps/{app_id}":{"put":{"consumes":["application/json"],"description":"更新一个应用模板。","operationId":"UpdateApp","parameters":[{"$ref":"#/parameters/Content-Type"},{"$ref":"#/parameters/X-Auth-Token"},{"$ref":"#/parameters/IEF-Instance-Id"},{"description":"项目ID","in":"path","name":"project_id","required":true,"type":"string"},{"description":"应用模板ID","in":"path","name":"app_id","required":true,"type":"string"},{"description":"请求参数","in":"body","name":"UpdateAppBody","required":true,"schema":{"$ref":"#/definitions/UpdateAppBody"}}],"produces":["application/json"],"responses":{"200":{"description":"ok","examples":{"application/json":{"app":{"alias":"边缘人脸识别","app_versions":[{"args":[],"configs":{"host_network":true,"privileged":false},"created_at":"2018-05-23T03:58:41","envs":[],"id":"6670f491-72d9-46e8-85f3-3a480b636205","image_url":"","project_id":"{project_id}","updated_at":null,"version":"1.0.0","volumes":[]}],"created_at":"2018-05-25T03:26:33","description":"This is a test.","id":"2873e595-a55c-4d55-aa8f-eefcbd2b5027","name":"test","project_id":"{project_id}","updated_at":"2018-05-25T03:29:48","visibility":"private"}}},"schema":{"$ref":"#/definitions/AppShowResp"}}},"summary":"更新应用模板","tags":["应用模板管理"],"x-is-registered":"Y","x-publishpath":"ief_02_0044","x-request-examples-1":{"app":{"alias":"边缘人脸识别","description":"This is a test."}},"x-request-examples-description-1":"更新应用模板,修改应用模板别名和描述。","x-request-examples-text-1":{"app":{"alias":"边缘人脸识别","description":"This is a test."}},"x-support-sdk":"Y"}}},"product_short":"IEF","region_id":"cn-north-4","schemes":["HTTPS"],"security_definitions":null,"summary":"更新应用模板","tags":"应用模板管理","uri":null,"version":"2.0"}