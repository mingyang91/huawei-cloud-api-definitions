{"base_path":"/","components":null,"consumes":"[\"application/json\"]","definitions":{"EndpointObjResp":{"description":"端点详情","properties":{"created_at":{"description":"创建时间","type":"string"},"description":{"description":"端点描述,最大长度255,不允许^~#$%&*<>()[]{}'\"\\","type":"string"},"id":{"description":"端点ID","type":"string"},"ief_instance_id":{"description":"铂金版实例ID,如果为空则表示是专业版实例。","type":"string"},"is_shared":{"description":"是否共享","type":"boolean"},"name":{"description":"端点名称,只允许中文字符、英文字符、数字、下划线、中划线,最大长度64\n同一个账号中创建的端点名唯一","type":"string"},"project_id":{"description":"项目ID","type":"string"},"properties":{"additionalProperties":{"type":"object"},"description":"端点的属性,端点需要对外展示的属性,示例:\n- dis:\n{\"domain_id\":\"user's domain id\"}\n- servicebus:\n{\"service_port\":8080}\n- apigw:\n{\"domain_id\":\"user's domain id\"}","type":"object"},"type":{"description":"端点类型。枚举值:\n- dis\n- servicebus\n- apigw","type":"string"},"updated_at":{"description":"更新时间","type":"string"}},"required":["created_at","description","id","ief_instance_id","is_shared","name","project_id","properties","type","updated_at"]},"Rule":{"properties":{"rule":{"$ref":"#/definitions/RuleResponse"}},"required":["rule"]},"RuleConfig":{"description":"规则配置","properties":{"description":{"description":"规则描述,最大长度255,不允许^~#$%&*<>()[]{}'\"\\","type":"string"},"ief_instance_id":{"description":"铂金版实例ID,如果为空则表示是专业版实例。","type":"string"},"in_using":{"description":"是否启用规则,默认为true(启用)","type":"boolean"},"name":{"description":"规则名称,只允许中文字符、英文字符、数字、下划线、中划线,最大长度64\n同一个账号中创建的规则名唯一","type":"string"},"source":{"description":"源端点ID","type":"string"},"source_resource":{"additionalProperties":{"type":"string"},"description":"源端点资源。示例:\n- rest: {\"path\":\"\\<standard uri format\\>\"}\n- eventbus: {\"topic\":\"\\<project id\\>/nodes/\\<node id\\>/user/\\<租户自定义且满足eventbus topic要求的字符串\\>\",\"node_id\":\"\\<node id\\>\"}","type":"object"},"target":{"description":"目的端点ID","type":"string"},"target_resource":{"additionalProperties":{"type":"string"},"description":"目的端点资源。示例:\n- dis:\n{\"channel\": \"dis channel name\"}\n- servicebus:\n{\"path\": \"/request path\"}\n- apigw:\n{\"resource\": \"http://ssss.com\"}\n- eventbus:\n{\"topic\": \"/xxxx\"}","type":"object"}},"required":["name","source","source_resource","target","target_resource"]},"RuleDetail":{"description":"规则配置","properties":{"rule":{"$ref":"#/definitions/RuleConfig"}}},"RuleResponse":{"description":"规则配置","properties":{"created_at":{"description":"创建时间","type":"string"},"description":{"description":"规则描述,最大长度255,不允许^~#$%&*<>()[]{}'\"\\","type":"string"},"fail_messages":{"description":"转发失败的消息数","format":"int32","type":"integer"},"id":{"description":"规则ID","type":"string"},"ief_instance_id":{"description":"铂金版实例ID,如果为空则表示是专业版实例。","type":"string"},"in_using":{"description":"是否启用规则,默认为true(启用)","type":"boolean"},"name":{"description":"规则名称,只允许中文字符、英文字符、数字、下划线、中划线,最大长度64\n同一个账号中创建的规则名唯一","type":"string"},"project_id":{"description":"项目ID","type":"string"},"source":{"$ref":"#/definitions/EndpointObjResp"},"source_resource":{"additionalProperties":{"type":"string"},"description":"源端点资源。示例:\n- rest: {\"path\":\"\\<standard uri format\\>\"}\n- eventbus: {\"topic\":\"\\<project id\\>/nodes/\\<node id\\>/user/\\<租户自定义且满足eventbus topic要求的字符串\\>\",\"node_id\":\"\\<node id\\>\"}","type":"object"},"success_messages":{"description":"转发成功的消息数","format":"int32","type":"integer"},"target":{"$ref":"#/definitions/EndpointObjResp"},"target_resource":{"additionalProperties":{"type":"string"},"description":"目的端点资源,示例:\n- dis: {\"channel\": \"dis channel name\"}\n- servicebus: {\"path\": \"/request path\"}\n- apigw: {\"resource\": \"http://ssss.com\"}\n- eventbus: {\"topic\": \"/xxxx\"}","type":"object"},"updated_at":{"description":"更新时间","type":"string"}},"required":["name","project_id","source","source_resource","target","target_resource","updated_at","success_messages"]}},"description":null,"group_id":"cdaa2d3f4fbb4dc38b6a6c55f9222ed9","host":"ief.cn-north-4.myhuaweicloud.com","id":"513af4de3f164dcfb5aa474bd122ed57","info_version":"v1","method":"post","name":"CreateRule","parameters":{"Content-Type":{"description":"消息体的类型(格式),默认取值为“application/json”","in":"header","name":"Content-Type","required":true,"type":"string"},"IEF-Instance-Id":{"description":"铂金版实例ID,专业版实例为空值","in":"header","name":"ief-instance-id","required":false,"type":"string"},"X-Auth-Token":{"description":"用户Token。\n通过调用IAM服务获取用户Token接口获取(响应消息头中X-Subject-Token的值)。","in":"header","name":"X-Auth-Token","required":true,"type":"string","x-example":"MIIDkgYJKoZIhvcNAQcCoIIDgzCCXXXXXX..."}},"paths":{"/v2/{project_id}/routemgr/rules":{"post":{"consumes":["application/json"],"description":"创建一条规则","operationId":"CreateRule","parameters":[{"$ref":"#/parameters/Content-Type"},{"$ref":"#/parameters/X-Auth-Token"},{"$ref":"#/parameters/IEF-Instance-Id"},{"description":"项目ID","in":"path","name":"project_id","required":true,"type":"string"},{"description":"规则详情","in":"body","name":"CreateRule","required":true,"schema":{"$ref":"#/definitions/RuleDetail"}}],"produces":["application/json"],"responses":{"201":{"description":"ok","examples":{"application/json":{"rule":{"created_at":"2022-09-07T11:07:48Z","description":"","fail_messages":0,"id":"626d38cb-098f-4493-b48b-6d6e5ad1bc43","ief_instance_id":"","in_using":true,"name":"example","project_id":"ed202955e111444e8ced21a1bd75fc59","source":{"created_at":"2019-03-09T11:42:45Z","description":"","id":"b98c3337-fb15-4548-8d11-63ae78f0cc82","ief_instance_id":"","is_shared":true,"name":"SystemREST","project_id":"9ff38382ccc546ac9635800c3315a5e2","properties":{"public":"100.95.158.25"},"type":"rest","updated_at":"2021-10-11T09:16:09Z"},"source_resource":{"path":"/abc"},"success_messages":0,"target":{"created_at":"2019-03-09T11:42:45Z","description":"","id":"6bf2fda9-810c-40ed-8623-ff9396fe357d","ief_instance_id":"","is_shared":true,"name":"SystemEventBus","project_id":"9ff38382ccc546ac9635800c3315a5e2","properties":{},"type":"eventbus","updated_at":"2021-10-11T09:16:09Z"},"target_resource":{"topic":"/hello"},"updated_at":"2022-09-07T11:07:48Z"}}},"schema":{"$ref":"#/definitions/Rule"}}},"summary":"创建规则","tags":["规则管理"],"x-is-registered":"Y","x-open-region-cloud":"hc,hk","x-request-examples-1":{"rule":{"description":"","name":"example","source":"b98c3337-fb15-4548-8d11-63ae78f0cc82","source_resource":{"path":"/abc"},"target":"6bf2fda9-810c-40ed-8623-ff9396fe357d","target_resource":{"topic":"/hello"}}},"x-request-examples-description-1":"创建规则,规则名为“example”。","x-request-examples-text-1":{"rule":{"description":"","name":"example","source":"b98c3337-fb15-4548-8d11-63ae78f0cc82","source_resource":{"path":"/abc"},"target":"6bf2fda9-810c-40ed-8623-ff9396fe357d","target_resource":{"topic":"/hello"}}},"x-support-sdk":"Y"}}},"product_short":"IEF","region_id":"cn-north-4","schemes":["HTTPS"],"security_definitions":null,"summary":"创建规则","tags":"规则管理","uri":null,"version":"2.0"}