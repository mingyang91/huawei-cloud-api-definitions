{"base_path":"/","components":null,"consumes":"[\"application/json\"]","definitions":{"Matches":{"description":"搜索字段,key为要匹配的字段,如resource_name等。value为匹配的值。key为固定字典值,不能包含重复的key或不支持的key。\n根据key的值确认是否需要模糊匹配,如resource_name默认为模糊搜索(不区分大小写,不支持*,支持字符串匹配),如果value为空字符串则返回空列表(IEF服务不存在资源名称为空的情况,因此这类情况返回空列表)。","properties":{"key":{"description":"键。限定为resource_name,后续扩展。","type":"string"},"value":{"description":"值。每个值最大长度64个unicode字符。不校验字符集范围。","type":"string"}},"required":["key"]},"Resource":{"properties":{"resource_id":{"description":"资源ID","type":"string"},"resource_name":{"description":"资源名称,资源没有名称时默认为空字符串。","type":"string"},"tags":{"description":"标签列表,没有标签默认为空数组","items":{"$ref":"#/definitions/ResourceTag"},"type":"array"}},"required":["resource_id","tags","resource_name"]},"ResourceListResp":{"properties":{"resources":{"description":"资源实例","items":{"$ref":"#/definitions/Resource"},"type":"array"},"total_count":{"description":"总记录数","format":"int32","type":"integer"}},"required":["resources","total_count"]},"ResourceTag":{"description":"标签属性","properties":{"key":{"description":"键。最大长度36个unicode字符。\n不能为空,只能包含大小写字母,数字,中划线“-”,下划线“_”。","type":"string"},"value":{"description":"值。每个值最大长度43个unicode字符,删除时如果value有值按照key/value删除,如果value没值,则按照key删除。\n不能为空,只能包含大小写字母,数字,中划线“-”,下划线“_”。","type":"string"}},"type":"object"},"Sorted":{"description":"按标签过滤资源后返回结果的排序方式","properties":{"key":{"description":"按key值对请求内容进行排序","type":"string"},"reverse":{"description":"是否采用倒序","type":"boolean"}}},"Tag":{"description":"标签属性","properties":{"key":{"description":"标签key值,长度取值范围为1~36, 仅允许大小写英文字母、数字、下划线、中划线","type":"string"},"values":{"description":"标签value值,长度取值范围为0~43, 仅允许大小写英文字母、数字、下划线、中划线","items":{"type":"string"},"type":"array"}},"required":["key"]},"Tags":{"properties":{"action":{"description":"操作标识(仅限于filter,count):filter(过滤),count(查询总条数)\n如果是filter就按照过滤条件查询,如果是count,只需要返回总条数,禁止返回其他字段。","type":"string"},"console":{"description":"确认是否请求源是否为console,通过该字段来判断是否返回resource_detail内容,如果为true则返回,如果为false或者不带该参数则返回空列表。","type":"boolean"},"limit":{"description":"查询记录数(action为count时无此参数)如果action为filter默认为1000,limit最多为1000,不能为负数,最小值为1","type":"string"},"matches":{"description":"搜索字段,key为要匹配的字段,如resource_name等。value为匹配的值。key为固定字典值,不能包含重复的key或不支持的key。\n根据key的值确认是否需要模糊匹配,如resource_name默认为模糊搜索(不区分大小写,不支持*,支持字符串匹配),如果value为空字符串则返回空列表(IEF服务不存在资源名称为空的情况,因此这类情况返回空列表)。","items":{"$ref":"#/definitions/Matches"},"type":"array"},"not_tags":{"description":"不包含标签,最多包含20个key,每个key下面的value最多10个。Key不能重复,同一个key中values不能重复。结果返回不包含标签的资源列表,key之间是与的关系,key-value结构中value是或的关系。无过滤条件时返回全量数据。","items":{"$ref":"#/definitions/Tag"},"type":"array"},"not_tags_any":{"description":"不包含任意标签,最多包含20个key,每个key下面的value最多10个。Key不能重复,同一个key中values不能重复。结果返回不包含标签的资源列表,key之间是或的关系,key-value结构中value是或的关系。无过滤条件时返回全量数据。","items":{"$ref":"#/definitions/Tag"},"type":"array"},"offset":{"description":"索引位置,偏移量(action为count时无此参数)从第一条数据偏移offset条数据后开始查询,如果action为filter默认为0(偏移0条数据,表示从第一条数据开始查询),必须为数字,不能为负数","type":"string"},"sorted":{"$ref":"#/definitions/Sorted"},"tags":{"description":"包含标签,最多包含20个key,每个key下面的value最多10个,每个key对应的value可以为空数组但结构体不能缺失。Key不能重复,同一个key中values不能重复。结果返回包含所有标签的资源列表,key之间是与的关系,key-value结构中value是或的关系。如tags_any和tags字段同时存在,则去重后返回两者并集。无tag过滤条件时返回全量数据。","items":{"$ref":"#/definitions/Tag"},"type":"array"},"tags_any":{"description":"包含任意标签,最多包含20个key,每个key下面的value最多10个。Key不能重复,同一个key中values不能重复。结果返回包含标签的资源列表,key之间是或的关系,key-value结构中value是或的关系。如tags_any和tags字段同时存在,则去重后返回两者并集。无过滤条件时返回全量数据。","items":{"$ref":"#/definitions/Tag"},"type":"array"}},"required":["action"]}},"description":null,"group_id":"cdaa2d3f4fbb4dc38b6a6c55f9222ed9","host":"ief.cn-north-4.myhuaweicloud.com","id":"10c953599e1148e08e6b593f20bf125d","info_version":"v1","method":"post","name":"ListResourceByTags","parameters":{"Content-Type":{"description":"消息体的类型(格式),默认取值为“application/json”","in":"header","name":"Content-Type","required":true,"type":"string"},"IEF-Instance-Id":{"description":"铂金版实例ID,专业版实例为空值","in":"header","name":"ief-instance-id","required":false,"type":"string"},"X-Auth-Token":{"description":"用户Token。\n通过调用IAM服务获取用户Token接口获取(响应消息头中X-Subject-Token的值)。","in":"header","name":"X-Auth-Token","required":true,"type":"string","x-example":"MIIDkgYJKoZIhvcNAQcCoIIDgzCCXXXXXX..."}},"paths":{"/v2/{project_id}/{resource_type}/resource_instances/action":{"post":{"consumes":["application/json"],"description":"使用标签过滤实例","operationId":"ListResourceByTags","parameters":[{"$ref":"#/parameters/Content-Type"},{"$ref":"#/parameters/X-Auth-Token"},{"$ref":"#/parameters/IEF-Instance-Id"},{"description":"项目ID","in":"path","name":"project_id","required":true,"type":"string"},{"description":"资源类型\n- ief-edge_node\n- ief-deployment\n- ief-application\n- ief-device","in":"path","name":"resource_type","required":true,"type":"string"},{"description":"请求的Body参数","in":"body","name":"ListResourceByTags","required":true,"schema":{"$ref":"#/definitions/Tags"}}],"produces":["application/json"],"responses":{"200":{"description":"ok","examples":{"application/json":{"resources":[{"resource_id":"e25307d4-bd25-4c29-ba7f-176376ed2f99","resource_name":"node_test_0108_1","tags":[{"key":"testtest","value":""},{"key":"test","value":"value2"}]},{"resource_id":"fc3aeee8-24e1-4912-bf7a-54854251d0e5","resource_name":"node_test-0109_1","tags":[{"key":"key1","value":"value1"},{"key":"test","value":""}]}],"total_count":2}},"schema":{"$ref":"#/definitions/ResourceListResp"}}},"summary":"查询资源实例","tags":["标签管理"],"x-is-registered":"Y","x-publishpath":"ief_02_0072","x-request-examples-1":{"action":"filter","limit":"10","matches":[{"key":"resource_name","value":"q"}],"offset":"0","tags":[{"key":"test","values":["value1","value2"]}]},"x-request-examples-description-1":"查询资源实例,按照过滤条件查询,搜索字段为“resource_name”,标签键值为“test”,值为“value1,value2”。","x-request-examples-text-1":{"action":"filter","limit":"10","matches":[{"key":"resource_name","value":"q"}],"offset":"0","tags":[{"key":"test","values":["value1","value2"]}]},"x-support-sdk":"Y"}}},"product_short":"IEF","region_id":"cn-north-4","schemes":["HTTPS"],"security_definitions":null,"summary":"查询资源实例","tags":"标签管理","uri":null,"version":"2.0"}