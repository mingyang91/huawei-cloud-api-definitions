{"base_path":"/","components":null,"consumes":"[\"application/json\"]","definitions":{"Attributes":{"description":"节点属性","properties":{"key":{"description":"节点属性的key值,长度取值范围为1~128, 仅允许大小写英文字母、数字、下划线、中划线","type":"string"},"value":{"description":"节点属性的value值,长度取值范围为1~256, 仅允许大小写英文字母、数字、下划线、中划线","type":"string"}}},"BatchJobRequest":{"description":"批量作业参数","properties":{"description":{"description":"批量作业描述","type":"string","x-go-name":"Description"},"job_content":{"$ref":"#/definitions/JobContentInfo","description":"批量作业详细信息"},"job_name":{"description":"批量作业名称,允许输入小写字母,数字,中划线,不能以中划线开头或结尾,最大长度为26位","type":"string","x-go-name":"JobName"},"job_type":{"description":"批量作业类型,支持以下选项:\n- node_upgrade: 节点升级\n- deployment_deploy:应用部署\n- deployment_upgrade:应用升级","type":"string","x-go-name":"JobType"},"tags":{"description":"批量作业标签","items":{"$ref":"#/definitions/Attributes"},"type":"array"}},"required":["job_name","job_type"],"type":"object","x-go-package":"product-manager/pkg/apis"},"BatchJobResp":{"description":"批量处理作业详情","properties":{"created_at":{"description":"批量处理作业创建时间戳","format":"uint64","type":"integer","x-go-name":"CreatedAt"},"job_id":{"description":"批量处理作业ID","type":"string","x-go-name":"JobID"},"job_name":{"description":"批量处理作业名称","type":"string","x-go-name":"JobName"}},"required":["job_id","job_name"],"type":"object","x-go-package":"product-manager/pkg/apis"},"Extension":{"description":"批量处理对象额外属性","properties":{"key":{"description":"属性名,可填:node_name","type":"string","x-go-name":"Key"},"value":{"description":"属性值","type":"string","x-go-name":"Value"}},"type":"object","x-go-package":"product-manager/pkg/apis"},"JobContentInfo":{"description":"批量作业详情","properties":{"target_type":{"description":"批量作业对象类型,支持如下选项:\n- node:边缘节点\n- node_group:边缘节点组\n- deployment:边缘应用","type":"string","x-go-name":"TargetType"},"targets":{"description":"批量作业对象详情","items":{"$ref":"#/definitions/Target"},"type":"array","x-go-name":"Targets"},"task_data":{"description":"批量作业内容,仅在批量应用部署和批量应用升级时需要填写,填入的内容为:使用json结构体编写的创建应用部署接口请求体deployment参数,并将其转换为字符串","type":"string","x-go-name":"TaskData"}},"type":"object","x-go-package":"product-manager/pkg/apis"},"Target":{"description":"批量处理对象详情","properties":{"extension_info":{"description":"批量处理对象基本信息","items":{"$ref":"#/definitions/Extension"},"type":"array","x-go-name":"ExtensionInfo"},"target_id":{"description":"批量处理对象ID","type":"string","x-go-name":"TargetID"}},"required":["target_id"],"type":"object","x-go-package":"product-manager/pkg/apis"}},"description":null,"group_id":"cdaa2d3f4fbb4dc38b6a6c55f9222ed9","host":"ief.cn-north-4.myhuaweicloud.com","id":"3aa19048eb264376b74daf5aa32e2641","info_version":"v1","method":"post","name":"CreateBatchJob","parameters":{"Content-Type":{"description":"消息体的类型(格式),默认取值为“application/json”","in":"header","name":"Content-Type","required":true,"type":"string"},"IEF-Instance-Id":{"description":"铂金版实例ID,专业版实例为空值","in":"header","name":"ief-instance-id","required":false,"type":"string"},"X-Auth-Token":{"description":"用户Token。\n通过调用IAM服务获取用户Token接口获取(响应消息头中X-Subject-Token的值)。","in":"header","name":"X-Auth-Token","required":true,"type":"string","x-example":"MIIDkgYJKoZIhvcNAQcCoIIDgzCCXXXXXX..."}},"paths":{"/v2/{project_id}/productmgr/jobs":{"post":{"consumes":["application/json"],"description":"创建批量处理作业。该API用于创建批量处理作业,当前支持:批量节点升级、批量应用部署、批量应用升级","operationId":"CreateBatchJob","parameters":[{"description":"项目ID","in":"path","name":"project_id","required":true,"type":"string","x-go-name":"ProjectId"},{"description":"批量处理作业参数","in":"body","name":"CreateBatchJobRequestBody","required":false,"schema":{"$ref":"#/definitions/BatchJobRequest"}},{"$ref":"#/parameters/X-Auth-Token"},{"$ref":"#/parameters/IEF-Instance-Id"},{"$ref":"#/parameters/Content-Type"}],"produces":["application/json"],"responses":{"201":{"description":"创建成功","examples":{"application/json":{"created_at":1667218308,"job_id":"66273c66-f72e-4607-8769-3663d255fb83","job_name":"aaa"}},"schema":{"$ref":"#/definitions/BatchJobResp"}}},"summary":"创建批量处理任务","tags":["批量作业管理"],"x-is-registered":"Y","x-order":0,"x-request-examples-1":{"description":"","job_content":{"target_type":"node","targets":[{"extension_info":[{"key":"node_name","value":"test1"}],"target_id":"72eb5df1-295b-41f6-baed-d1a56728b0e0"},{"extension_info":[{"key":"node_name","value":"test-node"}],"target_id":"b1c0e722-ee98-4ae3-9224-881224cb32c9"}],"task_data":"{\"deployment\":{\"replicas\":1,\"template\":{\"configs\":{\"host_network\":false,\"restart_policy\":\"Always\",\"host_pid\":false},\"containers\":[{\"name\":\"container-06fefd36\",\"version\":\"latest\",\"image_url\":\"sample:latest\",\"envs\":[],\"volumes\":[],\"resources\":{\"limits\":{\"cpu\":\"0.25\",\"memory\":\"512\"},\"requests\":{\"cpu\":\"0.25\",\"memory\":\"512\"}},\"privileged\":false,\"ports\":[]}]}},\"source\":\"userdefined\",\"name_prex\":\"aaa\",\"tags\":[],\"description\":\"\"}"},"job_name":"aaa","job_type":"deployment_deploy","tags":[]},"x-request-examples-description-1":"创建批量处理任务,批量处理类型为“应用部署”,批量作业对象类型为“边缘节点”。","x-request-examples-text-1":{"description":"","job_content":{"target_type":"node","targets":[{"extension_info":[{"key":"node_name","value":"test1"}],"target_id":"72eb5df1-295b-41f6-baed-d1a56728b0e0"},{"extension_info":[{"key":"node_name","value":"test-node"}],"target_id":"b1c0e722-ee98-4ae3-9224-881224cb32c9"}],"task_data":"{\"deployment\":{\"replicas\":1,\"template\":{\"configs\":{\"host_network\":false,\"restart_policy\":\"Always\",\"host_pid\":false},\"containers\":[{\"name\":\"container-06fefd36\",\"version\":\"latest\",\"image_url\":\"sample:latest\",\"envs\":[],\"volumes\":[],\"resources\":{\"limits\":{\"cpu\":\"0.25\",\"memory\":\"512\"},\"requests\":{\"cpu\":\"0.25\",\"memory\":\"512\"}},\"privileged\":false,\"ports\":[]}]}},\"source\":\"userdefined\",\"name_prex\":\"aaa\",\"tags\":[],\"description\":\"\"}"},"job_name":"aaa","job_type":"deployment_deploy","tags":[]},"x-support-sdk":"Y"}}},"product_short":"IEF","region_id":"cn-north-4","schemes":["HTTPS"],"security_definitions":null,"summary":"创建批量处理任务","tags":"批量作业管理","uri":null,"version":"2.0"}