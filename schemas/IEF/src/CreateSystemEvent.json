{"base_path":"/","components":null,"consumes":"[\"application/json\"]","definitions":{"EndpointObjResp":{"description":"端点详情","properties":{"created_at":{"description":"创建时间","type":"string"},"description":{"description":"端点描述,最大长度255,不允许^~#$%&*<>()[]{}'\"\\","type":"string"},"id":{"description":"端点ID","type":"string"},"ief_instance_id":{"description":"铂金版实例ID,如果为空则表示是专业版实例。","type":"string"},"is_shared":{"description":"是否共享","type":"boolean"},"name":{"description":"端点名称,只允许中文字符、英文字符、数字、下划线、中划线,最大长度64\n同一个账号中创建的端点名唯一","type":"string"},"project_id":{"description":"项目ID","type":"string"},"properties":{"additionalProperties":{"type":"object"},"description":"端点的属性,端点需要对外展示的属性,示例:\n- dis:\n{\"domain_id\":\"user's domain id\"}\n- servicebus:\n{\"service_port\":8080}\n- apigw:\n{\"domain_id\":\"user's domain id\"}","type":"object"},"type":{"description":"端点类型。枚举值:\n- dis\n- servicebus\n- apigw","type":"string"},"updated_at":{"description":"更新时间","type":"string"}},"required":["created_at","description","id","ief_instance_id","is_shared","name","project_id","properties","type","updated_at"]},"EndpointResource":{"description":"消息端点资源属性","properties":{"resource":{"description":"消息端点资源。 示例:- dis: {\"channel\": \"dis channel name\"} - servicebus: {\"path\": \"/request path\"} - apigw: {\"resource\": \"http://ssss.com\"} - eventbus: {\"topic\": \"/xxxx\"}","type":"string"}},"type":"object"},"Event":{"description":"系统订阅事件基本信息","properties":{"created_at":{"description":"创建时间","format":"date-time","type":"string"},"delete_at":{"description":"删除时间","format":"int32","type":"integer"},"description":{"description":"描述,最大长度255,不允许^~#$%&*<>()[]{}'\"\\","type":"string"},"events":{"description":"系统订阅事件主题。每个主题由“{边缘资源}/{操作}”组成,多个主题使用逗号(,)进行分隔,支持如下主题:\n- edgeNode/offline:节点离线\n- edgeNode/online:节点上线\n- edgeNode/all:节点离线+节点上线\n- deployment/created:容器应用创建\n- deployment/updated:容器应用更新\n- deployment/deleted:容器应用删除\n- deployment/all:容器应用创建+更新+删除\n- instance/created:应用实例创建\n- instance/updated:应用实例更新\n- instance/deleted:应用实例删除\n- instance/all:应用实例创建+更新+删除","type":"string"},"fail_messages":{"description":"失败次数","format":"int32","type":"integer"},"id":{"description":"系统订阅事件ID","type":"string"},"in_using":{"description":"是否启用系统订阅规则,默认为true(启用)","type":"boolean"},"name":{"description":"系统订阅事件名称。只允许小写英文字符、数字、下划线、中划线,最大长度64,同一个账号中创建的系统订阅和消息规则名唯一","type":"string"},"project_id":{"description":"系统订阅事件所属项目ID","type":"string"},"success_messages":{"description":"成功次数","format":"int32","type":"integer"},"target":{"$ref":"#/definitions/EndpointObjResp","description":"目的端点"},"target_resource":{"additionalProperties":{"type":"string"},"description":"目的端点资源属性","type":"object"},"updated_at":{"description":"更新时间","format":"date-time","type":"string"}},"type":"object"},"EventCreateDetail":{"description":"系统订阅创建配置","properties":{"description":{"description":"描述。最大长度255,不允许^~#$%&*<>()[]{}'\"\\","type":"string"},"events":{"description":"系统订阅主题。每个主题由“{边缘资源}/{操作}”组成,多个主题使用逗号(,)进行分隔,支持如下主题:\n- edgeNode/offline:节点离线\n- edgeNode/online:节点上线\n- edgeNode/all:节点离线+节点上线\n- deployment/created:容器应用创建\n- deployment/updated:容器应用更新\n- deployment/deleted:容器应用删除\n- deployment/all:容器应用创建+更新+删除\n- instance/created:应用实例创建\n- instance/updated:应用实例更新\n- instance/deleted:应用实例删除\n- instance/all:应用实例创建+更新+删除","type":"string"},"name":{"description":"系统订阅名称。只允许小写英文字符、数字、下划线、中划线,最大长度64,同一个账号中创建的系统订阅和消息规则名唯一","type":"string"},"target":{"description":"目的端点ID","type":"string"},"target_resource":{"$ref":"#/definitions/EndpointResource","description":"目的端点资源"}},"type":"object"},"EventCreateReq":{"description":"系统订阅创建请求体","properties":{"systemevent":{"$ref":"#/definitions/EventCreateDetail","description":"系统订阅基本信息"}},"type":"object"},"EventDetailResponse":{"description":"系统订阅详情返回体","properties":{"systemevent":{"$ref":"#/definitions/Event","description":"系统订阅详情"}},"type":"object"}},"description":null,"group_id":"cdaa2d3f4fbb4dc38b6a6c55f9222ed9","host":"ief.cn-north-4.myhuaweicloud.com","id":"2a366e96767f4ebeb78b170e57a11c45","info_version":"v1","method":"post","name":"CreateSystemEvent","parameters":{"Content-Type":{"description":"消息体的类型(格式),默认取值为“application/json”","in":"header","name":"Content-Type","required":true,"type":"string"},"IEF-Instance-Id":{"description":"铂金版实例ID,专业版实例为空值","in":"header","name":"ief-instance-id","required":false,"type":"string"},"X-Auth-Token":{"description":"用户Token。\n通过调用IAM服务获取用户Token接口获取(响应消息头中X-Subject-Token的值)。","in":"header","name":"X-Auth-Token","required":true,"type":"string","x-example":"MIIDkgYJKoZIhvcNAQcCoIIDgzCCXXXXXX..."}},"paths":{"/v2/{project_id}/routemgr/exchanger/systemevents":{"post":{"consumes":["application/json"],"description":"创建系统订阅","operationId":"CreateSystemEvent","parameters":[{"description":"项目ID","in":"path","name":"project_id","required":true,"type":"string"},{"$ref":"#/parameters/X-Auth-Token"},{"$ref":"#/parameters/IEF-Instance-Id"},{"$ref":"#/parameters/Content-Type"},{"description":"系统订阅参数","in":"body","name":"CreateSystemEventRequestBody","required":false,"schema":{"$ref":"#/definitions/EventCreateReq"}}],"produces":["application/json"],"responses":{"201":{"description":"创建成功","examples":{"application/json":{"systemevent":{"created_at":"2022-11-02T07:17:01.372735871Z","delete_at":0,"description":"","events":"edgeNode/online","fail_messages":0,"id":"b79f4d8e-4549-4da4-9a9c-a9d13452c7d6","in_using":true,"name":"aa","project_id":"ed202955e111444e8ced21a1bd75fc59","success_messages":0,"target":{"created_at":"2022-06-02T11:15:26.29972+08:00","description":"","id":"591ba510-8c62-41b8-a0c3-d94262ef97ef","ief_instance_id":"38898a99-d67c-41f8-a8cb-8c53d6d297ba","is_shared":false,"name":"apigw","project_id":"ed202955e111444e8ced21a1bd75fc59","properties":{"domain_id":"d0857ebddc514a7381c3673363e61337"},"type":"apigw","updated_at":"2022-06-02T11:15:26.29972+08:00"},"target_resource":{"resource":"https://www.fake.com"},"updated_at":"2022-11-02T07:17:01.372735998Z"}}},"schema":{"$ref":"#/definitions/EventDetailResponse"}}},"summary":"创建系统订阅","tags":["系统订阅管理"],"x-is-registered":"Y","x-request-examples-1":{"systemevent":{"description":"","events":"edgeNode/online","name":"aa","target":"591ba510-8c62-41b8-a0c3-d94262ef97ef","target_resource":{"resource":"https://www.fake.com"}}},"x-request-examples-description-1":"创建系统订阅,订阅的系统主题为节点上线。","x-request-examples-text-1":{"systemevent":{"description":"","events":"edgeNode/online","name":"aa","target":"591ba510-8c62-41b8-a0c3-d94262ef97ef","target_resource":{"resource":"https://www.fake.com"}}},"x-support-sdk":"Y"}}},"product_short":"IEF","region_id":"cn-north-4","schemes":["HTTPS"],"security_definitions":null,"summary":"创建系统订阅","tags":"系统订阅管理","uri":null,"version":"2.0"}