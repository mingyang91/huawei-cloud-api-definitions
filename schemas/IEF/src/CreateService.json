{"base_path":"/","components":null,"consumes":"[\"application/json\"]","definitions":{"ErrorResponseBody":{"description":"响应Body参数","properties":{"error_code":{"description":"错误码","type":"string"},"error_msg":{"description":"错误描述信息","type":"string"}}},"Service":{"description":"服务详情","properties":{"service":{"$ref":"#/definitions/ServiceReqDetail"}}},"ServiceReqDetail":{"description":"服务详情","properties":{"meta_data":{"$ref":"#/definitions/SvcMetadata"},"spec":{"$ref":"#/definitions/SvcSpec"}},"required":["meta_data","spec"]},"ServiceResp":{"description":"服务详情","properties":{"service":{"$ref":"#/definitions/ServiceRespDetail"}},"required":["service"]},"ServiceRespDetail":{"description":"服务详情","properties":{"created_at":{"description":"创建时间","type":"string"},"id":{"description":"服务ID","type":"string"},"meta_data":{"$ref":"#/definitions/SvcMetadata"},"project_id":{"description":"租户ID","type":"string"},"spec":{"$ref":"#/definitions/SvcSpec"},"updated_at":{"description":"更新时间","type":"string"}},"required":["created_at","id","meta_data","project_id","spec","updated_at"]},"SvcMetadata":{"description":"服务详情","properties":{"labels":{"additionalProperties":{"type":"string"},"description":"自定义标签属性列表","type":"object"},"name":{"description":"服务名称,只允许英文小写字母、数字、中划线,最大长度64,英文小写字母开头,数字或小写字母结尾","type":"string"}},"required":["name"]},"SvcPort":{"description":"服务需要暴露的端口列表","properties":{"name":{"description":"服务端口必须进行命名,而且名称只允许是{protocol}-{suffix}这种格式,其中{protocol}可以是tcp、http等,IEF根据在端口上定义的协议来提供对应的路由能力。例如“name:http-0”和“name:tcp-0”是合法的端口名,“name:http2forecast”是非法的端口号。","type":"string"},"node_port":{"description":"当spec.type=NodePort时,指定映射到物理机的端口号","type":"string"},"port":{"description":"服务监听的端口号","type":"string"},"protocol":{"description":"具体的协议,比如TCP","type":"string"},"target_port":{"description":"需要转发到后端Pod的端口号","type":"string"}}},"SvcSpec":{"description":"服务的动态属性","properties":{"cluster_ip":{"description":"虚拟服务IP地址","type":"string"},"external_ips":{"description":"外部IP列表 --- 暂不支持","items":{"type":"string"},"type":"array"},"external_name":{"description":"外部域名 --- 暂不支持","type":"string"},"ports":{"description":"服务需要暴露的端口列表","items":{"$ref":"#/definitions/SvcPort"},"type":"array"},"selector":{"additionalProperties":{"type":"string"},"description":"标签选择器,将选择具有指定Label标签的Pod作为管理范围","type":"object"},"type":{"description":"服务的类型","type":"string"}},"required":["selector"]}},"description":null,"group_id":"cdaa2d3f4fbb4dc38b6a6c55f9222ed9","host":"ief.cn-north-4.myhuaweicloud.com","id":"23afd2636cc345ad9a981497408b66a4","info_version":"v1","method":"post","name":"CreateService","parameters":{"Content-Type":{"description":"消息体的类型(格式),默认取值为“application/json”","in":"header","name":"Content-Type","required":true,"type":"string"},"X-Auth-Token":{"description":"用户Token。\n通过调用IAM服务获取用户Token接口获取(响应消息头中X-Subject-Token的值)。","in":"header","name":"X-Auth-Token","required":true,"type":"string","x-example":"MIIDkgYJKoZIhvcNAQcCoIIDgzCCXXXXXX..."}},"paths":{"/v2/{project_id}/edgemgr/services":{"post":{"consumes":["application/json"],"description":"创建一个服务","operationId":"CreateService","parameters":[{"$ref":"#/parameters/Content-Type"},{"$ref":"#/parameters/X-Auth-Token"},{"description":"项目ID","in":"path","name":"project_id","required":true,"type":"string"},{"description":"请求Body参数","in":"body","name":"CreateService","required":true,"schema":{"$ref":"#/definitions/Service"}},{"description":"铂金版实例ID","in":"header","name":"ief-instance-id","required":true,"type":"string"}],"produces":["application/json"],"responses":{"201":{"description":"创建成功","examples":{"application/json":{"service":{"created_at":"2020-07-08 01:23:25.845332209 +0000 UTC","id":"81acf9ff-de6d-4736-8d1a-f43bb058e79d","meta_data":{"name":"service-example"},"project_id":"e78acc02d9d141eda5ca8e88fa35f6f8","spec":{"cluster_ip":"None","ports":[{"name":"http-0","port":"8888","protocol":"TCP","target_port":"80"}],"selector":{"app":"ief-nginx"}},"updated_at":"2020-07-08 01:23:25.845332209 +0000 UTC"}}},"schema":{"$ref":"#/definitions/ServiceResp"}},"400":{"description":"错误响应","schema":{"$ref":"#/definitions/ErrorResponseBody"}},"500":{"description":"错误响应","schema":{"$ref":"#/definitions/ErrorResponseBody"}}},"summary":"创建服务","tags":["服务管理"],"x-is-registered":"Y","x-open-region-cloud":"hc,hk","x-request-examples-1":{"service":{"meta_data":{"labels":{},"name":"service-example"},"spec":{"cluster_ip":"None","external_ips":[],"external_name":"","ports":[{"name":"http-0","node_port":"","port":"8888","protocol":"TCP","target_port":"80"}],"selector":{"app":"ief-nginx"},"type":""}}},"x-request-examples-description-1":"创建一个服务,服务端口名为“http-0”,服务监听的端口号为“8888”,转发到后端Pod的端口号为“80”,TCP协议。","x-request-examples-text-1":{"service":{"meta_data":{"labels":{},"name":"service-example"},"spec":{"cluster_ip":"None","external_ips":[],"external_name":"","ports":[{"name":"http-0","node_port":"","port":"8888","protocol":"TCP","target_port":"80"}],"selector":{"app":"ief-nginx"},"type":""}}},"x-support-sdk":"Y"}}},"product_short":"IEF","region_id":"cn-north-4","schemes":["HTTPS"],"security_definitions":null,"summary":"创建服务","tags":"服务管理","uri":null,"version":"2.0"}