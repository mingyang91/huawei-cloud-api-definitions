{"base_path":"/","components":null,"consumes":"[\"application/json\"]","definitions":{"ContainerResp":{"properties":{"args":{"description":"容器启动参数,字符总长度最大为65536","items":{"type":"string"},"type":"array"},"command":{"description":"容器启动命令,字符总长度最大为65536。\ncommand支持使用数组定义多条命令,但在IEF控制台界面只会显示第一条命令。","items":{"type":"string"},"type":"array"},"container_id":{"description":"容器ID","type":"string"},"envs":{"description":"环境变量","items":{"$ref":"#/definitions/EnvPods"},"type":"array"},"image_url":{"description":"容器镜像URL","type":"string"},"is_ready":{"description":"健康检查结果","type":"string"},"liveness_probe":{"$ref":"#/definitions/Probe"},"message":{"description":"容器故障详情","type":"string"},"name":{"description":"容器名称,只允许英文小写字母、数字、中划线,最大长度32, 英文小写字母或数字开头和结尾","type":"string"},"npu_type":{"description":"NPU类型,支持D310、D310B,支持填写:\n- D310:D310类型\n- D310B:D310B类型\n- 不填表示为D310类型。","type":"string"},"ports":{"description":"容器端口映射值","items":{"$ref":"#/definitions/HostContainerPort"},"type":"array"},"privileged":{"description":"是否启用特权容器,默认值false","type":"boolean"},"readiness_probe":{"$ref":"#/definitions/Probe"},"reason":{"description":"容器故障原因","type":"string"},"resources":{"$ref":"#/definitions/DeploymentResources"},"restarts":{"description":"容器重启次数","format":"int64","type":"integer"},"state":{"description":"容器状态","type":"string"},"version":{"description":"容器镜像版本","type":"string"},"volumes":{"description":"卷配置","items":{"$ref":"#/definitions/Volumes"},"type":"array"}},"required":["name","image_url"],"type":"object"},"DeploymentResources":{"description":"创建容器时使用的资源","properties":{"limits":{"additionalProperties":{"type":"string"},"description":"- 允许容器使用的最大资源,key值支持填写:cpu, memory, gpu, npu。\n- 申请NPU资源时可填写指定的NPU芯片类型,支持填写:D310、D310B。注意:key值填写为npu时,默认使用npu_type字段指定的芯片类型。如果npu_type字段为空,默认使用D310芯片类型。","type":"object"},"requests":{"additionalProperties":{"type":"string"},"description":"- 容器需要使用的最小资源,key值支持填写:cpu, memory, gpu, npu\n- 申请NPU资源时可填写指定的NPU芯片类型,支持填写:D310、D310B。注意:key值填写为npu时,默认使用npu_type字段指定的芯片类型。如果npu_type字段为空,默认使用D310芯片类型。","type":"object"}},"type":"object"},"EnvPods":{"description":"环境变量","properties":{"name":{"description":"环境变量的key,由大小写字母或下划线开头,由数字、大小写字母、下划线组成,最大长度2048个字符,不允许重复","type":"string"},"value":{"description":"环境变量的value,最大长度20480个字符。value、value_from和field_path必须三选一使用。","type":"string"}},"required":["name"]},"ErrorResponseBody":{"description":"响应Body参数","properties":{"error_code":{"description":"错误码","type":"string"},"error_msg":{"description":"错误描述信息","type":"string"}}},"Exec":{"properties":{"command":{"description":"探针执行命令,最大长度10240个字符","type":"string"}},"required":["command"]},"HostContainerPort":{"description":"容器端口映射值","properties":{"container_port":{"description":"构成一堆映射的容器端口","format":"int32","type":"integer"},"host_ip":{"description":"对应网卡地址","type":"string"},"host_port":{"description":"构成一对映射的物理机对应网卡端口","format":"int32","type":"integer"}},"required":["container_port"]},"HttpGetDetail":{"description":"执行http探测","properties":{"host":{"description":"请求的主机地址,默认为容器IP","type":"string"},"path":{"description":"必须要以/开头,构造结果为:协议类型://主机地址:端口路径","type":"string"},"port":{"description":"探测的http端口,1到65535之间的整数","format":"int32","type":"integer"},"scheme":{"description":"协议类型,HTTP或HTTPS,默认HTTP","type":"string"}},"required":["path","port"]},"ListPodResponse":{"properties":{"count":{"description":"应用实例总数","format":"int32","type":"integer"},"pods":{"description":"应用实例列表","items":{"$ref":"#/definitions/PodResp"},"type":"array"}},"required":["count","pods"]},"PodConfigs":{"description":"应用实例配置","properties":{"dns_policy":{"description":"应用实例DNS策略,可选值Default、ClusterFirst、ClusterFirstWithHostNet,默认为Default。应用实例启用主机网络时只能选填Default、ClusterFirstWithHostNet,不启用主机网络时只能选填Default、ClusterFirst","type":"string"},"host_network":{"description":"应用实例是否启用主机网络,不启用则使用端口映射,默认值false","type":"boolean"},"host_pid":{"description":"应用实例是否与主机共PID命名空间,默认值false","type":"boolean"},"migration":{"description":"应用实例故障是否迁移,指定节点组部署时必选,默认值false","type":"boolean"},"restart_policy":{"description":"应用实例重启策略,可选值Always、OnFailure、Never","type":"string"},"toleration_seconds":{"description":"应用实例故障容忍时间,容忍时间到达后迁移应用实例,只在指定节点组部署时生效","format":"int32","type":"integer"}},"required":["restart_policy"],"type":"object"},"PodResp":{"properties":{"configs":{"$ref":"#/definitions/PodConfigs"},"containers":{"description":"应用实例业务容器","items":{"$ref":"#/definitions/ContainerResp"},"type":"array"},"created_at":{"description":"应用实例创建时间","example":"2019-10-10T02:24:02.325Z","type":"string"},"deployment_id":{"description":"应用ID","type":"string"},"id":{"description":"应用实例uuid","example":"3e64d98a-37c5-43a6-9bfe-052b9083e362","type":"string"},"init_containers":{"description":"应用实例init容器","items":{"$ref":"#/definitions/ContainerResp"},"type":"array"},"message":{"description":"应用实例故障详情","type":"string"},"name":{"description":"应用实例名称","example":"app-test-69f9dc4b67-wfwn6","type":"string"},"node_id":{"description":"应用实例所在节点","example":"ff5f5129-f53f-4129-9f7f-ca7837063b5f","type":"string"},"project_id":{"description":"项目ID","example":"bcd83056c918480f8f190844bd425b23","type":"string"},"reason":{"description":"应用实例故障原因","type":"string"},"state":{"description":"应用实例状态:\n- RUNNING:实例运行中\n- PENDING:实例等待创建\n- SUCCEEDED:实例执行成功\n- FAILED:实例运行失败\n- CREATE_FAIL:实例创建失败\n- TERMINATING:实例终止中\n- PENDING_DELETE:实例等待删除\n- DELETE_FAILED:实例删除失败\n- FREEZE:实例冻结\n- UNKNOWN:实例状态未知","example":"RUNNING","type":"string"}},"required":["id","name","configs","containers","node_id","deployment_id","project_id","reason","message","created_at","state"],"type":"object"},"Probe":{"description":"探针配置","properties":{"exec":{"$ref":"#/definitions/Exec","description":"执行命令检查,与http_get二选一"},"http_get":{"$ref":"#/definitions/HttpGetDetail","description":"执行http探测"},"initial_delay_seconds":{"description":"表示从工作负载启动后从多久开始探测,大于0且不大于3600的整数,默认为10","format":"int32","type":"integer"},"timeout_seconds":{"description":"表示探测超时时间,大于0且不大于3600的整数,默认为1","format":"int32","type":"integer"}}},"Volumes":{"description":"卷配置","properties":{"default_mode":{"description":"挂载的文件权限,仅configMap和secret类型生效,填写值为十进制表示的linux文件权限,默认为420(对应权限644)","format":"int32","type":"integer"},"destination":{"description":"卷挂载路径,必须是合法的路径","type":"string"},"name":{"description":"卷名称,小写字母或数字,最长63个字符","type":"string"},"read_only":{"description":"读写权限,configMap和secret类型只支持读权限","type":"boolean"},"source":{"description":"卷来源,type为hostPath时输入路径,要求以/开头,后面可包含中划线,反斜杠,下划线,点号,字母,数字; secret时输入secret名称,configMap时输入configMap名称,emptyDir时输入disk或memory","type":"string"},"type":{"description":"卷的类型,支持configMap,secret,emptyDir,hostPath","type":"string"}},"required":["name","type","source","destination"],"type":"object"}},"description":null,"group_id":"cdaa2d3f4fbb4dc38b6a6c55f9222ed9","host":"ief.cn-north-4.myhuaweicloud.com","id":"ab7cb76d81db413ca145bf86e4b88d6f","info_version":"v1","method":"get","name":"ListPods","parameters":{"Content-Type":{"description":"消息体的类型(格式),默认取值为“application/json”","in":"header","name":"Content-Type","required":true,"type":"string"},"IEF-Instance-Id":{"description":"铂金版实例ID,专业版实例为空值","in":"header","name":"ief-instance-id","required":false,"type":"string"},"X-Auth-Token":{"description":"用户Token。\n通过调用IAM服务获取用户Token接口获取(响应消息头中X-Subject-Token的值)。","in":"header","name":"X-Auth-Token","required":true,"type":"string","x-example":"MIIDkgYJKoZIhvcNAQcCoIIDgzCCXXXXXX..."}},"paths":{"/v3/{project_id}/edgemgr/pods":{"get":{"consumes":["application/json"],"description":"查询应用实例列表","operationId":"ListPods","parameters":[{"$ref":"#/parameters/Content-Type"},{"$ref":"#/parameters/X-Auth-Token"},{"description":"项目ID","in":"path","name":"project_id","required":true,"type":"string"},{"description":"指定节点查询应用实例,可选,\n与group_id、deployment_id、deployment_ids四选一","in":"query","name":"node_id","required":false,"type":"string"},{"description":"指定节点组查询应用实例,可选,与node_id、deployment_id、deployment_ids四选一","in":"query","name":"group_id","required":false,"type":"string"},{"description":"指定应用部署ID查询应用实例,可选,\n与node_id、group_id、deployment_ids四选一","in":"query","name":"deployment_id","required":false,"type":"string"},{"description":"指定应用部署ID列表查询应用实例,多个ID使用逗号分隔,可选,\n与node_id、group_id、deployment_id四选一","in":"query","name":"deployment_ids","required":false,"type":"string"},{"description":"指定插件实例名称查询对应的应用实例列表,可选","in":"query","name":"plugin_instance_name","required":false,"type":"string"},{"description":"查询返回记录的数量限制","format":"int32","in":"query","name":"limit","required":false,"type":"integer"},{"description":"偏移量,表示查询该偏移量后面的记录","format":"int32","in":"query","name":"offset","required":false,"type":"integer"},{"$ref":"#/parameters/IEF-Instance-Id"}],"produces":["application/json"],"responses":{"200":{"description":"ok","examples":{"application/json":{"count":1,"pods":[{"configs":{"host_network":true,"host_pid":true,"migration":true,"restart_policy":"Always","toleration_seconds":300},"containers":[{"args":["-c","sleep 1000"],"command":["/bin/bash"],"envs":[{"name":"CERT_PATH","value":"/opt/cert"}],"image_url":"nginx:latest","liveness_probe":{"http_get":{"path":"/","port":80,"scheme":"http"},"initial_delay_seconds":10,"timeout_seconds":10},"message":"","name":"container-0","npu_type":"","ports":[{"container_port":80,"host_port":80}],"readiness_probe":{"http_get":{"path":"/","port":80,"scheme":"http"},"initial_delay_seconds":10,"timeout_seconds":10},"reason":"","resources":{"limits":{"cpu":0.25,"gpu":500,"memory":500},"requests":{"cpu":0.25,"gpu":500,"memory":500}},"restarts":0,"volumes":[{"destination":"/var/IEF","name":"log-volume","read_only":false,"source":"/var/IEF","type":"hostPath"}]}],"created_at":"2019-10-10T02:24:02.325Z","id":"3e64d98a-37c5-43a6-9bfe-052b9083e362","message":"","name":"app-test-69f9dc4b67-wfwn6","node_id":"bcd83056c918480f8f190844bd425b23","project_id":"bcd83056c918480f8f190844bd425b23","reason":"","state":"RUNNING"}]}},"schema":{"$ref":"#/definitions/ListPodResponse"}},"400":{"description":"error","examples":{"application/json":{"error_code":"IEF.100001","error_msg":"PROJECT_ID not found"}},"schema":{"$ref":"#/definitions/ErrorResponseBody"}},"500":{"description":"error","examples":{"application/json":{"error_code":"IEF.100158","error_msg":"Fail to extract gpu infomation"}},"schema":{"$ref":"#/definitions/ErrorResponseBody"}}},"summary":"查询应用实例列表","tags":["部署管理"],"x-is-registered":"Y","x-publishpath":"ief_02_0087","x-request-examples-1":"GET https://{endpoint}//v3/{project_id}/edgemgr/pods?deployment_ids=a71077f0-a491-4e1c-a41a-7d6910da26cb,77340b19-b52e-4708-83fd-3ca86f5a292e","x-request-examples-text-1":"GET https://{endpoint}//v3/{project_id}/edgemgr/pods?deployment_ids=a71077f0-a491-4e1c-a41a-7d6910da26cb,77340b19-b52e-4708-83fd-3ca86f5a292e","x-support-sdk":"Y"}}},"product_short":"IEF","region_id":"cn-north-4","schemes":["HTTPS"],"security_definitions":null,"summary":"查询应用实例列表","tags":"部署管理","uri":null,"version":"2.0"}