{"base_path":"/","components":null,"consumes":"[\"application/json\"]","definitions":{"InstanceInfo":{"description":"数据库实例信息。","properties":{"available_zones":{"description":"可用区信息。","items":{"$ref":"#/definitions/MysqlAvailableZoneInfo"},"type":"array"},"id":{"description":"数据库主实例或只读实例ID。","example":"ba0fd7c13cca4655820e0f858d5d467bin01","type":"string"},"name":{"description":"数据库实例名称。","example":"rds-7404-hll","type":"string"},"status":{"description":"节点状态。","example":"normal","type":"string"},"weight":{"description":"数据库实例读权重。","example":1,"format":"int32","type":"integer"}},"type":"object"},"MysqlAvailableZoneInfo":{"description":"可用区信息。","properties":{"code":{"description":"可用区编码。","example":"cn-southwest-244b","type":"string"},"description":{"description":"可用区描述。","example":"az2","type":"string"}},"type":"object"},"ProxyInfo":{"description":"数据库代理信息。","properties":{"address":{"description":"读写分离地址。","example":"10.0.2.93","type":"string"},"alt_flag":{"description":"ALT开关状态。","example":false,"type":"boolean"},"connection_pool_type":{"description":"连接池类型。\n\n取值范围:\n\nCLOSED: 关闭连接池。\n\nSESSION: 开启会话级连接池。","example":"CLOSED","type":"string"},"cpu":{"description":"数据库代理规格的CPU大小。","example":4,"type":"string"},"delay_threshold_in_seconds":{"description":"延时阈值,单位:秒。","example":30,"format":"int32","type":"integer"},"dns_name":{"description":"数据库代理读写分离地址内网域名。\n该字段为空表示未申请读写内网域名。","example":"","type":"string"},"flavor_info":{"description":"数据库代理规格信息。","properties":{"code":{"description":"规格码。","example":"rds.proxy.xlarge.2","type":"string"},"group_type":{"description":"规格类型。","enum":["X86","RAM"],"example":"X86","type":"string"}}},"force_read_only":{"description":"是否强制读路由到只读。","example":false,"type":"boolean"},"mem":{"description":"数据库代理规格的内存大小。","example":8,"type":"string"},"mode":{"description":"数据库代理集群模式。\n取值:\n    Cluster:集群模式\n    Ha:主备模式","example":"Cluster","type":"string"},"name":{"description":"数据库代理名称。","example":"proxy-b2e0a","type":"string"},"node_num":{"description":"数据库代理节点个数。","example":2,"format":"int32","type":"integer"},"nodes":{"description":"数据库代理节点信息列表。","items":{"properties":{"az_code":{"description":"数据库代理节点所在可用区。","example":"cn-southwest-244b","type":"string"},"frozen_flag":{"description":"数据库代理节点是否被冻结。\n\n取值范围:\n\n0:未冻结。\n\n1:冻结。","example":0,"format":"int32","type":"integer"},"id":{"description":"数据库代理节点ID。","example":"bd62df826b1a439c988005926973b9aapn01","type":"string"},"role":{"description":"数据库代理节点角色:\n\nmaster:主节点。\n\nslave:备节点。","example":"master","type":"string"},"status":{"description":"数据库代理节点状态。\n\n取值范围:\nNORMAL: 表示节点正常。\nABNORMAL: 表示节点节点状态异常。\nCREATING: 表示节点正在创建中。\nCREATEFAIL: 表示节点创建失败。","example":"NORMAL","type":"string"}}},"type":"array"},"pay_mode":{"description":"数据库代理计费模式。\n\n取值范围:\n0:按需计费\n1:包周期计费","example":0,"type":"string"},"pool_id":{"description":"数据库代理实例ID。","example":"b2e0ab1292b24045bb45b5b14a750630po01","type":"string"},"port":{"description":"端口号。","example":3306,"format":"int32","type":"integer"},"proxy_mode":{"description":"数据库代理读写模式。\n取值范围:\n    readwrite 读写模式\n    readonly 只读模式","example":"readwrite","type":"string"},"route_mode":{"description":"数据库代理路由模式。\n取值范围:\n    0:表示权重负载模式。\n    1:表示负载均衡模式(数据库主实例不接受读请求)。\n    2:表示负载均衡模式(数据库主实例接受读请求)。","example":1,"format":"int32","type":"integer"},"seconds_level_monitor_fun_status":{"description":"数据库代理秒级监控状态。","enum":["off","on"],"example":"off","type":"string"},"ssl_option":{"description":"ssl开关状态。","example":false,"type":"boolean"},"status":{"description":"数据库代理状态。\n\n取值:\nNORMAL:表示数据库代理正常。\nENABLING:表示数据库代理正在开启。\nDISABLING:表示数据库代理正在关闭。\nCHANGING_NODE_NUM:表示数据库代理正在调整节点数量。\nSCALING: 表示数据库代理正在规格变更。\nUPGRADING: 表示数据库代理正在升级内核版本。\nIPMODIFYING: 表示数据库代理正在修改读写分离地址。\nRESTARTING: 表示数据库代理正在重启进程。\nTRANSACTION_SPLITTING: 表示数据库代理正在变更事务拆分功能状态。\nCONNECTION_POOL_SWITCH_OPERATING: 表示数据库代理正在变更会话连接池类型。\nPORT_MODIFYING: 表示数据库代理正在修改端口。\nPROXY_SSL_SWITCHING: 表示数据库代理正在变更SSL状态。\nALT_SWITCH_OPERATING: 表示数据库代理正在变更ALT状态。\nCHANGING_RESOURCES: 表示数据库代理正在进行资源变更。\nNORMAL: 表示数据库代理正常。\nABNORMAL: 表示数据库代理异常。\nFAILED: 表示数据库代理创建失败。\nFROZEN: 表示数据库代理已冻结。","example":"NORMAL","type":"string"},"subnet_id":{"description":"数据库代理实例所属子网ID。","example":"2f75f35c-62ca-43b7-9954-8fd1e6be4641","type":"string"},"support_balance_route_mode":{"description":"数据库代理是否支持开启负载均衡路由模式。","example":false,"type":"boolean"},"support_proxy_ssl":{"description":"数据库代理是否支持开启ssl功能。","example":false,"type":"boolean"},"support_switch_connection_pool_type":{"description":"数据库代理是否支持切换会话连接池类型。","example":false,"type":"boolean"},"support_transaction_split":{"description":"数据库代理是否支持开启事务拆分。","example":false,"type":"boolean"},"transaction_split":{"description":"数据库代理事务拆分开关状态。\n\ntrue:开启。\n\nfalse:关闭。","example":false,"type":"string"}},"type":"object"},"QueryProxyResponseV3":{"description":"查询数据库代理详情信息返回体。","properties":{"master_instance":{"$ref":"#/definitions/InstanceInfo","description":"数据库主实例信息。"},"proxy":{"$ref":"#/definitions/ProxyInfo","description":"数据库代理信息。"},"proxy_security_group_check_result":{"description":"安全组是否放通该数据库代理到数据库的网络地址。","example":true,"type":"boolean"},"readonly_instances":{"description":"数据库只读实例信息。","items":{"$ref":"#/definitions/InstanceInfo"},"type":"array"}},"type":"object"},"QueryRDSforMySqlProxyResponse":{"description":"查询数据库代理信息返回体。","properties":{"max_proxy_node_num":{"description":"单个数据库代理支持选择的代理节点的最大数量。","example":8,"format":"int32","type":"integer"},"max_proxy_num":{"description":"支持同时开启的数据库代理的最大数量。","example":4,"format":"int32","type":"integer"},"proxy_query_info_list":{"description":"数据库实例下的数据库代理信息列表。","items":{"$ref":"#/definitions/QueryProxyResponseV3"},"type":"array"},"support_balance_route_mode_for_favored_version":{"description":"是否支持创建数据库代理时设置负载均衡路由模式。","example":true,"type":"boolean"}},"type":"object"}},"description":null,"group_id":"b7735f867ef44182af9eb77490a46fbf","host":"rds.cn-north-4.myhuaweicloud.com","id":"c79076539bd2456fb228b6e47d153f6b","info_version":"v3","method":"get","name":"ListRdSforMySqlProxy","parameters":{},"paths":{"/v3/{project_id}/instances/{instance_id}/proxy-list":{"get":{"description":"查询数据库代理信息列表。","operationId":"ListRdSforMySqlProxy","parameters":[{"default":"application/json","in":"header","name":"Content-Type","type":"string"},{"description":"租户在某一Region下的project ID。\n\n获取方法请参见[获取项目ID](https://support.huaweicloud.com/api-rds/rds_03_0002.html)。","in":"path","name":"project_id","required":true,"type":"string"},{"description":"实例ID,严格匹配UUID规则。","in":"path","name":"instance_id","required":true,"type":"string"},{"description":"语言。","in":"header","name":"X-Language","required":false,"type":"string"},{"description":"用户token。","in":"header","name":"X-Auth-Token","required":true,"type":"string"}],"responses":{"200":{"description":"返回体。","examples":{"application/json":{"max_proxy_node_num":4,"max_proxy_num":4,"proxy_query_info_list":[{"master_instance":{"available_zones":[{"code":"cn-southwest-244c","description":"az3"}],"id":"920ec36cef814a8b830a5bed50d9a088in01","name":"rds-2c54","status":"normal","weight":0},"proxy":{"address":"10.0.2.205","alt_flag":false,"connection_pool_type":"CLOSED","cpu":"2","delay_threshold_in_seconds":30,"dns_name":"","flavor_info":{"code":"rds.proxy.large.2","group_type":"X86"},"force_read_only":false,"mem":"4","mode":"Cluster","name":"test-hll","node_num":2,"nodes":[{"az_code":"cn-southwest-244c","frozen_flag":0,"id":"3079919890f24fb8ab284571fc409058pn01","role":"master","status":"NORMAL"},{"az_code":"cn-southwest-244c","frozen_flag":0,"id":"804430ac9068419fa5e49d5ca0684172pn01","role":"master","status":"NORMAL"}],"pay_mode":"0","pool_id":"e06ecf4dfea8409690c87a9ee6582b0dpo01","port":3306,"proxy_mode":"readwrite","route_mode":1,"seconds_level_monitor_fun_status":"off","ssl_option":false,"status":"NORMAL","subnet_id":"2f75f35c-62ca-43b7-9954-8fd1e6be4641","support_balance_route_mode":true,"support_proxy_ssl":true,"support_switch_connection_pool_type":true,"support_transaction_split":true,"transaction_split":"false"},"proxy_security_group_check_result":false,"readonly_instances":[{"available_zones":[{"code":"cn-southwest-244c","description":"az3"}],"id":"f9462b58982d484fb64fd9880504d863in01","name":"replica-f966","status":"abnormal","weight":0}]}],"support_balance_route_mode_for_favored_version":true}},"schema":{"$ref":"#/definitions/QueryRDSforMySqlProxyResponse"}},"400":{"description":"Client error.","schema":{"$ref":"#/definitions/MysqlErrorResponse"}},"500":{"description":"Server error.","schema":{"$ref":"#/definitions/MysqlErrorResponse"}}},"summary":"查询数据库代理信息列表","tags":["数据库代理"],"x-is-registered":"Y","x-request-examples-description-1":"查询数据库代理信息列表。","x-request-examples-url-1":"GET https://{endpoint}/v3/23a50154cf494ec9ad6883979a12db0a/instances/920ec36cef814a8b830a5bed50d9a088in01/proxy-list","x-support-sdk":"Y"}}},"product_short":"RDS","region_id":"cn-north-4","schemes":["HTTPS"],"security_definitions":null,"summary":"查询数据库代理信息列表","tags":"数据库代理","uri":null,"version":"2.0"}