{"base_path":"/","components":null,"consumes":"[\"application/json\"]","definitions":{"ArticlePropertiesRequest":{"description":"项目属性。","properties":{"delete_delivery_format":{"description":"删除交付格式。","enum":["do_not_delete","delete","call_procedure","xcall_procedure"],"type":"string"},"delete_stored_procedure":{"description":"删除存储过程。删除交付格式填(x)call_procedure时该项必填。","type":"string"},"destination_object_name":{"description":"目标对象名称。","example":"DESTINATION_TABLE_TEST_1","type":"string"},"destination_object_owner":{"description":"目标对象命名空间。","example":"dbo","type":"string"},"insert_delivery_format":{"description":"插入交付格式。","enum":["do_not_insert","insert","insert_without_column_list","call_procedure"],"type":"string"},"insert_stored_procedure":{"description":"插入存储过程。插入交付格式填call_procedure时该项必填。","type":"string"},"update_delivery_format":{"description":"更新交付格式。","enum":["do_not_update","update","call_procedure","mcall_procedure","xcall_procedure","scall_procedure"],"type":"string"},"update_stored_procedure":{"description":"更新存储过程。更新交付格式填(m/x/s)call_procedure时该项必填。","type":"string"}},"type":"object"},"CreatePublicationsRequestBody":{"description":"创建发布详情。","properties":{"extend_tables":{"description":"全选所有表后需要去除的表。","items":{"example":["table1","table2"],"type":"string"},"type":"array"},"is_create_snapshot_immediately":{"description":"是否立即创建快照。","example":true,"type":"string"},"is_select_all_table":{"description":"是否选择所有数据表。","example":true,"type":"boolean"},"job_schedule":{"$ref":"#/definitions/OperateUsedJobSchedule","description":"策略详情。"},"publication_database":{"description":"发布数据库名。","example":"DATABASE_NAME","type":"string"},"publication_name":{"description":"发布名称。\n\n发布名称长度可在5~64个字符之间,由字母、数字或下划线组成,不能包含其他特殊字符。","example":"publication_name","type":"string"},"subscription_options":{"$ref":"#/definitions/SubscriptionOption","description":"订阅选项。"},"tables":{"description":"发布数据表。","items":{"$ref":"#/definitions/PublicationTableInfoRequest"},"type":"array"}},"required":["publication_name","publication_database","is_create_snapshot_immediately","job_schedule","tables"],"type":"object"},"ErrorResponse":{"properties":{"error_code":{"description":"错误码。","example":"DBS.200022","type":"string"},"error_msg":{"description":"错误消息。","example":"实例名称已存在。","type":"string"}},"required":["error_code","error_msg"]},"JobScheduleDailyFrequencyInfo":{"description":"策略每日频率。","properties":{"active_end_time":{"description":"最后一次执行时间。每日执行多次时该参数必传,每日执行一次时不生效。 HH:mm:ss","example":"23:59:59","type":"string"},"active_start_time":{"description":"每日第一次执行时间。每日频率类型为每日一次时,则只执行这一次。 HH:mm:ss","example":"01:00:59","type":"string"},"freq_interval_unit":{"description":"执行间隔的单位。每日执行多次时该参数必传,每日执行一次时不生效。 second:秒, minute:分, hour:时","example":"minute","type":"string"},"freq_subday_interval":{"description":"执行间隔。每日执行多次时该参数必传,每日执行一次时不生效。取值范围1至99","example":"10","type":"integer"},"freq_subday_type":{"description":"每日频率类型 once:每日一次, multiple:每日多次。","example":"once","type":"string"}}},"JobScheduleDurationInfo":{"description":"策略有效期。","properties":{"active_end_date":{"description":"最后一次执行日期。默认不会结束 yyyy-MM-dd","example":"2099-12-31","type":"string"},"active_start_date":{"description":"第一次执行日期 yyyy-MM-dd。取值范围1990-01-01至2099-12-31","example":"2023-01-01","type":"string"}}},"JobScheduleFrequencyInfo":{"description":"策略间隔周期。","properties":{"freq_interval":{"description":"执行间隔。取值范围1至99。","example":"5","type":"integer"},"freq_interval_day_monthly":{"description":"频率类型为按月、每月按天时该参数必传,不为按月、每月按天时时不生效。\n每月执行的日期。取值范围1-31。","example":"31","type":"integer"},"freq_interval_monthly":{"description":"频率类型为按月、每月按周时该参数必传,不为按月、每月按周时时不生效。\n每周执行哪几天。 Sunday, Monday,Tuesday ... Saturday, day, weekday, weekend","example":"weekday","type":"string"},"freq_interval_weekly":{"description":"频率类型为按周时该参数必传,不为按周时不生效。\n每周执行哪几天。参数值:Monday,Tuesday ... Sunday","items":{"example":"Monday","type":"string"},"type":"array"},"freq_relative_interval_monthly":{"description":"频率类型为按月、每月按周时该参数必传,不为按月、每月按周时时不生效。\n每月在哪周执行。 first, second, third, fourth, last","example":"fourth","type":"string"},"freq_type":{"description":"策略频率类型 daily:按天, weekly:按周, monthly_day:按月、每月按天, monthly_week:按月、每月按周。","example":"daily","type":"string"}}},"JobScheduleOneTimeOccurrenceInfo":{"description":"执行一次执行时间。","properties":{"active_start_date":{"description":"执行日期 yyyy-MM-dd。取值范围1990-01-01至2099-12-31","example":"2023-01-01","type":"string"},"active_start_time":{"description":"执行时间。HH:mm:ss","example":"01:00:59","type":"string"}}},"OperateUsedJobSchedule":{"description":"策略信息。","properties":{"daily_frequency":{"$ref":"#/definitions/JobScheduleDailyFrequencyInfo","description":"策略每日频率(仅当策略id为空时必填)。"},"duration":{"$ref":"#/definitions/JobScheduleDurationInfo","description":"策略有效期(仅当策略id为空时必填)。"},"frequency":{"$ref":"#/definitions/JobScheduleFrequencyInfo","description":"策略间隔周期(仅当策略id为空时必填)。"},"id":{"description":"策略id。","example":"7be09cc4-c269-4f3a-9539-aaf2b40d79a0","type":"string"},"job_schedule_type":{"description":"计划类型。默认值recurring。\n\nautomatically:SQL Server代理启动时自动启动。\ncpu_idle:CPU空闲时启动。\nrecurring:重复执行。\none_time:执行一次。","type":"string"},"one_time_occurrence":{"$ref":"#/definitions/JobScheduleOneTimeOccurrenceInfo","description":"执行一次执行时间。"}}},"PublicationTableFilterInfoRequest":{"description":"表筛选器。","properties":{"column":{"description":"筛选字段(仅当筛选关系为空时生效,且筛选关系为空时必传)。","example":"ID","type":"string"},"condition":{"description":"筛选条件(仅当筛选关系为空时生效,且筛选关系为空时必传)。\n取值范围: =, !=, >, <, >=, <=, LIKE, NOT LIKE, IN","example":">","type":"string"},"filters":{"description":"下级筛选器(仅当筛选关系不为空时生效,且筛选关系不为空时必传)。","items":{"$ref":"#/definitions/PublicationTableFilterInfoRequest"},"type":"array"},"relation":{"description":"筛选关系。 \n为空时表示当前为最下级筛选器,不为空时表示当前项还有下级筛选器\n不为空时取值范围:AND, OR","example":"and","type":"string"},"value":{"description":"筛选值(仅当筛选关系为空时生效,且筛选关系为空时必传)。","example":"1","type":"string"}},"type":"object"},"PublicationTableInfoRequest":{"description":"发布表详情。","properties":{"article_properties":{"$ref":"#/definitions/ArticlePropertiesRequest","description":"项目属性。"},"columns":{"description":"发布的字段(不传或为空说明选择所有字段)。\n\n字段名称长度可在1~64个字符之间,由字母、数字或下划线组成,不能包含其他特殊字符","items":{"example":["ID","NAME"],"type":"string"},"type":"array"},"filter":{"$ref":"#/definitions/PublicationTableFilterInfoRequest","description":"筛选器(仅当筛选语句为空时生效,筛选语句和筛选器都为空时说明没有筛选条件)。"},"filter_statement":{"description":"筛选语句。不能包含英文单引号'。","example":"WHERE [ID] > 1","type":"string"},"primary_key":{"description":"主键。","items":{"example":["ID"],"type":"string"},"type":"array"},"schema":{"description":"命名空间。默认值dbo。","example":"dbo","type":"string"},"table_name":{"description":"表名。\n\n表名长度可在1~64个字符之间,由字母、数字或下划线组成,不能包含其他特殊字符","example":"TABLE_TEST_1","type":"string"}},"required":["table_name"],"type":"object"},"ReplicationJobResponse":{"properties":{"job_id":{"description":"任务id。","example":"7be09cc4-c269-4f3a-9539-aaf2b40d79a0","type":"string"}},"required":["job_id"],"type":"object"},"SubscriptionOption":{"description":"订阅选项。","properties":{"allow_initialize_from_backup":{"default":false,"description":"允许使用备份文件初始化。\n\ntrue:允许。\nfalse:不允许。","type":"boolean"},"independent_agent":{"default":true,"description":"独立的分发代理。\n\ntrue:使用。\nfalse:不使用。","type":"boolean"},"replicate_ddl":{"default":true,"description":"复制架构更改。\n\ntrue:可更改。\nfalse:不可更改。","type":"boolean"},"snapshot_always_available":{"default":true,"description":"快照始终可用。需要“独立的分发代理”。\n\ntrue:可用。\nfalse:不可用。","type":"boolean"}}}},"description":null,"group_id":"b7735f867ef44182af9eb77490a46fbf","host":"rds.cn-north-4.myhuaweicloud.com","id":"98c695f37c2d4b3ba9376c4adbb05469","info_version":"v3","method":"post","name":"CreatePublication","parameters":{},"paths":{"/v3/{project_id}/instances/{instance_id}/replication/publications":{"post":{"description":"创建发布","operationId":"CreatePublication","parameters":[{"description":"项目ID","in":"path","name":"project_id","required":true,"type":"string"},{"description":"用户Token。","in":"header","name":"X-Auth-Token","required":true,"type":"string"},{"description":"实例ID","in":"path","name":"instance_id","required":true,"type":"string"},{"description":"创建发布请求体。","in":"body","name":"CreatePublicationRequestBody","required":true,"schema":{"$ref":"#/definitions/CreatePublicationsRequestBody"}}],"produces":["application/json"],"responses":{"202":{"description":"success","examples":{"application/json":{"job_id":"7be09cc4-c269-4f3a-9539-aaf2b40d79a0"}},"schema":{"$ref":"#/definitions/ReplicationJobResponse"}},"default":{"description":"error","schema":{"$ref":"#/definitions/ErrorResponse"}}},"summary":"创建发布","tags":["发布订阅(SQL Server)"],"x-file":"replicationOption","x-is-registered":"Y","x-request-examples-text-1":{"is_create_snapshot_immediately":true,"job_schedule":{"id":"fdd139de-221d-4d18-909f-130e77b5b906"},"publication_database":"test_db","publication_name":"pub_dbtest0103a","tables":[{"article_properties":{"delete_delivery_format":"do_not_delete","destination_object_name":"test0103b","destination_object_owner":"dbo","insert_delivery_format":"call_procedure","insert_stored_procedure":"procdure_when_insert","update_delivery_format":"update"},"schema":"dbo","table_name":"test0103a"}]},"x-request-examples-url-1":"POST https://{endpoint}/v3/0483b6b16e954cb88930a360d2c4e663/instances/1aa833000a124455a6801e83cca37e6ein04/replication/publications","x-support-sdk":"Y"}}},"product_short":"RDS","region_id":"cn-north-4","schemes":["HTTPS"],"security_definitions":null,"summary":"创建发布","tags":"发布订阅(SQL Server)","uri":null,"version":"2.0"}