{"base_path":"/","components":null,"consumes":"[\"application/json\"]","definitions":{"CreateFlinkSqlJobGraphRequestBody":{"description":"生成SQL静态流图请求参数","properties":{"cu_number":{"description":"CU总数","format":"int32","minimum":2,"type":"integer"},"flink_version":{"description":"Flink版本。当前只支持1.10和1.12。","enum":[1.1,1.12],"type":"string"},"graph_type":{"default":"simple_graph","description":"流图类型。当前支持以下两种流图类型。 简化流图:simple_graph 静态流图:job_graph。","enum":["simple_graph","job_graph"],"type":"string"},"job_type":{"description":"作业类型","type":"string"},"manager_cu_number":{"description":"管理单元CU数量","format":"int32","minimum":1,"type":"integer"},"operator_config":{"description":"算子的配置","type":"string"},"parallel_number":{"description":"最大并行度","format":"int32","minimum":1,"type":"integer"},"sql_body":{"description":"SQL","type":"string"},"static_estimator":{"default":false,"description":"是否静态资源预估","type":"boolean"},"static_estimator_config":{"description":"每个算子的流量/命中率配置,json格式的字符串。","type":"string"},"tm_cus":{"description":"单个taskManagerCU数量","format":"int32","minimum":1,"type":"integer"},"tm_slot_num":{"description":"单个taskManager Slot数量","format":"int32","minimum":1,"type":"integer"}},"required":["sql_body"],"type":"object"},"CreateFlinkSqlJobGraphResponseBody":{"description":"生成SQL静态流图的返回体","properties":{"error_code":{"type":"string"},"is_success":{"type":"boolean"},"message":{"type":"string"},"stream_graph":{"description":"静态流图的描述信息","type":"string"}},"required":["is_success","message","error_code","stream_graph"],"type":"object"},"FailResponse":{"properties":{"error_code":{"description":"错误码。","type":"string"},"error_msg":{"description":"错误描述信息。","type":"string"}},"required":["error_code","error_msg"],"type":"object"}},"description":null,"group_id":"065e44b2fe564922aa79230ec761dca6","host":"dli.cn-north-4.myhuaweicloud.com","id":"a23c4a01ce8c4a16a34dcc929261613b","info_version":"v1","method":"post","name":"CreateFlinkSqlJobGraph","parameters":{},"paths":{"/v3/{project_id}/streaming/jobs/{job_id}/gen-graph":{"post":{"deprecated":false,"description":"生成flink SQL作业的静态流图","operationId":"CreateFlinkSqlJobGraph","parameters":[{"in":"path","name":"job_id","required":true,"type":"string","x-order":2},{"in":"path","name":"project_id","required":true,"type":"string","x-order":1},{"description":"生成Flink SQL作业静态流图请求参数","in":"body","name":"CreateFlinkSqlJobGraphRequestBody","required":true,"schema":{"$ref":"#/definitions/CreateFlinkSqlJobGraphRequestBody"},"x-order":3}],"responses":{"200":{"description":"OK","examples":{"application/json":{"error_code":"","is_success":true,"message":"","stream_graph":"{\n  \"nodes\" : [ {\n    \"id\" : 1,\n    \"operator_id\" : \"bc764cd8ddf7a0cff126f51c16239658\",\n    \"type\" : \"Source\",\n    \"contents\" : \"kafkaSource\",\n    \"parallelism\" : 1\n  }, {\n    \"id\" : 2,\n    \"operator_id\" : \"0a448493b4782967b150582570326227\",\n    \"type\" : \"select\",\n    \"contents\" : \"car_id, car_owner, car_brand, car_speed\",\n    \"parallelism\" : 1,\n    \"predecessors\" : [ {\n      \"id\" : 1\n    } ]\n  }, {\n    \"id\" : 4,\n    \"operator_id\" : \"6d2677a0ecc3fd8df0b72ec675edf8f4\",\n    \"type\" : \"Sink\",\n    \"contents\" : \"kafkaSink\",\n    \"parallelism\" : 1,\n    \"predecessors\" : [ {\n      \"id\" : 2\n    } ]\n  } ]\n}"}},"schema":{"$ref":"#/definitions/CreateFlinkSqlJobGraphResponseBody"}},"400":{"description":"Bad Request","examples":{"application/json":{"error_code":"JK.1001","error_msg":"Failed to get stream graph:Sql validate error."}},"schema":{"$ref":"#/definitions/FailResponse"}}},"summary":"生成flink SQL作业的静态流图","tags":["Flink作业-作业相关API"],"x-apiErrorCodes":"[]","x-is-registered":"Y","x-open-region-cloud":"hc,hws_hk","x-order":10,"x-support-sdk":"Y"}}},"product_short":"DLI","region_id":"cn-north-4","schemes":["HTTPS"],"security_definitions":null,"summary":"生成flink SQL作业的静态流图","tags":"Flink作业-作业相关API","uri":null,"version":"2.0"}