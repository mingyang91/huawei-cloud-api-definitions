{"base_path":"/","components":null,"consumes":"[\"application/json\"]","definitions":{"CreateFlinkJarJobRequestBody":{"description":"新建Flink Jar作业的请求参数。","properties":{"checkpoint_path":{"description":"用户Jar中checkpoint的储存地址,不同作业路径需要保持不同。","type":"string"},"cu_number":{"description":"用户为作业选择的CU数量,默认值为2。","format":"int32","type":"integer","x-vision":""},"dependency_files":{"description":"用户已上传到DLI资源管理系统的资源包名,用户自定义作业的依赖文件,示例:[myGroup/test.cvs,myGroup/test1.csv]","items":{"type":"string"},"type":"array","x-vision":""},"dependency_jars":{"description":"用户已上传到DLI资源管理系统的资源包名,用户自定义作业的其他依赖包。示例:[Group/test.jar,myGroup/test1.jar]","example":"myGroup/test.jar,myGroup/test1.jar","items":{"type":"string"},"type":"array","x-vision":""},"desc":{"description":"作业描述。长度限制:0-512个字符。","example":"作业描述。","maxLength":512,"minLength":0,"type":"string","x-vision":""},"entrypoint":{"description":"用户已上传到DLI资源管理系统的资源包名,用户自定义作业主类所在的jar包。","example":"file","type":"string","x-vision":""},"entrypoint_args":{"description":"作业入口类参数,多个参数之间空格分隔。","example":"name","type":"string","x-vision":""},"feature":{"description":"作业特性。表示用户作业使用的Flink镜像类型。basic:表示使用DLI提供的基础Flink镜像。custom:表示使用用户自定义的Flink镜像。","type":"string"},"flink_version":{"description":"Flink版本。当用户设置“feature”为“basic”时,该参数生效。用户可通过与“feature”参数配合使用,指定作业运行使用的DLI基础Flink镜像的版本。","type":"string"},"image":{"description":"自定义镜像。格式为:组织名/镜像名:镜像版本。当用户设置“feature”为“custom”时,该参数生效。用户可通过与“feature”参数配合使用,指定作业运行使用自定义的Flink镜像。关于如何使用自定义镜像,请参考《数据湖探索用户指南》","type":"string"},"log_enabled":{"default":false,"description":"是否开启作业日志。\n开启:true\n关闭:false\n默认:false","example":true,"type":"boolean","x-vision":""},"main_class":{"description":"作业入口类。","example":"Main.class","type":"string","x-vision":""},"manager_cu_number":{"description":"用户为作业选择的管理节点CU数量,对应为flink jobmanager数量,默认值为1。","example":4,"format":"int32","type":"integer","x-vision":""},"name":{"description":"作业名称。长度限制:0-57个字符。","example":"myjob","maxLength":57,"minLength":0,"type":"string","x-vision":""},"obs_bucket":{"description":"当“log_enabled”为“true”时, 用户授权保存作业日志的OBS桶名。","example":"https://cc-cm.obs.cn-north-7.ulanqab.huawei.com/2019/11/lib.zip","type":"string","x-vision":""},"parallel_number":{"description":"用户为作业选择的并发量,默认值为1.","example":1,"format":"int32","type":"integer","x-vision":""},"queue_name":{"description":"队列名称。长度限制:1-128个字符。","example":"queue_name","maxLength":128,"minLength":1,"type":"string","x-vision":""},"restart_when_exception":{"default":false,"description":"是否开启异常重启功能,默认值为“false”。","example":false,"type":"boolean","x-vision":""},"resume_checkpoint":{"description":"异常重启是否从checkpoint恢复。","type":"boolean"},"resume_max_num":{"description":"异常重试最大次数,单位:次/小时。取值范围:-1或大于0。默认值为“-1”,表示无限次数。","format":"int32","type":"integer"},"runtime_config":{"description":"Flink作业运行时自定义优化参数。","type":"string"},"smn_topic":{"description":"当作业异常时,向该SMN主题推送告警信息。","example":"告警信息","type":"string","x-vision":""},"tags":{"description":"标签","items":{"$ref":"#/definitions/Tag"},"minItems":0,"type":"array"},"tm_cus":{"description":"每个taskmanager的CU数,默认值为“1”。","format":"int32","type":"integer"},"tm_slot_num":{"description":"每个taskmanager的slot数,默认值为“(parallel_number*tm_cus)/(cu_number-manager_cu_number)”。","format":"int32","type":"integer"}},"required":["name"],"type":"object"},"CreateFlinkJobResponseBody":{"description":"创建作业的响应参数。","properties":{"is_success":{"description":"执行请求是否成功。“true”表示请求执行成功。","example":true,"type":"boolean","x-vision":""},"job":{"$ref":"#/definitions/FlinkJob","description":"新建SQL作业的job模型。","x-vision":""},"message":{"description":"消息内容","example":"创建作业成功","type":"string","x-vision":""}},"type":"object"},"FailResponse":{"properties":{"error_code":{"description":"错误码。","type":"string"},"error_msg":{"description":"错误描述信息。","type":"string"}},"required":["error_code","error_msg"],"type":"object"},"FlinkJob":{"description":"创建作业的job模型。","properties":{"job_id":{"description":"作业Id。","example":50320,"format":"int64","type":"integer","x-vision":""},"status_desc":{"description":"当前状态描述,包含异常状态原因及建议。","example":"当前状态描述","type":"string","x-vision":""},"status_name":{"description":"作业状态名称。","example":"running","type":"string","x-vision":""}},"type":"object"},"Tag":{"description":"资源标签","properties":{"key":{"description":"键","maxLength":128,"minLength":1,"type":"string"},"value":{"description":"值","maxLength":255,"minLength":1,"type":"string"}},"required":["key","value"],"type":"object"}},"description":null,"group_id":"065e44b2fe564922aa79230ec761dca6","host":"dli.cn-north-4.myhuaweicloud.com","id":"4c910117b3e64bbf88b148d3aa9c133e","info_version":"v1","method":"post","name":"CreateFlinkJarJob","parameters":{},"paths":{"/v1.0/{project_id}/streaming/flink-jobs":{"post":{"deprecated":false,"description":"用户自定义作业目前支持jar格式,运行在独享集群中。","operationId":"CreateFlinkJarJob","parameters":[{"description":"项目编号,用于资源隔离。","in":"path","name":"project_id","required":true,"type":"string","x-example":"48cc2c48765f481480c7db940d6409d1","x-order":1},{"description":"租户Token。","in":"header","name":"X-Auth-Token","required":true,"type":"string","x-example":"xxx","x-order":2,"x-vision":""},{"description":"请求参数","in":"body","name":"CreateFlinkJarJobRequestBody","required":true,"schema":{"$ref":"#/definitions/CreateFlinkJarJobRequestBody"},"x-order":3,"x-vision":""}],"responses":{"200":{"description":"OK","examples":{"application/json":{"is_success":true,"job":{"job_id":138,"status_desc":"正在运行","status_name":"running"},"message":"新建flink作业成功"}},"schema":{"$ref":"#/definitions/CreateFlinkJobResponseBody"}},"400":{"description":"Bad Request","examples":{"application/json":{"error_code":"DLI.11016","error_msg":"作业请求中传入的的obs_bucket是未授权给数据胡探索服务的OBS桶请授权该OBS桶给实时流计算服务"}},"schema":{"$ref":"#/definitions/FailResponse"}}},"summary":"新建Flink Jar作业","tags":["Flink作业-作业相关API"],"x-apiErrorCodes":"[]","x-is-registered":"Y","x-open-region-cloud":"hc,hws_hk","x-order":0,"x-support-sdk":"Y"}}},"product_short":"DLI","region_id":"cn-north-4","schemes":["HTTPS"],"security_definitions":null,"summary":"新建Flink Jar作业","tags":"Flink作业-作业相关API","uri":null,"version":"2.0"}