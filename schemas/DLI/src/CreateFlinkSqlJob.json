{"base_path":"/","components":null,"consumes":"[\"application/json\"]","definitions":{"CreateFlinkJobResponseBody":{"description":"创建作业的响应参数。","properties":{"is_success":{"description":"执行请求是否成功。“true”表示请求执行成功。","example":"true","type":"string","x-vision":""},"job":{"$ref":"#/definitions/FlinkJobStatus","description":"新建SQL作业的job模型。","x-vision":""},"message":{"description":"消息内容","example":"创建作业成功","type":"string","x-vision":""}},"type":"object"},"CreateFlinkSqlJobRequestBody":{"description":"创建SQL作业的请求参数。","properties":{"checkpoint_enabled":{"default":false,"description":"是否开启作业自动快照功能。\n开启:true;\n关闭:false;\n默认:false。","example":false,"type":"boolean","x-vision":""},"checkpoint_interval":{"default":10,"description":"快照时间间隔, 单位为秒。默认值为10。","example":10,"format":"int32","type":"integer","x-vision":""},"checkpoint_mode":{"default":1,"description":"快照模式:\n1表示ExactlyOnce:数据只被消费一次。\n2表示AtLeastOnce:数据至少被消费一次。\n默认值为1。","example":1,"format":"int32","type":"integer","x-vision":""},"cu_number":{"default":2,"description":"用户为作业选择的CU数量,默认值为2。","example":2,"format":"int32","type":"integer","x-vision":""},"desc":{"description":"作业描述。长度限制:0-2048个字符。","example":"ECS作业","maxLength":2048,"minLength":0,"type":"string","x-vision":""},"dirty_data_strategy":{"default":"“0”","description":"作业脏数据策略。\n“2”:保存;\n“1”:抛出异常;\n“0”:忽略;\n默认值为“0”。","example":"“0”","type":"string","x-vision":""},"edge_group_ids":{"description":"边缘计算组ID列表。","example":"62de1e1c-066e-48a8-a79d-f461a31b2ee1,2eb00f85-99f2-4144-bcb7-d39ff47f9002","items":{"type":"string"},"type":"array","x-open-region-cloud":"hc","x-vision":""},"flink_version":{"description":"Flink版本。当前只支持1.10和1.12。","type":"string"},"idle_state_retention":{"description":"空闲状态过期周期,单位为秒,默认值为3600。","example":100,"format":"int32","type":"integer","x-vision":""},"job_type":{"default":"flink_opensource_sql_job","description":"作业类型:flink_sql_job、flink_opensource_sql_job。\n默认值:“flink_opensource_sql_job”。\n “run_mode”为“exclusive_cluster”时,作业类型须为“flink_sql_job”或“flink_opensource_sql_job”。\n “run_mode””为“shared_cluster”时作业类型必须为”flink_sql_job“。","example":"flink_opensource_sql_job","type":"string","x-vision":""},"log_enabled":{"default":false,"description":"是否开启作业的日志上传到用户的OBS功能。默认为false。","example":false,"type":"boolean","x-vision":""},"manager_cu_number":{"description":"用户为作业选择的管理单元(jobmanager)CU数量,默认值为“1”。","format":"int32","type":"integer"},"name":{"description":"作业名称。长度限制:0-57个字符。","example":"myjob","maxLength":57,"minLength":0,"type":"string","x-vision":""},"obs_bucket":{"description":"当checkpoint_enabled==true时,该参数是用户授权保存快照的OBS路径。当log_enabled ==true时,该参数是用户授权保存作业日志的OBS路径。","example":"my_obs_bucket","type":"string","x-vision":""},"parallel_number":{"default":1,"description":"用户设置的作业并行数目。默认值为1。","example":1,"format":"int32","type":"integer","x-vision":""},"queue_name":{"description":"队列名称。长度限制:1-128个字符。","example":"queue","maxLength":128,"minLength":0,"type":"string","x-vision":""},"restart_when_exception":{"default":false,"description":"是否开启作业异常自动重启。默认为false。","example":false,"type":"boolean","x-vision":""},"resume_checkpoint":{"description":"异常重启是否从checkpoint恢复。","example":false,"type":"boolean"},"resume_max_num":{"description":"异常重试最大次数,单位:次/小时。取值范围:-1或大于0。默认值为“-1”,表示无限次数。","format":"int32","type":"integer"},"run_mode":{"default":"shared_cluster","description":"作业运行模式:\nshared_cluster:共享。\nexclusive_cluster:独享。\nedge_node:边缘节点。\n默认值为:shared_cluster","example":"shared_cluster","type":"string","x-vision":""},"runtime_config":{"description":"Flink作业运行时自定义优化参数。","type":"string"},"smn_topic":{"description":"当作业异常时,向该SMN主题推送告警信息。","example":"cs_job_exception","type":"string","x-vision":""},"sql_body":{"description":"Stream SQL语句。长度限制:1024*1024个字符。","example":"select * from source_table","type":"string","x-vision":""},"tags":{"description":"标签","items":{"$ref":"#/definitions/Tag"},"minItems":0,"type":"array"},"template_id":{"description":"模板Id。\n\n如果template_id和sql_body都不为空,优先sql_body;如果template_id不空,sql_body为空,以template_id内容填充sql_body。","example":100000,"format":"int64","type":"integer","x-vision":""},"tm_cus":{"description":"每个taskmanager的CU数,默认值为“1”。","format":"int32","type":"integer"},"tm_slot_num":{"description":"每个taskmanager的slot数,默认值为“(parallel_number*tm_cus)/(cu_number-manager_cu_number)”","format":"int32","type":"integer"},"udf_jar_url":{"description":"用户已上传到DLI资源管理系统的资源包名,用户sql作业的udf jar通过该参数传入。","example":"group/test.jar","type":"string","x-vision":""}},"required":["name"],"type":"object"},"FailResponse":{"properties":{"error_code":{"description":"错误码。","type":"string"},"error_msg":{"description":"错误描述信息。","type":"string"}},"required":["error_code","error_msg"],"type":"object"},"FlinkJobStatus":{"description":"创建作业的job模型。","properties":{"job_id":{"description":"作业Id。","example":50320,"format":"int64","type":"integer","x-vision":""},"status_desc":{"description":"当前状态描述,包含异常状态原因及建议。","example":"当前状态描述","type":"string","x-vision":""},"status_name":{"description":"作业状态名称。","example":"running","type":"string","x-vision":""}},"type":"object"},"Tag":{"description":"资源标签","properties":{"key":{"description":"键","maxLength":128,"minLength":1,"type":"string"},"value":{"description":"值","maxLength":255,"minLength":1,"type":"string"}},"required":["key","value"],"type":"object"}},"description":null,"group_id":"065e44b2fe564922aa79230ec761dca6","host":"dli.cn-north-4.myhuaweicloud.com","id":"fef84ef38a284e529e88875f7e146036","info_version":"v1","method":"post","name":"CreateFlinkSqlJob","parameters":{},"paths":{"/v1.0/{project_id}/streaming/sql-jobs":{"post":{"deprecated":false,"description":"通过POST方式,提交流式SQL作业,请求体为JSON格式。","operationId":"CreateFlinkSqlJob","parameters":[{"description":"项目编号,用于资源隔离。","in":"path","name":"project_id","required":true,"type":"string","x-example":"48cc2c48765f481480c7db940d6409d1","x-order":1},{"description":"租户Token。","in":"header","name":"X-Auth-Token","required":true,"type":"string","x-example":"xxx","x-order":2,"x-vision":""},{"description":"创建SQL作业的请求参数。","in":"body","name":"CreateFlinkSqlJobRequestBody","required":true,"schema":{"$ref":"#/definitions/CreateFlinkSqlJobRequestBody"},"x-order":3,"x-vision":""}],"responses":{"200":{"description":"OK","examples":{"application/json":{"is_success":"true","job":{"job_id":148,"status_desc":"","status_name":"job_init"},"message":"创建作业成功"}},"schema":{"$ref":"#/definitions/CreateFlinkJobResponseBody"}},"400":{"description":"Bad Request","examples":{"application/json":{"error_code":"DLI.11032","error_msg":"SMN主题不存在请用户选择一个可用SMN主题"}},"schema":{"$ref":"#/definitions/FailResponse"}}},"summary":"新建Flink SQL作业","tags":["Flink作业-作业相关API"],"x-apiErrorCodes":"[]","x-is-registered":"Y","x-open-region-cloud":"hc,hws_hk","x-order":1,"x-support-sdk":"Y"}}},"product_short":"DLI","region_id":"cn-north-4","schemes":["HTTPS"],"security_definitions":null,"summary":"新建Flink SQL作业","tags":"Flink作业-作业相关API","uri":null,"version":"2.0"}