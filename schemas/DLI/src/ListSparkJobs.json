{"base_path":"/","components":null,"consumes":"[\"application/json\"]","definitions":{"FailResponse":{"properties":{"error_code":{"description":"错误码。","type":"string"},"error_msg":{"description":"错误描述信息。","type":"string"}},"required":["error_code","error_msg"],"type":"object"},"ListSparkJobsResponseBody":{"description":"查询批处理作业列表的响应参数。","properties":{"create_time":{"description":"批处理作业的创建时间。","format":"int64","type":"integer"},"from":{"description":"起始批处理作业的索引号。","example":0,"format":"int32","type":"integer","x-vision":""},"sessions":{"description":"批处理作业信息。","items":{"$ref":"#/definitions/SparkJobSession"},"type":"array","x-vision":""},"total":{"description":"返回批处理作业的总数。","example":1,"format":"int32","type":"integer","x-vision":""}},"type":"object"},"SparkJobSession":{"description":"创建批处理作业的响应参数。","properties":{"appId":{"description":"批处理作业的后台app id。","type":"string"},"cluster_name":{"description":"会话所在队列。","example":"test","type":"string","x-vision":""},"create_time":{"description":"Batch的创建时间。是单位为“毫秒”的时间戳。","format":"int64","type":"integer","x-vision":""},"duration":{"description":"作业运行时长,单位毫秒。","format":"int64","type":"integer"},"id":{"description":"Batch作业的id。","example":"80ceaaff-3cfc-4162-a56f-70031ea4fa91","type":"string","x-vision":""},"image":{"description":"自定义镜像。格式为:组织名/镜像名:镜像版本。","type":"string"},"kind":{"description":"批处理作业类型,只支持spark类型参数。","type":"string"},"log":{"description":"显示当前Batch作业的最后10条记录。","items":{"type":"string"},"type":"array","x-vision":""},"name":{"description":"创建时用户指定的批处理名称,不能超过128个字符。","type":"string"},"owner":{"description":"批处理作业所属用户","type":"string"},"proxyUser":{"description":"批处理作业所属代理用户(资源租户)。","type":"string"},"queue":{"description":"用于指定队列,填写已创建DLI的队列名","type":"string"},"req_body":{"description":"请求参数详情","type":"string"},"sc_type":{"description":"计算资源类型。用户自定义时返回CUSTOMIZED。","example":"A","type":"string","x-vision":""},"state":{"description":"Batch作业的状态。包括: starting:正在启动;running:正在执行任务;dead:session已退出;success:session停止成功;recovering:正在恢复。","example":" starting","type":"string","x-vision":""},"update_time":{"description":"更新时间","format":"int64","type":"integer"}},"type":"object"}},"description":null,"group_id":"065e44b2fe564922aa79230ec761dca6","host":"dli.cn-north-4.myhuaweicloud.com","id":"a78f9683800c41a1b9956abe012bf4fc","info_version":"v1","method":"get","name":"ListSparkJobs","parameters":{},"paths":{"/v2.0/{project_id}/batches":{"get":{"deprecated":false,"description":"该API用于查询Project下某队列批处理作业的列表。","operationId":"ListSparkJobs","parameters":[{"description":"项目编号,用于资源隔离。","in":"path","name":"project_id","required":true,"type":"string","x-example":"48cc2c48765f481480c7db940d6409d1","x-order":1},{"description":"DLI队列名称,不填写则获取当前Project下所有批处理作业(不推荐使用)。","in":"query","name":"cluster_name","required":false,"type":"string","x-example":"cluster1","x-order":2,"x-vision":""},{"description":"用于查询开始时间在该时间点之前的作业。时间格式为unix时间戳,单位:毫秒。","format":"int64","in":"query","name":"end","required":false,"type":"integer","x-example":156789546456,"x-order":10},{"description":"起始批处理作业的索引号,默认从0开始。","format":"int32","in":"query","name":"from","required":false,"type":"integer","x-example":0,"x-order":5,"x-vision":""},{"description":"批处理作业的名称。","in":"query","name":"job_name","required":false,"type":"string","x-order":4},{"in":"query","name":"job-id","required":false,"type":"string","x-order":4},{"description":"指定作业排序方式,默认为CREATE_TIME_DESC(作业提交时间降序),支持DURATION_DESC(作业运行时长降序)、DURATION_ASC(作业运行时长升序)、CREATE_TIME_DESC(作业提交时间降序)、CREATE_TIME_ASC(作业提交时间升序)四种排序方式。","in":"query","name":"order","required":false,"type":"string","x-order":11},{"in":"query","name":"queue_name","required":false,"type":"string","x-order":3},{"description":"查询批处理作业的数量。","format":"int32","in":"query","name":"size","required":false,"type":"integer","x-example":1,"x-order":6,"x-vision":""},{"description":"用于查询开始时间在该时间点之后的作业。时间格式为unix时间戳,单位:毫秒。","format":"int64","in":"query","name":"start","required":false,"type":"integer","x-example":156456784655,"x-order":9},{"in":"query","name":"state","required":false,"type":"string","x-order":7},{"description":"从IAM服务获取的用户Token。","in":"header","name":"X-Auth-Token","required":true,"type":"string","x-example":"xxx","x-order":8,"x-vision":""}],"responses":{"200":{"description":"OK","examples":{"application/json":{"from":0,"sessions":[{"appId":"XX","cluster_name":"XX","create_time":1572260764758,"duration":1185498,"id":"XX","kind":"XX","log":[],"name":"test","owner":"XX","proxyUser":"XX","queue":"XX","sc_type":"CUSTOMIZED","state":"dead","update_time":1572261950256}],"total":1}},"schema":{"$ref":"#/definitions/ListSparkJobsResponseBody"}},"400":{"description":"Bad Request","schema":{"$ref":"#/definitions/FailResponse"}},"500":{"description":"Internal Server Error"}},"summary":"查询批处理作业列表","tags":["Spark作业-作业相关API"],"x-apiErrorCodes":[{"errorCode":"DLI.0001","errorDescription":"","errorDescriptionEn":"","errorMessage":"Parameter check errors occur.","httpStatus":"400","solution":"","solutionEn":""},{"errorCode":"DLI.0002","errorDescription":"","errorDescriptionEn":"","errorMessage":"The object does not exist.","httpStatus":"400","solution":"","solutionEn":""},{"errorCode":"DLI.0003","errorDescription":"","errorDescriptionEn":"","errorMessage":"SQL permission verification fails.","httpStatus":"400","solution":"","solutionEn":""},{"errorCode":"DLI.0004","errorDescription":"","errorDescriptionEn":"","errorMessage":"SQL syntax parsing errors occur.","httpStatus":"400","solution":"","solutionEn":""},{"errorCode":"DLI.0005","errorDescription":"","errorDescriptionEn":"","errorMessage":"SQL semantics parsing errors occur.","httpStatus":"400","solution":"","solutionEn":""},{"errorCode":"DLI.0006","errorDescription":"","errorDescriptionEn":"","errorMessage":"The object exists.","httpStatus":"400","solution":"","solutionEn":""},{"errorCode":"DLI.0007","errorDescription":"","errorDescriptionEn":"","errorMessage":"Feature not supported.","httpStatus":"400","solution":"","solutionEn":""},{"errorCode":"DLI.0008","errorDescription":"","errorDescriptionEn":"","errorMessage":"Metadata errors occur.","httpStatus":"400","solution":"","solutionEn":""},{"errorCode":"DLI.0009","errorDescription":"","errorDescriptionEn":"","errorMessage":"System restrictions","httpStatus":"400","solution":"","solutionEn":""},{"errorCode":"DLI.0011","errorDescription":"","errorDescriptionEn":"","errorMessage":"The file permission check fails.","httpStatus":"400","solution":"","solutionEn":""},{"errorCode":"DLI.0012","errorDescription":"","errorDescriptionEn":"","errorMessage":"Resource objects are unavailable.","httpStatus":"400","solution":"","solutionEn":""},{"errorCode":"DLI.0016","errorDescription":"","errorDescriptionEn":"","errorMessage":"The identity and role are incorrect.","httpStatus":"400","solution":"","solutionEn":""},{"errorCode":"DLI.0018","errorDescription":"","errorDescriptionEn":"","errorMessage":"Data conversion errors occur.","httpStatus":"400","solution":"","solutionEn":""},{"errorCode":"DLI.0019","errorDescription":"","errorDescriptionEn":"","errorMessage":"The task times out.","httpStatus":"400","solution":"","solutionEn":""},{"errorCode":"DLI.0100","errorDescription":"","errorDescriptionEn":"","errorMessage":"The result expires.","httpStatus":"400","solution":"","solutionEn":""},{"errorCode":"DLI.0013","errorDescription":"","errorDescriptionEn":"","errorMessage":"User authentication errors occur.","httpStatus":"401","solution":"","solutionEn":""},{"errorCode":"DLI.0014","errorDescription":"","errorDescriptionEn":"","errorMessage":"Service authentication errors occur.","httpStatus":"401","solution":"","solutionEn":""},{"errorCode":"DLI.0023","errorDescription":"","errorDescriptionEn":"","errorMessage":"No related resources were found.","httpStatus":"404","solution":"","solutionEn":""},{"errorCode":"DLI.0999","errorDescription":"","errorDescriptionEn":"","errorMessage":"Server-side errors occur.","httpStatus":"500","solution":"","solutionEn":""}],"x-is-registered":"Y","x-open-region-cloud":"hc,hws_hk","x-order":3,"x-support-sdk":"Y"}}},"product_short":"DLI","region_id":"cn-north-4","schemes":["HTTPS"],"security_definitions":null,"summary":"查询批处理作业列表","tags":"Spark作业-作业相关API","uri":null,"version":"2.0"}