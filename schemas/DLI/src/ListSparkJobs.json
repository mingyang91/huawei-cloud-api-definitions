{"base_path":"/","components":null,"consumes":"[\"application/json\"]","definitions":{"FailResponse":{"properties":{"error_code":{"description":"错误码。","type":"string"},"error_msg":{"description":"错误描述信息。","type":"string"}},"required":["error_code","error_msg"],"type":"object"},"ListSparkJobsResponseBody":{"description":"查询批处理作业列表的响应参数。","properties":{"create_time":{"description":"参数解释:   批处理作业的创建时间 示例: 1747169165821\n约束限制:  无\n取值范围: 大于等于0的整数\n默认取值: 无","example":1747169165821,"format":"int64","type":"integer"},"from":{"description":"参数解释:   起始批处理作业的索引号 示例: 0\n约束限制:  无\n取值范围: 无\n默认取值: 无","example":0,"format":"int32","type":"integer","x-vision":""},"sessions":{"description":"批处理作业信息。","items":{"$ref":"#/definitions/SparkJob"},"type":"array","x-vision":""},"total":{"description":"参数解释:   返回批处理作业的总数 示例: 1\n约束限制:  无\n取值范围: 大于等于0的整数\n默认取值: 无","example":1,"format":"int32","type":"integer","x-vision":""}},"type":"object"},"SparkJob":{"description":"创建批处理作业的响应参数。","properties":{"appId":{"description":"参数解释:  批处理作业的后台app id 示例: batch-session-1f49b734-757a-419c-9519-7754520cb03c:31309\n约束限制:  无\n取值范围: 无\n默认取值: 无","example":"batch-session-1f49b734-757a-419c-9519-7754520cb03c:31309","type":"string"},"cluster_name":{"description":"参数解释:  会话所在队列 示例: test\n约束限制:  无\n取值范围: 无\n默认取值: 无","example":"test","type":"string","x-vision":""},"create_time":{"description":"参数解释:  Batch的创建时间。是单位为“毫秒”的时间戳 示例: 1747169165821\n约束限制:  无\n取值范围: 大于等于0的整数\n默认取值: 无","example":1747169165821,"format":"int64","type":"integer","x-vision":""},"duration":{"description":"参数解释:   作业运行时长,单位毫秒 示例: 141079\n约束限制:  无\n取值范围: 大于等于0的整数\n默认取值: 无","example":141079,"format":"int64","type":"integer"},"id":{"description":"参数解释:  Batch作业的id。 示例: 80ceaaff-3cfc-4162-a56f-70031ea4fa91\n约束限制:  无\n取值范围: 无\n默认取值: 无","example":"80ceaaff-3cfc-4162-a56f-70031ea4fa91","type":"string","x-vision":""},"image":{"description":"参数解释:   自定义镜像。格式为:组织名/镜像名:镜像版本 示例: ceshi/spark_general-x86_64:3.3.1-2.3.8.1020240906885119450448000\n约束限制:  格式为: 组织名/镜像名:镜像版本的字符串\n取值范围: 无\n默认取值: 无","example":"ceshi/spark_general-x86_64:3.3.1-2.3.8.1020240906885119450448000","type":"string"},"kind":{"description":"参数解释:   批处理作业类型,只支持spark类型参数 示例: spark\n约束限制:  无\n取值范围: spark\n默认取值: 无","example":"spark","type":"string"},"log":{"description":"参数解释:  显示当前Batch作业的最后10条记录\n约束限制:  无\n取值范围: 无\n默认取值: 无","items":{"type":"string"},"type":"array","x-vision":""},"name":{"description":"参数解释:  创建时用户指定的批处理名称,不能超过128个字符 示例: test_pyFiles\n约束限制:  无\n取值范围: 无\n默认取值: 无","example":"test_pyFiles","type":"string"},"owner":{"description":"参数解释:  批处理作业所属用户 示例: ei_dlics_d00352431\n约束限制:  无\n取值范围: 无\n默认取值: 无","example":"ei_dlics_d00352431","type":"string"},"proxyUser":{"description":"参数解释:  批处理作业所属代理用户(资源租户) 示例: tenant1\n约束限制:  无\n取值范围: 无\n默认取值: 无","example":"tenant1","type":"string"},"queue":{"description":"参数解释:   用于指定队列,填写已创建DLI的队列名 示例: gen_native\n约束限制:  无\n取值范围: 无\n默认取值: 无","example":"gen_native","type":"string"},"req_body":{"description":"参数解释:   请求参数详情 示例: {\\\"jars\\\":[\\\"spark-examples_2.11-2.4.5-h0.cbu.dli.300.20240725.r1.jar\\\"],\\\"pyFiles\\\":[],\\\"files\\\":[],\\\"modelFiles\\\":[],\\\"resources\\\":[],\\\"modules\\\":[],\\\"groups\\\":[],\\\"archives\\\":[],\\\"queue\\\":\\\"gen0218\\\",\\\"name\\\":\\\"\\\",\\\"conf\\\":{},\\\"execution_agency_urn\\\":\\\"agency\\\",\\\"file\\\":\\\"obs://dli-wzy/package/job/spark/longrunning.py\\\",\\\"args\\\":[],\\\"className\\\":\\\"\\\",\\\"autoRecovery\\\":false,\\\"minRecoveryDelayTime\\\":10000,\\\"maxRetryTimes\\\":20,\\\"obs_bucket\\\":\\\"rain3\\\",\\\"image\\\":\\\"ceshi/spark_general-x86_64:3.3.1-2.3.8.1020240906885119450448000\\\",\\\"feature\\\":\\\"custom\\\",\\\"spark_version\\\":\\\"3.3.1\\\"}\n约束限制:  符合Json格式的字符串\n取值范围: 无\n默认取值: 无","example":"{\\\"jars\\\":[\\\"spark-examples_2.11-2.4.5-h0.cbu.dli.300.20240725.r1.jar\\\"],\\\"pyFiles\\\":[],\\\"files\\\":[],\\\"modelFiles\\\":[],\\\"resources\\\":[],\\\"modules\\\":[],\\\"groups\\\":[],\\\"archives\\\":[],\\\"queue\\\":\\\"gen0218\\\",\\\"name\\\":\\\"\\\",\\\"conf\\\":{},\\\"execution_agency_urn\\\":\\\"agency\\\",\\\"file\\\":\\\"obs://dli-wzy/package/job/spark/longrunning.py\\\",\\\"args\\\":[],\\\"className\\\":\\\"\\\",\\\"autoRecovery\\\":false,\\\"minRecoveryDelayTime\\\":10000,\\\"maxRetryTimes\\\":20,\\\"obs_bucket\\\":\\\"rain3\\\",\\\"image\\\":\\\"ceshi/spark_general-x86_64:3.3.1-2.3.8.1020240906885119450448000\\\",\\\"feature\\\":\\\"custom\\\",\\\"spark_version\\\":\\\"3.3.1\\\"}","type":"string"},"sc_type":{"description":"参数解释:   计算资源类型,目前可接受参数A, B, C。如果不指定,则按最小类型创建。 示例: A\n约束限制:  无\n取值范围: A:物理资源:8核32G内存,driverCores:2;executorCores:1;driverMemory:7G;executorMemory:4G;numExecutor:6。 B:16核64G内存,2,2,7G,8G,7。 C:32核128G内存,4,2,15G,8G,14。\n默认取值: 无","example":"A","type":"string","x-vision":""},"state":{"description":"参数解释:  Batch作业的状态 示例: starting\n约束限制:  无\n取值范围: starting:正在启动;running:正在执行任务;dead:session已退出;success:session停止成功;recovering:正在恢复\n默认取值: 无","example":"starting","type":"string","x-vision":""},"update_time":{"description":"参数解释:   更新时间 示例: 1739867996988\n约束限制:  无\n取值范围: 大于等于0的整数\n默认取值: 无","example":1739867996988,"format":"int64","type":"integer"}},"type":"object"}},"description":null,"group_id":"065e44b2fe564922aa79230ec761dca6","host":"dli.cn-north-4.myhuaweicloud.com","id":"a78f9683800c41a1b9956abe012bf4fc","info_version":"v1","method":"get","name":"ListSparkJobs","parameters":{},"paths":{"/v2.0/{project_id}/batches":{"get":{"deprecated":false,"description":"该API用于查询Project下某队列批处理作业的列表。","operationId":"ListSparkJobs","parameters":[{"description":"参数解释:   项目编号,用于资源隔离 示例: 48cc2c48765f481480c7db940d6409d1\n约束限制:  无\n取值范围: 无\n默认取值: 无","in":"path","name":"project_id","required":true,"type":"string","x-example":"48cc2c48765f481480c7db940d6409d1","x-order":1},{"description":"参数解释:   DLI队列名称,不填写则获取当前Project下所有批处理作业(不推荐使用) 示例: cluster1\n约束限制:  匹配正则表达式'^(?!_)(?![0-9]+$)[A-Za-z0-9_]*$'的字符串\n取值范围: 无\n默认取值: 无","in":"query","name":"cluster_name","pattern":"^(?!_)(?![0-9]+$)[A-Za-z0-9_]*$","required":false,"type":"string","x-example":"cluster1","x-order":2,"x-vision":""},{"description":"参数解释:   用于查询开始时间在该时间点之前的作业。时间格式为unix时间戳,单位:毫秒 示例: 156789546456\n约束限制:  无\n取值范围: 大于等于0的整数\n默认取值: 无","format":"int64","in":"query","name":"end","required":false,"type":"integer","x-example":156789546456,"x-order":10},{"description":"参数解释:   起始批处理作业的索引号,默认从0开始 示例: 0\n约束限制:  无\n取值范围: 大于等于0的整数\n默认取值: 无","format":"int32","in":"query","name":"from","required":false,"type":"integer","x-example":0,"x-order":5,"x-vision":""},{"description":"参数解释:   批处理作业的名称 示例: dli_test\n约束限制:  无\n取值范围: 无\n默认取值: 无","in":"query","name":"job_name","required":false,"type":"string","x-example":"dli_test","x-order":4},{"description":"参数解释:   批处理作业的ID 示例: 03923a72-5ace-466a-a573-e8c7b08b8cf3\n约束限制:  匹配正则表达式'^[A-Fa-f0-9_-]*$'的字符串\n取值范围: 无\n默认取值: 无","in":"query","name":"job-id","pattern":"^[A-Fa-f0-9_-]*$","required":false,"type":"string","x-example":"03923a72-5ace-466a-a573-e8c7b08b8cf3","x-order":4},{"description":"参数解释:   指定作业排序方式 示例: DURATION_DESC\n约束限制:  无\n取值范围: DURATION_DESC(作业运行时长降序) DURATION_ASC(作业运行时长升序) CREATE_TIME_DESC(作业提交时间降序) CREATE_TIME_ASC(作业提交时间升序)\n默认取值: 无","in":"query","name":"order","required":false,"type":"string","x-example":"DURATION_DESC","x-order":11},{"description":"参数解释:   队列名称 示例: 03923a72-5ace-466a-a573-e8c7b08b8cf3\n约束限制:  匹配正则表达式'^[A-Fa-f0-9_-]*$'的字符串\n取值范围: 无\n默认取值: 无","in":"query","name":"queue_name","pattern":"^(?!_)(?![0-9]+$)[A-Za-z0-9_]*$","required":false,"type":"string","x-example":"general_0509","x-order":3},{"default":100,"description":"参数解释:   查询批处理作业的数量 示例: 1\n约束限制:  无\n取值范围: 无\n默认取值: 100","format":"int32","in":"query","name":"size","required":false,"type":"integer","x-example":1,"x-order":6,"x-vision":""},{"description":"参数解释:   用于查询开始时间在该时间点之后的作业。时间格式为unix时间戳,单位:毫秒 示例: 156456784655\n约束限制:  无\n取值范围: 大于等于0的整数\n默认取值: 无","format":"int64","in":"query","name":"start","required":false,"type":"integer","x-example":156456784655,"x-order":9},{"description":"参数解释:   批处理作业的状态 示例: success\n约束限制:  无\n取值范围: starting(批处理作业正在启动) running(批处理作业正在执行任务) dead(批处理作业已退出) success(批处理作业执行成功) recovering(批处理作业正在恢复)\n默认取值: 无","enum":["starting","running","dead","success","recovering"],"in":"query","name":"state","required":false,"type":"string","x-example":"success","x-order":7},{"description":"参数解释:   从IAM服务获取的用户Token\n约束限制:  无\n取值范围: 无\n默认取值: 无","in":"header","name":"X-Auth-Token","required":true,"type":"string","x-example":"xxx","x-order":8,"x-vision":""}],"responses":{"200":{"description":"OK","examples":{"application/json":{"from":0,"sessions":[{"appId":"XX","cluster_name":"XX","create_time":1572260764758,"duration":1185498,"id":"XX","kind":"XX","log":[],"name":"test","owner":"XX","proxyUser":"XX","queue":"XX","sc_type":"CUSTOMIZED","state":"dead","update_time":1572261950256}],"total":1}},"schema":{"$ref":"#/definitions/ListSparkJobsResponseBody"}},"400":{"description":"Bad Request","schema":{"$ref":"#/definitions/FailResponse"}},"500":{"description":"Internal Server Error"}},"summary":"查询批处理作业列表","tags":["Spark作业-作业相关API"],"x-apiErrorCodes":[{"errorCode":"DLI.0001","errorDescription":"","errorDescriptionEn":"","errorMessage":"Parameter check errors occur.","httpStatus":"400","solution":"","solutionEn":""},{"errorCode":"DLI.0002","errorDescription":"","errorDescriptionEn":"","errorMessage":"The object does not exist.","httpStatus":"400","solution":"","solutionEn":""},{"errorCode":"DLI.0003","errorDescription":"","errorDescriptionEn":"","errorMessage":"SQL permission verification fails.","httpStatus":"400","solution":"","solutionEn":""},{"errorCode":"DLI.0004","errorDescription":"","errorDescriptionEn":"","errorMessage":"SQL syntax parsing errors occur.","httpStatus":"400","solution":"","solutionEn":""},{"errorCode":"DLI.0005","errorDescription":"","errorDescriptionEn":"","errorMessage":"SQL semantics parsing errors occur.","httpStatus":"400","solution":"","solutionEn":""},{"errorCode":"DLI.0006","errorDescription":"","errorDescriptionEn":"","errorMessage":"The object exists.","httpStatus":"400","solution":"","solutionEn":""},{"errorCode":"DLI.0007","errorDescription":"","errorDescriptionEn":"","errorMessage":"Feature not supported.","httpStatus":"400","solution":"","solutionEn":""},{"errorCode":"DLI.0008","errorDescription":"","errorDescriptionEn":"","errorMessage":"Metadata errors occur.","httpStatus":"400","solution":"","solutionEn":""},{"errorCode":"DLI.0009","errorDescription":"","errorDescriptionEn":"","errorMessage":"System restrictions","httpStatus":"400","solution":"","solutionEn":""},{"errorCode":"DLI.0011","errorDescription":"","errorDescriptionEn":"","errorMessage":"The file permission check fails.","httpStatus":"400","solution":"","solutionEn":""},{"errorCode":"DLI.0012","errorDescription":"","errorDescriptionEn":"","errorMessage":"Resource objects are unavailable.","httpStatus":"400","solution":"","solutionEn":""},{"errorCode":"DLI.0016","errorDescription":"","errorDescriptionEn":"","errorMessage":"The identity and role are incorrect.","httpStatus":"400","solution":"","solutionEn":""},{"errorCode":"DLI.0018","errorDescription":"","errorDescriptionEn":"","errorMessage":"Data conversion errors occur.","httpStatus":"400","solution":"","solutionEn":""},{"errorCode":"DLI.0019","errorDescription":"","errorDescriptionEn":"","errorMessage":"The task times out.","httpStatus":"400","solution":"","solutionEn":""},{"errorCode":"DLI.0100","errorDescription":"","errorDescriptionEn":"","errorMessage":"The result expires.","httpStatus":"400","solution":"","solutionEn":""},{"errorCode":"DLI.0013","errorDescription":"","errorDescriptionEn":"","errorMessage":"User authentication errors occur.","httpStatus":"401","solution":"","solutionEn":""},{"errorCode":"DLI.0014","errorDescription":"","errorDescriptionEn":"","errorMessage":"Service authentication errors occur.","httpStatus":"401","solution":"","solutionEn":""},{"errorCode":"DLI.0023","errorDescription":"","errorDescriptionEn":"","errorMessage":"No related resources were found.","httpStatus":"404","solution":"","solutionEn":""},{"errorCode":"DLI.0999","errorDescription":"","errorDescriptionEn":"","errorMessage":"Server-side errors occur.","httpStatus":"500","solution":"","solutionEn":""}],"x-is-registered":"Y","x-open-region-cloud":"hc,hws_hk","x-order":3,"x-support-sdk":"Y"}}},"product_short":"DLI","region_id":"cn-north-4","schemes":["HTTPS"],"security_definitions":null,"summary":"查询批处理作业列表","tags":"Spark作业-作业相关API","uri":null,"version":"2.0"}