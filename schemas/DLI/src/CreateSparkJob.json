{"base_path":"/","components":null,"consumes":"[\"application/json\"]","definitions":{"CreateSparkJobRequestBody":{"description":"创建批处理作业请求body体。","properties":{"args":{"description":"参数解释:   传入主类的参数 示例: -o result.txt\n约束限制:  无\n取值范围: 无\n默认取值: 无","example":"-o result.txt","items":{"type":"string"},"type":"array","x-vision":""},"auto_recovery":{"description":"参数解释:   是否开启重试功能,如果开启,可在Spark作业异常失败后自动重试 示例: false\n约束限制:  无\n取值范围: true,false\n默认取值: false","example":false,"type":"boolean"},"catalog_name":{"description":"访问元数据时,需要将该参数配置为dli。","example":"dli","type":"string"},"className":{"description":"参数解释:   批处理作业的Java/Spark主类 示例: org.apache.spark.examples.SparkPi\n约束限制:  无\n取值范围: 无\n默认取值: 无","example":"org.apache.spark.examples.SparkPi","type":"string","x-vision":""},"cluster_name":{"description":"参数解释:   用于指定队列,填写已创建DLI的队列名 示例: test\n约束限制:  无\n取值范围: 无\n默认取值: 无","example":"test","type":"string","x-vision":""},"conf":{"additionalProperties":{"type":"object"},"description":"参数解释:   batch配置项\n约束限制:  无\n取值范围: 无\n默认取值: 无","type":"object","x-vision":""},"driverCores":{"description":"参数解释:   Spark应用Driver的CPU核数。该配置项会替换sc_type中对应的默认参数 示例: 8\n约束限制:  无\n取值范围: 大于等于0的整数\n默认取值: 无","example":8,"format":"int32","type":"integer","x-vision":""},"driverMemory":{"description":"参数解释:   Spark应用的Driver内存, 参数配置例如2G,2048M。该配置项会替换“sc_type”中对应的默认参数,使用时必需带单位,否则会启动失败 示例: 2G\n约束限制:  无\n取值范围: 无\n默认取值: 无","example":"2G","type":"string","x-vision":""},"executorCores":{"description":"参数解释:   Spark应用每个Executor的CPU核数。该配置项会替换sc_type中对应的默认参数 示例: 8\n约束限制:  无\n取值范围: 大于等于0的整数\n默认取值: 无","example":8,"format":"int32","type":"integer","x-vision":""},"executorMemory":{"description":"参数解释:   Spark应用的Executor内存, 参数配置例如2G,2048M。该配置项会替换“sc_type”中对应的默认参数,使用时必需带单位,否则会启动失败。 示例: 2G\n约束限制:  无\n取值范围: 无\n默认取值: 无","example":"2G","type":"string","x-vision":""},"feature":{"description":"参数解释:   作业特性,作业运行在vm队列上支持basic,在container队列上支持basic、ai、custom,其中填写custom时需要同时填写image参数 示例: basic\n约束限制:  无\n取值范围: basic(基础型) ai(AI增强型) custom(自定义型)\n默认取值: 无","enum":["basic","ai","custom"],"example":"basic","type":"string"},"file":{"description":"参数解释:   用户已上传到DLI资源管理系统的类型为jar的资源包名 示例: batchTest/spark-examples_2.11-2.1.0.luxor.jar\n约束限制:  无\n取值范围: 无\n默认取值: 无","example":"batchTest/spark-examples_2.11-2.1.0.luxor.jar","type":"string","x-vision":""},"files":{"description":"参数解释:   用户已上传到DLI资源管理系统的类型为file的资源包名 示例: [\"count.txt\"]\n约束限制:  无\n取值范围: 无\n默认取值: 无","example":"[\"count.txt\"]","items":{"type":"string"},"type":"array","x-vision":""},"groups":{"description":"JSON对象列表,填写用户组类型资源,格式详见请求示例。resources中的name未进行type校验,只要此分组中存在这个名字的包即可。","items":{"$ref":"#/definitions/JobResourcesGroup"},"type":"array","x-vision":""},"image":{"description":"参数解释:   自定义镜像。格式为:组织名/镜像名:镜像版本。当用户设置“feature”为“custom”时,该参数生效。用户可通过与“feature”参数配合使用,指定作业运行使用自定义的Spark镜像。关于如何使用自定义镜像,请参考《数据湖探索用户指南》 示例: ceshi/spark_general-x86_64:3.3.1-2.3.7.1720240718867424736954752.tensorflow \n约束限制:  无\n取值范围: 无\n默认取值: 无","example":"ceshi/spark_general-x86_64:3.3.1-2.3.7.1720240718867424736954752.tensorflow","type":"string"},"jars":{"description":"参数解释:   用户已上传到DLI资源管理系统的类型为jar的程序包名。也支持指定OBS路径,例如:obs://桶名/包名 示例: obs://cwk/jars/com/example/demo\n约束限制:  无\n取值范围: 无\n默认取值: 无","example":"obs://cwk/jars/com/example/demo","items":{"type":"string"},"type":"array","x-vision":""},"max_retry_times":{"description":"参数解释:   最大重试次数 示例: 100\n约束限制:  无\n取值范围: 大于等于0的整数\n默认取值: false","example":100,"format":"int32","type":"integer"},"modules":{"description":"参数解释:   依赖的系统资源模块名,具体模块名可通过查询所有资源包接口查看。 DLI系统提供了用于执行跨源作业的依赖模块,各个不同的服务对应的模块列表如下: CloudTable/MRS HBase: sys.datasource.hbase CloudTable/MRS OpenTSDB: sys.datasource.opentsdb RDS MySQL: sys.datasource.rds RDS PostGre: 不需要选 DWS: 不需要选 CSS: sys.datasource.css 示例: [\"sys.datasource.hbase\",\"sys.datasource.rds\"]\n约束限制:  无\n取值范围: 无\n默认取值: 无","items":{"type":"string"},"type":"array","x-vision":""},"name":{"description":"参数解释:   创建时用户指定的批处理名称 示例: TestDemo4\n约束限制:  不超过128个字符的字符串\n取值范围: 无\n默认取值: 无","example":"TestDemo4","maxLength":128,"type":"string","x-vision":""},"numExecutors":{"description":"参数解释:   Spark应用Executor的个数。该配置项会替换sc_type中对应的默认参数 示例: 6\n约束限制:  无\n取值范围: 大于等于0的整数\n默认取值: 无","example":6,"format":"int32","type":"integer","x-vision":""},"obs_bucket":{"description":"参数解释:   保存Spark作业的obs桶,需要保存作业时配置该参数 示例: rain3\n约束限制:  无\n取值范围: 无\n默认取值: 无","example":"rain3","type":"string"},"pyFiles":{"description":"参数解释:   用户已上传到DLI资源管理系统的类型为pyFile的资源包名。也支持指定OBS路径,例如:obs://桶名/包名 示例: obs://cwk/py/com/example/demo\n约束限制:  无\n取值范围: 无\n默认取值: 无","example":"obs://cwk/py/com/example/demo","items":{"type":"string"},"type":"array","x-vision":""},"queue":{"description":"参数解释:   用于指定队列,填写已创建DLI的队列名 示例: gen_native\n约束限制:  无\n取值范围: 无\n默认取值: 无","example":"gen_native","type":"string"},"resources":{"description":"JSON对象列表,填写用户已上传到队列的类型为JSON的资源包名和类型。","items":{"$ref":"#/definitions/JobResource"},"type":"array","x-vision":""},"sc_type":{"description":"参数解释:   计算资源类型,目前可接受参数A, B, C。如果不指定,则按最小类型创建。 示例: A\n约束限制:  无\n取值范围: A:物理资源:8核32G内存,driverCores:2;executorCores:1;driverMemory:7G;executorMemory:4G;numExecutor:6。 B:16核64G内存,2,2,7G,8G,7。 C:32核128G内存,4,2,15G,8G,14。\n默认取值: 无","example":"A","type":"string","x-vision":""},"spark_version":{"description":"参数解释:   作业使用spark组件的版本号,在feature为“basic”或“ai”时填写,若不填写,则使用默认的spark组件版本号2.3.2 示例: 2.3.2\n约束限制:  无\n取值范围: 无\n默认取值: 无","example":"2.3.2","type":"string"}},"required":["file","className"],"type":"object"},"CreateSparkJobResponseBody":{"description":"创建批处理作业的响应参数。","properties":{"appId":{"description":"参数解释:   批处理作业的后台app id 示例: batch-session-ca2a4042-0db9-45ab-bc7f-ae6a56846348:30671\n约束限制:  无\n取值范围: 无\n默认取值: 无","example":"batch-session-ca2a4042-0db9-45ab-bc7f-ae6a56846348:30671","type":"string"},"cluster_name":{"description":"参数解释:   会话所在队列\n约束限制:  无\n取值范围: 无\n默认取值: 无","example":"test","type":"string","x-vision":""},"create_time":{"description":"参数解释:   Batch的创建时间。是单位为“毫秒”的时间戳\n约束限制:  无\n取值范围: 大于等于0的整数\n默认取值: 无","example":1739864574559,"format":"int64","type":"integer","x-vision":""},"duration":{"description":"参数解释:  作业运行时长,单位毫秒 示例: 213038\n约束限制:  无\n取值范围: 大于等于0的整数\n默认取值: 无","example":213038,"format":"int64","type":"integer"},"id":{"description":"参数解释:   Batch作业的id 示例: 80ceaaff-3cfc-4162-a56f-70031ea4fa91\n约束限制:  无\n取值范围: 无\n默认取值: 无","example":"80ceaaff-3cfc-4162-a56f-70031ea4fa91","type":"string","x-vision":""},"image":{"description":"参数解释:  自定义镜像。格式为:组织名/镜像名:镜像版本 示例: ceshi/spark_general-x86_64:3.3.1-2.3.7.1720240718867424736954752.tensorflow\n约束限制:  无\n取值范围: 无\n默认取值: 无","example":"ceshi/spark_general-x86_64:3.3.1-2.3.7.1720240718867424736954752.tensorflow","type":"string"},"kind":{"description":"参数解释:  批处理作业类型,只支持spark类型参数 示例: spark\n约束限制:  无\n取值范围: spark\n默认取值: 无","example":"spark","type":"string"},"log":{"description":"参数解释:   显示当前Batch作业的最后10条记录\n约束限制:  无\n取值范围: 无\n默认取值: 无","items":{"type":"string"},"type":"array","x-vision":""},"name":{"description":"参数解释:   创建时用户指定的批处理名称,不能超过128个字符 示例: test_spark\n约束限制:  不超过128个字符的字符串\n取值范围: 无\n默认取值: 无","example":"test_spark","maxLength":128,"type":"string"},"owner":{"description":"参数解释:   批处理作业所属用户 示例: ei_dlics_d00352431\n约束限制:  无\n取值范围: 无\n默认取值: 无","example":"ei_dlics_d00352431","type":"string"},"proxyUser":{"description":"参数解释:  批处理作业所属代理用户(资源租户) 示例: tenant1\n约束限制:  无\n取值范围: 无\n默认取值: 无","example":"tenant1","type":"string"},"queue":{"description":"参数解释:  用于指定队列,填写已创建DLI的队列名 示例: gen0218\n约束限制:  无\n取值范围: 无\n默认取值: 无","example":"gen0218","type":"string"},"sc_type":{"description":"参数解释: 计算资源类型,目前可接受参数A, B, C。如果不指定,则按最小类型创建。 示例: A\n约束限制: 无\n取值范围: A:物理资源:8核32G内存,driverCores:2;executorCores:1;driverMemory:7G;executorMemory:4G;numExecutor:6 B:16核64G内存,2,2,7G,8G,7 C:32核128G内存,4,2,15G,8G,14\n默认取值: 无","example":"A","type":"string","x-vision":""},"state":{"description":"参数解释:   Batch作业的状态 示例: starting\n约束限制:  无\n取值范围: starting:正在启动 running:正在执行任务 dead:session已退出 success:session停止成功 recovering:正在恢复\n默认取值: 无","example":" starting","type":"string","x-vision":""},"update_time":{"description":"参数解释:  批处理作业的更新时间。是单位为“毫秒”的时间戳 示例: 1739867779341\n约束限制:  无\n取值范围: 大于等于0的整数\n默认取值: 无","example":1739867779341,"format":"int64","type":"integer"}},"type":"object"},"FailResponse":{"properties":{"error_code":{"description":"错误码。","type":"string"},"error_msg":{"description":"错误描述信息。","type":"string"}},"required":["error_code","error_msg"],"type":"object"},"JobResource":{"description":"创建会话请求参数resources的元素。","properties":{"name":{"description":"参数解释:   资源名称 示例: group.tesddws/gsjdbc3.jar\n约束限制:  无\n取值范围: 无\n默认取值: 无","example":"group.tesddws/gsjdbc3.jar","type":"string","x-vision":""},"type":{"description":"参数解释:   资源类型 示例: jar\n约束限制:  无\n取值范围: 无\n默认取值: 无","example":"jar","type":"string","x-vision":""}},"type":"object"},"JobResourcesGroup":{"description":"创建会话请求参数groups的元素。","properties":{"name":{"description":"参数解释:   用户组名称 示例: group.tesddws\n约束限制:  无\n取值范围: 无\n默认取值: 无","example":"group.tesddws","type":"string","x-vision":""},"resources":{"description":"用户组资源。","items":{"$ref":"#/definitions/JobResource"},"type":"array","x-vision":""}},"type":"object"}},"description":null,"group_id":"065e44b2fe564922aa79230ec761dca6","host":"dli.cn-north-4.myhuaweicloud.com","id":"a3a57092a44a4940b7037fe3b577436e","info_version":"v1","method":"post","name":"CreateSparkJob","parameters":{},"paths":{"/v2.0/{project_id}/batches":{"post":{"deprecated":false,"description":"该API用于在某个队列上创建作业。","operationId":"CreateSparkJob","parameters":[{"description":"参数解释:   项目编号,用于资源隔离 示例: 48cc2c48765f481480c7db940d6409d1\n约束限制:  无\n取值范围: 无\n默认取值: 无","in":"path","name":"project_id","required":true,"type":"string","x-example":"48cc2c48765f481480c7db940d6409d1","x-order":1},{"description":"参数解释:   用户ID 示例: 48cc2c48765f481480c7db940d6409d1\n约束限制:  无\n取值范围: 无\n默认取值: 无","in":"header","name":"USER-ID","required":false,"type":"string","x-order":4},{"description":"参数解释:   从IAM服务获取的用户Token\n约束限制:  无\n取值范围: 无\n默认取值: 无","in":"header","name":"X-Auth-Token","required":true,"type":"string","x-example":"xxx","x-order":3,"x-vision":""},{"description":"创建批处理作业请求body体。","in":"body","name":"CreateSparkJobRequestBody","required":true,"schema":{"$ref":"#/definitions/CreateSparkJobRequestBody"},"x-order":2,"x-vision":""}],"responses":{"201":{"description":"Created","schema":{"$ref":"#/definitions/CreateSparkJobResponseBody"}},"400":{"description":"Bad Request","schema":{"$ref":"#/definitions/FailResponse"}},"500":{"description":"Internal Server Error"}},"summary":"创建批处理作业","tags":["Spark作业-作业相关API"],"x-apiErrorCodes":[{"errorCode":"DLI.0001","errorDescription":"","errorDescriptionEn":"","errorMessage":"Parameter check errors occur.","httpStatus":"400","solution":"","solutionEn":""},{"errorCode":"DLI.0002","errorDescription":"","errorDescriptionEn":"","errorMessage":"The object does not exist.","httpStatus":"400","solution":"","solutionEn":""},{"errorCode":"DLI.0003","errorDescription":"","errorDescriptionEn":"","errorMessage":"SQL permission verification fails.","httpStatus":"400","solution":"","solutionEn":""},{"errorCode":"DLI.0004","errorDescription":"","errorDescriptionEn":"","errorMessage":"SQL syntax parsing errors occur.","httpStatus":"400","solution":"","solutionEn":""},{"errorCode":"DLI.0005","errorDescription":"","errorDescriptionEn":"","errorMessage":"SQL semantics parsing errors occur.","httpStatus":"400","solution":"","solutionEn":""},{"errorCode":"DLI.0006","errorDescription":"","errorDescriptionEn":"","errorMessage":"The object exists.","httpStatus":"400","solution":"","solutionEn":""},{"errorCode":"DLI.0007","errorDescription":"","errorDescriptionEn":"","errorMessage":"Feature not supported.","httpStatus":"400","solution":"","solutionEn":""},{"errorCode":"DLI.0008","errorDescription":"","errorDescriptionEn":"","errorMessage":"Metadata errors occur.","httpStatus":"400","solution":"","solutionEn":""},{"errorCode":"DLI.0009","errorDescription":"","errorDescriptionEn":"","errorMessage":"System restrictions","httpStatus":"400","solution":"","solutionEn":""},{"errorCode":"DLI.0011","errorDescription":"","errorDescriptionEn":"","errorMessage":"The file permission check fails.","httpStatus":"400","solution":"","solutionEn":""},{"errorCode":"DLI.0012","errorDescription":"","errorDescriptionEn":"","errorMessage":"Resource objects are unavailable.","httpStatus":"400","solution":"","solutionEn":""},{"errorCode":"DLI.0016","errorDescription":"","errorDescriptionEn":"","errorMessage":"The identity and role are incorrect.","httpStatus":"400","solution":"","solutionEn":""},{"errorCode":"DLI.0018","errorDescription":"","errorDescriptionEn":"","errorMessage":"Data conversion errors occur.","httpStatus":"400","solution":"","solutionEn":""},{"errorCode":"DLI.0019","errorDescription":"","errorDescriptionEn":"","errorMessage":"The task times out.","httpStatus":"400","solution":"","solutionEn":""},{"errorCode":"DLI.0100","errorDescription":"","errorDescriptionEn":"","errorMessage":"The result expires.","httpStatus":"400","solution":"","solutionEn":""},{"errorCode":"DLI.0013","errorDescription":"","errorDescriptionEn":"","errorMessage":"User authentication errors occur.","httpStatus":"401","solution":"","solutionEn":""},{"errorCode":"DLI.0014","errorDescription":"","errorDescriptionEn":"","errorMessage":"Service authentication errors occur.","httpStatus":"401","solution":"","solutionEn":""},{"errorCode":"DLI.0023","errorDescription":"","errorDescriptionEn":"","errorMessage":"No related resources were found.","httpStatus":"404","solution":"","solutionEn":""},{"errorCode":"DLI.0999","errorDescription":"","errorDescriptionEn":"","errorMessage":"Server-side errors occur.","httpStatus":"500","solution":"","solutionEn":""}],"x-is-registered":"Y","x-open-region-cloud":"hc,hws_hk","x-order":0,"x-support-sdk":"Y"}}},"product_short":"DLI","region_id":"cn-north-4","schemes":["HTTPS"],"security_definitions":null,"summary":"创建批处理作业","tags":"Spark作业-作业相关API","uri":null,"version":"2.0"}