{"base_path":"/","components":null,"consumes":"[\"application/json\"]","definitions":{"ConfigInfoDO":{"description":"部署参数类","properties":{"description":{"description":"描述","example":"服务名称","type":"string"},"limits":{"description":"当参数类型为enum枚举类型时,必须填写可选值","items":{"$ref":"#/definitions/ParamTypeLimits"},"maxItems":30,"minItems":0,"type":"array"},"name":{"description":"部署参数名称,用户可自定义","example":"serviceName","type":"string"},"static_status":{"default":1,"description":"表示是否为静态参数,值为1时不支持部署时变更参数,值为0时支持,并且也会把该参数上报流水线","enum":[0,1],"example":1,"format":"int32","type":"integer"},"task_id":{"description":"部署任务id,创建应用后由系统自动生成","example":"6ea272d3a0004397adf2f702ceffc6c0","maxLength":32,"minLength":32,"pattern":"^[A-Za-z0-9]{32}$","type":"string"},"type":{"description":"类型,如果填写name字段,则type必选,若type为空则默认为text","enum":["text","host_group","enum","encrypt"],"example":"text","type":"string"},"value":{"description":"部署参数值","example":"SpringBoot-Demo","type":"string"}}},"ParamTypeLimits":{"description":"枚举类型参数实体类","properties":{"name":{"description":"枚举值可选参数","maxLength":128,"minLength":1,"pattern":"^[a-zA-Z0-9\\u4E00-\\u9FA5\\-_.]*$","type":"string"}}},"TemplateTaskRequestBody":{"description":"通过模板创建应用请求体","properties":{"configs":{"description":"部署参数类","items":{"$ref":"#/definitions/ConfigInfoDO"},"type":"array"},"project_id":{"description":"项目id","example":"6039d4480efc4dddb178abff98719913","pattern":"^[A-Za-z0-9]{32}$","type":"string"},"project_name":{"description":"项目名称","example":"DeployTest","maxLength":128,"minLength":3,"type":"string"},"slave_cluster_id":{"description":"自定义slave资源池id","example":"9fee11a3722749598cd8468311e082d9","pattern":"^[A-Za-z0-9]{1,32}$","type":"string"},"task_name":{"description":"应用名称","example":"templateTest","maxLength":128,"minLength":3,"pattern":"^[a-zA-Z0-9\\u4E00-\\u9FA5-_]+$","type":"string"},"template_id":{"description":"部署模板id","example":"6efb0b24e2e9489eb0e53ee12904a19e","pattern":"^[A-Za-z0-9]{32}$","type":"string"}},"required":["project_id","project_name","template_id","task_name"]},"TemplateTaskResponseBody":{"description":"","properties":{"task_id":{"description":"部署任务id","maxLength":32,"minLength":32,"type":"string"},"task_name":{"description":"应用名称","maxLength":128,"minLength":3,"pattern":"^[a-zA-Z0-9\\u4E00-\\u9FA5-_]+$","type":"string"}}}},"description":null,"group_id":"dd78b2802a5f4901936a879de13fbe3f","host":"codearts-deploy.cn-north-4.myhuaweicloud.com","id":"ff6895f53b0e45deacdecbf35b474c9f","info_version":"v2","method":"post","name":"CreateDeployTaskByTemplate","parameters":{"Content-Type":{"default":"application/json;charset=utf-8","description":"消息体的类型(格式),下方类型可任选其一使用:\n                        application/json;charset=utf-8\n                        application/json","enum":["application/json;charset=utf-8","application/json"],"in":"header","name":"Content-Type","required":true,"type":"string"},"X-Auth-Token":{"description":"用户Token。通过调用IAM服务获取用户Token接口获取(响应消息头中X-Subject-Token的值)","in":"header","maxLength":20000,"minLength":0,"name":"X-Auth-Token","required":true,"type":"string","x-example":"MIIDkgYJKoZIhvcNAQcCoIIDgzCCXXXXXX..."}},"paths":{"/v2/tasks/template-task":{"post":{"consumes":["application/json"],"description":"通过模板新建应用。该接口于2024年09月30日后不再维护,推荐使用新版CreateApp接口。","operationId":"CreateDeployTaskByTemplate","parameters":[{"description":"Body参数","in":"body","name":"CreateDeployTaskByTemplateRequestBody","required":true,"schema":{"$ref":"#/definitions/TemplateTaskRequestBody"}},{"$ref":"#/parameters/Content-Type"},{"$ref":"#/parameters/X-Auth-Token"}],"produces":["application/json"],"responses":{"200":{"description":"OK 请求响应成功","examples":{"application/json":{"task_id":"140ca97e701d4c4c93c59ffd5bdb32ec","task_name":"Deploytest"}},"schema":{"$ref":"#/definitions/TemplateTaskResponseBody"}},"401":{"description":"Unauthorized"},"403":{"description":"Forbidden"},"404":{"description":"Not Found"}},"summary":"通过模板新建应用","tags":["deploy-env-controller-v2"],"x-is-registered":"Y","x-request-examples-1":{"configs":[{"description":"服务名称","name":"serviceName","type":"text","value":"SpringBoot-Demo"},{"description":"版本号","name":"releaseVersion","type":"text","value":"1.1.1"},{"description":"","name":"jdk_path","type":"text","value":"/usr/local/jdk"},{"description":"","name":"package_url","type":"text","value":"/${serviceName}/${releaseVersion}/${serviceName}.jar"},{"description":"","name":"spring_path","type":"text","value":"/usr/local/${serviceName}.jar"},{"description":"","name":"download_path","type":"text","value":"/usr/local/"},{"description":"","name":"service_port","type":"text","value":"<%= service_port%>"},{"description":"","name":"host_group","type":"host_group","value":"<%= host_group%>"},{"description":"","name":"component_name","type":"text","value":"aom-${serviceName}"},{"description":"","name":"log_path","type":"text","value":"/usr/local/*.log"}],"project_id":"6039d4480efc4dddb178abff98719913","project_name":"Deploy","task_name":"Deploytest","template_id":"6efb0b24e2e9489eb0e53ee12904a19e"},"x-request-examples-description-1":"在指定项目下使用“SpringBoot应用部署”模板创建一个应用。","x-request-examples-text-1":{"configs":[{"description":"服务名称","name":"serviceName","type":"text","value":"SpringBoot-Demo"},{"description":"版本号","name":"releaseVersion","type":"text","value":"1.1.1"},{"description":"","name":"jdk_path","type":"text","value":"/usr/local/jdk"},{"description":"","name":"package_url","type":"text","value":"/${serviceName}/${releaseVersion}/${serviceName}.jar"},{"description":"","name":"spring_path","type":"text","value":"/usr/local/${serviceName}.jar"},{"description":"","name":"download_path","type":"text","value":"/usr/local/"},{"description":"","name":"service_port","type":"text","value":"<%= service_port%>"},{"description":"","name":"host_group","type":"host_group","value":"<%= host_group%>"},{"description":"","name":"component_name","type":"text","value":"aom-${serviceName}"},{"description":"","name":"log_path","type":"text","value":"/usr/local/*.log"}],"project_id":"6039d4480efc4dddb178abff98719913","project_name":"Deploy","task_name":"Deploytest","template_id":"6efb0b24e2e9489eb0e53ee12904a19e"},"x-request-examples-url-1":"https://{endpoint}/v2/tasks/template-task","x-support-sdk":"Y"}}},"product_short":"CodeArtsDeploy","region_id":"cn-north-4","schemes":["HTTPS"],"security_definitions":null,"summary":"通过模板新建应用","tags":"应用管理","uri":null,"version":"2.0"}