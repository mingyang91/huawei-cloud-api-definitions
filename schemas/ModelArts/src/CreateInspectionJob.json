{"base_path":"/","components":null,"consumes":"[\"application/json;charset=UTF-8\",\"application/json\"]","definitions":{"CreateInspectionJobRequestBody":{"description":"创建巡检作业请求体","properties":{"description":{"$ref":"#/definitions/Description"},"item_configs":{"items":{"$ref":"#/definitions/ReqInspectionItemConfig"},"maxItems":100,"minItems":0,"type":"array"},"modelarts_offering_type":{"$ref":"#/definitions/ModelArtsOffering"},"name":{"description":"**参数解释**:巡检作业名称。\n**约束限制**:不涉及。\n**取值范围**:只允许输入长度为 1 到 64 位由数字、中文、英文、下划线(_)或中划线(-)组成的字符。\n**默认取值**:不涉及。","example":"InspectionJob-1","pattern":"^([0-9a-zA-Z_\\-]|[\\u4e00-\\u9fa5]|[\\u9FA6-\\u9FCB]){1,64}$","type":"string"},"nodes":{"description":"**参数解释**:巡检对象,节点名称列表。\n**约束限制**:不涉及。","items":{"description":"**参数解释**:巡检对象,节点名称。\n**约束限制**:不涉及。\n**取值范围**:不涉及。\n**默认取值**:不涉及。","example":"node-1","maxLength":255,"minLength":4,"pattern":"^[a-zA-Z0-9_-]+$","type":"string"},"maxItems":100,"minItems":0,"type":"array"},"pool_name":{"description":"**参数解释**:巡检对象,AI专属资源池/弹性集群名称。\n**约束限制**:不涉及。\n**取值范围**:长度为[4,255]的英文字符、数字、下划线(_)和中划线(-)的组合。\n**默认取值**:不涉及。","example":"pool-1","maxLength":255,"minLength":4,"pattern":"^[a-zA-Z0-9_-]+$","type":"string"},"server_ids":{"description":"**参数解释**:服务器id。\n**约束限制**:modelarts_offering_type取值为LITE-DEVSERVER时生效。","items":{"$ref":"#/definitions/ServerId"},"maxItems":10000,"minItems":0,"type":"array"},"types":{"description":"**参数解释**:巡检类型列表。\n**约束限制**:不涉及。","items":{"$ref":"#/definitions/InspectionType"},"maxItems":100,"minItems":0,"type":"array"},"workspace_id":{"$ref":"#/definitions/WorkspaceId"}},"required":["name","types","item_configs"],"type":"object"},"CreateInspectionJobResponseBody":{"description":"巡检作业信息","properties":{"creator":{"description":"**参数解释**:创建者。\n**取值范围**:[0,50]。","example":"creator-1","maxLength":50,"minLength":0,"type":"string"},"description":{"$ref":"#/definitions/Description"},"id":{"description":"**参数解释**:巡检作业ID。\n**取值范围**:长度为[1,36]的英文字符、数字和中划线(-)的组合。","example":"f8ab3ae2-2111-4be9-a5a9-ddf84cadfd3e","maxLength":50,"minLength":0,"type":"string"},"item_configs":{"description":"**参数解释**:巡检压测用例信息列表。","items":{"$ref":"#/definitions/InspectionItemConfigDetail"},"maxItems":50,"minItems":0,"type":"array"},"name":{"description":"**参数解释**:作业名称。\n**取值范围**:长度为[1,64]的数字、中文、英文、下划线(_)或中划线(-)组成的字符。","example":"InspectionJob-1","maxLength":32,"minLength":4,"pattern":"^[a-zA-Z0-9_-]+$","type":"string"},"status":{"$ref":"#/definitions/JobStatus"},"types":{"description":"**参数解释**:巡检类型。","items":{"$ref":"#/definitions/InspectionType"},"maxItems":50,"minItems":0,"type":"array"}},"type":"object"},"Description":{"description":"**参数解释**:添加的对作业的描述。\n**约束限制**:不涉及。\n**取值范围**:字符串,长度为0到256之间。\n**默认取值**:","example":"description of job","maxLength":256,"minLength":0,"type":"string"},"ErrorCode":{"properties":{"error_code_id":{"description":"**参数解释**:错误码。\n**取值范围**:长度为[8,36]个字符。","maxLength":36,"minLength":8,"type":"string"},"error_message":{"description":"**参数解释**:错误描述。\n**取值范围**:长度为[2,512]个字符。","maxLength":512,"minLength":2,"type":"string"}},"type":"object"},"InspectionItemCategory":{"description":"**参数解释**:巡检类目。\n**取值范围**:\n  - HOST_CONFIG_STATUS:主机配置和状态\n  - NPU_HEALTH_CHECK:NPU健康检查\n  - NPU_PERFORMANCE:NPU性能诊断\n  - NPU_STRESS_TEST:NPU压测\n  - NETWORK_STRESS_TEST:网络压测","enum":["HOST_CONFIG_STATUS","NPU_HEALTH_CHECK","NPU_PERFORMANCE","NPU_STRESS_TEST","NETWORK_STRESS_TEST"],"example":"HOST_CONFIG_STATUS","type":"string"},"InspectionItemConfig":{"description":"**参数解释**:巡检压测用例信息。\n**取值范围**:不涉及。","properties":{"interval_time":{"description":"**参数解释**:执行轮次时间间隔。\n**取值范围**:[0,100000]。","example":1000,"format":"int64","maximum":100000,"minimum":0,"type":"integer"},"item_type":{"$ref":"#/definitions/InspectionItemType","description":"**参数解释**:巡检压测用例信息。\n**取值范围**:不涉及。"},"times":{"description":"**参数解释**:执行轮次。\n**取值范围**:[0,100]。","example":1,"maximum":100,"minimum":0,"type":"integer"}},"type":"object"},"InspectionItemConfigDetail":{"allOf":[{"$ref":"#/definitions/InspectionItemConfig"},{"properties":{"inspection_type":{"$ref":"#/definitions/InspectionType"},"item_category":{"$ref":"#/definitions/InspectionItemCategory"}},"type":"object"}],"description":"**参数解释**:巡检压测用例信息。\n**取值范围**:不涉及。","type":"object"},"InspectionItemType":{"description":"**参数解释**:巡检检查项类型。\n**取值范围**:\n  - OS_CPU_USAGE 主机CPU利用率\n  - OS_MEMORY_USED 主机DDR利用率\n  - OS_IOSTAT_USED 主机IOStat利用率\n  - OS_PROCESS_INFO 主机进程状态\n  - OS_DISK_USAGE 磁盘空间使用率\n  - OS_VERSION 主机OS版本\n  - OS_HUGE_PAGE 主机透明大页\n  - OS_NVIDIA_DRIVER_VERSION Nvidia驱动版本\n  - OS_GPU_MODEL GPU型号\n  - OS_VRAM_TOTAL_MIB 显存容量\n  - OS_CUDA_VERSION CUDA版本 \n  - OS_CUDA_TOOLKIT_VERSION CUDA工具包版本\n  - OS_DOCKER_VERSION Docker版本\n  - OS_DOCKER_STORAGE_DRIVER Docker存储驱动\n  - OS_DOCKER_BACKING_FILESYSTEM Docker底层文件系统\n  - OS_CONTAINERD_VERSION Containerd版本\n  - OS_CPU_ARCHITECTURE CPU处理器架构\n  - OS_CPU_PROCESSORS CPU逻辑处理器数量\n  - OS_KERNEL_WATCHDOG_THRESH watchdog阈值\n  - OS_MEMORY_DEVICES 内存条数量\n  - OS_MEMORY_TOTAL_KB 内存总量\n  - OS_MEMORY_AVAILABLE_KB 内存可用量\n  - OS_ANON_HUGE_PAGE_KB 透明大页大小\n  - OS_NET_CORE_SOMAXCONN Socket最大连接数\n  - OS_DUMMY_NET_CARDS Dummy网卡数量\n  - NPU_VERSION NPU驱动版本\n  - NPU_CORE_USAGE NPU 利用率\n  - NPU_PROC NPU 进程状态\n  - NPU_HEALTH NPU 芯片健康状态\n  - NPU_COMPATIBILITY NPU 驱动和硬件兼容性\n  - ASCEND_DMI_CANNCANN与驱动兼容性诊断\n  - ASCEND_DMI_DRIVER 驱动健康诊断\n  - ASCEND_DMI_NETWORK 网络健康诊断\n  - ASCEND_DMI_HBM HBM诊断\n  - ASCEND_DMI_SIGNAL_QUALITY 信号质量诊断\n  - UDP_PORT 源端口配置值诊断\n  - DEEP_BAND_WIDTH BAND WIDTH\n  - DEEP_AI_FLOPS Aiflops\n  - DEEP_EYE_DIAGRAM 眼图测试\n  - DEEP_AI_CORE AI Core压测\n  - DEEP_HBM HBM压测\n  - DEEP_P2P P2P压测\n  - DEEP_SINGLE_HCCL 单机HCCL通信带宽测试\n  - DEEP_MULTI_HCCL 多级HCCL通信带宽测试\n  - NPU_MODEL NPU卡类型\n  - NPU_FIRMWARE NPU固件驱动版本\n  - NPU_MCU NPU MCU版本\n  - NPU_VRD NPU VRD固件版本\n  - ROCE_TEST RoCE TEST网络带宽测试","enum":["OS_CPU_USAGE","OS_MEMORY_USED","OS_IOSTAT_USED","OS_PROCESS_INFO","OS_DISK_USAGE","OS_VERSION","OS_HUGE_PAGE","OS_NVIDIA_DRIVER_VERSION","OS_GPU_MODEL","OS_VRAM_TOTAL_MIB","OS_CUDA_VERSION","OS_CUDA_TOOLKIT_VERSION","OS_DOCKER_VERSION","OS_DOCKER_STORAGE_DRIVER","OS_DOCKER_BACKING_FILESYSTEM","OS_CONTAINERD_VERSION","OS_CPU_ARCHITECTURE","OS_CPU_PROCESSORS","OS_KERNEL_WATCHDOG_THRESH","OS_MEMORY_DEVICES","OS_MEMORY_TOTAL_KB","OS_MEMORY_AVAILABLE_KB","OS_ANON_HUGE_PAGE_KB","OS_NET_CORE_SOMAXCONN","OS_DUMMY_NET_CARDS","NPU_VERSION","NPU_CORE_USAGE","NPU_PROC","NPU_HEALTH","NPU_COMPATIBILITY","ASCEND_DMI_CANN","ASCEND_DMI_DRIVER","ASCEND_DMI_NETWORK","ASCEND_DMI_HBM","ASCEND_DMI_SIGNAL_QUALITY","UDP_PORT","DEEP_BAND_WIDTH","DEEP_AI_FLOPS","DEEP_EYE_DIAGRAM","DEEP_AI_CORE","DEEP_HBM","DEEP_P2P","DEEP_SINGLE_HCCL","DEEP_MULTI_HCCL","NPU_MODEL","NPU_FIRMWARE","NPU_MCU","NPU_VRD","ROCE_TEST"],"example":"DEEP_AI_CORE","type":"string"},"InspectionType":{"description":"**参数解释**:巡检类型。\n**取值范围**:\n  - STANDARD:标准巡检\n  - DEEP:深度巡检","enum":["STANDARD","DEEP"],"example":"STANDARD","type":"string"},"JobStatus":{"description":"**参数解释**:作业状态。\n**取值范围**:\n  - CREATING:创建中\n  - CREATE_FAILED: 创建失败\n  - PENDING:排队中\n  - RUNNING:运行中\n  - FAILED:作业失败\n  - SUCCEEDED:作业成功\n  - TIMEOUT:作业超时\n  - TERMINATING:终止中\n  - TERMINATED:作业终止","enum":["CREATING","CREATE_FAILED","PENDING","RUNNING","FAILED","SUCCEEDED","TIMEOUT","TERMINATING","TERMINATED"],"example":"CREATING","type":"string"},"ModelArtsOffering":{"description":"**参数解释**:ModelArts产品形态。\n**约束限制**:不涉及。\n**取值范围**:\n  - STANDARD:ModelArts Standard\n  - LITE-CLUSTER:ModelArts Lite-Cluster\n  - LITE-DEVSERVER:ModelArts Lite-Server(过时,由LITE-SERVER代替)\n  - LITE-SERVER:ModelArts Lite-Server\n**默认取值**:不涉及。","enum":["STANDARD","LITE-CLUSTER","LITE-DEVSERVER","LITE-SERVER"],"example":"STANDARD","type":"string"},"ReqInspectionItemConfig":{"description":"**参数解释**:巡检压测用例信息。\n**约束限制**:不涉及。","properties":{"interval_time":{"description":"**参数解释**:执行轮次时间间隔。\n**约束限制**:不涉及。\n**取值范围**:[0,100000]。\n**默认取值**:不涉及。","example":1000,"format":"int64","maximum":100000,"minimum":0,"type":"integer"},"item_type":{"$ref":"#/definitions/ReqInspectionItemType"},"times":{"description":"**参数解释**:执行轮次。\n**约束限制**:不涉及。\n**取值范围**:[0,100]。\n**默认取值**:不涉及。","example":1,"maximum":100,"minimum":0,"type":"integer"}},"type":"object"},"ReqInspectionItemType":{"description":"**参数解释**:巡检检查项类型。\n**约束限制**:不涉及。\n**取值范围**:\n  - OS_CPU_USAGE 主机CPU利用率\n  - OS_MEMORY_USED 主机DDR利用率\n  - OS_IOSTAT_USED 主机IOStat利用率\n  - OS_PROCESS_INFO 主机进程状态\n  - OS_DISK_USAGE 磁盘空间使用率\n  - OS_NVIDIA_DRIVER_VERSION Nvidia驱动版本\n  - OS_GPU_MODEL GPU型号\n  - OS_VRAM_TOTAL_MIB 显存容量\n  - OS_CUDA_VERSION CUDA版本 \n  - OS_CUDA_TOOLKIT_VERSION CUDA工具包版本\n  - OS_DOCKER_VERSION Docker版本\n  - OS_DOCKER_STORAGE_DRIVER Docker存储驱动\n  - OS_DOCKER_BACKING_FILESYSTEM Docker底层文件系统\n  - OS_CONTAINERD_VERSION Containerd版本\n  - OS_CPU_ARCHITECTURE CPU处理器架构\n  - OS_CPU_PROCESSORS CPU逻辑处理器数量\n  - OS_KERNEL_WATCHDOG_THRESH watchdog阈值\n  - OS_MEMORY_DEVICES 内存条数量\n  - OS_MEMORY_TOTAL_KB 内存总量\n  - OS_MEMORY_AVAILABLE_KB 内存可用量\n  - OS_ANON_HUGE_PAGE_KB 透明大页大小\n  - OS_NET_CORE_SOMAXCONN Socket最大连接数\n  - OS_DUMMY_NET_CARDS Dummy网卡数量\n  - OS_VERSION 主机OS版本\n  - OS_HUGE_PAGE 主机透明大页\n  - NPU_VERSION NPU驱动版本\n  - NPU_CORE_USAGE NPU 利用率\n  - NPU_PROC NPU 进程状态\n  - NPU_HEALTH NPU 芯片健康状态\n  - NPU_COMPATIBILITY NPU 驱动和硬件兼容性\n  - ASCEND_DMI_CANNCANN与驱动兼容性诊断\n  - ASCEND_DMI_DRIVER 驱动健康诊断\n  - ASCEND_DMI_NETWORK 网络健康诊断\n  - ASCEND_DMI_HBM HBM诊断\n  - ASCEND_DMI_SIGNAL_QUALITY 信号质量诊断\n  - UDP_PORT 源端口配置值诊断\n  - DEEP_BAND_WIDTH BAND WIDTH\n  - DEEP_AI_FLOPS Aiflops\n  - DEEP_EYE_DIAGRAM 眼图测试\n  - DEEP_AI_CORE AI Core压测\n  - DEEP_HBM HBM压测\n  - DEEP_P2P P2P压测\n  - DEEP_SINGLE_HCCL 单机HCCL通信带宽测试\n  - DEEP_MULTI_HCCL 多级HCCL通信带宽测试\n  - NPU_MODEL NPU卡类型\n  - NPU_FIRMWARE NPU固件驱动版本\n  - NPU_MCU NPU MCU版本\n  - NPU_VRD NPU VRD固件版本\n  - ROCE_TEST RoCE TEST网络带宽测试\n**默认取值**:不涉及。","enum":["OS_CPU_USAGE","OS_MEMORY_USED","OS_IOSTAT_USED","OS_PROCESS_INFO","OS_DISK_USAGE","OS_VERSION","OS_HUGE_PAGE","OS_NVIDIA_DRIVER_VERSION","OS_GPU_MODEL","OS_VRAM_TOTAL_MIB","OS_CUDA_VERSION","OS_CUDA_TOOLKIT_VERSION","OS_DOCKER_VERSION","OS_DOCKER_STORAGE_DRIVER","OS_DOCKER_BACKING_FILESYSTEM","OS_CONTAINERD_VERSION","OS_CPU_ARCHITECTURE","OS_CPU_PROCESSORS","OS_KERNEL_WATCHDOG_THRESH","OS_MEMORY_DEVICES","OS_MEMORY_TOTAL_KB","OS_MEMORY_AVAILABLE_KB","OS_ANON_HUGE_PAGE_KB","OS_NET_CORE_SOMAXCONN","OS_DUMMY_NET_CARDS","NPU_VERSION","NPU_CORE_USAGE","NPU_PROC","NPU_HEALTH","NPU_COMPATIBILITY","ASCEND_DMI_CANN","ASCEND_DMI_DRIVER","ASCEND_DMI_NETWORK","ASCEND_DMI_HBM","ASCEND_DMI_SIGNAL_QUALITY","UDP_PORT","DEEP_BAND_WIDTH","DEEP_AI_FLOPS","DEEP_EYE_DIAGRAM","DEEP_AI_CORE","DEEP_HBM","DEEP_P2P","DEEP_SINGLE_HCCL","DEEP_MULTI_HCCL","NPU_MODEL","NPU_FIRMWARE","NPU_MCU","NPU_VRD","ROCE_TEST"],"example":"DEEP_AI_CORE","type":"string"},"ServerId":{"description":"**参数解释**:服务器id。\n**约束限制**:offering取值为LITE-CLUSTER,LITE-DEVSERVER时生效。\n**取值范围**:长度为[4,255]的英文字符、数字、下划线(_)和中划线(-)的组合。\n**默认取值**:不涉及。","example":"f8ab3ae2-2111-4be9-a5a9-ddf84cadfd3e","maxLength":255,"minLength":4,"pattern":"^[a-zA-Z0-9_-]+$","type":"string"},"WorkspaceId":{"default":"0","description":"**参数解释**:工作空间ID。\n**约束限制**:不涉及。\n**取值范围**:0或长度为32的字符串。\n**默认取值**:0。","example":"0","maxLength":32,"minLength":1,"pattern":"^(0|[a-zA-Z0-9]{32})$","type":"string"}},"description":null,"group_id":"ade740e866904a7dbdaa5ec0f538d4d0","host":"modelarts.cn-north-4.myhuaweicloud.com","id":"5517fcd7f02f488eab6c42e2cc312225","info_version":"v1","method":"post","name":"CreateInspectionJob","parameters":{},"paths":{"/v1/{project_id}/brain/inspection-jobs":{"post":{"consumes":["application/json"],"description":"创建巡检作业功能允许用户根据需求创建标准巡检或深度巡检任务,支持对集群或节点进行巡检。该功能适用于需要定期检查集群或节点健康状态、排查潜在问题或在部署新服务前进行全面检查的场景。使用此功能前,请确保您具备创建巡检作业的权限,并提供有效的巡检对象ID。成功创建后,巡检任务将被下发,收集主机配置和状态、NPU驱动配置和状态、网络状态等信息,并进行AICore压测、HBM压测等。巡检结果将存储在指定位置,供后续查询和分析。若权限不足、巡检对象ID无效或系统内部出现错误,将返回相应的错误信息。","operationId":"CreateInspectionJob","parameters":[{"description":"**参数解释**:租户Token。用于调用接口的认证。获取方法,请参见[获取Token](modelarts_03_0004.xml)。\n**约束限制**:不涉及。\n**取值范围**:长度不超过65534个字符。\n**默认取值**:不涉及。","in":"header","maxLength":65534,"minLength":0,"name":"X-Auth-Token","required":false,"type":"string"},{"description":"**参数解释**:项目ID。获取方法,请参见[获取项目ID和名称](modelarts_03_0147.xml)。\n**约束限制**:不涉及。\n**取值范围**:长度为32的英文字符、数字的组合。\n**默认取值**:不涉及。","in":"path","name":"project_id","pattern":"^[0-9a-zA-Z-]{32}$","required":true,"type":"string"},{"description":"创建巡检作业请求体。","in":"body","name":"body","required":true,"schema":{"$ref":"#/definitions/CreateInspectionJobRequestBody"}}],"produces":["application/json"],"responses":{"202":{"description":"创建巡检作业的响应。","headers":{"X-request-id":{"description":"Header field of the request ID number for task tracking. Format: request_uuid-timestamp-hostname.","type":"string"}},"schema":{"$ref":"#/definitions/CreateInspectionJobResponseBody"}},"400":{"description":"请求错误","examples":{"application/json":{"error_code":"ModelArts.60600000","error_msg":"param error","request_id":"52ddc05511cba830947205b703171ee7","solution_msg":"Please take a rest and obtain it again.If you need more help, provide X-Request-Id=xxx and contact O&M personnel."}},"schema":{"$ref":"#/definitions/ErrorCode"}},"401":{"description":"未授权","examples":{"application/json":{"error_code":"ModelArts.60600000","error_msg":"Incorrect token or token resolution failed","request_id":"52ddc05511cba830947205b703171ee7","solution_msg":"Please take a rest and obtain it again.If you need more help, provide X-Request-Id=xxx and contact O&M personnel."}},"schema":{"$ref":"#/definitions/ErrorCode"}},"403":{"description":"禁止访问","examples":{"application/json":{"error_code":"ModelArts.60600000","error_msg":"X-Auth-Token is invalid in the request","request_id":"52ddc05511cba830947205b703171ee7","solution_msg":"Please take a rest and obtain it again.If you need more help, provide X-Request-Id=xxx and contact O&M personnel."}},"schema":{"$ref":"#/definitions/ErrorCode"}},"500":{"description":"内部服务器错误","examples":{"application/json":{"error_code":"ModelArts.60600000","error_msg":"internal error","request_id":"52ddc05511cba830947205b703171ee7","solution_msg":"Please take a rest and obtain it again.If you need more help, provide X-Request-Id=xxx and contact O&M personnel."}},"schema":{"$ref":"#/definitions/ErrorCode"}}},"summary":"创建巡检作业","tags":["昇腾云脑"],"x-apiexplorer-hide":"N","x-apigw-publish":"Y","x-cts-meta-anno":{"isAsyncApi":"false","resourceType":"inspectionJob","traceName":"CreateInspectionJob"},"x-enable-auth-anno":{"type":"iam-token"},"x-iam-auth-meta-anno":{"abacAction":"modelarts:brain:createInspectionJob","authContextInitializerName":"defaultIamAuthContextInitializer","authLevel":"PROJECT","model":"v3","needAbacCheck":true,"needAbacResourceCheck":false,"needCbcCheck":true,"needRbacCheck":true,"opType":"guessByHttpMethod","rbac":["te_admin"],"supportAllGrantedEps":false},"x-is-registered":"Y","x-openapi-hide":"N","x-request-example-1":{"description":"description of inspection job","item_configs":[{"interval_time":1000,"item_type":"string","times":1}],"modelarts_offering_type":"STANDARD","name":"InspectionJob-XXX","nodes":["string"],"pool_name":"pool-1","server_ids":["f8ab3ae2-2111-4be9-a5a9-ddf84cadfd3e"],"types":["string"]},"x-request-examples-description-1":"创建巡检作业","x-request-examples-text-1":{"description":"description of inspection job","item_configs":[{"interval_time":1000,"item_type":"string","times":1}],"modelarts_offering_type":"STANDARD","name":"InspectionJob-XXX","nodes":["string"],"pool_name":"pool-1","server_ids":["f8ab3ae2-2111-4be9-a5a9-ddf84cadfd3e"],"types":["string"]},"x-request-examples-url-1":"POST https://{endpoint}/v1/{project_id}/brain/inspection-jobs","x-support-sdk":"Y"}}},"product_short":"ModelArts","region_id":"cn-north-4","schemes":["HTTPS"],"security_definitions":{"ApiTokenAuth":{"in":"header","name":"X-Auth-Token","type":"apiKey"}},"summary":"创建巡检作业","tags":"昇腾云脑","uri":null,"version":"2.0"}