{"base_path":"/","components":null,"consumes":"[\"application/json;charset=UTF-8\",\"application/json\"]","definitions":{"ErrorResponse":{"description":"请求失败时返回的错误对象。","properties":{"error_code":{"description":"ModelArts错误码。","type":"string"},"error_msg":{"description":"具体错误信息。","type":"string"}},"required":["error_code","error_msg"],"type":"object"},"PoolDriver":{"description":"资源池驱动数据模型。","properties":{"gpuVersion":{"description":"GPU驱动版本,物理资源池中含有GPU规格时可填,例如:\"440.33\"。","type":"string"},"npuVersion":{"description":"NPU驱动版本,物理资源池中含有ascend规格时可填,例如:\"C78\"。","type":"string"},"updateStrategy":{"description":"驱动升级策略。可选值如下:\n- force:强制升级,立即升级节点驱动,可能影响节点上正在运行的作业\n- idle:安全升级,待节点上没有作业运行时进行驱动升级","type":"string"}},"type":"object"},"PoolDriverStatus":{"description":"资源池驱动状态数据模型。","properties":{"state":{"description":"当前驱动状态。可选值如下:\n- Creating:创建中\n- Upgrading:升级中\n- Running:运行中\n- Abnormal:不正常","type":"string"},"version":{"description":"当前驱动版本。","type":"string"}},"required":["version","state"],"type":"object"},"PoolMetaAnnotations":{"description":"资源池metadata的注释信息。","properties":{"os.modelarts/auto.renew":{"description":"是否自动续费.可选值如下:\n- 0:不自动续费,默认值\n- 1:自动续费","type":"string","x-hcs":false},"os.modelarts/billing.mode":{"description":"计费模式。可选值如下:\n- 0:按需计费\n- 1:包周期计费","type":"string"},"os.modelarts/description":{"description":"资源池的描述信息。","example":"测试用资源池","type":"string"},"os.modelarts/flavor.resource.ids":{"description":"每种规格对应的resourceId,主要和cbc交互使用。","type":"string"},"os.modelarts/order.id":{"description":"订单id,包周期资源池创建或者计费模式变更的时候该参数必需。","type":"string","x-hcs":false},"os.modelarts/period.num":{"description":"包周期订购周期,比如2。","type":"string","x-hcs":false},"os.modelarts/period.type":{"description":"包周期订购类型。可选值如下:\n- 2:月 \n- 3:年\n- 4:小时","type":"string","x-hcs":false},"os.modelarts/promotion.info":{"description":"用户在cbc选择的折扣信息。","type":"string","x-hcs":false},"os.modelarts/service.console.url":{"description":"订购订单支付完成后跳转的url地址。","type":"string","x-hcs":false},"os.modelarts/tms.tags":{"description":"创建的时候由用户指定的TMS标签。","type":"string"}},"type":"object"},"PoolMetaLabels":{"description":"资源池metadata的标签信息。","properties":{"os.modelarts/name":{"description":"用户指定的pool名称。","example":"pool-01","maxLength":64,"minLength":4,"pattern":"^[a-z][-a-z0-9]{2,62}[a-z0-9]$","type":"string"},"os.modelarts/resource.id":{"description":"资源池的主资源id,通常提供给cbc使用。","type":"string"},"os.modelarts/tenant.domain.id":{"description":"资源池的租户id,记录资源池创建在哪个租户账号下。","type":"string"},"os.modelarts/workspace.id":{"default":"0","description":"工作空间ID。获取方法请参见[查询工作空间列表](ListWorkspace.xml)。未创建工作空间时默认值为“0”,存在创建并使用的工作空间,以实际取值为准。","example":"ccd05d1a553b4e188ea878e7dcb65e47","type":"string"}},"type":"object"},"PoolMetadata":{"description":"资源池的metadata信息。","properties":{"annotations":{"$ref":"#/definitions/PoolMetaAnnotations","description":"资源池的注释信息。"},"creationTimestamp":{"description":"时间戳,例如\"2021-11-01T03:49:41Z\"。","example":"2021-11-01T03:49:41Z","type":"string"},"labels":{"$ref":"#/definitions/PoolMetaLabels","description":"资源池的标签信息。"},"name":{"description":"系统自动生成的pool名称,相当于pool ID。","example":"pool-01abcd","maxLength":128,"minLength":4,"pattern":"^[a-z][-a-z0-9]{2,126}[a-z0-9]$","type":"string"}},"required":["name","creationTimestamp","labels"]},"PoolMetadataUpdate":{"description":"资源池元数据更新信息。","properties":{"annotations":{"description":"资源池的注释信息。","properties":{"os.modelarts/description":{"description":"资源池描述信息,用于说明资源池用于某种指定场景。不能包含特殊字符!<>=&\"'。","example":"test env","maxLength":100,"minLength":0,"pattern":"^[^!<>=&\"']{0,100}$","type":"string"},"os.modelarts/order.id":{"description":"订单id,包周期创建和变更的时候需要传递该参数。","type":"string"}}}},"type":"object"},"PoolModel":{"description":"资源池的详细信息。","properties":{"apiVersion":{"description":"API版本。可选值如下:\n- v2","example":"v2","type":"string"},"kind":{"description":"资源类型。可选值如下:\n- Pool:资源池","example":"Pool","type":"string"},"metadata":{"$ref":"#/definitions/PoolMetadata","description":"资源池的metadata信息。"},"spec":{"$ref":"#/definitions/PoolSpecModel","description":"资源池的期望信息。"},"status":{"$ref":"#/definitions/PoolStatus","description":"资源池的状态信息。"}},"required":["apiVersion","kind","metadata","spec","status"],"type":"object"},"PoolNodeAz":{"description":"资源池中节点的AZ信息。","properties":{"az":{"description":"可用区名称。","example":"az1","type":"string"},"count":{"description":"指定可用区扩容时,指定可用区的节点数。","example":1,"format":"int32","maximum":2000,"minimum":1,"type":"integer"}},"required":["az","count"],"type":"object"},"PoolResourceFlavorCount":{"description":"资源池资源规格资源量数据模型。","properties":{"azs":{"description":"资源所在的AZ的数量。","items":{"properties":{"az":{"description":"AZ的名称。","type":"string"},"count":{"description":"AZ的资源数量。","format":"int32","type":"integer"}},"required":["az","count"]},"type":"array"},"count":{"description":"规格保障使用量。","format":"int32","type":"integer"},"flavor":{"description":"资源规格名称,比如:modelarts.vm.gpu.tnt004。","type":"string"},"maxCount":{"description":"资源规格的弹性使用量,物理池该值和count相同。","format":"int32","type":"integer"},"nodePool":{"description":"节点池名称。比如:nodePool-1。","type":"string"}},"required":["flavor","count","maxCount"],"type":"object"},"PoolSpecModel":{"description":"物理池创建请求体。","properties":{"controlMode":{"description":"资源池的受限状态。可选值如下:\n- 0:代表不受限\n- 1:转包周期受限\n- 2:规格变更受限\n- 4:服务受限\n- 8:冻结\n- 16:公安冻结(不可退订)\n另外状态是可以叠加的,比如9代表转包周期受限+冻结状态。","format":"int32","type":"integer","x-hcs":false},"driver":{"$ref":"#/definitions/PoolDriver","description":"资源池的驱动信息。"},"jobFlavors":{"description":"资源池支持的作业规格信息列表,内容为作业规格名称。","example":"modelarts.job.vm.3u","items":{"type":"string"},"type":"array"},"network":{"description":"资源池网络参数。物理资源池时必选。","properties":{"name":{"description":"网络名称;用户接口通过指定网络名称创建网络,系统会自动创建子网,用户无法创建子网。默认将创建在第一个子网下。","example":"network-01","maxLength":128,"minLength":4,"type":"string"}},"required":["name"]},"resources":{"description":"资源池中的资源规格信列表,包括资源规格和相应规格的资源数量。","items":{"properties":{"azs":{"description":"az列表信息。","items":{"$ref":"#/definitions/PoolNodeAz"},"type":"array"},"count":{"default":1,"description":"相应规格资源数量。","example":1,"format":"int32","maximum":2000,"minimum":1,"type":"integer"},"flavor":{"description":"资源规格,比如:modelarts.vm.gpu.tnt004。","example":"modelarts.vm.gpu.tnt004","type":"string"}}},"type":"array"},"scope":{"description":"资源池支持的作业类型。至少选择一种,物理资源池支持全部选择。可选值如下:\n- Train:训练作业\n- Infer:推理作业\n- Notebook:Notebook作业","example":"Train","items":{"type":"string"},"type":"array"},"type":{"description":"资源池类型。可选值如下:\n- Dedicate:物理资源池,独立的网络,支持网络打通,定制驱动,定制作业类型。","example":"Dedicate","type":"string"}},"required":["type","scope","resources"],"type":"object"},"PoolSpecUpdate":{"description":"资源池描述信息更新参数。","properties":{"driver":{"$ref":"#/definitions/PoolDriver","description":"资源池驱动信息。"},"jobFlavors":{"description":"资源池支持的作业规格信息列表。","example":"modelarts.job.vm.3u","items":{"type":"string"},"type":"array"},"resources":{"description":"更新的资源规格列表。","items":{"properties":{"azs":{"description":"更新的AZ列表。","items":{"$ref":"#/definitions/PoolNodeAz"},"type":"array"},"count":{"description":"相应规格的资源数量。","example":1,"format":"int32","maximum":2000,"minimum":1,"type":"integer"},"flavor":{"description":"资源规格。","example":"modelarts.vm.cpu.4ud","type":"string"}},"required":["flavor","count"]},"type":"array"},"scope":{"description":"更新启用的作业类型。可选值如下:\n- Train:训练作业\n- Infer:推理作业\n- Notebook:Notebook作业","example":"Train","items":{"type":"string"},"type":"array"}},"type":"object"},"PoolStatus":{"description":"资源池状态信息。","properties":{"driver":{"description":"资源池驱动信息。","properties":{"gpu":{"$ref":"#/definitions/PoolDriverStatus","description":"GPU驱动信息。"},"npu":{"$ref":"#/definitions/PoolDriverStatus","description":"NPU驱动信息。"}}},"message":{"description":"资源池处于当前状态的提示信息。","example":"pool is running","type":"string"},"parent":{"description":"资源池父节点名称,物理池为空。","example":null,"type":"string"},"phase":{"description":"资源池集群状态。可选值如下:\n- Creating:创建中\n- Running:运行中\n- Abnormal:资源池不正常\n- Deleting:删除中\n- Error:资源池错误","example":"Running","type":"string"},"resources":{"description":"资源池中不同状态的资源量。","properties":{"abnormal":{"$ref":"#/definitions/PoolResourceFlavorCount","description":"状态为非正常状态的资源量。"},"available":{"$ref":"#/definitions/PoolResourceFlavorCount","description":"状态为可用状态的资源量。"},"creating":{"$ref":"#/definitions/PoolResourceFlavorCount","description":"状态为创建中状态的资源量。"},"deleting":{"$ref":"#/definitions/PoolResourceFlavorCount","description":"状态为删除中状态的资源量。"}}},"root":{"description":"资源池根节点名称,物理池为自己的名称。","example":null,"type":"string"},"scope":{"description":"资源池业务状态信息。","items":{"properties":{"scopeType":{"description":"业务类型。可选值如下:\n- Train:训练任务\n- Infer:推理任务\n- Notebook:Notebook作业","example":"Train","type":"string"},"state":{"description":"业务状态。可选值如下:\n- Enabling:启动中\n- Enabled:已启动\n- Disabling:关闭中\n- Disabled:已关闭","example":"Enabled","type":"string"}},"required":["scopeType","state"]},"type":"array"}},"required":["phase"],"type":"object"},"PoolUpdateRequest":{"description":"更新网络资源的请求体。","properties":{"metadata":{"$ref":"#/definitions/PoolMetadataUpdate","description":"资源池的metadata信息。"},"spec":{"$ref":"#/definitions/PoolSpecUpdate","description":"资源池的描述信息。"}}}},"description":null,"group_id":"ade740e866904a7dbdaa5ec0f538d4d0","host":"modelarts.cn-north-4.myhuaweicloud.com","id":"806737fda1904d3eacb878f5888b4c40","info_version":"v1","method":"patch","name":"PatchPool","parameters":{},"paths":{"/v2/{project_id}/pools/{pool_name}":{"patch":{"consumes":["application/json"],"description":"更新指定的资源池。","operationId":"PatchPool","parameters":[{"description":"用户项目ID。获取方法请参见[获取项目ID和名称](modelarts_03_0147.xml)。","in":"path","name":"project_id","required":true,"type":"string"},{"description":"系统生成的资源池名称。","in":"path","name":"pool_name","required":true,"type":"string"},{"description":"实际的外部租户ID,如果有的话,工作空间鉴权以该ID为准。","in":"header","name":"X-ModelArts-User-ID","required":false,"type":"string"},{"description":"消息体的类型(格式),取值为application/merge-patch+json。","in":"header","name":"Content-Type","required":true,"type":"string"},{"description":"更新资源池的请求体。","in":"body","name":"UpdatePoolRequestBody","required":true,"schema":{"$ref":"#/definitions/PoolUpdateRequest"}}],"produces":["application/json"],"responses":{"200":{"description":"OK。","examples":{"application/json":{"apiVersion":"v2","kind":"Pool","metadata":{"annotations":{"os.modelarts/billing.mode":"0","os.modelarts/description":""},"creationTimestamp":"2022-09-16T03:10:40Z","labels":{"os.modelarts/name":"auto-pool-os","os.modelarts/resource.id":"maos-auto-pool-os-72w8d","os.modelarts/workspace.id":"0"},"name":"auto-pool-os-86c13962597848eeb29c5861153a391f"},"spec":{"network":{"name":"network-maos-86c13962597848eeb29c5861153a391f"},"resources":[{"count":3,"flavor":"modelarts.vm.cpu.4ud"}],"scope":["Train","Infer"],"type":"Dedicate"},"status":{"phase":"Running","resources":{"available":[{"azs":[{"az":"cn-north-7c","count":2}],"count":2,"flavor":"modelarts.vm.cpu.4ud"}],"creating":[{"azs":[{"az":"cn-north-7c","count":1}],"count":1,"flavor":"modelarts.vm.cpu.4ud"}]},"root":"auto-pool-os-86c13962597848eeb29c5861153a391f","scope":[{"scopeType":"Train","state":"Enabled"},{"scopeType":"Infer","state":"Enabled"}]}}},"schema":{"$ref":"#/definitions/PoolModel"}},"400":{"description":"Bad request","examples":{"application/json":{"error_code":"ModelArts.50004000","error_msg":"Bad request"}},"schema":{"$ref":"#/definitions/ErrorResponse"}},"404":{"description":"Not Found。","examples":{"application/json":{"error_code":"ModelArts.50015001","error_msg":"pool not found"}},"schema":{"$ref":"#/definitions/ErrorResponse"}}},"summary":"更新资源池","tags":["资源池管理"],"x-apiexplorer-hide":"N","x-is-registered":"Y","x-open-region-cloud":"hk,hc,hcso,hcs","x-order":4,"x-publish-doc":"Y","x-request-examples-1":{"spec":{"resources":[{"count":3,"flavor":"modelarts.vm.cpu.4ud"}]}},"x-request-examples-description-1":"资源池扩容。","x-request-examples-text-1":{"spec":{"resources":[{"count":3,"flavor":"modelarts.vm.cpu.4ud"}]}},"x-request-examples-url-1":"PATCH https://{endpoint}/v2/{project_id}/pools/{pool_name}","x-support-sdk":"N"}}},"product_short":"ModelArts","region_id":"cn-north-4","schemes":["HTTPS"],"security_definitions":{"ApiTokenAuth":{"in":"header","name":"X-Auth-Token","type":"apiKey"}},"summary":"更新资源池","tags":"资源管理","uri":null,"version":"2.0"}