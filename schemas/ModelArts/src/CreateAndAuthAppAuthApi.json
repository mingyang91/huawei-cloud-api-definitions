{"base_path":"/","components":null,"consumes":"[\"application/json;charset=UTF-8\",\"application/json\"]","definitions":{"ApiAndAuthResultResponse":{"description":"注册API并授权APP响应。","properties":{"api":{"$ref":"#/definitions/AuthTypeApiBasicInfo","description":"API详情。"},"auth_result":{"description":"授权结果。","items":{"$ref":"#/definitions/AppAuthResultInfo"},"type":"array"}},"title":"ApiAndAuthResultResponse","type":"object"},"ApiAppAuthRequest":{"description":"注册APP认证授权请求体。","properties":{"apps":{"description":"app列表。","items":{"$ref":"#/definitions/Apps"},"type":"array"},"workspace_id":{"description":"工作空间ID。获取方法请参见[查询工作空间列表](ListWorkspace.xml)。未创建工作空间时默认值为“0”,存在创建并使用的工作空间,以实际取值为准。","type":"string"}},"required":["apps"],"title":"ApiAppAuthRequest","type":"object"},"AppAuthResultInfo":{"description":"授权结果详情。","properties":{"api_id":{"description":"API的编号。","example":"af16117f92104aa0b533190fc6f183b2","type":"string"},"app_id":{"description":"APP的编号,可通过查询APP列表获取。","example":"c424e114dd0a4d88b5ed63510a3311c7","type":"string"},"auth_id":{"description":"授权编号,授权失败时为空。","example":"9531a1a929494e1499dfadc36fa08cad","type":"string"},"reason":{"description":"授权或者取消授权失败原因,授权成功时为空。","type":"string"},"success":{"description":"授权或者取消授权是否成功。","example":true,"type":"boolean"}},"title":"AppAuthResultInfo","type":"object"},"Apps":{"properties":{"app_id":{"description":"APP的编号,可通过查询APP列表获取。","example":"25df548befcd471b94c8e7a3c81c101e","type":"string"}},"type":"object"},"AuthTypeApiBasicInfo":{"description":"API认证详情。","properties":{"api_id":{"description":"API编号。","example":"528087f0cfec48f7959db7834ee441cb","type":"string"},"api_method":{"description":"请求方式包含GET、POST、PUT、DELETE、HEAD、PATCH、OPTIONS、ANY,固定返回ANY。","example":"ANY","type":"string"},"api_name":{"description":"API名称。","example":"testNoneAuth","type":"string"},"api_remark":{"description":"API描述。字符长度不超过255。","type":"string"},"auth_type":{"description":"API的认证方式。枚举值如下:\n- NONE:无认证\n- APP:APP认证\n- IAM:IAM认证","example":"APP","type":"string"},"predict_url":{"description":"预测地址。","example":"https://3565150c2e5c45d0989be40350dd80ed.apig.xxxxxx.com/test","type":"string"},"service_id":{"description":"服务编号。","example":"bb149aac-5ff4-497c-bb73-acb751e20a11","type":"string"},"service_name":{"description":"服务名称。","example":"service-hutest","type":"string"},"support_app_code":{"description":"是否支持APP CODE。","example":false,"type":"boolean"}},"required":["support_app_code"],"title":"AuthTypeApiBasicInfo","type":"object"},"ErrorResponse":{"description":"请求失败时返回的错误对象。","properties":{"error_code":{"description":"**参数解释**:ModelArts错误码。\n**取值范围**:不涉及。","type":"string"},"error_msg":{"description":"**参数解释**:具体错误信息。\n**取值范围**:不涉及。","type":"string"}},"required":["error_code","error_msg"],"type":"object"}},"description":null,"group_id":"ade740e866904a7dbdaa5ec0f538d4d0","host":"modelarts.cn-north-4.myhuaweicloud.com","id":"dd7f636296f84e908d6e1c639be2b76d","info_version":"v1","method":"post","name":"CreateAndAuthAppAuthApi","parameters":{},"paths":{"/v1/{project_id}/services/{service_id}/app-auth-api":{"post":{"consumes":["application/json"],"description":"注册API并将API授权给APP,只有对服务有更新权限的华为云用户可以调用。","operationId":"CreateAndAuthAppAuthApi","parameters":[{"description":"用户token。","in":"header","maxLength":65536,"minLength":1,"name":"X-Auth-Token","required":true,"type":"string"},{"description":"用户项目ID。获取方法请参见[获取项目ID和名称](modelarts_03_0147.xml)。","in":"path","maxLength":128,"minLength":1,"name":"project_id","required":true,"type":"string"},{"description":"服务编号,可通过查询服务列表获取。","in":"path","maxLength":128,"minLength":1,"name":"service_id","required":true,"type":"string"},{"description":"api授权应用请求体。","in":"body","name":"CreateAndAuthAppAuthApiRequestBody","required":true,"schema":{"$ref":"#/definitions/ApiAppAuthRequest"}}],"produces":["*/*"],"responses":{"200":{"description":"OK","examples":{"application/json":{"api":{"api_id":"b9c78dbb50d04230aab90e35e141fccf","api_method":"ANY","api_name":"infer_456963f1737c4de08bee5b4f6f3a8fa3","predict_url":"https://d566c7efafe04a26a83d3a8475602ee3.apig.xxxxxx.com/v1/infers/456963f1-737c-4de0-8bee-5b4f6f3a8fa3","service_id":"456963f1-737c-4de0-8bee-5b4f6f3a8fa3","service_name":"service-129c-test","support_app_code":true},"auth_result":[{"api_id":"b9c78dbb50d04230aab90e35e141fccf","app_id":"e2fb64be3be9418bb0f570c60f0ed93f","success":true}]}},"headers":{"X-Request-Id":{"description":"链路追踪编号","type":"string"}},"schema":{"$ref":"#/definitions/ApiAndAuthResultResponse"}},"400":{"description":"Bad Request","headers":{"X-Request-Id":{"description":"链路追踪编号","type":"string"}},"schema":{"$ref":"#/definitions/ErrorResponse"}},"401":{"description":"Unauthorized","headers":{"X-Request-Id":{"description":"链路追踪编号","type":"string"}},"schema":{"$ref":"#/definitions/ErrorResponse"}},"403":{"description":"Forbidden","headers":{"X-Request-Id":{"description":"链路追踪编号","type":"string"}},"schema":{"$ref":"#/definitions/ErrorResponse"}},"500":{"description":"Server Internal Error","headers":{"X-Request-Id":{"description":"链路追踪编号","type":"string"}},"schema":{"$ref":"#/definitions/ErrorResponse"}}},"summary":"注册API并授权给APP","tags":["APP认证管理"],"x-api-type":"open-api","x-apiexplorer-hide":"N","x-is-registered":"Y","x-open-region-cloud":"hk,hc","x-publish-doc":"Y","x-request-examples-1":{"apps":[{"app_id":"e2fb64be3be9418bb0f570c60f0ed93f"}],"workspace_id":"0"},"x-request-examples-description-1":"创建API并授权应用","x-request-examples-text-1":{"apps":[{"app_id":"e2fb64be3be9418bb0f570c60f0ed93f"}],"workspace_id":"0"},"x-request-examples-url-1":"POST https://{endpoint}/v1/{project_id}/services/{service_id}/app-auth-api","x-support-sdk":"N"}}},"product_short":"ModelArts","region_id":"cn-north-4","schemes":["HTTPS"],"security_definitions":{"ApiTokenAuth":{"in":"header","name":"X-Auth-Token","type":"apiKey"}},"summary":"注册API并授权给APP","tags":"APP认证管理","uri":null,"version":"2.0"}