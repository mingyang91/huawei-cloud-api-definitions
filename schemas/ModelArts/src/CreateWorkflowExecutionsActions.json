{"base_path":"/","components":null,"consumes":"[\"application/json;charset=UTF-8\",\"application/json\"]","definitions":{"Constraint":{"description":"条件。","properties":{"attribute":{"description":"条件属性,参数的某个字段值。","type":"string"},"operator":{"description":"操作,当前只支持equal操作。","type":"string"},"value":{"description":"取值。","type":"object"}},"type":"object"},"DataRequirement":{"description":"工作流需要的数据。","properties":{"conditions":{"description":"数据约束条件。","items":{"$ref":"#/definitions/Constraint"},"type":"array"},"delay":{"description":"延时参数标记。","type":"boolean"},"name":{"description":"训练数据的名称。填写1-64位,仅包含英文、数字、下划线(_)和中划线(-),并且以英文开头的名称。","example":"eval_dataset","type":"string"},"type":{"description":"数据来源类型。枚举值如下:\n- dataset:数据集\n- obs:OBS\n- swr:SWR\n- model_list:AI应用列表\n- label_task:标注任务\n- service:在线服务","enum":["dataset:数据集","obs:OBS文件"],"example":"dataset","type":"string"},"used_steps":{"description":"使用了这条数据的工作流节点。","example":["MyStep"],"items":{"type":"string"},"type":"array"},"value":{"additionalProperties":{"type":"object"},"description":"数据的值。","example":{"dataset_id":"0id4B4KncfMOALhLk9y","version_id":"fjnFcNxLkZzocqW8VlK"},"type":"object"}},"required":["name","type"],"type":"object"},"ExecutionAction":{"description":"操作Workflow Execution的动作。","properties":{"action_name":{"description":"操作名称,枚举如下:\n- stop 停止\n- rerun 重跑","enum":["stop"],"type":"string"},"data_requirements":{"description":"需要的数据。","items":{"$ref":"#/definitions/DataRequirement"},"type":"array"},"parameters":{"description":"参数。","items":{"$ref":"#/definitions/WorkflowParameter"},"type":"array"},"policies":{"$ref":"#/definitions/ExecutionActionPolicy","description":"动作策略。"}},"required":["action_name"],"type":"object"},"ExecutionActionPolicy":{"description":"执行动作策略。","properties":{"rerun_steps":{"description":"重跑的节点。","items":{"type":"string"},"type":"array"}},"type":"object"},"JobInput":{"description":"作业输入。","properties":{"data":{"description":"输入项数据。","example":{"dataset_id":"0id4B4KncfMOALhLk9y","version_id":"fjnFcNxLkZzocqW8VlK"},"type":"object"},"name":{"description":"输入数据的名称,支持1到64位只包含英文、数字、下划线(_)和中划线(-)的字符。","example":"training_set","type":"string"},"type":{"description":"输入项类型。枚举值如下:\n- dataset:数据集\n- obs:OBS\n- data_selector:数据选择","enum":["dataset:数据集。","obs:OBS文件。"],"type":"string"},"value":{"description":"输入项的值。","type":"object"}},"type":"object"},"JobOutput":{"description":"作业输出。","properties":{"config":{"additionalProperties":{"type":"object"},"description":"输出配置。","type":"object"},"name":{"description":"输出数据的名称。","example":"processed_dataset","type":"string"},"type":{"description":"输出项类型。枚举值如下:\n- obs:OBS\n- model:AI应用元模型","enum":["dataset:数据集。","obs:OBS文件"],"example":"obs","type":"string"}},"type":"object"},"StepCondition":{"description":"条件节点执行条件。","properties":{"left":{"description":"节点执行条件为true时的分支。","type":"object"},"right":{"description":"节点执行条件为false时的分支。","type":"object"},"type":{"description":"判断类型,例如==(等于)、!=(不等于)、>(大于)、>=(大于等于)、<(小于)、<=(小于等于)、in(包含)、or(或)。","type":"string"}},"type":"object"},"StepExecution":{"description":"单节点执行状态。","properties":{"conditions":{"items":{"$ref":"#/definitions/StepCondition"},"type":"array"},"conditions_execution":{"$ref":"#/definitions/WorkflowConditionExecution","description":"条件执行。"},"created_at":{"description":"Execution执行的创建时间。","example":"2020-12-28T14:43:01.118131+08:00","readOnly":true,"type":"string"},"duration":{"description":"Execution执行的运行时长。","example":1000,"type":"integer"},"error_info":{"$ref":"#/definitions/WorkflowErrorInfo","description":"Execution执行的错误信息。"},"events":{"description":"节点发生的事件。","items":{"type":"string"},"type":"array"},"inputs":{"description":"节点的输入项。","items":{"$ref":"#/definitions/JobInput"},"type":"array"},"instance_id":{"description":"实例ID。","type":"string"},"outputs":{"description":"节点的输出项。","items":{"$ref":"#/definitions/JobOutput"},"type":"array"},"policy":{"$ref":"#/definitions/WorkflowStepExecutionPolicy","description":"节点的执行策略。"},"properties":{"additionalProperties":{"type":"object"},"description":"节点的属性。","type":"object"},"status":{"description":"节点的状态。枚举值如下:\n- init:初始化\n- wait_inputs:等待输入\n- pending:等待\n- creating:创建中\n- created:创建成功\n- create_failed:创建失败\n- running:运行中\n- stopping:停止中\n- stopped:停止\n- timeout:超时\n- completed:完成\n- failed:失败\n- hold:持有\n- skipped:跳过","enum":["init","wait_inputs","pending","creating","created","create_failed","running","stopping","stopped","timeout","completed","failed","hold","skipped"],"type":"string"},"step_name":{"description":"节点的名称,在一个DAG中唯一,1到64位只包含中英文,数字,空格,下划线(_)和中划线(-),并且以中英文开头。","example":"MyStep","maxLength":64,"minLength":1,"type":"string"},"step_title":{"description":"节点标题。","type":"string"},"step_uuid":{"description":"节点的UUID,唯一性标识。","type":"string"},"type":{"description":"节点的类型。","enum":["traning_job"],"example":"training_job","type":"string"},"uuid":{"description":"唯一标识uuid。创建节点执行时,后台自动生成。","example":"c5cbaab2-c54b-453d-a898-5583eda0a8e5","readOnly":true,"type":"string"}},"type":"object"},"WorkflowConditionExecution":{"description":"workflow condition execution","properties":{"metric_list":{"description":"工作流度量信息列表。","items":{"$ref":"#/definitions/WorkflowMetricPair"},"type":"array"},"result":{"description":"执行结果。","type":"string"}},"type":"object"},"WorkflowDagPolicies":{"description":"dag policy struct","properties":{"use_cache":{"description":"是否使用缓存。","type":"boolean"}},"type":"object"},"WorkflowErrorInfo":{"description":"error info struct","properties":{"error_code":{"description":"错误码。","type":"string"},"error_message":{"description":"错误信息。","type":"string"}},"type":"object"},"WorkflowExecution":{"properties":{"created_at":{"description":"创建时间。","type":"string"},"data_requirements":{"description":"节点steps使用到的数据。","items":{"$ref":"#/definitions/DataRequirement"},"type":"array"},"description":{"description":"执行记录描述。","type":"string"},"duration":{"description":"执行的时长。","type":"string"},"events":{"description":"执行的事件。","items":{"type":"string"},"type":"array"},"execution_id":{"description":"工作流执行ID。","type":"string"},"labels":{"description":"为执行记录设置的标签。","items":{"type":"string"},"type":"array"},"name":{"description":"执行记录名称。","type":"string"},"parameters":{"description":"节点steps使用到的参数。","items":{"$ref":"#/definitions/WorkflowParameter"},"type":"array"},"policies":{"$ref":"#/definitions/WorkflowDagPolicies","description":"执行记录使用到的执行策略。"},"scene_id":{"description":"自定义场景ID。","type":"string"},"scene_name":{"description":"自定义场景名称。","type":"string"},"status":{"description":"执行记录状态。","type":"string"},"steps_execution":{"description":"执行记录的step。","items":{"$ref":"#/definitions/StepExecution"},"type":"array"},"sub_graphs":{"description":"子图。","items":{"$ref":"#/definitions/WorkflowSubgraph"},"type":"array"},"workflow_id":{"description":"Workflow工作流ID。","type":"string"},"workflow_name":{"description":"工作流名称。填写1-64位,仅包含英文、数字、下划线(_)和中划线(-),并且以英文开头的名称。","type":"string"},"workspace_id":{"description":"工作空间ID。","type":"string"}},"type":"object"},"WorkflowMetricPair":{"description":"workflow metric pair","properties":{"key":{"description":"度量信息metric的key。","type":"string"},"value":{"description":"度量信息metric的值。","type":"object"}},"type":"object"},"WorkflowParameter":{"description":"参数。","properties":{"constraint":{"additionalProperties":{"type":"object"},"description":"限制条件。","type":"object"},"default":{"description":"配置参数的默认值。","example":"c5cbaab2-c54b-453d-a898-5583eda0a8e5","type":"object"},"delay":{"description":"是否为延迟输入的参数,默认为否。","type":"boolean"},"description":{"description":"Workflow工作流配置参数的描述。","example":"该参数为一个算法的ID","type":"string"},"enum":{"description":"Workflow工作流配置参数的枚举项。","example":["abc","bcd","cde"],"items":{"oneOf":[{"type":"string"},{"type":"integer"},{"type":"number"}]},"type":"array"},"example":{"description":"Workflow工作流配置参数的样例。","example":"c5cbaab2-c54b-453d-a898-5583eda0a8e5","type":"object"},"format":{"description":"数据格式。","type":"string"},"name":{"description":"Workflow工作流配置参数的名称。填写1-64位,仅包含英文、数字、下划线(_)和中划线(-),并且以英文开头的名称。","example":"training_algo_id","type":"string"},"type":{"description":"参数的类型,枚举值如下:\n- str:字符串\n- int:整型\n- bool:布尔类型\n- float:浮点型","enum":["str:字符串类型","int:整型","bool:布尔类型","float:浮点型"],"example":"str","type":"string"},"used_steps":{"description":"使用这个参数的工作流节点。","example":["MyStep"],"items":{"type":"string"},"type":"array"},"value":{"description":"参数值。","example":"c5cbaab2-c54b-453d-a898-5583eda0a8e5","type":"object"}},"type":"object"},"WorkflowStepExecutionPolicy":{"description":"workflow step execution 策略。","properties":{"execution_policy":{"description":"执行策略,可选值如下:\n- retry:重试\n- stop:停止\n- continue:继续运行","type":"string"},"use_cache":{"description":"是否使用的是缓存。","type":"boolean"}},"type":"object"},"WorkflowSubgraph":{"description":"子图。","properties":{"name":{"description":"子图名称。","type":"string"},"steps":{"description":"子图step成员。","items":{"type":"string"},"type":"array"}},"type":"object"}},"description":null,"group_id":"ade740e866904a7dbdaa5ec0f538d4d0","host":"modelarts.cn-north-4.myhuaweicloud.com","id":"75f49e170aa64e349c3dbba80bcf0e5f","info_version":"v1","method":"post","name":"CreateWorkflowExecutionsActions","parameters":{"execution_id":{"description":"工作流执行ID。","in":"path","name":"execution_id","required":true,"type":"string"},"projectId":{"description":"用户项目ID。获取方法请参见[获取项目ID和名称](modelarts_03_0147.xml)。","in":"path","name":"project_id","required":true,"type":"string"},"workflow_id":{"description":"工作流的ID。","in":"path","name":"workflow_id","required":true,"type":"string"}},"paths":{"/v2/{project_id}/workflows/{workflow_id}/executions/{execution_id}/actions":{"post":{"description":"本接口支持对Workflow Execution进行停止或重跑操作。","operationId":"CreateWorkflowExecutionsActions","parameters":[{"$ref":"#/parameters/projectId"},{"$ref":"#/parameters/workflow_id"},{"$ref":"#/parameters/execution_id"},{"description":"Execution操作。","in":"body","name":"body","required":false,"schema":{"$ref":"#/definitions/ExecutionAction"}}],"responses":{"201":{"description":"OK","examples":{"application/json":{"created_at":"2022-08-25T17:01:52.490825+08:00","data_requirements":[{"conditions":[{"attribute":"model_name","operator":"equal","value":"model_test444444222222"}],"delay":true,"name":"si_placeholder1","type":"model_list","used_steps":["service_step"]},{"conditions":[{"attribute":"model_name","operator":"equal","value":"model_test444444222222"},{"attribute":"envs","operator":"equal","value":{"infer_address":"$ref/consumptions/service_step/service_output/access_address"}}],"delay":true,"name":"si_placeholder2","type":"model_list","used_steps":["service_step2"]}],"description":"","duration":1,"events":["2022-08-25 17:01:53 step service_step change status from init to wait_inputs"],"execution_id":"4dd2a2f5-bde2-45dd-af6b-5e5d570118d1","name":"execution-005","parameters":[{"delay":true,"description":"Set how long the deployed service will stop in hours, where -1 means the service will always run","format":"schedule","name":"schedule_KZ27","type":"int","used_steps":["service_step","service_step2"]},{"name":"placeholder_name","type":"str","used_steps":["service_step","service_step2"],"value":"model_test4444"}],"policies":{},"status":"running","steps_execution":[{"created_at":"2022-08-25T17:01:52.500034+08:00","duration":1,"events":["2022-08-25 17:01:53 change status from init to wait_inputs"],"policy":{},"status":"wait_inputs","step_name":"service_step","step_title":"service_step","uuid":"54979c30-cc48-4eaa-8b0f-b6eb6e000bb5"}],"workflow_id":"bd0ac50e-69b1-4d20-ae38-abb221084fc6","workflow_name":"workflow-service-infer","workspace_id":"0"}},"schema":{"$ref":"#/definitions/WorkflowExecution"}}},"schemes":["https"],"summary":"管理Workflow Execution","tags":["WorkflowExecution"],"x-api-type":"internal-api","x-constraint":"无","x-is-registered":"Y","x-open-region-cloud":"hc,hcs,fcs,fcs-super","x-publish-doc":"Y","x-request-examples-1":{"action_name":"stop"},"x-request-examples-description-1":"停止工作流","x-request-examples-text-1":{"action_name":"stop"},"x-request-examples-url-1":"POST https://{endpoint}/v2/{project_id}/workflows/{workflow_id}/executions/4dd2a2f5-bde2-45dd-af6b-5e5d570118d1/actions"}}},"product_short":"ModelArts","region_id":"cn-north-4","schemes":["HTTPS"],"security_definitions":{"ApiTokenAuth":{"in":"header","name":"X-Auth-Token","type":"apiKey"}},"summary":"管理Workflow Execution","tags":"Workflow工作流管理","uri":null,"version":"2.0"}