{"base_path":"/","components":null,"consumes":"[\"application/json;charset=UTF-8\",\"application/json\"]","definitions":{"CreateModelRequest":{"description":"创建模型的请求体参数信息。","properties":{"apis":{"description":"模型所有的apis入参出参信息,从配置文件中解析出来的,可不填。**非模板参数**","items":{"$ref":"#/definitions/CreateModelRequestModelApis"},"type":"array"},"dependencies":{"description":"推理代码及模型需安装的包,默认为空。从配置文件读取,可不填。**非模板参数**","items":{"$ref":"#/definitions/ModelDependencies"},"type":"array"},"description":{"description":"模型备注信息,1-100位长度,不能包含&!'\"<>=。**公共参数**","pattern":"^[^&!'\"<>=]{1,100}$","type":"string"},"execution_code":{"description":"执行代码存放的OBS地址,默认值为空,名称固定为“customize_service.py”。推理代码文件需存放在模型“model”目录。该字段不需要填,系统也能自动识别出model目录下的推理代码。**公共参数**","type":"string","x-apiexplorer-hide":true},"initial_config":{"description":"模型配置文件转成的字符串。建议通过配置文件initial_config来提供“apis”、“dependencies”、“input_params”、“output_params”、\"health\"、\"readiness_health\"、\"startup_health\"等字段的信息。**非模板参数**","type":"string"},"input_params":{"description":"模型的输入参数集,默认为空,params结构如表 params结构所示。从配置文件的apis读取,用户提供“initial_config”字段即可,可不填该字段。**非模板参数**","items":{"$ref":"#/definitions/CreateModelRequestInferParams"},"type":"array"},"install_type":{"description":"部署类型,只支持小写。可选real-time、edge、batch,默认为[\"real-time\",\"edge\",\"batch\"]。","items":{"type":"string"},"type":"array"},"model_algorithm":{"description":"模型算法,从配置文件读取,可不填。如:“predict_analysis”、“object_detection ”、“image_classification”。**非模板参数**","type":"string"},"model_docs":{"description":"模型说明文档列表,最多三篇。**公共参数**","items":{"$ref":"#/definitions/GuideDoc"},"maxItems":3,"minItems":0,"type":"array"},"model_metrics":{"description":"模型精度信息,从配置文件读取,可不填。**非模板参数**","type":"string"},"model_name":{"description":"模型名称,支持1-64位可见字符(含中文),名称可以包含字母、中文、数字、中划线、下划线。**公共参数**","maxLength":64,"minLength":1,"type":"string"},"model_type":{"description":"模型类型,取值为TensorFlow/Image/PyTorch/Template/MindSpore,从配置文件读取。**公共参数**","enum":["TensorFlow","MXNet","Caffe","Spark_MLlib","Scikit_Learn","XGBoost","Image","PyTorch","Template"],"type":"string"},"model_version":{"description":"模型版本,格式需为“数值.数值.数值”,其中数值为1-2位正整数, 注意:版本不可以出现例如01.01.01等以0开头的版本号形式。**公共参数**","pattern":"^(\\d\\.|[1-9]\\d\\.){2}(\\d|([1-9]\\d))$","type":"string"},"output_params":{"description":"模型的输出参数集,默认为空,params结构如表 params结构所示。从配置文件的apis读取,用户提供“initial_config”字段即可,可不填该字段。**非模板参数**","items":{"$ref":"#/definitions/CreateModelRequestInferParams"},"type":"array"},"runtime":{"description":"模型运行时环境,runtime可选值与model_type相关,详细见[推理支持的常用引擎及其Runtime](https://support.huaweicloud.com/inference-modelarts/inference-modelarts-0003.html#section3)。","enum":["python2.7","python3.6"],"type":"string"},"source_copy":{"description":"镜像复制开关,仅当“model_type”为“Image”时有效。\n\n取值范围:\n\n- true:默认值,复制镜像模式,无法极速创建AI应用,SWR源目录中的镜像更改或删除不影响服务部署。\n- false:不复制镜像模式,可极速创建AI应用,更改或删除SWR源目录中的镜像会影响服务部署。","type":"string"},"source_job_id":{"description":"来源训练作业的ID,模型是从训练作业产生的可填写,用于溯源;如模型是从第三方元模型导入,则为空。默认值为空。**非模板参数**","type":"string"},"source_job_version":{"description":"来源训练作业的版本,模型是从训练作业产生的可填写,用于溯源;如模型是从第三方元模型导入,则为空。默认值为空。**非模板参数**","type":"string"},"source_location":{"description":"模型所在的OBS路径或SWR镜像地址。","pattern":"http[s]?://[^/]+/.+|^[a-zA-Z0-9.:_-]+/[a-z0-9._-]+/[a-zA-Z0-9._-]+:[a-zA-Z0-9._-]+","type":"string"},"source_type":{"description":"模型来源的类型,当前仅可取值“auto”,用于区分通过自动学习部署过来的模型(不提供模型下载功能);用户通过训练作业和其他方式部署的模型不设置此值。默认值为空。**非模板参数**","enum":["auto"],"type":"string","x-apiexplorer-hide":true},"template":{"$ref":"#/definitions/ModelTemplate","description":"模板的相关配置项。使用模板导入模型(即model_type为Template)时必选。**模板参数**"},"workspace_id":{"default":"0","description":"工作空间ID。获取方法请参见[查询工作空间列表](ListWorkspace.xml)。未创建工作空间时默认值为“0”,存在创建并使用的工作空间,以实际取值为准。","type":"string"}},"required":["model_version","source_location","model_type","model_name"],"type":"object"},"CreateModelRequestInferParams":{"description":"模型推理参数","properties":{"max":{"description":"参数的最大值。当param_type为int或float时可选填,默认为空。","type":"number"},"method":{"description":"请求方法,可选“post”、“get”。","enum":["post","get"],"type":"string"},"min":{"description":"参数的最小值。当param_type为int或float时可选填,默认为空。","type":"number"},"param_desc":{"description":"参数描述,建议长度设置不超过100个字符,默认为空。","type":"string"},"param_name":{"description":"参数名,建议长度设置不超过64个字符。","type":"string"},"param_type":{"description":"参数类型,取值可选int/string/float/timestamp/date/file。","enum":["int","string","number","array","object","file"],"type":"string"},"protocol":{"description":"请求协议,可选HTTP和HTTPS。","type":"string"},"url":{"description":"api代表的url路径。","type":"string"}},"required":["protocol","method","param_name","url","param_type"]},"CreateModelRequestModelApis":{"description":"模型所有的apis入参出参信息","properties":{"input_params":{"$ref":"#/definitions/ModelInOutputParams"},"method":{"description":"请求方法,可选post、get。","enum":["post","get"],"type":"string"},"output_params":{"$ref":"#/definitions/ModelInOutputParams"},"protocol":{"description":"请求协议,可选HTTP和HTTPS。","type":"string"},"url":{"description":"推理请求URL路径","type":"string"}},"type":"object"},"CreateModelRequestTemplateInput":{"properties":{"input":{"description":"模板输入路径,可以是obs文件路径,obs目录路径,使用多输入项的模板创建模型时,如果模板定义的目标路径input_properties是一样的,则此处输入的obs目录或者obs文件不能重名,否则会覆盖。","type":"string"},"input_id":{"description":"输入项id,从模板详情中获取。","type":"string"}},"required":["input","input_id"],"type":"object"},"CreateModelResponse":{"description":"创建模型成功的响应。","properties":{"model_id":{"description":"模型id。","example":"10eb0091-887f-4839-9929-cbc884f1e20e","type":"string"}},"type":"object"},"GuideDoc":{"properties":{"doc_name":{"description":"文档名称,支持1-48位可见字符(含中文),只能以英文大小写字母或者中文字符开头,名称可以包含字母、中文、数字、中划线、下划线。","example":"使用样例","type":"string"},"doc_url":{"description":"文档http(s)链接。","example":"http://some_safe_host","type":"string"}},"required":["doc_name","doc_url"],"type":"object"},"ModelDependencies":{"description":"运行代码及模型需安装的包列表。","properties":{"installer":{"description":"安装方式,当前只支持pip。","enum":["pip"],"type":"string"},"packages":{"description":"依赖包集合。","items":{"$ref":"#/definitions/Packages"},"type":"array"}},"required":["installer","packages"],"type":"object"},"ModelInOutputParams":{"description":"apis中的输入输出参数,以JSON Schema格式描述。","properties":{"properties":{"$ref":"#/definitions/ParamsData"},"type":{"description":"JSON Schema中表示类型的字段,可选object。","enum":["object"],"example":"object","type":"string"}},"type":"object"},"ModelTemplate":{"description":"模板的相关配置项。","properties":{"infer_format":{"description":"输入输出模式id,提供时覆盖模板中的内置输入输出模式。","type":"string"},"template_id":{"description":"所使用的模板id,模板中会内置一个输入输出模式。","type":"string"},"template_inputs":{"description":"模板输入项配置,即配置模型的源路径。","items":{"$ref":"#/definitions/CreateModelRequestTemplateInput"},"type":"array"}},"required":["template_inputs","template_id"],"type":"object"},"Packages":{"properties":{"package_name":{"description":"依赖包名称。请确保包名正确且存在。不能含有中文及特殊字符&!'\"<>=。","type":"string"},"package_version":{"description":"依赖包版本。不填时默认安装最新版本。不能含有中文及特殊字符&!'\"<>=。","type":"string"},"restraint":{"description":"版本限制条件,当且仅当package_version存在时必填,取值包含:\n- EXACT:和指定的版本完全一致。\n- ATLEAST:不低于指定的版本。\n- ATMOST:不高于指定的版本。","enum":["EXACT","ATLEAST","ATMOST"],"type":"string"}},"required":["package_name"],"type":"object"},"ParamsData":{"description":"JSON Schema中表示对象元素的properties字段,可在其中定义参数,包括参数名及其类型。","example":{"images":{"type":"file"}},"type":"object"}},"description":null,"group_id":"ade740e866904a7dbdaa5ec0f538d4d0","host":"modelarts.cn-north-4.myhuaweicloud.com","id":"73459c5838be418fa85f940f4fb52880","info_version":"v1","method":"post","name":"CreateModel","parameters":{},"paths":{"/v1/{project_id}/models":{"post":{"description":"导入元模型创建AI应用。\n执行代码、模型需先上传至OBS(训练作业生成的模型已默认存储到OBS)。","operationId":"CreateModel","parameters":[{"description":"用户项目ID。获取方法请参见[获取项目ID和名称](modelarts_03_0147.xml)。","in":"path","name":"project_id","required":true,"type":"string","x-example":"0500cb339e00d3262f37c01db69d3e61"},{"description":"用户Token。通过调用IAM服务获取用户Token接口获取(响应消息头中X-Subject-Token的值)。","in":"header","name":"X-Auth-Token","required":true,"type":"string","x-example":"MIIDkgYJKoZIhvcNAQcCoIIDgzCCXXXXX..."},{"description":"创建模型的请求体。","in":"body","name":"CreateModelRequestBody","required":true,"schema":{"$ref":"#/definitions/CreateModelRequest"}}],"responses":{"200":{"description":"模型创建成功。","examples":{"application/json":{"model_id":"7feb7235-ed9c-48ae-9833-2876b2458445"}},"schema":{"$ref":"#/definitions/CreateModelResponse"}}},"summary":"创建AI应用","tags":["AI应用管理"],"x-api-type":"open-api","x-constraint":"使用模板导入模型与不使用模板导入这两类导入方式的Body参数要求不一样。以下Body参数说明中以**模板参数**表示适合使用模板导入模型时填写的参数,**非模板参数**表示适合不使用模板导入时填写的参数,**公共参数**表示与导入方式无关的参数。\n- 使用模板导入模型时(model_type为Template),template字段必填,source_location不需要填。\n- 不使用模板导入模型时(即model_type不为Template),source_location必填,template不需要填。","x-is-registered":"Y","x-open-region-cloud":"hk,hc,fcs","x-publish-doc":"Y","x-request-examples-1":{"apis":[{"input_params":{"properties":{"image_url":{"type":"string"}},"type":"object"},"method":"post","output_params":{"properties":{"face_location":{"type":"box"}},"type":"object"},"protocol":"http","url":"/v1/xxx/image"}],"dependencies":[{"installer":"pip","packages":[{"package_name":"numpy","package_version":"1.5.0","restraint":"ATLEAST"}]}],"description":"mnist model","execution_code":"https://testmodel.obs.xxxxx.com/customize_service.py","initial_config":"{\"protocol\":\"http\",\"port\":\"8080\",\"health\":{\"check_method\":\"HTTP\",\"protocol\":\"http\",\"url\":\"/health\",\"period_seconds\":\"5\",\"failure_threshold\":\"10\",\"initial_delay_seconds\":\"12\"},\"readiness_health\":{\"check_method\":\"HTTP\",\"protocol\":\"http\",\"url\":\"/readiness_health\",\"period_seconds\":\"5\",\"failure_threshold\":\"20\",\"initial_delay_seconds\":\"12\"},\"startup_health\":{\"check_method\":\"HTTP\",\"protocol\":\"http\",\"url\":\"/startup_health\",\"period_seconds\":\"5\",\"failure_threshold\":\"10\",\"initial_delay_seconds\":\"12\"}}","input_params":[{"max":9,"method":"post","min":0,"param_desc":"http://test/test.jpeg","param_name":"image_url","param_type":"string","protocol":"http","url":"/v1/xxx/image"}],"model_algorithm":"object_detection","model_metrics":"{\"f1\":0.52381,\"recall\":0.666667,\"precision\":0.466667,\"accuracy\":0.625}","model_name":"mnist","model_type":"TensorFlow","model_version":"1.0.0","output_params":[{"method":"post","param_desc":"face_location param value description","param_name":"face_location","param_type":"box","protocol":"http","url":"/v1/xxx/image"}],"runtime":"python2.7","source_job_id":"55","source_job_version":"V100","source_location":"https://models.obs.xxxxx.com/mnist"},"x-request-examples-description-1":"创建AI应用。设置AI应用名称为“mnist”,版本为“1.0.0”,类型为“TensorFlow”,模型文件来源于OBS桶。","x-request-examples-text-1":{"apis":[{"input_params":{"properties":{"image_url":{"type":"string"}},"type":"object"},"method":"post","output_params":{"properties":{"face_location":{"type":"box"}},"type":"object"},"protocol":"http","url":"/v1/xxx/image"}],"dependencies":[{"installer":"pip","packages":[{"package_name":"numpy","package_version":"1.5.0","restraint":"ATLEAST"}]}],"description":"mnist model","execution_code":"https://testmodel.obs.xxxxx.com/customize_service.py","initial_config":"{\"protocol\":\"http\",\"port\":\"8080\",\"health\":{\"check_method\":\"HTTP\",\"protocol\":\"http\",\"url\":\"/health\",\"period_seconds\":\"5\",\"failure_threshold\":\"10\",\"initial_delay_seconds\":\"12\"},\"readiness_health\":{\"check_method\":\"HTTP\",\"protocol\":\"http\",\"url\":\"/readiness_health\",\"period_seconds\":\"5\",\"failure_threshold\":\"20\",\"initial_delay_seconds\":\"12\"},\"startup_health\":{\"check_method\":\"HTTP\",\"protocol\":\"http\",\"url\":\"/startup_health\",\"period_seconds\":\"5\",\"failure_threshold\":\"10\",\"initial_delay_seconds\":\"12\"}}","input_params":[{"max":9,"method":"post","min":0,"param_desc":"http://test/test.jpeg","param_name":"image_url","param_type":"string","protocol":"http","url":"/v1/xxx/image"}],"model_algorithm":"object_detection","model_metrics":"{\"f1\":0.52381,\"recall\":0.666667,\"precision\":0.466667,\"accuracy\":0.625}","model_name":"mnist","model_type":"TensorFlow","model_version":"1.0.0","output_params":[{"method":"post","param_desc":"face_location param value description","param_name":"face_location","param_type":"box","protocol":"http","url":"/v1/xxx/image"}],"runtime":"python2.7","source_job_id":"55","source_job_version":"V100","source_location":"https://models.obs.xxxxx.com/mnist"},"x-request-examples-url-1":"POST https://{endpoint}/v1/{project_id}/models","x-support-sdk":"N"}}},"product_short":"ModelArts","region_id":"cn-north-4","schemes":["HTTPS"],"security_definitions":{"ApiTokenAuth":{"in":"header","name":"X-Auth-Token","type":"apiKey"}},"summary":"创建AI应用","tags":"AI应用管理","uri":null,"version":"2.0"}