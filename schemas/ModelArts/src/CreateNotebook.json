{"base_path":"/","components":null,"consumes":"[\"application/json;charset=UTF-8\",\"application/json\"]","definitions":{"Config":{"properties":{"script":{"description":"自定义脚本内容(base64编码)或脚本绝对路径。","type":"string"},"type":{"description":"脚本类型:\n- COMMAND script中需要指定脚本内容(base64编码)。 \n- SCRIPT 默认值,script中需要指定脚本路径。","type":"string"}},"type":"object"},"ContainerHooks":{"properties":{"post_start":{"$ref":"#/definitions/Config","description":"启动服务后脚本配置。"},"pre_start":{"$ref":"#/definitions/Config","description":"启动服务前脚本配置。"}},"type":"object"},"CustomHooks":{"description":"自定义启动脚本钩子配置。","properties":{"container_hooks":{"$ref":"#/definitions/ContainerHooks","description":"容器相关的钩子配置。"}},"type":"object"},"EndpointsReq":{"description":"本地IDE(如PyCharm、VS Code)或SSH客户端,通过SSH远程接入Notebook实例时需要的相关配置。","properties":{"allowed_access_ips":{"description":"允许远程接入的公网IP地址列表,最多5个。","example":"allowedAccessIps","items":{"type":"string"},"type":"array"},"dev_service":{"description":"支持的服务,枚举值如下:\n - NOTEBOOK:可以通过https协议访问Notebook。\n - SSH:可以通过SSH协议远程连接Notebook。","type":"string"},"ssh_keys":{"description":"SSH密钥对名称,可以在云服务器控制台(ECS)“密钥对”页面创建和查看。","example":"sshKeys","items":{"type":"string"},"type":"array"}},"title":"EndpointsReq","type":"object"},"EndpointsRes":{"description":"本地IDE(如PyCharm、VS Code)或SSH客户端,通过SSH远程接入Notebook实例时需要的相关配置。","properties":{"allowed_access_ips":{"description":"允许通过SSH协议访问Notebook的公网IP地址白名单列表,默认都可以访问。当配置指定IP后,则仅允许IP所在的客户端实现对Notebook的访问。","items":{"type":"string"},"type":"array"},"dev_service":{"description":"访问Notebook的途径,枚举值如下:\n - NOTEBOOK:可以通过https协议访问Notebook。\n - SSH:可以通过SSH协议远程连接Notebook。","type":"string"},"service":{"description":"访问Notebook的途径,枚举值如下:\n - NOTEBOOK:可以通过https协议访问Notebook。\n - SSH:可以通过SSH协议远程连接Notebook。","enum":["NOTEBOOK","SSH"],"type":"string"},"ssh_keys":{"description":"SSH密钥对名称列表,允许设置多个密钥对实现同时对SSH实例的访问。","items":{"type":"string"},"type":"array"},"uri":{"description":"实例私有IP地址。","maxLength":256,"minLength":0,"type":"string"}},"title":"EndpointsRes","type":"object"},"Image":{"description":"实例镜像信息。","properties":{"arch":{"description":"该镜像所支持处理器架构类型。枚举值如下:\n- X86_64:x86处理器架构。 \n- AARCH64:ARM体系架构。","enum":["AARCH64","X86_64"],"type":"string"},"create_at":{"description":"镜像创建的时间,UTC毫秒。","format":"int64","type":"integer"},"description":{"description":"该镜像所对应的描述信息,长度限制512个字符。","type":"string"},"dev_services":{"description":"镜像支持的服务。枚举值如下:\n- NOTEBOOK:镜像支持通过https协议访问Notebook。 \n- SSH:镜像支持本地IDE通过SSH协议远程连接Notebook。","items":{"enum":["NOTEBOOK","SSH"],"type":"string"},"type":"array","uniqueItems":true},"id":{"description":"待创建Notebook实例的镜像,需要指定镜像ID,ID格式为通用唯一识别码(Universally Unique Identifier,简称UUID)。预置镜像的ID参考[查询支持的镜像列表](ListImage.xml)获取。","type":"string"},"name":{"description":"镜像名称,长度限制512个字符,支持小写字母、数字、中划线、下划线和点。","type":"string"},"namespace":{"description":"镜像所属组织,可以在SWR控制台“组织管理”创建和查看。","type":"string"},"origin":{"description":"指定镜像来源,可选项,默认自定义构建镜像为CUSTOMIZE。枚举值如下:\n- CUSTOMIZE:用户自定义构建镜像。 \n- IMAGE_SAVE:Notebook实例保存镜像。","enum":["CUSTOMIZE","IMAGE_SAVE"],"type":"string"},"resource_categories":{"description":"镜像支持的规格。枚举值如下:\n- CPU \n- GPU \n- ASCEND","items":{"enum":["ASCEND","CPU","GPU"],"type":"string"},"type":"array","uniqueItems":true},"service_type":{"description":"镜像支持服务类型。枚举值如下:\n- COMMON:通用镜像。\n- INFERENCE: 建议仅在推理部署场景使用。\n- TRAIN: 建议仅在训练任务场景使用。\n- DEV: 建议仅在开发调测场景使用。\n- UNKNOWN: 未明确设置的镜像支持的服务类型。","enum":["COMMON","DEV","INFERENCE","TRAIN","UNKNOWN"],"example":"COMMON","type":"string"},"size":{"description":"镜像大小(单位KB)。","format":"int64","type":"integer"},"status":{"description":"镜像状态。枚举值如下:\n- INIT:初始化。\n- CREATING:镜像保存中,此时Notebook不可用。\n- CREATE_FAILED:镜像保存失败。\n- ERROR:错误。\n- DELETED:已删除。\n- ACTIVE:镜像保存成功,保存的镜像可以在SWR控制台查看,同时可以基于保存的镜像创建Notebook实例。","enum":["ACTIVE","CREATE_FAILED","CREATING","DELETED","ERROR","INIT"],"type":"string"},"status_message":{"description":"镜像保存操作过程中,构建信息展示。","type":"string"},"support_res_categories":{"description":"镜像支持的规格。 枚举值如下:\n- CPU \n- GPU \n- ASCEND","items":{"enum":["ASCEND","CPU","GPU"],"type":"string"},"type":"array","uniqueItems":true},"swr_path":{"description":"SWR镜像地址。","type":"string"},"tag":{"description":"镜像Tag。","type":"string"},"type":{"description":"镜像类型。枚举值如下: \n- BUILD_IN:系统内置镜像。 \n- DEDICATED:用户保存的镜像。","enum":["BUILD_IN","DEDICATED"],"type":"string"},"update_at":{"description":"镜像最后更新的时间,UTC毫秒。","format":"int64","type":"integer"},"visibility":{"description":"镜像可见度。枚举值如下:\n- PRIVATE:私有镜像。\n- PUBLIC: 所有用户可以根据ImageId来进行只读使用。","enum":["HIDDEN","PRIVATE","PUBLIC"],"example":"PRIVATE","type":"string"},"workspace_id":{"description":"工作空间ID。未创建工作空间时默认值为“0”,存在创建并使用的工作空间,以实际取值为准。","type":"string"}},"title":"Image","type":"object"},"JobProgress":{"description":"实例初始化进度。","properties":{"notebook_id":{"description":"实例ID。","example":"000102b4-a744-422d-9a1d-e474d17a7d77","type":"string"},"status":{"description":"任务某个步骤的状态。枚举值如下:\n- WAITING:等待中\n- PROCESSING:处理中\n- FAILED:任务失败\n- COMPLETED:任务完成","enum":["COMPLETED","FAILED","PROCESSING","WAITING"],"type":"string"},"step":{"description":"任务的步骤。枚举值如下:\n- 1:准备存储\n- 2:准备计算资源\n- 3:配置网络\n- 4:初始化实例","format":"int32","type":"integer"},"step_description":{"description":"任务某个步骤的描述。","type":"string"}},"title":"JobProgress","type":"object"},"Lease":{"description":"实例自动停止的倒计时信息。","properties":{"create_at":{"description":"实例创建的时间,UTC毫秒。","format":"int64","type":"integer"},"duration":{"description":"实例运行时长,以创建时间为起点计算,即“创建时间+duration > 当前时刻”时,系统会自动停止实例。","format":"int64","type":"integer"},"enable":{"description":"是否启用自动停止功能。","type":"boolean"},"type":{"description":"自动停止类别。\n- timing:自动停止。\n- idle:空闲停止。","enum":["timing","idle"],"example":"timing","type":"string"},"update_at":{"description":"实例最后更新(不包括探活心跳)的时间,UTC毫秒。","format":"int64","type":"integer"}},"title":"Lease","type":"object"},"LeaseReq":{"description":"实例租约配置。","properties":{"duration":{"default":3600000,"description":"定时停止,以当前时刻为起点,运行的时长(到期后自动停止)。单位:毫秒。","example":3600000,"format":"int64","maximum":259200000,"minimum":3600000,"type":"integer"},"type":{"default":"timing","description":"自动停止类别,默认为timing。","enum":["timing","idle"],"example":"timing","type":"string"}},"type":"object"},"NotebookCreateRequest":{"properties":{"description":{"description":"实例描述信息,长度限制为512字符,且不能包含字符&<>\"'/。","type":"string","x-maxLength":512,"x-minLength":0},"duration":{"description":"以当前时刻为起点,运行的时长(到期后自动停止),推荐该属性在leaseReq中配置,若此处有值则忽略leaseReq的值,且实例自动停止类型为定时停止。单位:毫秒。","example":3600000,"format":"int64","type":"integer"},"endpoints":{"description":"本地IDE(如PyCharm、VS Code)或SSH客户端,通过SSH远程接入Notebook实例时需要的相关配置。","items":{"$ref":"#/definitions/EndpointsReq"},"type":"array"},"feature":{"description":"实例类别,默认为NOTEBOOK。枚举值:\n- DEFAULT:CodeLab免费规格实例,每个用户最多只能创建一个。\n- NOTEBOOK:计费规格实例。","enum":["DEFAULT","NOTEBOOK"],"type":"string"},"flavor":{"description":"实例的机器规格。如下规格仅供参照,实际支持规格以具体区域为准。\n- modelarts.vm.cpu.2u:Intel CPU通用规格,用于快速数据探索和实验。\n- modelarts.vm.cpu.8u:Intel CPU算力增强型,适用于密集计算场景下运算。","pattern":"^[a-zA-Z0-9.]{1,128}$","type":"string"},"hooks":{"$ref":"#/definitions/CustomHooks","description":"自定义启动脚本钩子配置。"},"image_id":{"description":"待创建Notebook实例的镜像,需要指定镜像ID,ID格式为通用唯一识别码(Universally Unique Identifier,简称UUID)。镜像的ID可通过调用[查询支持的镜像列表](ListImage.xml)接口获取。","pattern":"^[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$","type":"string"},"lease":{"$ref":"#/definitions/LeaseReq","description":"实例租约配置。"},"name":{"description":"实例名称,长度限制为128个字符,支持大小写字母、数字、中划线和下划线,名称可重复。","pattern":"(^[a-z][-a-z0-9]{2,62}[a-z0-9]$)","type":"string"},"pool_id":{"description":"专属资源池ID,若需要指定专属资源池创建实例时必填,示例:pool41664192。","pattern":"^pool[0-9a-z]{8}$","type":"string"},"volume":{"$ref":"#/definitions/VolumeReq","description":"存储配置。"},"workspace_id":{"description":"工作空间ID。未创建工作空间时默认值为“0”,存在创建并使用的工作空间,以实际取值为准。","pattern":"^[0-9a-z]{32}|0$","type":"string"}},"required":["flavor","image_id","name","volume"],"title":"NotebookCreateRequest","type":"object"},"NotebookResp":{"properties":{"action_progress":{"description":"实例初始化进度。","items":{"$ref":"#/definitions/JobProgress"},"type":"array"},"billing_items":{"description":"计费资源类型。枚举值:\n\nSTORAGE:存储资源计费。\nCOMPUTE:计算资源计费。\nALL:所有计费类型","items":{"enum":["STORAGE","COMPUTE","ALL"],"type":"string"},"type":"array"},"description":{"description":"实例描述。","type":"string"},"endpoints":{"description":"本地IDE(如PyCharm、VS Code)或SSH客户端,通过SSH远程接入Notebook实例时需要的相关配置。","items":{"$ref":"#/definitions/EndpointsRes"},"type":"array"},"fail_reason":{"description":"实例失败原因。","type":"string"},"feature":{"description":"实例类别。枚举值:\n- DEFAULT:CodeLab免费规格实例,每个用户最多只能创建一个。\n- NOTEBOOK:计费规格实例。","type":"string"},"flavor":{"description":"实例规格。","type":"string"},"id":{"description":"实例ID。","type":"string"},"image":{"$ref":"#/definitions/Image","description":"实例镜像信息。"},"lease":{"$ref":"#/definitions/Lease","description":"实例自动停止的倒计时信息。"},"name":{"description":"实例名称。","type":"string"},"pool":{"$ref":"#/definitions/Pool","description":"专属池的基本信息,在专属池中创建的实例会返回该字段。"},"status":{"description":"实例状态。枚举值如下:\n- INIT:初始化\n- CREATING:创建中\n- STARTING:启动中\n- STOPPING:停止中\n- DELETING:删除中\n- RUNNING:运行中\n- STOPPED:已停止\n- SNAPSHOTTING:快照中(保存镜像时的状态)\n- CREATE_FAILED:创建失败\n- START_FAILED:启动失败\n- DELETE_FAILED:删除失败\n- ERROR:错误\n- DELETED:已删除\n- FROZEN:冻结","enum":["CREATE_FAILED","CREATING","DELETED","DELETE_FAILED","DELETING","ERROR","FROZEN","INIT","RUNNING","SNAPSHOTTING","STARTING","START_FAILED","STOPPED","STOPPING"],"type":"string"},"token":{"description":"Notebook鉴权使用的token信息。","type":"string"},"url":{"description":"实例访问的URL。","type":"string"},"user":{"properties":{"domain":{"properties":{"id":{"example":"xxxxeb6c10264b1e8871589e8c03889b","type":"string"},"name":{"example":"xxxxx","type":"string"}}},"id":{"example":"xxxx135b0c3144819df54c8f6e54c829","type":"string"},"name":{"example":"xxxx","type":"string"}}},"volume":{"$ref":"#/definitions/VolumeRes","description":"实例存储信息。"},"workspace_id":{"description":"工作空间ID。未创建工作空间时默认值为“0”,存在创建并使用的工作空间,以实际取值为准。","type":"string"}},"title":"NotebookResp","type":"object"},"Pool":{"properties":{"id":{"description":"专属资源池ID。","type":"string"},"name":{"description":"专属资源池名称。","type":"string"}},"title":"Pool","type":"object"},"VolumeReq":{"description":"存储配置。","properties":{"capacity":{"description":"存储容量,EVS默认5G,最大限制4096G。","format":"int32","type":"integer","x-maximum":4096},"category":{"description":"支持的存储类型。不同存储类型的差异,详见[开发环境中如何选择存储](https://support.huaweicloud.com/usermanual-standard-modelarts/devtool-modelarts_0004.html#section4)。枚举值如下:\n- SFS:弹性文件服务\n- EVS:云硬盘","type":"string"},"id":{"description":"EFS专属存储盘ID,只有当category为EFS,同时ownership为DEDICATED时必填。必填。\n参数值获取方式如下:登录弹性文件服务控制台,在文件系统列表中,单击文件系统名称进入详情页。其中,“ID”即为此参数的参数值。","pattern":"^[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$","type":"string"},"ownership":{"description":"资源所属,枚举值如下:\n- MANAGED:托管,即资源在服务上。\n- DEDICATED:非托管,即资源在用户账号上,只有在category为EFS时支持。","type":"string"},"uri":{"description":"EFS专属存储盘uri,只有当category为EFS,同时ownership为DEDICATED时必填。\n登录弹性文件服务控制台,在文件系统列表中,单击文件系统名称进入详情页。其中,“共享路径”即为此参数的参数值。","type":"string","x-maxLength":256,"x-minLength":0}},"required":["category","ownership"],"title":"VolumeReq","type":"object"},"VolumeRes":{"description":"实例存储信息。","properties":{"capacity":{"description":"存储容量,EVS默认5G,EFS默认50G,最大限制4096G。","exclusiveMaximum":false,"format":"int32","type":"integer","x-maximum":4096},"category":{"description":"支持的存储类型。不同存储类型的差异,详见[开发环境中如何选择存储](https://support.huaweicloud.com/usermanual-standard-modelarts/devtool-modelarts_0004.html#section4)。枚举值如下:\n- SFS:弹性文件服务\n- EVS:云硬盘","type":"string"},"mount_path":{"description":"存储挂载至Notebook实例的目录,当前固定在/home/ma-user/work/下。","example":"Volume mount path in notebook, default /home/ma-user/work/","type":"string","x-maxLength":256,"x-minLength":0},"ownership":{"description":"资源所属,枚举值如下:\n- MANAGED:托管,即资源在服务上。\n- DEDICATED:非托管,即资源在用户账号上,只有在category为EFS时支持。","type":"string"},"status":{"description":"EVS扩容状态,扩容时的状态为RESIZING,此时实例可以正常使用。","enum":["DELETED","DELETE_FAILED","DELETING","IN_USE","MOUNTED","MOUNTING","MOUNT_FAILED","RESIZING","UNMOUNTED","UNMOUNTING","UNMOUNT_FAILED"],"type":"string"}},"title":"VolumeRes","type":"object"}},"description":null,"group_id":"ade740e866904a7dbdaa5ec0f538d4d0","host":"modelarts.cn-north-4.myhuaweicloud.com","id":"24e49ad96b424b4fb97890f7414af48d","info_version":"v1","method":"post","name":"CreateNotebook","parameters":{},"paths":{"/v1/{project_id}/notebooks":{"post":{"description":"创建Notebook实例,可以根据您指定的实例规格,不同AI引擎镜像,存储等相关参数,为您创建一个Notebook,您可以通过网页和SSH客户端访问Notebook实例。\n该接口为异步操作,创建Notebook实例的状态请通过查询Notebook实例详情接口获取。","operationId":"CreateNotebook","parameters":[{"description":"notebookReq","in":"body","name":"notebookReq","required":true,"schema":{"$ref":"#/definitions/NotebookCreateRequest"}},{"description":"用户项目ID,获取方法请参见[获取项目ID和名称](modelarts_03_0147.xml)。","in":"path","name":"project_id","required":true,"type":"string"}],"responses":{"200":{"description":"OK","examples":{"application/json":{"description":"api-test","feature":"NOTEBOOK","flavor":"modelarts.vm.cpu.2u","id":"f9937afa-4451-42db-a76b-72d624749f66","image":{"description":"description","id":"e1a07296-22a8-4f05-8bc8-e936c8e54090","name":"notebook2.0-mul-kernel-cpu-cp36","swr_path":"swr.xxxxx.com/atelier/notebook2.0-mul-kernel-cpu-cp36:3.3.2-release_v1","tag":"3.3.2-release_v1","type":"BUILD_IN"},"lease":{"create_at":1638841744515,"duration":3600000,"enable":true,"type":"TIMING","update_at":1638841744515},"name":"notebooks_test","status":"CREATING","token":"3eff13f2-3d70-5456-6dc7-e3f99f562022","workspace_id":"0"}},"schema":{"$ref":"#/definitions/NotebookResp"}},"201":{"description":"Created"},"401":{"description":"Unauthorized"},"403":{"description":"Forbidden"},"404":{"description":"Not Found"}},"summary":"创建Notebook实例","tags":["Notebook实例管理"],"x-api-type":"internal-api","x-constraint":"暂无约束","x-is-registered":"Y","x-open-region-cloud":"hc,hk,fcs,fcs-super","x-order":0,"x-publish-doc":"Y","x-request-examples-1":{"description":"api-test","feature":"NOTEBOOK","flavor":"modelarts.vm.cpu.2u","image_id":"e1a07296-22a8-4f05-8bc8-e936c8e54090","name":"notebooks_test","volume":{"capacity":50,"category":"evs","ownership":"managed"},"workspace_id":"0"},"x-request-examples-description-1":"创建Notebook实例。设置实例规格为“modelarts.vm.cpu.2u”,存储类型为“EVS”,资源所属为“MANAGED”,存储容量为50G。","x-request-examples-text-1":{"description":"api-test","feature":"NOTEBOOK","flavor":"modelarts.vm.cpu.2u","image_id":"e1a07296-22a8-4f05-8bc8-e936c8e54090","name":"notebooks_test","volume":{"capacity":50,"category":"evs","ownership":"managed"},"workspace_id":"0"},"x-support-sdk":"N"}}},"product_short":"ModelArts","region_id":"cn-north-4","schemes":["HTTPS"],"security_definitions":{"ApiTokenAuth":{"in":"header","name":"X-Auth-Token","type":"apiKey"}},"summary":"创建Notebook实例","tags":"开发环境管理","uri":null,"version":"2.0"}