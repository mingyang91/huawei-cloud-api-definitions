{"base_path":"/","components":null,"consumes":"[\"application/json;charset=UTF-8\",\"application/json\"]","definitions":{"AutoSearchAlgoConfigParameter":{"description":"训练作业、算法依赖参数。","properties":{"key":{"description":"参数键。","type":"string"},"type":{"description":"参数种类。","type":"string"},"value":{"description":"参数值。","type":"string"}}},"FlavorResponse":{"description":"训练作业、算法的规格信息。","properties":{"attributes":{"additionalProperties":{"type":"string"},"description":"其他规格属性。","type":"object"},"billing":{"description":"资源规格计费信息。","properties":{"code":{"description":"计费码。","type":"string"},"unit_num":{"description":"计费卡数。","format":"int32","type":"integer"}}},"flavor_id":{"description":"资源规格的ID。","type":"string"},"flavor_info":{"description":"资源规格详细信息。","properties":{"cpu":{"description":"cpu规格信息。","properties":{"arch":{"description":"cpu架构。","type":"string"},"core_num":{"description":"核数。","format":"int32","type":"integer"}}},"disk":{"description":"磁盘信息。","properties":{"size":{"description":"磁盘大小。","format":"int32","type":"integer"},"unit":{"description":"磁盘大小单位。","type":"string"}}},"gpu":{"description":"gpu规格信息。","properties":{"memory":{"description":"内存。","type":"string"},"product_name":{"description":"产品名。","type":"string"},"unit_num":{"description":"gpu卡数。","format":"int32","type":"integer"}}},"max_num":{"description":"可以选择的最大节点数量(max_num,为1代表不支持分布式)。","format":"int32","type":"integer"},"memory":{"description":"内存信息。","properties":{"size":{"description":"内存大小。","format":"int32","type":"integer"},"unit":{"description":"内存大小单位。","type":"string"}}},"npu":{"description":"Ascend规格信息。","properties":{"memory":{"description":"内存。","type":"string"},"product_name":{"description":"产品名。","type":"string"},"unit_num":{"description":"npu卡数。","type":"string"}}}}},"flavor_name":{"description":"资源规格的名称。","type":"string"},"flavor_type":{"description":"资源规格的类型。可选值如下:\n- CPU\n- GPU\n- Ascend","type":"string"},"max_num":{"description":"资源规格的最大节点数。","format":"int32","type":"integer"}},"type":"object"},"Input":{"properties":{"description":{"description":"数据输入通道描述信息。","type":"string"},"local_dir":{"description":"数据输入通道映射的容器本地路径。","type":"string"},"name":{"description":"数据输入通道名称。","type":"string"},"remote":{"$ref":"#/definitions/InputDataInfo"},"remote_constraint":{"description":"数据输入约束。","items":{"properties":{"attributes":{"description":"数据输入为数据集时的相关属性。枚举值:\n  - data_format 数据格式;\n  - data_segmentation 数据切分方式;\n  - dataset_type 标注类型。","type":"string"},"data_type":{"description":"数据输入类型,包括数据存储位置、数据集两种方式。","type":"string"}}},"type":"array"}},"required":["name","remote"]},"InputDataInfo":{"description":"数据实际输入信息。枚举值:\n  - dataset 指定输入为数据集;\n  - obs 指定输入为OBS路径。","properties":{"dataset":{"description":"数据输入信息为数据集。","properties":{"id":{"description":"训练作业的数据集ID。","type":"string"},"obs_url":{"description":"训练作业需要的数据集OBS路径URL,modelarts会通过数据集ID和数据集版本ID自动解析生成。如:“/usr/data/”。","readOnly":true,"type":"string"},"version_id":{"description":"训练作业的数据集版本ID。","type":"string"}},"required":["id","version_id"]},"obs":{"description":"数据输入输出信息为OBS方式。","properties":{"obs_url":{"description":"训练作业需要的数据集OBS路径URL。如:“/usr/data/”。","type":"string"}},"required":["obs_url"]}}},"Job":{"description":"创建训练作业的作业请求体和相应体。","properties":{"algorithm":{"$ref":"#/definitions/JobAlgorithm"},"kind":{"description":"训练作业类型。默认使用job。枚举值:\n - job 训练作业。","type":"string"},"metadata":{"$ref":"#/definitions/JobMetadata"},"spec":{"description":"训练作业规格参数。有此字段时,无需填写tasks字段。","properties":{"auto_stop":{"description":"训练作业的自动停止配置。","properties":{"duration":{"description":"运行时长,最小值为1","format":"int32","type":"integer"},"time_unit":{"description":"时间单位。可选取值如下:\n- HOURS","type":"string"}},"required":["time_unit","duration"]},"log_export_path":{"description":"训练作业日志输出信息。","properties":{"host_path":{"description":"训练作业日志保存的宿主机的路径。","type":"string"},"obs_url":{"description":"训练作业日志保存的OBS地址。","type":"string"}}},"resource":{"description":"训练作业资源规格信息。flavor_id和pool_id+[flavor_id]方式二选一。","properties":{"flavor_id":{"description":"训练作业资源规格id。CPU规格专属资源池不支持指定flavor_id。GPU/Ascend规格专属资源池可选取值如下:\n- modelarts.pool.visual.xlarge(1卡)\n- modelarts.pool.visual.2xlarge(2卡)\n- modelarts.pool.visual.4xlarge(4卡)\n- modelarts.pool.visual.8xlarge(8卡)","type":"string"},"node_count":{"description":"资源池创建训练作业使用节点数。默认单节点。","format":"int32","type":"integer"},"pool_id":{"description":"专属资源池id","type":"string"}}},"volumes":{"description":"训练作业挂载卷信息。","items":{"properties":{"nfs":{"description":"nfs方式的挂载卷。","properties":{"local_path":{"description":"挂载到训练容器中的路径。","type":"string"},"nfs_server_path":{"description":"nfs服务端路径。","type":"string"},"read_only":{"description":"nfs挂载卷在容器中是否只读。","type":"boolean"}}}}},"type":"array"}}},"tasks":{"description":"任务列表。该功能暂未实现。","items":{"$ref":"#/definitions/Task"},"type":"array"}},"required":["kind","metadata"],"title":"Job","type":"object"},"JobAlgorithm":{"description":"训练作业算法。目前支持三种形式:\n- id 只取算法的id;\n- subscription_id+item_version_id 取算法的订阅id和版本id;\n- code_dir+boot_file 取训练作业的代码目录和启动文件。","properties":{"autosearch_config_path":{"description":"自动化搜索作业的yaml配置路径,需要提供一个OBS路径。","type":"string"},"autosearch_framework_path":{"description":"自动化搜索作业的框架代码目录,需要提供一个OBS路径。","type":"string"},"boot_file":{"description":"训练作业的代码启动文件,需要在代码目录下。如:“/usr/app/boot.py”。应与code_dir一同出现,若填入id或subscription_id+item_version_id则无需填写。","type":"string"},"code_dir":{"description":"训练作业的代码目录。如:“/usr/app/”。应与boot_file一同出现,若填入id或subscription_id+item_version_id则无需填写。","type":"string"},"command":{"description":"自定义镜像场景下,训练作业的自定义镜像的容器的启动命令。","type":"string"},"engine":{"description":"训练作业的引擎。使用算法管理的算法id或订阅算法subscription_id+item_version_id创建作业时,无需填写。","properties":{"engine_id":{"description":"训练作业选择的引擎规格ID。engine_id,engine_name + engine_version和image_url方式三选一。","type":"string"},"engine_name":{"description":"训练作业选择的引擎名称。若填入engine_id则无需填写。","type":"string"},"engine_version":{"description":"训练作业选择的引擎版本名称。若填入engine_id则无需填写。","type":"string"},"image_url":{"description":"训练作业选择的自定义镜像地址。","type":"string"}}},"environments":{"description":"训练作业的环境变量。格式:\"key\":\"value\".无需填写。","items":{"additionalProperties":{"type":"string"},"type":"object"},"type":"array"},"id":{"description":"算法管理的算法id。","type":"string"},"inputs":{"description":"训练作业的数据输入。","items":{"$ref":"#/definitions/Input"},"type":"array"},"item_version_id":{"description":"订阅算法的版本。应与subscription_id一同出现。","type":"string"},"local_code_dir":{"description":"算法的代码目录下载到训练容器内的本地路径。规则:\n- 必须为/home下的目录。\n- v1兼容模式下,当前字段不生效。\n- 当code_dir以file://为前缀时,当前字段不生效。","type":"string"},"name":{"description":"算法名称。无需填写。","type":"string"},"outputs":{"description":"训练作业的结果输出。","items":{"$ref":"#/definitions/Output"},"type":"array"},"parameters":{"description":"训练作业的运行参数。","items":{"properties":{"constraint":{"description":"参数属性。","properties":{"editable":{"description":"是否可编辑。","type":"boolean"},"required":{"description":"是否必须。","type":"boolean"},"sensitive":{"description":"是否敏感。该功能暂未实现。","type":"boolean"},"type":{"description":"参数种类。","type":"string"},"valid_range":{"description":"有效范围。","items":{"type":"string"},"type":"array"},"valid_type":{"description":"有效种类。","type":"string"}}},"description":{"description":"参数描述信息。","type":"string"},"i18n_description":{"description":"国际化描述。","properties":{"description":{"description":"对应描述。","type":"string"},"language":{"description":"国际语种。","type":"string"}}},"name":{"description":"参数名称。","type":"string"},"value":{"description":"参数值。","type":"string"}}},"type":"array"},"policies":{"description":"作业支持的策略,用于超参搜索。","properties":{"auto_search":{"description":"超参搜索配置。","properties":{"algo_configs":{"description":"搜索算法配置。","items":{"properties":{"name":{"description":"搜索算法名称。","type":"string"},"params":{"description":"搜索算法参数。","items":{"$ref":"#/definitions/AutoSearchAlgoConfigParameter"},"type":"array"}}},"type":"array"},"reward_attrs":{"description":"搜索指标列表。","items":{"properties":{"mode":{"description":"搜索方向。\n- max 指定时表示指标值越大越好;\n- min 指定时表示指标值越小越好。","type":"string"},"name":{"description":"指标名称。","type":"string"},"regex":{"description":"指标正则表达式。","type":"string"}}},"type":"array"},"search_params":{"description":"搜索参数。","items":{"properties":{"discrete_points_num":{"description":"连续型超参离散化取值个数。","type":"string"},"discrete_values":{"description":"离散型超参的取值列表。","items":{"type":"string"},"type":"array"},"lower_bound":{"description":"超参下界。","type":"string"},"name":{"description":"超参名称。","type":"string"},"param_type":{"description":"参数类型。\n- continuous 指定时表示这个超参是连续类型的。连续类型的超参在算法使用于训练作业时,控制台显示为输入框。\n- discrete 指定时表示这个超参是离散类型的。离散类型的超参在算法使用于训练作业时,控制台显示为下拉选择框架。","type":"string"},"upper_bound":{"description":"超参上界。","type":"string"}}},"type":"array"},"skip_search_params":{"description":"需要排除的超参组合。","type":"string"}}}}},"subscription_id":{"description":"订阅算法的订阅ID。应与item_version_id一同出现。","type":"string"},"working_dir":{"description":"运行算法时所在的工作目录。规则:v1兼容模式下,当前字段不生效。","type":"string"}},"title":"Algorithm","type":"object"},"JobAlgorithmResponse":{"description":"训练作业算法。目前支持三种形式:\n- id 只取算法的id;\n- subscription_id+item_version_id 取算法的订阅id和版本id;\n- code_dir+boot_file 取训练作业的代码目录和启动文件;","properties":{"autosearch_config_path":{"description":"自动化搜索作业的yaml配置路径,需要提供一个OBS路径。","type":"string"},"autosearch_framework_path":{"description":"自动化搜索作业的框架代码目录,需要提供一个OBS路径。","type":"string"},"boot_file":{"description":"训练作业的代码启动文件,需要在代码目录下。如:“/usr/app/boot.py”。应与code_dir一同出现,若填入id或subscription_id+item_version_id则无需填写。","type":"string"},"code_dir":{"description":"训练作业的代码目录。如:“/usr/app/”。应与boot_file一同出现,若填入id或subscription_id+item_version_id则无需填写。","type":"string"},"command":{"description":"自定义镜像训练作业的自定义镜像的容器的启动命令。例如 python train.py。","type":"string"},"engine":{"description":"训练作业的引擎。使用算法管理的算法id或订阅算法subscription_id+item_version_id创建作业时,无需填写。","properties":{"engine_id":{"description":"训练作业选择的引擎规格ID。engine_id,engine_name + engine_version和image_url方式三选一。","type":"string"},"engine_name":{"description":"训练作业选择的引擎名称。若填入engine_id则无需填写。","type":"string"},"engine_version":{"description":"训练作业选择的引擎版本名称。若填入engine_id则无需填写。","type":"string"},"image_url":{"description":"训练作业选择的自定义镜像地址。","type":"string"}}},"environments":{"description":"训练作业的环境变量。格式:\"key\":\"value\".无需填写。","items":{"additionalProperties":{"type":"string"},"type":"object"},"type":"array"},"id":{"description":"训练作业算法。目前支持三种形式:\n  - id 只取算法的id;\n  - subscription_id+item_version_id 取算法的订阅id和版本id;\n  - code_dir+boot_file 取训练作业的代码目录和启动文件。;","type":"string"},"inputs":{"description":"训练作业的数据输入。","items":{"$ref":"#/definitions/Input"},"type":"array"},"item_version_id":{"description":"订阅算法的版本。应与subscription_id一同出现。","type":"string"},"local_code_dir":{"description":"算法的代码目录下载到训练容器内的本地路径。规则:1.必须为 /home 下的目录;2.v1兼容模式下,当前字段不生效;3.当 code_dir 以 file:// 为前缀时,当前字段不生效。","type":"string"},"name":{"description":"算法名称。","type":"string"},"outputs":{"description":"训练作业的结果输出。","items":{"$ref":"#/definitions/Output"},"type":"array"},"parameters":{"description":"训练作业的运行参数。","items":{"$ref":"#/definitions/Parameter"},"type":"array"},"policies":{"description":"作业支持的策略。","properties":{"auto_search":{"description":"超参搜索配置。","properties":{"algo_configs":{"description":"搜索算法配置。","items":{"properties":{"name":{"description":"搜索算法名称。","type":"string"},"params":{"description":"搜索算法参数。","items":{"$ref":"#/definitions/AutoSearchAlgoConfigParameter"},"type":"array"}}},"type":"array"},"reward_attrs":{"description":"搜索指标列表。","items":{"properties":{"mode":{"description":"搜索方向。\n- max 指定时表示指标值越大越好;\n- min 指定时表示指标值越小越好。","type":"string"},"name":{"description":"指标名称。","type":"string"},"regex":{"description":"指标正则表达式。","type":"string"}}},"type":"array"},"search_params":{"description":"搜索参数。","items":{"properties":{"discrete_points_num":{"description":"连续型超参离散化取值个数。","type":"string"},"discrete_values":{"description":"离散型超参的取值列表。","items":{"type":"string"},"type":"array"},"lower_bound":{"description":"超参下界。","type":"string"},"name":{"description":"超参名称。","type":"string"},"param_type":{"description":"参数类型。\n- continuous 指定时表示这个超参是连续类型的。连续类型的超参在算法使用于训练作业时,控制台显示为输入框。\n- discrete 指定时表示这个超参是离散类型的。离散类型的超参在算法使用于训练作业时,控制台显示为下拉选择框架。","type":"string"},"upper_bound":{"description":"超参上界。","type":"string"}}},"type":"array"},"skip_search_params":{"description":"需要排除的超参组合。","type":"string"}}}}},"subscription_id":{"description":"订阅算法的订阅ID。应与item_version_id一同出现。","type":"string"},"working_dir":{"description":"运行算法时所在的工作目录。规则:v1兼容模式下,当前字段不生效。","type":"string"}},"title":"Algorithm","type":"object"},"JobMetadata":{"description":"训练作业元信息。","properties":{"annotations":{"additionalProperties":{"type":"string"},"description":"训练作业高级功能配置,可选取值如下:\n- \"job_template\": \"Template RL\"(异构作业)。\n- \"fault-tolerance/job-retry-num\": \"3\"(故障自动重启次数)。","type":"object"},"create_time":{"description":"训练作业创建时间戳,单位为毫秒,创建成功后由ModelArts生成返回,无需填写。","format":"int64","readOnly":true,"type":"integer"},"description":{"description":"对训练作业的描述,默认为“NULL”,字符串的长度限制为[0, 256]。","type":"string"},"id":{"description":"训练作业ID,创建成功后由ModelArts生成返回,无需填写。","readOnly":true,"type":"string"},"name":{"description":"训练作业名称。限制为1-64位只含数字、字母、下划线和中划线的名称。","type":"string"},"user_name":{"description":"训练作业创建用户的用户名,创建成功后由ModelArts生成返回,无需填写。","readOnly":true,"type":"string"},"workspace_id":{"description":"指定作业所处的工作空间,默认值为“0”。","type":"string"}},"required":["name"],"type":"object"},"JobResponse":{"description":"创建训练作业的作业请求体和相应体。","properties":{"algorithm":{"$ref":"#/definitions/JobAlgorithmResponse"},"kind":{"description":"训练作业类型。默认使用job。枚举值:\n - job 训练作业。","type":"string"},"metadata":{"$ref":"#/definitions/JobMetadata"},"spec":{"description":"训练作业规格参数。","properties":{"log_export_path":{"description":"训练作业日志输出信息。","properties":{"host_path":{"description":"训练作业日志保存的宿主机的路径。","type":"string"},"obs_url":{"description":"训练作业日志保存的OBS地址。","type":"string"}}},"resource":{"$ref":"#/definitions/Resource"},"volumes":{"description":"训练作业挂载卷信息。","items":{"properties":{"nfs":{"description":"nfs方式的挂载卷。","properties":{"local_path":{"description":"挂载到训练容器中的路径。","type":"string"},"nfs_server_path":{"description":"nfs服务端路径。","type":"string"},"read_only":{"description":"nfs挂载卷在容器中是否只读。","type":"boolean"}}}}},"type":"array"}}},"status":{"$ref":"#/definitions/Status"},"tasks":{"description":"异构训练作业的任务列表。","items":{"$ref":"#/definitions/TaskResponse"},"type":"array"}},"required":["kind","metadata"],"title":"Job","type":"object"},"Output":{"properties":{"description":{"description":"数据输出通道描述信息。","type":"string"},"local_dir":{"description":"数据输出通道映射的容器本地路径。","type":"string"},"name":{"description":"数据输出通道名称。","type":"string"},"remote":{"description":"数据实际输出信息。","properties":{"obs":{"description":"数据实际输出到OBS。","properties":{"obs_url":{"description":"数据实际输出到OBS的路径。","type":"string"}},"required":["obs_url"]}},"required":["obs"]}},"required":["name","remote"]},"Parameter":{"description":"训练作业、算法依赖参数。","properties":{"constraint":{"description":"参数属性。","properties":{"editable":{"description":"是否可编辑。","type":"boolean"},"required":{"description":"是否必须。","type":"boolean"},"sensitive":{"description":"是否敏感。该功能暂未实现。","type":"boolean"},"type":{"description":"参数种类。","type":"string"},"valid_range":{"description":"有效范围。","items":{"type":"string"},"type":"array"},"valid_type":{"description":"有效种类。","type":"string"}}},"description":{"description":"参数描述信息。","type":"string"},"i18n_description":{"description":"国际化描述。","properties":{"description":{"description":"对应描述。","type":"string"},"language":{"description":"国际语种,可选值如下:\n- zh-cn(中文),\n- en-us(英文)。","type":"string"}}},"name":{"description":"参数名称。","type":"string"},"value":{"description":"参数值。","type":"string"}},"type":"object"},"Resource":{"description":"训练作业资源规格信息。flavor_id和pool_id+[flavor_id]方式二选一。","properties":{"flavor_detail":{"description":"训练作业、算法的规格信息。","properties":{"billing":{"description":"资源规格计费信息。","properties":{"code":{"description":"计费码。","type":"string"},"unit_num":{"description":"计费卡数。","format":"int32","type":"integer"}}},"flavor_info":{"description":"资源规格详细信息。","properties":{"cpu":{"description":"cpu规格信息。","properties":{"arch":{"description":"cpu架构。","type":"string"},"core_num":{"description":"核数。","format":"int32","type":"integer"}}},"disk":{"description":"磁盘信息。","properties":{"size":{"description":"磁盘大小。","type":"string"},"unit":{"description":"磁盘大小单位,一般为GB。","type":"string"}}},"gpu":{"description":"gpu规格信息。","properties":{"memory":{"description":"内存。","type":"string"},"product_name":{"description":"产品名。","type":"string"},"unit_num":{"description":"gpu卡数。","format":"int32","type":"integer"}}},"max_num":{"description":"可以选择的最大节点数量(max_num,为1代表不支持分布式)。","format":"int32","type":"integer"},"memory":{"description":"内存信息。","properties":{"size":{"description":"内存大小。","format":"int32","type":"integer"},"unit":{"description":"内存单元数。","type":"string"}}},"npu":{"description":"Ascend规格信息。","properties":{"memory":{"description":"内存。","type":"string"},"product_name":{"description":"产品名。","type":"string"},"unit_num":{"description":"npu卡数。","type":"string"}}}}},"flavor_type":{"description":"资源规格的类型。可选值如下:\n- CPU\n- GPU\n- Ascend","type":"string"}},"readOnly":true},"flavor_id":{"description":"训练作业资源规格id。CPU规格专属资源池不支持指定flavor_id。GPU/Ascend规格专属资源池可选取值如下:\n- modelarts.pool.visual.xlarge(1卡)\n- modelarts.pool.visual.2xlarge(2卡)\n- modelarts.pool.visual.4xlarge(4卡)\n- modelarts.pool.visual.8xlarge(8卡)","type":"string"},"flavor_name":{"description":"使用flavor_id时,由ModelArts返回的只读规格名称。","readOnly":true,"type":"string"},"node_count":{"description":"训练作业选择的资源副本数。","minimum":1,"type":"integer"},"policy":{"description":"训练作业资源规格模式,可选值如下:\n“regular”。","type":"string"},"pool_id":{"description":"训练作业选择的资源池ID。","type":"string"}},"required":["flavor_id","node_count"],"type":"object"},"Status":{"description":"训练作业状态信息。创建作业无需填写。","properties":{"duration":{"description":"训练作业运行时长,单位为毫秒。","format":"int64","type":"integer"},"node_count_metrics":{"description":"训练作业运行时节点数变化指标。","items":{"items":{"type":"integer"},"type":"array"},"type":"array"},"phase":{"description":"训练作业一级状态,可选值如下:\n“Creating”,\n“Pending”,\n“Running”,\n“Failed”,\n“Completed”,\n“Terminating”,\n“Terminated”,\n“Abnormal”。","type":"string"},"secondary_phase":{"description":"训练作业二级状态为内部详细状态,可能会增加、修改、删除,不建议依赖;可选值如下:\n“Creating”,\n“Queuing”,\n“Running”,\n“Failed”,\n“Completed”,\n“Terminating”,\n“Terminated”,\n“CreateFailed”,\n“TerminatedFailed”,\n“Unknown”,\n“Lost”。","type":"string"},"start_time":{"description":"训练作业开始时间,格式为时间戳。","format":"int64","type":"integer"},"task_statuses":{"description":"训练在子任务状态信息。","items":{"properties":{"exit_code":{"description":"训练作业子任务退出码。","type":"integer"},"message":{"description":"训练作业子任务错误消息。","type":"string"},"task":{"description":"训练作业子任务名称。","type":"string"}}},"type":"array"},"tasks":{"description":"训练作业子任务名称。","items":{"type":"string"},"readOnly":true,"type":"array"}},"readOnly":true,"type":"object"},"Task":{"description":"训练作业的任务列表。","properties":{"algorithm":{"description":"算法管理算法配置。","properties":{"boot_file":{"description":"算法的代码启动文件,需要在代码目录下。如:“/usr/app/boot.py”。应与code_dir一同出现。","type":"string"},"code_dir":{"description":"算法的代码目录。如:“/usr/app/”。应与boot_file一同出现。","type":"string"},"engine":{"description":"异构作业算法的引擎。","properties":{"engine_id":{"description":"异构作业引擎规格的ID。如“caffe-1.0.0-python2.7”。","type":"string"},"engine_name":{"description":"异构作业引擎规格的名称。如“Caffe”。","type":"string"},"engine_version":{"description":"异构作业引擎规格的版本。","type":"string"},"image_url":{"description":"算法选择的自定义镜像地址。","type":"string"}}},"inputs":{"description":"算法的数据输入。","items":{"properties":{"description":{"description":"数据输入通道描述信息。","type":"string"},"local_dir":{"description":"数据输入通道映射的容器本地路径。","type":"string"},"name":{"description":"数据输入通道名称。","type":"string"},"remote":{"description":"数据实际输入信息。枚举值:\n  - dataset 指定输入为数据集;\n  - obs 指定输入为OBS路径。","properties":{"obs":{"description":"数据输入输出信息为OBS方式。","properties":{"obs_url":{"description":"训练作业需要的数据集OBS路径URL。如:“/usr/data/”。","type":"string"}},"required":["obs_url"]}}}},"required":["name","remote"]},"type":"array"},"job_config":{"description":"算法配置信息,如启动文件等。","properties":{"engine":{"description":"算法的引擎。","properties":{"engine_id":{"description":"算法选择的引擎规格ID。","type":"string"},"engine_name":{"description":"算法选择的引擎版本名称。若填入engine_id则无需填写。","type":"string"},"engine_version":{"description":"算法选择的引擎版本名称。若填入engine_id则无需填写。","type":"string"},"image_url":{"description":"算法选择的自定义镜像地址。","type":"string"}}},"inputs":{"description":"算法的数据输入。","items":{"$ref":"#/definitions/Input"},"type":"array"},"outputs":{"description":"算法的数据输出。","items":{"$ref":"#/definitions/Output"},"type":"array"},"parameters":{"description":"算法的运行参数。","items":{"$ref":"#/definitions/Parameter"},"type":"array"}}},"local_code_dir":{"description":"算法的代码目录下载到训练容器内的本地路径。规则:1.必须为 /home 下的目录;2.v1兼容模式下,当前字段不生效;3.当 code_dir 以 file:// 为前缀时,当前字段不生效。","type":"string"},"outputs":{"description":"算法的数据输出。","items":{"properties":{"description":{"description":"数据输出通道描述信息。","type":"string"},"local_dir":{"description":"数据输出通道映射的容器本地路径。","type":"string"},"name":{"description":"数据输出通道名称。","type":"string"},"remote":{"description":"数据实际输出信息。","properties":{"obs":{"description":"数据实际输出到OBS。","properties":{"obs_url":{"description":"数据实际输出到OBS的路径","type":"string"}},"required":["obs_url"]}},"required":["obs"]}},"required":["name","remote"]},"type":"array"},"working_dir":{"description":"运行算法时所在的工作目录。规则:v1兼容模式下,当前字段不生效。","type":"string"}}},"role":{"description":"任务角色,该功能暂未支持。","type":"string"},"task_resource":{"description":"训练作业资源规格信息。","properties":{"flavor_id":{"description":"训练作业选择的资源规格ID。","type":"string"},"node_count":{"description":"训练作业选择的资源副本数。","minimum":1,"type":"integer"}},"required":["node_count"]}},"type":"object"},"TaskResponse":{"description":"训练作业的任务列表。","properties":{"algorithm":{"description":"算法管理算法配置。","properties":{"boot_file":{"description":"算法启动文件绝对路径。","type":"string"},"code_dir":{"description":"算法启动文件所在目录绝对路径。","type":"string"},"engine":{"description":"异构作业所依赖的引擎。","properties":{"engine_id":{"description":"异构作业引擎规格的ID。如“caffe-1.0.0-python2.7”。","type":"string"},"engine_name":{"description":"异构作业引擎规格的名称。如“Caffe”。","type":"string"},"engine_version":{"description":"异构作业引擎规格的版本。","type":"string"},"image_url":{"description":"算法选择的自定义镜像地址。","type":"string"},"run_user":{"description":"引擎默认启动用户uid。","type":"string"},"v1_compatible":{"description":"是否为v1兼容模式。","type":"boolean"}}},"inputs":{"description":"算法输入通道信息。","properties":{"local_dir":{"description":"数据输入输出通道映射的容器本地路径。","type":"string"},"name":{"description":"数据输入通道名称。","type":"string"},"remote":{"description":"数据实际输入信息,异构作业只支持OBS。","properties":{"obs":{"description":"数据输入输出信息为OBS方式。","properties":{"obs_url":{"description":"训练作业需要的数据集OBS路径URL。如:“/usr/data/”。","type":"string"}},"required":["obs_url"]}}}},"required":["name","remote"]},"local_code_dir":{"description":"算法的代码目录下载到训练容器内的本地路径。规则:1.必须为 /home 下的目录;2.v1兼容模式下,当前字段不生效;3.当 code_dir 以 file:// 为前缀时,当前字段不生效。","type":"string"},"outputs":{"description":"算法输出通道信息。","properties":{"local_dir":{"description":"数据输出通道映射的容器本地路径。","type":"string"},"mode":{"description":"数据传输模式,默认为“upload_periodically”。","type":"string"},"name":{"description":"数据输出通道名称。","type":"string"},"period":{"description":"数据传输周期,默认为30s。","type":"string"},"remote":{"description":"数据实际输出信息。","properties":{"obs":{"description":"数据实际输出到OBS。","properties":{"obs_url":{"description":"数据实际输出到OBS的路径","type":"string"}},"required":["obs_url"]}},"required":["obs"]}},"required":["name","remote"]},"working_dir":{"description":"运行算法时所在的工作目录。规则:v1兼容模式下,当前字段不生效。","type":"string"}}},"role":{"description":"任务角色,该功能暂未支持。","type":"string"},"task_resource":{"$ref":"#/definitions/FlavorResponse"}},"type":"object"},"TrainError":{"description":"错误应答消息体。","properties":{"error_code":{"description":"错误码。","type":"string"},"error_msg":{"description":"错误信息。","type":"string"},"error_solution":{"description":"错误解决建议。","type":"string"}},"title":"Error"}},"description":null,"group_id":"ade740e866904a7dbdaa5ec0f538d4d0","host":"modelarts.cn-north-4.myhuaweicloud.com","id":"c79e2e018d93432486071d3af5989b6d","info_version":"v1","method":"post","name":"CreateTrainingJob","parameters":{"projectIDParam":{"description":"用户项目ID。获取方法请参见[获取项目ID和名称](modelarts_03_0147.xml)。","in":"path","name":"project_id","required":true,"type":"string"}},"paths":{"/v2/{project_id}/training-jobs":{"post":{"description":"创建训练作业。","operationId":"CreateTrainingJob","parameters":[{"$ref":"#/parameters/projectIDParam"},{"description":"创建训练作业的请求体","in":"body","name":"body","required":true,"schema":{"$ref":"#/definitions/Job"}}],"responses":{"201":{"description":"ok","examples":{"application/json":{"algorithm":{"boot_file":"/cn-north-4-rse/test/moxingtest-code/test_obs_gpu.py","code_dir":"/cn-north-4-rse/test/moxingtest-code/","engine":{"engine_id":"horovod-cp36-tf-1.16.2","engine_name":"Horovod","engine_version":"0.16.2-TF-1.13.1-python3.6"},"id":"3f5d6706-7b67-408d-8ba0-ec08048c45ed","name":"ttt-obs-gpu","parameters":[{"constraint":{"editable":true,"required":true,"sensitive":false,"type":"String","valid_range":[],"valid_type":"None"},"description":"","i18n_description":null,"name":"input_dir","value":"s://cn-north-4-rse/test/moxingtest-dir/"},{"constraint":{"editable":true,"required":true,"sensitive":false,"type":"String","valid_range":[],"valid_type":"None"},"description":"","i18n_description":null,"name":"input_file","value":"obs://cn-north-4-rse/test/moxingtest/"},{"constraint":{"editable":true,"required":true,"sensitive":false,"type":"Integer","valid_range":[],"valid_type":"None"},"description":"","i18n_description":null,"name":"large_file_method","value":"1"}],"policies":{}},"kind":"job","metadata":{"create_time":1637045545982,"description":"This is a ModelArts job","id":"425b7087-83de-49ed-9e40-5bb642be956f","name":"TestModelArtsJob","user_name":"","workspace_id":"0"},"spec":{"log_export_path":{},"resource":{"flavor_detail":{"billing":{"code":"modelarts.vm.gpu.free","unit_num":1},"flavor_info":{"cpu":{"arch":"x86","core_num":8},"gpu":{"memory":"32GB","product_name":"NVIDIA-V100","unit_num":1},"memory":{"size":64,"unit":"GB"}},"flavor_type":"GPU"},"flavor_id":"modelarts.p3.large.public.free","flavor_name":"Computing GPU(V100) instance","node_count":1,"policy":"regular"}},"status":{"duration":0,"node_count_metrics":null,"phase":"Creating","secondary_phase":"Creating","start_time":0,"tasks":["worker-0","server-0"]}}},"schema":{"$ref":"#/definitions/JobResponse"}},"400":{"description":"通用的错误应答消息体格式;如下为 id 是 3f5d6706-7b67-408d-8ba0-ec08048c45ee 的算法未找到时的返回信息。","examples":{"application/json":{"error_code":"ModelArts.2755","error_msg":"algorithm not found.","error_solution":"Check whether the training project information in the request is valid."}},"schema":{"$ref":"#/definitions/TrainError"}}},"summary":"创建训练作业","tags":["训练作业管理"],"x-is-registered":"Y","x-open-region-cloud":"hk,hc,fcs,fcs-super","x-order":0,"x-publish-doc":"Y","x-request-examples-1":{"algorithm":{"environments":{},"id":"3f5d6706-7b67-408d-8ba0-ec08048c45ed","parameters":[{"name":"input_dir","value":"obs://cn-north-4-rse/test/moxingtest-dir/"},{"name":"input_file","value":"obs://cn-north-4-rse/test/moxingtest/"},{"name":"large_file_method","value":"1"}],"policies":{"auto_search":null}},"kind":"job","metadata":{"description":"This is a ModelArts job","name":"TestModelArtsJob"},"spec":{"log_export_path":{"obs_url":""},"resource":{"flavor_id":"modelarts.p3.large.public.free","node_count":1}}},"x-request-examples-2":{"algorithm":{"command":"cd /home/ma-user/ddp_demo && sh run_ddp.sh","engine":{"image_url":"xxxxxxxx/fastseq:1.2"},"environments":{"NCCL_DEBUG":"INFO","NCCL_IB_DISABLE":"0"},"parameters":[],"policies":{"auto_search":null}},"kind":"job","metadata":{"description":"This is a ModelArts job2","name":"TestModelArtsJob2"},"spec":{"log_export_path":{"obs_url":"/cn-north-4-training-test/limou/ddp-demo-log/"},"resource":{"flavor_id":"modelarts.pool.visual.xlarge","node_count":1,"pool_id":"poolfaf38d76"},"volumes":[{"nfs":{"local_path":"/home/ma-user/nfs/","nfs_server_path":"192.168.0.82:/","read_only":false}}]}},"x-request-examples-description-1":"创建免费规格的训练作业。设置作业名称为“TestModelArtsJob”,描述为“This is a ModelArts job”。算法依赖的是id为3f5d6706-7b67-408d-8ba0-ec08048c45ed的算法,该算法未定义inputs与outputs,规格选用的是gpu免费规格。","x-request-examples-description-2":"使用自定义镜像创建训练作业。设置作业名称为“TestModelArtsJob2”,描述为“This is a ModelArts job2”的自定义镜像训练作业。使用专属资源池和nfs挂载。","x-request-examples-text-1":{"algorithm":{"environments":{},"id":"3f5d6706-7b67-408d-8ba0-ec08048c45ed","parameters":[{"name":"input_dir","value":"obs://cn-north-4-rse/test/moxingtest-dir/"},{"name":"input_file","value":"obs://cn-north-4-rse/test/moxingtest/"},{"name":"large_file_method","value":"1"}],"policies":{"auto_search":null}},"kind":"job","metadata":{"description":"This is a ModelArts job","name":"TestModelArtsJob"},"spec":{"log_export_path":{"obs_url":""},"resource":{"flavor_id":"modelarts.p3.large.public.free","node_count":1}}},"x-request-examples-text-2":{"algorithm":{"command":"cd /home/ma-user/ddp_demo && sh run_ddp.sh","engine":{"image_url":"xxxxxxxx/fastseq:1.2"},"environments":{"NCCL_DEBUG":"INFO","NCCL_IB_DISABLE":"0"},"parameters":[],"policies":{"auto_search":null}},"kind":"job","metadata":{"description":"This is a ModelArts job2","name":"TestModelArtsJob2"},"spec":{"log_export_path":{"obs_url":"/cn-north-4-training-test/limou/ddp-demo-log/"},"resource":{"flavor_id":"modelarts.pool.visual.xlarge","node_count":1,"pool_id":"poolfaf38d76"},"volumes":[{"nfs":{"local_path":"/home/ma-user/nfs/","nfs_server_path":"192.168.0.82:/","read_only":false}}]}},"x-request-examples-url-1":"POST    https://endpoint/v2/{project_id}/training-jobs","x-request-examples-url-2":"POST    https://endpoint/v2/{project_id}/training-jobs"}}},"product_short":"ModelArts","region_id":"cn-north-4","schemes":["HTTPS"],"security_definitions":{"ApiTokenAuth":{"in":"header","name":"X-Auth-Token","type":"apiKey"}},"summary":"创建训练作业","tags":"训练管理","uri":null,"version":"2.0"}