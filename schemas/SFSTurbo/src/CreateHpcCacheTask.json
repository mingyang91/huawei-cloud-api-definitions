{"base_path":"/","components":null,"consumes":"[\"application/json;charset=UTF-8\"]","definitions":{"CreateHpcCacheTaskReq":{"description":"hpc cache 联动任务请求","properties":{"attributes":{"$ref":"#/definitions/ObsTargetAttributes","description":"后端存储属性。2024年6月30日及之前创建,且未升级的文件系统版本不支持该参数,请提工单处理。","type":"object"},"dest_prefix":{"description":"目前只支持和src_prefix保持一致","type":"string"},"dest_target":{"description":"目前只支持和src_target保持一致","type":"string"},"src_prefix":{"description":"导入导出任务的源端路径前缀,导入时不需要包含OBS桶名,导出时不需要包含联动目录名称。\n\n对于数据预热导入,携带源端路径前缀时必须是以“/”结尾的目录或具体到某个对象。\n\n如果不带该字段,导入时会导入绑定OBS桶内的所有对象,导出时会导出联动目录下的所有文件。","type":"string"},"src_target":{"description":"联动目录名称","type":"string"},"type":{"description":"任务类型,当前支持import(附加元数据导入),import_metadata(快速导入),preload(数据预热),export(导出)。\n\n附加元数据导入方式会导入OBS对象的元数据(名称、大小、最后修改时间)以及来源于SFS Turbo 导出时的附加元数据(如uid、gid、mode)。\n\n快速导入方式仅会导入OBS对象的元数据(名称、大小、最后修改时间),不会导入其它附加元数据(如uid、gid、mode),SFS Turbo会生成默认的附加元数据。\n\n数据预热功能会同时导入元数据和数据内容,数据预热中的元数据导入采用快速导入方式,不会导入其它附加元数据(如uid、gid、mode)。\n\n数据导出功能会将您在联动目录里创建的文件,以及对从OBS导入后又做过修改的文件导出存储到OBS桶里。","enum":["import","export","import_metadata","preload"],"type":"string"}},"required":["type","src_target","dest_target"]},"CreateHpcCacheTaskResp":{"description":"响应","properties":{"task_id":{"description":"任务ID","type":"string"}},"required":["task_id"]},"ErrorResp":{"description":"失败时返回的错误对象","properties":{"errCode":{"description":"错误码","maxLength":36,"minLength":8,"type":"string"},"errMsg":{"description":"错误描述","maxLength":512,"minLength":2,"type":"string"}},"required":["errCode","errMsg"]},"ObsTargetAttributes":{"description":"后端存储属性","properties":{"dir_mode":{"description":"导入的目录权限。取值范围是0到777。\n\n第一位表示目录所有者的权限,取值范围是0到7;第二位表示目录所属用户组的权限,取值范围是0到7;第三位表示其他用户的权限,取值范围是0到7。目录所有者由uid指定,目录所属用户组由gid指定,不是目录所有者且不在目录所属用户组的用户为其他用户。\n\n数字4、2、1分别表示读、写、执行权限,这些数字相加,即可得到所需的权限组合。例如:750中第一位7代表该目录所有者对该目录具有读、写、执行权限;第二位5代表该目录所属用户组对该目录具有读、执行权限;第三位0代表其他用户对该文件无权限。","type":"integer"},"file_mode":{"description":"导入的文件权限。取值范围是0到777。\n\n第一位表示文件所有者的权限,取值范围是0到7;第二位表示文件所属用户组的权限,取值范围是0到7;第三位表示其他用户的权限,取值范围是0到7。文件所有者由uid指定,文件所属用户组由gid指定,不是文件所有者且不在文件所属用户组的用户为其他用户。\n\n数字4、2、1分别表示读、写、执行权限,这些数字相加,即可得到所需的权限组合。例如:750中第一位7代表该文件所有者对该文件具有读、写、执行权限;第二位5代表该文件所属用户组对该文件具有读、执行权限;第三位0代表其他用户对该文件无权限。","type":"integer"},"gid":{"description":"导入对象所属用户组id,默认值是0,取值范围是0到4,294,967,294(即2^32-2)。","type":"integer"},"uid":{"description":"导入对象所有者的用户id,默认值是0,取值范围是0到4,294,967,294(即2^32-2)。","type":"integer"}}}},"description":null,"group_id":"da5d54dcc7084f219d46357a8e683990","host":"sfs-turbo.cn-north-4.myhuaweicloud.com","id":"36bdaf82423645429fccacb843fae743","info_version":"v1","method":"post","name":"CreateHpcCacheTask","parameters":{},"paths":{"/v1/{project_id}/sfs-turbo/{share_id}/hpc-cache/task":{"post":{"description":"创建数据导入导出任务","operationId":"CreateHpcCacheTask","parameters":[{"description":"账号的token","in":"header","name":"X-Auth-Token","required":true,"type":"string","x-example":"MIIDkgYJKoZIhvcNAQcCoIIDgzCCXXXXX..."},{"description":"MIME类型","in":"header","name":"Content-Type","required":true,"type":"string","x-example":"application/json"},{"description":"项目ID","in":"path","name":"project_id","required":true,"type":"string","x-example":"2b31ed520xxxxxxebedb6e57xxxxxxxx"},{"description":"文件系统ID","in":"path","name":"share_id","required":true,"type":"string","x-example":"b959dfbb-xxxx-XXXX-xxxx-8930ec3a87b7"},{"description":"联动任务请求","in":"body","name":"CreateHpcCacheTaskRequestBody","required":true,"schema":{"$ref":"#/definitions/CreateHpcCacheTaskReq"}}],"responses":{"202":{"description":"Accepted","examples":{"application/json":{"task_id":"7bd2a9b6-xxxx-4605-xxxx-512d636001b0"}},"headers":{"X-request-id":{"description":"请求ID","type":"string"}},"schema":{"$ref":"#/definitions/CreateHpcCacheTaskResp"}},"400":{"description":"客户端错误","examples":{"application/json":{"errCode":"SFS.TURBO.0001","errMsg":"parameter error"}},"headers":{"X-request-id":{"description":"请求ID","type":"string"}},"schema":{"$ref":"#/definitions/ErrorResp"}},"500":{"description":"内部错误","examples":{"application/json":{"errCode":"SFS.TURBO.0005","errMsg":"Internal server error"}},"headers":{"X-request-id":{"description":"请求ID","type":"string"}},"schema":{"$ref":"#/definitions/ErrorResp"}}},"summary":"创建数据导入导出任务","tags":["存储联动管理"],"x-api-type":"open-api","x-constraint":"该接口仅适用于SFS Turbo 20MB/s/TiB、40MB/s/TiB、125MB/s/TiB、250MB/s/TiB、500MB/s/TiB、1000MB/s/TiB文件系统。","x-ctc":"N","x-dt":"N","x-hc":"Y","x-hk":"N","x-is-registered":"Y","x-obc":"N","x-open-region-cloud":"hws,hws_hk","x-order":5,"x-otc":"N","x-request-examples-1":{"dest_prefix":"input/datasets/","dest_target":"sfs-link-directory","src_prefix":"input/datasets/","src_target":"sfs-link-directory","type":"import_metadata"},"x-request-examples-2":{"attributes":{"dir_mode":755,"file_mode":755},"dest_prefix":"input/datasets/","dest_target":"sfs-link-directory","src_prefix":"input/datasets/","src_target":"sfs-link-directory","type":"import_metadata"},"x-request-examples-3":{"attributes":{"dir_mode":755,"file_mode":755,"gid":0,"uid":0},"dest_prefix":"input/datasets/","dest_target":"sfs-link-directory","src_prefix":"input/datasets/","src_target":"sfs-link-directory","type":"preload"},"x-request-examples-description-1":"创建快速导入任务,任务类型是\"import_metadata\",联动目录名称是\"sfs-link-directory\",关联OBS桶内的源端路径前缀是\"input/datasets/\"。","x-request-examples-description-2":"创建快速导入任务,任务类型是\"import_metadata\",联动目录名称是\"sfs-link-directory\",关联OBS桶内的源端路径前缀是\"input/datasets/\";指定导入的文件在文件系统内的权限为755,目录权限为755。","x-request-examples-description-3":"创建数据预热任务,任务类型是\"preload\",联动目录名称是\"sfs-link-directory\",关联OBS桶内的源端路径前缀是\"input/datasets/\";指定导入的文件在文件系统内的权限为755,目录权限为755,uid为0,gid为0。","x-request-examples-url-1":"POST HTTPS://{endpoint}/v1/{project_id}/sfs-turbo/{share_id}/hpc-cache/task","x-request-examples-url-2":"POST HTTPS://{endpoint}/v1/{project_id}/sfs-turbo/{share_id}/hpc-cache/task","x-request-examples-url-3":"POST HTTPS://{endpoint}/v1/{project_id}/sfs-turbo/{share_id}/hpc-cache/task","x-support-sdk":"Y","x-tlf":"N","x-version":"v1"}}},"product_short":"SFSTurbo","region_id":"cn-north-4","schemes":["HTTPS"],"security_definitions":null,"summary":"创建数据导入导出任务","tags":"存储联动管理","uri":null,"version":"2.0"}