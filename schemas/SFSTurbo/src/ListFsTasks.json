{"base_path":"/","components":null,"consumes":"[\"application/json;charset=UTF-8\"]","definitions":{"ErrorResp":{"description":"失败时返回的错误对象","properties":{"errCode":{"description":"错误码","maxLength":36,"minLength":8,"type":"string"},"errMsg":{"description":"错误描述","maxLength":512,"minLength":2,"type":"string"}},"required":["errCode","errMsg"]},"FsDuInfo":{"description":"目录资源使用情况(包含子目录)","properties":{"file_count":{"$ref":"#/definitions/FsFileCount","description":"该目录下所有文件数目","type":"object"},"message":{"description":"错误信息","type":"string"},"path":{"description":"文件系统内合法的目录全路径","maxLength":4096,"minLength":0,"type":"string"},"used_capacity":{"description":"占用容量,单位:byte","format":"int64","minimum":0,"type":"integer"}}},"FsFileCount":{"description":"所有文件数目","properties":{"block":{"description":"块设备数目","format":"int64","minimum":0,"type":"integer"},"char":{"description":"字符设备数目","format":"int64","minimum":0,"type":"integer"},"dir":{"description":"目录数目","format":"int64","minimum":0,"type":"integer"},"pipe":{"description":"管道文件数目","format":"int64","minimum":0,"type":"integer"},"regular":{"description":"普通文件数目","format":"int64","minimum":0,"type":"integer"},"socket":{"description":"套接字数目","format":"int64","minimum":0,"type":"integer"},"symlink":{"description":"符号链接数目","format":"int64","minimum":0,"type":"integer"}}},"ListFsTasksResp":{"description":"异步任务列表","properties":{"tasks":{"description":"任务列表","items":{"$ref":"#/definitions/OneFsTaskResp","type":"object"},"maxItems":100,"minItems":0,"type":"array"}},"required":["tasks"],"type":"object"},"OneFsTaskResp":{"description":"查询任务详情","properties":{"begin_time":{"description":"任务开始时间,UTC时间,例如:2006-01-02 15:04:05'","pattern":"2006-01-02 15:04:05","type":"string"},"dir_usage":{"$ref":"#/definitions/FsDuInfo","description":"目录资源使用情况(包含子目录)","type":"object"},"end_time":{"description":"任务结束时间,UTC时间,例如:2006-01-02 15:04:06'","pattern":"2006-01-02 15:04:06","type":"string"},"status":{"description":"任务状态, SUCCESS表示成功,DOING表示正在执行,FAIL表示失败","enum":["SUCCESS","DOING","FAIL"],"type":"string"},"task_id":{"description":"任务ID","type":"string"}},"required":["task_id","status","begin_time","end_time"]}},"description":null,"group_id":"da5d54dcc7084f219d46357a8e683990","host":"sfs-turbo.cn-north-4.myhuaweicloud.com","id":"4b121469afb94100be08e11e48e2250c","info_version":"v1","method":"get","name":"ListFsTasks","parameters":{},"paths":{"/v1/{project_id}/sfs-turbo/shares/{share_id}/fs/{feature}/tasks":{"get":{"description":"获取文件系统异步任务列表。仅支持查询目录资源使用情况的任务,API请求路径的feature取值为dir-usage,以下简称为DU任务。","operationId":"ListFsTasks","parameters":[{"description":"账号的token","in":"header","name":"X-Auth-Token","required":true,"type":"string","x-example":"MIIDkgYJKoZIhvcNAQcCoIIDgzCCXXXXX..."},{"description":"MIME类型, application/json","in":"header","name":"Content-Type","required":true,"type":"string","x-example":"application/json"},{"description":"项目id","in":"path","name":"project_id","required":true,"type":"string","x-example":"2b31ed520xxxxxxebedb6e57xxxxxxxx"},{"description":"文件系统id","in":"path","name":"share_id","required":true,"type":"string","x-example":"b959dfbb-xxxx-XXXX-xxxx-8930ec3a87b7"},{"description":"任务类型。例,DU任务取值为dir-usage","in":"path","name":"feature","required":true,"type":"string","x-example":"dir-usage"},{"description":"marker,取值为task_id","in":"query","name":"marker","required":false,"type":"string","x-example":"d651ea2b-2b20-4c6d-8bbf-2adcec18dac9"},{"description":"limit, 取值为正整数. 默认为20,最大值为100","in":"query","name":"limit","required":false,"type":"integer"}],"responses":{"200":{"description":"成功","examples":{"application/json":{"tasks":[{"begin_time":"2023-03-01 11:46:01","dir_usage":{"file_count":{"block":0,"char":0,"dir":0,"pipe":0,"regular":0,"socket":0,"symlink":0},"message":"","path":"/path","used_capacity":0},"end_time":"2023-03-01 11:46:01","status":"SUCCESS","task_id":"2b31ed520xxxxxxebedb6e57xxxxxxxx"}]}},"schema":{"$ref":"#/definitions/ListFsTasksResp"}},"400":{"description":"错误响应","examples":{"application/json":{"errCode":"SFS.TURBO.0123","errMsg":"feature invalid"}},"schema":{"$ref":"#/definitions/ErrorResp"}},"404":{"description":"错误响应","examples":{"application/json":{"errCode":"SFS.TURBO.0124","errMsg":"task_id not found"}},"schema":{"$ref":"#/definitions/ErrorResp"}},"500":{"description":"错误响应","examples":{"application/json":{"errCode":"SFS.TURBO.0005","errMsg":"Internal server error"}},"schema":{"$ref":"#/definitions/ErrorResp"}}},"summary":"获取文件系统异步任务列表","tags":["文件系统管理"],"x-api-type":"open-api","x-constraint":"在2023年8月1号之后创建的文件系统支持该API操作。后端有5min的缓存时间,查询的数据可能有延迟。API请求路径的feature仅支持以下取值:\n- dir-usage\n\n该接口仅适用于以下类型:\n- 20MB/s/TiB\n- 40MB/s/TiB\n- 125MB/s/TiB\n- 250MB/s/TiB\n- 500MB/s/TiB\n- 1000MB/s/TiB\n- HPC缓存型文件系统\n\n标准型、标准型-增强版、性能型、性能型-增强版类型的SFS Turbo文件系统,请使用“查询目录资源使用情况”接口。","x-ctc":"N","x-dt":"N","x-hc":"Y","x-hk":"N","x-is-registered":"Y","x-obc":"N","x-open-region-cloud":"hws,hws_hk","x-order":1,"x-otc":"N","x-request-examples-description-1":"ID为\"77ba6f4b-6365-4895-8dda-bc7142af4dde\"的文件系统,获取DU任务列表,从任务ID为\"11abef677ac40f46644d1d5cfc2424a4\"起,获取50个任务\n","x-request-examples-url-1":"GET HTTPS://{endpoint}/v1/{project_id}/sfs-turbo/shares/77ba6f4b-6365-4895-8dda-bc7142af4dde/fs/dir-usage/tasks?marker=11abef677ac40f46644d1d5cfc2424a4&limit=50","x-support-sdk":"Y","x-tlf":"N","x-version":"v1"}}},"product_short":"SFSTurbo","region_id":"cn-north-4","schemes":["HTTPS"],"security_definitions":null,"summary":"获取文件系统异步任务列表","tags":"文件系统管理","uri":null,"version":"2.0"}