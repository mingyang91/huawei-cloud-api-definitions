{"base_path":"/","components":null,"consumes":"[\"application/json;charset=UTF-8\"]","definitions":{"ErrorResp":{"description":"失败时返回的错误对象","properties":{"errCode":{"description":"错误码","maxLength":36,"minLength":8,"type":"string"},"errMsg":{"description":"错误描述","maxLength":512,"minLength":2,"type":"string"}},"required":["errCode","errMsg"]},"LdapJobResponseBody":{"description":"ldap配置响应体","properties":{"jobId":{"description":"ldap异步任务的id。可通过查询job的状态详情接口查询job的执行状态。","type":"string"}},"required":["jobId"]},"UpdateLdapConfigRequestBody":{"description":"ldap配置信息","properties":{"allow_local_user":{"description":"访问ldap服务器失败后是否允许使用本地用户鉴权","enum":["Yes","No"],"example":"Yes","type":"string"},"backup_url":{"description":"ldap备节点的url,固定格式为 ldap://{ip_address}:{port_number} 或 ldaps://{ip_address}:{port_number},例如ldap://192.168.xx.xx:60000","example":"ldap://192.168.xx.xx:60000","type":"string"},"base_dn":{"description":"数据库中的域","example":"dc=example,dc=com","type":"string"},"filter_condition":{"description":"过滤条件。保留字段,暂不支持","type":"string"},"password":{"description":"ldap认证密码","example":"pwdxxxxxx","type":"string"},"schema":{"description":"ldap的schema,不填写则默认为RFC2307","type":"string"},"search_timeout":{"description":"ldap搜索的超时时间,单位为秒。不填写则默认为3秒","example":10,"format":"int32","type":"integer"},"url":{"description":"ldap服务器的url,固定格式为 ldap://{ip_address}:{port_number} 或 ldaps://{ip_address}:{port_number},例如ldap://192.168.xx.xx:60000","example":"ldap://192.168.xx.xx:60000","type":"string"},"user_dn":{"description":"用户区别名","example":"cn=admin,dc=example,dc=com","type":"string"},"vpc_id":{"description":"vpc的id","example":"26f6b565-xxxx-XXXX-xxxx-03f0bd975433","type":"string"}},"type":"object"}},"description":null,"group_id":"da5d54dcc7084f219d46357a8e683990","host":"sfs-turbo.cn-north-4.myhuaweicloud.com","id":"846f06381dde4e68aa085fd9c3bb36a0","info_version":"v1","method":"put","name":"UpdateLdapConfig","parameters":{},"paths":{"/v1/{project_id}/sfs-turbo/shares/{share_id}/fs/ldap":{"put":{"description":"修改ldap配置。LDAP(Lightweight Directory Access Protocol),中文名称轻量级目录访问协议,是对目录服务器(Directory Server)进行访问、控制的一种标准协议。LDAP服务器可以集中式地管理用户和群组的归属关系,通过绑定LDAP服务器,当一个用户访问您的文件系统的文件时,SFS Turbo将会访问您的LDAP服务器以进行用户身份验证,并且获取用户和群组的归属关系,从而进行Linux标准的文件UGO权限的检查。要使用此功能,首先您需要搭建好LDAP服务器(当前SFS Turbo仅支持LDAP v3协议),常见提供LDAP协议访问的目录服务器实现有OpenLdap(Linux),Active Directory(Windows)等,不同目录服务器的实现细节有所差别,绑定时需要指定对应的Schema(Schema配置错误将会导致SFS Turbo无法正确获取用户以及群组信息,可能导致无权限访问文件系统内文件),当前SFS Turbo支持的Schema有:\n1. RFC2307(Openldap通常选择此Schema)\n2. MS-AD-BIS(Active Directory通常选择此Schema,支持RFC2307bis,支持嵌套的群组)\n\nSFS Turbo还支持配置主备LDAP服务器,当您的一台LDAP服务器故障无法访问后,SFS Turbo将会自动切换到备LDAP服务器访问,以免影响您的业务。同时,若您还选择将allow_local_user配置为Yes(默认为No),那么当您的LDAP服务器全部故障无法访问时,SFS Turbo将会使用您的本地用户以及群组信息,而非LDAP服务器中配置的信息进行身份验证和UGO权限检查,以最大程度减少故障影响面。","operationId":"UpdateLdapConfig","parameters":[{"description":"账号的token","in":"header","name":"X-Auth-Token","required":true,"type":"string","x-example":"MIIDkgYJKoZIhvcNAQcCoIIDgzCCXXXXX..."},{"description":"MIME类型","in":"header","name":"Content-Type","required":true,"type":"string","x-example":"application/json"},{"description":"项目ID","in":"path","name":"project_id","required":true,"type":"string","x-example":"2b31ed520xxxxxxebedb6e57xxxxxxxx"},{"description":"文件系统id","in":"path","name":"share_id","required":true,"type":"string"},{"description":"请求体","in":"body","name":"UpdateLdapConfigRequestBody","required":true,"schema":{"$ref":"#/definitions/UpdateLdapConfigRequestBody"}}],"responses":{"200":{"description":"更新中","examples":{"application/json":{"jobId":"72362dxxxxa04d419dbd5e6d9fe5xxxx"}},"schema":{"$ref":"#/definitions/LdapJobResponseBody"}},"400":{"description":"错误响应","examples":{"application/json":{"errCode":"SFS.TURBO.0001","errMsg":"Invalid rule id"}},"schema":{"$ref":"#/definitions/ErrorResp"}},"500":{"description":"错误响应","examples":{"application/json":{"errCode":"SFS.TURBO.0005","errMsg":"Internal server error"}},"schema":{"$ref":"#/definitions/ErrorResp"}}},"summary":"修改ldap配置","tags":["权限管理"],"x-api-type":"open-api","x-is-registered":"Y","x-open-region-cloud":"hws,hws_hk","x-request-examples-1":{"allow_local_user":"Yes","backup_url":"ldap://192.168.xx.xx:60000","base_dn":"dc=example,dc=com","password":"pwdxxxxxx","schema":"RFC2307","search_timeout":10,"url":"ldap://192.168.xx.xx:60000","user_dn":"cn=admin,dc=example,dc=com","vpc_id":"26f6b565-xxxx-XXXX-xxxx-03f0bd975433"},"x-request-examples-text-1":{"allow_local_user":"Yes","backup_url":"ldap://192.168.xx.xx:60000","base_dn":"dc=example,dc=com","password":"pwdxxxxxx","schema":"RFC2307","search_timeout":10,"url":"ldap://192.168.xx.xx:60000","user_dn":"cn=admin,dc=example,dc=com","vpc_id":"26f6b565-xxxx-XXXX-xxxx-03f0bd975433"},"x-support-sdk":"Y","x-version":"v1"}}},"product_short":"SFSTurbo","region_id":"cn-north-4","schemes":["HTTPS"],"security_definitions":null,"summary":"修改ldap配置","tags":"权限管理","uri":null,"version":"2.0"}