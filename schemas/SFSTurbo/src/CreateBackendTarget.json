{"base_path":"/","components":null,"consumes":"[\"application/json;charset=UTF-8\"]","definitions":{"AutoExportPolicy":{"description":"后端存储自动导出策略,SFS Turbo会以异步方式导出到OBS。","properties":{"events":{"description":"后端存储自动导出到OBS桶的数据更新类型。\n- NEW:表示新增数据,SFS Turbo联动目录下创建的文件,及之后对这些文件进行的元数据和数据修改,会被自动同步到OBS桶里。\n- CHANGED:表示修改数据,从OBS桶里导入到SFS Turbo联动目录下的文件,在SFS Turbo上对这些文件所进行的数据和元数据的修改,会被自动同步到OBS桶里。\n- DELETED:表示删除数据,在SFS Turbo联动目录下删除文件,OBS桶对应的对象也会被删除,只有被SFS Turbo写入的OBS对象才会被删除。","items":{"description":"后端存储自动导出到OBS桶的数据更新类型。","enum":["NEW","CHANGED","DELETED"],"type":"string"},"type":"array"},"prefix":{"description":"后端存储内对象匹配前缀","type":"string"},"suffix":{"description":"后端存储内对象匹配后缀","type":"string"}}},"CreateBackendTargetRequestBody":{"description":"创建文件系统后端存储请求体","properties":{"file_system_path":{"description":"联动目录名称,SFS Turbo会在文件系统根目录下以该名称创建一个子目录,该目录用于绑定后端存储。必须是文件系统根目录下不存在的目录名。限制如下:\n- 长度不能超过63个字符,子目录名称不能是“.”或“..”\n- 不支持多层目录,不能包含字符'/'","type":"string"},"obs":{"$ref":"#/definitions/ObsDataRepository","description":"OBS类型后端存储","type":"object"}},"required":["file_system_path","obs"]},"CreateBackendTargetResponseBody":{"description":"绑定后端存储的返回体","properties":{"creation_time":{"description":"绑定关系创建时间","type":"string"},"failure_details":{"$ref":"#/definitions/FailureDetailsMessage","description":"绑定错误信息","type":"object"},"file_system_path":{"description":"联动目录名称","type":"string"},"lifecycle":{"description":"绑定状态。\n\n如果返回状态为CREATING,您需要通过获取后端存储详细信息接口去轮询绑定完成状态。\n\n如果返回状态为AVAILABLE,代表绑定后端存储成功。\n\n如果返回状态MISCONFIGURED,代表绑定后端存储失败。DELETING 状态暂不支持。","enum":["CREATING","AVAILABLE","MISCONFIGURED","DELETING"],"type":"string"},"obs":{"$ref":"#/definitions/ObsDataRepository","description":"OBS类型后端存储","type":"object"},"target_id":{"description":"绑定关系ID","type":"string"}}},"ErrorResp":{"description":"失败时返回的错误对象","properties":{"errCode":{"description":"错误码","maxLength":36,"minLength":8,"type":"string"},"errMsg":{"description":"错误描述","maxLength":512,"minLength":2,"type":"string"}},"required":["errCode","errMsg"],"type":"object"},"FailureDetailsMessage":{"description":"数据存储库生命周期中出现的错误信息","properties":{"message":{"description":"错误信息","type":"string"}},"required":["message"]},"ObsDataRepository":{"description":"OBS类型后端存储","properties":{"attributes":{"$ref":"#/definitions/ObsTargetAttributes","description":"后端存储属性。2024年6月30日及之前创建,且未升级的文件系统版本不支持该参数,请提工单处理。","type":"object"},"bucket":{"description":"OBS桶名称","type":"string"},"endpoint":{"description":"OBS桶所在的区域域名","type":"string"},"policy":{"$ref":"#/definitions/ObsDataRepositoryPolicy","description":"后端存储自动同步策略","type":"object"}},"required":["bucket","endpoint"]},"ObsDataRepositoryPolicy":{"description":"后端存储自动同步策略","properties":{"auto_export_policy":{"$ref":"#/definitions/AutoExportPolicy","description":"后端存储自动导出策略。当文件系统发生数据更新时,将自动导出到OBS桶。","type":"object"}}},"ObsTargetAttributes":{"description":"后端存储属性","properties":{"dir_mode":{"description":"导入的目录权限。取值范围是0到777。\n\n第一位表示目录所有者的权限,取值范围是0到7;第二位表示目录所属用户组的权限,取值范围是0到7;第三位表示其他用户的权限,取值范围是0到7。目录所有者由uid指定,目录所属用户组由gid指定,不是目录所有者且不在目录所属用户组的用户为其他用户。\n\n数字4、2、1分别表示读、写、执行权限,这些数字相加,即可得到所需的权限组合。例如:750中第一位7代表该目录所有者对该目录具有读、写、执行权限;第二位5代表该目录所属用户组对该目录具有读、执行权限;第三位0代表其他用户对该文件无权限。","type":"integer"},"file_mode":{"description":"导入的文件权限。取值范围是0到777。\n\n第一位表示文件所有者的权限,取值范围是0到7;第二位表示文件所属用户组的权限,取值范围是0到7;第三位表示其他用户的权限,取值范围是0到7。文件所有者由uid指定,文件所属用户组由gid指定,不是文件所有者且不在文件所属用户组的用户为其他用户。\n\n数字4、2、1分别表示读、写、执行权限,这些数字相加,即可得到所需的权限组合。例如:750中第一位7代表该文件所有者对该文件具有读、写、执行权限;第二位5代表该文件所属用户组对该文件具有读、执行权限;第三位0代表其他用户对该文件无权限。","type":"integer"},"gid":{"description":"导入对象所属用户组id,默认值是0,取值范围是0到4,294,967,294(即2^32-2)。","type":"integer"},"uid":{"description":"导入对象所有者的用户id,默认值是0,取值范围是0到4,294,967,294(即2^32-2)。","type":"integer"}}}},"description":null,"group_id":"da5d54dcc7084f219d46357a8e683990","host":"sfs-turbo.cn-north-4.myhuaweicloud.com","id":"0e6f12d0614e4a3b9de9060a8342bf69","info_version":"v1","method":"post","name":"CreateBackendTarget","parameters":{},"paths":{"/v1/{project_id}/sfs-turbo/shares/{share_id}/targets":{"post":{"description":"为SFS Turbo 文件系统绑定后端存储","operationId":"CreateBackendTarget","parameters":[{"description":"账号的token","in":"header","name":"X-Auth-Token","required":true,"type":"string","x-example":"MIIDkgYJKoZIhvcNAQcCoIIDgzCCXXXXX..."},{"description":"MIME类型","in":"header","name":"Content-Type","required":true,"type":"string","x-example":"application/json"},{"description":"项目id","in":"path","name":"project_id","required":true,"type":"string","x-example":"2b31ed520xxxxxxebedb6e57xxxxxxxx"},{"description":"文件系统id","in":"path","name":"share_id","required":true,"type":"string","x-example":"b959dfbb-xxxx-XXXX-xxxx-8930ec3a87b7"},{"description":"创建文件系统后端存储请求体","in":"body","name":"CreateBackendTargetRequestBody","required":true,"schema":{"$ref":"#/definitions/CreateBackendTargetRequestBody"}}],"produces":["application/json"],"responses":{"202":{"description":"任务下发成功","examples":{"application/json":{"creation_time":"2023-11-19T04:02:03","file_system_path":"sfsturboDirName","lifecycle":"CREATING","obs":{"bucket":"myBucket","endpoint":"obs.region.example.com"},"target_id":"00000334-xxxx-402d-a5d4-bxxxxx87b939"}},"headers":{"X-request-id":{"description":"请求ID","type":"string"}},"schema":{"$ref":"#/definitions/CreateBackendTargetResponseBody"}},"400":{"description":"错误响应","examples":{"application/json1":{"errCode":"SFS.TURBO.0001","errMsg":"request path/body parameters invalid"}},"schema":{"$ref":"#/definitions/ErrorResp"}},"500":{"description":"错误响应","examples":{"application/json":{"errCode":"SFS.TURBO.0005","errMsg":"internal server error"}},"schema":{"$ref":"#/definitions/ErrorResp"}}},"summary":"绑定后端存储","tags":["存储联动管理"],"x-api-type":"open-api","x-apiexplorer-hide":"false","x-constraint":"- 该接口仅适用于SFS Turbo 20MB/s/TiB、40MB/s/TiB、125MB/s/TiB、250MB/s/TiB、500MB/s/TiB、1000MB/s/TiB文件系统。\n- 请求体参数file_system_path必须是文件系统根目录下不存在的目录名。\n- 绑定OBS桶作为后端存储时,仅支持OBS存储桶,不支持OBS并行文件系统。\n- 创建 OBS后端存储库,依赖的服务是对象存储服务 OBS。用户需要额外配置OBS Adminstrator权限。\n- 该接口仅适用于NFS文件系统共享协议。","x-is-registered":"Y","x-open-region-cloud":"hws,hws_hk,dt,sbc,hcs","x-order":0,"x-request-examples-1":{"file_system_path":"sfsturboDirName","obs":{"bucket":"myBucket","endpoint":"obs.region.example.com"}},"x-request-examples-2":{"file_system_path":"sfsturboDirName","obs":{"attributes":{"dir_mode":640,"file_mode":750},"bucket":"myBucket","endpoint":"obs.region.example.com"}},"x-request-examples-3":{"file_system_path":"sfsturboDirName","obs":{"attributes":{"dir_mode":640,"file_mode":750,"gid":0,"uid":0},"bucket":"myBucket","endpoint":"obs.region.example.com"}},"x-request-examples-4":{"file_system_path":"sfsturboDirName","obs":{"bucket":"myBucket","endpoint":"obs.region.example.com","policy":{"auto_export_policy":{"events":["NEW","CHANGED","DELETED"]}}}},"x-request-examples-description-1":"绑定后端存储,文件系统ID为\"630509b1-ded4-476e-8d06-dbbc3dc23900\",待绑定的OBS桶名为myBucket,待绑定的OBS桶endpoint为obs.region.example.com,联动目录名称为sfsturboDirName。\n","x-request-examples-description-2":"绑定后端存储,文件系统ID为\"630509b1-ded4-476e-8d06-dbbc3dc23900\",待绑定的OBS桶名为myBucket,待绑定的OBS桶endpointobs.region.example.com,联动目录名称为sfsturboDirName,指定导入的文件在文件系统的权限为750,指定导入的目录在文件系统的权限为640。\n","x-request-examples-description-3":"绑定后端存储,文件系统ID为\"630509b1-ded4-476e-8d06-dbbc3dc23900\",待绑定的OBS桶名为myBucket,待绑定的OBS桶endpoint为obs.region.example.com,联动目录名称为sfsturboDirName,指定导入的文件在文件系统的权限为750,指定导入的目录在文件系统的权限为640,指定导入的文件及目录在文件系统的uid为0、gid为0。\n","x-request-examples-description-4":"绑定后端存储,文件系统ID为\"630509b1-ded4-476e-8d06-dbbc3dc23900\",待绑定的OBS桶名为myBucket,待绑定的OBS桶endpoint为obs.region.example.com,联动目录名称为sfsturboDirName,指定自动导出策略为\"NEW\"、\"CHANGED\"、\"DELETED\"。\n","x-request-examples-url-1":"POST HTTPS://{endpoint}/v1/{project_id}/sfs-turbo/shares/630509b1-ded4-476e-8d06-dbbc3dc23900/targets","x-request-examples-url-2":"POST HTTPS://{endpoint}/v1/{project_id}/sfs-turbo/shares/630509b1-ded4-476e-8d06-dbbc3dc23900/targets","x-request-examples-url-3":"POST HTTPS://{endpoint}/v1/{project_id}/sfs-turbo/shares/630509b1-ded4-476e-8d06-dbbc3dc23900/targets","x-request-examples-url-4":"POST HTTPS://{endpoint}/v1/{project_id}/sfs-turbo/shares/630509b1-ded4-476e-8d06-dbbc3dc23900/targets","x-support-sdk":"Y"}}},"product_short":"SFSTurbo","region_id":"cn-north-4","schemes":["HTTPS"],"security_definitions":null,"summary":"绑定后端存储","tags":"存储联动管理","uri":null,"version":"2.0"}