{"base_path":"/","components":null,"consumes":"[\"application/json\"]","definitions":{"CreateRocketMqMigrationTaskReq":{"properties":{"bindings":{"description":"RabbitMQ binding元数据列表,迁移任务类型为自建RabbitMQ上云(rabbitToRocket)时必填。","items":{"$ref":"#/definitions/MigrationRabbitBindingMetadata"},"type":"array"},"exchanges":{"description":"RabbitMQ交换机元数据列表,迁移任务类型为自建RabbitMQ上云(rabbitToRocket)时必填。","items":{"$ref":"#/definitions/MigrationRabbitExchangeMetadata"},"type":"array"},"queues":{"description":"RabbitMQ队列元数据列表,迁移任务类型为自建RabbitMQ上云(rabbitToRocket)时必填。","items":{"$ref":"#/definitions/MigrationRabbitQueueMetadata"},"type":"array"},"subscriptionGroupTable":{"additionalProperties":{"$ref":"#/definitions/MigrationRocketMqSubscriptionGroup"},"description":"RocketMQ消费组元数据,键为消费组名,值为消费组配置,迁移任务类型为自建RocketMQ上云(rocketmq)时必填。","type":"object"},"topicConfigTable":{"additionalProperties":{"$ref":"#/definitions/MigrationRocketMqTopicConfig"},"description":"RocketMQ Topic 元数据,键为Topic名,值为topic配置,迁移任务类型为自建RocketMQ上云(rocketmq)时必填。","type":"object"},"vhosts":{"description":"RabbitMQ vhost元数据列表,迁移任务类型为自建RabbitMQ上云(rabbitToRocket)时必填。","items":{"$ref":"#/definitions/MigrationRabbitVhostMetadata"},"type":"array"}},"type":"object"},"CreateRocketMqMigrationTaskResp":{"properties":{"task_id":{"description":"任务ID。","type":"string"}},"type":"object"},"MigrationRabbitBindingMetadata":{"description":"RocketMQ元数据迁移,RabbitMQ binding元数据。","properties":{"destination":{"description":"消息的目标。","type":"string"},"destination_type":{"description":"目标的类型。","type":"string"},"routing_key":{"description":"路由键。","type":"string"},"source":{"description":"消息的来源。","type":"string"},"vhost":{"description":"vhost名称。","type":"string"}},"type":"object"},"MigrationRabbitExchangeMetadata":{"description":"RocketMQ元数据迁移,RabbitMQ交换机元数据。","properties":{"durable":{"description":"是否持久化。","type":"boolean"},"name":{"description":"交换机名称。","type":"string"},"type":{"description":"交换机类型。","type":"string"},"vhost":{"description":"vhost名称。","type":"string"}},"type":"object"},"MigrationRabbitQueueMetadata":{"description":"RocketMQ元数据迁移,RabbitMQ队列元数据。","properties":{"durable":{"description":"是否持久化。","type":"boolean"},"name":{"description":"队列名称。","type":"string"},"vhost":{"description":"vhost名称。","type":"string"}},"type":"object"},"MigrationRabbitVhostMetadata":{"description":"RocketMQ元数据迁移,RabbitMQ vhost元数据。","properties":{"name":{"description":"vhost名称。","type":"string"}},"type":"object"},"MigrationRocketMqSubscriptionGroup":{"description":"RocketMQ元数据迁移,RocketMQ消费组元数据。","properties":{"consumeBroadcastEnable":{"default":true,"description":"是否允许以广播模式消费。","type":"boolean","x-open-region-cloud":"hws,ct,hws_hk,ctc,hws_eu,ocb,g42,hk_g42,tm,sbc,hk_sbc,cmcc,hk_tm,fcs,dt"},"consumeEnable":{"default":true,"description":"是否允许消费。","type":"boolean","x-open-region-cloud":"hws,ct,hws_hk,ctc,hws_eu,ocb,g42,hk_g42,tm,sbc,hk_sbc,cmcc,hk_tm,fcs,dt"},"consumeFromMinEnable":{"default":true,"description":"是否从最小偏移量开始消费。","type":"boolean","x-open-region-cloud":"hws,ct,hws_hk,ctc,hws_eu,ocb,g42,hk_g42,tm,sbc,hk_sbc,cmcc,hk_tm,fcs,dt"},"groupName":{"description":"消费组名。","type":"string","x-open-region-cloud":"hws,ct,hws_hk,ctc,hws_eu,ocb,g42,hk_g42,tm,sbc,hk_sbc,cmcc,hk_tm,fcs,dt"},"notifyConsumerIdsChangedEnable":{"default":true,"description":"消费者ID变化时是否通知。","type":"boolean","x-open-region-cloud":"hws,ct,hws_hk,ctc,hws_eu,ocb,g42,hk_g42,tm,sbc,hk_sbc,cmcc,hk_tm,fcs,dt"},"retryMaxTimes":{"default":16,"description":"消费最大重试次数。","format":"int32","type":"integer","x-open-region-cloud":"hws,ct,hws_hk,ctc,hws_eu,ocb,g42,hk_g42,tm,sbc,hk_sbc,cmcc,hk_tm,fcs,dt"},"retryQueueNums":{"default":1,"description":"重试队列个数。","format":"int32","type":"integer","x-open-region-cloud":"hws,ct,hws_hk,ctc,hws_eu,ocb,g42,hk_g42,tm,sbc,hk_sbc,cmcc,hk_tm,fcs,dt"},"whichBrokerWhenConsumeSlow":{"default":1,"description":"慢消费时选择的broker节点ID。","format":"int64","type":"integer","x-open-region-cloud":"hws,ct,hws_hk,ctc,hws_eu,ocb,g42,hk_g42,tm,sbc,hk_sbc,cmcc,hk_tm,fcs,dt"}},"type":"object"},"MigrationRocketMqTopicConfig":{"description":"RocketMQ元数据迁移,RocketMQ Topic元数据。","properties":{"order":{"default":false,"description":"是否有序消息。","type":"boolean"},"perm":{"default":6,"description":"Topic权限。","format":"int32","type":"integer"},"readQueueNums":{"default":16,"description":"读队列个数。","format":"int32","type":"integer","x-open-region-cloud":"hws,ct,hws_hk,ctc,hws_eu,ocb,g42,hk_g42,tm,sbc,hk_sbc,cmcc,hk_tm,fcs,dt"},"topicFilterType":{"default":"SINGLE_TAG","description":"Topic过滤类型。\n  - SINGLE_TAG:单标签\n  - MULTI_TAG:多标签","type":"string","x-open-region-cloud":"hws,ct,hws_hk,ctc,hws_eu,ocb,g42,hk_g42,tm,sbc,hk_sbc,cmcc,hk_tm,fcs,dt"},"topicName":{"description":"Topic名称。","type":"string","x-open-region-cloud":"hws,ct,hws_hk,ctc,hws_eu,ocb,g42,hk_g42,tm,sbc,hk_sbc,cmcc,hk_tm,fcs,dt"},"topicSysFlag":{"default":0,"description":"Topic系统标志位。","format":"int32","type":"integer","x-open-region-cloud":"hws,ct,hws_hk,ctc,hws_eu,ocb,g42,hk_g42,tm,sbc,hk_sbc,cmcc,hk_tm,fcs,dt"},"writeQueueNums":{"default":16,"description":"写队列个数。","format":"int32","type":"integer","x-open-region-cloud":"hws,ct,hws_hk,ctc,hws_eu,ocb,g42,hk_g42,tm,sbc,hk_sbc,cmcc,hk_tm,fcs,dt"}},"type":"object"}},"description":null,"group_id":"3fc4437f7aee45c4a961299b745011f5","host":"dms.cn-north-4.myhuaweicloud.com","id":"c36247ca9f77443a8c53446bf2dea8a8","info_version":"v2","method":"post","name":"CreateRocketMqMigrationTask","parameters":{},"paths":{"/v2/{project_id}/instances/{instance_id}/metadata":{"post":{"description":"新建元数据迁移任务。","operationId":"CreateRocketMqMigrationTask","parameters":[{"description":"项目ID,获取方式请参见[获取项目ID](hrm-api-0011.xml)。","in":"path","name":"project_id","required":true,"type":"string"},{"description":"实例ID。","in":"path","name":"instance_id","required":true,"type":"string"},{"description":"true开启同名覆盖,会对已有的同名元数据的配置进行修改,false时当Topic或group已存在则会报错。","enum":["true","false"],"in":"query","name":"overwrite","required":true,"type":"string"},{"description":"迁移任务名称,名称规则参考创建实例。","in":"query","name":"name","required":true,"type":"string"},{"description":"迁移任务类型,分为自建RocketMQ上云(rocketmq)、自建RabbitMQ上云(rabbitToRocket)","enum":["rocketmq","rabbitToRocket"],"in":"query","name":"type","required":true,"type":"string"},{"description":"元数据json文件。","in":"body","name":"CreateRocketMqMigrationTaskRequestBody","required":true,"schema":{"$ref":"#/definitions/CreateRocketMqMigrationTaskReq"}}],"responses":{"200":{"description":"创建成功。","examples":{"application/json":{"task_id":"6cf4dcd3-8471-4139-8b5b-8a3a71f704c7"}},"schema":{"$ref":"#/definitions/CreateRocketMqMigrationTaskResp"}}},"summary":"新建元数据迁移任务","tags":["元数据迁移"],"x-api-type":"open-api","x-hybridcloud":true,"x-is-registered":"Y","x-open-region-cloud":"hws,ct,hws_hk,ctc,hws_eu,ocb,g42,hk_g42,tm,sbc,hk_sbc,cmcc,hk_tm,dt","x-produc-type":"rocketmq","x-request-examples-1":{"subscriptionGroupTable":{"group-test1":{"consumeBroadcastEnable":true,"consumeEnable":true,"consumeFromMinEnable":true,"groupName":"group-test1","notifyConsumerIdsChangedEnable":true,"retryMaxTimes":2,"retryQueueNums":1,"whichBrokerWhenConsumeSlow":1}},"topicConfigTable":{"topic-test1":{"order":false,"perm":6,"readQueueNums":3,"topicFilterType":"SINGLE_TAG","topicName":"topic-test1","topicSysFlag":0,"writeQueueNums":3}}},"x-request-examples-2":{"bindings":[{"destination":"test-001","destination_type":"queue","routing_key":"test-001","source":"direct","vhost":"/"}],"exchanges":[{"durable":false,"name":"direct","type":"topic","vhost":"/"}],"queues":[{"durable":false,"name":"test-001","vhost":"/"}],"vhosts":[{"name":"DeleteVhost123"}]},"x-request-examples-description-1":"创建元数据迁移任务,迁移其他厂商或自建RocketMQ实例的元数据到云上RocketMQ实例。","x-request-examples-description-2":"创建元数据迁移任务,迁移RabbitMQ的元数据到云上RocketMQ实例。","x-request-examples-url-1":"POST https://{endpoint}/v2/{project_id}/instances/{instance_id}/metadata?overwrite=true&name=task-123&type=rocketmq","x-request-examples-url-2":"POST https://{endpoint}/v2/{project_id}/instances/{instance_id}/metadata?overwrite=true&name=task-123&type=rabbitToRocket","x-support-sdk":"Y"}}},"product_short":"RocketMQ","region_id":"cn-north-4","schemes":["HTTPS"],"security_definitions":null,"summary":"新建元数据迁移任务","tags":"元数据迁移","uri":null,"version":"2.0"}