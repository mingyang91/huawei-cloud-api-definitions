{"base_path":"/","components":null,"consumes":"[\"application/json\"]","definitions":{"CreateRocketMqMigrationTaskReq":{"properties":{"bindings":{"description":"**参数解释**:\nRabbitMQ binding元数据列表,迁移任务类型为自建RabbitMQ上云(rabbitToRocket)时必填。\n**约束限制**:\n不涉及。\n**取值范围**:\n不涉及。\n**默认取值**:\n不涉及。","items":{"$ref":"#/definitions/MigrationRabbitBindingMetadata"},"type":"array"},"exchanges":{"description":"**参数解释**:\nRabbitMQ交换机元数据列表,迁移任务类型为自建RabbitMQ上云(rabbitToRocket)时必填。\n**约束限制**:\n不涉及。\n**取值范围**:\n不涉及。\n**默认取值**:\n不涉及。","items":{"$ref":"#/definitions/MigrationRabbitExchangeMetadata"},"type":"array"},"queues":{"description":"**参数解释**:\nRabbitMQ队列元数据列表,迁移任务类型为自建RabbitMQ上云(rabbitToRocket)时必填。\n**约束限制**:\n不涉及。\n**取值范围**:\n不涉及。\n**默认取值**:\n不涉及。","items":{"$ref":"#/definitions/MigrationRabbitQueueMetadata"},"type":"array"},"subscription_group_table":{"additionalProperties":{"$ref":"#/definitions/MigrationRocketMqSubscriptionGroup"},"description":"**参数解释**:\nRocketMQ消费组元数据,键为消费组名,值为消费组配置,迁移任务类型为自建RocketMQ上云(rocketmq)时必填。\n**约束限制**:\n不涉及。\n**取值范围**:\n不涉及。\n**默认取值**:\n不涉及。","type":"object"},"topic_config_table":{"additionalProperties":{"$ref":"#/definitions/MigrationRocketMqTopicConfig"},"description":"**参数解释**:\nRocketMQ Topic 元数据,键为Topic名,值为topic配置,迁移任务类型为自建RocketMQ上云(rocketmq)时必填。\n**约束限制**:\n不涉及。\n**取值范围**:\n不涉及。\n**默认取值**:\n不涉及。","type":"object"},"vhosts":{"description":"**参数解释**:\nRabbitMQ vhost元数据列表,迁移任务类型为自建RabbitMQ上云(rabbitToRocket)时必填。\n**约束限制**:\n不涉及。\n**取值范围**:\n不涉及。\n**默认取值**:\n不涉及。","items":{"$ref":"#/definitions/MigrationRabbitVhostMetadata"},"type":"array"}},"type":"object"},"CreateRocketMqMigrationTaskResp":{"properties":{"task_id":{"description":"**参数解释**:\n任务ID。\n**约束限制**:\n不涉及。\n**取值范围**:\n不涉及。\n**默认取值**:\n不涉及。","type":"string"}},"type":"object"},"MigrationRabbitBindingMetadata":{"description":"**参数解释**:\nRocketMQ元数据迁移,RabbitMQ binding元数据。\n**约束限制**:\n不涉及。\n**取值范围**:\n不涉及。\n**默认取值**:\n不涉及。","properties":{"destination":{"description":"**参数解释**:\n消息的目标。\n**约束限制**:\n不涉及。\n**取值范围**:\n不涉及。\n**默认取值**:\n不涉及。","type":"string"},"destination_type":{"description":"**参数解释**:\n目标的类型。\n**约束限制**:\n不涉及。\n**取值范围**:\n- exchange:交换机。\n- queue:队列。RabbitMQ AMQP版本只支持绑定queue。\n**默认取值**:\n不涉及。","type":"string"},"routing_key":{"description":"**参数解释**:\n路由键。\n**约束限制**:\n不涉及。\n**取值范围**:\n不涉及。\n**默认取值**:\n不涉及。","type":"string"},"source":{"description":"**参数解释**:\n消息的来源。\n**约束限制**:\n不涉及。\n**取值范围**:\n不涉及。\n**默认取值**:\n不涉及。","type":"string"},"vhost":{"description":"**参数解释**:\nvhost名称。\n**约束限制**:\n不涉及。\n**取值范围**:\n不涉及。\n**默认取值**:\n不涉及。","type":"string"}},"type":"object"},"MigrationRabbitExchangeMetadata":{"description":"**参数解释**:\nRocketMQ元数据迁移,RabbitMQ交换机元数据。\n**约束限制**:\n不涉及。\n**取值范围**:\n- true:持久化。\n- false:不进行持久化。\n**默认取值**:\n不涉及。","properties":{"durable":{"description":"**参数解释**:\n是否持久化。\n**约束限制**:\n不涉及。\n**取值范围**:\n- true:持久化。\n- false:不进行持久化。\n**默认取值**:\n不涉及。","type":"boolean"},"name":{"description":"**参数解释**:\n交换机名称。\n**约束限制**:\n不涉及。\n**取值范围**:\n不涉及。\n**默认取值**:\n不涉及。","type":"string"},"type":{"description":"**参数解释**:\n交换机类型。\n**约束限制**:\n不涉及。\n**取值范围**:\n- topic:支持routing key的模糊匹配。\n- direct:按routing key精确匹配进行消息路由。\n- fanout:广播模式,消息会发送到所有绑定的队列,忽略routing key。\n- headers:根据消息头(headers)中的键值对进行路由,而不是routing key。\n**默认取值**:\n不涉及。","type":"string"},"vhost":{"description":"**参数解释**:\nvhost名称。\n**约束限制**:\n不涉及。\n**取值范围**:\n不涉及。\n**默认取值**:\n不涉及。","type":"string"}},"type":"object"},"MigrationRabbitQueueMetadata":{"description":"**参数解释**:\nRocketMQ元数据迁移,RabbitMQ队列元数据。\n**约束限制**:\n不涉及。\n**取值范围**:\n- true:持久化。\n- false:不进行持久化。\n**默认取值**:\n不涉及。","properties":{"durable":{"description":"**参数解释**:\n是否持久化。\n**约束限制**:\n不涉及。\n**取值范围**:\n- true:持久化。\n- false:不进行持久化。\n**默认取值**:\n不涉及。","type":"boolean"},"name":{"description":"**参数解释**:\n队列名称。\n**约束限制**:\n不涉及。\n**取值范围**:\n不涉及。\n**默认取值**:\n不涉及。","type":"string"},"vhost":{"description":"**参数解释**:\nvhost名称。\n**约束限制**:\n不涉及。\n**取值范围**:\n不涉及。\n**默认取值**:\n不涉及。","type":"string"}},"type":"object"},"MigrationRabbitVhostMetadata":{"description":"**参数解释**:\nRocketMQ元数据迁移,RabbitMQ vhost元数据。\n**约束限制**:\n不涉及。\n**取值范围**:\n不涉及。\n**默认取值**:\n不涉及。","properties":{"name":{"description":"**参数解释**:\nvhost名称。\n**约束限制**:\n不涉及。\n**取值范围**:\n不涉及。\n**默认取值**:\n不涉及。","type":"string"}},"type":"object"},"MigrationRocketMqSubscriptionGroup":{"description":"**参数解释**:\nRocketMQ元数据迁移,RocketMQ消费组元数据。\n**约束限制**:\n不涉及。\n**取值范围**:\n不涉及。\n**默认取值**:\n不涉及。","properties":{"consume_broadcast_enable":{"default":true,"description":"**参数解释**:\n是否允许以广播模式消费。\n**约束限制**:\n不涉及。\n**取值范围**:\n- true:允许以广播模式消费。\n- false:不允许以广播模式消费。\n**默认取值**:\n不涉及。","type":"boolean"},"consume_enable":{"description":"**参数解释**:\n是否允许消费。\n**约束限制**:\n不涉及。\n**取值范围**:\n- true:允许消费。\n- false:不允许消费。\n**默认取值**:\ntrue。","type":"boolean"},"consume_from_min_enable":{"description":"**参数解释**:\n是否从最小偏移量开始消费。\n**约束限制**:\n不涉及。\n**取值范围**:\n- true:是。\n- false:不是。\n**默认取值**:\ntrue。","type":"boolean"},"group_name":{"description":"**参数解释**:\n消费组名。\n**约束限制**:\n不涉及。\n**取值范围**:\n不涉及。\n**默认取值**:\n不涉及。","type":"string"},"notify_consumer_ids_changed_enable":{"description":"**参数解释**:\n消费者ID变化时是否通知。\n**约束限制**:\n不涉及。\n**取值范围**:\n- true:是。\n- false:不是。\n**默认取值**:\ntrue。","type":"boolean"},"retry_max_times":{"description":"**参数解释**:\n消费最大重试次数。\n**约束限制**:\n不涉及。\n**取值范围**:\n不涉及。\n**默认取值**:\n16。","format":"int32","type":"integer"},"retry_queue_nums":{"description":"**参数解释**:\n消费最大重试次数。\n**约束限制**:\n不涉及。\n**取值范围**:\n不涉及。\n**默认取值**:\n1。","format":"int32","type":"integer"},"which_broker_when_consume_slow":{"description":"**参数解释**:\n慢消费时选择的broker节点ID\n**约束限制**:\n不涉及。\n**取值范围**:\n不涉及。\n**默认取值**:\n1。","format":"int64","type":"integer"}},"type":"object"},"MigrationRocketMqTopicConfig":{"description":"**参数解释**:\nRocketMQ元数据迁移,RocketMQ Topic元数据。\n**约束限制**:\n不涉及。\n**取值范围**:\n不涉及。\n**默认取值**:\n不涉及。","properties":{"order":{"default":false,"description":"**参数解释**:\n是否有序消息。\n**约束限制**:\n不涉及。\n**取值范围**:\n- true:有序消息。\n- false:无序消息。\n**默认取值**:\nfalse。","type":"boolean"},"perm":{"description":"**参数解释**:\nTopic权限。\n**约束限制**:\n不涉及。\n**取值范围**:\n- PUB:拥有发布权限。\n- SUB:拥有订阅权限。\n- PUB|SUB:拥有发布订阅权限。\n- DENY:无权限。\n**默认取值**:\n6。","format":"int32","type":"integer"},"read_queue_nums":{"description":"**参数解释**:\n读队列个数。\n**约束限制**:\n不涉及。\n**取值范围**:\n不涉及。\n**默认取值**:\n16。","format":"int32","type":"integer"},"topic_filter_type":{"default":"SINGLE_TAG","description":"**参数解释**:\nTopic过滤类型。\n**约束限制**:\n不涉及。\n**取值范围**:\n- SINGLE_TAG:单标签\n  - MULTI_TAG:多标签\n**默认取值**:\n不涉及。","type":"string"},"topic_name":{"description":"**参数解释**:\nTopic名称。\n**约束限制**:\n不涉及。\n**取值范围**:\n不涉及。\n**默认取值**:\n不涉及。","type":"string"},"topic_sys_flag":{"description":"**参数解释**:\nTopic系统标志位。\n**约束限制**:\n不涉及。\n**取值范围**:\n不涉及。\n**默认取值**:\n0。","format":"int32","type":"integer"},"write_queue_nums":{"description":"**参数解释**:\n写队列个数。\n**约束限制**:\n不涉及。\n**取值范围**:\n不涉及。\n**默认取值**:\n16。","format":"int32","type":"integer"}},"type":"object"}},"description":null,"group_id":"3fc4437f7aee45c4a961299b745011f5","host":"dms.cn-north-4.myhuaweicloud.com","id":"c36247ca9f77443a8c53446bf2dea8a8","info_version":"v2","method":"post","name":"CreateRocketMqMigrationTask","parameters":{},"paths":{"/v2/{project_id}/instances/{instance_id}/metadata":{"post":{"description":"新建元数据迁移任务。","operationId":"CreateRocketMqMigrationTask","parameters":[{"description":"**参数解释**:\n项目ID,获取方式请参见[获取项目ID](hrm-api-0011.xml)。\n**约束限制**:\n不涉及。\n**取值范围**:\n不涉及。\n**默认取值**:\n不涉及。","in":"path","name":"project_id","required":true,"type":"string"},{"description":"**参数解释**:\n实例ID。获取方法如下:调用“查询所有实例列表”接口,从响应体中获取实例ID。\n**约束限制**:\n不涉及。\n**取值范围**:\n不涉及。\n**默认取值**:\n不涉及。","in":"path","name":"instance_id","required":true,"type":"string"},{"description":"**参数解释**:\ntrue开启同名覆盖,会对已有的同名元数据的配置进行修改,false时当Topic或group已存在则会报错。\n**约束限制**:\n不涉及。\n**取值范围**:\n不涉及。\n**默认取值**:\n不涉及。","enum":["true","false"],"in":"query","name":"overwrite","required":true,"type":"string"},{"description":"**参数解释**:\n迁移任务名称,名称规则参考创建实例。\n**约束限制**:\n不涉及。\n**取值范围**:\n不涉及。\n**默认取值**:\n不涉及。","in":"query","name":"name","required":true,"type":"string"},{"description":"**参数解释**:\n迁移任务类型,分为自建RocketMQ上云(rocketmq)、自建RabbitMQ上云(rabbitToRocket)\n**约束限制**:\n不涉及。\n**取值范围**:\n不涉及。\n**默认取值**:\n不涉及。","enum":["rocketmq","rabbitToRocket"],"in":"query","name":"type","required":true,"type":"string"},{"description":"**参数解释**:\n元数据json文件。\n**约束限制**:\n不涉及。\n**取值范围**:\n不涉及。\n**默认取值**:\n不涉及。","in":"body","name":"CreateRocketMqMigrationTaskRequestBody","required":true,"schema":{"$ref":"#/definitions/CreateRocketMqMigrationTaskReq"}}],"responses":{"200":{"description":"创建成功。","examples":{"application/json":{"task_id":"6cf4dcd3-8471-4139-8b5b-8a3a71f704c7"}},"schema":{"$ref":"#/definitions/CreateRocketMqMigrationTaskResp"}}},"summary":"新建元数据迁移任务","tags":["元数据迁移"],"x-api-type":"open-api","x-hybridcloud":true,"x-is-registered":"Y","x-open-region-cloud":"hws,hws_hk,ctc,hws_eu,ocb,g42,hk_g42,tm,sbc,hk_sbc,cmcc,hk_tm,dt,ax,srg","x-produc-type":"rocketmq","x-request-examples-1":{"subscription_group_table":{"group-test1":{"consume_broadcast_enable":true,"consume_enable":true,"consume_from_min_enable":true,"group_name":"group-test1","notify_consumer_ids_changed_enable":true,"retry_max_times":2,"retry_queue_nums":1,"which_broker_when_consume_slow":1}},"topic_config_table":{"topic-test1":{"order":false,"perm":6,"read_queue_nums":3,"topic_filter_type":"SINGLE_TAG","topic_name":"topic-test1","topic_sys_flag":0,"write_queue_nums":3}}},"x-request-examples-2":{"bindings":[{"destination":"test-001","destination_type":"queue","routing_key":"test-001","source":"direct","vhost":"/"}],"exchanges":[{"durable":false,"name":"direct","type":"topic","vhost":"/"}],"queues":[{"durable":false,"name":"test-001","vhost":"/"}],"vhosts":[{"name":"DeleteVhost123"}]},"x-request-examples-description-1":"创建元数据迁移任务,迁移其他厂商或自建RocketMQ实例的元数据到云上RocketMQ实例。","x-request-examples-description-2":"创建元数据迁移任务,迁移RabbitMQ的元数据到云上RocketMQ实例。","x-request-examples-url-1":"POST https://{endpoint}/v2/{project_id}/instances/{instance_id}/metadata?overwrite=true&name=task-123&type=rocketmq","x-request-examples-url-2":"POST https://{endpoint}/v2/{project_id}/instances/{instance_id}/metadata?overwrite=true&name=task-123&type=rabbitToRocket","x-support-sdk":"Y"}}},"product_short":"RocketMQ","region_id":"cn-north-4","schemes":["HTTPS"],"security_definitions":null,"summary":"新建元数据迁移任务","tags":"元数据迁移","uri":null,"version":"2.0"}