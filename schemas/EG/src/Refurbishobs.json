{"base_path":"/","components":null,"consumes":"","definitions":{"ApigwTargetDetail":{"properties":{"invocation_http_parameters":{"$ref":"#/definitions/InvocationHttpParameters"},"url":{"description":"目标url","example":"https://dms.cn-north-4.myhuaweicloud.com/testaaa","type":"string"}},"required":["url"],"type":"object"},"DeadLetterQueue":{"description":"订阅的死信参数列表","properties":{"connection_id":{"description":"目标连接id","example":"8516d278-268a-4a8b-8766-9bf9b3302f43","maxLength":128,"minLength":1,"type":"string"},"instance_id":{"description":"实例id","example":"ff0e3f10-fcab-4c3a-84bb-cf5a8b6f7722","maxLength":128,"minLength":1,"type":"string"},"topic":{"description":"主题","example":"topic","maxLength":128,"minLength":1,"type":"string"},"type":{"description":"队列类型","enum":["KAFKA"],"example":"KAFKA","type":"string"}},"required":["type","instance_id","connection_id","topic"],"type":"object"},"EgTargetDetail":{"properties":{"agency_name":{"description":"委托名称","example":"EG_TARGET_AGENCY","type":"string"},"cross_account":{"default":false,"description":"跨账号开关","type":"boolean"},"cross_region":{"default":false,"description":"跨region开关","type":"boolean"},"target_channel_id":{"description":"目标通道id","example":"10a79a30-bd4a-4955-a3ec-d62dc799347b","type":"string"},"target_project_id":{"description":"目标项目id","example":"c5be311886934b7c8afb4f8970376130","type":"string"},"target_region":{"description":"目标region","example":"cn-north-test","type":"string"}},"required":["target_project_id","target_channel_id","target_region","agency_name"],"type":"object"},"HeaderParameter":{"properties":{"is_value_secret":{"description":"是否加密","example":false,"type":"boolean"},"key":{"description":"header的key值","example":"test-key","maxLength":256,"minLength":1,"type":"string"},"value":{"description":"deader的value值","example":"test-value","maxLength":1024,"minLength":1,"type":"string"}},"type":"object"},"InvocationHttpParameters":{"properties":{"header_parameters":{"description":"对象列表","items":{"$ref":"#/definitions/HeaderParameter"},"maxItems":5,"minItems":0,"type":"array"}},"type":"object"},"KafkaTargetDetail":{"description":"订阅的kafka事件目标参数列表,该字段序列化后总长度不超过1024字节","properties":{"keyTransform":{"description":"键值规则","properties":{"template":{"description":"键值规则模板,键值规则为VARIABLE时必填","type":"string"},"type":{"description":"键值规则类型","enum":["NONE","VARIABLE","CONSTANT"],"type":"string"},"value":{"description":"键值规则,键值规则为VARIABLE,CONSTANT时必填","type":"string"}},"type":"object"},"topic":{"description":"主题","example":"8516d278-268a-4a8b-8766-9bf9b3302f43","type":"string"}},"required":["topic"],"type":"object"},"ObsRefurbishReq":{"properties":{"agency_name":{"description":"委托名称","type":"string"},"id":{"description":"需要翻新的触发器id","type":"string"},"transform":{"$ref":"#/definitions/TransForm","description":"规则配置"}},"required":["agency_name","id","transform"],"type":"object"},"SmnTargetDetail":{"description":"订阅的SMN事件目标参数列表,该字段序列化后总长度不超过1024字节","properties":{"agency_name":{"description":"委托名称","example":"EG_SMN_PUBLISHER_AGENCY","type":"string"},"subject_transform":{"description":"标题规则","properties":{"template":{"description":"标题规则模板,键值规则为VARIABLE时必填","type":"string"},"type":{"description":"标题规则类型","enum":["VARIABLE","CONSTANT"],"type":"string"},"value":{"description":"标题规则","type":"string"}},"required":["type","value"],"type":"object"},"urn":{"description":"主题urn","example":"urn:smn:cn-north-7:bac852160cc743158936edaab6dda813:122","type":"string"}},"required":["urn","agency_name"],"type":"object"},"SubscriptionInfo":{"properties":{"channel_id":{"description":"通道ID","example":"05649f9a-b324-4920-9c49-156d4cd2e546","type":"string"},"channel_name":{"description":"通道名称","example":"channel006","type":"string"},"created_time":{"description":"创建时间","example":"2021-12-09 09:00:00","type":"string"},"description":{"description":"订阅描述","example":"this is a test subscription","type":"string"},"id":{"description":"订阅ID","example":"23709d68-54d5-423b-a6be-03302e893152","type":"string"},"name":{"description":"订阅名称","example":"test-subscription","type":"string"},"sources":{"description":"订阅源列表","items":{"$ref":"#/definitions/SubscriptionSourceInfo"},"type":"array"},"status":{"description":"状态","enum":["CREATED","ENABLED","DISABLED","FROZEN","ERROR"],"example":"CREATED","type":"string"},"targets":{"description":"订阅目标列表","items":{"$ref":"#/definitions/SubscriptionTargetInfo"},"type":"array"},"type":{"description":"类型","enum":["EVENT","SCHEDULED"],"example":"EVENT","type":"string"},"updated_time":{"description":"更新时间","example":"2021-12-09 09:00:00","type":"string"},"used":{"description":"标签信息","items":{"$ref":"#/definitions/SubscriptionUsedInfo"},"type":"array"}},"type":"object"},"SubscriptionSourceInfo":{"properties":{"created_time":{"description":"创建时间","example":"2021-12-09 09:00:00","type":"string"},"detail":{"description":"订阅的事件源参数列表","example":{"name":"name"},"type":"object"},"filter":{"description":"订阅事件源的匹配过滤规则","example":{"data":{"count":[{"op":"NumberIn","values":[1,2]}]}},"type":"object"},"id":{"description":"订阅源ID","example":"3a0eeff2-78a4-4122-dfge-7ty5e37f64er","type":"string"},"name":{"description":"订阅的事件源名称","example":"HC.OBS","type":"string"},"provider_type":{"description":"订阅的事件源的提供方类型","example":"OFFICIAL","type":"string"},"updated_time":{"description":"更新时间","example":"2021-12-09 09:00:00","type":"string"}},"type":"object"},"SubscriptionTargetInfo":{"properties":{"apigw_detail":{"$ref":"#/definitions/ApigwTargetDetail","description":"订阅的事件APIGWurl目标参数列表,该字段序列化后总长度不超过1024字节,APIGW目标必填"},"connection_id":{"description":"订阅的事件目标使用的目标链接ID","example":"456eekj3-778u-4tyu-dfrt-er55e37f667t","maxLength":64,"type":"string"},"created_time":{"description":"创建时间","example":"2021-12-09 09:00:00","type":"string"},"dead_letter_queue":{"$ref":"#/definitions/DeadLetterQueue"},"detail":{"description":"订阅的事件目标参数列表","example":{"url":"http://10.213.96.90:8080/t/nodeapp/trigger-hello-nodejs"},"type":"object"},"eg_detail":{"$ref":"#/definitions/EgTargetDetail","description":"订阅的事件eg通道目标参数列表,该字段序列化后总长度不超过1024字节,eg通道目标必填"},"id":{"description":"订阅目标ID","example":"3a0eeff2-78a4-4122-dfge-7ty5e37f64er","type":"string"},"kafka_detail":{"$ref":"#/definitions/KafkaTargetDetail","description":"订阅的事件kafka目标参数列表,该字段序列化后总长度不超过1024字节,kafka订阅目标必填"},"name":{"description":"订阅的事件目标名称","example":"WEBHOOK","type":"string"},"provider_type":{"description":"订阅的事件目标的提供方类型","example":"CUSTOM","type":"string"},"retry_times":{"description":"重试次数","example":16,"type":"integer"},"smn_detail":{"$ref":"#/definitions/SmnTargetDetail","description":"订阅的事件smn目标参数列表,该字段序列化后总长度不超过1024字节,smn订阅目标必填"},"transform":{"$ref":"#/definitions/TransForm"},"updated_time":{"description":"更新时间","example":"2021-12-09 09:00:00","type":"string"}},"type":"object"},"SubscriptionUsedInfo":{"properties":{"description":{"description":"描述","example":null,"type":"string"},"owner":{"description":"管理租户账号","example":"op_svc_obs","type":"string"},"resource_id":{"description":"关联资源ID","example":"23709d68-54d5-423b-a6be-03302e893152","type":"string"}},"type":"object"},"TransForm":{"description":"订阅的事件目标转换规则","properties":{"template":{"description":"变量类型规则时,规则内容的模板定义,支持对已定义变量的引用。","example":"{\"contant_boolean\": ${contant_boolean},\"contant_string\": \"${contant_string!\\\"default\\\"}\",\"varaible_string\": \"${contant_boolean}\",\"varaible_json_object\": ${varaible_json_object!\"null\"}}","maxLength":2048,"type":"string"},"type":{"description":"转换规则类型","enum":["ORIGINAL","CONSTANT","VARIABLE"],"example":"VARIABLE","type":"string"},"value":{"description":"常量类型规则时,字段为常量内容定义;\n变量类型规则时,为变量定义,内容必须为JsonObject字符串。\n变量最多支持100个,且不支持嵌套结构定义;\n变量名由字母、数字、点、下划线和中划线组成,必须字母或数字开头不能以HC.开头,长度不超过64个字符;\n变量值表达式支持常量或JsonPath表达式,字符串长度不超过1024个字符。","example":"{\"contant_boolean\": true,\"contant_string\": \"constant\",\"varaible_string\": \"$.data.string\",\"varaible_json_object\": \"$.data.object\"}","maxLength":1024,"type":"string"}},"required":["type"],"type":"object"}},"description":null,"group_id":"dbc8d90200f14ed9a1cfd69008aa0f08","host":"eg.cn-north-4.myhuaweicloud.com","id":"eda0b5f06e07406eb47a380f5dbf8859","info_version":"v1","method":"post","name":"Refurbishobs","parameters":{"IamToken":{"description":"用户Token。通过调用IAM服务获取用户Token接口获取(响应消息头中X-Subject-Token的值)。","in":"header","maxLength":16384,"minLength":1,"name":"X-Auth-Token","required":true,"type":"string","x-example":"MIIDkgYJKoZIhvcNAQcCoIIDgzCCXXXXXX..."},"ProjectId":{"description":"租户资源空间ID","in":"path","name":"project_id","required":true,"type":"string","x-example":"73d69ae0cfcf460190522d06b60f05ad"}},"paths":{"/v1/{project_id}/subscriptions/obsbuckets/{bucket_name}/refurbishobs":{"post":{"description":"翻新obs fg触发器,创建为EG订阅","operationId":"Refurbishobs","parameters":[{"in":"path","name":"bucket_name","required":true,"type":"string"},{"$ref":"#/parameters/ProjectId"},{"$ref":"#/parameters/IamToken"},{"in":"body","name":"ObsRefurbishRequestBody","required":true,"schema":{"$ref":"#/definitions/ObsRefurbishReq"}}],"responses":{"200":{"description":"翻新FG后所创建订阅","schema":{"$ref":"#/definitions/SubscriptionInfo"}}},"tags":["obs桶管理"],"x-api-framework":"RestfulAPI","x-api-position":"管理面","x-api-type":"open-api","x-api-user":"IAM普通租户","x-is-open-doc":"Y","x-is-registered":"Y","x-open-region-cloud":"hws,hws_hk","x-request-examples-1":{"agency_name":"string","id":"string","transform":{"template":"{\"contant_boolean\": ${contant_boolean},\"contant_string\": \"${contant_string!\\\"default\\\"}\",\"varaible_string\": \"${contant_boolean}\",\"varaible_json_object\": ${varaible_json_object!\"null\"}}","type":"VARIABLE","value":"{\"contant_boolean\": true,\"contant_string\": \"constant\",\"varaible_string\": \"$.data.string\",\"varaible_json_object\": \"$.data.object\"}"}},"x-request-examples-description-1":"翻新obs桶名为obs1的fg触发器,创建为EG订阅","x-request-examples-text-1":{"agency_name":"string","id":"string","transform":{"template":"{\"contant_boolean\": ${contant_boolean},\"contant_string\": \"${contant_string!\\\"default\\\"}\",\"varaible_string\": \"${contant_boolean}\",\"varaible_json_object\": ${varaible_json_object!\"null\"}}","type":"VARIABLE","value":"{\"contant_boolean\": true,\"contant_string\": \"constant\",\"varaible_string\": \"$.data.string\",\"varaible_json_object\": \"$.data.object\"}"}},"x-request-examples-url-1":"POST https://{eg_endpoint}/v1/{project_id}/subscriptions/obsbuckets/obs1/refurbishobs","x-support-sdk":"N"}}},"product_short":"EG","region_id":"cn-north-4","schemes":["HTTPS"],"security_definitions":null,"summary":null,"tags":"obs桶管理","uri":null,"version":"2.0"}