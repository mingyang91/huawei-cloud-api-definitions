{"base_path":null,"components":null,"consumes":"","definitions":{"AppFilterDto":{"properties":{"app_id":{"description":"应用id","example":"baabcb56-5bb6-11eb-8a0d-fa163e3ddba1","type":"string"},"app_name":{"description":"应用名称","example":"demo-app","type":"string"},"app_node_labels":{"description":"计算节点标签","example":["health.node"],"items":{"type":"string"},"type":"array"},"app_resource":{"$ref":"#/definitions/TaskResourceDto","description":"应用资源","type":"object"},"app_version":{"description":"应用版本","example":"1.0.0","type":"string"}},"type":"object"},"JobDto":{"description":"创建作业的请求体","properties":{"description":{"description":"作业的描述,取值范围:输入字符最大长度为255","example":"description","maxLength":255,"type":"string"},"io_acc_expected_usage":{"description":"作业使用的SFS-Turbo实例预期占用存储量,单位G,用于投递作业时评估当前加速实例余量是否充足","example":100,"format":"int32","maximum":327680,"minimum":0,"type":"integer"},"io_acc_id":{"description":"作业使用的IO加速实例id,不填表示不使用","example":"FFFFFFFF-FFFF-FFFF-FFFF-FFFFFFFFFFFF","maxLength":128,"minLength":0,"pattern":"^[a-zA-Z0-9_-]*$","type":"string","x-pattern-message":"The job parameter format does not match."},"labels":{"description":"作业标签,取值范围[0,5],单个标签最大长度32字符,支持中文、字母、数字、空格、下划线和中划线,且不能以空格开头或者结尾。","example":["labelA","labelB"],"items":{"maxLength":32,"minLength":1,"pattern":"^[\\u4e00-\\u9fa5A-Za-z0-9-_]+(\\s+[\\u4e00-\\u9fa5A-Za-z0-9-_]+)*$","type":"string","x-pattern-message":"The label name format does not match."},"maxItems":5,"minItems":0,"type":"array"},"name":{"description":"作业的名称,取值范围:[1,63],允许大小写字母、数字、以及特殊字符中划线(-)","example":"demo-job","maxLength":63,"minLength":1,"pattern":"^[a-z0-9A-Z-]+$","type":"string","x-pattern-message":"The job parameter format does not match."},"node_labels":{"description":"节点标签 取值范围[0,1],单个标签最大长度63字符","example":["health.node"],"items":{"maxLength":63,"minLength":1,"pattern":"^(health\\.)([\\.A-Za-z0-9_-]*[A-Za-z0-9])$","type":"string","x-pattern-message":"The computing resource nodeLabel should start with 'health.' and end with letters or digit, can only contain '.','-','_' ."},"maxItems":1,"minItems":0,"type":"array"},"output_dir":{"description":"作业结果存储目录,不指定则在workflow的工作目录下生产job同名子目录,指定则已指定路径为准;输出路径必须以斜杠(/)开头且不能以斜杠(/)结尾,不能包含两个以上相邻的斜杠(/),不能包含以下特殊字符:\\ : ; * ? < \" > | 。其中单个文件夹名称不能以中划线(-)开头,不能以英文句号(.)或斜杠(/)或空格开头或结尾","example":"/job","maxLength":128,"minLength":0,"type":"string"},"priority":{"description":"作业的优先级,取值范围[0,9],0最低,默认数值0","example":0,"format":"int32","maximum":9,"minimum":0,"type":"integer"},"tasks":{"description":"基于替换规则压扁后,job实际的运行信息","items":{"$ref":"#/definitions/JobTaskDto"},"maxItems":64,"minItems":0,"type":"array"},"timeout":{"description":"作业执行超时时长,取值范围: [1, 144000],单位:分钟,默认数值1440","example":1440,"format":"int32","maximum":144000,"minimum":1,"type":"integer"},"tool_id":{"description":"作业依赖的组件id,组件当前仅支持流程,取值范围[1,135],支持大小写字母和数字。目前支持两种格式,特殊id:{流程名称}::{流程版本}::{源项目名称};正常id:流程id","example":"baabcb56-5bb6-11eb-8a0d-fa163e3ddba1","maxLength":135,"minLength":1,"pattern":"^[^\\u4e00-\\u9fa5]+$","type":"string","x-pattern-message":"The job parameter format does not match."},"tool_type":{"description":"作业依赖的组件类型,仅支持填写workflow","example":"workflow","pattern":"^(workflow)$","type":"string","x-pattern-message":"The job parameter format does not match."}},"required":["name","tool_id","tool_type"],"title":"JobDto"},"JobFilterDto":{"properties":{"job_name":{"description":"作业名称","example":"demo-job","type":"string"},"job_node_labels":{"description":"计算节点标签","example":["health.node"],"items":{"type":"string"},"type":"array"}},"type":"object"},"JobIdRsp":{"description":"作业id响应体","properties":{"app_infos":{"description":"筛选后的app集合","items":{"$ref":"#/definitions/AppFilterDto"},"type":"array"},"id":{"description":"作业id","example":"baabcb56-5bb6-11eb-8a0d-fa163e3ddba1","type":"string"},"job_info":{"$ref":"#/definitions/JobFilterDto","description":"筛选后的job"},"max_platform_flavor":{"$ref":"#/definitions/TaskResourceDto","description":"平台节点最大规格","type":"object"}},"type":"object"},"JobTaskDto":{"properties":{"inputs":{"description":"任务的输入参数信息","items":{"$ref":"#/definitions/TaskParameterDto"},"maxItems":128,"minItems":0,"type":"array"},"io_acc_type":{"description":"子任务使用的IO加速实例类型,不填表示不使用;","example":"SFS","maxLength":128,"minLength":0,"pattern":"^$|^(SFS|EVS)$","type":"string","x-pattern-message":"The task parameter format does not match."},"output_dir":{"description":"**参数解释**:\n子任务结果存储目录,默认为空。\n**约束限制**:\n不涉及\n**取值范围**:\n长度[0,128]。\n**默认取值**:\n不涉及","example":"/job","maxLength":128,"minLength":0,"type":"string"},"outputs":{"description":"**参数解释**:\n任务的输出参数信息。\n**约束限制**:\n最多支持128个参数。\n**取值范围**:\n不涉及\n**默认取值**:\n不涉及","items":{"$ref":"#/definitions/TaskParameterDto"},"maxItems":128,"minItems":0,"type":"array"},"resources":{"$ref":"#/definitions/TaskResourceDto"},"task_name":{"description":"子任务实际名称,取值范围[1,32],只能以大小写字母开头,由大小写字母、数字、中划线(-)、下划线(_)组成,以大小写字符或数字结尾。需要和已有子任务的名称一致。","example":"app1-1","maxLength":32,"minLength":1,"pattern":"^[a-zA-Z](([-_]*[a-zA-Z0-9])|[a-zA-Z0-9])*$","type":"string","x-pattern-message":"The task parameter format does not match."}},"required":["task_name"],"title":"JobTaskDto"},"TaskParameterDto":{"properties":{"name":{"description":"子任务的参数名称,长度为[1,32],以小写字母开头,允许出现中划线(-)、小写字母和数字,且必须以小写字母或数字结尾。需要和已有应用的参数名称一致。","example":"dir-parameter","maxLength":32,"minLength":1,"pattern":"^[a-z]([-a-z0-9]*[a-z0-9])?$","type":"string","x-pattern-message":"The task parameter format does not match."},"source":{"description":"子任务的参数类型,不填默认为MANUAL","example":"MANUAL","pattern":"^$|^(MANUAL|DATABASE)$","type":"string","x-pattern-message":"The task parameter format does not match."},"values":{"description":"子任务的参数数值,根据参数类型进行合法性校验","example":["/test"],"items":{"maxLength":2048,"minLength":0,"type":"string"},"maxItems":128,"minItems":0,"type":"array"}},"required":["name"]},"TaskResourceDto":{"description":"应用申请资源","properties":{"cpu":{"description":"cpu申请使用量,取值范围[0.1-128],单位C,支持一位小数。对于应用,不填默认1C;对于流程和作业,不填默认使用前一级的配置,填值会覆盖更新。覆盖关系:作业->流程->应用","example":"1C","maxLength":24,"minLength":0,"type":"string"},"cpu_type":{"description":"cpu架构类型,不填默认X86","example":"X86","maxLength":24,"minLength":0,"pattern":"^$|^(X86|ARM)$","type":"string","x-pattern-message":"The cpu_type format does not match."},"gpu":{"description":"gpu申请使用量,取值范围[0-16],仅支持整数,D910有特殊约束,申请数量需要是0,1,2,4,8。对于应用,不填默认0;对于流程和作业,不填默认使用前一级的配置,填值会覆盖更新。覆盖关系:作业->流程->应用","example":"0","maxLength":24,"minLength":0,"type":"string"},"gpu_type":{"description":"gpu架构类型,取值范围 ' '|GPU|D910|D310。对于流程和作业,不填默认使用前一级的配置,填值会覆盖更新。覆盖关系:作业->流程->应用","example":"GPU","maxLength":24,"minLength":0,"pattern":"^$|^(GPU|D910|D310)$","type":"string","x-pattern-message":"The gpu_type format does not match."},"memory":{"description":"内存申请使用量,取值范围[0.1-3072],单位G,支持一位小数。对于应用,不填默认1G;对于流程和作业,不填默认使用前一级的配置,填值会覆盖更新。覆盖关系:作业->流程->应用","example":"1G","maxLength":24,"minLength":0,"type":"string"}}}},"description":null,"group_id":"653f66965c834000ba210ce002075ec3","host":"ai4sservice.cn-north-4.myhuaweicloud.com","id":"026ae6e37a644fe6b0bf7e59e71b18ef","info_version":"v1","method":"post","name":"ExecuteJob","parameters":{},"paths":{"/v1/{project_id}/eihealth-projects/{eihealth_project_id}/jobs":{"post":{"consumes":["application/json"],"deprecated":false,"description":"启动作业","operationId":"ExecuteJob","parameters":[{"description":"用户Token。\nToken认证就是在调用API的时候将Token加到请求消息头,从而通过身份认证,获得操作API的权限,[获取Token](eihealth_33_0010.xml)接口响应消息头中X-Subject-Token的值即为Token。","in":"header","name":"X-Auth-Token","required":true,"type":"string"},{"description":"平台项目ID,您可以在平台单击所需的项目名称,进入项目设置页面查看。","in":"path","maxLength":128,"minLength":1,"name":"eihealth_project_id","pattern":"^[a-zA-Z0-9_-]*$","required":true,"type":"string","x-pattern-message":"eihealth_project_id is illegal"},{"description":"jobDto","in":"body","name":"ExecuteJobRequestBody","required":true,"schema":{"$ref":"#/definitions/JobDto"}},{"description":"平台项目ID,您可以在平台单击所需的项目名称,进入项目设置页面查看。","in":"path","maxLength":128,"minLength":1,"name":"project_id","required":true,"type":"string"}],"produces":["application/json;charset=utf-8"],"responses":{"201":{"description":"CREATED","examples":{"application/json":{"app_infos":[{"app_id":"baabcb56-5bb6-11eb-8a0d-fa163e3ddba1","app_name":"demo-app","app_node_labels":["health.node"],"app_version":"1.0.0"}],"id":"baabcb56-5bb6-11eb-8a0d-fa163e3ddba1","job_info":{"job_name":"demo-job","job_node_labels":["health.node"]}}},"schema":{"$ref":"#/definitions/JobIdRsp"}}},"summary":"启动作业","tags":["作业管理"],"x-interface-name":"IJobController","x-is-registered":"Y","x-request-examples-1":{"description":"description","labels":["labelA","labelB"],"name":"demo-job","output_dir":"/job","priority":0,"tasks":[{"inputs":[{"name":"dir-parameter","values":["/test"]}],"io_acc_type":"SFS","resources":{"cpu":"1C","cpu_type":"X86","gpu":0,"gpu_type":"GPU","memory":"1G"},"task_name":"app1-1"}],"timeout":1440,"tool_id":"baabcb56-5bb6-11eb-8a0d-fa163e3ddba1","tool_type":"workflow"},"x-request-examples-description-1":"启动作业,其中作业的名称为demo-job,作业使用IO加速类型为SFS。","x-request-examples-url-1":"https://{endpoint}/v1/{project_id}/eihealth-projects/{eihealth_project_id}/jobs","x-support-sdk":"Y"}}},"product_short":"eiHealth","region_id":"cn-north-4","schemes":["HTTPS"],"security_definitions":null,"summary":"启动作业","tags":"作业管理","uri":null,"version":"2.0"}