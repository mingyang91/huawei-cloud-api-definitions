{"base_path":null,"components":null,"consumes":"[\"application/json;charset=UTF-8\"]","definitions":{"AccessInfo":{"description":"设备接入实例的接入信息。用户可以使用该结构体中的信息将应用服务器和设备接入到物联网平台。","properties":{"domain_name":{"description":"**参数说明**:实例的接入域名。","example":"example.myhuaweicloud.com","pattern":"^(?=^.{3,255}$)[a-zA-Z0-9][-a-zA-Z0-9]{0,62}(\\.[a-zA-Z0-9][-a-zA-Z0-9]{0,62})+$","type":"string"},"ip_whitelist":{"$ref":"#/definitions/IPWhiteList"},"ipv6_address":{"description":"**参数说明**:实例的ipv6接入地址列表。","example":["x:x:x:x:x:x:x:x","y:y:y:y:y:y:y:y"],"items":{"type":"string"},"maxItems":10,"minItems":0,"type":"array"},"non_tls_port":{"description":"**参数说明**:实例的应用/设备的非安全接入端口。返回null时表示该类型的接入地址不支持非安全端口接入。","example":5683,"format":"int32","maximum":65535,"minimum":0,"type":"integer"},"port":{"description":"**参数说明**:实例的应用/设备的安全接入端口。","example":443,"format":"int32","maximum":65535,"minimum":0,"type":"integer"},"private_addresses":{"description":"**参数说明**:实例的私网接入地址列表。","example":["172.16.35.26","172.16.24.25"],"items":{"type":"string"},"maxItems":10,"minItems":0,"type":"array"},"public_address":{"description":"**参数说明**:实例的公网接入地址。","example":["host1","host2"],"items":{"type":"string"},"maxItems":10,"minItems":0,"type":"array"},"type":{"description":"**参数说明**:接入地址的类型,如应用接入的HTTPS协议的取值为:APP_HTTPS,设备接入的MQTT协议的取值为:DEVICE_MQTT。\n**取值范围**:\n- APP_HTTPS:应用接入HTTPS协议\n- APP_AMQP:应用接入AMQP协议\n- APP_MQTT:应用接入MQTT协议\n- DEVICE_COAP:设备接入COAP协议\n- DEVICE_MQTT:设备接入MQTT协议\n- DEVICE_HTTPS:设备接入HTTPS协议","example":"APP_HTTPS","pattern":"(APP_HTTPS|APP_AMQP|APP_MQTT|DEVICE_COAP|DEVICE_MQTT|DEVICE_HTTPS)","type":"string"},"websocket_port":{"description":"**参数说明**:基于WebSocket的MQTT接入端口。返回null时表示该类型的接入地址不支持WebSocket端口接入。","example":443,"format":"int32","maximum":65535,"minimum":0,"type":"integer"}},"title":"实例接入信息结构体","type":"object"},"AdditionalParamsResp":{"description":"企业版附加参数信息。","properties":{"ciphering_algorithm":{"default":"COMMON_ALGORITHM","description":"**参数说明**:实例支持的加密算法。\n**取值范围**:\n- COMMON_ALGORITHM: 通用加密算法(支持RSA,SHA256等国际通用的密码算法)\n- SM_ALGORITHM: 支持SM系列商密算法(支持SM2,SM3,SM4等国密算法)","example":"COMMON_ALGORITHM","pattern":"(COMMON_ALGORITHM|SM_ALGORITHM)","type":"string"},"forwarding_info":{"$ref":"#/definitions/ForwardingInfo"},"security_group_id":{"description":"**参数说明**:企业版实例的安全组ID。","example":"d22e47e9-cfad-4254-8a29-d2a56a07681d","maxLength":64,"minLength":0,"type":"string"},"subnet_id":{"description":"**参数说明**:企业版实例的子网ID。","example":"d22e47e9-cfad-4254-8a29-d2a56a076","maxLength":64,"minLength":0,"type":"string"},"vpc_id":{"description":"**参数说明**:企业版实例的VPCID。","example":"d22e47e9-cfad-4254-8a29-d2a56a076811","maxLength":64,"minLength":0,"type":"string"}},"title":"企业版附加参数结构体","type":"object"},"Flavor":{"description":"**参数说明**:设备接入实例的规格参数。","properties":{"size":{"description":"**参数说明**:待创建设备接入标准版实例的单元数量。详情请参见[产品规格说明](https://support.huaweicloud.com/productdesc-iothub/iot_04_0014.html)。当instance_type是standard时,该参数必填。","example":1,"maximum":200,"minimum":1,"type":"integer"},"type":{"description":"**参数说明**:待创建设备接入实例的规格名称。详情请参见[产品规格说明](https://support.huaweicloud.com/productdesc-iothub/iot_04_0014.html)中的规格编码。","example":"iotda.standard.s1","pattern":"^[A-Za-z0-9-.]{1,64}$","type":"string"}},"required":["type"],"title":"产品规格参数结构体","type":"object"},"ForwardingInfo":{"description":"企业版实例的SNAT配置信息。","properties":{"eip":{"description":"**参数说明**:NAT网关绑定的EIP","example":"110.0.0.1","maxLength":128,"minLength":7,"type":"string"},"enable_snat":{"description":"**参数说明**:是否启用SNAT配置。\n**取值范围**:\n- true: SNAT配置已启用\n- false: SNAT配置未启用","example":"true","type":"boolean"}},"title":"流转配置结构体","type":"object"},"IPWhiteList":{"description":"IP白名单\n约束:只有企业版实例的APP_HTTPS协议支持配置IP白名单。","properties":{"allow_list":{"description":"**参数说明**:允许访问企业版实例的IP地址列表。","items":{"$ref":"#/definitions/IpAllowList"},"maxItems":15,"minItems":0,"type":"array"},"enable":{"description":"**参数说明**:启用Ip白名单访问控制。","example":"false","type":"boolean"}},"required":["enable"],"title":"IP白名单列表结构体","type":"object"},"IpAllowList":{"properties":{"address":{"description":"**参数说明**:白名单ip地址。","example":"127.0.0.1","maxLength":128,"minLength":7,"pattern":"^(?:[0-9]{1,3}.){3}[0-9]{1,3}|(?:[0-9]{1,3}.){3}[0-9]{1,3}/[0-9]{1,3}|(?:[0-9a-fA-F]{1,4}:){7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}[0-9a-fA-F]{1,4}/\\d{1,3}$","type":"string"},"description":{"description":"**参数说明**:描述。","example":"description","maxLength":128,"minLength":0,"type":"string"}},"required":["address"],"title":"IP白名单列表结构体","type":"object"},"OperateWindow":{"description":"实例维护时间窗,用户在变更实例规格时,可以指定在该时间窗内进行变更。","properties":{"end_time":{"description":"**参数说明**:变更时间窗结束时间,UTC时间,格式为:\"HH:mm\"","example":"22:00","pattern":"^(0[0-9]|1[0-9]|2[0-3]):[0-5][0-9]$","type":"string"},"start_time":{"description":"**参数说明**:变更时间窗开始时间,UTC时间,格式为:\"HH:mm\"","example":"18:00","pattern":"^(0[0-9]|1[0-9]|2[0-3]):[0-5][0-9]$","type":"string"}},"required":["start_time","end_time"],"title":"实例维护时间窗结构体","type":"object"},"QueryInstanceComplex":{"properties":{"access_infos":{"description":"**参数说明**:设备接入实例的接入信息。","items":{"$ref":"#/definitions/AccessInfo"},"maxItems":10,"minItems":0,"type":"array"},"additional_params":{"$ref":"#/definitions/AdditionalParamsResp"},"charge_mode":{"description":"**参数说明**:实例的付费方式。\n**取值范围**:\n- prePaid:包年/包月\n- postPaid:按需计费","example":"prePaid","pattern":"prePaid|postPaid","type":"string"},"create_time":{"description":"**参数说明**:实例的创建时间。时间格式例如:2023-01-28T06:57:52Z。","maxLength":64,"minLength":0,"type":"string"},"description":{"description":"**参数说明**:设备接入实例的描述信息。\n**取值范围**:长度不超过256,只允许中文、字母、数字、以及_,,.。、&-等字符的组合。","example":"IoTDA instance for test.","pattern":"^[A-Za-z0-9_,,.。、&\\-\\s\\u4e00-\\u9fa5]{0,256}$","type":"string"},"enterprise_project_id":{"description":"**参数说明**:企业项目Id。","example":"d22e47e9-cfad-4254-8a29-d2a56a07681d","pattern":"[0-9a-f-]{1,36}","type":"string"},"flavor":{"$ref":"#/definitions/Flavor"},"instance_id":{"description":"**参数说明**:实例ID。\n**取值范围**:长度不超过36,由小写字母[a-f]、数字、连接符(-)的组成。","pattern":"[0-9a-f-]{1,36}","type":"string"},"instance_type":{"description":"**参数说明**:实例类型。\n**取值范围**:\n- standard:标准版实例\n- enterprise:企业版实例","example":"standard","pattern":"(standard|basic|enterprise|valueaddedservice)","type":"string"},"name":{"description":"**参数说明**:实例名称。\n**取值范围**:由中文字符,英文字母、数字及“_”、“-”组成,且长度为[1-64]个字符。","pattern":"^[A-Za-z0-9_\\-\\u4e00-\\u9fa5]{1,64}$","type":"string"},"operate_window":{"$ref":"#/definitions/OperateWindow"},"order_id":{"description":"**参数说明**:订单号,仅包年包月实例返回该参数。查看订单详情请参考[查询订单详情](https://support.huaweicloud.com/api-bpconsole/zh-cn_topic_0075746564.html)。","example":"CS22121614500ABCD","maxLength":64,"minLength":0,"type":"string"},"region_id":{"description":"**参数说明**:实例所属region。","example":"cn-north-4","maxLength":64,"minLength":0,"type":"string"},"status":{"description":"**参数说明**:实例状态。\n**取值范围**:\n- CREATING:实例正在创建\n- ACTIVE:实例正常\n- FROZEN:实例冻结\n- TRADING: 实例正在进行交易\n- MODIFYING:实例正在变更规格\n- MODIFY_FAILED: 实例变更失败\n- FAILED:实例创建失败","example":"ACTIVE","maxLength":64,"minLength":0,"type":"string"},"tags":{"description":"**参数说明**: 设备接入实例的标签信息。如果实例有标签,则会有该字段,否则该字段为空。","items":{"$ref":"#/definitions/Tag"},"maxItems":20,"minItems":0,"type":"array"},"update_time":{"description":"**参数说明**:实例的最近一次更新的时间。时间格式例如:2023-01-28T06:57:52Z。","maxLength":64,"minLength":0,"type":"string"}},"title":"查询实例完整信息结构体","type":"object"},"Tag":{"properties":{"key":{"description":"**参数说明**:标签键,标签的键可用字母(包含中文)、数字、空格和以下字符:下划线(_)点(.)冒号(:)等号(=)加号(+)中划线(-)以及@,首尾不能有空格字符。","example":"PRO","maxLength":128,"minLength":1,"pattern":"^((?!\\s)(?!_sys_)[\\p{L}\\p{Z}\\p{N}_.:=+\\-@]*)(?<!\\s)$","type":"string"},"value":{"description":"**参数说明**:标签值,可为空字符串和null,标签的值可用字母(包含中文)、数字、空格和以下字符:下划线(_)点(.)冒号(:)等号(=)加号(+)中划线(-)以及@。","example":true,"maxLength":255,"minLength":0,"pattern":"^([\\p{L}\\p{Z}\\p{N}_.:\\/=+\\-@]*)$","type":"string"}},"required":["key"]},"UpdateAccessInfo":{"description":"设备接入实例的接入信息。用户可以使用该结构体中的信息将应用服务器和设备接入到物联网平台。\n约束:只有企业版实例支持自定义接入信息。","properties":{"access_type":{"description":"**参数说明**:接入地址的类型,如应用接入的HTTPS协议的取值为:APP_HTTPS,设备接入的MQTT协议的取值为:DEVICE_MQTT。\n**取值范围**:\n- APP_HTTPS:应用接入HTTPS协议\n- APP_AMQP:应用接入AMQP协议\n- APP_MQTT:应用接入MQTT协议\n- DEVICE_COAP:设备接入COAP协议\n- DEVICE_MQTT:设备接入MQTT协议\n- DEVICE_HTTPS:设备接入HTTPS协议","pattern":"(APP_HTTPS|APP_AMQP|APP_MQTT|DEVICE_COAP|DEVICE_MQTT|DEVICE_HTTPS)","type":"string"},"domain_name":{"description":"**参数说明**:接入域名,如果需要更新域名,则携带该字段。","example":"domain","pattern":"^([a-zA-Z0-9]+(-[a-zA-Z0-9]+)*\\.)+[a-zA-Z0-9]{0,}$","type":"string"},"ip_whitelist":{"$ref":"#/definitions/IPWhiteList"},"public_addresses_enable":{"description":"**参数说明**:是否配置公网接入地址。\n**取值范围**:\n- true:配置公网接入地址,平台将自动分配公网接入地址。约束:分配地址后将不能修改或删除。","example":true,"type":"boolean"}},"required":["access_type"],"title":"更新实例接入信息结构体","type":"object"},"UpdateForwardingInfo":{"description":"企业版实例的SNAT配置,配置开启后,企业版实例可以在公共网络中进行外部通信。\n约束:只有企业版实例支持修改流转配置。","properties":{"enable_snat":{"description":"**参数说明**:是否启用SNAT配置。企业版实例开启SNAT配置后,可以在公共网络中进行外部通信。\n约束:只有企业版实例支持配置SNAT配置,SNAT配置开启后将不支持关闭。\n**取值范围**:\n- true: 启用SNAT配置","example":"false","type":"boolean"}},"required":["enable_snat"],"title":"修改流转配置结构体","type":"object"},"UpdateInstance":{"properties":{"access_info":{"$ref":"#/definitions/UpdateAccessInfo"},"description":{"description":"**参数说明**:设备接入实例的描述信息。\n**取值范围**:长度不超过256,只允许中文、字母、数字、以及_,,.。、&-等字符的组合","example":"IoTDA instance for test.","pattern":"^[A-Za-z0-9_,,.。、&\\-\\s\\u4e00-\\u9fa5]{0,256}$","type":"string"},"forwarding_info":{"$ref":"#/definitions/UpdateForwardingInfo"},"name":{"description":"**参数说明**:实例名称。\n**取值范围**:由中文字符,英文字母、数字及“_”、“-”组成,且长度为[1-64]个字符。","example":"iotda_instance","pattern":"^[A-Za-z0-9_\\-\\u4e00-\\u9fa5]{1,64}$","type":"string"},"operate_window":{"$ref":"#/definitions/OperateWindow"}},"title":"修改实例请求结构体","type":"object"}},"description":null,"group_id":"e0773bd27677402698b7b9c2af429a7c","host":"iotda-mgmt.cn-north-4.myhuaweicloud.com","id":"f7d1f3d70a1c47c799cc1d0dfeb0a50d","info_version":"v5","method":"put","name":"UpdateInstance","parameters":{},"paths":{"/v5/iot/{project_id}/iotda-instances/{instance_id}":{"put":{"description":"修改设备接入实例信息。","operationId":"UpdateInstance","parameters":[{"description":"**参数说明**:项目ID。获取方法请参见 [获取项目ID](https://support.huaweicloud.com/api-iothub/iot_06_v5_1001.html) 。","in":"path","name":"project_id","pattern":"^[a-fA-F0-9]{1,32}$","required":true,"type":"string","x-example":"04ed32dc1b0025b52fe3c01a27c2b0a8"},{"description":"**参数说明**:实例ID。\n**取值范围**:长度不超过36,由小写字母[a-f]、数字、连接符(-)的组成。","in":"path","name":"instance_id","pattern":"[0-9a-f-]{1,36}","required":true,"type":"string","x-example":"df91ba92-b501-4ea4-b3e1-cd96386c936c"},{"description":"**参数说明**:用户Token。通过调用IAM服务 [获取IAM用户Token](https://support.huaweicloud.com/api-iam/iam_30_0001.html)接口获取,接口返回的响应消息头中“X-Subject-Token”就是需要获取的用户Token。简要的获取方法样例请参见 [Token认证](https://support.huaweicloud.com/api-iothub/iot_06_v5_0091.html#section0)。","in":"header","name":"X-Auth-Token","required":false,"type":"string","x-effective-scene":"huaweicloud","x-example":"MIIDkgYJKoZIhvcNAQcCoIIDgzCCXXXXX..."},{"description":"UpdateInstance","in":"body","name":"UpdateInstanceRequestBody","required":true,"schema":{"$ref":"#/definitions/UpdateInstance"}}],"responses":{"200":{"description":"OK","examples":{"application/json":{"access_infos":[{"domain_name":"example.myhuaweicloud.com","ip_whitelist":null,"ipv6_address":[],"non_tls_port":null,"port":5671,"public_address":[],"type":"APP_AMQP","websocket_port":null},{"domain_name":"example1.myhuaweicloud.com","ip_whitelist":null,"ipv6_address":[],"non_tls_port":null,"port":443,"public_address":[],"type":"APP_HTTPS","websocket_port":null},{"domain_name":"example2.myhuaweicloud.com","ip_whitelist":null,"ipv6_address":[],"non_tls_port":1883,"port":8883,"public_address":[],"type":"DEVICE_MQTT","websocket_port":443},{"domain_name":"example3.myhuaweicloud.com","ip_whitelist":null,"ipv6_address":[],"non_tls_port":5683,"port":5684,"public_address":[],"type":"DEVICE_COAP","websocket_port":null}],"additional_params":null,"charge_mode":"prePaid","create_time":"2023-01-28T06:57:52Z","description":"IoTDA instance for production.","enterprise_project_id":"d22e47e9-cfad-4254-8a29-d2a56a07681d","flavor":{"size":1,"type":"iotda.standard.s1"},"instance_id":"8561675c-d8a3-4956-9884-9cf9cbdd3134","instance_type":"standard","name":"iotda_instance","operate_window":{"end_time":"24:00","start_time":"22:00"},"order_id":"CS22121614500ABCD","region_id":"cn-north-4","status":"ACTIVE","tags":[{"key":"testTagName","value":"testTagValue"}],"update_time":"2023-01-28T06:58:52Z"}},"schema":{"$ref":"#/definitions/QueryInstanceComplex"},"x-SuccessCode":true},"400":{"description":"Bad Request","x-error":["IoTDA.000006","IoTDA.018101","IoTDA.019500","IoTDA.019501"]},"401":{"description":"Unauthorized","x-error":["IoTDA.000002"]},"403":{"description":"Forbidden","x-error":["IoTDA.000004","IoTDA.019502","IoTDA.019503","IoTDA.019503","IoTDA.019504","IoTDA.019505","IoTDA.019506","IoTDA.019507"]}},"summary":"修改实例信息","tags":["InstanceManagement"],"x-apig-name":"IoTDA_OpenAPI","x-iftype":"OpenAPI_new","x-imports":["org.springframework.http.ResponseEntity"],"x-is-registered":"Y","x-request-examples-1":{"description":"IoTDA instance for test.","name":"iotda_instance01","operate_window":{"end_time":"22:00","start_time":"18:00"}},"x-request-examples-2":{"forwarding_info":{"enable_snat":"true"}},"x-request-examples-3":{"access_info":{"access_type":"APP_HTTPS","domain_name":"example.myhuaweicloud.com","public_addresses_enable":true}},"x-request-examples-description-1":"修改实例名称、描述和操作时间窗。","x-request-examples-description-2":"企业版实例启用公网流转SNAT配置。","x-request-examples-description-3":"企业版实例修改实例接入信息。","x-request-examples-url-1":"PUT https://{endpoint}/v5/iot/{project_id}/iotda-instances/{instance_id}","x-request-examples-url-2":"PUT https://{endpoint}/v5/iot/{project_id}/iotda-instances/{instance_id}","x-request-examples-url-3":"PUT https://{endpoint}/v5/iot/{project_id}/iotda-instances/{instance_id}","x-returnType":"ResponseEntity<QueryInstanceComplex>","x-support-sdk":"Y"}}},"product_short":"IoTDM","region_id":"cn-north-4","schemes":["HTTPS"],"security_definitions":null,"summary":"修改实例信息","tags":"实例管理","uri":null,"version":"2.0"}