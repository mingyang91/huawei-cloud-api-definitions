{"base_path":null,"components":null,"consumes":"[\"application/json;charset=UTF-8\"]","definitions":{"AdditionalParams":{"description":"企业版附加参数信息。","properties":{"ciphering_algorithm":{"default":"COMMON_ALGORITHM","description":"**参数说明**:实例支持的加密算法。\n**取值范围**:\n- COMMON_ALGORITHM: 通用加密算法(支持RSA,SHA256等国际通用的密码算法)\n- SM_ALGORITHM: 支持SM系列商密算法(支持SM2,SM3,SM4等国密算法)","example":"COMMON_ALGORITHM","pattern":"(COMMON_ALGORITHM|SM_ALGORITHM)","type":"string"},"port_info":{"$ref":"#/definitions/Port"},"security_group_id":{"description":"**参数说明**:企业版实例的安全组ID。请确保所选安全组已放通22端口(Linux SSH登录),3389端口(Windows远程登录)和ICMP协议(Ping)。","example":"d22e47e9-cfad-4254-8a29-d2a56a07681d","pattern":"[0-9a-f-]{1,36}","type":"string"},"smn_topic_urn":{"description":"**参数说明**:SMN的topic urn, 当企业版实例创建成功时,平台将通过该topic发送通知。","example":"urn:smn:regionId:762bdb3251034f268af0e395c53ebcd:test_topic_v1","pattern":"^[A-Za-z0-9_\\-:]{1,256}$","type":"string"},"subnet_id":{"description":"**参数说明**:企业版实例的子网ID。","example":"d22e47e9-cfad-4254-8a29-d2a56a076","pattern":"[0-9a-f-]{1,36}","type":"string"},"vpc_id":{"description":"**参数说明**:企业版实例的VPCID。","example":"d22e47e9-cfad-4254-8a29-d2a56a076811","pattern":"[0-9a-f-]{1,36}","type":"string"}},"required":["vpc_id","subnet_id","security_group_id","port_info"],"title":"企业版附加参数结构体","type":"object"},"ChargeInfo":{"description":"**参数说明**:设备接入实例计费信息","properties":{"charge_mode":{"description":"**参数说明**:实例的付费方式。\n**取值范围**:\n- prePaid:包年/包月\n- postPaid:按需计费","example":"prePaid","pattern":"prePaid|postPaid","type":"string"},"is_auto_pay":{"default":"false","description":"**参数说明**:创建包年/包月实例时可指定,表示是否自动从客户的账户中支付,此字段不影响自动续订的支付方式。\n**取值范围**:true - 自动支付,从账户余额自动扣费; false - 默认值,只提交订单不支付。需要客户参考[支付包年/包月产品订单](https://support.huaweicloud.com/api-bpconsole/api_order_00016.html#section0)进行支付,或者在华为云官网页面使用进行支付。","example":"true","type":"boolean"},"is_auto_renew":{"default":"false","description":"**参数说明**:创建包年/包月实例时可指定,表示是否自动续订,续订的周期和原周期相同,且续订时会自动支付。\n**取值范围**:\n- true:自动续订\n- false:默认值,不自动续订","example":"true","type":"boolean"},"period_num":{"description":"**参数说明**:订购设备接入实例的周期数。charge_mode为prePaid时生效,且为必选值。\n**取值范围**:period_type=month(周期类型为月)时,取值为[1,9];period_type=year(周期类型为年)时,取值为[1,3]\"。","example":1,"maximum":9,"minimum":1,"type":"integer"},"period_type":{"description":"**参数说明**:订购设备接入实例的周期类型(包年、包月等)。charge_mode为prePaid时生效,且为必选值。\n**取值范围**:\n- month:包月\n- year:包年","example":"year","pattern":"(month|year)","type":"string"},"promotion_infos":{"description":"**参数说明**:促销信息。","example":"string","maxLength":2048,"minLength":0,"type":"string"}},"required":["charge_mode"],"title":"计费信息结构体","type":"object"},"CreateInstance":{"properties":{"additional_params":{"$ref":"#/definitions/AdditionalParams"},"charge_info":{"$ref":"#/definitions/ChargeInfo"},"description":{"description":"**参数说明**:设备接入实例的描述信息。\n**取值范围**:长度不超过256,只允许中文、字母、数字、以及_,,.。、&-等字符的组合","example":"IoTDA instance for test.","pattern":"^[A-Za-z0-9_,,.。、&\\-\\s\\u4e00-\\u9fa5]{0,256}$","type":"string"},"enterprise_project_id":{"default":0,"description":"**参数说明**:企业项目Id。此字段填写明确的企业项目Id或者0(表示默认企业项目Id)时支持企业项目特性。可以企业项目管理服务中获取。\n**取值范围**:长度不超过36,由小写字母[a-f]、数字、连接符(-)的组成。","example":"d22e47e9-cfad-4254-8a29-d2a56a07681d","pattern":"[0-9a-f-]{1,36}","type":"string"},"flavor":{"$ref":"#/definitions/Flavor"},"instance_type":{"description":"**参数说明**:创建的实例类型。实例类型说明参见[产品规格说明](https://support.huaweicloud.com/productdesc-iothub/iot_04_0014.html)。\n**取值范围**:\n- standard:标准版实例\n- enterprise:企业版实例","example":"standard","pattern":"(standard|basic|enterprise|valueaddedservice)","type":"string"},"name":{"description":"**参数说明**:实例名称\n**取值范围**:由中文字符,英文字母、数字及“_”、“-”组成,且长度为[1-64]个字符。","example":"iotda_instance","pattern":"^[A-Za-z0-9_\\-\\u4e00-\\u9fa5]{1,64}$","type":"string"},"tags":{"description":"**参数说明**:设备接入实例的标签信息。","items":{"$ref":"#/definitions/Tag"},"maxItems":20,"minItems":0,"type":"array"}},"required":["instance_type","flavor","name","charge_info"],"title":"创建实例请求结构体","type":"object"},"Flavor":{"description":"**参数说明**:设备接入实例的规格参数。","properties":{"size":{"description":"**参数说明**:待创建设备接入标准版实例的单元数量。详情请参见[产品规格说明](https://support.huaweicloud.com/productdesc-iothub/iot_04_0014.html)。当instance_type是standard时,该参数必填。","example":1,"maximum":200,"minimum":1,"type":"integer"},"type":{"description":"**参数说明**:待创建设备接入实例的规格名称。详情请参见[产品规格说明](https://support.huaweicloud.com/productdesc-iothub/iot_04_0014.html)中的规格编码。","example":"iotda.standard.s1","pattern":"^[A-Za-z0-9-.]{1,64}$","type":"string"}},"required":["type"],"title":"产品规格参数结构体","type":"object"},"Port":{"description":"企业版端口信息。创建企业版实例时必填。","properties":{"app_amqps_port":{"default":5671,"description":"**参数说明**:应用接入AMQP协议端口, 默认值:5671。","example":5671,"format":"int32","maximum":65535,"minimum":0,"type":"integer"},"app_https_port":{"default":443,"description":"**参数说明**:应用接入HTTPS协议端口,默认值:443。","example":443,"format":"int32","maximum":65535,"minimum":0,"type":"integer"},"app_mqtts_port":{"default":8883,"description":"**参数说明**:应用接入MQTTS协议端口, 默认值:8883。","example":8883,"format":"int32","maximum":65535,"minimum":0,"type":"integer"},"device_coap_port":{"default":5683,"description":"**参数说明**:设备接入COAP协议端口, 默认值:5683。","example":5683,"format":"int32","maximum":65535,"minimum":0,"type":"integer"},"device_coaps_port":{"default":5684,"description":"**参数说明**:设备接入COAPS协议端口, 默认值:5684。","example":5684,"format":"int32","maximum":65535,"minimum":0,"type":"integer"},"device_https_port":{"default":443,"description":"**参数说明**:设备接入HTTPS协议端口, 默认值:443。","example":443,"format":"int32","maximum":65535,"minimum":0,"type":"integer"},"device_mqtt_port":{"default":1883,"description":"**参数说明**:设备接入MQTT协议端口, 默认值:1883。","example":1883,"format":"int32","maximum":65535,"minimum":0,"type":"integer"},"device_mqtts_port":{"default":8883,"description":"**参数说明**:设备接入MQTTS协议端口, 默认值:8883。","example":8883,"format":"int32","maximum":65535,"minimum":0,"type":"integer"}},"title":"企业版端口信息结构体","type":"object"},"QueryInstanceBase":{"properties":{"additional_params":{"$ref":"#/definitions/AdditionalParams"},"charge_info":{"$ref":"#/definitions/ChargeInfo"},"description":{"description":"**参数说明**:设备接入实例的描述信息。\n**取值范围**:长度不超过256,只允许中文、字母、数字、以及_,,.。、&-等字符的组合。","example":"IoTDA instance for test.","pattern":"^[A-Za-z0-9_,,.。、&\\-\\s\\u4e00-\\u9fa5]{0,256}$","type":"string"},"enterprise_project_id":{"description":"**参数说明**:企业项目Id。","example":"d22e47e9-cfad-4254-8a29-d2a56a07681d","pattern":"[0-9a-f-]{1,36}","type":"string"},"flavor":{"$ref":"#/definitions/Flavor"},"instance_id":{"description":"**参数说明**:实例ID。\n**取值范围**:长度不超过36,由小写字母[a-f]、数字、连接符(-)的组成。","pattern":"[0-9a-f-]{1,36}","type":"string"},"instance_type":{"description":"**参数说明**:实例类型。\n**取值范围**:\n- standard:标准版实例\n- enterprise:企业版实例","example":"standard","pattern":"(standard|basic|enterprise|valueaddedservice)","type":"string"},"name":{"description":"**参数说明**:实例名称\n**取值范围**:由中文字符,英文字母、数字及“_”、“-”组成,且长度为[1-64]个字符。","pattern":"^[A-Za-z0-9_\\-\\u4e00-\\u9fa5]{1,64}$","type":"string"},"order_id":{"description":"**参数说明**:订单号,创建包年包月实例时返回该参数。查看订单详情请参考[查询订单详情](https://support.huaweicloud.com/api-bpconsole/zh-cn_topic_0075746564.html)。","example":"CS22121614500ABCD","maxLength":64,"minLength":0,"type":"string"},"status":{"description":"**参数说明**:实例状态。\n**取值范围**:\n- CREATING:实例正在创建\n- ACTIVE:实例正常\n- FROZEN:实例冻结\n- TRADING: 实例正在进行交易\n- MODIFYING:实例正在变更规格\n- MODIFY_FAILED: 实例变更失败\n- FAILED:实例创建失败","example":"ACTIVE","maxLength":64,"minLength":0,"type":"string"},"tags":{"description":"**参数说明**: 设备接入实例的标签信息。如果实例有标签,则会有该字段,否则该字段为空。","items":{"$ref":"#/definitions/Tag"},"maxItems":20,"minItems":0,"type":"array"}},"title":"实例信息结构体","type":"object"},"Tag":{"properties":{"key":{"description":"**参数说明**:标签键,标签的键可用字母(包含中文)、数字、空格和以下字符:下划线(_)点(.)冒号(:)等号(=)加号(+)中划线(-)以及@,首尾不能有空格字符。","example":"PRO","maxLength":128,"minLength":1,"pattern":"^((?!\\s)(?!_sys_)[\\p{L}\\p{Z}\\p{N}_.:=+\\-@]*)(?<!\\s)$","type":"string"},"value":{"description":"**参数说明**:标签值,可为空字符串和null,标签的值可用字母(包含中文)、数字、空格和以下字符:下划线(_)点(.)冒号(:)等号(=)加号(+)中划线(-)以及@。","example":true,"maxLength":255,"minLength":0,"pattern":"^([\\p{L}\\p{Z}\\p{N}_.:\\/=+\\-@]*)$","type":"string"}},"required":["key"]}},"description":null,"group_id":"e0773bd27677402698b7b9c2af429a7c","host":"iotda-mgmt.cn-north-4.myhuaweicloud.com","id":"5887fcd9a1e444019962c4d6fb2fd8bc","info_version":"v5","method":"post","name":"CreateInstance","parameters":{},"paths":{"/v5/iot/{project_id}/iotda-instances":{"post":{"description":"用户可以调用此接口创建一个设备接入实例。支持的实例规格请参见[产品规格说明](https://support.huaweicloud.com/productdesc-iothub/iot_04_0014.html)。\n接口约束:\n- 请保证账户余额充足,此接口无法使用优惠券支付,在创建包年/包月实例时,若余额不足会创建一个待支付订单。\n- 若想使用优惠券,请将请求中的is_auto_pay字段设置为false,参考[支付包年/包月产品订单](https://support.huaweicloud.com/api-bpconsole/api_order_00016.html#section0)进行支付,或者在华为云官网页面使用优惠券进行支付。\n- 如果您需要退订包年/包月资源,请参考[退订包年/包月资源](https://support.huaweicloud.com/api-bpconsole/api_order_00019.html)。","operationId":"CreateInstance","parameters":[{"description":"**参数说明**:项目ID。获取方法请参见 [获取项目ID](https://support.huaweicloud.com/api-iothub/iot_06_v5_1001.html) 。","in":"path","name":"project_id","pattern":"^[a-fA-F0-9]{1,32}$","required":true,"type":"string","x-example":"04ed32dc1b0025b52fe3c01a27c2b0a8"},{"description":"**参数说明**:用户Token。通过调用IAM服务 [获取IAM用户Token](https://support.huaweicloud.com/api-iam/iam_30_0001.html)接口获取,接口返回的响应消息头中“X-Subject-Token”就是需要获取的用户Token。简要的获取方法样例请参见 [Token认证](https://support.huaweicloud.com/api-iothub/iot_06_v5_0091.html#section0)。","in":"header","name":"X-Auth-Token","required":false,"type":"string","x-effective-scene":"huaweicloud","x-example":"MIIDkgYJKoZIhvcNAQcCoIIDgzCCXXXXX..."},{"description":"CreateInstance","in":"body","name":"CreateInstanceRequestBody","required":true,"schema":{"$ref":"#/definitions/CreateInstance"}}],"responses":{"200":{"description":"OK","examples":{"application/json":{"additional_params":null,"charge_info":{"charge_mode":"prePaid","is_auto_pay":false,"is_auto_renew":true,"period_num":1,"period_type":"year"},"description":"IoTDA instance for production.","enterprise_project_id":"d22e47e9-cfad-4254-8a29-d2a56a07681d","flavor":{"size":2,"type":"iotda.standard.s2"},"instance_id":"8561675c-d8a3-4956-9884-9cf9cbdd3134","instance_type":"standard","order_id":"CS22121614500ABCD","status":"CREATING","tags":[{"key":"testTagName","value":"testTagValue"}]}},"schema":{"$ref":"#/definitions/QueryInstanceBase"}},"400":{"description":"Bad Request","x-error":["IoTDA.000006","IoTDA.018101","IoTDA.019500","IoTDA.019501"]},"401":{"description":"Unauthorized","x-error":["IoTDA.000002"]},"403":{"description":"Forbidden","x-error":["IoTDA.000004","IoTDA.019502","IoTDA.019503","IoTDA.019503","IoTDA.019504","IoTDA.019505","IoTDA.019506","IoTDA.019507"]}},"summary":"创建设备接入实例","tags":["InstanceManagement"],"x-apig-name":"IoTDA_OpenAPI","x-iftype":"OpenAPI_new","x-imports":["org.springframework.http.ResponseEntity"],"x-is-registered":"Y","x-request-examples-1":{"charge_info":{"charge_mode":"prePaid","is_auto_pay":"false","is_auto_renew":"true","period_num":1,"period_type":"year"},"description":"IoTDA instance for production.","enterprise_project_id":"d22e47e9-cfad-4254-8a29-d2a56a07681d","flavor":{"size":2,"type":"iotda.standard.s1"},"instance_type":"standard","name":"iotda_instance","tags":[{"key":"testTagName","value":"testTagValue"}]},"x-request-examples-2":{"charge_info":{"charge_mode":"postPaid"},"description":"IoTDA instance for production.","enterprise_project_id":"d22e47e9-cfad-4254-8a29-d2a56a07681d","flavor":{"size":2,"type":"iotda.standard.s2"},"instance_type":"standard","name":"iotda_instance"},"x-request-examples-3":{"additional_params":{"ciphering_algorithm":"COMMON_ALGORITHM","port_info":{"app_amqps_port":"5671","app_https_port":"443","device_coap_port":"5683","device_coaps_port":"5684","device_https_port":"443","device_mqtt_port":"1883","device_mqtts_port":"8883"},"security_group_id":"55980b43-f006-4dbf-ab58-9b0d9e712345","smn_topic_urn":"urn:smn:cn-north-7:08aaee8ae000d5182f26c00199812345:iotda_instance_create","subnet_id":"088c7d8a-f49e-4f5f-bd33-ce9b6b712345","vpc_id":"40926909-d411-45dd-a8b4-1ebc36512345"},"charge_info":{"charge_mode":"prePaid","is_auto_pay":"false","is_auto_renew":"true","period_num":1,"period_type":"year"},"description":"IoTDA instance for production.","enterprise_project_id":"d22e47e9-cfad-4254-8a29-d2a56a07681d","flavor":{"type":"iotda.enterprise.1000tps.10wonlinedevice"},"instance_type":"enterprise","name":"iotda_enterprise_instance"},"x-request-examples-description-1":"创建实例,实例规格标准版中频单元,单元个数为2,计费方式为包年。","x-request-examples-description-2":"创建实例,实例规格标准版中频单元,单元个数为2,计费方式为按需计费。","x-request-examples-description-3":"创建实例,实例规格为企业版实例,计费方式为包年。","x-request-examples-url-1":"POST https://{endpoint}/v5/iot/{project_id}/iotda-instances","x-request-examples-url-2":"POST https://{endpoint}/v5/iot/{project_id}/iotda-instances","x-request-examples-url-3":"POST https://{endpoint}/v5/iot/{project_id}/iotda-instances","x-returnType":"ResponseEntity<QueryInstanceBase>","x-support-sdk":"Y"}}},"product_short":"IoTDM","region_id":"cn-north-4","schemes":["HTTPS"],"security_definitions":null,"summary":"创建设备接入实例","tags":"实例管理","uri":null,"version":"2.0"}