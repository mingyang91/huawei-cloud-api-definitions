{"base_path":"/","components":null,"consumes":"[\"application/json;charset=UTF-8\"]","definitions":{"BoundingBox":{"properties":{"height":{"description":"矩形框高度。","format":"int32","type":"integer"},"top_left_x":{"description":"矩形框左上角横坐标。","format":"int32","type":"integer"},"top_left_y":{"description":"矩形框左上角纵坐标。","format":"int32","type":"integer"},"width":{"description":"矩形框宽度。","format":"int32","type":"integer"}},"required":["top_left_x","top_left_y","width","height"]},"ErrorResp":{"properties":{"error_code":{"description":"调用失败时的错误码,具体请参考[错误码](https://support.huaweicloud.com/api-face/face_02_0045.html)。调用成功时无此字段。","type":"string"},"error_msg":{"description":"调用失败时的错误信息。\n调用成功时无此字段。","type":"string"}},"required":["error_code","error_msg"]},"FaceSearchResp":{"properties":{"faces":{"description":"查找的人脸集合,详见[SearchFace](https://support.huaweicloud.com/api-face/face_02_0019.html)。调用失败时无此字段。","items":{"$ref":"#/definitions/SearchFace","type":"object"},"type":"array"}},"required":["faces"]},"SearchFace":{"properties":{"bounding_box":{"$ref":"#/definitions/BoundingBox","description":"人脸在图像中的位置。","type":"object"},"external_fields":{"description":"用户添加的额外自定义字段。","type":"object"},"external_image_id":{"description":"人脸所在的外部图片ID。","type":"string"},"face_id":{"description":"人脸ID,由系统内部生成的唯一ID。","type":"string"},"similarity":{"description":"人脸搜索时用于被检索的相似度。","format":"double","type":"number"}}}},"description":null,"group_id":"25f85699435345e7b8f09f6cea4f48d5","host":"face.cn-north-4.myhuaweicloud.com","id":"270b49d3aa7749f9b0cb0872b3986670","info_version":"v2","method":"post","name":"SearchFaceByFile","parameters":{},"paths":{"/v2/{project_id}/face-sets/{face_set_name}/search":{"post":{"consumes":["multipart/form-data"],"deprecated":false,"description":"人脸搜索是指在已有的人脸库中,查询与目标人脸相似的一张或者多张人脸,并返回相应的置信度。\n支持传入图片或者faceID进行人脸搜索,如果传入的是多张人脸图片,选取图片中检测到的最大尺寸人脸作为检索的输入。","operationId":"SearchFaceByFile","parameters":[{"description":"项目ID,获取方法请参见[获取项目ID/账号租户名/AK/SK](https://support.huaweicloud.com/api-face/face_02_0056.html)。","in":"path","name":"project_id","required":true,"type":"string","x-example":"2b31ed520xxxxxxebedb6e57xxxxxxxx","x-order":2},{"description":"人脸库名称。","in":"path","name":"face_set_name","required":true,"type":"string","x-example":"showFaceSet","x-order":3},{"description":"X-Auth-Token值获取方法请参见[认证鉴权](https://support.huaweicloud.com/api-face/face_02_0004.html)。","in":"header","name":"X-Auth-Token","required":true,"type":"string","x-example":"MIIDkgYJKoZIhvcNAQcCoIIDgzCCXXXXX...","x-order":1},{"description":"企业项目ID。FRS支持通过企业项目管理(EPS)对不同用户组和用户的资源使用,进行分账。当前仅支持按需计费模式。\n\n获取方法:进入“[企业项目管理](https://console.huaweicloud.com/eps/?region=cn-north-4#/projects/list)”页面,单击企业项目名称,在企业项目详情页获取Enterprise-Project-Id(企业项目ID)。\n\n企业项目创建步骤请参见用户指南。\n> 说明:\n创建企业项目后,在传参时,有以下三类场景。\n- 携带正确的ID,正常使用FRS服务,账单归到企业ID对应的企业项目中。\n- 携带错误的ID,正常使用FRS服务,账单的企业项目会被分类为“未归集”。\n- 不携带ID,正常使用FRS服务,账单的企业项目会被分类为“未归集”。","in":"header","name":"Enterprise-Project-Id","required":false,"type":"string","x-order":4},{"description":"本地图片文件,图片不能超过8MB,建议小于1MB。上传文件时,请求格式为multipart。\n\n必选,与image_url、image_base64、face_id四选一。","in":"formData","name":"image_file","required":true,"type":"file"},{"default":10,"description":"返回查询到的最相似的N张人脸,N默认为10。","format":"int32","in":"formData","name":"top_n","type":"integer"},{"default":0,"description":"人脸相似度阈值,低于这个阈值则不返回,取值范围0~1,一般情况下建议取值0.93,默认为0。","format":"double","in":"formData","name":"threshold","type":"number"},{"description":"支持字段排序,参考[sort语法](https://support.huaweicloud.com/api-face/face_02_0013.html)。","in":"formData","name":"sort","type":"string"},{"description":"过滤条件,参考[filter语法](https://support.huaweicloud.com/api-face/face_02_0014.html)。","in":"formData","name":"filter","type":"string"},{"description":"指定返回的自定义字段。","in":"formData","name":"return_fields","type":"string"}],"produces":["application/json"],"responses":{"200":{"description":"OK","examples":{"application/json":{"faces":[{"bounding_box":{"height":170,"top_left_x":20,"top_left_y":37,"width":170},"external_fields":{"id":"home","timestamp":12},"external_image_id":"123","face_id":"6KLB1Ktu","similarity":0.996146},{"bounding_box":{"height":170,"top_left_x":20,"top_left_y":37,"width":170},"external_fields":{"id":"home1","timestamp":12},"external_image_id":"12","face_id":"PexOpqRj","similarity":0.996146}]}},"headers":{"X-Request-Id":{"description":"This field is the request ID number for task tracking. Format is request_uuid-timestamp-hostname.","type":"string"}},"schema":{"$ref":"#/definitions/FaceSearchResp"}},"400":{"description":"失败响应样例","examples":{"application/json":{"error_code":"FRS.0021","error_msg":"The URL is invalid."}},"schema":{"$ref":"#/definitions/ErrorResp"}}},"summary":"人脸搜索","tags":["人脸搜索"],"x-name":"人脸搜索","x-open-region-cloud":"hc,hk","x-request-examples-1":{"filter":"timestamp:12","image_file":"File(图片文件)","return_fields":["timestamp","id"]},"x-request-examples-url-1":"POST https://{endpoint}/v2/{project_id}/face-sets/{face_set_name}/search","x-support-sdk":"Y"}}},"product_short":"FRS","region_id":"cn-north-4","schemes":["HTTPS"],"security_definitions":null,"summary":"人脸搜索","tags":"人脸搜索","uri":null,"version":"2.0"}