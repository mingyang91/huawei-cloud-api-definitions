{"base_path":"/","components":null,"consumes":"[\"application/json;charset=UTF-8\"]","definitions":{"ErrorMessageInfo":{"description":"错误信息","properties":{"code":{"description":"错误码","type":"string"},"message":{"description":"错误信息","type":"string"}},"required":["code","message"]},"FailResponseBody":{"description":"请求失败响应体","properties":{"error":{"$ref":"#/definitions/ErrorMessageInfo","description":"请求失败响应体","example":"{ \"error\": {\"message\": \"string.\", \"code\": \"string\" } }"}},"required":["error"]},"ListImageByTagsRequestBody":{"description":"请求参数","properties":{"action":{"description":"操作标识(区分大小写),支持filter、count。filter就是分页查询;count是只需按照条件将总条数返回即可。","enum":["filter","count"],"type":"string"},"limit":{"description":"最大查询记录数(action为count,时此参数无效)如果action为filter默认为10,limit最多为1000,不能为负数,最小值为1。","type":"string"},"matches":{"description":"搜索字段,key为要匹配的字段,如resource_name、resource_id等。value为匹配的值。多个matches的key不允许重复。不允许为空列表,但可以不传递参数。","items":{"$ref":"#/definitions/TagKeyValue"},"type":"array"},"not_tags":{"description":"不包含标签,最多包含10个key,每个key对应的values最多包含10个值,且key和values都不能重复。不能为空列表。","items":{"$ref":"#/definitions/Tags"},"type":"array"},"not_tags_any":{"description":"不包含任意标签,最多包含10个key,每个key对应的values最多包含10个值,且key和values都不能重复。不能为空列表。","items":{"$ref":"#/definitions/Tags"},"type":"array"},"offset":{"description":"索引位置, 从offset指定的下一条数据开始查询。 查询第一页数据时,不需要传入此参数(action为count时,此参数无效),如果action为filter默认为0,不能为负数。","type":"string"},"tags":{"description":"包含标签,最多包含10个key,每个key对应的values最多包含10个值,且key和values都不能重复。不能为空列表。","items":{"$ref":"#/definitions/Tags"},"type":"array"},"tags_any":{"description":"包含任意标签,最多包含10个key,每个key对应的values最多包含10个值,且key和values都不能重复。不允许为空列表,但可以不传递参数。","items":{"$ref":"#/definitions/Tags"},"type":"array"},"without_any_tag":{"description":"不包含任意一个标签,该字段为true时查询所有不带标签的资源,此时忽略tag、not_tags、tags_any、not_tags_any字段。","type":"boolean"}},"required":["action"]},"ListImageByTagsResponseBody":{"description":"响应参数","properties":{"resources":{"description":"镜像信息列表","items":{"$ref":"#/definitions/ShowImageByTagsResource"},"type":"array"},"total_count":{"description":"总记录数","format":"int32","type":"integer"}},"required":["resources","total_count"]},"QueryImageByTagsResourceDetail":{"description":"镜像详情","properties":{"status":{"description":"镜像状态","type":"string"}},"required":["status"]},"ShowImageByTagsResource":{"description":"resource字段数据结构说明","properties":{"resource_detail":{"$ref":"#/definitions/QueryImageByTagsResourceDetail","description":"镜像详情"},"resource_id":{"description":"镜像ID","type":"string"},"resource_name":{"description":"镜像名称","type":"string"},"tags":{"description":"镜像的标签列表","items":{"$ref":"#/definitions/TagKeyValue"},"type":"array"}},"required":["resource_detail","resource_id","resource_name","tags"]},"TagKeyValue":{"description":"镜像标签","properties":{"key":{"description":"标签的键","example":"key1","type":"string"},"value":{"description":"标签的值","example":"value","type":"string"}},"required":["key","value"]},"Tags":{"description":"镜像标签","properties":{"key":{"description":"标签的键。最大长度127个unicode字符,key不能为空。","type":"string"},"values":{"description":"标签的值列表。每个值最大长度255个unicode字符,如果values为空列表,则标签的值可以是任意值。值列表中的值之间为或的关系。","items":{"type":"string"},"type":"array"}},"required":["key","values"]}},"description":null,"group_id":"15afdecd4f8c4fd88190ef8e57094cd5","host":"ims.cn-north-4.myhuaweicloud.com","id":"fa98a86cd1104a2ea52dd8588c5cf08e","info_version":"v2","method":"post","name":"ListImageByTags","parameters":{},"paths":{"/v2/{project_id}/images/resource_instances/action":{"post":{"consumes":[],"deprecated":false,"description":"该接口用于按标签或其他条件对镜像进行过滤或者计数使用。","operationId":"ListImageByTags","parameters":[{"description":"用户Token,使用Token认证时该字段必选。","in":"header","name":"X-Auth-Token","required":false,"type":"string","x-order":1},{"description":"请求参数","in":"body","name":"bodyparam","required":true,"schema":{"$ref":"#/definitions/ListImageByTagsRequestBody"},"x-order":2},{"description":"项目ID。","in":"path","name":"project_id","required":true,"type":"string","x-order":3}],"produces":[],"responses":{"200":{"description":"正常","examples":{"application/json":{"total_count":36},"application/json-1":{"resources":[{"resource_detail":{"status":"active"},"resource_id":"8693187d-1590-4f9f-ae34-eb9e3037cf68","resource_name":"test10002","tags":[{"key":"key4","value":"value4"},{"key":"key3","value":"valueXX"},{"key":"key2","value":"value2"},{"key":"key5","value":"value5"},{"key":"key8","value":"value8"},{"key":"key6","value":"valueXX"},{"key":"key0","value":"valueXX"},{"key":"key1","value":"value1"},{"key":"key7","value":"value7"},{"key":"key9","value":"valueXX"}]}],"total_count":36}},"schema":{"$ref":"#/definitions/ListImageByTagsResponseBody"}},"400":{"description":"Bad Request  请求错误。","schema":{"$ref":"#/definitions/FailResponseBody"}},"401":{"description":"Unauthorized  鉴权失败。","schema":{"$ref":"#/definitions/FailResponseBody"}},"403":{"description":"Forbidden  没有操作权限。","schema":{"$ref":"#/definitions/FailResponseBody"}},"404":{"description":"Not Found  找不到资源。","schema":{"$ref":"#/definitions/FailResponseBody"}},"500":{"description":"Internal Server Error  服务内部错误。","schema":{"$ref":"#/definitions/FailResponseBody"}},"503":{"description":"Service Unavailable  服务不可用。","schema":{"$ref":"#/definitions/FailResponseBody"}}},"summary":"按标签查询镜像","tags":["镜像标签"],"x-apiexplorer-hide":"false","x-constraint":"为兼容遗留数据,使用tags、not_tags、tags_any、not_tags_any参数时,不对查询条件中标签的key、value进行字符集校验。","x-first-open-time":"2016-09-30","x-hybridcloud":"true","x-is-registered":"Y","x-name":"按标签查询镜像","x-open-region-cloud":"hc,hk,otc,tlf,ctc,obc","x-order":3,"x-publishpath":"","x-request-examples-1":{"action":"filter","limit":"1","matches":[{"key":"resource_name","value":"test100"}],"not_tags":[{"key":"key9","values":["value9"]}],"not_tags_any":[{"key":"key7","values":["value7"]}],"offset":"0","tags":[{"key":"key3","values":["valueXX"]}],"tags_any":[{"key":"key0","values":["valueXX"]}]},"x-request-examples-2":{"action":"count","matches":[{"key":"resource_name","value":"test100"}],"not_tags":[{"key":"key9","values":["value9"]}],"not_tags_any":[{"key":"key7","values":["value7"]}],"tags":[{"key":"key3","values":["valueXX"]}],"tags_any":[{"key":"key0","values":["valueXX"]}]},"x-request-examples-description-1":"action为filter时的请求体示例","x-request-examples-description-2":"action为count时的请求体示例","x-request-examples-text-1":"{\n\t\"action\": \"filter\",\n\t\"limit\": \"1\",\n\t\"offset\": \"0\",\n\t\"matches\": [{\n\t\t\"key\": \"resource_name\",\n\t\t\"value\": \"test100\"\n\t}],\n\t\"tags\": [{\n\t\t\"key\": \"key3\",\n\t\t\"values\": [\"valueXX\"]\n\t}],\n\t\"tags_any\": [{\n\t\t\"key\": \"key0\",\n\t\t\"values\": [\"valueXX\"]\n\t}],\n\t\"not_tags\": [{\n\t\t\"key\": \"key9\",\n\t\t\"values\": [\"value9\"]\n\t}],\n\t\"not_tags_any\": [{\n\t\t\"key\": \"key7\",\n\t\t\"values\": [\"value7\"]\n\t}]\n}","x-request-examples-text-2":"{\n\t\"action\": \"count\",\n\t\"matches\": [{\n\t\t\"key\": \"resource_name\",\n\t\t\"value\": \"test100\"\n\t}],\n\t\"tags\": [{\n\t\t\"key\": \"key3\",\n\t\t\"values\": [\"valueXX\"]\n\t}],\n\t\"tags_any\": [{\n\t\t\"key\": \"key0\",\n\t\t\"values\": [\"valueXX\"]\n\t}],\n\t\"not_tags\": [{\n\t\t\"key\": \"key9\",\n\t\t\"values\": [\"value9\"]\n\t}],\n\t\"not_tags_any\": [{\n\t\t\"key\": \"key7\",\n\t\t\"values\": [\"value7\"]\n\t}]\n}","x-request-examples-url-1":"POST https://{Endpoint}/v2/fd73a4a14a4a4dfb9771a8475e5198ea/images/resource_instances/action","x-request-examples-url-2":"POST https://{Endpoint}/v2/fd73a4a14a4a4dfb9771a8475e5198ea/images/resource_instances/action","x-scope":"Commercial","x-source":"SelfDeveloped","x-support-sdk":"Y","x-version":"v2"}}},"product_short":"IMS","region_id":"cn-north-4","schemes":["HTTPS"],"security_definitions":null,"summary":"按标签查询镜像","tags":"镜像标签","uri":null,"version":"2.0"}