{"base_path":null,"components":null,"consumes":"","definitions":{"AddonInstance":{"properties":{"apiVersion":{"description":"API版本,必须是\"v3\"","type":"string"},"kind":{"description":"API类型,必须是\"Addon\"","type":"string"},"metadata":{"$ref":"#/definitions/ObjectMeta","description":"资源元数据"},"spec":{"$ref":"#/definitions/AddonInstanceSpec","description":"插件实例的期望状态"},"status":{"$ref":"#/definitions/AddonInstanceStatus","description":"插件实例的实际状态"}},"required":["apiVersion","kind","metadata"],"type":"object"},"AddonInstanceSpec":{"description":"插件实例信息","properties":{"addonTemplateLabels":{"description":"插件模板标签","items":{"type":"string"},"type":"array"},"addonTemplateLogo":{"description":"插件模板Logo","type":"string"},"addonTemplateName":{"description":"插件模板名称","type":"string"},"addonTemplateType":{"description":"插件模板类型","type":"string"},"clusterID":{"description":"cluster ID信息","type":"string"},"description":{"description":"信息说明","type":"string"},"namespace":{"description":"命名空间","type":"string"},"parameters":{"$ref":"#/definitions/ReleaseParams","description":"发布参数"},"values":{"additionalProperties":{"properties":{},"type":"object"},"description":"插件实例的配置参数","type":"object"},"version":{"description":"插件版本信息","type":"string"}},"type":"object"},"AddonInstanceStatus":{"description":"插件实例的状态","properties":{"Reason":{"description":"变化原因信息","type":"string"},"currentVersion":{"$ref":"#/definitions/AddonVersion","description":"当前版本"},"message":{"description":"变化详细信息","type":"string"},"status":{"description":"状态信息","type":"string"},"targetVersions":{"description":"目标版本信息","items":{"type":"string"},"type":"array"}},"type":"object"},"AddonVersion":{"description":"插件版本相关信息","properties":{"creationTimestamp":{"description":"记录创建时间","type":"string"},"id":{"description":"插件包版本id","type":"string"},"input":{"additionalProperties":{"properties":{},"type":"object"},"description":"输入","type":"object"},"stable":{"description":"是否为稳定版本","type":"boolean"},"supportVersions":{"description":"支持的集群类型和和支持的集群版本信息","items":{"$ref":"#/definitions/SupportVersion"},"type":"array"},"translate":{"additionalProperties":{"properties":{},"type":"object"},"description":"供界面使用的翻译信息","type":"object"},"updateTimestamp":{"description":"记录更新时间","type":"string"},"version":{"description":"插件版本信息","type":"string"}},"type":"object"},"ManagedFieldsEntry":{"description":"由API Server自动维护的字段所有权记录,用于Server-Side Apply的冲突检测与字段级并发管理。","properties":{"apiVersion":{"description":"该管理者定义字段时所依据的资源 API 版本","type":"string"},"fieldsType":{"description":"固定为 \"FieldsV1\",标记字段结构格式","type":"string"},"fieldsV1":{"description":"用于存储实际被管理的字段信息","properties":{},"type":"object"},"manager":{"description":"管理者的名称","type":"string"},"operation":{"description":"记录导致此条目创建的操作类型,只能是 Apply 或 Update 两种操作类型","type":"string"},"time":{"description":"此管理条目被创建或最后一次更新的时间戳","type":"string"}},"type":"object"},"ObjectMeta":{"description":"ObjectMeta是Kubernetes中所有持久化资源必须包含的元数据结构","properties":{"annotations":{"additionalProperties":{"type":"string"},"description":"注解","type":"object"},"creationTimestamp":{"description":"创建时间","type":"string"},"generateName":{"description":"当未提供name时,服务器使用的前缀来生成唯一名称","type":"string"},"generation":{"description":"资源期望状态的代数","type":"string"},"labels":{"additionalProperties":{"type":"string"},"description":"标签","type":"object"},"managedFields":{"description":"记录哪些字段由哪些工作流管理","items":{"$ref":"#/definitions/ManagedFieldsEntry"},"type":"array"},"name":{"description":"资源名称","type":"string"},"namespace":{"description":"命名空间","type":"string"},"ownerReferences":{"description":"用于定义对象间所有权关系,管理对象的依赖关系和垃圾回收机制,支持控制器对资源的管理","items":{"$ref":"#/definitions/OwnerReference"},"type":"array"},"resourceVersion":{"description":"资源内部版本","type":"string"},"uid":{"description":"资源ID","type":"string"},"updateTimestamp":{"description":"更新时间","type":"string"}},"type":"object"},"OwnerReference":{"description":"用于在Kubernetes中标识一个拥有者对象,它提供了足够的信息来识别和关联资源之间的所有权关系","properties":{"apiVersion":{"description":"标识引用对象的API版本","type":"string"},"blockOwnerDeletion":{"description":"当为true且拥有者有名为\"foregroundDeletion\"的finalizer 时,会阻止拥有者被删除,直到这个引用被移除","type":"boolean"},"controller":{"description":"如果为true,表示该引用指向管理该资源的控制器","type":"boolean"},"kind":{"description":"引用对象的类型","type":"string"},"name":{"description":"引用对象的名称","type":"string"},"uid":{"description":"引用对象的uid","type":"string"}},"type":"object"},"ReleaseParams":{"properties":{"dry_run":{"description":"是否仅模拟安装过程","type":"boolean"},"include_hooks":{"description":"更新或删除时是否允许hook","type":"boolean"},"name_template":{"description":"发布资源的名称模板","type":"string"},"no_hooks":{"description":"是否禁止hook","type":"boolean"},"recreate":{"description":"是否强制重新创建资源","type":"boolean"},"release_version":{"description":"指定回滚版本号","format":"int32","type":"integer"},"replace":{"description":"是否允许重用已存在的名称","type":"boolean"},"reset_values":{"description":"更新时重设values","type":"boolean"}},"type":"object"},"SupportVersion":{"description":"支持的集群类型(BareMetal,VirtualMachine,windows等)和支持的集群版本(支持正则表达式,如\".*\"匹配所有集群版本 )信息等","properties":{"category":{"description":"支持的集群类型","type":"string"},"clusterType":{"description":"支持的集群类型(BareMetal,VirtualMachine,windows等)","type":"string"},"clusterVersion":{"description":"支持的集群版本,支持正则表达式,如\".*\"匹配所有集群版本","items":{"type":"string"},"type":"array"}},"type":"object"}},"description":null,"group_id":"51968f2e01f5406291357ae9c8b522a0","host":"ucs.myhuaweicloud.com","id":"5e1088719981484baad35b47496933e8","info_version":"v1","method":"put","name":"UpdateAddonInstance","parameters":{},"paths":{"/v1/addons/{id}":{"put":{"description":"更新插件实例","operationId":"UpdateAddonInstance","parameters":[{"description":"插件实例id","in":"path","name":"id","required":true,"type":"string"},{"description":"身份认证信息,调用接口的认证方式分为Token和AK/SK两种,如果您使用的Token方式,此参数为必填,请填写Token的值","in":"header","name":"X-Auth-Token","required":false,"type":"string"},{"description":"请求体","in":"body","name":"UpdateAddonInstanceRequestBody","required":true,"schema":{"$ref":"#/definitions/AddonInstance"}}],"responses":{"200":{"description":"返回插件实例信息","examples":{"application/json":{"apiVersion":"v3","kind":"Addon","metadata":{"creationTimestamp":"2023-07-03T10:57:43Z","name":"everest","uid":"******","updateTimestamp":"2023-07-03T11:24:05Z"},"spec":{"addonTemplateLabels":["Storage"],"addonTemplateLogo":"******","addonTemplateName":"everest","addonTemplateType":"helm","clusterID":"******","description":"","values":{"basic":{"bms_url":"******","cluster_version":"v1.23","driver_init_image_version":"2.1.30","ecsEndpoint":"******","everest_image_version":"2.1.30","evs_url":"******","iam_url":"******","ims_url":"******","obs_url":"******","platform":"linux-amd64","rbac_enabled":true,"sfs30_url":"******","sfs_turbo_url":"******","sfs_url":"******","supportHcs":false,"swr_addr":"******","swr_user":"hwofficial"},"custom":{"cluster_id":"******","cluster_version":"v1.23.8-r0","csi_attacher_detach_worker_threads":"60","csi_attacher_worker_threads":"60","default_vpc_id":"******","disable_auto_mount_secret":false,"enable_node_attacher":false,"flow_control":{},"multiAZEnabled":false,"over_subscription":"80","project_id":"******","volume_attaching_flow_ctrl":"0"},"flavor":{"category":["CCE","Turbo"],"description":"Has only one instance","name":"Single","replicas":1,"resources":[{"limitsCpu":"250m","limitsMem":"600Mi","name":"everest-csi-controller","requestsCpu":"250m","requestsMem":"600Mi"},{"limitsCpu":"100m","limitsMem":"300Mi","name":"everest-csi-driver","requestsCpu":"100m","requestsMem":"300Mi"}]},"systemAutoInject":{"cluster":{"clusterID":"******","clusterNetworkMode":"vpc-router","clusterVersion":"v1.23.8-r0"},"user":{"projectID":"******"}}},"version":"2.1.30"},"status":{"Reason":"addon upgrading","currentVersion":{"creationTimestamp":"2023-05-12T16:10:05Z","input":{"basic":{"bms_url":"******","driver_init_image_version":"2.1.30","ecsEndpoint":"******","everest_image_version":"2.1.30","evs_url":"******","iam_url":"******","ims_url":"******","obs_url":"******","platform":"******","sfs30_url":"******","sfs_turbo_url":"******","sfs_url":"******","supportHcs":false,"swr_addr":"******","swr_user":"hwofficial"},"parameters":{"common":{"defaultVPCId":1234567},"custom":{"cluster_id":"","csi_attacher_detach_worker_threads":"60","csi_attacher_worker_threads":"60","default_vpc_id":"","disable_auto_mount_secret":false,"enable_node_attacher":false,"flow_control":{},"multiAZEnabled":false,"over_subscription":"80","project_id":"","volume_attaching_flow_ctrl":"0"},"flavor1":{"description":"High available","name":"HA","replicas":2,"resources":[{"limitsCpu":"250m","limitsMem":"1500Mi","name":"everest-csi-controller","requestsCpu":"250m","requestsMem":"600Mi"},{"limitsCpu":"500m","limitsMem":"300Mi","name":"everest-csi-driver","requestsCpu":"100m","requestsMem":"300Mi"}]},"flavor2":{"description":"Has only one instance","name":"Single","replicas":1,"resources":[{"limitsCpu":"250m","limitsMem":"600Mi","name":"everest-csi-controller","requestsCpu":"250m","requestsMem":"600Mi"},{"limitsCpu":"100m","limitsMem":"300Mi","name":"everest-csi-driver","requestsCpu":"100m","requestsMem":"300Mi"}]},"flavor3":{"description":"custom resources","name":"custom-resources","replicas":2,"resources":[{"limitsCpu":"250m","limitsMem":"2000Mi","name":"everest-csi-controller","requestsCpu":"250m","requestsMem":"1500Mi"},{"limitsCpu":"500m","limitsMem":"300Mi","name":"everest-csi-driver","requestsCpu":"100m","requestsMem":"300Mi"}]}}},"stable":true,"translate":{"en_US":{"addon":{"changeLog":"","description":""},"description":{"Parameters.flavor1.description":"Deploy the add-on with two instances, delivering high availability but requiring more compute resources.","Parameters.flavor1.name":"HA","Parameters.flavor2.description":"Deploy the add-on with one instance.","Parameters.flavor2.name":"Standalone","Parameters.flavor3.name":"Custom"}},"fr_FR":{"addon":{"changeLog":"","description":""},"description":{"Parameters.flavor1.description":"Déployez avec deux instances, haute disponibilité.","Parameters.flavor1.name":"HA","Parameters.flavor2.description":"Déployez avec une seule instance.","Parameters.flavor2.name":"Célibataire","Parameters.flavor3.name":"Douane"}},"zh_CN":{"addon":{"changeLog":"","description":""},"description":{"Parameters.flavor1.description":"双实例部署,具有高可用能力,需占用更多的计算资源。","Parameters.flavor1.name":"高可用","Parameters.flavor2.description":"单实例部署.","Parameters.flavor2.name":"单实例","Parameters.flavor3.description":"自定义资源规格部署","Parameters.flavor3.name":"自定义"}}},"updateTimestamp":"2023-05-12T16:10:05Z","version":"2.1.30"},"message":"","status":"upgrading"}}},"schema":{"$ref":"#/definitions/AddonInstance"}},"400":{"description":"客户端请求错误,服务器无法执行请求","schema":{"type":"string"}},"404":{"description":"资源不存在","schema":{"type":"string"}},"500":{"description":"服务器内部错误","schema":{"type":"string"}}},"summary":"更新插件实例","tags":["插件管理"],"x-api-type":"open-api","x-is-registered":"Y","x-order":2,"x-request-examples-1":{"apiVersion":"v3","kind":"Addon","metadata":{"annotations":{"addon.upgrade/type":"upgrade"}},"spec":{"addonTemplateName":"everest","clusterID":"*****","values":{"basic":{"bms_url":"*****","cluster_version":"v1.23","driver_init_image_version":"2.1.30","ecsEndpoint":"*****","everest_image_version":"2.1.30","evs_url":"*****","iam_url":"*****","ims_url":"*****","obs_url":"*****","platform":"linux-amd64","rbac_enabled":true,"sfs30_url":"*****","sfs_turbo_url":"*****","sfs_url":"*****","supportHcs":false,"swr_addr":"*****","swr_user":"hwofficial"},"custom":{"cluster_id":"*****","csi_attacher_detach_worker_threads":"60","csi_attacher_worker_threads":"60","default_vpc_id":"*****","disable_auto_mount_secret":false,"enable_node_attacher":true,"flow_control":{},"multiAZEnabled":false,"over_subscription":"80","project_id":"*****","volume_attaching_flow_ctrl":"0"},"flavor":{"category":["CCE","Turbo"],"description":"High available","name":"HA","replicas":2,"resources":[{"limitsCpu":"250m","limitsMem":"2000Mi","name":"everest-csi-controller","requestsCpu":"250m","requestsMem":"1500Mi"},{"limitsCpu":"500m","limitsMem":"300Mi","name":"everest-csi-driver","requestsCpu":"100m","requestsMem":"300Mi"}]}},"version":"2.1.30"}},"x-request-examples-description-1":"更新插件实例","x-request-examples-text-1":{"apiVersion":"v3","kind":"Addon","metadata":{"annotations":{"addon.upgrade/type":"upgrade"}},"spec":{"addonTemplateName":"everest","clusterID":"*****","values":{"basic":{"bms_url":"*****","cluster_version":"v1.23","driver_init_image_version":"2.1.30","ecsEndpoint":"*****","everest_image_version":"2.1.30","evs_url":"*****","iam_url":"*****","ims_url":"*****","obs_url":"*****","platform":"linux-amd64","rbac_enabled":true,"sfs30_url":"*****","sfs_turbo_url":"*****","sfs_url":"*****","supportHcs":false,"swr_addr":"*****","swr_user":"hwofficial"},"custom":{"cluster_id":"*****","csi_attacher_detach_worker_threads":"60","csi_attacher_worker_threads":"60","default_vpc_id":"*****","disable_auto_mount_secret":false,"enable_node_attacher":true,"flow_control":{},"multiAZEnabled":false,"over_subscription":"80","project_id":"*****","volume_attaching_flow_ctrl":"0"},"flavor":{"category":["CCE","Turbo"],"description":"High available","name":"HA","replicas":2,"resources":[{"limitsCpu":"250m","limitsMem":"2000Mi","name":"everest-csi-controller","requestsCpu":"250m","requestsMem":"1500Mi"},{"limitsCpu":"500m","limitsMem":"300Mi","name":"everest-csi-driver","requestsCpu":"100m","requestsMem":"300Mi"}]}},"version":"2.1.30"}},"x-request-examples-url-1":"PUT https://ucs.myhuaweicloud.com/v1/addons{id}","x-support-sdk":"Y"}}},"product_short":"UCS","region_id":"cn-north-4","schemes":["HTTPS"],"security_definitions":null,"summary":"更新插件实例","tags":"插件管理","uri":null,"version":"2.0"}