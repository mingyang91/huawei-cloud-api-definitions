{"base_path":null,"components":null,"consumes":"","definitions":{"ClusterResponse":{"description":"集群注册返回信息","properties":{"uid":{"description":"集群ID","type":"string"}}},"NetworkConfig":{"properties":{"podCIDR":{"description":"容器网段","type":"string"},"serviceCIDR":{"description":"服务网段","type":"string"}},"type":"object"},"RegisterCluster":{"description":"集群信息,包括期望状态(例如同步模式),和集群状态(例如版本、Node状态信息及资源统计信息等)。","properties":{"apiVersion":{"description":"API版本信息。现版本仅为v1。","type":"string"},"kind":{"description":"资源类型。注册集群必须填写为Cluster。","type":"string"},"metadata":{"description":"集群元数据信息。","properties":{"annotations":{"additionalProperties":{"type":"string"},"description":"集群annotations信息。\n附着集群必填一个kubeconfig字段,取值是kubeconfig文件的内容。kubeconfig文件获取方法请参见[获取KubeConfig文件](https://support.huaweicloud.com/usermanual-ucs/ucs_01_0138.html)","type":"object"},"labels":{"additionalProperties":{"type":"string"},"description":"标签信息。可为空,不为空时,必须满足kurbenetes label规范,最多可支持100个标签。","type":"object"},"name":{"description":"CCE集群填写CCE集群名称,其他类型集群自定义","type":"string"},"uid":{"description":"集群ID信息,仅在注册CCE导入集群时使用,其他类型集群无需填写。","type":"string"}},"required":["name"],"type":"object"},"spec":{"description":"集群spec信息。","properties":{"category":{"description":"集群类别,填写需要与provider和type对应,具体请参见[集群类别与类型说明](ucs_api_0024.xml)。","type":"string"},"city":{"description":"所在城市代码,具体代码请参见[城市码](ucs_api_0023.xml)。仅支持中国城市,其他国家无需填写。","type":"string"},"clusterGroupID":{"description":"容器舰队ID信息。","type":"string"},"country":{"description":"所在国家代码,具体代码请参见[国家码](ucs_api_0022.xml)。","type":"string","x-optional":true},"manageType":{"description":"集群管理类型信息。\n取值如下:\n- grouped:在舰队中纳管的集群\n- discrete:未加入舰队的集群","type":"string"},"network":{"$ref":"#/definitions/NetworkConfig","description":"多云集群的网络配置,其他类型集群不涉及"},"projectID":{"description":"项目ID信息。仅在CCE导入集群注册时使用。可通过[获取未注册到UCS的CCE集群](ListManagedClusters.xml)接口的projectID字段获取。","type":"string"},"provider":{"description":"供应商,填写需要与category和type对应,具体请参见[集群类别与类型说明](ucs_api_0024.xml)。","type":"string","x-optional":true},"region":{"description":"地域信息。仅在CCE导入集群注册时使用。可通过[获取未注册到UCS的CCE集群](ListManagedClusters.xml)接口的region字段获取。","type":"string","x-optional":true},"type":{"description":"集群类型,填写需要与category和provider对应,具体请参见[集群类别与类型说明](ucs_api_0024.xml)。","type":"string"}},"required":["category","city","country","manageType","provider","type"],"type":"object"}},"required":["apiVersion","kind","metadata","spec"],"type":"object"}},"description":null,"group_id":"51968f2e01f5406291357ae9c8b522a0","host":"ucs.myhuaweicloud.com","id":"1648b9ea927e42e693340f944775675f","info_version":"v1","method":"post","name":"RegisterCluster","parameters":{},"paths":{"/v1/clusters":{"post":{"consumes":["application/x-www-form-urlencoded"],"description":"集群注册接口。支持三方集群的注册和CCE导入集群的注册。","operationId":"RegisterCluster","parameters":[{"description":"注册集群信息,如kubeconfig等","in":"body","name":"RegisterClusterRequestBody","required":true,"schema":{"$ref":"#/definitions/RegisterCluster"}},{"description":"身份认证信息,调用接口的认证方式分为Token和AK/SK两种,如果您使用的Token方式,此参数为必填,请填写Token的值","in":"header","maxLength":16384,"minLength":1,"name":"X-Auth-Token","required":false,"type":"string"}],"produces":["application/json"],"responses":{"201":{"description":"注册集群成功的返回信息,返回注册集群的Cluster ID","examples":{"application/json":{"uid":"b0d1ecb5-7947-11ee-9467-0255ac1001bf"}},"schema":{"$ref":"#/definitions/ClusterResponse"}},"400":{"description":"客户端请求错误,服务器无法执行请求","schema":{"type":"string"}},"403":{"description":"服务器拒绝执行请求","schema":{"type":"string"}},"404":{"description":"资源不存在","schema":{"type":"string"}},"409":{"description":"请求存在冲突","schema":{"type":"string"}},"500":{"description":"服务器内部错误","schema":{"type":"string"}}},"summary":"注册集群","tags":["UCS集群"],"x-api-type":"open-api","x-apidesigner":0,"x-is-registered":"Y","x-is-support-cmc":"Y","x-order":2,"x-request-examples-1":{"apiVersion":"v1","kind":"Cluster","metadata":{"name":"cce-cluster","uid":"44052cdd-8cd2-11ee-abd1-0255ac1001bd"},"spec":{"category":"self","city":"110000","clusterGroupID":"","country":"CN","manageType":"discrete","projectID":"05495693df80d3c92fa1c01795c2be02","provider":{"CCE":"cce"},"region":"cn-north-4","type":"turbo"}},"x-request-examples-2":{"apiVersion":"v1","kind":"Cluster","metadata":{"annotations":{"kubeconfig":"{\"kind\":\"Config\",\"apiVersion\":\"v1\",\"preferences\":{},\"clusters\":[{\"name\":\"internalCluster\",\"cluster\":{\"server\":\"https://kubernetes.default.svc.cluster.local:443\",\"insecure-skip-tls-verify\":true}}],\"users\":[{\"name\":\"ucs-user\",\"user\":{\"token\":\"token-string\"}}],\"contexts\":[{\"name\":\"internal\",\"context\":{\"cluster\":\"internalCluster\",\"user\":\"ucs-user\"}}],\"current-context\":\"internal\"}"},"labels":{},"name":"ack-cluster"},"spec":{"category":"attachedcluster","city":"110000","clusterGroupID":"","country":"CN","manageType":"discrete","provider":{"ALI":"aliyun","AWS":"aws","AZURE":"azure","FLEXIBLEENGINE":"FlexibleEngine","FLEXIBLEENGINESTACK":"FlexibleEngineStack","GOOGLE":"googlecloud","HUAWEI":"huaweicloud","HUAWEISTACK":"huaweicloudstack","MOBILE":"cmcloud","OPENSHIFT":"openshift","OPENTELEKOMCLOUD":"OpenTelekomCloud","OPENTELEKOMCLOUDSTACK":"OpenTelekomCloudStack","OTHER":"other","PRIVATEK8S":"privatek8s","TENCENT":"tencentcloud","TIANYI":"ctcloud"},"type":"ack"}},"x-request-examples-description-1":"注册华为云CCE集群","x-request-examples-description-2":"注册附着集群","x-request-examples-url-1":"POST https://ucs.myhuaweicloud.com/v1/clusters","x-request-examples-url-2":"POST https://ucs.myhuaweicloud.com/v1/clusters","x-support-sdk":"Y"}}},"product_short":"UCS","region_id":"cn-north-4","schemes":["HTTPS"],"security_definitions":null,"summary":"注册集群","tags":"UCS集群","uri":null,"version":"2.0"}