{"base_path":null,"components":{"parameters":{"AuthToken":{"description":"用户Token。 获取Token,请参考《统一身份认证服务API参考》的“获取用户Token”章节。请求响应成功后在响应消息头中包含的“X-Subject-Token”的值即为Token值。","in":"header","name":"X-Auth-Token","required":true,"schema":{"maxLength":10240,"minLength":0,"type":"string"}},"ProjectId":{"description":"租户项目ID","in":"path","name":"project_id","required":true,"schema":{"maxLength":36,"minLength":0,"pattern":"[a-fA-F0-9]{32}","type":"string"}}},"schemas":{"CreateSwitchoverTest":{"description":"创建倒换测试记录对象参数","properties":{"operation":{"description":"shutdown, undo_shutdown表示倒换测试操作类型","enum":["shutdown","undo_shutdown"],"maxLength":128,"minLength":0,"type":"string"},"resource_id":{"description":"倒换测试的资源对象ID","pattern":"[a-fA-F0-9]{8}-[a-fA-F0-9]{4}-[a-fA-F0-9]{4}-[a-fA-F0-9]{4}-[a-fA-F0-9]{12}","type":"string"},"resource_type":{"default":"virtual_interface","description":"倒换测试的资源对象类型","enum":["virtual_interface"],"maxLength":128,"minLength":0,"type":"string"}},"required":["resource_id","operation"],"type":"object"},"CreateSwitchoverTestRequestBody":{"properties":{"switchover_test_record":{"$ref":"#/components/schemas/CreateSwitchoverTest"}},"type":"object"},"CreateSwitchoverTestResponseBody":{"description":"","properties":{"request_id":{"description":"操作请求ID","type":"string"},"switchover_test_record":{"$ref":"#/components/schemas/SwitchoverTestRecord"}},"required":["request_id","switchover_test_record"],"type":"object"},"SwitchoverTestRecord":{"description":"倒换测试记录信息","properties":{"end_time":{"description":"倒换测试操作的结束时间。采用UTC时间格式,格式为:yyyy-MM-ddTHH:mm:ss.SSSZ","example":"2023-10-09T18:41:23.000Z","format":"date-time","type":"string"},"id":{"description":"倒换测试记录的唯一标识","type":"string"},"operate_status":{"description":"倒换测试状态记录\nSTARTING: 初始状态\nINPROGRESS: 配置下发中\nCOMPLETE: 配置下发完成\nERROR: 配置下发失败","enum":["STARTING","INPROGRESS","COMPLETE","ERROR"],"example":"STARTING","type":"string"},"operation":{"description":"shutdown, undo_shutdown表示倒换测试操作类型","enum":["shutdown","undo_shutdown"],"maxLength":128,"minLength":0,"type":"string"},"resource_id":{"description":"倒换测试的资源对象ID","pattern":"[a-fA-F0-9]{8}-[a-fA-F0-9]{4}-[a-fA-F0-9]{4}-[a-fA-F0-9]{4}-[a-fA-F0-9]{12}","type":"string"},"resource_type":{"default":"virtual_interface","description":"倒换测试的资源对象类型","enum":["virtual_interface"],"maxLength":128,"minLength":0,"type":"string"},"start_time":{"description":"倒换测试操作的开始时间。采用UTC时间格式,格式为:yyyy-MM-ddTHH:mm:ss.SSSZ","example":"2023-10-09T18:41:23.000Z","format":"date-time","type":"string"},"tenant_id":{"description":"租户ID","example":"de58f033eb664102ba85e4a5db473ca5","maxLength":32,"minLength":32,"pattern":"[a-fA-F0-9]{32}","type":"string","x-ifnull":"hide"}},"type":"object"}}},"consumes":"","definitions":null,"description":null,"group_id":"044e9f7ee6954f958198fe6f41f8bf50","host":"dcaas.cn-north-4.myhuaweicloud.com","id":"877d5fc590664c9caf2d2a5e9bc89d75","info_version":"v3","method":"post","name":"SwitchoverTest","parameters":null,"paths":{"/v3/{project_id}/dcaas/switchover-test":{"post":{"description":"客户双专线接入,需要支持双线自动倒换,方便进行功能测试。 虚拟接口进行倒换测试会导致接口关闭,业务流量中断。 对于虚拟接口,支持“关闭接口”和“开放接口”两种操作。 1、关闭接口:下发shutdown命令,关闭接口; 2、开放接口:下发undo_shutdown命令,使能接口。 倒换测试选择shutdown时,虚拟接口的状态为ADMIN_SHUTDOWN,此状态不允许虚拟接口的其他操作。 倒换测试选择undo_shutdown时,虚拟接口的状态为ACTIVE。","operationId":"SwitchoverTest","parameters":[{"$ref":"#/components/parameters/AuthToken"},{"$ref":"#/components/parameters/ProjectId"}],"requestBody":{"content":{"application/json":{"example":{"switchover_test_record":{"operation":"shutdown","resource_id":"d0b3329c-0063-470c-b1dc-657656b2e540","resource_type":"virtual_interface"}},"schema":{"$ref":"#/components/schemas/CreateSwitchoverTestRequestBody"}}},"required":true},"responses":{"201":{"content":{"application/json":{"example":{"request_id":"f91634a12b116b6f946d7871f5b4de18","switchover_test_record":{"end_time":"2023-10-09T18:41:23.000Z","id":"862d61f1-d9ea-4093-ba0e-2b8d415e3ab3","operate_status":"STARTING","operation":"shutdown","resource_id":"d0b3329c-0063-470c-b1dc-657656b2e540","resource_type":"virtual_interface","start_time":"2023-10-09T18:41:23.000Z","tenant_id":"de58f033eb664102ba85e4a5db473ca5"}},"schema":{"$ref":"#/components/schemas/CreateSwitchoverTestResponseBody"}}},"description":"Created"}},"summary":"执行虚拟接口倒换测试","tags":["VirtualInterface"],"x-apiexplorer-hide":"false","x-is-registered":"Y","x-open-region-cloud":"hws,hws_hk","x-request-examples-1":{"switchover_test_record":{"operation":"shutdown","resource_id":"d0b3329c-0063-470c-b1dc-657656b2e540","resource_type":"virtual_interface"}},"x-request-examples-description-1":"对虚拟接口下发shutdown命令,关闭接口。","x-request-examples-url-1":"POST https://{dc_endpoint}/v3/de58f033eb664102ba85e4a5db473ca5/dcaas/switchover-test","x-support-sdk":"Y"}}},"product_short":"DC","region_id":"cn-north-4","schemes":["HTTPS"],"security_definitions":null,"summary":"执行虚拟接口倒换测试","tags":"虚拟接口","uri":null,"version":"3.0.1"}