{"base_path":null,"components":{"parameters":{"AuthToken":{"description":"用户Token。","in":"header","name":"X-Auth-Token","required":false,"schema":{"maxLength":2000000,"minLength":0,"type":"string","x-sensitive":true}},"CentralNetworkId":{"description":"中心网络的ID。","example":"b3983675-4c10-46b0-b451-ab2280b025d5","in":"path","name":"central_network_id","required":true,"schema":{"maxLength":36,"minLength":36,"pattern":"[a-fA-F0-9]{8}-[a-fA-F0-9]{4}-[a-fA-F0-9]{4}-[a-fA-F0-9]{4}-[a-fA-F0-9]{12}","type":"string"}},"DomainId":{"description":"账户ID。","example":"f87a4b574ba18fbc43fcbdccdcdf48944caa","in":"path","name":"domain_id","required":true,"schema":{"maxLength":32,"minLength":10,"pattern":"[a-zA-Z0-9]{10,32}","type":"string"}},"PolicyId":{"description":"网络策略ID。","example":"f4b36e0f-c2d5-8214-3fb7-08dfd3eca76a","in":"path","name":"policy_id","required":true,"schema":{"maxLength":36,"minLength":36,"pattern":"[a-fA-F0-9]{8}-[a-fA-F0-9]{4}-[a-fA-F0-9]{4}-[a-fA-F0-9]{4}-[a-fA-F0-9]{12}","type":"string"}}},"schemas":{"ApplyCentralNetworkPolicyResponseBody":{"allOf":[{"$ref":"#/components/schemas/RequestId"},{"properties":{"central_network_policy":{"$ref":"#/components/schemas/CentralNetworkPolicy"},"central_network_policy_change_set":{"$ref":"#/components/schemas/CentralNetworkPolicyChangeSet"}},"required":["central_network_policy","central_network_policy_change_set"],"type":"object"}],"description":"应用中心网络策略的返回体。"},"AssociateErInstanceDocument":{"allOf":[{"$ref":"#/components/schemas/EnterpriseRouterId"},{"$ref":"#/components/schemas/ProjectId"},{"$ref":"#/components/schemas/RegionId"}],"description":"中心网络实例详情。"},"AssociateErTableDocument":{"allOf":[{"$ref":"#/components/schemas/ProjectId"},{"$ref":"#/components/schemas/RegionId"},{"$ref":"#/components/schemas/EnterpriseRouterId"},{"$ref":"#/components/schemas/EnterpriseRouterTableId"}],"description":"中心网络平面关联的ER路由表。"},"CentralNetworkElementChange":{"description":"中心网络策略变化。","discriminator":{"mapping":{"CreateCentralNetworkErConnection":"#/components/schemas/CreateCentralNetworkErConnection","CreateCentralNetworkErInstance":"#/components/schemas/CreateCentralNetworkErInstance","CreateCentralNetworkErTable":"#/components/schemas/CreateCentralNetworkErTable","CreateCentralNetworkPlane":"#/components/schemas/CreateCentralNetworkPlane","DeleteCentralNetworkErConnection":"#/components/schemas/DeleteCentralNetworkErConnection","DeleteCentralNetworkErInstance":"#/components/schemas/DeleteCentralNetworkErInstance","DeleteCentralNetworkErTable":"#/components/schemas/DeleteCentralNetworkErTable","DeleteCentralNetworkPlane":"#/components/schemas/DeleteCentralNetworkPlane","UpdateCentralNetworkPlane":"#/components/schemas/UpdateCentralNetworkPlane"},"propertyName":"operation_id"},"properties":{"operation_id":{"description":"实例状态。\n- CreateCentralNetworkPlane: 新增中心网络平面\n- DeleteCentralNetworkPlane: 移除中心网络平面\n- UpdateCentralNetworkPlane: 更新中心网络平面\n- CreateCentralNetworkErInstance: 新增中心网络ER实例\n- DeleteCentralNetworkErInstance: 移除中心网络ER实例\n- CreateCentralNetworkErConnection: 新增中心网络ER连接\n- DeleteCentralNetworkErConnection: 移除中心网络ER连接\n- CreateCentralNetworkErTable: 新增中心网络ER路由表\n- DeleteCentralNetworkErTable: 移除中心网络ER路由表","enum":["CreateCentralNetworkPlane","DeleteCentralNetworkPlane","UpdateCentralNetworkPlane","CreateCentralNetworkErInstance","DeleteCentralNetworkErInstance","CreateCentralNetworkErConnection","DeleteCentralNetworkErConnection","CreateCentralNetworkErTable","DeleteCentralNetworkErTable"],"example":"CreateCentralNetworkPlane","type":"string"}},"required":["operation_id"]},"CentralNetworkId":{"description":"中心网络ID。","properties":{"central_network_id":{"description":"中心网络ID。","example":"a3bad420-33b8-4e26-9e9b-bdf67aa8e72b","maxLength":36,"minLength":36,"pattern":"[a-fA-F0-9]{8}-[a-fA-F0-9]{4}-[a-fA-F0-9]{4}-[a-fA-F0-9]{4}-[a-fA-F0-9]{12}","type":"string","x-ifnull":"hide"}},"required":["central_network_id"]},"CentralNetworkPlaneChangeDocument":{"allOf":[{"$ref":"#/components/schemas/Name"},{"properties":{"associate_er_tables":{"description":"关联的中心网络ER实例列表。","items":{"$ref":"#/components/schemas/AssociateErTableDocument"},"maxItems":100,"minItems":0,"type":"array","x-ifnull":"hide"},"exclude_er_connections":{"description":"当自动连接所有ER实例时,排除中心网络的ER实例的连接。","items":{"$ref":"#/components/schemas/ExcludeErConnectionDocument"},"maxItems":100,"minItems":0,"type":"array","x-ifnull":"hide"},"is_default":{"description":"是否默认平面。","type":"boolean","x-ifnull":"hide"}},"required":["is_default"],"type":"object"}],"description":"中心网络平面文档。"},"CentralNetworkPlaneDocument":{"allOf":[{"$ref":"#/components/schemas/Name"},{"properties":{"associate_er_tables":{"description":"关联的中心网络ER实例列表。","items":{"$ref":"#/components/schemas/AssociateErTableDocument"},"maxItems":100,"minItems":0,"type":"array","x-ifnull":"hide"},"exclude_er_connections":{"description":"当自动连接所有ER实例时,排除中心网络的ER实例的连接。","items":{"$ref":"#/components/schemas/ExcludeErConnectionDocument"},"maxItems":100,"minItems":0,"type":"array","x-ifnull":"hide"}},"type":"object"}],"description":"中心网络平面文档。"},"CentralNetworkPlaneName":{"description":"中心网络平面名字。","properties":{"central_network_plane_name":{"description":"中心网络平面名字。","example":"name","maxLength":64,"minLength":1,"pattern":"^[\\u4e00-\\u9fa50-9a-zA-Z_.\\-]+$","type":"string","x-ifnull":"hide"}},"required":["central_network_plane_name"]},"CentralNetworkPolicy":{"allOf":[{"$ref":"#/components/schemas/UUID64Identifier"},{"$ref":"#/components/schemas/CreatedAt"},{"$ref":"#/components/schemas/DomainId"},{"$ref":"#/components/schemas/CentralNetworkPolicyState"},{"$ref":"#/components/schemas/CentralNetworkId"},{"$ref":"#/components/schemas/DocumentTemplateVersion"},{"properties":{"document":{"$ref":"#/components/schemas/CentralNetworkPolicyDocument"},"is_applied":{"description":"是否被应用。","example":true,"readOnly":true,"type":"boolean","x-ifnull":"hide"},"version":{"description":"中心网络策略的版本。","example":1,"format":"int32","maximum":4096,"minimum":1,"readOnly":true,"type":"integer","x-ifnull":"hide"}},"required":["is_applied","version","document"],"type":"object"}],"description":"中心网络策略详情。"},"CentralNetworkPolicyChangeSet":{"description":"网络策略变化列表。","items":{"$ref":"#/components/schemas/CentralNetworkElementChange"},"maxItems":2000,"minItems":0,"type":"array"},"CentralNetworkPolicyDocument":{"description":"中心网络策略文档。","properties":{"default_plane":{"default":"default-plane","description":"中心网络默认平面的名字。","example":"default-plane","maxLength":64,"minLength":1,"pattern":"^[\\u4e00-\\u9fa50-9a-zA-Z_.\\-]+$","type":"string","x-ifnull":"hide"},"er_instances":{"description":"中心网络ER实例列表。","items":{"$ref":"#/components/schemas/AssociateErInstanceDocument"},"maxItems":200,"minItems":1,"type":"array","x-ifnull":"hide"},"planes":{"default":[{"name":"default-plane"}],"description":"中心网络平面列表。","items":{"$ref":"#/components/schemas/CentralNetworkPlaneDocument"},"maxItems":100,"minItems":1,"type":"array","x-ifnull":"hide"}},"required":["planes","default_plane"]},"CentralNetworkPolicyState":{"description":"实例状态。","properties":{"state":{"$ref":"#/components/schemas/CentralNetworkPolicyStateEnum"}},"required":["state"]},"CentralNetworkPolicyStateEnum":{"description":"中心网络策略状态。\n- AVAILABLE (可用)\n- CANCELING (取消中)\n- APPLYING (应用中)\n- FAILED (失败)\n- DELETED (已刪除)","enum":["AVAILABLE","CANCELING","APPLYING","FAILED","DELETED"],"example":"AVAILABLE","readOnly":true,"type":"string","x-ifnull":"hide"},"CreateCentralNetworkErConnection":{"allOf":[{"$ref":"#/components/schemas/CentralNetworkElementChange"},{"$ref":"#/components/schemas/CentralNetworkPlaneName"},{"properties":{"create_central_network_er_connection":{"description":"平面管理的ER连接","items":{"$ref":"#/components/schemas/AssociateErTableDocument"},"maxItems":2,"minItems":2,"type":"array"}},"required":["create_central_network_er_connection"],"type":"object"}],"description":"新增中心网络ER连接详情。"},"CreateCentralNetworkErInstance":{"allOf":[{"$ref":"#/components/schemas/CentralNetworkElementChange"},{"properties":{"create_central_network_er_instance":{"$ref":"#/components/schemas/AssociateErInstanceDocument"}},"required":["create_central_network_er_instance"],"type":"object"}],"description":"新增中心网络ER实例的详情。"},"CreateCentralNetworkErTable":{"allOf":[{"$ref":"#/components/schemas/CentralNetworkElementChange"},{"$ref":"#/components/schemas/CentralNetworkPlaneName"},{"$ref":"#/components/schemas/AssociateErTableDocument"}],"description":"新增中心网络ER路由表详情。"},"CreateCentralNetworkPlane":{"allOf":[{"$ref":"#/components/schemas/CentralNetworkElementChange"},{"properties":{"create_central_network_plane":{"$ref":"#/components/schemas/CentralNetworkPlaneChangeDocument"}},"required":["create_central_network_plane"],"type":"object"}],"description":"新增中心网络策略平面的详情。"},"CreatedAt":{"description":"实例创建时间。","properties":{"created_at":{"description":"实例创建时间。UTC时间格式,yyyy-MM-ddTHH:mm:ss。","format":"date-time","readOnly":true,"type":"string","x-ifnull":"hide"}},"required":["created_at"]},"CustomErConnectionDocument":{"description":"中心网络平面管理的自定义ER连接","items":{"$ref":"#/components/schemas/AssociateErTableDocument"},"maxItems":2,"minItems":2,"type":"array"},"DeleteCentralNetworkErConnection":{"allOf":[{"$ref":"#/components/schemas/CentralNetworkElementChange"},{"$ref":"#/components/schemas/CentralNetworkPlaneName"},{"properties":{"delete_central_network_er_connection":{"description":"平面管理的ER连接","items":{"$ref":"#/components/schemas/AssociateErTableDocument"},"maxItems":2,"minItems":2,"type":"array"}},"required":["delete_central_network_er_connection"],"type":"object"}],"description":"移除中心网络ER连接详情。"},"DeleteCentralNetworkErInstance":{"allOf":[{"$ref":"#/components/schemas/CentralNetworkElementChange"},{"properties":{"delete_central_network_er_instance":{"$ref":"#/components/schemas/AssociateErInstanceDocument"}},"required":["delete_central_network_er_instance"],"type":"object"}],"description":"移除中心网络ER实例的详情。"},"DeleteCentralNetworkErTable":{"allOf":[{"$ref":"#/components/schemas/CentralNetworkElementChange"},{"$ref":"#/components/schemas/CentralNetworkPlaneName"},{"$ref":"#/components/schemas/AssociateErTableDocument"}],"description":"移除中心网络ER路由表详情。"},"DeleteCentralNetworkPlane":{"allOf":[{"$ref":"#/components/schemas/CentralNetworkElementChange"},{"properties":{"delete_central_network_plane":{"$ref":"#/components/schemas/CentralNetworkPlaneChangeDocument"}},"required":["delete_central_network_plane"],"type":"object"}],"description":"移除中心网络策略平面的详情。"},"DocumentTemplateVersion":{"description":"文档模板版本。","properties":{"document_template_version":{"$ref":"#/components/schemas/DocumentTemplateVersionEnum"}},"required":["document_template_version"]},"DocumentTemplateVersionEnum":{"default":"2022.08.30","description":"文档模板版本。\n- 2022.08.30 (2022.08.30)","enum":["2022.08.30"],"example":"2022.08.30","readOnly":true,"type":"string","x-ifnull":"hide"},"DomainId":{"description":"实例所属账号ID。","properties":{"domain_id":{"$ref":"#/components/schemas/DomainIdDef"}},"required":["domain_id"]},"DomainIdDef":{"description":"实例所属账号ID。","example":"521bb3d98bed4c6c9ee8669bd0620f76","maxLength":32,"minLength":10,"pattern":"[a-fA-F0-9]{10,32}","readOnly":true,"type":"string","x-ifnull":"hide"},"EnterpriseRouterId":{"description":"企业路由器的ID。","properties":{"enterprise_router_id":{"description":"企业路由器的ID。","example":"a3bad420-33b8-4e26-9e9b-bdf67aa8e72b","maxLength":36,"minLength":36,"pattern":"[a-fA-F0-9]{8}-[a-fA-F0-9]{4}-[a-fA-F0-9]{4}-[a-fA-F0-9]{4}-[a-fA-F0-9]{12}","type":"string","x-ifnull":"hide"}},"required":["enterprise_router_id"]},"EnterpriseRouterTableId":{"description":"企业路由器的路由表ID。","properties":{"enterprise_router_table_id":{"description":"企业路由器的路由表ID。","example":"a3bad420-33b8-4e26-9e9b-bdf67aa8e72b","maxLength":36,"minLength":36,"pattern":"[a-fA-F0-9]{8}-[a-fA-F0-9]{4}-[a-fA-F0-9]{4}-[a-fA-F0-9]{4}-[a-fA-F0-9]{12}","type":"string","x-ifnull":"hide"}},"required":["enterprise_router_table_id"]},"ExcludeErConnectionDocument":{"description":"中心网络平面管理的ER连接","items":{"$ref":"#/components/schemas/AssociateErInstanceDocument"},"maxItems":2,"minItems":2,"type":"array"},"Name":{"description":"实例名字。只能由中文、英文字母、数字、下划线、中划线、点组成。","properties":{"name":{"$ref":"#/components/schemas/NameDef"}},"required":["name"]},"NameDef":{"description":"实例名字。","example":"name","maxLength":64,"minLength":1,"pattern":"^[\\u4e00-\\u9fa50-9a-zA-Z_.\\-]+$","type":"string","x-ifnull":"hide"},"ProjectId":{"description":"实例所属项目ID。","properties":{"project_id":{"$ref":"#/components/schemas/ProjectIdDef"}},"required":["project_id"]},"ProjectIdDef":{"description":"实例所属项目ID。","example":"32f7402e18154ce5861c9989df956394","maxLength":32,"minLength":32,"pattern":"[a-fA-F0-9]{32}","type":"string","x-ifnull":"hide"},"RegionId":{"description":"Region ID。","properties":{"region_id":{"$ref":"#/components/schemas/RegionIdDef"}},"required":["region_id"]},"RegionIdDef":{"description":"RegionID。","example":"region-abc","maxLength":32,"minLength":1,"type":"string","x-ifnull":"hide"},"RequestId":{"description":"请求ID。","properties":{"request_id":{"description":"请求ID。","example":"a3bad420-33b8-4e26-9e9b-bdf67aa8e72b","maxLength":36,"minLength":32,"type":"string","x-ifnull":"hide"}},"required":["request_id"]},"UUID64Def":{"description":"实例ID。","example":"a3bad420-33b8-4e26-9e9b-bdf67aa8e72b","maxLength":36,"minLength":36,"pattern":"[a-fA-F0-9]{8}-[a-fA-F0-9]{4}-[a-fA-F0-9]{4}-[a-fA-F0-9]{4}-[a-fA-F0-9]{12}","type":"string","x-ifnull":"hide"},"UUID64Identifier":{"properties":{"id":{"$ref":"#/components/schemas/UUID64Def"}},"required":["id"]},"UpdateCentralNetworkPlane":{"allOf":[{"$ref":"#/components/schemas/CentralNetworkElementChange"},{"properties":{"newest_central_network_plane":{"$ref":"#/components/schemas/CentralNetworkPlaneChangeDocument"},"original_central_network_plane":{"$ref":"#/components/schemas/CentralNetworkPlaneChangeDocument"}},"required":["original_central_network_plane","newest_central_network_plane"],"type":"object"}],"description":"更新中心网络策略平面的详情。"}}},"consumes":"","definitions":null,"description":null,"group_id":"b2c5d98a6d6c474fb059cf0053e70cb1","host":"cc.myhuaweicloud.com","id":"ad616b573a47447ba905b6a8e394322f","info_version":"v3","method":"post","name":"ApplyCentralNetworkPolicy","parameters":null,"paths":{"/v3/{domain_id}/gcn/central-network/{central_network_id}/policies/{policy_id}/apply":{"post":{"description":"应用中心网络策略。","operationId":"ApplyCentralNetworkPolicy","parameters":[{"$ref":"#/components/parameters/AuthToken"},{"$ref":"#/components/parameters/DomainId"},{"$ref":"#/components/parameters/PolicyId"},{"$ref":"#/components/parameters/CentralNetworkId"}],"responses":{"202":{"content":{"application/json":{"example":{"central_network_policy":{"central_network_id":"e096c86f-817c-418c-945c-6b1d8860a15d","created_at":"2023-10-09T07:00:33.663Z","document":{"default_plane":"default-plane","er_instances":[{"enterprise_router_id":"c73b26b7-33f0-438d-b440-8e87dfe6fef9","project_id":"XXX","region_id":"region-abc"}],"planes":[{"associate_er_tables":[{"enterprise_router_id":"c73b26b7-33f0-438d-b440-8e87dfe6fef9","enterprise_router_table_id":"c0d51f20-0313-40f7-a74e-9dccb5da21c0","project_id":"XXX","region_id":"region-abc"}],"name":"default-plane"}]},"document_template_version":"2022.08.30","domain_id":"XXX","id":"ff51f460-4bbe-4385-b2c4-efbe3318076f","is_applied":false,"state":"APPLYING","version":2},"central_network_policy_change_set":[{"newest_central_network_plane":{"associate_er_tables":[{"enterprise_router_id":"c73b26b7-33f0-438d-b440-8e87dfe6fef9","enterprise_router_table_id":"c0d51f20-0313-40f7-a74e-9dccb5da21c0","project_id":"XXX","region_id":"region-abc"}],"is_default":true,"name":"default-plane"},"operation_id":"UpdateCentralNetworkPlane","original_central_network_plane":{"associate_er_tables":[{"enterprise_router_id":"395b0884-aab4-4bf0-8cb8-7f2da26708dd","enterprise_router_table_id":"cc542128-5c2d-402a-8960-53bb2ed9484e","project_id":"XXX","region_id":"region-abc"}],"is_default":true,"name":"default-plane"}},{"create_central_network_er_instance":{"enterprise_router_id":"c73b26b7-33f0-438d-b440-8e87dfe6fef9","project_id":"XXX","region_id":"region-abc"},"operation_id":"CreateCentralNetworkErInstance"},{"delete_central_network_er_instance":{"enterprise_router_id":"395b0884-aab4-4bf0-8cb8-7f2da26708dd","project_id":"XXX","region_id":"region-abc"},"operation_id":"DeleteCentralNetworkErInstance"},{"central_network_plane_name":"default-plane","enterprise_router_id":"c73b26b7-33f0-438d-b440-8e87dfe6fef9","enterprise_router_table_id":"c0d51f20-0313-40f7-a74e-9dccb5da21c0","operation_id":"CreateCentralNetworkErTable","project_id":"XXX","region_id":"region-abc"},{"central_network_plane_name":"default-plane","enterprise_router_id":"395b0884-aab4-4bf0-8cb8-7f2da26708dd","enterprise_router_table_id":"cc542128-5c2d-402a-8960-53bb2ed9484e","operation_id":"DeleteCentralNetworkErTable","project_id":"XXX","region_id":"region-abc"}],"request_id":"edb137a2c46c5bda0409833359bb649b"},"schema":{"$ref":"#/components/schemas/ApplyCentralNetworkPolicyResponseBody"}}},"description":"接受应用中心网络策略的请求。"}},"summary":"应用中心网络策略","tags":["CentralNetwork"],"x-api-type":"open-api","x-apiexplorer-hide":false,"x-cc-microservice":"central-network","x-env-backend-address":"{{cn_backend_address}}","x-huawei-security":{"enableEProject":true,"epsAction":"update","pdpKey":"cc:centralNetwork:applyPolicy","policyCheck":{"freezedRule":"not role:op_suspended and not role:op_restricted"}},"x-iam-auth-meta-anno":{"abacAction":"cc:centralNetwork:applyPolicy","authLevel":"INSTANCE","model":"v5-pkitoken","needAbacCheck":true,"needAbacResourceCheck":true,"needApigwJwtAuthCheck":true,"needCbcCheck":true,"needRbacCheck":false,"needResourceTagCheck":false,"opType":"update","supportAllGrantedEps":false},"x-is-registered":"Y","x-open-region-cloud":"hws,hws_hk,hws_eu","x-request-examples-description-1":"应用中心网络策略","x-request-examples-url-1":"GET /v3/{domain_id}/gcn/central-network/{central_network_id}/policies","x-support-sdk":"Y"}}},"product_short":"CC","region_id":"cn-north-4","schemes":["HTTPS"],"security_definitions":null,"summary":"应用中心网络策略","tags":"中心网络管理","uri":null,"version":"3.0.3"}