{"base_path":"/","components":null,"consumes":"[\"application/json;charset=UTF-8\"]","definitions":{"AutoScalingPolicyInfo":{"properties":{"auto_scaling_enable":{"description":"当前自动伸缩规则是否开启。","example":true,"type":"boolean"},"max_capacity":{"description":"指定该节点组的最大节点数。\n取值范围:[0~500]","format":"int32","maximum":500,"minimum":0,"type":"integer"},"min_capacity":{"description":"指定该节点组的最小保留节点数。\n取值范围:[0~500]","format":"int32","maximum":500,"minimum":0,"type":"integer"},"resources_plans":{"description":"资源计划列表。若该参数为空表示不启用资源计划。\n\n当启用弹性伸缩时,资源计划与自动伸缩规则需至少配置其中一种。","items":{"$ref":"#/definitions/ResourcesPlan"},"maxItems":5,"minItems":0,"type":"array"},"rules":{"description":"自动伸缩的规则列表。\n当启用弹性伸缩时,资源计划与自动伸缩规则需至少配置其中一种。","items":{"$ref":"#/definitions/Rule"},"maxItems":10,"minItems":0,"type":"array"},"tags":{"description":"弹性伸缩标签列表","items":{"$ref":"#/definitions/Tag"},"maxItems":100,"type":"array"}},"required":["auto_scaling_enable","min_capacity","max_capacity"],"type":"object"},"AutoScalingPolicyV2":{"properties":{"auto_scaling_policy":{"$ref":"#/definitions/AutoScalingPolicyInfo","description":"弹性伸缩规则。","type":"object"},"node_group_name":{"description":"节点组名称。必填参数。如果resource_pool_name为default,则创建节点组维度的弹性伸缩策略。如果resource_pool_name不为default,则在该节点组下创建对应资源池维度的策略。","example":"task_node_default_group","type":"string"},"resource_pool_name":{"description":"资源池名称。必填参数。当集群版本不支持按指定资源池进行弹性伸缩时,需要填写为default资源池。不为default时删除指定资源池维度的弹性伸缩策略。","example":"default","type":"string"}},"required":["node_group_name","resource_pool_name"],"type":"object"},"ResourcesPlan":{"properties":{"effective_days":{"description":"资源计划的生效日期,为空时代表每日,另外也可为以下返回值:\n\nMONDAY(周一)、TUESDAY(周二)、WEDNESDAY(周三)、THURSDAY(周四)、FRIDAY(周五)、SATURDAY(周六)、SUNDAY(周日)","items":{"description":"枚举值:\n- MONDAY: 星期一\n- TUESDAY: 星期二\n- WEDNESDAY: 星期三\n- THURSDAY: 星期四\n- FRIDAY: 星期五\n- SATURDAY: 星期六\n- SUNDAY: 星期日","enum":["MONDAY","TUESDAY","WEDNESDAY","THURSDAY","FRIDAY","SATURDAY","SUNDAY"],"type":"string"},"type":"array"},"end_time":{"description":"资源计划的结束时间,格式与“start_time”相同,不早于start_time表示的时间,且与start_time间隔不小于30min。","example":"21:00","type":"string"},"max_capacity":{"description":"资源计划内该节点组的最大保留节点数。\n取值范围:[0~500]","format":"int32","maximum":500,"minimum":0,"type":"integer"},"min_capacity":{"description":"资源计划内该节点组的最小保留节点数。\n取值范围:[0~500]","example":3,"format":"int32","maximum":500,"minimum":0,"type":"integer"},"period_type":{"description":"资源计划的周期类型,当前只允许以下类型:\n\ndaily","example":"daily","type":"string"},"start_time":{"description":"资源计划的起始时间,格式为“hour:minute”,表示时间在0:00-23:59之间。","example":"20:00","type":"string"}},"required":["end_time","max_capacity","min_capacity","period_type","start_time"],"type":"object"},"Rule":{"properties":{"adjustment_type":{"description":"弹性伸缩规则的调整类型,只允许以下类型:\n枚举值:\n- scale_out:扩容\n- scale_in:缩容","enum":["scale_out","scale_in"],"type":"string"},"cool_down_minutes":{"description":"触发弹性伸缩规则后,该集群处于冷却状态(不再执行弹性伸缩操作)的时长,单位为分钟。\n取值范围[0~10080],10080为一周的分钟数。","format":"int32","maximum":10080,"minimum":0,"type":"integer"},"description":{"description":"弹性伸缩规则的说明。\n最大长度为1024字符。","example":"for_xxx","maxLength":1024,"minLength":0,"type":"string"},"name":{"description":"弹性伸缩规则的名称。\n只能由字母、数字、中划线和下划线组成,并且长度为1~64个字符。\n在一个节点组范围内,不允许重名。","example":"rule_xxx","maxLength":64,"minLength":1,"type":"string"},"scaling_adjustment":{"description":"单次调整集群节点的个数。\n取值范围[1~100]","format":"int32","maximum":100,"minimum":1,"type":"integer"},"trigger":{"$ref":"#/definitions/Trigger","description":"描述该规则触发条件。"}},"required":["adjustment_type","cool_down_minutes","name","scaling_adjustment","trigger"],"type":"object"},"Tag":{"properties":{"key":{"description":"键。\n- 最大长度36个unicode字符,不能为空字符串。\n- 标签的key值不能包含非打印字符ASCII(0-31),“=”,“*”,“<”,“>”,“\\”,“,”,“|”,“/”,且首尾字符不能为空格。\n- 同一资源的key值不能重复。","maxLength":36,"minLength":1,"type":"string"},"value":{"description":"值。\n- 最大长度43个unicode字符,可以为空字符串。\n- 标签的value值不能包含非打印字符ASCII(0-31),“=”,“*”,“<”,“>”,“\\”,“,”,“|”,“/”,且首尾字符不能为空格。","maxLength":43,"minLength":0,"type":"string"}},"required":["key","value"],"type":"object"},"Trigger":{"properties":{"comparison_operator":{"description":"指标判断逻辑运算符,包括:\n- LT:小于\n- GT:大于\n- LTOE:小于等于\n- GTOE:大于等于","example":"LT","type":"string"},"evaluation_periods":{"description":"判断连续满足指标阈值的周期数(一个周期为5分钟)。\n取值范围[1~288]","format":"int32","maximum":288,"minimum":1,"type":"integer"},"metric_name":{"description":"指标名称。 该触发条件会依据该名称对应指标的值来进行判断。 最大长度为64个字符。","maxLength":64,"minLength":0,"type":"string"},"metric_value":{"description":"指标阈值。\n\n触发该条件的指标阈值,只允许输入整数或者带两位小数的数。","example":50,"type":"string"}},"required":["evaluation_periods","metric_name","metric_value"],"type":"object"}},"description":null,"group_id":"64579295290047fea862f501e033ff3f","host":"mrs.cn-north-4.myhuaweicloud.com","id":"3576e491682b4643ab411dc0f4c00a93","info_version":"v2","method":"post","name":"CreateAutoScalingPolicy","parameters":{},"paths":{"/v2/{project_id}/autoscaling-policy/{cluster_id}":{"post":{"description":"创建弹性伸缩策略。","operationId":"CreateAutoScalingPolicy","parameters":[{"description":"项目ID。","in":"path","name":"project_id","required":true,"type":"string"},{"description":"集群ID。","in":"path","name":"cluster_id","required":true,"type":"string"},{"description":"创建弹性伸缩策略请求","in":"body","name":"CreateAutoScalingPolicyRequestBody","required":false,"schema":{"$ref":"#/definitions/AutoScalingPolicyV2"}}],"responses":{"202":{"description":"创建弹性伸缩策略完成"}},"summary":"创建弹性伸缩策略","tags":["弹性伸缩接口"],"x-apiexplorer-hide":"N","x-is-registered":"Y","x-name":"创建弹性伸缩策略","x-request-examples-1":{"auto_scaling_policy":{"auto_scaling_enable":true,"exec_scripts":[],"max_capacity":5,"min_capacity":0,"resources_plans":[{"effective_days":["MONDAY"],"end_time":"20:00","max_capacity":"2","min_capacity":"0","period_type":"daily","start_time":"06:00"}],"rules":[{"adjustment_type":"scale_out","cool_down_minutes":20,"name":"default-expand-1","scaling_adjustment":1,"trigger":{"comparison_operator":"GT","evaluation_periods":1,"metric_name":"YARNAppRunning","metric_value":75}},{"adjustment_type":"scale_in","cool_down_minutes":20,"name":"default-shrink-1","scaling_adjustment":1,"trigger":{"comparison_operator":"LT","evaluation_periods":1,"metric_name":"YARNAppRunning","metric_value":25}}],"tags":[{"key":"aaa","value":"bbb"}]},"node_group_name":"node_group_1","resource_pool_name":"default"},"x-request-examples-description-1":"创建一个弹性伸缩策略, 在节点组node_group_1中配置节点组数量范围为0-5,并配置2个伸缩规则。  如果YARNAppRunning 大于等于 75 ,并持续 1 个五分钟,则添加1 个Task节点。如果 YARNAppRunning  小于等于25 ,并持续 1 个五分钟,则终止 1个Task节点。冷却时间皆为20分钟,并且设置了该策略下弹出的节点会打上aaa=bbb的标签。","x-request-examples-text-1":{"auto_scaling_policy":{"auto_scaling_enable":true,"exec_scripts":[],"max_capacity":5,"min_capacity":0,"resources_plans":[{"effective_days":["MONDAY"],"end_time":"20:00","max_capacity":"2","min_capacity":"0","period_type":"daily","start_time":"06:00"}],"rules":[{"adjustment_type":"scale_out","cool_down_minutes":20,"name":"default-expand-1","scaling_adjustment":1,"trigger":{"comparison_operator":"GT","evaluation_periods":1,"metric_name":"YARNAppRunning","metric_value":75}},{"adjustment_type":"scale_in","cool_down_minutes":20,"name":"default-shrink-1","scaling_adjustment":1,"trigger":{"comparison_operator":"LT","evaluation_periods":1,"metric_name":"YARNAppRunning","metric_value":25}}],"tags":[{"key":"aaa","value":"bbb"}]},"node_group_name":"node_group_1","resource_pool_name":"default"},"x-request-examples-url-1":"/v2/{project_id}/autoscaling-policy/{cluster_id}","x-support-sdk":"Y","x-tags":"弹性伸缩接口"}}},"product_short":"MRS","region_id":"cn-north-4","schemes":["HTTPS"],"security_definitions":null,"summary":"创建弹性伸缩策略","tags":"弹性伸缩接口","uri":null,"version":"2.0"}