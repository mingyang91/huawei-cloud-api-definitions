{"base_path":"/","components":null,"consumes":"[\"application/json;charset=UTF-8\"]","definitions":{"AutoScalingPolicy":{"properties":{"auto_scaling_enable":{"description":"当前自动伸缩规则是否开启。","example":true,"type":"boolean"},"exec_scripts":{"description":"弹性伸缩自定义自动化脚本列表。若该参数为空表示不启用自动化脚本。","items":{"$ref":"#/definitions/ScaleScript"},"maxItems":10,"minItems":0,"type":"array"},"max_capacity":{"description":"指定该节点组的最大节点数。\n取值范围:[0~500]","format":"int32","maximum":500,"minimum":0,"type":"integer"},"min_capacity":{"description":"指定该节点组的最小保留节点数。\n取值范围:[0~500]","format":"int32","maximum":500,"minimum":0,"type":"integer"},"resources_plans":{"description":"资源计划列表。若该参数为空表示不启用资源计划。\n当启用弹性伸缩时,资源计划与自动伸缩规则需至少配置其中一种。","items":{"$ref":"#/definitions/ResourcesPlan"},"maxItems":5,"minItems":0,"type":"array"},"rules":{"description":"自动伸缩的规则列表。 当启用弹性伸缩时,资源计划与自动伸缩规则需至少配置其中一种。","items":{"$ref":"#/definitions/Rule"},"maxItems":10,"minItems":0,"type":"array"}},"required":["auto_scaling_enable","max_capacity","min_capacity"],"type":"object"},"BootstrapScript":{"properties":{"action_stages":{"description":"选择引导操作脚本执行的时间。\n- BEFORE_COMPONENT_FIRST_START: 组件首次启动前\n- AFTER_COMPONENT_FIRST_START: 组件首次启动后\n- BEFORE_SCALE_IN: 缩容前\n- AFTER_SCALE_IN: 缩容后\n- BEFORE_SCALE_OUT: 扩容前\n- AFTER_SCALE_OUT: 扩容后","items":{"description":"枚举值:\n- BEFORE_COMPONENT_FIRST_START: 组件首次启动前\n- AFTER_COMPONENT_FIRST_START: 组件首次启动后\n- BEFORE_SCALE_IN: 缩容前\n- AFTER_SCALE_IN: 缩容后\n- BEFORE_SCALE_OUT: 扩容前\n- AFTER_SCALE_OUT: 扩容后","enum":["BEFORE_COMPONENT_FIRST_START","AFTER_COMPONENT_FIRST_START","BEFORE_SCALE_IN","AFTER_SCALE_IN","BEFORE_SCALE_OUT","AFTER_SCALE_OUT"],"type":"string"},"type":"array"},"active_master":{"description":"引导操作脚本是否只运行在主Master节点上。\n缺省值为false,表示引导操作脚本可运行在所有Master节点上。","type":"boolean"},"before_component_start":{"description":"引导操作脚本执行的时间。目前支持“组件启动前”和“组件启动后”两种类型。\n缺省值为false,表示引导操作脚本在组件启动后执行。","type":"boolean"},"fail_action":{"description":"引导操作脚本执行失败后,是否继续执行后续脚本和创建集群。\n缺省值为errorout,表示终止操作。\n说明:\n建议您在调试阶段设置为“继续”,无论此引导操作是否执行成功,则集群都能继续安装和启动。\n枚举值:\n- continue:继续执行后续脚本。\n- errorout:终止操作。","enum":["continue","errorout"],"type":"string"},"name":{"description":"引导操作脚本的名称,同一个集群的引导操作脚本名称不允许相同。\n只能由数字、英文字符、空格、中划线和下划线组成,且不能以空格开头。\n可输入的字符串长度为1~64个字符。","maxLength":64,"minLength":1,"type":"string"},"nodes":{"description":"引导操作脚本所执行的节点组名称。","items":{"type":"string"},"type":"array"},"parameters":{"description":"引导操作脚本参数。","type":"string"},"start_time":{"description":"单个引导操作脚本的执行时间。","format":"int64","type":"integer"},"state":{"description":"单个引导操作脚本的运行状态。 \n- PENDING\n- IN_PROGRESS\n- SUCCESS\n- FAILURE","enum":["PENDING","IN_PROGRESS","SUCCESS","FAILURE"],"type":"string"},"uri":{"description":"引导操作脚本的路径。设置为OBS桶的路径或虚拟机本地的路径。\nOBS桶的路径:直接手动输入脚本路径。例如输入MRS提供的公共样例脚本路径。示例:obs://bootstrap/presto/presto-install.sh,其中安装dualroles时,presto-install.sh脚本参数为dualroles, 安装worker时,presto-install.sh脚本参数为worker。根据Presto使用习惯,建议您在Active Master节点上安装dualroles,在Core节点上安装worker。\n虚拟机本地的路径:用户需要输入正确的脚本路径。脚本所在的路径必须以‘/’开头,以.sh结尾。","type":"string"}},"required":["fail_action","name","nodes","uri"],"type":"object"},"ChargeInfo":{"properties":{"charge_mode":{"description":"计费模式。\n取值范围:\n- prePaid:预付费,即包年/包月。(创建集群接口现已支持预付费,创建集群并提交作业接口暂不支持预付费。)\n- postPaid:后付费,即按需计费。","example":"postPaid","type":"string"},"is_auto_pay":{"description":"是否自动支付,包周期模式下使用,下单订购后,是否自动从客户的账户中支付,而不需要客户手动去进行支付,默认为手动支付。取值范围:\n- true:自动支付,会自动选择折扣和优惠券进行优惠,然后自动从客户账户中支付,自动支付失败后会生成订单成功、但订单状态为“待支付”,等待客户手动支付。\n- false:手动支付,需要客户手动去支付,客户可以选择折扣和优惠券。","type":"boolean"},"period_num":{"description":"周期数,“charge_mode”为“prePaid”时生效,且为必选值,指定订购的时间。取值范围:\n- 当“period_type”为“month”时,取值为1~9。\n- 当“period_type”为“year”时,取值为1~3。","format":"int32","type":"integer"},"period_type":{"description":"周期类型。取值范围:\n- month:包月。\n- year: 包年。\n- day:按需计费。","example":"day","type":"string"}},"required":["charge_mode"],"type":"object"},"ClusterDataConnectorMap":{"properties":{"cluster_id":{"description":"关联集群id","example":"da1592c2-bb7e-468d-9ac9-83246e95447a","type":"string"},"component_name":{"description":"组件名","example":"Hive","type":"string"},"connector_id":{"description":"数据连接ID值","example":"c83cd05e-675c-4889-8bb5-b244fc733898","type":"string"},"map_id":{"description":"数据连接关联ID值","example":0,"format":"int32","type":"integer"},"role_type":{"description":"组件角色类型。\n- hive_metastore:Hive Metastore角色\n- hive_data:Hive角色\n- hbase_data:Hbase角色\n- ranger_data:Ranger角色","enum":["LOCAL_DB","RDS_POSTGRES","RDS_MYSQL","gaussdb-mysql"],"example":"hive_metastore","type":"string"},"source_type":{"description":"数据连接类型。\n- LOCAL_DB:本地元数据\n- RDS_POSTGRES:RDS服务PostgreSQL数据库\n- RDS_MYSQL:RDS服务MySQL数据库\n- gaussdb-mysql:云数据库GaussDB(for MySQL)","enum":["LOCAL_DB","RDS_POSTGRES","RDS_MYSQL","gaussdb-mysql"],"example":"RDS_POSTGRES","type":"string"},"status":{"description":"数据连接状态。\n- 0:代表正常状态\n- 1:代表使用中","example":0,"format":"int32","type":"integer"}},"type":"object"},"ComponentConfig":{"properties":{"component_name":{"description":"组件名称","example":"HDFS","type":"string"},"configs":{"description":"组件配置项列表","items":{"$ref":"#/definitions/Config"},"maxItems":100,"minItems":0,"type":"array"}},"required":["component_name"],"type":"object"},"Config":{"properties":{"config_file_name":{"description":"配置文件名,仅支持MRS组件配置页面上所展示的文件名。","example":"hdfs-site.xml","type":"string"},"key":{"description":"配置名,仅支持MRS组件配置页面上所展示的配置名。","example":"dfs.ha.zkfc.port","type":"string"},"value":{"description":"配置值","example":25015,"type":"string"}},"required":["key","value","config_file_name"],"type":"object"},"JobExecution":{"properties":{"arguments":{"description":"程序执行的关键参数,该参数由用户程序内的函数指定,MRS只负责参数的传入。\n最多为150000字符,不能包含;|&>'<$!\\\"\\特殊字符,可为空。\n说明:\n- 若输入带有敏感信息(如登录密码)的参数可能在作业详情展示和日志打印中存在暴露的风险,请谨慎操作。\n- 提交HiveScript或HiveSql类型的作业时如需以“obs://”开头格式访问存储在OBS上的文件,请在Hive服务配置页面搜索参数“core.site.customized.configs”,新增OBS的endpoint配置项,参数为“fs.obs.endpoint”,值请输入OBS对应的endpoint,具体请参考[终端节点](https://support.huaweicloud.com/api-mrs/mrs_02_0003.html)。","items":{"example":"obs://input.txt","type":"string"},"type":"array"},"job_name":{"description":"作业名称,只能由字母、数字、中划线和下划线组成,并且长度为1~64个字符。\n说明:\n不同作业的名称允许相同,但不建议设置相同。","example":"distCp_test","maxLength":64,"minLength":1,"type":"string"},"job_type":{"description":"作业类型:\n- MapReduce\n- SparkSubmit\n- SparkPython:该类型作业将转换为SparkSubmit类型提交,MRS控制台界面的作业类型展示为SparkSubmit,通过接口查询作业列表信息时作业类型请选择SparkSubmit。\n- HiveScript\n- HiveSql\n- DistCp,导入、导出数据。\n- SparkScript\n- SparkSql\n- Flink","example":"DistCp","type":"string"},"properties":{"additionalProperties":{"example":"value","type":"string"},"description":"程序系统参数。\n最多为2048字符,不能包含><|'`&!\\特殊字符,可为空。","type":"object"}},"required":["job_name","job_type"],"type":"object"},"NodeGroupV2":{"properties":{"assigned_roles":{"description":"当集群类型为CUSTOM时,该参数必选。可以指定节点组中部署的角色,该参数是一个字符串数组,每个字符串表示一个角色表达式。\n角色表达式定义:\n- 当该角色在节点组所有节点部署时: {role name},如“DataNode”。\n- 当该角色在节点组指定下标节点部署时:{role name}:{index1},{index2}...,{indexN},如“NameNode:1,2”,下标从1开始计数。\n- 部分角色支持多实例部署(即在一个节点部署多个同角色的实例):{role name}[{instance count}],如“EsNode[9]”\n可选的角色请参考[MRS支持的角色与组件对应表](https://support.huaweicloud.com/api-mrs/mrs_02_0106.html)。","items":{"type":"string"},"type":"array"},"auto_scaling_policy":{"$ref":"#/definitions/AutoScalingPolicy","description":"弹性伸缩规则信息。"},"charge_info":{"$ref":"#/definitions/ChargeInfo","description":"节点组的计费类型,Master和Core节点组是和集群的计费类型一致,Task节点组可以和集群的计费类型不同。","type":"object"},"data_volume":{"$ref":"#/definitions/Volume","description":"节点数据盘信息,当data_volume_count不为0时,该参数必选。","type":"object"},"data_volume_count":{"description":"节点数据磁盘存储数目,取值范围:0~20。","example":1,"format":"int32","maximum":20,"minimum":0,"type":"integer"},"group_name":{"description":"节点组名称,最大长度64,支持大小写英文、数字以及“_”。节点组配置原则如下:\n- master_node_default_group:Master节点组,所有集群类型均需包含该节点组。\n- core_node_analysis_group:分析Core节点组,分析集群、混合集群均需包含该节点组。\n- core_node_streaming_group:流式Core节点组,流式集群和混合集群均需包含该节点组。\n- task_node_analysis_group:分析Task节点组,分析集群和混合集群可根据需要选择该节点组。\n- task_node_streaming_group:流式Task节点组,流式集群、混合集群可根据需要选择该节点组。\n- node_group{x}:自定义集群节点组,可根据需要添加多个,最多支持添加9个该节点组。","example":"master_node_default_group","type":"string"},"node_num":{"description":"节点数量,取值范围0~500,Core与Task节点总数最大为500个。","example":3,"format":"int32","maximum":500,"minimum":0,"type":"integer"},"node_size":{"description":"节点的实例规格。\n例如:c3.4xlarge.2.linux.bigdata。实例规格详细说明请参见[MRS所使用的弹性云服务器规格](https://support.huaweicloud.com/api-mrs/mrs_01_9006.html)和[MRS所使用的裸金属服务器规格](https://support.huaweicloud.com/api-mrs/mrs_01_9001.html)。\n该参数建议从MRS控制台的集群创建页面获取对应区域对应版本所支持的规格。","example":"c3.4xlarge.2.linux.bigdata","type":"string"},"root_volume":{"$ref":"#/definitions/Volume","description":"节点系统盘信息,部分虚拟机或BMS自带系统盘的情况该参数可选,其他情况该参数必选。","type":"object"}},"required":["group_name","node_num","node_size"],"type":"object"},"ResourcesPlan":{"properties":{"effective_days":{"description":"资源计划的生效日期,为空时代表每日,另外也可为以下返回值:\n\nMONDAY(周一)、TUESDAY(周二)、WEDNESDAY(周三)、THURSDAY(周四)、FRIDAY(周五)、SATURDAY(周六)、SUNDAY(周日)","items":{"description":"枚举值:\n- MONDAY: 星期一\n- TUESDAY: 星期二\n- WEDNESDAY: 星期三\n- THURSDAY: 星期四\n- FRIDAY: 星期五\n- SATURDAY: 星期六\n- SUNDAY: 星期日","enum":["MONDAY","TUESDAY","WEDNESDAY","THURSDAY","FRIDAY","SATURDAY","SUNDAY"],"type":"string"},"type":"array"},"end_time":{"description":"资源计划的结束时间,格式与“start_time”相同,不早于start_time表示的时间,且与start_time间隔不小于30min。","example":"21:00","type":"string"},"max_capacity":{"description":"资源计划内该节点组的最大保留节点数。\n取值范围:[0~500]","format":"int32","maximum":500,"minimum":0,"type":"integer"},"min_capacity":{"description":"资源计划内该节点组的最小保留节点数。\n取值范围:[0~500]","example":3,"format":"int32","maximum":500,"minimum":0,"type":"integer"},"period_type":{"description":"资源计划的周期类型,当前只允许以下类型:\n\ndaily","example":"daily","type":"string"},"start_time":{"description":"资源计划的起始时间,格式为“hour:minute”,表示时间在0:00-23:59之间。","example":"20:00","type":"string"}},"required":["end_time","max_capacity","min_capacity","period_type","start_time"],"type":"object"},"Rule":{"properties":{"adjustment_type":{"description":"弹性伸缩规则的调整类型,只允许以下类型:\n枚举值:\n- scale_out:扩容\n- scale_in:缩容","enum":["scale_out","scale_in"],"type":"string"},"cool_down_minutes":{"description":"触发弹性伸缩规则后,该集群处于冷却状态(不再执行弹性伸缩操作)的时长,单位为分钟。\n取值范围[0~10080],10080为一周的分钟数。","format":"int32","maximum":10080,"minimum":0,"type":"integer"},"description":{"description":"弹性伸缩规则的说明。\n最大长度为1024字符。","example":"for_xxx","maxLength":1024,"minLength":0,"type":"string"},"name":{"description":"弹性伸缩规则的名称。\n只能由字母、数字、中划线和下划线组成,并且长度为1~64个字符。\n在一个节点组范围内,不允许重名。","example":"rule_xxx","maxLength":64,"minLength":1,"type":"string"},"scaling_adjustment":{"description":"单次调整集群节点的个数。\n取值范围[1~100]","format":"int32","maximum":100,"minimum":1,"type":"integer"},"trigger":{"$ref":"#/definitions/Trigger","description":"描述该规则触发条件。"}},"required":["adjustment_type","cool_down_minutes","name","scaling_adjustment","trigger"],"type":"object"},"RunJobFlowCommand":{"properties":{"auto_create_default_security_group":{"description":"是否要创建MRS集群默认安全组,默认为false。\n当指定该参数为true,则无论“security_groups_id”参数是否指定,都会为集群创建默认安全组。","example":false,"type":"boolean"},"availability_zone":{"description":"可用分区名称,不支持多AZ集群。\n可用分区信息请参见[终端节点](https://support.huaweicloud.com/api-mrs/mrs_02_0003.html)。","example":"cn-north-1","type":"string"},"bootstrap_scripts":{"description":"配置引导操作脚本信息。","items":{"$ref":"#/definitions/BootstrapScript"},"type":"array"},"charge_info":{"$ref":"#/definitions/ChargeInfo","description":"计费类型信息。","type":"object"},"cluster_name":{"description":"集群名称,不允许相同。\n\n只能由字母、数字、中划线和下划线组成,并且长度为1~64个字符。","example":"mrs_test","maxLength":64,"minLength":1,"type":"string"},"cluster_type":{"description":"集群类型,取值范围:\n- ANALYSIS:分析集群\n- STREAMING:流式集群\n- MIXED:混合集群\n- CUSTOM:自定义集群,仅MRS 3.x版本支持。","example":"ANALYSIS","type":"string"},"cluster_version":{"description":"集群版本。例如:MRS 3.1.0。","example":"MRS 3.1.0","type":"string"},"component_configs":{"description":"集群组件自定义配置。\n该参数只适用于支持“自定义组件配置创建集群”特性的集群版本。","items":{"$ref":"#/definitions/ComponentConfig"},"maxItems":50,"minItems":0,"type":"array"},"components":{"description":"组件名称列表,用逗号分隔。支持的组件请参见[获取MRS集群信息](https://support.huaweicloud.com/api-mrs/mrs_02_9001.html)页面的“MRS服务支持的组件”内容。","example":"Hadoop,Spark2x,HBase,Hive,Hue,Flink,Oozie,ZooKeeper,Ranger,Tez,Impala,Presto,Kudu","type":"string"},"delete_when_no_steps":{"default":false,"description":"作业完成后是否自动删除集群,默认为false。","example":false,"type":"boolean"},"eip_address":{"description":"与MRS集群绑定的弹性公网IP,可实现使用弹性公网IP访问Manager的目的。该弹性公网IP必须已经创建且与集群在同一区域。","example":"10.10.10.10","type":"string"},"eip_id":{"description":"当“eip_address”配置时,该参数必须配置,用于表示绑定的弹性公网IP的ID。可通过在VPC服务的“网络控制台 > 弹性公网IP和带宽 > 弹性公网IP”页面单击待绑定的弹性公网IP,在基本信息中获取“ID”。","example":"2143ed520xxxxxxebedb6e57xxxxxxxx","type":"string"},"enterprise_project_id":{"description":"企业项目ID。\n创建集群时,给集群绑定企业项目ID。\n默认设置为0,表示为default企业项目。\n获取方式请参见《企业管理API参考》的“查询企业项目列表”响应消息表“enterprise_project字段数据结构说明”的“id”。","example":"5678ed520xxxxxxebedb6e57xxxxxxxx","type":"string"},"external_datasources":{"description":"部署Hive和Ranger等组件时,可以关联数据连接,将元数据存储于关联的数据库","items":{"$ref":"#/definitions/ClusterDataConnectorMap"},"type":"array"},"is_dec_project":{"default":false,"description":"说明是否为专属云的资源,默认为false。","example":false,"type":"boolean"},"log_collection":{"description":"集群创建失败时,是否收集失败日志。\n默认设置为1,此时将创建OBS桶仅用于MRS集群创建失败时的日志收集。\n枚举值:\n- 0:不收集\n- 1:收集","enum":[0,1],"format":"int32","type":"integer"},"log_uri":{"description":"集群日志转储至OBS的具体路径。\n开启日志转储功能后,日志上传需要对应OBS路径的读写权限,\n请配置MRS_ECS_DEFULT_AGENCY默认委托或具有对应OBS路径读写权限的自定义委托。\n具体请参见[配置存算分离集群(委托方式)](https://support.huaweicloud.com/usermanual-mrs/mrs_01_0768.html)。\n该参数只适用于支持“集群日志转储OBS”特性的集群版本。","example":"obs://bucketTest/logs","type":"string"},"login_mode":{"description":"节点登录方式。\n- PASSWORD:密码登录,选择此项时,node_root_password不能为空。\n- KEYPAIR:密钥对登录,选择此项时,node_keypair_name不能为空。","example":"PASSWORD","type":"string"},"manager_admin_password":{"description":"配置Manager管理员用户的密码。\n- 密码长度应在8~26个字符之间。\n- 至少包含四种字符组合,如大写字母,小写字母,数字,特殊字符(!@$%^-_=+[{}]:,./?),但不能包含空格。\n- 不能与用户名或者倒序用户名相同。","example":"passwordxxx","type":"string"},"mrs_ecs_default_agency":{"description":"集群节点默认绑定的委托名称,固定为MRS_ECS_DEFAULT_AGENCY。\n通过绑定委托,您可以将部分资源共享给ECS或BMS云服务来管理,例如通过配置ECS委托可自动获取AK/SK访问OBS。\nMRS_ECS_DEFAULT_AGENCY委托拥有对象存储服务的OBS OperateAccess权限和在集群所在区域拥有CES FullAccess(对开启细粒度策略的用户)、CES Administrator和KMS Administrator权限。","example":"MRS_ECS_DEFAULT_AGENCY","type":"string"},"node_groups":{"description":"组成集群的节点组信息。","items":{"$ref":"#/definitions/NodeGroupV2"},"type":"array"},"node_keypair_name":{"description":"密钥对名称。用户可以使用密钥对方式登录集群节点。","example":"keypair_xxx","type":"string"},"node_root_password":{"description":"配置访问集群节点的root密码。\n密码设置约束如下:\n- 字符串类型,可输入的字符串长度为8-26。\n- 至少包含四种字符组合,如大写字母,小写字母,数字,特殊字符(!@$%^-_=+[{}]:,./?),但不能包含空格。\n- 不能与用户名或者倒序用户名相同。","example":"passwordxxx","type":"string"},"region":{"description":"集群所在区域信息,请参见[终端节点](https://support.huaweicloud.com/api-mrs/mrs_02_0003.html)。","example":"cn-north-1","type":"string"},"safe_mode":{"description":"MRS集群运行模式。\n- SIMPLE:普通集群,表示Kerberos认证关闭,用户可使用集群提供的所有功能。\n- KERBEROS:安全集群,表示Kerberos认证开启,普通用户无权限使用MRS集群的“文件管理”和“作业管理”功能,并且无法查看Hadoop、Spark的作业记录以及集群资源使用情况。如果需要使用集群更多功能,需要找Manager的管理员分配权限。","example":"SIMPLE","type":"string"},"security_groups_id":{"description":"集群安全组的ID。\n- 当该ID为空时MRS后台会自动创建安全组,自动创建的安全组名称以mrs_{cluster_name}开头。\n- 当该ID不为空时,表示使用固定安全组来创建集群,传入的ID必须是当前租户中包含的安全组ID,且该安全组中需要包含一条支持全部协议、全部端口、源地址为指定的管理面节点IP的入方向规则。\n- 支持多个安全组ID,以逗号分隔。","example":"1234ed520xxxxxxebedb6e57xxxxxxxx","type":"string"},"steps":{"description":"作业列表。","items":{"$ref":"#/definitions/StepConfig"},"maxItems":255,"minItems":1,"type":"array"},"subnet_id":{"description":"子网ID。通过VPC管理控制台获取子网ID:\n1) 登录VPC管理控制台。\n2) 单击“虚拟私有云”,从左侧列表选择虚拟私有云。\n3) 单击对应虚拟私有云所在行的“子网个数”查看子网。\n4) 单击对应子网名称,获取“网络ID”。\n“subnet_id”和“subnet_name”必须至少填写一个,当这两个参数同时配置但是不匹配同一个子网时,集群会创建失败,请仔细填写参数。推荐使用“subnet_id”。","example":"3431ed520xxxxxxebedb6e57xxxxxxxx","type":"string"},"subnet_name":{"description":"子网名称。\n通过VPC管理控制台获取子网名称:\n1) 登录管理控制台。\n2) 单击“虚拟私有云”,从左侧列表选择虚拟私有云。\n3) 单击对应虚拟私有云所在行的“子网个数”查看子网,获取子网名称。\n“subnet_id”和“subnet_name”必须至少填写一个,当这两个参数同时配置但是不匹配同一个子网时,集群会创建失败,请仔细填写参数。当仅填写“subnet_name”一个参数且VPC下存在同名子网时,创建集群时以VPC平台第一个名称的子网为准。推荐使用“subnet_id”。","example":"subnet_name","type":"string"},"tags":{"description":"集群的标签信息。\n同一个集群最多能使用10个tag,tag的名称(key)不能重复。","items":{"$ref":"#/definitions/Tag"},"type":"array"},"template_id":{"description":"当集群类型为CUSTOM时,用于指定节点部署所使用的模板。\n- mgmt_control_combined_v2:管控合设模板,管理角色和控制角色共同部署在Master节点中,数据实例合设在同一节点组。该部署方式适用于100个以下的节点,可以减少成本。\n- mgmt_control_separated_v2:管控分设模板,管理角色和控制角色分别部署在不同的Master节点中,数据实例合设在同一节点组。该部署方式适用于100-500个节点,在高并发负载情况下表现更好。\n- mgmt_control_data_separated_v2:数据分设模板,管理角色和控制角色分别部署在不同的Master节点中,数据实例分设在不同节点组。该部署方式适用于500个以上的节点,可以将各组件进一步分开部署,适用于更大的集群规模。","example":"6789ed520xxxxxxebedb6e57xxxxxxxx","type":"string"},"vpc_name":{"description":"子网所在VPC名称。\n通过VPC管理控制台获取名称:\n1) 登录VPC管理控制台。\n2) 单击“虚拟私有云”,从左侧列表选择虚拟私有云。\n在“虚拟私有云”页面的列表中即可获取VPC名称。","example":"vpc_name","type":"string"}},"required":["cluster_version","cluster_name","cluster_type","region","vpc_name","subnet_name","components","availability_zone","safe_mode","manager_admin_password","login_mode","node_groups","steps"],"type":"object"},"RunJobFlowResponseBody":{"properties":{"cluster_id":{"description":"集群创建成功后系统返回的集群ID值。","type":"string"}},"required":["cluster_id"],"type":"object"},"ScaleScript":{"properties":{"action_stage":{"description":"脚本执行时机。\n枚举值:\n- before_scale_out:扩容前\n- before_scale_in:缩容前\n- after_scale_out:扩容后\n- after_scale_in:缩容后","enum":["before_scale_out","before_scale_in","after_scale_out","after_scale_in"],"type":"string"},"active_master":{"description":"自定义自动化脚本是否只运行在主Master节点上。\n缺省值为false,表示自定义自动化脚本可运行在所有Master节点上。","type":"boolean"},"fail_action":{"description":"自自定义自动化脚本执行失败后,是否继续执行后续脚本和创建集群。\n说明:\n- 建议您在调试阶段设置为“continue”,无论此自定义自动化脚本是否执行成功,则集群都能继续安装和启动。\n- 由于缩容成功无法回滚,因此缩容后执行的脚本“fail_action”必须设置为“continue”。\n枚举值:\n- continue:继续执行后续脚本。\n- errorout:终止操作。","enum":["continue","errorout"],"type":"string"},"name":{"description":"弹性伸缩自定义自动化脚本的名称,同一个集群的自定义自动化脚本名称不允许相同。\n只能由数字、英文字符、空格、中划线和下划线组成,且不能以空格开头。\n可输入的字符串长度为1~64个字符。","maxLength":64,"minLength":1,"type":"string"},"nodes":{"description":"自定义自动化脚本所执行的节点组名称。","items":{"type":"string"},"type":"array"},"parameters":{"description":"自定义自动化脚本参数。\n多个参数间用空格隔开。\n可以传入以下系统预定义参数:\n- ${mrs_scale_node_num}:扩缩容节点数\n- ${mrs_scale_type}:扩缩容类型,扩容为scale_out,缩容为scale_in\n- ${mrs_scale_node_hostnames}:扩缩容的节点主机名称\n- ${mrs_scale_node_ips}:扩缩容的节点IP\n- ${mrs_scale_rule_name}:触发扩缩容的规则名\n其他用户自定义参数使用方式与普通shell脚本相同,多个参数中间用空格隔开。","type":"string"},"uri":{"description":"自定义自动化脚本的路径。设置为OBS桶的路径或虚拟机本地的路径。\n- OBS桶的路径:直接手动输入脚本路径。示例:obs://XXX/scale.sh\n- 虚拟机本地的路径:用户需要输入正确的脚本路径。脚本所在的路径必须以‘/’开头,以.sh结尾。","type":"string"}},"required":["action_stage","fail_action","name","nodes","uri"],"type":"object"},"StepConfig":{"description":"作业配置。","properties":{"job_execution":{"$ref":"#/definitions/JobExecution"}},"required":["job_execution"],"type":"object"},"Tag":{"properties":{"key":{"description":"键。\n- 最大长度36个unicode字符,不能为空字符串。\n- 标签的key值不能包含非打印字符ASCII(0-31),“=”,“*”,“<”,“>”,“\\”,“,”,“|”,“/”,且首尾字符不能为空格。\n- 同一资源的key值不能重复。","maxLength":36,"minLength":1,"type":"string"},"value":{"description":"值。\n- 最大长度43个unicode字符,可以为空字符串。\n- 标签的value值不能包含非打印字符ASCII(0-31),“=”,“*”,“<”,“>”,“\\”,“,”,“|”,“/”,且首尾字符不能为空格。","maxLength":43,"minLength":0,"type":"string"}},"required":["key","value"],"type":"object"},"Trigger":{"properties":{"comparison_operator":{"description":"指标判断逻辑运算符,包括:\n- LT:小于\n- GT:大于\n- LTOE:小于等于\n- GTOE:大于等于","example":"LT","type":"string"},"evaluation_periods":{"description":"判断连续满足指标阈值的周期数(一个周期为5分钟)。\n取值范围[1~288]","format":"int32","maximum":288,"minimum":1,"type":"integer"},"metric_name":{"description":"指标名称。 该触发条件会依据该名称对应指标的值来进行判断。 最大长度为64个字符。","maxLength":64,"minLength":0,"type":"string"},"metric_value":{"description":"指标阈值。\n\n触发该条件的指标阈值,只允许输入整数或者带两位小数的数。","example":50,"type":"string"}},"required":["evaluation_periods","metric_name","metric_value"],"type":"object"},"Volume":{"properties":{"size":{"description":"数据盘大小,容量单位为GB,输入大小范围为[10,32768]。","example":480,"format":"int32","type":"integer"},"type":{"description":"磁盘类型。\n磁盘类型枚举值:\n- SATA:普通IO磁盘类型。\n- SAS:高IO磁盘类型。\n- SSD:超高IO磁盘类型。\n- GPSSD:通用型SSD磁盘类型","example":"SSD","type":"string"}},"required":["type","size"],"type":"object"}},"description":null,"group_id":"64579295290047fea862f501e033ff3f","host":"mrs.cn-north-4.myhuaweicloud.com","id":"238819e89fb448e19704e003f71ea513","info_version":"v2","method":"post","name":"RunJobFlow","parameters":{},"paths":{"/v2/{project_id}/run-job-flow":{"post":{"consumes":["application/json"],"deprecated":false,"description":"创建一个MRS集群并提交作业,并支持作业完成后删除集群,支持MRS 1.8.9及以上集群版本使用。使用接口前,您需要先获取下的资源信息。\n- 通过VPC创建或查询VPC、子网\n- 通过ECS创建或查询密钥对\n- 通过[终端节点](https://support.huaweicloud.com/api-mrs/mrs_02_0003.html)获取区域信息\n- 参考[MRS服务支持的组件](https://support.huaweicloud.com/api-mrs/mrs_02_9001.html)获取MRS版本及对应版本支持的组件信息","operationId":"RunJobFlow","parameters":[{"description":"项目编号。获取方法,请参见[获取项目ID](https://support.huaweicloud.com/api-mrs/mrs_02_0011.html)。","in":"path","name":"project_id","required":true,"type":"string"},{"description":"创建集群请求","in":"body","name":"RunJobFlowRequestBody","required":true,"schema":{"$ref":"#/definitions/RunJobFlowCommand"}}],"produces":["application/json"],"responses":{"200":{"description":"正常响应示例。","examples":{"application/json":{"cluster_id":"da1592c2-bb7e-468d-9ac9-83246e95447a"}},"schema":{"$ref":"#/definitions/RunJobFlowResponseBody"}}},"summary":"创建集群并提交作业","tags":["集群管理接口"],"x-apiexplorer-hide":"N","x-apigateway-auth-type":"IAM","x-apigateway-match-mode":"NORMAL","x-apigateway-request-type":"public","x-call-frequency":"high","x-constraint":"无","x-ctc":"N","x-hc":"Y","x-hk":"Y","x-hybridcloud":true,"x-is-calling":"Y","x-is-registered":"Y","x-name":"创建集群","x-obc":"N","x-otc":"N","x-request-examples-1":{"availability_zone":"","charge_info":{"charge_mode":"postPaid"},"cluster_name":"mrs_heshe_dm","cluster_type":"CUSTOM","cluster_version":"MRS 3.1.0","components":"Hadoop,Spark2x,HBase,Hive,Hue,Loader,Kafka,Storm,Flume,Flink,Oozie,Ranger,Tez","delete_when_no_steps":true,"log_collection":1,"log_uri":"obs://bucketTest/logs","login_mode":"PASSWORD","manager_admin_password":"your password","mrs_ecs_default_agency":"MRS_ECS_DEFAULT_AGENCY","node_groups":[{"assigned_roles":["OMSServer:1,2","SlapdServer:1,2","KerberosServer:1,2","KerberosAdmin:1,2","quorumpeer:1,2,3","NameNode:2,3","Zkfc:2,3","JournalNode:1,2,3","ResourceManager:2,3","JobHistoryServer:2,3","DBServer:1,3","Hue:1,3","LoaderServer:1,3","MetaStore:1,2,3","WebHCat:1,2,3","HiveServer:1,2,3","HMaster:2,3","MonitorServer:1,2","Nimbus:1,2","UI:1,2","JDBCServer2x:1,2,3","JobHistory2x:2,3","SparkResource2x:1,2,3","oozie:2,3","LoadBalancer:2,3","TezUI:1,3","TimelineServer:3","RangerAdmin:1,2","UserSync:2","TagSync:2","KerberosClient","SlapdClient","meta","HSConsole:2,3","FlinkResource:1,2,3","DataNode:1,2,3","NodeManager:1,2,3","IndexServer2x:1,2","ThriftServer:1,2,3","RegionServer:1,2,3","ThriftServer1:1,2,3","RESTServer:1,2,3","Broker:1,2,3","Supervisor:1,2,3","Logviewer:1,2,3","Flume:1,2,3","HSBroker:1,2,3"],"data_volume":{"size":600,"type":"SAS"},"data_volume_count":1,"group_name":"master_node_default_group","node_num":3,"node_size":"Sit3.4xlarge.4.linux.bigdata","root_volume":{"size":480,"type":"SAS"}},{"assigned_roles":["DataNode","NodeManager","RegionServer","Flume:1","Broker","Supervisor","Logviewer","HBaseIndexer","KerberosClient","SlapdClient","meta","HSBroker:1,2","ThriftServer","ThriftServer1","RESTServer","FlinkResource"],"data_volume":{"size":600,"type":"SAS"},"data_volume_count":1,"group_name":"node_group_1","node_num":3,"node_size":"Sit3.4xlarge.4.linux.bigdata","root_volume":{"size":480,"type":"SAS"}},{"assigned_roles":["NodeManager","KerberosClient","SlapdClient","meta","FlinkResource"],"data_volume":{"size":600,"type":"SAS"},"data_volume_count":1,"group_name":"node_group_2","node_num":1,"node_size":"Sit3.4xlarge.4.linux.bigdata","root_volume":{"size":480,"type":"SAS"}}],"node_root_password":"your password","region":"","safe_mode":"KERBEROS","steps":[{"job_execution":{"arguments":["obs://test/test.sql","/user/hive/input"],"job_name":"import_file","job_type":"DistCp"}},{"job_execution":{"arguments":["obs://test/hive/sql/HiveScript.sql"],"job_name":"hive_test","job_type":"HiveScript"}}],"subnet_id":"1f8c5ca6-1f66-4096-bb00-baf175954f6e","subnet_name":"subnet","tags":[{"key":"tag1","value":111},{"key":"tag2","value":222}],"template_id":"mgmt_control_combined_v2","vpc_name":"vpc-37cd"},"x-request-examples-description-1":"创建自定义管控合设集群并提交作业","x-request-examples-text-1":"{\n  \"cluster_version\": \"MRS 3.1.0\",\n  \"cluster_name\": \"mrs_heshe_dm\",\n  \"cluster_type\": \"CUSTOM\",\n  \"charge_info\": {\n    \"charge_mode\": \"postPaid\"\n  },\n  \"region\": \"\",\n  \"availability_zone\": \"\",\n  \"vpc_name\": \"vpc-37cd\",\n  \"subnet_id\": \"1f8c5ca6-1f66-4096-bb00-baf175954f6e\",\n  \"subnet_name\": \"subnet\",\n  \"components\": \"Hadoop,Spark2x,HBase,Hive,Hue,Loader,Kafka,Storm,Flume,Flink,Oozie,Ranger,Tez\",\n  \"safe_mode\": \"KERBEROS\",\n  \"manager_admin_password\": \"your password\",\n  \"login_mode\": \"PASSWORD\",\n  \"node_root_password\": \"your password\",\n  \"mrs_ecs_default_agency\": \"MRS_ECS_DEFAULT_AGENCY\",\n  \"template_id\": \"mgmt_control_combined_v2\",\n  \"log_collection\": 1,\n  \"tags\": [\n    {\n      \"key\": \"tag1\",\n      \"value\": \"111\"\n    },\n    {\n      \"key\": \"tag2\",\n      \"value\": \"222\"\n    }\n  ],\n  \"node_groups\": [\n    {\n      \"group_name\": \"master_node_default_group\",\n      \"node_num\": 3,\n      \"node_size\": \"Sit3.4xlarge.4.linux.bigdata\",\n      \"root_volume\": {\n        \"type\": \"SAS\",\n        \"size\": 480\n      },\n      \"data_volume\": {\n        \"type\": \"SAS\",\n        \"size\": 600\n      },\n      \"data_volume_count\": 1,\n      \"assigned_roles\": [\n                \"OMSServer:1,2\",\n                \"SlapdServer:1,2\",\n                \"KerberosServer:1,2\",\n                \"KerberosAdmin:1,2\",\n                \"quorumpeer:1,2,3\",\n                \"NameNode:2,3\",\n                \"Zkfc:2,3\",\n                \"JournalNode:1,2,3\",\n                \"ResourceManager:2,3\",\n                \"JobHistoryServer:2,3\",\n                \"DBServer:1,3\",\n                \"Hue:1,3\",\n                \"LoaderServer:1,3\",\n                \"MetaStore:1,2,3\",\n                \"WebHCat:1,2,3\",\n                \"HiveServer:1,2,3\",\n                \"HMaster:2,3\",\n                \"MonitorServer:1,2\",\n                \"Nimbus:1,2\",\n                \"UI:1,2\",\n                \"JDBCServer2x:1,2,3\",\n                \"JobHistory2x:2,3\",\n                \"SparkResource2x:1,2,3\",\n                \"oozie:2,3\",\n                \"LoadBalancer:2,3\",\n                \"TezUI:1,3\",\n                \"TimelineServer:3\",\n                \"RangerAdmin:1,2\",\n                \"UserSync:2\",\n                \"TagSync:2\",\n                \"KerberosClient\",\n                \"SlapdClient\",\n                \"meta\",\n                \"HSConsole:2,3\",\n                \"FlinkResource:1,2,3\",\n                \"DataNode:1,2,3\",\n                \"NodeManager:1,2,3\",\n                \"IndexServer2x:1,2\",\n                \"ThriftServer:1,2,3\",\n                \"RegionServer:1,2,3\",\n                \"ThriftServer1:1,2,3\",\n                \"RESTServer:1,2,3\",\n                \"Broker:1,2,3\",\n                \"Supervisor:1,2,3\",\n                \"Logviewer:1,2,3\",\n                \"Flume:1,2,3\",\n                \"HSBroker:1,2,3\"\n      ]\n    },\n    {\n      \"group_name\": \"node_group_1\",\n      \"node_num\": 3,\n      \"node_size\": \"Sit3.4xlarge.4.linux.bigdata\",\n      \"root_volume\": {\n        \"type\": \"SAS\",\n        \"size\": 480\n      },\n      \"data_volume\": {\n        \"type\": \"SAS\",\n        \"size\": 600\n      },\n      \"data_volume_count\": 1,\n      \"assigned_roles\": [\n                \"DataNode\",\n                \"NodeManager\",\n                \"RegionServer\",\n                \"Flume:1\",\n                \"Broker\",\n                \"Supervisor\",\n                \"Logviewer\",\n                \"HBaseIndexer\",\n                \"KerberosClient\",\n                \"SlapdClient\",\n                \"meta\",\n                \"HSBroker:1,2\",\n                \"ThriftServer\",\n                \"ThriftServer1\",\n                \"RESTServer\",\n                \"FlinkResource\"]\n    },\n    {\n      \"group_name\": \"node_group_2\",\n      \"node_num\": 1,\n      \"node_size\": \"Sit3.4xlarge.4.linux.bigdata\",\n      \"root_volume\": {\n        \"type\": \"SAS\",\n        \"size\": 480\n      },\n      \"data_volume\": {\n        \"type\": \"SAS\",\n        \"size\": 600\n      },\n      \"data_volume_count\": 1,\n      \"assigned_roles\": [\n                \"NodeManager\",\n                \"KerberosClient\",\n                \"SlapdClient\",\n                \"meta\",\n                \"FlinkResource\"]\n    }\n  ],\n  \"log_uri\": \"obs://bucketTest/logs\",\n  \"delete_when_no_steps\" : true,\n  \"steps\" : [{\n      \"job_execution\" : {\n        \"job_name\" : \"import_file\",\n        \"job_type\" : \"DistCp\",\n        \"arguments\" : [\n          \"obs://test/test.sql\",\n          \"/user/hive/input\"\n        ]\n      }\n    }, {\n      \"job_execution\" : {\n        \"job_name\" : \"hive_test\",\n        \"job_type\" : \"HiveScript\",\n        \"arguments\" : [\n          \"obs://test/hive/sql/HiveScript.sql\"\n        ]\n      }\n    }\n  ]\n}","x-request-examples-url-1":"POST /v2/{project_id}/run-job-flow","x-scope":"Commercial","x-support-sdk":"Y","x-tlf":"N","x-version":"v2"}}},"product_short":"MRS","region_id":"cn-north-4","schemes":["HTTPS"],"security_definitions":null,"summary":"创建集群并提交作业","tags":"集群管理接口","uri":null,"version":"2.0"}