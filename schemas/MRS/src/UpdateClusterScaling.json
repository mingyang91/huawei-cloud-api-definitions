{"base_path":"/","components":null,"consumes":"[\"application/json;charset=UTF-8\"]","definitions":{"ApiCommonResponse":{"properties":{"result":{"description":"操作结果。 - succeeded:操作成功 - 操作失败时返回的错误码信息如[错误码](https://support.huaweicloud.com/api-mrs/ErrorCode.html)所示。","type":"string"}},"type":"object"},"ClusterScalingParams":{"properties":{"instances":{"description":"扩容或缩容的节点数。\n\n- 扩容时的最大节点数为(500 - 集群Core/Task节点数)。例如,当前集群Core节点数为3,此处扩容的节点数必须小于等于497。\n\n   Core和Task节点总数最大值为500,如果用户需要的Core/Task节点数大于500,可以联系技术支持人员或者调用后台接口修改数据库。\n\n\n- 缩容时Core节点数大于3或者Task节点数大于0可以进行节点删除。例如,当前集群Core节点和Task节点数均为5,Core节点可缩容的节点数为2(5减去3),Task节点可缩容节点数为小于等于5。","format":"int32","minimum":1,"type":"integer"},"node_group":{"description":"扩容或缩容的节点组。\n- 如果node_group为core_node_default_group,表示Core节点组。\n- 如果node_group为task_node_default_group,表示Task节点组。\n\n该字段可以为空,为空时,系统默认值为core_node_default_group。","type":"string"},"node_id":{"description":"扩容/缩容时新增或者减少节点的ID标识,参数值固定为node_orderadd。","type":"string"},"order_id":{"description":"扩容/缩容时系统获取的订单号,用户不需要配置。","type":"string"},"scale_type":{"description":"- scale_in:缩容\n- scale_out:扩容","enum":["scale_in","scale_out"],"type":"string"},"scale_without_start":{"description":"扩容后是否启动扩容节点上的组件。\n\n- true:扩容后不启动组件。\n- false:扩容后启动组件。","type":"boolean"},"server_ids":{"description":"缩容Task节点时指定待删除Task节点的ID列表。\n\n- 当scale_type为扩容时,该参数不生效。\n- 当scale_type为缩容且该参数不为空时,删除指定的Task节点。\n- 当scale_type为缩容且server_ids为空时,按照系统规则自动选择删除Task节点。","items":{"type":"string"},"type":"array"},"skip_bootstrap_scripts":{"description":"是否跳过引导操作,默认为false,即执行引导操作。\n仅在创建集群时配置了引导操作且扩容时有意义,表示扩容时是否在新增节点上执行创建集群时指定的引导操作。","type":"string"},"task_node_info":{"$ref":"#/definitions/TaskNodeInfo","description":"Task节点规格。\n\n- 当Task节点个数为0时,使用该字段指定Task节点的规格。\n- 当Task节点个数大于0时,不能使用该字段。该字段为空时,不填即可,字段内含必填参数不可使用会传空值对象的置空按钮。"}},"required":["instances","node_id","scale_type"],"type":"object"},"ClusterScalingReq":{"properties":{"parameters":{"$ref":"#/definitions/ClusterScalingParams","description":"请求参数集合。"},"plan_id":{"description":"套餐ID,为扩展接口,预留此参数。用户不需要配置。","type":"string"},"previous_values":{"additionalProperties":{"type":"string"},"description":"扩展接口,预留此参数。用户不需要配置。","type":"object"},"service_id":{"description":"服务ID,为扩展接口,预留此参数。用户不需要配置。","type":"string"}},"required":["parameters"],"type":"object"},"TaskNodeInfo":{"properties":{"data_volume_count":{"description":"Task节点数据磁盘存储数目,取值范围:0~20。","format":"int32","maximum":20,"minimum":0,"type":"integer"},"data_volume_size":{"description":"Task节点数据磁盘存储大小。\n\n取值范围:100GB~32000GB,传值只需填数字,不需要带单位GB。","format":"int32","maximum":32000,"minimum":100,"type":"integer"},"data_volume_type":{"description":"Task节点数据磁盘存储类别,目前支持SATA、SAS和SSD。\n- SATA:普通IO\n- SAS:高IO\n- SSD:超高IO\n- GPSSD:通用型SSD","enum":["SATA","SAS","SSD","GPSSD"],"type":"string"},"node_size":{"description":"Task节点的实例规格,例如:c3.4xlarge.2.linux.bigdata。实例规格详细说明请参见[MRS所使用的弹性云服务器规格](https://support.huaweicloud.com/api-mrs/mrs_01_9006.html)和[MRS所使用的裸金属服务器规格](https://support.huaweicloud.com/api-mrs/mrs_01_9001.html)。 该参数建议从MRS控制台的集群创建页面获取对应区域对应版本所支持的规格。","type":"string"}},"required":["node_size","data_volume_type","data_volume_count","data_volume_size"]}},"description":null,"group_id":"64579295290047fea862f501e033ff3f","host":"mrs.cn-north-4.myhuaweicloud.com","id":"34364652afbc486f92c7cf00c15d524b","info_version":"v1","method":"put","name":"UpdateClusterScaling","parameters":{},"paths":{"/v1.1/{project_id}/cluster_infos/{cluster_id}":{"put":{"consumes":["application/json"],"deprecated":false,"description":"创建集群后,扩容/缩容集群Core节点或者Task节点。MRS集群创建成功后不支持调整Master节点数量,即不支持扩缩容Master节点。该接口不兼容Sahara。\n处于running状态的集群才允许扩容/缩容,其他状态则不允许扩容/缩容。 集群状态和集群ID可参考[查询集群列表](https://support.huaweicloud.com/api-mrs/ListClusters.html)接口获取。 本章节的接口只支持流式集群、分析集群和混合集群,不支持自定义集群。","operationId":"UpdateClusterScaling","parameters":[{"description":"项目编号。获取方法,请参见[获取项目ID](https://support.huaweicloud.com/api-mrs/mrs_02_0011.html)。","in":"path","name":"project_id","required":true,"type":"string","x-example":"2b31ed520xxxxxxebedb6e57xxxxxxxx"},{"description":"集群ID。获取方法,请参见[获取集群ID](https://support.huaweicloud.com/api-mrs/mrs_02_9001.html)。","in":"path","name":"cluster_id","required":true,"type":"string","x-example":"431b135exxxxxxebedb6e57xxxxxxxx"},{"description":"调整集群节点请求体","in":"body","name":"clusterScalingReq","required":true,"schema":{"$ref":"#/definitions/ClusterScalingReq"}}],"produces":["application/json"],"responses":{"200":{"description":"扩容/缩容集群Core节点或者Task节点成功。","examples":{"application/json":{"result":"succeeded"}},"schema":{"$ref":"#/definitions/ApiCommonResponse"}}},"summary":"调整集群节点","tags":["集群管理接口"],"x-apiexplorer-hide":"N","x-apigateway-auth-type":"IAM","x-apigateway-match-mode":"NORMAL","x-apigateway-request-type":"public","x-call_frequency":"high","x-constraint":"无","x-ctc":"N","x-hc":"Y","x-hk":"Y","x-hybridcloud":true,"x-is-registered":"Y","x-is_calling":"Y","x-is_registered":"Y","x-name":"调整集群节点","x-obc":"N","x-order":2,"x-otc":"N","x-request-examples-1":{"parameters":{"instances":"1","node_group":"core_node_default_group","node_id":"node_orderadd","order_id":"","plan_id":"","previous_values":{},"scale_type":"scale_out","scale_without_start":false,"skip_bootstrap_scripts":false},"plan_id":"","service_id":""},"x-request-examples-2":{"parameters":{"instances":"1","node_group":"task_node_default_group","node_id":"node_orderadd","order_id":"","plan_id":"","previous_values":{},"scale_type":"scale_out","scale_without_start":false,"skip_bootstrap_scripts":false},"plan_id":"","service_id":""},"x-request-examples-3":{"parameters":{"instances":"1","node_group":"task_node_default_group","node_id":"node_orderadd","order_id":"","plan_id":"","previous_values":{},"scale_type":"scale_out","scale_without_start":false,"task_node_info":{"data_volume_count":2,"data_volume_size":600,"data_volume_type":"SATA","node_size":"s3.xlarge.2.linux.bigdata"}},"plan_id":"","service_id":""},"x-request-examples-4":{"parameters":{"instances":"1","node_group":"core_node_default_group","node_id":"node_orderadd","order_id":"","plan_id":"","previous_values":{},"scale_type":"scale_in"},"plan_id":"","service_id":""},"x-request-examples-5":{"parameters":{"instances":"1","node_group":"task_node_default_group","node_id":"node_orderadd","order_id":"","plan_id":"","previous_values":{},"scale_type":"scale_in"},"plan_id":"","service_id":""},"x-request-examples-6":{"parameters":{"instances":"2","node_group":"task_node_default_group","node_id":"node_orderadd","order_id":"","plan_id":"","previous_values":{},"scale_type":"scale_in","server_ids":["c9573435-7814-4b2c-9131-ad78b814414c","a4951009-6a0f-4e7b-9c81-9d4bd1f8c537"]},"plan_id":"","service_id":""},"x-request-examples-description-1":"扩容Core节点样例:","x-request-examples-description-2":"扩容Task节点(Task节点个数大于零时)样例:","x-request-examples-description-3":"扩容Task节点(Task节点个数为零时)样例:","x-request-examples-description-4":"缩容Core节点样例:","x-request-examples-description-5":"缩容Task节点样例:","x-request-examples-description-6":"缩容指定的Task节点样例:","x-request-examples-text-1":"{\n    \"service_id\": \"\",\n    \"plan_id\": \"\",\n    \"parameters\": {\n        \"order_id\": \"\",\n        \"scale_type\": \"scale_out\",\n        \"node_id\": \"node_orderadd\",\n        \"node_group\": \"core_node_default_group\",\n        \"instances\": \"1\",\n       \"skip_bootstrap_scripts\":false,\n       \"scale_without_start\":false\n    },\n    \"previous_values\": {}\n}","x-request-examples-text-2":"{\n    \"service_id\": \"\",\n    \"plan_id\": \"\",\n    \"parameters\": {\n        \"order_id\": \"\",\n        \"scale_type\": \"scale_out\",\n        \"node_id\": \"node_orderadd\",\n        \"node_group\": \"task_node_default_group\",\n        \"instances\": \"1\",\n       \"skip_bootstrap_scripts\":false,\n       \"scale_without_start\":false\n    },\n    \"previous_values\": {}\n}","x-request-examples-text-3":"{\n    \"service_id\": \"\",\n    \"plan_id\": \"\",\n    \"parameters\": {\n        \"order_id\": \"\",\n        \"scale_type\": \"scale_out\",\n        \"node_id\": \"node_orderadd\",\n        \"node_group\": \"task_node_default_group\",\n        \"task_node_info\": {\n            \"node_size\": \"s3.xlarge.2.linux.bigdata\",\n            \"data_volume_type\": \"SATA\",\n            \"data_volume_count\": 2,\n            \"data_volume_size\": 600\n        },\n       \"instances\": \"1\",\n       \"scale_without_start\":false\n    },\n    \"previous_values\": {}\n}","x-request-examples-text-4":"{\n    \"service_id\": \"\",\n    \"plan_id\": \"\",\n    \"parameters\": {\n        \"order_id\": \"\",\n        \"scale_type\": \"scale_in\",\n        \"node_id\": \"node_orderadd\",\n        \"node_group\": \"core_node_default_group\",\n        \"instances\": \"1\"\n    },\n    \"previous_values\": {}\n}","x-request-examples-text-5":"{\n    \"service_id\": \"\",\n    \"plan_id\": \"\",\n    \"parameters\": {\n        \"order_id\": \"\",\n        \"scale_type\": \"scale_in\",\n        \"node_id\": \"node_orderadd\",\n        \"node_group\": \"task_node_default_group\",\n        \"instances\": \"1\"\n    },\n    \"previous_values\": {}\n}","x-request-examples-text-6":"{\n    \"service_id\": \"\",\n    \"plan_id\": \"\",\n    \"parameters\": {\n        \"order_id\": \"\",\n        \"scale_type\": \"scale_in\",\n        \"node_id\": \"node_orderadd\",\n        \"node_group\": \"task_node_default_group\",\n        \"instances\": \"2\",\n        \"server_ids\": [\n          \"c9573435-7814-4b2c-9131-ad78b814414c\",\n          \"a4951009-6a0f-4e7b-9c81-9d4bd1f8c537\"\n        ]\n    },\n    \"previous_values\": {}\n}","x-request-examples-url-1":"PUT /v1.1/{project_id}/cluster_infos/{cluster_id}","x-request-examples-url-2":"PUT /v1.1/{project_id}/cluster_infos/{cluster_id}","x-request-examples-url-3":"PUT /v1.1/{project_id}/cluster_infos/{cluster_id}","x-request-examples-url-4":"PUT /v1.1/{project_id}/cluster_infos/{cluster_id}","x-request-examples-url-5":"PUT /v1.1/{project_id}/cluster_infos/{cluster_id}","x-request-examples-url-6":"PUT /v1.1/{project_id}/cluster_infos/{cluster_id}","x-scope":"Commercial","x-support-sdk":"Y","x-tlf":"N","x-version":"v1.1"}}},"product_short":"MRS","region_id":"cn-north-4","schemes":["HTTPS"],"security_definitions":null,"summary":"调整集群节点","tags":"集群管理接口","uri":null,"version":"2.0"}