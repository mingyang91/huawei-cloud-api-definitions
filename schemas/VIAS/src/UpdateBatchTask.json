{"base_path":null,"components":null,"consumes":"","definitions":{"BatchTaskInputDto":{"properties":{"video_source_group":{"description":"视频源分组信息","items":{"$ref":"#/definitions/BatchTaskVideoSourceGroupDto"},"maxItems":100,"minItems":1,"type":"array"}},"type":"object"},"BatchTaskInputVideoSourceDto":{"properties":{"target_roi":{"description":"roi区域","maxLength":2048,"minLength":0,"type":"string"},"video_source_id":{"description":"视频源id","pattern":"^[a-z0-9-_]{4,36}$","type":"string"}},"required":["video_source_id"],"type":"object"},"BatchTaskResDto":{"properties":{"error_list":{"description":"错误信息列表","items":{"type":"string"},"type":"array"},"failed_count":{"description":"失败作业数量","format":"int32","type":"integer"},"id":{"description":"批量作业id","type":"string"},"succeed_count":{"description":"成功作业数量","format":"int32","type":"integer"},"total_count":{"description":"作业总数","format":"int32","type":"integer"}},"type":"object"},"BatchTaskVideoSourceGroupDto":{"properties":{"video_source_group_id":{"description":"视频源分组id","pattern":"^[a-z0-9-_]{4,36}$","type":"string"},"video_source_list":{"description":"视频源列表","items":{"$ref":"#/definitions/BatchTaskInputVideoSourceDto"},"maxItems":100,"minItems":0,"type":"array"}},"required":["video_source_group_id","video_source_list"],"type":"object"},"ErrorResponse":{"description":"400,401,500等错误码响应","properties":{"advice":{"description":"建议","example":"Ensure that the entered parameter is valid.","type":"string"},"detail":{"description":"错误详情","type":"string"},"error_code":{"description":"错误码","example":"VIAS.00010001","type":"string"},"error_msg":{"description":"错误信息描述","example":"Invalid parameter: user_id.","type":"string"},"params":{"description":"错误参数列举","items":{"type":"string"},"maxItems":1,"minItems":0,"type":"array"},"reason":{"description":"错误原因","example":"Invalid parameter.","type":"string"}},"required":["advice","detail","error_code","error_msg","params","reason"],"type":"object"},"TaskOutput":{"description":"作业的输出配置,至少需要配置一项输出方式","properties":{"dis":{"$ref":"#/definitions/TaskOutputDis"},"event_center":{"default":false,"description":"输出方式是否选择为事件中心,选择 true或者1表示是,默认为false","type":"boolean"},"obs":{"$ref":"#/definitions/TaskOutputObs"},"webhook":{"$ref":"#/definitions/TaskOutputWebhook"}},"type":"object"},"TaskOutputDis":{"description":"输出为dis类型时的配置信息","properties":{"data_category":{"description":"任务输出数据类别的列表,选填,仅部分服务需要。当输出类型下有这个列表时,表示希望这个输出类型下存放dataCategory列表内的数据。\n【例如创建边缘人脸任务API中,输出结果支持data_category参数,取值范围为[FacaImage,OriginImage],分别表示是否发送人脸图和原始图】","example":["FaceImage"],"items":{"type":"string"},"maxItems":10,"minItems":0,"type":"array","uniqueItems":true},"stream_name":{"description":"DIS流名称,选用dis类型输出时必填,校验规则:^[-A-Za-z0-9_]{1,64}$。","example":"dis-test","maxLength":64,"pattern":"^[-A-Za-z0-9_]{1,64}$","type":"string"}},"required":["stream_name"],"type":"object"},"TaskOutputObs":{"description":"输出为obs类型时的配置信息","properties":{"bucket":{"description":"OBS桶名,选用obs类型输出时必填,校验规则:(pattern:“^\\[a-z0-9](?!.*[-.]\\[-.].*)(\\[a-z0-9-.]{1,61})\\[a-z0-9]$”)","example":"obs-iva","maxLength":63,"pattern":"^[a-z0-9](?!.*[-.][-.].*)([a-z0-9-.]{1,61})[a-z0-9]$","type":"string"},"data_category":{"description":"作业输出数据类别的列表,选填,仅部分服务需要。当输出类型下有这个列表时,表示希望这个输出类型下存放dataCategory列表内的数据","example":["FaceImage"],"items":{"type":"string"},"maxItems":10,"minItems":0,"type":"array","uniqueItems":true},"path":{"description":"OBS的路径,选用obs类型输出时必填,校验规则:^(?![/.\\s])(?!.*//.*)([^:*?\"<>|\\\\]{0,1023})(?<![.\\s])$","example":"output/","maxLength":1023,"pattern":"^(?![/.\\s])(?!.*//.*)([^:*?\"<>|\\\\]{0,1023})(?<![.\\s])$","type":"string"}},"required":["bucket","path"],"type":"object"},"TaskOutputWebhook":{"description":"输出为webhook类型时的配置信息","properties":{"data_category":{"description":"任务输出数据类别的列表,选填,仅部分服务需要。当输出类型下有这个列表时,表示希望这个输出类型下存放dataCategory列表内的数据","example":["FaceImage"],"items":{"type":"string"},"maxItems":10,"minItems":0,"type":"array","uniqueItems":true},"headers":{"description":"结果回调时需要携带的请求头,选用webhook类型输出时必填。整体呈json格式,以键值对的形式表示请求头和取值,至少1组,至多10组","example":{"appId":"10000000","appKey":"24bnaxxxxxxxxxxxxxxxj9sdf"},"properties":{},"type":"object"},"url":{"description":"结果回调地址,选用webhook类型输出时必填","example":"https://api.huawei.com/v1/tasks","format":"uri","maxLength":1000,"pattern":"^(https?|rtsp|rtmp|ftp|file):\\/\\/[-A-Za-z0-9+&@*#/%?=~_|!:,.;]+[-A-Za-z0-9+&@*#/%=~_|]$","type":"string"}},"required":["headers","url"],"type":"object"},"TaskSchedule":{"description":"定时任务参数,定时周期 仅支持周模式","properties":{"days_of_month":{"description":"任务会在一个月的哪几天执行,当且仅当计划任务类型为monthly时,该字段需填且必填。1~31分别指代一个月中的1日至31日,当前系统不支持该参数。","example":1,"items":{"format":"int32","maximum":31,"minimum":1,"type":"integer"},"type":"array"},"days_of_week":{"description":"任务会在一周的哪几天执行,当且仅当计划任务类型为weekly时,该字段需填且必填。1~7分别指代星期一至星期日","example":[1,2,3,4,5],"items":{"example":1,"format":"int32","maximum":7,"minimum":1,"type":"integer"},"maxItems":7,"minItems":1,"type":"array","uniqueItems":true},"periods":{"description":"时间段模式配置,指定周计划或者月计划中具体每天任务的执行时间段,至少需指定一个时间段","items":{"items":{"properties":{"begin_at":{"description":"单个时间段执行的起始时间,必填。其余计划任务类型时,格式为hh:mm:ss","example":"08:00:00","pattern":"^([0-9]{4}-[0-9]{2}-[0-9]{2}T)?[0-9]{2}:[0-9]{2}:[0-9]{2}$","type":"string"},"end_at":{"description":"单个时间段执行的结束时间,必填,其余计划任务类型时,格式为hh:mm:ss","example":"12:00:00","pattern":"^([0-9]{4}-[0-9]{2}-[0-9]{2}T)?[0-9]{2}:[0-9]{2}:[0-9]{2}$","type":"string"}},"required":["begin_at","end_at"],"type":"object"},"maxItems":10,"minItems":1,"type":"array"},"type":"array"},"timezone":{"description":"用户所处的时区,使用计划任务时必填。精确到分钟","example":"+08:00","pattern":"^[+-][0-9]{2}:[0-9]{2}$","type":"string"},"type":{"description":"计划任务的类型,使用计划任务时必填。可选类型weekly(每周执行)。","example":"weekly","pattern":"^(weekly|monthly)$","type":"string"}},"required":["timezone","type"],"type":"object"},"TaskServiceConfig":{"description":"任务运行时指定的自定义参数,由服务发布者定义","properties":{"common":{"description":"任务运行时指定的具体的自定义配置项,由服务发布者定义。整体呈json格式,具体配置项参见相应算法服务的说明","example":{"stream_direct":"reverse"},"properties":{},"type":"object"}},"type":"object"},"UpdateBatchTaskRequestBody":{"properties":{"batch_input":{"$ref":"#/definitions/BatchTaskInputDto","description":"任务的输入配置"},"config":{"$ref":"#/definitions/TaskServiceConfig","description":"任务配置参数"},"description":{"description":"任务的描述,选填。长度不超过500","example":"hello world!","maxLength":500,"minLength":0,"type":"string"},"is_saved_as_template":{"default":false,"description":"是否保存为模板","type":"boolean"},"name":{"description":"任务的名称,必填。仅能包含汉字、字母、数字、中划线和下划线,长度介于1~100之间","example":"task-test","pattern":"^[\\u4E00-\\u9FA5a-zA-Z0-9_-]{1,100}$","type":"string"},"output":{"$ref":"#/definitions/TaskOutput","description":"任务的输出配置"},"resource_order_id":{"description":"资源订单id,与关联算法挂钩。非商用白名单的算法 就不用填,商用算法就为必填项,需要满足正则表达式^[a-z0-9-_]{4,36}$。","pattern":"^[a-z0-9-_]{4,36}$","type":"string"},"schedule":{"$ref":"#/definitions/TaskSchedule","description":"定时任务参数"}},"type":"object"}},"description":null,"group_id":"4cefaac893e6418cb9df72b606bdf3e5","host":"vias.cn-north-4.myhuaweicloud.com","id":"505327537e03458bb015ae28d9092fb1","info_version":"v2","method":"put","name":"UpdateBatchTask","parameters":{},"paths":{"/v2/{project_id}/batch-tasks/{id}":{"put":{"description":"修改批量配置任务","operationId":"UpdateBatchTask","parameters":[{"description":"用户项目ID,获取方法参见[获取项目ID和名称](vias_03_0283.xml)","in":"path","name":"project_id","pattern":"^[a-zA-Z0-9-]{1,64}$","required":true,"type":"string"},{"description":"批量配置ID","in":"path","name":"id","pattern":"^[a-z0-9-_]{4,36}$","required":true,"type":"string"},{"description":"编辑批量配置请求体","in":"body","name":"requestBody","required":true,"schema":{"$ref":"#/definitions/UpdateBatchTaskRequestBody"}},{"description":"用户Token,获取方法参见[认证鉴权](vias_03_0009.xml)","in":"header","name":"X-Auth-Token","required":true,"type":"string"}],"responses":{"200":{"description":"批量操作响应体","examples":{"application/json":{"error_list":[],"failed_count":0,"id":"xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx","succeed_count":1,"total_count":1}},"schema":{"$ref":"#/definitions/BatchTaskResDto"}},"400":{"description":"请求错误","schema":{"$ref":"#/definitions/ErrorResponse"}},"500":{"description":"内部错误","schema":{"$ref":"#/definitions/ErrorResponse"}}},"summary":"修改批量配置任务","tags":["IBatchTaskController"],"x-is-registered":"Y","x-north-bound":true,"x-order":2,"x-request-examples-1":{"batch_input":{"video_source_group":[{"video_source_group_id":"xxxxxxx-xxxxxxx-xxxxxxx-xxxxx-xxxxxx","video_source_list":[{"video_source_id":"xxxxxxx-xxxxxxx-xxxxxxx-xxxxx-xxxxxx"}]}]},"config":{"common":{"fire_detection_sw":1,"render_result_sw":1,"smoke_detection_sw":1}},"description":"","is_saved_as_template":false,"manufacturer":"VIAS","name":"wdwdxx","output":{"webhook":{"headers":{"a":"a"},"url":"http://test"}},"priority":"low","service_name":"烟火演示算法","service_version":"1.0"},"x-request-examples-description-1":"修改配置名称为“wdwd”使用算法名为“烟火演示算法”版本为“1.0”厂商为“VIAS”不保存模板输入方式为“video_source”输出方式为“webhook”有相关算法配置的批量配置","x-request-examples-text-1":{"batch_input":{"video_source_group":[{"video_source_group_id":"xxxxxxx-xxxxxxx-xxxxxxx-xxxxx-xxxxxx","video_source_list":[{"video_source_id":"xxxxxxx-xxxxxxx-xxxxxxx-xxxxx-xxxxxx"}]}]},"config":{"common":{"fire_detection_sw":1,"render_result_sw":1,"smoke_detection_sw":1}},"description":"","is_saved_as_template":false,"manufacturer":"VIAS","name":"wdwdxx","output":{"webhook":{"headers":{"a":"a"},"url":"http://test"}},"priority":"low","service_name":"烟火演示算法","service_version":"1.0"},"x-request-examples-url-1":"/v2/{project_id}/batch-tasks/{id}","x-support-sdk":"Y"}}},"product_short":"VIAS","region_id":"cn-north-4","schemes":["HTTPS"],"security_definitions":null,"summary":"修改批量配置任务","tags":"任务中心","uri":null,"version":"2.0"}