{"base_path":null,"components":null,"consumes":"","definitions":{"ErrorResponse":{"description":"400,401,500等错误码响应","properties":{"advice":{"description":"建议","example":"Ensure that the entered parameter is valid.","type":"string"},"detail":{"description":"错误详情","type":"string"},"error_code":{"description":"错误码","example":"VIAS.00010001","type":"string"},"error_msg":{"description":"错误信息描述","example":"Invalid parameter: user_id.","type":"string"},"params":{"description":"错误参数列举","items":{"type":"string"},"maxItems":1,"minItems":0,"type":"array"},"reason":{"description":"错误原因","example":"Invalid parameter.","type":"string"}},"required":["advice","detail","error_code","error_msg","params","reason"],"type":"object"},"TaskInfoDto":{"properties":{"access_address":{"description":"接入地址","type":"string"},"algorithm_publish_id":{"description":"算法id","type":"string"},"company":{"description":"厂商","type":"string"},"config":{"$ref":"#/definitions/TaskServiceConfig"},"created_at":{"description":"任务创建的时间","example":"2020-01-01T08:00:00Z","type":"string"},"creator":{"description":"任务创建者的用户名","example":"user_test","pattern":"^.{1,100}$","type":"string"},"description":{"description":"任务的描述","example":"hello world!","maxLength":500,"minLength":0,"type":"string"},"device_id":{"description":"设备id","type":"string"},"error":{"description":"错误信息","properties":{"code":{"description":"错误码","maxLength":36,"minLength":8,"type":"string"},"message":{"description":"错误描述","maxLength":512,"minLength":2,"type":"string"}},"required":["code","message"],"type":"object"},"group_name":{"description":"分组名称,多个以逗号分隔","type":"string"},"id":{"description":"任务ID","example":"xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx","pattern":"^[0-9a-f]{32}$","type":"string"},"input":{"$ref":"#/definitions/TaskInput"},"name":{"description":"任务的名称","example":"task-test","pattern":"^[\\u4E00-\\u9FA5a-zA-Z0-9_-]{1,100}$","type":"string"},"output":{"$ref":"#/definitions/TaskOutputForDisplay"},"package_id":{"description":"算法包id","type":"string"},"project_id":{"description":"任务创建者的项目ID","example":"xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx","pattern":"^[a-zA-Z0-9-]{1,64}$","type":"string"},"release_id":{"description":"任务对应服务的ID","pattern":"^[a-f0-9]{8}-[a-f0-9]{4}-[a-f0-9]{4}-[a-f0-9]{4}-[a-f0-9]{12}$","type":"string"},"resource_order_id":{"description":"资源订单id","type":"string"},"schedule":{"$ref":"#/definitions/TaskSchedule"},"schedule_status":{"description":"计划任务的状态,分别为ACTIVATED(激活),INACTIVATED(未激活)","example":"INACTIVATED","pattern":"^(ACTIVATED|INACTIVATED)$","type":"string"},"service_id":{"description":"任务对应服务的ID","pattern":"^[a-f0-9]{8}-[a-f0-9]{4}-[a-f0-9]{4}-[a-f0-9]{4}-[a-f0-9]{12}$","type":"string"},"state":{"description":"任务当前的状态,分别为PENDING(等待中),RECOVERING(恢复中),STARTING(启动中),UPGRADING(升级中),CREATE_FAILED(创建失败),START_FAILED(启动失败),RUNNING(运行中),STOPPING(停止中),STOPPED(已停止),ABNORMAL(异常),SUCCEEDED(运行成功),FAILED(运行失败),DELETING(删除中),FREEZING(冻结中),FROZEN(已冻结)","example":"RUNNING","pattern":"^(PENDING|RECOVERING|STARTING|UPGRADING|CREATE_FAILED|START_FAILED|RUNNING|STOPPING|STOPPED|ABNORMAL|SUCCEEDED|FAILED|DELETING|FREEZING|FROZEN)$","type":"string"},"status":{"description":"任务状态的详情信息,仅部分状态会有详情信息","example":"Waiting for available computing resource.","maxLength":4096,"minLength":0,"type":"string"},"task_config":{"description":"任务算法配置","type":"string"},"title":{"description":"算法中文名称","type":"string"},"type":{"description":"cloud或edge","type":"string"},"updated_at":{"description":"任务最近一次状态更新的时间","example":"2020-01-01T08:00:00Z","type":"string"},"video_source_name":{"description":"视频源名称","type":"string"}},"required":["company","created_at","creator","id","input","name","output","project_id","service_id","state","updated_at","video_source_name"],"type":"object"},"TaskInput":{"description":"任务的输入配置,必填","properties":{"data":{"description":"任务的输入详情,必填。针对不同的输入类型有不同的配置。创建时允许填写多路输入,但更新时只允许填写一路输入。\n当输入类型为:obs,需要配置 bucket,path , index 。例如:  \"bucket\": \"aicam\", \"path\": \"3rdpartylicenses.txt\", \"index\": 0 \n当输入类型为:url,需要配置 url, index 。例如: \"url\": \"https://xxx-xxx.com\", \"index\": 0\n当输入类型为:restful,需要配置 certificate_check, rtsp_path_in_response, url, index, headers 。例如:\"certificate_check\": true, \"url\": \"https://hsaij-dasahbi.com\", \"rtsp_path_in_response\": \"data/url\", \"index\": 0, \"headers\": { \"AAA\": \"AAA\" }\n当输入类型为:vcn,需要配置 device_id, stream_type, index。例如:\"device_id\": \"21356478954612546874#gdhjkiushdgdksjhslmhscjsckjhdbnk\", \"stream_type\": 1, \"index\": 0\n当输入类型为:EdgeCamera,需要配置 id, index 例如:\"id\": \"007cdafc-6000-47ce-b0e3-870b4a0db65e\",\"index\": 0","items":{"$ref":"#/definitions/TaskInputData"},"maxItems":50,"minItems":1,"type":"array"},"type":{"description":"任务的输入类型,创建时必填,视频源类型为video_source 时 不支持切换为其他的type。创建时可选类型有\nobs(对象存储服务存储的文件  仅云上任务支持,支持输出到webhook),\nurl(指定的文件地址或取流地址  仅云上任务支持,支持输出到webhook),\nedgecamera(绑定在IEF的边缘摄像头  仅边缘任务支持,支持输出到webhook),\nrestful(从自定义的流媒体服务器通过Restful接口获取取流地址  云上和边缘任务均支持,支持输出到webhook),\nvcn(VCN设备  仅边缘任务支持),\nvideo_source(使用VIAS平台视频中心管理的视频源,云上和边缘任务均支持),\n建议使用video_source类型,其他类型为了兼容老业务,后续将废弃。\n 枚举值:\n - video_source\n - obs (不建议使用,后续废弃)\n - url (不建议使用,后续废弃)\n - edgecamera (不建议使用,后续废弃)\n - restful (不建议使用,后续废弃)\n - vcn (不建议使用,后续废弃)","example":"obs","pattern":"^(video_source|obs|url|edgecamera|restful|vcn)$","type":"string"},"vcn":{"$ref":"#/definitions/TaskInputVcn"}},"required":["data","type"],"type":"object"},"TaskInputData":{"description":"输入数据的配置信息","properties":{"bucket":{"description":"OBS桶名,当输入为obs类型时必填","example":"obs-iva","maxLength":64,"pattern":"^[a-z0-9](?!.*[-.][-.].*)([a-z0-9-.]{1,61})[a-z0-9]$","type":"string"},"certificate_check":{"default":false,"description":"是否需要对https请求进行证书校验,当输入为edgerestful类型时必填。取值为true或者false。","example":false,"type":"boolean"},"device_id":{"description":"VCN设备ID,当输入为vcn类型时必填","example":"46459876132169871364#xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx","pattern":"^([0-9]{20}[#]{1}[a-zA-Z0-9]{32})|([0-9]{20}[#]{1}[0-9]{1,10}[#]{1}[a-zA-Z0-9]{32})$","type":"string"},"headers":{"description":"获取视频流地址的restful请求携带的请求头,当输入为edgerestful类型时可选。整体呈json格式,以键值对的形式表示请求头和取值,最多允许10组。","example":{"Content-Type":"application/json"},"properties":{},"type":"object"},"id":{"description":"IEF挂载的边缘设备的ID,当输入为edgecamera类型时必填","example":"xxxxxxx-xxxxxxx-xxxxxxx-xxxxx-xxxxxx","maxLength":63,"pattern":"^[a-zA-Z0-9][a-zA-Z0-9_-]{0,63}$","type":"string"},"path":{"description":"OBS的路径,当输入为obs类型时必填","example":"/input/test.mp4","maxLength":1023,"pattern":"^(?![/.\\s])(?!.*//.*)([^:*?\"<>|\\\\]{0,1023})(?<![.\\s])$","type":"string"},"rtsp_path_in_response":{"description":"restful请求返回的body中,视频流地址的路径,当输入为edgerestful类型时必填。长度不超过1024","example":"data/url","maxLength":1024,"pattern":"^([-A-Za-z0-9+&?=~_][-A-Za-z0-9+&/?=~_]+[-A-Za-z0-9+&/?=~_]|[A-Za-z]+)$","type":"string"},"stream_name":{"description":"视频流名称","example":"stream-test","pattern":"^[-A-Za-z0-9_]{1,80}$","type":"string"},"stream_type":{"description":"准备进行分析的码流,当输入为vcn类型时选填。取值范围为1~3,其中1代表主码流,2代表子码流1,3代表子码流2","example":1,"format":"int32","maximum":3,"minimum":1,"type":"integer"},"url":{"description":"url输入源的地址或者获取视频流地址的restful请求地址,当输入为url类型或者edgerestful类型时必填。长度不超过1000","example":"https://livestream.com/live/stream-test","format":"uri","maxLength":1000,"pattern":"^(https?|rtsp|rtmp|ftp|file):\\/\\/[-A-Za-z0-9+&@*#/%?=~_|!:,.;]+[-A-Za-z0-9+&@*#/%=~_|]$","type":"string"},"video_source_id":{"description":"视频源id,当输入类型为video_source时必填。","pattern":"^[0-9a-z-_]{4,36}$","type":"string"}},"type":"object"},"TaskInputVcn":{"description":"VCN服务器信息,仅输入类型为vcn时需填且必填","properties":{"ip":{"description":"VCN服务器的IP地址,仅输入类型为vcn时需填且必填","example":"10.10.10.10","format":"ipv4","type":"string"},"password":{"description":"VCN服务器的与账号对应的密码,仅输入类型为vcn时需填且必填,需要满足正则表达式^.{1,1000}$。","example":"xxxxxxxxxx","pattern":"^.{1,1000}$","type":"string"},"port":{"description":"VCN服务器的端口号,仅输入类型为vcn时需填且必填","example":60,"format":"int32","maximum":65535,"minimum":0,"type":"integer"},"username":{"description":"VCN服务器的账号名,仅输入类型为vcn时需填且必填,需要满足正则表达式^.{1,100}$。","example":"user_test","pattern":"^.{1,100}$","type":"string"}},"required":["ip","password","port","username"],"type":"object"},"TaskOutputDis":{"description":"输出为dis类型时的配置信息","properties":{"data_category":{"description":"任务输出数据类别的列表,选填,仅部分服务需要。当输出类型下有这个列表时,表示希望这个输出类型下存放dataCategory列表内的数据。\n【例如创建边缘人脸任务API中,输出结果支持data_category参数,取值范围为[FacaImage,OriginImage],分别表示是否发送人脸图和原始图】","example":["FaceImage"],"items":{"type":"string"},"maxItems":10,"minItems":0,"type":"array","uniqueItems":true},"stream_name":{"description":"DIS流名称,选用dis类型输出时必填,校验规则:^[-A-Za-z0-9_]{1,64}$。","example":"dis-test","maxLength":64,"pattern":"^[-A-Za-z0-9_]{1,64}$","type":"string"}},"required":["stream_name"],"type":"object"},"TaskOutputForDisplay":{"description":"作业的输出配置展示","properties":{"dis":{"$ref":"#/definitions/TaskOutputDis"},"event_center":{"description":"输出类型是否关联事件中心","type":"boolean"},"obs":{"$ref":"#/definitions/TaskOutputObs"},"webhook":{"$ref":"#/definitions/TaskOutputWebhook"}},"type":"object"},"TaskOutputObs":{"description":"输出为obs类型时的配置信息","properties":{"bucket":{"description":"OBS桶名,选用obs类型输出时必填,校验规则:(pattern:“^\\[a-z0-9](?!.*[-.]\\[-.].*)(\\[a-z0-9-.]{1,61})\\[a-z0-9]$”)","example":"obs-iva","maxLength":63,"pattern":"^[a-z0-9](?!.*[-.][-.].*)([a-z0-9-.]{1,61})[a-z0-9]$","type":"string"},"data_category":{"description":"作业输出数据类别的列表,选填,仅部分服务需要。当输出类型下有这个列表时,表示希望这个输出类型下存放dataCategory列表内的数据","example":["FaceImage"],"items":{"type":"string"},"maxItems":10,"minItems":0,"type":"array","uniqueItems":true},"path":{"description":"OBS的路径,选用obs类型输出时必填,校验规则:^(?![/.\\s])(?!.*//.*)([^:*?\"<>|\\\\]{0,1023})(?<![.\\s])$","example":"output/","maxLength":1023,"pattern":"^(?![/.\\s])(?!.*//.*)([^:*?\"<>|\\\\]{0,1023})(?<![.\\s])$","type":"string"}},"required":["bucket","path"],"type":"object"},"TaskOutputWebhook":{"description":"输出为webhook类型时的配置信息","properties":{"data_category":{"description":"任务输出数据类别的列表,选填,仅部分服务需要。当输出类型下有这个列表时,表示希望这个输出类型下存放dataCategory列表内的数据","example":["FaceImage"],"items":{"type":"string"},"maxItems":10,"minItems":0,"type":"array","uniqueItems":true},"headers":{"description":"结果回调时需要携带的请求头,选用webhook类型输出时必填。整体呈json格式,以键值对的形式表示请求头和取值,至少1组,至多10组","example":{"appId":"10000000","appKey":"24bnaxxxxxxxxxxxxxxxj9sdf"},"properties":{},"type":"object"},"url":{"description":"结果回调地址,选用webhook类型输出时必填","example":"https://api.huawei.com/v1/tasks","format":"uri","maxLength":1000,"pattern":"^(https?|rtsp|rtmp|ftp|file):\\/\\/[-A-Za-z0-9+&@*#/%?=~_|!:,.;]+[-A-Za-z0-9+&@*#/%=~_|]$","type":"string"}},"required":["headers","url"],"type":"object"},"TaskSchedule":{"description":"定时任务参数,定时周期 仅支持周模式","properties":{"days_of_month":{"description":"任务会在一个月的哪几天执行,当且仅当计划任务类型为monthly时,该字段需填且必填。1~31分别指代一个月中的1日至31日,当前系统不支持该参数。","example":1,"items":{"format":"int32","maximum":31,"minimum":1,"type":"integer"},"type":"array"},"days_of_week":{"description":"任务会在一周的哪几天执行,当且仅当计划任务类型为weekly时,该字段需填且必填。1~7分别指代星期一至星期日","example":[1,2,3,4,5],"items":{"example":1,"format":"int32","maximum":7,"minimum":1,"type":"integer"},"maxItems":7,"minItems":1,"type":"array","uniqueItems":true},"periods":{"description":"时间段模式配置,指定周计划或者月计划中具体每天任务的执行时间段,至少需指定一个时间段","items":{"items":{"properties":{"begin_at":{"description":"单个时间段执行的起始时间,必填。其余计划任务类型时,格式为hh:mm:ss","example":"08:00:00","pattern":"^([0-9]{4}-[0-9]{2}-[0-9]{2}T)?[0-9]{2}:[0-9]{2}:[0-9]{2}$","type":"string"},"end_at":{"description":"单个时间段执行的结束时间,必填,其余计划任务类型时,格式为hh:mm:ss","example":"12:00:00","pattern":"^([0-9]{4}-[0-9]{2}-[0-9]{2}T)?[0-9]{2}:[0-9]{2}:[0-9]{2}$","type":"string"}},"required":["begin_at","end_at"],"type":"object"},"maxItems":10,"minItems":1,"type":"array"},"type":"array"},"timezone":{"description":"用户所处的时区,使用计划任务时必填。精确到分钟","example":"+08:00","pattern":"^[+-][0-9]{2}:[0-9]{2}$","type":"string"},"type":{"description":"计划任务的类型,使用计划任务时必填。可选类型weekly(每周执行)。","example":"weekly","pattern":"^(weekly|monthly)$","type":"string"}},"required":["timezone","type"],"type":"object"},"TaskServiceConfig":{"description":"任务运行时指定的自定义参数,由服务发布者定义","properties":{"common":{"description":"任务运行时指定的具体的自定义配置项,由服务发布者定义。整体呈json格式,具体配置项参见相应算法服务的说明","example":{"stream_direct":"reverse"},"properties":{},"type":"object"}},"type":"object"}},"description":null,"group_id":"4cefaac893e6418cb9df72b606bdf3e5","host":"vias.cn-north-4.myhuaweicloud.com","id":"f33edbbe04924831a3625b551b7b6c83","info_version":"v2","method":"get","name":"ShowTaskInfo","parameters":{},"paths":{"/v2/{project_id}/tasks/{task_id}":{"get":{"description":"用于获取视频智能分析任务详情","operationId":"ShowTaskInfo","parameters":[{"description":"用户项目ID,获取方法参见[获取项目ID和名称](vias_03_0283.xml)","in":"path","name":"project_id","pattern":"[a-zA-Z0-9-]{1,64}$","required":true,"type":"string"},{"description":"作业ID","in":"path","name":"task_id","pattern":"^[a-z0-9-_]{4,36}$","required":true,"type":"string"},{"description":"用户Token,获取方法参见[认证鉴权](vias_03_0009.xml)","in":"header","name":"X-Auth-Token","required":true,"type":"string"}],"responses":{"200":{"description":"任务详情信息","examples":{"application/json":{"config":{"common":{}},"created_at":"2023-06-06T06:59:33.024Z","creator":"test","event_type":0,"id":"xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx","input":{"data":[{"video_source_id":"xxxxxxx-xxxxxxx-xxxxxxx-xxxxx-xxxxxx"}],"type":"video_source"},"name":"qqqq_task","output":{"event_center":true},"package_id":"xxxxxxx-xxxxxxx-xxxxxxx-xxxxx-xxxxxx","priority":"low","project_id":"xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx","release_id":"xxxxxxx-xxxxxxx-xxxxxxx-xxxxx-xxxxxx","service_id":"xxxxxxx-xxxxxxx-xxxxxxx-xxxxx-xxxxxx","state":"PENDING","steal":0,"task_config":"<?xml version=\"1.0\" encoding=\"UTF-8\"?><algorithm><config><common><param titleCn=\"platform\" name=\"platform\" required=\"false\" titleEn=\"platform\" type=\"Object\"><param titleCn=\"project_id\" name=\"project_id\" required=\"false\" titleEn=\"project_id\" type=\"String\"/><param titleCn=\"domain_name\" name=\"domain_name\" required=\"false\" titleEn=\"domain_name\" type=\"String\"/><param titleCn=\"agency_name\" name=\"agency_name\" required=\"false\" titleEn=\"agency_name\" type=\"String\"/><param titleCn=\"domain_id\" name=\"domain_id\" required=\"false\" titleEn=\"domain_id\" type=\"String\"/><param titleCn=\"task_id\" name=\"task_id\" required=\"false\" titleEn=\"task_id\" type=\"String\"/></param></common></config></algorithm>","type":"0","updated_at":"2023-06-06T06:59:33.024Z","video_source_name":"url_test"}},"schema":{"$ref":"#/definitions/TaskInfoDto"}},"400":{"description":"请求错误","schema":{"$ref":"#/definitions/ErrorResponse"}},"500":{"description":"内部错误","schema":{"$ref":"#/definitions/ErrorResponse"}}},"summary":"获取任务详情","tags":["ITaskController"],"x-is-registered":"Y","x-north-bound":true,"x-order":5,"x-request-examples-1":"https://{endpoint}/v2/{project_id}/tasks/{task_id}?","x-request-examples-description-1":"获取任务详情,展示任务的名称,输入方式,输出方式等任务信息","x-request-examples-text-1":"https://{endpoint}/v2/{project_id}/tasks/{task_id}?","x-request-examples-url-1":"/v2/{project_id}/tasks/{task_id}","x-support-sdk":"Y"}}},"product_short":"VIAS","region_id":"cn-north-4","schemes":["HTTPS"],"security_definitions":null,"summary":"获取任务详情","tags":"任务中心","uri":null,"version":"2.0"}