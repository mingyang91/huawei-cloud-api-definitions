{"base_path":"/","components":null,"consumes":"[\"application/json;charset=UTF-8\"]","definitions":{"LdApiCreate":{"properties":{"api_signature_id":{"description":"后端API为签名认证时绑定的签名密钥编号","maxLength":64,"minLength":1,"pattern":"^[A-Za-z0-9-_]{0,63}$","type":"string"},"content_type":{"default":"json","description":"后端API返回类型","enum":["json","xml","stream"],"type":"string"},"description":{"description":"后端API描述。\n\n不支持<,>字符","maxLength":1000,"minLength":0,"type":"string"},"method":{"description":"后端API请求方法。\n\n支持GET、PUT、POST、DELETE\n\n更新后端API时,status=4为后端API的已部署状态,该状态下后端API请求方法不能修改。","enum":["GET","PUT","POST","DELETE"],"type":"string"},"name":{"description":"后端API名称。\n\n支持汉字、英文、数字、中划线、下划线、点、斜杠、中英文格式下的小括号和冒号、中文格式下的顿号,且只能以英文、汉字和数字开头。","maxLength":100,"minLength":3,"pattern":"^([a-zA-Z0-9]|[\\u4e00-\\u9fa5])([a-zA-Z0-9:._()\\\\//-]|[\\u4e00-\\u9fa5\\uff08\\uff09\\uff1a\\u3001]){2,99}$","type":"string"},"parameters":{"description":"后端API的请求参数列表","items":{"$ref":"#/definitions/LdApiParameter"},"type":"array"},"path":{"description":"后端API请求路径。\n\n支持英文、数字、中划线、下划线、点等,且以斜杠(/)开头。\n\n更新后端API时,status=4为后端API的已部署状态,该状态下后端API请求路径不能修改。","maxLength":256,"minLength":2,"pattern":"^\\\\/[\\\\/\\\\.a-zA-Z0-9_-]{1,255}$","type":"string"},"return_format":{"default":false,"description":"API响应信息是否格式化\n\ntrue: 对响应信息进行格式化\n\nfalse:对响应信息格式化不进行格式化","type":"boolean"},"roma_app_id":{"description":"后端API归属的集成应用编号\n\n更新后端API时,status=4为后端API的已部署状态,该状态下后端API归属的集成应用编号不能修改。","maxLength":65,"minLength":1,"pattern":"^[a-zA-Z0-9-_]{0,64}$","type":"string"},"version":{"description":"后端API版本\n\n支持英文,数字,下划线,中划线,点。","maxLength":63,"minLength":1,"pattern":"^[a-zA-Z0-9_.-]{1,63}$","type":"string"}},"required":["name","path","method","version","content_type","roma_app_id"]},"LdApiInfo":{"allOf":[{"$ref":"#/definitions/LdApiCreate"},{"properties":{"created_time":{"description":"后端API创建时间","format":"date-time","type":"string"},"id":{"description":"后端API编号","type":"string"},"instance":{"description":"后端API所属实例编号","type":"string"},"modified_time":{"description":"后端API修改时间","format":"date-time","type":"string"},"roma_app_name":{"description":"后端API归属的集成应用名称","type":"string"},"scripts":{"description":"后端API脚本信息","items":{"$ref":"#/definitions/LdApiScript"},"type":"array"},"status":{"description":"后端API状态:\n- 1:待开发\n- 3:开发中\n- 4:已部署","enum":[1,3,4],"format":"int32","type":"integer"},"type":{"description":"后端API类型:\n- data:数据后端\n- function: 函数后端","enum":["data","function"],"type":"string"}},"type":"object"}],"description":"后端API详情"},"LdApiParameter":{"description":"后端API请求参数","properties":{"default":{"description":"参数默认值","maxLength":4000,"type":"string"},"description":{"description":"参数描述\n\n不支持<,>字符","maxLength":255,"minLength":0,"type":"string"},"in":{"description":"该参数在调用API时候所放的位置:\n- Headers :放于请求头\n- Parameters :放于请求参数\n- Body:放于请求体","enum":["Headers","Parameters","Body"],"type":"string"},"name":{"description":"参数名称:\n- 参数位于Headers、 Parameters时,用户自行定义,支持英文、数字、点、中划线、下划线,且需要英文开头,不区分大小写。\n- 参数位于Body时候,参数以application/json、application/xml、application/text为名,但实际是以请求body里的键值对作为参数名和参数值,比如请求消息样例,参数名为application/json,参数值为{\\\"table\\\":\\\"apic01\\\",\\\"id\\\":\\\"1\\\"},后端取table:apic01,id:1这两个键值对作为入参。\n- 注意:定义参数不要重名,否则会覆盖掉,当Headers、Parameters重复时候,Parameters会被覆盖,当Parameters和Body里的键值对重复时候,Parameters会被覆盖。","maxLength":32,"minLength":1,"pattern":"^[a-zA-Z][a-zA-Z0-9._\\\\/-]{0,31}$","type":"string"},"required":{"default":false,"description":"参数是否必须。true:必须,false:不必须","type":"boolean"}},"required":["name","in"]},"LdApiScript":{"allOf":[{"$ref":"#/definitions/LdApiScriptBase"},{"properties":{"created_time":{"description":"后端API脚本创建时间","format":"date-time","type":"string"},"modified_time":{"description":"后端API脚本修改时间","format":"date-time","type":"string"}},"type":"object"}]},"LdApiScriptBase":{"properties":{"content":{"description":"API脚本内容\n\n请对脚本进行base64编码","maxLength":100000,"minLength":1,"type":"string"},"ds_id":{"description":"数据源编号,当api_type = data时,必选","type":"string"},"ds_name":{"description":"数据源名称","type":"string"},"ds_type":{"description":"数据源类型:\n\n- oracle:oracle数据源类型\n\n- mysql:mysql数据源类型\n\n- mongodb:mongodb数据源类型\n\n- redis:redis数据源类型\n\n- postgresql:postgresql/opengauss数据源类型\n\n- hive:hive数据源类型\n\n- mssql:sqlserver数据源类型\n\n- sqlserver:sqlserver数据源类型\n\n- dws:dws数据源类型\n\n- gauss100:gauss100数据源类型\n\n- zenith:zenith数据源类型","enum":["oracle","mysql","mongodb","redis","postgresql","hive","mssql","sqlserver","dws","gauss100","zenith"],"type":"string"},"enable_preparestatement":{"default":false,"description":"数据脚本是否预编译,当api_type = data时有效","type":"boolean"},"enable_result_paging":{"default":false,"description":"数据脚本是否结果分页,当api_type = data时有效","type":"boolean"},"object_name":{"description":"返回对象。","maxLength":32,"minLength":1,"pattern":"^([A-Za-z])([A-Za-z0-9_-]){0,31}$","type":"string"},"type":{"description":"脚本类型\n- SQL:sql语句\n- SP:存储过程","type":"string"}},"required":["content","object_name"]},"LdApiScriptCreate":{"properties":{"api_type":{"description":"API类型\n- data:数据API\n- function:函数API","enum":["data","function"],"type":"string"},"scripts":{"description":"API脚本信息列表","items":{"$ref":"#/definitions/LdApiScriptBase"},"type":"array"}}},"ResponseModel":{"properties":{"error_code":{"description":"错误码","type":"string"},"error_msg":{"description":"错误描述","type":"string"}},"required":["error_code","error_msg"]}},"description":null,"group_id":"025d125ee4da4956af037c3315e94b30","host":"roma.cn-north-4.myhuaweicloud.com","id":"40e395cbc5fd480b9f01627e4d62358f","info_version":"v2","method":"post","name":"CreateLiveDataApiScriptV2","parameters":{"apic_instance_id":{"description":"实例ID","in":"path","name":"instance_id","required":true,"type":"string","x-example":"f0fa1789-3b76-433b-a787-9892951c620e"},"apic_ld_api_id":{"description":"后端API的编号","in":"path","name":"ld_api_id","required":true,"type":"string","x-example":"bd42841c20184da6bbf457c6d8a06e37"},"apic_project_id":{"description":"项目ID,获取方式请参见API参考的“附录 > 获取项目ID”章节。","in":"path","name":"project_id","required":true,"type":"string","x-example":"73d69ae0cfcf460190522d06b60f05ad"},"apic_x_auth_token":{"description":"用户Token。通过调用IAM服务获取用户Token接口获取(响应消息头中X-Subject-Token的值)。","in":"header","name":"X-Auth-Token","required":true,"type":"string","x-example":"MIIDkgYJKoZIhvcNAQcCoIIDgzCCXXXXXX..."}},"paths":{"/v2/{project_id}/apic/instances/{instance_id}/livedata-apis/{ld_api_id}/scripts":{"post":{"description":"在某个实例中创建后端API脚本。","operationId":"CreateLiveDataApiScriptV2","parameters":[{"$ref":"#/parameters/apic_x_auth_token"},{"$ref":"#/parameters/apic_project_id"},{"$ref":"#/parameters/apic_instance_id"},{"$ref":"#/parameters/apic_ld_api_id"},{"description":"创建后端API脚本请求体","in":"body","name":"CreateLiveDataApiScriptV2RequestBody","required":true,"schema":{"$ref":"#/definitions/LdApiScriptCreate"}}],"responses":{"200":{"description":"OK","examples":{"application/json":{"content_type":"json","created_time":"2020-09-18T09:25:59Z","description":"","id":"bd42841c20184da6bbf457c6d8a06e37","instance":"f0fa1789-3b76-433b-a787-9892951c620e","method":"GET","modified_time":"2020-09-18T09:25:59Z","name":"livedata_api_demo","parameters":[],"path":"/test/function","return_format":false,"roma_app_id":"98df09fb-d459-4cbf-83a7-2b55ca6f3d5d","scripts":[{"content":"ZnVuY3Rpb24gZXhlY3V0ZShkYXRhKSB7CiAgICByZXR1cm4gIkhlbGxvIHdvcmxkISIKfQ==","created_time":"2020-09-19T06:29:35Z","modified_time":"2020-09-19T06:29:35Z","object_name":"fun","type":"SQL"}],"status":1,"type":"function","version":"1.0.1"}},"schema":{"$ref":"#/definitions/LdApiInfo"}},"400":{"description":"Bad Request","examples":{"application/json":{"error_code":"APIG.2011","error_msg":"Invalid parameter value,parameterName:id. Please refer to the support documentation"}},"schema":{"$ref":"#/definitions/ResponseModel"}},"401":{"description":"Unauthorized","examples":{"application/json":{"error_code":"APIG.1002","error_msg":"Incorrect token or token resolution failed"}},"schema":{"$ref":"#/definitions/ResponseModel"}},"403":{"description":"Forbidden","examples":{"application/json":{"error_code":"APIG.1005","error_msg":"No permissions to request this method"}},"schema":{"$ref":"#/definitions/ResponseModel"}},"404":{"description":"Not Found","examples":{"application/json":{"error_code":"APIG.3081","error_msg":"authorizer with id: 0d982c1ac3da493dae47627b6439fc5c not found"}},"schema":{"$ref":"#/definitions/ResponseModel"}},"500":{"description":"Internal Server Error","examples":{"application/json":{"error_code":"APIG.9999","error_msg":"System error"}},"schema":{"$ref":"#/definitions/ResponseModel"}}},"summary":"创建后端API脚本","tags":["自定义后端服务"],"x-api-version":"v2","x-apigateway-request-type":"public","x-hybridcloud":true,"x-is-registered":"Y","x-open-region-cloud":"hc,hcso","x-order":6,"x-request-examples-1":{"api_type":"function","scripts":[{"content":"ZnVuY3Rpb24gZXhlY3V0ZShkYXRhKSB7CiAgICByZXR1cm4gIkhlbGxvIHdvcmxkISIKfQ==","object_name":"fun","type":"SQL"}]},"x-request-examples-description-1":"为指定自定义后端创建脚本,后端类型为函数后端,脚本类型为SQL","x-romaconnect-mode":"huaweicloud,hybrid,on-premise","x-support-sdk":"Y"}}},"product_short":"ROMA","region_id":"cn-north-4","schemes":["HTTPS"],"security_definitions":null,"summary":"创建后端API脚本","tags":"自定义后端服务","uri":null,"version":"2.0"}