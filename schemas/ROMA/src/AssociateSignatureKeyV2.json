{"base_path":"/","components":null,"consumes":"[\"application/json;charset=UTF-8\"]","definitions":{"ResponseModel":{"properties":{"error_code":{"description":"错误码","type":"string"},"error_msg":{"description":"错误描述","type":"string"}},"required":["error_code","error_msg"]},"SignApiBinding":{"properties":{"publish_ids":{"description":"API的发布记录编号","example":["eea73cde015940908ae0117d67bf7330","ddd73cde017890908ae0117d67bf7330"],"items":{"type":"string"},"type":"array"},"sign_id":{"description":"签名密钥编号","example":"3a793b65a9034bdfae08924f149bfb4a","type":"string"}},"required":["sign_id","publish_ids"]},"SignApiBindingBase":{"properties":{"api_id":{"description":"API编号","type":"string"},"api_name":{"description":"API名称","type":"string"},"api_remark":{"description":"API描述","type":"string"},"api_type":{"description":"API类型","format":"int32","type":"integer"},"binding_time":{"description":"绑定时间","format":"date-time","type":"string"},"env_id":{"description":"API所属环境的编号","type":"string"},"env_name":{"description":"API所属环境的名称","type":"string"},"group_name":{"description":"API所属分组的名称","type":"string"},"id":{"description":"绑定关系的ID","type":"string"},"publish_id":{"description":"API的发布编号","type":"string"},"sign_id":{"description":"签名密钥的编号","type":"string"},"sign_name":{"description":"签名密钥的名称。支持汉字,英文,数字,下划线,且只能以英文和汉字开头,3 ~ 64字符。\n> 中文字符必须为UTF-8或者unicode编码。","example":"signature01","type":"string"}}},"SignApiBindingInfo":{"allOf":[{"$ref":"#/definitions/SignApiBindingBase"},{"properties":{"sign_key":{"description":"签名密钥的key。\n- hmac类型的签名密钥key:支持英文,数字,下划线,中划线,且只能以英文字母或数字开头,8 ~ 32字符。未填写时后台自动生成。\n- basic类型的签名密钥key:支持英文,数字,下划线,中划线,且只能以英文字母开头,4 ~ 32字符。未填写时后台自动生成。\n- public_key类型的签名密钥key:支持英文,数字,下划线,中划线,+,/,=,可以英文字母,数字,+,/开头,8 ~ 512字符。未填写时后台自动生成。\n- aes类型的签名密钥key:支持英文,数字,下划线,中划线,!,@,#,$,%,+,/,=,可以英文字母,数字,+,/开头,签名算法为aes-128-cfb时为16个字符,签名算法为aes-256-cfb时为32个字符。未填写时后台自动生成。","example":"abcd_123456789123456","type":"string"},"sign_secret":{"description":"签名密钥的密钥。\n- hmac类型的签名密钥key:支持英文,数字,下划线,中划线,!,@,#,$,%,且只能以英文字母或数字开头,16 ~ 64字符。未填写时后台自动生成。\n- basic类型的签名密钥key:支持英文,数字,下划线,中划线,!,@,#,$,%,且只能以英文字母或数字开头,8 ~ 64字符。未填写时后台自动生成。\n- public_key类型的签名密钥key:支持英文,数字,下划线,中划线,!,@,#,$,%,+,/,=,可以英文字母,数字,+,/开头,15 ~ 2048字符。未填写时后台自动生成。\n- aes类型签名密钥使用的向量:支持英文,数字,下划线,中划线,!,@,#,$,%,+,/,=,可以英文字母,数字,+,/开头,16个字符。未填写时后台自动生成。","example":"sig**********ret","type":"string"},"sign_type":{"description":"签名密钥类型:\n- hmac\n- basic\n- public_key\n- aes\n\nbasic类型需要实例升级到对应版本,若不存在可联系技术工程师升级。\n\npublic_key类型开启实例配置public_key才可使用,实例特性配置详情请参考“附录 > 实例支持的APIC特性”,如确认实例不存在public_key配置可联系技术工程师开启。\n\naes类型需要实例升级到对应版本,若不存在可联系技术工程师升级。","enum":["hmac","basic","public_key","aes"],"example":"hmac","type":"string"}},"type":"object"}]},"SignApiBindingResult":{"properties":{"bindings":{"description":"API与签名密钥的绑定关系列表","items":{"$ref":"#/definitions/SignApiBindingInfo"},"type":"array"}}}},"description":null,"group_id":"025d125ee4da4956af037c3315e94b30","host":"roma.cn-north-4.myhuaweicloud.com","id":"c53745bd04514c12b149295b389ad510","info_version":"v2","method":"post","name":"AssociateSignatureKeyV2","parameters":{"apic_instance_id":{"description":"实例ID","in":"path","name":"instance_id","required":true,"type":"string","x-example":"f0fa1789-3b76-433b-a787-9892951c620e"},"apic_project_id":{"description":"项目ID,获取方式请参见API参考的“附录 > 获取项目ID”章节。","in":"path","name":"project_id","required":true,"type":"string","x-example":"73d69ae0cfcf460190522d06b60f05ad"},"apic_x_auth_token":{"description":"用户Token。通过调用IAM服务获取用户Token接口获取(响应消息头中X-Subject-Token的值)。","in":"header","name":"X-Auth-Token","required":true,"type":"string","x-example":"MIIDkgYJKoZIhvcNAQcCoIIDgzCCXXXXXX..."}},"paths":{"/v2/{project_id}/apic/instances/{instance_id}/sign-bindings":{"post":{"description":"签名密钥创建后,需要绑定到API才能生效。\n\n\n将签名密钥绑定到API后,则服务集成请求后端服务时就会使用这个签名密钥进行加密签名,后端服务可以校验这个签名来验证请求来源。\n\n\n将指定的签名密钥绑定到一个或多个已发布的API上。同一个API发布到不同的环境可以绑定不同的签名密钥;一个API在发布到特定环境后只能绑定一个签名密钥。","operationId":"AssociateSignatureKeyV2","parameters":[{"$ref":"#/parameters/apic_x_auth_token"},{"$ref":"#/parameters/apic_project_id"},{"$ref":"#/parameters/apic_instance_id"},{"description":"绑定签名密钥的请求体","in":"body","name":"AssociateSignatureKeyV2RequestBody","required":true,"schema":{"$ref":"#/definitions/SignApiBinding"}}],"responses":{"201":{"description":"Created","examples":{"application/json":{"bindings":[{"api_id":"5f918d104dc84480a75166ba99efff21","api_name":"Api_http","api_remark":"Web backend Api","api_type":1,"binding_time":"2020-08-03T04:00:11.638167852Z","env_id":"DEFAULT_ENVIRONMENT_RELEASE_ID","env_name":"RELEASE","group_name":"api_group_001","id":"25082bd52f74442bb1d273993d567938","publish_id":"66a645f1d6294fa6899cb1ed1c51bc4c","sign_id":"0b0e8f456b8742218af75f945307173c","sign_key":"a071a20d460a4f639a636c3d7e3d8163","sign_name":"signature_demo","sign_secret":"dc0**********2b3","sign_type":"hmac"}]}},"schema":{"$ref":"#/definitions/SignApiBindingResult"}},"400":{"description":"Bad Request","examples":{"application/json":{"error_code":"APIG.2012","error_msg":"Invalid parameter value,parameterName:sign_id. Please refer to the support documentation"}},"schema":{"$ref":"#/definitions/ResponseModel"}},"401":{"description":"Unauthorized","examples":{"application/json":{"error_code":"APIG.1002","error_msg":"Incorrect token or token resolution failed"}},"schema":{"$ref":"#/definitions/ResponseModel"}},"403":{"description":"Forbidden","examples":{"application/json":{"error_code":"APIG.1005","error_msg":"No permissions to request this method"}},"schema":{"$ref":"#/definitions/ResponseModel"}},"404":{"description":"Not Found","examples":{"application/json":{"error_code":"APIG.3017","error_msg":"Signature key 0b0e8f456b8742218af75f945307173c does not exist"}},"schema":{"$ref":"#/definitions/ResponseModel"}},"500":{"description":"Internal Server Error","examples":{"application/json":{"error_code":"APIG.9999","error_msg":"System error"}},"schema":{"$ref":"#/definitions/ResponseModel"}}},"schemes":["https"],"summary":"绑定签名密钥","tags":["签名密钥绑定关系管理"],"x-api-version":"v2","x-apigateway-request-type":"public","x-hybridcloud":true,"x-is-registered":"Y","x-open-region-cloud":"hc,hcso","x-order":1,"x-request-examples-1":{"publish_ids":["40e7162dc6b94bbbbb1a60d2a24b1b0c"],"sign_id":"0b0e8f456b8742218af75f945307173c"},"x-request-examples-description-1":"为API绑定指定的签名密钥","x-romaconnect-mode":"huaweicloud,hybrid,on-premise","x-support-sdk":"Y"}}},"product_short":"ROMA","region_id":"cn-north-4","schemes":["HTTPS"],"security_definitions":null,"summary":"绑定签名密钥","tags":"签名密钥绑定关系管理","uri":null,"version":"2.0"}