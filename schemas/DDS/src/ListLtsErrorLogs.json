{"base_path":"/","components":null,"consumes":"[\"application/json\"]","definitions":{"ErrorLogDetail":{"properties":{"line_num":{"description":"日志单行序列号。","example":"1595659490239433658","type":"string"},"log_time":{"description":"日志产生时间,UTC时间。\n格式为“yyyy-mm-ddThh:mm:ssZ”。 其中,T指某个时间的开始;Z指时区偏移量,例如北京时间偏移显示为+0800。","example":"2020-11-15T22:49:38.643000Z","type":"string"},"node_id":{"description":"节点ID。","example":"dbd0b65ed0c34125a0b04d4e5ba67e66no02","type":"string"},"node_name":{"description":"节点名称。","example":"Test_replica_node_2","type":"string"},"raw_message":{"description":"描述信息。","example":"Failed to unlock lock with ts:1231423533643 caused by.","type":"string"},"severity":{"description":"日志级别。","example":"Warning","type":"string"}},"required":["node_name","node_id","raw_message","severity","log_time","line_num"]},"ErrorResponse":{"properties":{"error_code":{"description":"错误码。","example":"DBS.200001","type":"string"},"error_msg":{"description":"错误消息。","example":"参数错误。","type":"string"}},"required":["error_code","error_msg"]},"ListLtsErrorLogsRequestBody":{"properties":{"end_time":{"description":"结束时间,格式为“yyyy-mm-ddThh:mm:ssZ”。\n其中,T指某个时间的开始;Z指时区偏移量,例如北京时间偏移显示为+0800。注:结束时间不能晚于当前时间。","type":"string"},"keywords":{"description":"根据多个关键字搜索日志全文,表示同时匹配所有关键字。\n- 只支持关键字前缀模糊搜索,最多支持10个关键字。\n- 每个关键字最大长度不超过512个字符。","items":{"type":"string"},"type":"array"},"limit":{"description":"表示每次查询的日志条数,最大限制100条。","type":"integer"},"line_num":{"description":"日志单行序列号,第一次查询时不需要此参数,下一页查询时需要使用,可从上一次查询的返回信息中获取。\n说明:当次查询从line_num的下一条日志开始查询,不包含当前line_num日志。","type":"string"},"node_id":{"description":"节点ID,取空值,表示查询实例下所有允许查询的节点。\n使用请参考《DDS API参考》的“查询实例列表和详情”响应消息表“nodes 数据结构说明”的“id”。允许查询的节点如下:\n- 集群实例下面的 shard节点\n- 副本集、单节点实例下面的所有节点","type":"string"},"search_type":{"description":"日志查询方式,需结合line_num使用, 以line_num的日志为起始点:\n- 取值\"backwards\"时,表示查询上一页limit大小的日志\n- 取值\"forwards\"时,表示查询下一页limit大小的日志\n- 不传默认\"forwards\"","enum":["backwards","forwards"],"type":"string"},"severity":{"description":"日志级别,取空值表示查询所有日志级别。","enum":["Warning","Error"],"type":"string"},"start_time":{"description":"开始时间,格式为“yyyy-mm-ddThh:mm:ssZ”。\n其中,T指某个时间的开始;Z指时区偏移量,例如北京时间偏移显示为+0800。注:开始时间不得早于当前时间30天。","type":"string"}},"required":["start_time","end_time","limit"]},"ListLtsErrorLogsResponseBody":{"properties":{"error_logs":{"description":"错误日志具体信息。","items":{"$ref":"#/definitions/ErrorLogDetail"},"type":"array"}},"required":["error_logs"]}},"description":null,"group_id":"a2654930c2d440c78366c9c164a23e86","host":"dds.cn-north-4.myhuaweicloud.com","id":"a98a109f65ae4276abbc5f151f5572e5","info_version":"v3","method":"post","name":"ListLtsErrorLogs","parameters":{},"paths":{"/v3.1/{project_id}/instances/{instance_id}/error-logs":{"post":{"description":"查询数据库错误日志信息。","operationId":"ListLtsErrorLogs","parameters":[{"description":"用户Token。","in":"header","name":"X-Auth-Token","required":true,"type":"string","x-example":"******"},{"description":"租户在某一region下的project ID。","in":"path","name":"project_id","required":true,"type":"string","x-example":"619d3e78f61b4be68bc5aa0b59edcf7b"},{"description":"实例ID,可以调用“[查询实例列表和详情](x-wc://file=zh-cn_topic_0000001369935045.xml)”接口获取。如果未申请实例,可以调用“[创建实例](x-wc://file=zh-cn_topic_0000001369734929.xml)”接口创建。","in":"path","name":"instance_id","required":true,"type":"string","x-example":"520c58ba00a3497e97ce0b9604874dd6in02"},{"description":"请求体。","in":"body","name":"ListLtsErrorLogsRequestBody","required":true,"schema":{"$ref":"#/definitions/ListLtsErrorLogsRequestBody"}}],"responses":{"200":{"description":"Success.","examples":{"application/json":{"error_logs":[{"line_num":"1595659490239433659","log_time":"2023-01-09T12:55:39.398+0000","node_id":"dbd0b65ed0c34125a0b04d4e5ba67e66no02","node_name":"Test_replica_node_2","raw_message":"W NETWORK  [ShardServerCatalogCacheLoader-214] Unable to reach primary for set shard_2","severity":"Warning"}]}},"schema":{"$ref":"#/definitions/ListLtsErrorLogsResponseBody"}},"default":{"description":"Client or server error.","schema":{"$ref":"#/definitions/ErrorResponse"}}},"summary":"查询数据库错误日志","tags":["获取日志信息"],"x-constraint":"- 不支持使用 &&、||、AND、OR、NOT、*、?、:、>、<、=、>=、<= 这些关键字来搜索日志。\n- 每页查询最大限制100条,日志最多保存30天。","x-is-registered":"Y","x-request-examples-1":{"end_time":"2023-01-09T13:41:14+0800","keywords":["Unable","NETWORK"],"limit":100,"line_num":"1595659490239433658","node_id":"dbd0b65ed0c34125a0b04d4e5ba67e66no02","search_type":"backwards","severity":"Warning","start_time":"2023-01-06T10:41:14+0800"},"x-request-examples-description-1":"","x-request-examples-url-1":"POST https://{endpoint}/v3.1/0483b6b16e954cb88930a360d2c4e663/instances/6ade8143870047b8999aba8f1891b48ein02/error-logs","x-support-sdk":"Y"}}},"product_short":"DDS","region_id":"cn-north-4","schemes":["HTTPS"],"security_definitions":null,"summary":"查询数据库错误日志","tags":"获取日志信息","uri":null,"version":"2.0"}