{"base_path":"/","components":null,"consumes":"[\"application/json\"]","definitions":{"BackupStrategyForItemResponse":{"description":"自动备份策略。","properties":{"keep_days":{"description":"已生成备份文件可以保存的天数。取值范围:0~732。","type":"integer"},"start_time":{"description":"备份时间段。自动备份将在该时间段内触发。当前时间指UTC时间。","example":"23:00-00:00","type":"string"}},"required":["start_time","keep_days"]},"DatastoreItem":{"description":"数据库信息。","properties":{"patch_available":{"description":"是否有补丁版本的数据库支持升级,返回true时可以通过升级补丁接口进行数据库升级,否则不允许升级补丁。","type":"boolean"},"type":{"description":"数据库引擎。","type":"string"},"version":{"description":"数据库版本号。","type":"string"},"whole_version":{"description":"数据库的完整版本号。","type":"string"}},"required":["type","version","patch_available","whole_version"]},"ErrorResponse":{"properties":{"error_code":{"description":"错误码。","example":"DBS.200001","type":"string"},"error_msg":{"description":"错误消息。","example":"参数错误。","type":"string"}},"required":["error_code","error_msg"]},"GroupResponseItem":{"description":"实例组信息。","properties":{"id":{"description":"组ID。节点类型为shard和config时,该参数有效。","example":"5b0fda418d9f4b51b0d188732aaf992fno01","type":"string"},"name":{"description":"组名称。节点类型为shard和config时,该参数有效。","example":"mysql_node1","type":"string"},"nodes":{"description":"节点信息。","items":{"$ref":"#/definitions/NodeItem"},"type":"array"},"status":{"description":"组状态。节点类型为shard和config时,该参数有效。","type":"string"},"type":{"description":"节点类型。\n取值:\n- shard\n- config\n- mongos\n- replica\n- single","example":"shard","type":"string"},"volume":{"$ref":"#/definitions/Volume","description":"volume信息。节点类型为shard、config、replica、single时,该参数有效。"}},"required":["type","id","name","status","volume","nodes"]},"ListInstancesResponseBody":{"properties":{"instances":{"description":"实例信息。","items":{"$ref":"#/definitions/QueryInstanceResponse"},"type":"array"},"total_count":{"description":"总记录数。","type":"integer"}},"required":["instances","total_count"]},"NodeItem":{"description":"实例节点信息。","properties":{"availability_zone":{"description":"可用区。","example":"az1","type":"string"},"id":{"description":"节点ID。","example":"5b0fda418d9f4b51b0d188732aaf992fno01","type":"string"},"name":{"description":"节点名称。","example":"mysql_node1","type":"string"},"private_ip":{"description":"节点内网IP。该参数仅针对集群实例的mongos节点、副本集实例、以及单节点实例有效,且在弹性云服务器创建成功后参数值存在,否则,值为\"\"。","type":"string"},"public_ip":{"description":"绑定的外网IP。该参数值为\"\"。该参数仅针对集群实例的mongos节点、副本集实例的主节点和备节点、以及单节点实例有效。","type":"string"},"role":{"description":"节点角色。\n取值:\n- master,mongos节点返回该值。\n- Primary,shard组主节点、config组主节点、副本集主节点、单节点返回该值。\n- Secondary,shard组备节点、config组备节点、副本集备节点返回该值。\n- Hidden,shard组隐藏节点、config组隐藏节点、副本集隐藏节点返回该值。\n- unknown,节点异常时返回该值。","example":"master","type":"string"},"spec_code":{"description":"资源规格编码。","type":"string"},"status":{"description":"节点状态。","example":"normal","type":"string"}},"required":["id","name","status","role","private_ip","public_ip","spec_code","availability_zone"]},"QueryInstanceResponse":{"description":"实例信息。","properties":{"actions":{"description":"实例正在执行的动作。","items":{"type":"string"},"type":"array"},"backup_strategy":{"$ref":"#/definitions/BackupStrategyForItemResponse","description":"备份策略。"},"created":{"description":"实例创建时间。","type":"string"},"datastore":{"$ref":"#/definitions/DatastoreItem","description":"数据库信息。"},"db_user_name":{"description":"默认用户名。取值为“rwuser”。","example":"root","type":"string"},"disk_encryption_id":{"description":"磁盘加密的密钥ID。","type":"string"},"dss_pool_id":{"description":"专属存储池ID。","example":"f5f84ed7-6f19-4bd4-99d7-b450ad6cc4df","type":"string"},"engine":{"description":"存储引擎。取值为“wiredTiger”。","type":"string"},"enterprise_project_id":{"description":"企业项目ID。取值为“0”,表示为default企业项目。","type":"string"},"groups":{"description":"组信息。","items":{"$ref":"#/definitions/GroupResponseItem"},"type":"array"},"id":{"description":"实例ID。","example":"5a0c7051faa0471a8e23703f1dc0f458in02","type":"string"},"maintenance_window":{"description":"系统可维护时间窗。","type":"string"},"mode":{"description":"实例类型。与请求参数相同。","type":"string"},"name":{"description":"实例名称。","type":"string"},"order_id":{"description":"订单ID,仅包周期场景返回。","type":"string"},"pay_mode":{"description":"计费方式。\n- 取值为“0”,表示按需计费。\n- 取值为“1”,表示包年/包月计费。","type":"string"},"port":{"description":"数据库端口号。文档数据库实例支持的端口号范围为2100~9500。","example":3306,"type":"string"},"region":{"description":"实例所在区域。","type":"string"},"remark":{"description":"实例备注。","type":"string"},"security_group_id":{"description":"安全组ID。","type":"string"},"ssl":{"description":"是否开启SSL安全连接。\n- 取值为“1”,表示开启。\n- 取值为“0”,表示不开启。","example":"1","type":"integer"},"status":{"description":"实例状态。\n取值:\n- normal,表示实例正常。\n- abnormal,表示实例异常。\n- creating,表示实例创建中。\n- frozen,表示实例被冻结。\n- data_disk_full,表示实例磁盘已满。\n- createfail,表示实例创建失败。\n- enlargefail,表示实例扩容节点个数失败。","example":"creating","type":"string"},"subnet_id":{"description":"子网ID。","type":"string"},"tags":{"description":"标签列表。","items":{"$ref":"#/definitions/TagResponse"},"type":"array"},"time_zone":{"description":"时区。","type":"string"},"updated":{"description":"实例操作最新变更的时间。","type":"string"},"vpc_id":{"description":"虚拟私有云ID。","type":"string"}},"required":["id","name","remark","status","port","mode","region","datastore","engine","created","updated","db_user_name","ssl","vpc_id","subnet_id","security_group_id","backup_strategy","pay-mode","maintenance_window","groups","storage","disk_encryption_id","enterprise_project_id","time_zone","actions","tags"]},"TagResponse":{"description":"标签信息。","properties":{"key":{"description":"标签键。","example":"dds001","type":"string"},"value":{"description":"标签值。","example":"dds001","type":"string"}},"required":["key","value"]},"Volume":{"description":"volume信息。","properties":{"size":{"description":"磁盘大小。单位:GB。","example":"5b0fda418d9f4b51b0d188732aaf992fno01","type":"string"},"used":{"description":"磁盘使用量。单位:GB。","example":"mysql_node1","type":"string"}},"required":["size","used"]}},"description":null,"group_id":"a2654930c2d440c78366c9c164a23e86","host":"dds.cn-north-4.myhuaweicloud.com","id":"6a891721e47a49fc8d33491306be6621","info_version":"v3","method":"get","name":"ListInstances","parameters":{},"paths":{"/v3/{project_id}/instances":{"get":{"description":"根据指定条件查询实例列表和详情。","operationId":"ListInstances","parameters":[{"description":"用户Token。","in":"header","name":"x-auth-token","required":true,"type":"string","x-example":"******"},{"description":"租户在某一region下的project ID。","in":"path","name":"project_id","required":true,"type":"string","x-example":"619d3e78f61b4be68bc5aa0b59edcf7b"},{"description":"实例ID,可以调用“查询实例列表和详情”接口获取。如果未申请实例,可以调用“创建实例”接口创建。","in":"query","name":"id","type":"string"},{"description":"实例名称。\n如果name以“*”起始,表示按照“*”后面的值模糊匹配,否则,按照实际填写的name精确匹配查询。\n- “*”为系统保留字符,不能只传入该字符。","in":"query","name":"name","type":"string"},{"description":"实例类型。\n- 取值为“Sharding”,表示集群实例。\n- 取值为“ReplicaSet”,表示副本集实例。\n- 取值为“Single”,表示单节点实例。","enum":["Sharding","ReplicaSet","Single"],"in":"query","name":"mode","type":"string"},{"description":"数据库版本类型。取值为“DDS-Community”。","enum":["DDS-Community","DDS-Enhanced"],"in":"query","name":"datastore_type","type":"string"},{"description":"虚拟私有云ID。可登录虚拟私有云控制台界面,获取DDS实例所在虚拟私有云的ID。","in":"query","name":"vpc_id","type":"string"},{"description":"子网的网络ID。可登录虚拟私有云控制台界面,获取DDS实例所在虚拟私有云下子网的网络ID。","in":"query","name":"subnet_id","type":"string"},{"description":"索引位置偏移量,表示从指定project ID下最新的实例创建时间开始,按时间的先后顺序偏移offset条数据后查询对应的实例信息。\n取值大于或等于0。不传该参数时,查询偏移量默认为0,表示从最新的实例创建时间对应的实例开始查询。","in":"query","name":"offset","type":"integer"},{"description":"查询实例个数上限值。\n取值范围:1~100。不传该参数时,默认查询前100条实例信息。","in":"query","name":"limit","type":"integer"},{"description":"根据实例标签键值对进行查询。{key}表示标签键,{value}表示标签值,最多包含20组。key不可以为空或重复,value可以为空。如果同时使用多个标签键值对进行查询,中间使用逗号分隔开,表示查询同时包含指定标签键值对的实例。","in":"query","name":"tags","required":false,"type":"string"}],"responses":{"200":{"description":"Success.","examples":{"application/json":{"instances":[{"actions":["CREATE"],"backup_strategy":{"keep_days":7,"start_time":"16:00-17:00"},"created":"2019-01-17T07:05:52","datastore":{"type":"DDS-Community","version":"3.4"},"db_user_name":"rwuser","dss_pool_id":"f5f84ed7-6f19-4bd4-99d7-b450ad6cc4dd","engine":"wiredTiger","enterprise_project_id":"0","groups":{"nodes":[{"availability_zone":"bbb","id":"233eaac9c6f245c0bb9c2d21eea12d1bno02","name":"dds-efa6_replica_node_2","private_ip":"192.168.0.174","public_ip":"","role":"Primary","spec_code":"dds.s2.medium.4.shard","status":"normal"},{"availability_zone":"bbb","id":"d57d76d6320a4a7b86db82c317550c4ano02","name":"dds-efa6_replica_node_1","private_ip":"192.168.0.39","public_ip":"","role":"Hidden","spec_code":"dds.s2.medium.4.shard","status":"normal"},{"availability_zone":"bbb","id":"f46b0a1cf4d9400e9fd7af17f8742d37no02","name":"dds-efa6_replica_node_3","private_ip":"192.168.0.176","public_ip":"","role":"Secondary","spec_code":"dds.s2.medium.4.shard","status":"normal"}],"type":"replica","volume":{"size":10,"used":0.33}},"id":"8436a91546294036b75931e879882200in02","maintenance_window":"02:00-06:00","mode":"ReplicaSet","name":"dds-efa6","pay_mode":0,"port":8635,"region":"cn-xianhz-1","remark":"test","security_group_id":"7aa51dbf-5b63-40db-9724-dad3c4828b58","ssl":1,"status":"normal","subnet_id":"f1df08c5-71d1-406a-aff0-de435a51007b","tags":[{"key":"dds001","value":"dds001"}],"time_zone":"","updated":"2019-01-17T07:05:47","vpc_id":"674e9b42-cd8d-4d25-a2e6-5abcc565b961"},{"actions":["CREATE"],"backup_strategy":{"keep_days":7,"start_time":"17:00-18:00"},"created":"2019-01-17T07:04:39","datastore":{"patch_available":false,"type":"DDS-Community","version":"3.4"},"db_user_name":"rwuser","engine":"wiredTiger","enterprise_project_id":"0","groups":{"nodes":[{"availability_zone":"bbb","id":"bd4dccbd53ae48d5bd3046bebf715079no02","name":"dds-5699_single_node_1","private_ip":"192.168.0.9","public_ip":"","role":"Primary","spec_code":"dds.mongodb.c6.medium.4.single","status":"normal"}],"type":"single","volume":{"size":10,"used":0.33}},"id":"d77905385f114217b75ae7d6ab9a7588in02","maintenance_window":"02:00-06:00","mode":"Single","name":"dds-5699","pay_mode":0,"port":8635,"region":"cn-xianhz-1","remark":"测试","security_group_id":"7aa51dbf-5b63-40db-9724-dad3c4828b58","ssl":1,"status":"normal","subnet_id":"f1df08c5-71d1-406a-aff0-de435a51007b","tags":[{"key":"dds001","value":"dds001"}],"time_zone":"","updated":"2019-01-17T07:04:33","vpc_id":"674e9b42-cd8d-4d25-a2e6-5abcc565b961"},{"actions":["CREATE"],"backup_strategy":{"keep_days":7,"start_time":"19:00-20:00"},"created":"2019-01-17T07:04:37","datastore":{"type":"DDS-Community","version":"3.4"},"db_user_name":"rwuser","engine":"wiredTiger","enterprise_project_id":"0","groups":[{"nodes":[{"availability_zone":"bbb","id":"a742c13a284949adad177672e8a0f01cno02","name":"dds-32f4_mongos_node_1","private_ip":"192.168.0.56","public_ip":"","role":"Primary","spec_code":"dds.mongodb.c6.medium.4.mongos","status":"normal"},{"availability_zone":"bbb","id":"d4f66666b1d64ab28719da0526341c7eno02","name":"dds-32f4_mongos_node_2","private_ip":"192.168.0.185","public_ip":"","role":"Primary","spec_code":"dds.mongodb.c6.medium.4.mongos","status":"normal"}],"type":"mongos"},{"nodes":[{"availability_zone":"bbb","id":"0e9abaebe5974b63a5b221de6ee34cfeno02","name":"dds-32f4_shard_2_node_3","role":"Primary","spec_code":"dds.mongodb.c6.medium.4.shard","status":"normal"},{"availability_zone":"bbb","id":"1d7f4c5476c04cc187f920925c2b601fno02","name":"dds-32f4_shard_2_node_2","role":"Hidden","spec_code":"dds.mongodb.c6.medium.4.shard","status":"normal"},{"availability_zone":"bbb","id":"3dd2cce03da54fc08f10651cbfea778dno02","name":"dds-32f4_shard_2_node_1","role":"Secondary","spec_code":"dds.mongodb.c6.medium.4.shard","status":"normal"}],"type":"shard","volume":{"size":10,"used":0.33}},{"nodes":[{"availability_zone":"bbb","id":"7422f7331b714ac39aa647a1ec968d33no02","name":"dds-32f4_config_node_2","role":"Primary","spec_code":"dds.mongodb.c6.large.2.config","status":"normal"},{"availability_zone":"bbb","id":"9e3b343151044eda91ddb8a42ae5cbefno02","name":"dds-32f4_config_node_3","role":"Hidden","spec_code":"dds.mongodb.c6.large.2.config","status":"normal"},{"availability_zone":"bbb","id":"c0053ca460ac4889841ffb14a886ec54no02","name":"dds-32f4_config_node_1","role":"Secondary","spec_code":"dds.mongodb.c6.large.2.config","status":"normal"}],"type":"config","volume":{"size":10,"used":0.33}}],"id":"9136fd2a9fcd405ea4674276ce36dae8in02","maintenance_window":"02:00-06:00","mode":"Sharding","name":"dds-32f4","pay_mode":0,"port":8635,"region":"cn-xianhz-1","remark":123,"security_group_id":"7aa51dbf-5b63-40db-9724-dad3c4828b58","ssl":1,"status":"normal","subnet_id":"f1df08c5-71d1-406a-aff0-de435a51007b","tags":[{"key":"dds001","value":"dds001"}],"time_zone":"","updated":"2019-01-17T07:04:31","vpc_id":"674e9b42-cd8d-4d25-a2e6-5abcc565b961"}],"total_count":3}},"schema":{"$ref":"#/definitions/ListInstancesResponseBody"}},"default":{"description":"Client or server error.","schema":{"$ref":"#/definitions/ErrorResponse"}}},"summary":"查询实例列表和详情","tags":["实例管理"],"x-is-registered":"Y","x-open-region-cloud":"hc,hk","x-request-examples-description-1":"","x-request-examples-url-1":"GET https://{endpoint}/v3/054e292c9880d4992f02c0196d3ea468/instances","x-support-sdk":"Y"}}},"product_short":"DDS","region_id":"cn-north-4","schemes":["HTTPS"],"security_definitions":null,"summary":"查询实例列表和详情","tags":"实例管理","uri":null,"version":"2.0"}