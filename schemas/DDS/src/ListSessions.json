{"base_path":"/","components":null,"consumes":"[\"application/json\"]","definitions":{"ListSessionsResponseBody":{"description":"查询实例节点会话信息。","properties":{"sessions":{"description":"具体信息。","items":{"$ref":"#/definitions/QuerySessionResponse"},"type":"array"},"total_count":{"description":"总记录数。","example":1,"format":"int32","type":"integer"}},"required":["total_count","sessions"]},"QuerySessionResponse":{"description":"会话详细信息列表。","properties":{"active":{"description":"当前会话是否活跃。\n取值为“true”,表示活跃。\n取值为“false”,表示不活跃。","type":"boolean"},"client":{"description":"客户端地址。","type":"string"},"cost_time":{"description":"运行时间,单位为 us。","type":"string"},"db":{"description":"正在操作的数据库名称。","type":"string"},"description":{"description":"连接描述。","type":"string"},"host":{"description":"主机。","type":"string"},"id":{"description":"会话ID。","type":"string"},"namespace":{"description":"命名空间。","type":"string"},"operation":{"description":"操作。","type":"string"},"plan_summary":{"description":"执行计划描述。","type":"string"},"type":{"description":"操作类型。","type":"string"},"user":{"description":"用户名称。仅支持4.2及以上版本,如果无法显示该字段,请升级内核版本。","type":"string"}},"required":["id","active","operation","type","cost_time","plan_summary","host","client","description","namespace"]}},"description":null,"group_id":"a2654930c2d440c78366c9c164a23e86","host":"dds.cn-north-4.myhuaweicloud.com","id":"4a50ebd10c4a4f5a96c07ed07bfde029","info_version":"v3","method":"get","name":"ListSessions","parameters":{},"paths":{"/v3/{project_id}/nodes/{node_id}/sessions":{"get":{"description":"查询实例节点会话。","operationId":"ListSessions","parameters":[{"description":"租户在某一region下的project ID。","in":"path","name":"project_id","required":true,"type":"string"},{"description":"节点ID。允许查询的节点如下:\n集群下面的 mongos节点以及\n副本集、单节点实例下面的所有节点。","in":"path","name":"node_id","required":true,"type":"string"},{"description":"索引位置,偏移量。\n从第一条数据偏移offset条数据后开始查询,默认为0(偏移0条数据,表示从第一条数据开始查询),必须为数字,不能为负数。","in":"query","name":"offset","required":false,"type":"integer"},{"description":"查询记录数。取值范围[1, 20],默认10 (表示返回10条数据)。","in":"query","name":"limit","required":false,"type":"integer"},{"description":"执行计划描述。取空值表示查询所有语句类型,也可指定执行计划,例如:\nCOLLSCAN\nIXSCAN\nFETCH\nSORT\nLIMIT\nSKIP\nCOUNT\nCOUNT_SCAN\nTEXT\nPROJECTION 等","in":"query","name":"plan_summary","required":false,"type":"string"},{"description":"操作类型。取空值表示查询所有操作类型。也可指定操作类型,例如:\nnone\nupdate\ninsert\nquery\ncommand\ngetmore\nremove\nkillcursors等","in":"query","name":"type","required":false,"type":"string"},{"description":"命名空间。取空值表示查询所有命名空间。也可根据当前业务进行指定。","in":"query","name":"namespace","required":false,"type":"string"},{"description":"运行时间,单位为 us。取空值表示查询所有的运行时间。也可根据当前业务需要进行配置,表示查询超出 cost_time 的会话。","in":"query","name":"cost_time","required":false,"type":"integer"}],"responses":{"200":{"description":"Success.","examples":{"application/json":{"sessions":[{"active":true,"client":"172.16.41.233:50700","cost_time":"25","description":"conn20","host":"host-172-16-27-182:8635","id":"shard_1:7201646","namespace":"admin.$cmd.aggregate","operation":"{\"getMore\":4.9473050217983027E18,\"collection\":\"$cmd.aggregate\",\"batchSize\":101.0,\"lsid\":{\"id\":{\"$binary\":{\"base64\":\"9FhcBFVeTzafCH8BUZrLjQ\\=\\=\",\"subType\":\"03\"}},\"uid\":{\"$binary\":{\"base64\":\"O0CMtIVItQN4IsEOsJdrPL8s7jv5xwh5a/A5Qfvs2A8\\=\",\"subType\":\"00\"}}},\"$clusterTime\":{\"clusterTime\":{\"$timestamp\":{\"t\":1.614047961E9,\"i\":1.0}},\"signature\":{\"hash\":{\"$binary\":{\"base64\":\"HxUWu68VyfvQFivWjHQDdJj/3YQ\\=\",\"subType\":\"00\"}},\"keyId\":6.9312672235666801E18}},\"$client\":{\"driver\":{\"name\":\"PyMongo\",\"version\":\"3.6.1\"},\"os\":{\"type\":\"Linux\",\"name\":\"Linux\",\"architecture\":\"x86_64\",\"version\":\"4.18.0-147.5.1.0.h269.eulerosv2r9.x86_64\"},\"platform\":\"CPython 3.7.4.final.0\",\"mongos\":{\"host\":\"host-172-16-61-110:8635\",\"client\":\"127.0.0.1:33420\",\"version\":\"4.0.3\"}},\"$configServerState\":{\"opTime\":{\"ts\":{\"$timestamp\":{\"t\":1.614047961E9,\"i\":1.0}},\"t\":2.0}},\"$db\":\"admin\"}","plan_summary":"COLLSCAN","type":"getmore"}],"total_count":1}},"schema":{"$ref":"#/definitions/ListSessionsResponseBody"}}},"summary":"查询实例节点会话","tags":["连接管理"],"x-constraint":"- 支持3.4及以上版本的社区版实例。","x-is-registered":"N","x-open-region-cloud":"hc,hk","x-request-examples-description-1":"","x-request-examples-url-1":"GET https://{endpoint}/v3/054e292c9880d4992f02c0196d3ea468/nodes/520c58ba00a3497e97ce0b9604874dd6no02/sessions","x-support-sdk":"Y"}}},"product_short":"DDS","region_id":"cn-north-4","schemes":["HTTPS"],"security_definitions":null,"summary":"查询实例节点会话","tags":"连接管理","uri":null,"version":"2.0"}