{"base_path":"/","components":null,"consumes":"[\"application/json\"]","definitions":{"CreateKillOpRuleRequestBody":{"properties":{"client_ips":{"description":"客户端连接IP。只支持IPV4。可为空,表示不做限制。最多支持配置5个IP。同时配置多个IP时,匹配任意一个IP时规则生效。","items":{"type":"string"},"type":"array"},"max_concurrency":{"description":"最大并发数。 取值: 不能为负数,可为空,默认为0,表示不做限制, 最小值为1, 最大值为100000。secs_running和max_concurrency不可同时为0。","format":"int32","type":"integer"},"namespaces":{"description":"表命名空间。取值格式:库名.表名。同时配置多组信息时,匹配任意一组信息时规则生效。\n- 目前仅支持配置一组信息\n- 可为空,表示不做限制。\n- 单独库名,表示对某个库下的所有集合生效。\n- 库名.表名,表示对具体库下的具体的集合生效。","items":{"type":"string"},"type":"array"},"node_type":{"description":"节点类型。 \n- mongos_shard,表示同时在mongos和shard节点生效。\n- mongos,表示只在集群mongos节点生效。\n- shard,表示只在集群shard节点生效。\n- replica,表示只在副本集节点生效。","type":"string"},"operation_types":{"description":"Sql语句操作类型。 最多支持同时选择6种语句类型。同时选择多种类型时,匹配任意一种类型时规则生效。\n- insert,表示插入语句。 \n- update,表示更新语句。 \n- query,表示查询语句。 \n- command,表示命令语句。 \n- remove,表示删除语句。 \n- getmore,表示获取更多数据语句。","items":{"type":"string"},"type":"array"},"plan_summary":{"description":"执行计划。 默认值空,表示不做限制。 \n- COLLSCAN。\n- SORT_KEY_GENERATOR。\n- SKIP。\n- LIMIT。\n- GEO_NEAR_2DSPHERE。\n- GEO_NEAR_2D。\n- AGGREGATE。\n- OR。","type":"string"},"secs_running":{"description":"单条操作最大运行时长。可为空,默认为0,表示不做限制。单位:s。最小值为2, 最大值为86400。secs_running和max_concurrency不可同时为0。","format":"int32","type":"integer"}},"required":["operation_types","node_type"],"type":"object"}},"description":null,"group_id":"a2654930c2d440c78366c9c164a23e86","host":"dds.cn-north-4.myhuaweicloud.com","id":"705f25aaef5342238c4114c4a22b443d","info_version":"v3","method":"post","name":"CreateKillOpRule","parameters":{},"paths":{"/v3/{project_id}/instances/{instance_id}/kill-op-rule":{"post":{"description":"创建killOp规则。","operationId":"CreateKillOpRule","parameters":[{"description":"租户在某一region下的project ID。请参考[获取项目ID](https://support.huaweicloud.com/api-dds/dds_projectid.html)章节获取项目编号。","in":"path","name":"project_id","required":true,"type":"string"},{"description":"实例ID,可以调用“[查询实例列表和详情](x-wc://file=zh-cn_topic_0000001369935045.xml)”接口获取。如果未申请实例,可以调用“[创建实例](x-wc://file=zh-cn_topic_0000001369734929.xml)”接口创建。","in":"path","name":"instance_id","required":true,"type":"string"},{"description":"用户Token。","in":"header","name":"X-Auth-Token","required":true,"type":"string"},{"description":"killOp规则参数。","in":"body","name":"CreateKillOpRuleRequestBody","required":true,"schema":{"$ref":"#/definitions/CreateKillOpRuleRequestBody"}}],"responses":{"200":{"description":"Success."}},"summary":"创建killOp规则","tags":["数据库运维"],"x-constraint":"- 仅支持副本集,集群实例。 \n- 仅支持数据库版本3.4版本及以后版本。 \n- 仅支持执行节点规格4U及以上。\n- 每个实例最多创建10个killOp规则。\n- 规则创建后为禁用状态。","x-is-registered":"Y","x-open-region-cloud":"hc,hk","x-request-examples-1":{"client_ips":["172.168.201.144"],"max_concurrency":0,"namespaces":["db.collections"],"node_type":"replica","operation_types":["query","insert"],"plan_summary":"COLLSCAN","secs_running":5},"x-request-examples-text-1":{"client_ips":["172.168.201.144"],"max_concurrency":0,"namespaces":["db.collections"],"node_type":"replica","operation_types":["query","insert"],"plan_summary":"COLLSCAN","secs_running":5},"x-request-examples-url-1":"https://{endpoint}/v3/2900b7b8d03e4619b8db8d43bc6234ee/instances/6390733773d64a748f3a7bc88df22384in02/kill-op-rule","x-support-sdk":"Y"}}},"product_short":"DDS","region_id":"cn-north-4","schemes":["HTTPS"],"security_definitions":null,"summary":"创建killOp规则","tags":"数据库运维","uri":null,"version":"2.0"}