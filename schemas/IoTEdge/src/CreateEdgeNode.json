{"base_path":"/v2","components":null,"consumes":"[\"application/json;charset=UTF-8\"]","definitions":{"BasePathDTO":{"properties":{"config_base_path":{"description":"节点配置根目录","maxLength":64,"minLength":1,"pattern":"^/([a-zA-Z_0-9-]+/)*$","type":"string"},"db_base_path":{"description":"节点数据存储根目录","maxLength":64,"minLength":1,"pattern":"^/([a-zA-Z_0-9-]+/)*$","type":"string"},"log_base_path":{"description":"节点日志根目录","maxLength":64,"minLength":1,"pattern":"^/([a-zA-Z_0-9-]+/)*$","type":"string"},"offline_cache_configs":{"$ref":"#/definitions/OfflineCacheConfigsDTO","description":"边缘节点离线缓存配置"}},"title":"节点根目录结构体","type":"object"},"CertificateLocalPathDTO":{"description":"证书文件的本地存储路径","properties":{"cert_path":{"description":"节点数字证书的本地存储路径。","example":"/opt/device-cert/cert.pem","maxLength":2048,"minLength":1,"pattern":"^/([a-zA-Z0-9-_]+/?)+(.pem|.crt){1}$","type":"string"},"key_path":{"description":"证书私钥的本地存储路径。","example":"/opt/device-cert/key.pem","maxLength":2048,"minLength":1,"pattern":"^/([a-zA-Z0-9-_]+/?)+(.pem|.key){1}$","type":"string"}},"required":["cert_path","key_path"],"type":"object"},"CreateNodeRespDTO":{"description":"添加边缘节点列表响应体","properties":{"automatic_upgrade":{"description":"自动升级系统应用的节点开关,默认为关闭:OFF,IMMEDIATE表示节点开关打开","maxLength":16,"minLength":0,"type":"string"},"base_path":{"$ref":"#/definitions/BasePathDTO","description":"节点根目录配置"},"create_time":{"description":"边缘节点创建时间","example":"2020-05-28T11:31:29.740Z","maxLength":256,"minLength":0,"type":"string"},"device_data_format":{"description":"节点使用的数据格式,默认为iotda物模型1.0格式,可以选择属性平铺数据格式flat_json","maxLength":16,"minLength":0,"type":"string"},"device_data_record":{"$ref":"#/definitions/DeviceDataRecord","description":"边缘节点设备数据上报打印配置"},"edge_node_id":{"description":"边缘节点ID","maxLength":64,"minLength":1,"pattern":"^[a-zA-Z0-9_-]*$","type":"string"},"hardware_model":{"description":"注册节点网关配置","maxLength":1024,"minLength":0,"type":"string"},"installer_version":{"description":"安装文件版本","maxLength":64,"minLength":1,"type":"string"},"instance_id":{"description":"实例ID。物理多租下各实例的唯一标识,一般华为云租户无需携带该参数,仅在物理多租场景下从管理面访问API时需要携带该参数。","maxLength":36,"minLength":1,"pattern":"^[a-f0-9-]{1,36}$","type":"string","x-example":"1a7ffc5c-d89c-44dd-8265-b1653d951ce0"},"ips":{"description":"边缘节点ip列表","items":{"type":"string"},"maxItems":10,"minItems":0,"type":"array"},"metric_report":{"description":"omagent监控运维工具是否上报指标","maxLength":16,"minLength":0,"pattern":"(off|on)","type":"string"},"name":{"description":"边缘节点名称","maxLength":64,"minLength":1,"pattern":"^[a-zA-Z0-9_\\-\\u4e00-\\u9fa5]*$","type":"string"},"product_id":{"description":"边缘节点关联的产品ID,用于唯一标识一个产品模型。","maxLength":36,"minLength":1,"pattern":"^[a-f0-9-]{1,36}$","type":"string","x-example":"1a7ffc5c-d89c-44dd-8265-b1653d951ce0"},"product_name":{"description":"边缘节点关联的产品名称。","example":"jeQDJQZltU8iKgFFoW060F5SGZka","maxLength":64,"minLength":1,"pattern":"^[一-龥a-zA-Z0-9_?'#().,&%@!-]{1,64}$","type":"string"},"resource_ids":{"description":"资源id列表,创建节点时需绑定已购买的资源包,可以叠加节点功能。","items":{"example":"jeQDJQZltU8iKgFFoW060F5SGZka","maxLength":64,"minLength":1,"pattern":"^[a-zA-Z0-9_-]*$","type":"string"},"type":"array","x-type":"List<@Pattern(regexp = \"^[a-zA-Z0-9-_/]*$\")String>"},"space_id":{"description":"资源空间id,对应IOTDA云服务接口参数中的app_id。","example":"jeQDJQZltU8iKgFFoW060F5SGZka","maxLength":64,"minLength":1,"pattern":"^[a-zA-Z0-9_-]*$","type":"string"},"state":{"description":"边缘节点状态UNINSTALLED|INSTALLED|OFFLINE|ONLINE|DELETING|FROZEN","maxLength":32,"minLength":4,"type":"string"},"type":{"description":"节点所属资源类型:advanced|standard","maxLength":16,"minLength":4,"type":"string"}},"type":"object","x-imports":"java.util.Map;java.util.List;"},"DeviceAuthInfoDTO":{"description":"边缘节点设备认证方式信息。","properties":{"auth_type":{"default":"SECRET","description":"边缘节点认证方式,不填默认为密钥认证接入方式(SECRET)。","example":"CERTIFICATES","pattern":"(SECRET|CERTIFICATES)","type":"string"},"fingerprint":{"description":"证书指纹,认证类型使用证书认证接入(CERTIFICATES)需填写该字段。","example":"8D903AC66E0ECA7843B6EEFB50F770537C051EC3C976FD3ED3AFBECC1CC92A29","maxLength":64,"minLength":40,"pattern":"^[a-fA-F0-9]{40}$|^[a-fA-F0-9]{64}$","type":"string"},"local_path":{"$ref":"#/definitions/CertificateLocalPathDTO","description":"证书文件的本地存储路径,认证类型使用证书认证接入(CERTIFICATES)需填写该结构体","type":"object"}},"required":["auth_type"],"type":"object"},"DeviceDataRecord":{"description":"设备上报数据打印开关","properties":{"age":{"default":1,"description":"老化时间,日志压缩文件名时间戳老于这个时间就会发生老化删除","format":"int32","maximum":7,"minimum":1,"type":"integer"},"disk_quota":{"default":512,"description":"磁盘配额,单位MB,参考值,只能保证在这个值左右","format":"int32","maximum":10240,"minimum":512,"type":"integer"},"state":{"description":"配置开关,true启用数据打印,false不启用数据打印","example":"off","maxLength":16,"minLength":0,"pattern":"(on|off)","type":"string"}},"required":["disk_quota","age","state"],"type":"object"},"EdgeAppInstanceDTO":{"properties":{"app_version":{"description":"边缘应用版本,只允许数字、英文小写、中划线,切必须以字母或数字结尾","maxLength":64,"minLength":0,"pattern":"^[A-Za-z0-9-_.]*$","type":"string"},"edge_app_id":{"description":"边缘应用id,只允许数字、英文小写、中划线,切必须以字母或数字结尾","maxLength":32,"minLength":4,"pattern":"^[A-Za-z0-9-_$]*$","type":"string"}},"required":["edge_app_id"],"type":"object"},"EdgeNodeCreation":{"description":"创建边缘节点请求结构体。","properties":{"ai_card_type":{"default":"UNEQUIPPED","description":"AI加速卡类型,如华为昇腾AI加速卡NPU、图像处理加速卡GPU。","maxLength":16,"minLength":0,"pattern":"(NPU|GPU|UNEQUIPPED)","type":"string"},"apps":{"description":"用户预置第三方边缘应用","items":{"$ref":"#/definitions/EdgeAppInstanceDTO"},"maxItems":10,"minItems":0,"type":"array"},"arch":{"description":"系统架构。包括:arm64,arm32,x86_64。","maxLength":16,"minLength":4,"pattern":"(arm64|x86_64|arm32)","type":"string"},"automatic_upgrade":{"default":"OFF","description":"自动升级系统应用的节点开关,默认为关闭:OFF,IMMEDIATE表示节点开关打开","maxLength":16,"minLength":0,"pattern":"(OFF|IMMEDIATE)","type":"string"},"base_path":{"$ref":"#/definitions/BasePathDTO","description":"节点根目录。"},"device_auth_info":{"$ref":"#/definitions/DeviceAuthInfoDTO","description":"边缘节点设备认证方式"},"device_data_format":{"default":"iotda_1.0","description":"节点使用的数据格式,默认为iotda物模型1.0格式,可以选择属性平铺数据格式flat_json","maxLength":16,"minLength":0,"pattern":"(iotda_1.0|flat_json)","type":"string"},"device_data_record":{"$ref":"#/definitions/DeviceDataRecord","description":"边缘节点设备数据上报打印配置"},"edge_node_id":{"description":"边缘节点ID","maxLength":64,"minLength":1,"pattern":"^[a-zA-Z0-9_-]*$","type":"string"},"hardware_model":{"description":"网关型号","maxLength":1024,"minLength":0,"type":"string"},"instance_id":{"description":"实例ID。物理多租下各实例的唯一标识,一般华为云租户无需携带该参数,仅在物理多租场景下从管理面访问API时需要携带该参数。","maxLength":36,"minLength":1,"pattern":"^[a-f0-9-]{1,36}$","type":"string","x-example":"1a7ffc5c-d89c-44dd-8265-b1653d951ce0"},"log_configs":{"description":"边缘节点在IEF日志配置参数,仅高级版支持。","items":{"$ref":"#/definitions/LogConfigDTO"},"maxItems":10,"minItems":0,"type":"array"},"metric_report":{"default":"on","description":"omagent监控运维工具是否上报指标","maxLength":16,"minLength":0,"pattern":"(off|on)","type":"string"},"name":{"description":"边缘节点名称,只允许中、数字、英文大小写、中划线、下划线","example":"test-node","maxLength":64,"minLength":1,"pattern":"^[a-zA-Z0-9_\\-\\u4e00-\\u9fa5]*$","type":"string"},"network_access_point":{"default":"Inner","description":"网络接入方式类型","maxLength":64,"minLength":1,"pattern":"^[a-zA-Z0-9_-]*$","type":"string"},"npu_library_path":{"description":"npu驱动动态库路径","example":"/usr/local/Ascend/driver/lib64/","maxLength":256,"minLength":0,"pattern":"^/([a-zA-Z_0-9-]+/)*$","type":"string"},"offline_cache_configs":{"$ref":"#/definitions/OfflineCacheConfigsDTO","description":"边缘节点离线缓存配置"},"os_type":{"default":"generalLinux","description":"系统类型。包括:generalLinux通用系统,openHarmony。","maxLength":32,"minLength":2,"pattern":"(generalLinux|openHarmony)","type":"string"},"reliability_level":{"default":"LOW","description":"节点的可靠性等级。","example":"LOW","maxLength":64,"minLength":1,"pattern":"(MEDIUM|LOW)","type":"string"},"resource_ids":{"description":"资源id列表,创建节点时需绑定已购买的资源包,资源可叠加。","items":{"example":"jeQDJQZltU8iKgFFoW060F5SGZka","maxLength":64,"minLength":1,"pattern":"^[a-zA-Z0-9_-]*$","type":"string"},"type":"array","x-type":"List<@Pattern(regexp = \"^[a-zA-Z0-9-_/]*$\")String>"},"security_level":{"default":"MEDIUM","description":"节点的安全等级,MEDIUM表示本地明文存储,HIGH表示本地加密存储。","example":"HIGH","maxLength":64,"minLength":1,"pattern":"(MEDIUM|HIGH)","type":"string"},"space_id":{"description":"资源空间id,对应IOTDA云服务接口参数中的app_id。","example":"jeQDJQZltU8iKgFFoW060F5SGZka","maxLength":64,"minLength":1,"pattern":"^[a-zA-Z0-9_-]*$","type":"string"},"storage_period":{"default":0,"description":"节点的存储周期,默认0天,取值范围0~7天,0天则不存储。","format":"int32","maximum":7,"minimum":0,"type":"integer"},"time_out":{"default":1800,"description":"验证码的有效时间单位秒,默认1800秒,范围为1~864000,过期后平台会随机生成。","maximum":864000,"minimum":1,"type":"integer","x-example":1800},"type":{"description":"节点所属资源类型:advanced|standard","maxLength":16,"minLength":4,"pattern":"(advanced|standard|lite)","type":"string"},"verify_code":{"description":"边缘节点注册使用的验证码,如果不输入则平台随机生成。","maxLength":36,"minLength":1,"pattern":"^[a-zA-Z0-9_-]*$","type":"string","x-example":"1a7ffc5c-d89c-44dd-8265-b1653d951ce0"}},"required":["name","type"],"type":"object","x-imports":"java.util.Map;java.util.List;"},"LogConfigDTO":{"description":"日志配置","properties":{"component":{"description":"app:部署到边缘设备上的应用的日志, system 边缘设备上系统的日志","pattern":"(app|system)","type":"string"},"level":{"description":"应用日志级别,可选项:on/off/trace/debug/info/warn/error/fatal,当type为LTS时有效。当选择非on/off的选项时,将只采集大于等于指定级别的日志。","pattern":"(on|off|trace|debug|info|warn|error|fatal)","type":"string"},"rotate_num":{"description":"应用日志rotate个数,默认5,取值范围1-10","format":"int32","maximum":10,"minimum":1,"type":"integer"},"rotate_period":{"description":"应用日志rotate周期,可选项: daily/monthly/weekly/yearly","pattern":"(daily|monthly|weekly|yearly)","type":"string"},"size":{"description":"应用日志文件大小限制,单位MB,默认50,取值范围10-1000","format":"int32","maximum":1000,"minimum":10,"type":"integer"},"type":{"default":"LTS","description":"LTS:将日志发送到LTS, local 本地日志","pattern":"(LTS|local)","type":"string"}},"type":"object"},"OfflineCacheConfigsDTO":{"description":"节点离线缓存配置","properties":{"capacity":{"default":2048,"description":"节点离线缓存容量,单位MB,默认2048,取值范围500-8192","format":"int32","maximum":8192,"minimum":500,"type":"integer"},"period":{"default":7,"description":"节点离线缓存数据的储存天数,默认7,取值范围-1~14,-1表示存储天数没有限制","format":"int32","maximum":14,"minimum":-1,"type":"integer"},"publish_order":{"default":"realtime_first","description":"数据上报优先级,可选项:realtime_first实时数据优先 sequential按时序上报,默认realtime_first","pattern":"(sequential|realtime_first)","type":"string"}},"title":"节点缓存配置结构体","type":"object"}},"description":null,"group_id":"754c02d86d9b4c75b894729259232632","host":"iotedge-api.cn-north-4.myhuaweicloud.com","id":"c72f0d65372347e8b0dd6c694364a20b","info_version":"v2","method":"post","name":"CreateEdgeNode","parameters":{"X-Auth-Token":{"description":"用户Token。通过调用IAM服务 [获取IAM用户Token](https://support.huaweicloud.com/api-iam/iam_30_0001.html)接口获取,接口返回的响应消息头中“X-Subject-Token”就是需要获取的用户Token。简要的获取方法样例请参见 [Token认证](https://support.huaweicloud.com/api-iothub/iot_06_v5_0091.html#section0)。","in":"header","maxLength":20000,"minLength":0,"name":"X-Auth-Token","required":true,"type":"string","x-example":"MIIDkgYJKoZIhvcNAQcCoIIDgzCCXXXXX..."},"project_id":{"description":"项目ID。获取方法请参见 [获取项目ID](x-wc://file=zh-cn_topic_0225049489.xml)。","in":"path","maxLength":64,"minLength":1,"name":"project_id","pattern":"^[a-fA-F0-9]{1,32}$","required":true,"type":"string","x-example":"04ed32dc1b0025b52fe3c01a27c2b0a8"}},"paths":{"/{project_id}/edge-nodes":{"post":{"consumes":["application/json"],"description":"创建边缘节点","operationId":"CreateEdgeNode","parameters":[{"$ref":"#/parameters/project_id"},{"$ref":"#/parameters/X-Auth-Token"},{"description":"request","in":"body","name":"CreateEdgeNodeRequestBody","required":true,"schema":{"$ref":"#/definitions/EdgeNodeCreation"}}],"produces":["application/json"],"responses":{"201":{"description":"Created","examples":{"application/json":{"base_path":{"config_base_path":"string","db_base_path":"string","log_base_path":"string"},"create_time":"2020-05-28T11:31:29.740Z","edge_node_id":"string","hardware_model":"string","installer_version":"string","instance_id":"string","ips":["string"],"name":"string","product_id":"string","product_name":"jeQDJQZltU8iKgFFoW060F5SGZka","resource_ids":["jeQDJQZltU8iKgFFoW060F5SGZka"],"space_id":"jeQDJQZltU8iKgFFoW060F5SGZka","state":"string","type":"string"}},"schema":{"$ref":"#/definitions/CreateNodeRespDTO"},"x-SuccessCode":true},"400":{"description":"Bad Request"},"404":{"description":"Not Found"},"500":{"description":"Internal Server Error"}},"summary":"创建边缘节点","tags":["BasicNode"],"x-classAnnotation":"@RestSchema(schemaId = \"BasicNodeController\")","x-externalAPI":true,"x-imports":"org.springframework.http.ResponseEntity;com.huawei.m2m.rest.api.ioedgemanager.model.EdgeNodeDTO;org.apache.servicecomb.provider.rest.common.RestSchema","x-is-registered":"Y","x-request-examples-1":{"ai_card_type":"UNEQUIPPED","apps":[{"app_version":"string","edge_app_id":"string"}],"arch":"string","base_path":{"config_base_path":"string","db_base_path":"string","log_base_path":"string"},"device_auth_info":{"auth_type":"CERTIFICATES","fingerprint":"8D903AC66E0ECA7843B6EEFB50F770537C051EC3C976FD3ED3AFBECC1CC92A29","local_path":{"cert_path":"/opt/device-cert/cert.pem","key_path":"/opt/device-cert/key.pem"}},"edge_node_id":"string","hardware_model":"string","instance_id":"string","log_configs":[{"component":"string","level":"string","rotate_num":10,"rotate_period":"string","size":1000,"type":"LTS"}],"name":"test-node","offline_cache_configs":{"capacity":2048,"period":7,"publish_order":"realtime_first"},"reliability_level":"LOW","resource_ids":["jeQDJQZltU8iKgFFoW060F5SGZka"],"security_level":"HIGH","space_id":"jeQDJQZltU8iKgFFoW060F5SGZka","storage_period":0,"time_out":1800,"type":"string","verify_code":"string"},"x-request-examples-url-1":"POST https://{endpoint}/v2/{project_id}/edge-nodes","x-returnType":"ResponseEntity<CreateNodeRespDTO>","x-support-sdk":"Y"}}},"product_short":"IoTEdge","region_id":"cn-north-4","schemes":["HTTPS"],"security_definitions":null,"summary":"创建边缘节点","tags":"节点管理","uri":null,"version":"2.0"}