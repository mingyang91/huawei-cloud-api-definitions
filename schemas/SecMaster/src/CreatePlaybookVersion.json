{"base_path":null,"components":null,"consumes":"","definitions":{"ActionInfo":{"description":"剧本流程动作信息","properties":{"action_id":{"description":"流程ID","example":"909494e3-558e-46b6-a9eb-07a8e18ca62f","maxLength":64,"minLength":32,"type":"string"},"action_type":{"description":"**参数解释:**\n动作类型\n- AOP_WORKFLOW    流程\n\n**约束限制:**\n不涉及\n**取值范围:**\n- AOP_WORKFLOW\n\n**默认取值:**\nAOP_WORKFLOW","example":"AOP_WORKFLOW","maxLength":64,"minLength":0,"type":"string"},"description":{"description":"描述","example":"This is a description.","maxLength":1024,"minLength":0,"type":"string"},"id":{"description":"剧本流程动作ID","example":"909494e3-558e-46b6-a9eb-07a8e18ca62f","maxLength":64,"minLength":32,"type":"string"},"name":{"description":"流程动作名称","example":"名称","maxLength":1024,"minLength":0,"type":"string"},"playbook_id":{"description":"剧本ID","maxLength":64,"minLength":0,"type":"string"},"playbook_version_id":{"description":"剧本版本ID","maxLength":64,"minLength":0,"type":"string"},"project_id":{"description":"项目ID","maxLength":64,"minLength":0,"type":"string"}}},"ConditionInfo":{"description":"剧本触发规则详情","properties":{"conditions":{"description":"触发条件。事件触发剧本必填","items":{"$ref":"#/definitions/ConditionItem"},"maxItems":99,"minItems":0,"type":"array"},"cron":{"description":"Cron 表达式(定时任务)。定时触发剧本必填","example":"*/5 * * * * ?","maxLength":64,"minLength":0,"type":"string"},"end_time":{"description":"定时结束时间。定时触发剧本必填","example":"2021-01-30T23:00:00Z+0800","maxLength":64,"minLength":0,"type":"string"},"end_type":{"description":"**参数解释:**\n剧本结束执行类型\n- FOREVER 一直执行\n- CUSTOM 自定义结束时间\n\n**约束限制:**\n定时触发剧本必填\n**取值范围:**\n- FOREVER\n- CUSTOM\n\n**默认取值:**\n无","example":"FOREVER","maxLength":64,"minLength":0,"type":"string"},"execution_type":{"description":"**参数解释:**\n执行队列类型\n- PARALLEL 新任务与之前任务并行\n- SERIAL_WAIT 不发起新任务\n\n**约束限制:**\n定时触发剧本必填\n**取值范围:**\n- PARALLEL\n- SERIAL_WAIT\n\n**默认取值:**\n无","example":"PARALLEL","maxLength":64,"minLength":0,"type":"string"},"expression_type":{"description":"**参数解释:**\n表达式类型\n- common  通用表达式\n\n**约束限制:**\n事件触发剧本必填\n**取值范围:**\n- common\n\n**默认取值:**\ncommon","example":"common","maxLength":64,"minLength":0,"type":"string"},"logics":{"description":"条件逻辑组合。事件触发剧本必填","example":"['logic1', 'and', ['logic2', 'or', 'logic3'], 'or', 'logic4']","items":{"description":"表达式类型。默认为common,事件触发剧本必填","example":"condition_0","maxLength":64,"minLength":0,"type":"string"},"maxItems":99,"minItems":0,"type":"array"},"only_once":{"description":"是否只执行一次。定时触发剧本必填","example":false,"type":"boolean"},"repeat_range":{"description":"执行时间段 2021-01-30T23:00:00Z+0800。定时触发剧本必填","example":"2021-01-30T23:00:00Z+0800~2021-01-30T23:00:00Z+0800","maxLength":64,"minLength":0,"type":"string"},"schedule_type":{"description":"**参数解释:**\n定时重复类型(second--秒, hour--小时,day--天,week-周)。\n- second  秒\n- hour 小时\n- day 天\n- week 周\n\n**约束限制:**\n定时触发剧本必填\n**取值范围:**\n- second\n- hour\n- day\n- week\n\n**默认取值:**\n无","example":"second","maxLength":64,"minLength":0,"type":"string"},"start_time":{"description":"定时开始时间。定时触发剧本必填","example":"2021-01-30T23:00:00Z+0800","maxLength":64,"minLength":0,"type":"string"},"start_type":{"description":"**参数解释:**\n剧本开始执行类型\n- IMMEDIATELY 创建完成立即执行\n- CUSTOM 自定义执行时间\n\n**约束限制:**\n定时触发剧本必填\n**取值范围:**\n- IMMEDIATELY\n- CUSTOM\n\n**默认取值:**\n无","example":"IMMEDIATELY","maxLength":64,"minLength":0,"type":"string"}}},"ConditionItem":{"description":"条件定义","properties":{"data":{"description":"条件表达式数据","example":"['waf.alarm.level', '>', '3']","items":{"maxLength":2048,"minLength":0,"type":"string"},"maxItems":99,"minItems":0,"type":"array"},"detail":{"description":"条件详情","example":"Funcion : XXX","maxLength":1028,"minLength":0,"type":"string"},"name":{"description":"条件名称","example":"logic1","maxLength":64,"minLength":0,"type":"string"}}},"CreateAction":{"properties":{"action_id":{"description":"剧本动作ID","example":"909494e3-558e-46b6-a9eb-07a8e18ca62f","maxLength":64,"minLength":32,"type":"string"},"action_type":{"description":"**参数解释:**\n动作类型\n- AOP_WORKFLOW    流程\n\n**约束限制:**\n不涉及\n**取值范围:**\n- AOP_WORKFLOW\n\n**默认取值:**\nAOP_WORKFLOW","example":"AOP_WORKFLOW","maxLength":64,"minLength":0,"type":"string"},"description":{"description":"描述","example":"This is a description.","maxLength":1024,"minLength":0,"type":"string"},"name":{"description":"名称","example":"名称","maxLength":1024,"minLength":0,"type":"string"},"sort_order":{"description":"排序方式","maxLength":64,"minLength":0,"type":"string"}},"required":["action_id","action_type"],"type":"object"},"CreatePlaybookVersionInfo":{"description":"创建剧本版本请求参数","example":{"action_strategy":"ASYNC","actions":[{"action_id":"909494e3-558e-46b6-a9eb-07a8e18ca62f","action_type":"AOP-WORKFLOW","description":"This is a description.","id":"909494e3-558e-46b6-a9eb-07a8e18ca62f","name":"name","playbook_id":"string","playbook_version_id":"string","project_id":"string","sort_order":21312312312}],"dataclass_id":"909494e3-558e-46b6-a9eb-07a8e18ca62f","dataobject_create":true,"dataobject_delete":true,"dataobject_update":true,"description":"This is a description.","playbook_id":"909494e3-558e-46b6-a9eb-07a8e18ca62f","rule_enable":true,"rule_id":"4185bbd2-9d18-4362-92cb-46df0b24fe4e","trigger_type":"event","workspace_id":"string"},"properties":{"action_strategy":{"description":"执行策略. 目前仅支持异步并发执行,对应值为ASYNC","example":"ASYNC","maxLength":64,"minLength":1,"type":"string"},"actions":{"description":"关联流程列表","items":{"$ref":"#/definitions/CreateAction"},"maxItems":99,"minItems":0,"type":"array"},"dataclass_id":{"description":"数据类ID","example":"909494e3-558e-46b6-a9eb-07a8e18ca62f","maxLength":64,"minLength":32,"type":"string"},"dataobject_create":{"description":"标识数据对象是否创建时触发剧本","example":true,"type":"boolean"},"dataobject_delete":{"description":"标识数据对象是否删除时触发剧本","example":true,"type":"boolean"},"dataobject_update":{"description":"标识数据对象是否更新时触发剧本","example":true,"type":"boolean"},"description":{"description":"描述","example":"This is a description.","maxLength":1024,"minLength":0,"type":"string"},"playbook_id":{"description":"剧本ID","example":"909494e3-558e-46b6-a9eb-07a8e18ca62f","maxLength":64,"minLength":32,"type":"string"},"rule":{"$ref":"#/definitions/CreateRuleInfo"},"rule_enable":{"description":"过滤规则是否启用","example":true,"type":"boolean"},"rule_id":{"description":"过滤规则ID","example":"4185bbd2-9d18-4362-92cb-46df0b24fe4e","maxLength":64,"minLength":0,"type":"string"},"trigger_type":{"description":"触发方式. EVENT--事件触发, TIMER--定时触发","example":"EVENT","maxLength":64,"minLength":0,"type":"string"},"workspace_id":{"description":"工作空间ID","maxLength":2097152,"minLength":0,"type":"string"}},"required":["dataclass_id"]},"CreateRuleInfo":{"description":"创建剧本触发规则参数","example":{"rule":{"conditions":[{"data":["waf.alarm.level', '>', '3"],"detail":"Funcion : XXX","name":"logic1"}],"cron":"*/5 * * * * ?","expression_type":"all","logics":{},"repeat_count":"1","repeat_range":"2021-01-30T23:00:00Z+0800~2021-01-30T23:00:00Z+0800","schedule_type":"second"}},"properties":{"rule":{"$ref":"#/definitions/ConditionInfo"}},"required":["rule"]},"PlaybookErrorRsp":{"description":"请求失败错误响应体","properties":{"code":{"description":"**参数解释**:\n错误码\n**取值范围**:\n不涉及","example":"SecMaster.20040001","maxLength":64,"minLength":0,"type":"string"},"message":{"description":"**参数解释**:\n错误描述\n**取值范围**:\n不涉及","example":"Parameter error.","maxLength":1024,"minLength":0,"type":"string"}},"type":"object"},"PlaybookVersionInfo":{"description":"剧本版本详情信息","properties":{"action_strategy":{"description":"执行策略. 目前仅支持异步并发执行,对应值为ASYNC","example":"ASYNC","maxLength":64,"minLength":0,"type":"string"},"actions":{"description":"剧本关联流程列表信息","items":{"$ref":"#/definitions/ActionInfo"},"maxItems":99,"minItems":0,"type":"array"},"approve_name":{"description":"审核者","maxLength":64,"minLength":0,"type":"string"},"create_time":{"description":"创建时间","example":"2021-01-30T23:00:00Z+0800","maxLength":64,"minLength":0,"type":"string"},"creator_id":{"description":"创建者ID","example":"909494e3-558e-46b6-a9eb-07a8e18ca62f","maxLength":64,"minLength":32,"type":"string"},"dataclass_id":{"description":"数据类ID","example":"909494e3-558e-46b6-a9eb-07a8e18ca62f","maxLength":64,"minLength":0,"type":"string"},"dataclass_name":{"description":"数据类名称","maxLength":64,"minLength":0,"type":"string"},"dataobject_create":{"description":"标识数据对象是否创建时触发剧本","example":true,"type":"boolean"},"dataobject_delete":{"description":"标识数据对象是否删除时触发剧本","example":true,"type":"boolean"},"dataobject_update":{"description":"标识数据对象是否更新时触发剧本","example":true,"type":"boolean"},"description":{"description":"描述","example":"This is a description.","maxLength":1024,"minLength":0,"type":"string"},"enabled":{"description":"是否启用。(true--已启用,false-未启用)","example":true,"type":"boolean"},"id":{"description":"剧本版本ID","example":"909494e3-558e-46b6-a9eb-07a8e18ca62f","maxLength":64,"minLength":32,"type":"string"},"modifier_id":{"description":"修改者ID","example":"909494e3-558e-46b6-a9eb-07a8e18ca62f","maxLength":64,"minLength":32,"type":"string"},"playbook_id":{"description":"剧本ID","example":"909494e3-558e-46b6-a9eb-07a8e18ca62f","maxLength":64,"minLength":32,"type":"string"},"project_id":{"description":"项目ID","example":"909494e3-558e-46b6-a9eb-07a8e18ca62f","maxLength":64,"minLength":32,"type":"string"},"rule_enable":{"description":"是否启用触发条件过滤器","example":true,"type":"boolean"},"rule_id":{"description":"过滤规则ID","maxLength":64,"minLength":0,"type":"string"},"rules":{"$ref":"#/definitions/RuleInfo"},"status":{"description":"剧本版本状态,编辑中:EDITING 审核中:APPROVING 不通过:UNPASSED 已发布:PUBLISHED","example":"EDITING","maxLength":64,"minLength":0,"type":"string"},"trigger_type":{"description":"剧本触发方式(EVENT--事件触发,TIMER--定时触发)","example":"EVENT","maxLength":64,"minLength":0,"type":"string"},"update_time":{"description":"更新时间","example":"2021-01-30T23:00:00Z+0800","maxLength":64,"minLength":0,"type":"string"},"version":{"description":"版本号","example":"v1","maxLength":64,"minLength":32,"type":"string"},"version_type":{"description":"版本类型(0--草稿版本,1--正式版本)","maximum":1,"minimum":0,"type":"integer"}}},"PlaybookVersionResp":{"description":"剧本版本列表","example":{"code":0,"data":{"action_strategy":"sync","actions":[{"action_id":"909494e3-558e-46b6-a9eb-07a8e18ca62f","action_type":"Workflow","description":"This is a description.","id":"909494e3-558e-46b6-a9eb-07a8e18ca62f","name":"name","playbook_id":"string","playbook_version_id":"string","project_id":"string","sort_order":21312312312}],"approve_name":"string","create_time":"2021-01-30T23:00:00Z+0800","creator_id":"909494e3-558e-46b6-a9eb-07a8e18ca62f","dataclass_id":"909494e3-558e-46b6-a9eb-07a8e18ca62f","dataclass_name":"string","dataobject_create":true,"dataobject_delete":true,"dataobject_id":"string","dataobject_update":true,"description":"This is a description.","enabled":true,"id":"909494e3-558e-46b6-a9eb-07a8e18ca62f","modifier_id":"909494e3-558e-46b6-a9eb-07a8e18ca62f","playbook_id":"909494e3-558e-46b6-a9eb-07a8e18ca62f","project_id":"909494e3-558e-46b6-a9eb-07a8e18ca62f","rule_enable":true,"rule_id":"string","rules":{"id":"909494e3-558e-46b6-a9eb-07a8e18ca62f","project_id":"909494e3-558e-46b6-a9eb-07a8e18ca62f","rule":"909494e3-558e-46b6-a9eb-07a8e18ca62f"},"run_mode":"automatic","status":"editing","trigger_type":"event","update_time":"2021-01-30T23:00:00Z+0800","version":"v1.1.1","version_type":1},"message":"Error message"},"properties":{"code":{"description":"错误码","example":"0","maxLength":32,"minLength":1,"readOnly":true,"type":"string"},"data":{"$ref":"#/definitions/PlaybookVersionInfo"},"message":{"description":"错误信息","example":"响应消息","maxLength":32,"minLength":1,"readOnly":true,"type":"string"}}},"RuleInfo":{"description":"剧本触发规格信息","properties":{"id":{"description":"规则ID","example":"909494e3-558e-46b6-a9eb-07a8e18ca62f","maxLength":64,"minLength":32,"type":"string"},"project_id":{"description":"项目ID","example":"909494e3-558e-46b6-a9eb-07a8e18ca62f","maxLength":64,"minLength":32,"type":"string"},"rule":{"description":"触发规则","example":"{\"expression_type\":\"common\",\"conditions\":[{\"name\":\"condition_0\",\"data\":[\"ref_order_id\",\"==\",\"id23\"],\"detail\":\"id23\"}],\"logics\":[\"condition_0\"]}","maxLength":128,"minLength":0,"type":"string"}}}},"description":null,"group_id":"705709df764d40488141daec53da8672","host":"secmaster.cn-north-4.myhuaweicloud.com","id":"f301103c8b994599bb94ea953766c9fa","info_version":"v1","method":"post","name":"CreatePlaybookVersion","parameters":{},"paths":{"/v1/{project_id}/workspaces/{workspace_id}/soc/playbooks/{playbook_id}/versions":{"post":{"description":"创建剧本版本","operationId":"CreatePlaybookVersion","parameters":[{"description":"用户Token。\n通过调用IAM服务获取用户Token接口获取(响应消息头中X-Subject-Token的值)。","in":"header","maxLength":2097152,"minLength":1,"name":"X-Auth-Token","required":true,"type":"string","x-example":"MIIDkgYJKoZIhvcNAQcCoIIDgzCCXXXXX..."},{"default":"application/json","description":"**参数解释:**\n内容类型\n- application/json    普通API请求的类型\n\n**约束限制:**\n不涉及\n**取值范围:**\n- application/json\n\n**默认取值:**\napplication/json","in":"header","maxLength":64,"minLength":1,"name":"content-type","required":true,"type":"string"},{"description":"项目ID","in":"path","maxLength":36,"minLength":32,"name":"project_id","required":true,"type":"string"},{"description":"工作空间ID","in":"path","maxLength":36,"minLength":32,"name":"workspace_id","required":true,"type":"string"},{"description":"剧本ID","in":"path","maxLength":64,"minLength":32,"name":"playbook_id","required":true,"type":"string"},{"description":"创建剧本请求参数信息","in":"body","name":"CreatePlaybookVersionRequestBody","required":true,"schema":{"$ref":"#/definitions/CreatePlaybookVersionInfo"}}],"produces":["application/json"],"responses":{"200":{"description":"请求成功响应信息","examples":{"application/json":{"code":0,"data":{"action_strategy":"sync","actions":[{"action_id":"909494e3-558e-46b6-a9eb-07a8e18ca62f","action_type":"Workflow","description":"This is a description.","id":"909494e3-558e-46b6-a9eb-07a8e18ca62f","name":"name","playbook_id":"string","playbook_version_id":"string","project_id":"string"}],"approve_name":"string","create_time":"2021-01-30T23:00:00Z+0800","creator_id":"909494e3-558e-46b6-a9eb-07a8e18ca62f","dataclass_id":"909494e3-558e-46b6-a9eb-07a8e18ca62f","dataclass_name":"string","dataobject_create":true,"dataobject_delete":true,"dataobject_update":true,"description":"This is a description.","enabled":true,"id":"909494e3-558e-46b6-a9eb-07a8e18ca62f","modifier_id":"909494e3-558e-46b6-a9eb-07a8e18ca62f","playbook_id":"909494e3-558e-46b6-a9eb-07a8e18ca62f","project_id":"909494e3-558e-46b6-a9eb-07a8e18ca62f","rule_enable":true,"rule_id":"string","rules":{"id":"909494e3-558e-46b6-a9eb-07a8e18ca62f","project_id":"909494e3-558e-46b6-a9eb-07a8e18ca62f","rule":"{\"expression_type\":\"common\",\"conditions\":[{\"name\":\"condition_0\",\"data\":[\"ref_order_id\",\"==\",\"id23\"],\"detail\":\"id23\"}],\"logics\":[\"condition_0\"]}"},"status":"editing","trigger_type":"event","update_time":"2021-01-30T23:00:00Z+0800","version":"v1.1.1","version_type":1},"message":"success"}},"headers":{"X-request-id":{"description":"请求ID,格式为:request_uuid-timestamp-hostname","type":"string"}},"schema":{"$ref":"#/definitions/PlaybookVersionResp"}},"400":{"description":"请求失败响应信息","headers":{"X-request-id":{"description":"请求ID,格式为:request_uuid-timestamp-hostname","type":"string"}},"schema":{"$ref":"#/definitions/PlaybookErrorRsp"}}},"summary":"创建剧本版本","tags":["剧本版本管理"],"x-api-type":"open-api","x-is-registered":"Y","x-request-examples-1":{"action_strategy":"sync","actions":[{"action_id":"909494e3-558e-46b6-a9eb-07a8e18ca62f","action_type":"Workflow","description":"This is a description.","name":"name"}],"dataclass_id":"909494e3-558e-46b6-a9eb-07a8e18ca62f","dataobject_create":true,"dataobject_delete":true,"dataobject_update":true,"description":"This is a description.","playbook_id":"909494e3-558e-46b6-a9eb-07a8e18ca62f","rule_enable":true,"rule_id":"4185bbd2-9d18-4362-92cb-46df0b24fe4e","trigger_type":"event","workspace_id":"string"},"x-request-examples-description-1":"This is a description.","x-support-sdk":"Y","x-surpport-apiexplorer":true,"x-surpport-hcs":"Y"}}},"product_short":"SecMaster","region_id":"cn-north-4","schemes":["HTTPS"],"security_definitions":null,"summary":"创建剧本版本","tags":"剧本版本管理","uri":null,"version":"2.0"}