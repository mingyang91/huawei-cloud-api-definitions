{"base_path":"/","components":null,"consumes":"","definitions":{"BatchSearchMetricHitsRequestBody":{"description":"查询指标Hit结果请求体。","properties":{"field_ids":{"description":"指标卡片ID列表","example":["c3b4fccf-fa24-4b92-8cdf-b0b30bf00bf0","04d577bc-fbfa-4864-b98d-46c550a824c1"],"items":{"maxLength":64,"minLength":32,"type":"string"},"maxItems":50,"minItems":0,"type":"array"},"interactive_params":{"description":"交互式参数查询,当指标支持交互式参数时,填写<String, String>的K-V形式的参数列表,具体填写方式请参照附录。","items":{"additionalProperties":{"description":"参数map","maxLength":128,"minLength":0,"type":"string"},"type":"object"},"maxItems":100,"minItems":0,"type":"array"},"metric_ids":{"description":"待查询的指标Id列表, 可参照附录中指标信息说明获取已有指标信息。","example":["2255f65b33b04d8696fdb1d85e99bee7","7b60263be0f9474aaf14e17834286f39","1ceb611dd8044737879e6bc85d2759d3"],"items":{"maxLength":64,"minLength":10,"type":"string"},"maxItems":50,"minItems":1,"type":"array"},"params":{"description":"待查询指标的参数列表,列表内每个元素为<String, String>的K-V形式,元素数量必须与metric_ids列表相同,具体填写方式请参照附录。","example":[{"dataspace_id":"18da5ab9-03ec-4010-878c-fa0327762390","date_from":"1673452800000","date_to":"1673489876314","other":"other","pipe_id":"18edfdca-be1c-4b54-8cd0-3bd14efcca82"},{"dataspace_id":"18da5ab9-03ec-4010-878c-fa0327762390","date_from":"1673452800000","date_to":"1673489876314","other":"other","pipe_id":"18edfdca-be1c-4b54-8cd0-3bd14efcca82"},{"dataspace_id":"18da5ab9-03ec-4010-878c-fa0327762390","date_from":"1673452800000","date_to":"1673489876314","other":"other","pipe_id":"18edfdca-be1c-4b54-8cd0-3bd14efcca82"}],"items":{"additionalProperties":{"description":"参数map","maxLength":255,"minLength":1,"type":"string"},"type":"object"},"maxItems":50,"minItems":0,"type":"array"},"workspace_ids":{"description":"工作空间列表, 当指标支持获取多工作空间数据时填写。","example":["c3b4fccf-fa24-4b92-8cdf-b0b30bf00bf0","04d577bc-fbfa-4864-b98d-46c550a824c1"],"items":{"maxLength":64,"minLength":10,"type":"string"},"maxItems":50,"minItems":0,"type":"array"}},"required":["metric_ids"],"type":"object"},"MetricFormat":{"properties":{"data":{"description":"数据格式","maxLength":128,"minLength":1,"type":"string"},"data_param":{"additionalProperties":{"maxLength":128,"minLength":0,"type":"string"},"description":"数据参数","type":"object"},"display":{"description":"显示格式","maxLength":128,"minLength":1,"type":"string"},"display_param":{"additionalProperties":{"maxLength":128,"minLength":0,"type":"string"},"description":"显示参数","type":"object"}},"type":"object"},"ShowMetricResultResponseBody":{"properties":{"log_msg":{"description":"结果日志信息","maxLength":1024,"minLength":0,"type":"string"},"metric_format":{"description":"指标显示格式,根据不同指标固定返回。","items":{"$ref":"#/definitions/MetricFormat"},"maxItems":64,"minItems":0,"type":"array"},"metric_id":{"description":"指标ID","example":"c50498b695a44defae499679b9c516dd","pattern":"[a-f0-9]{32}","type":"string"},"result":{"description":"指标查询结果内容","properties":{"datarows":{"description":"指标查询结果内容表格","items":{"items":{"description":"结果表格","type":"object"},"maxItems":100,"minItems":1,"type":"array"},"maxItems":999,"minItems":0,"type":"array"},"effective_column":{"description":"生效的列, 当有该参数时,使用指定列作为指标数据结果","example":"0:2","pattern":"\\d+:\\d+","type":"string"},"labels":{"description":"指标查询结果表格标题","example":["severity","percentage"],"items":{"maxLength":999,"minLength":0,"type":"string"},"maxItems":999,"minItems":0,"type":"array"}},"required":["labels","datarows"]},"status":{"description":"查询结果状态,SUCCESS:查询成功,FAILED:查询失败,FALLBACK:使用默认值","enum":["SUCCESS","FAILED","FALLBACK"],"maxLength":128,"minLength":0,"type":"string"}},"required":["metric_id","result"],"type":"object"}},"description":null,"group_id":"705709df764d40488141daec53da8672","host":"secmaster.cn-north-4.myhuaweicloud.com","id":"df866e047f624d1389fcac6416b51ac9","info_version":"v2","method":"post","name":"BatchSearchMetricHits","parameters":{},"paths":{"/v1/{project_id}/workspaces/{workspace_id}/sa/metrics/hits":{"post":{"consumes":["application/json"],"description":"批量查询指标结果","operationId":"BatchSearchMetricHits","parameters":[{"description":"项目ID","in":"path","maxLength":32,"minLength":32,"name":"project_id","required":true,"type":"string"},{"description":"工作空间ID","in":"path","maxLength":36,"minLength":36,"name":"workspace_id","required":true,"type":"string"},{"description":"需要查询的指标ID及参数","in":"body","name":"BatchSearchMetricHitsRequestBody","required":true,"schema":{"$ref":"#/definitions/BatchSearchMetricHitsRequestBody"}},{"description":"用户Token。 通过调用IAM服务获取用户Token接口获取(响应消息头中X-Subject-Token的值)","in":"header","maxLength":100000,"minLength":100,"name":"X-Auth-Token","required":true,"type":"string"},{"description":"查询指标的时间范围,ISO8601格式,例如:2007-03-01T13:00:00Z/2008-05-11T15:30:00Z或2007-03-01T13:00:00Z/P1Y2M10DT2H30M或P1Y2M10DT2H30M/2008-05-11T15:30:00Z","in":"query","maxLength":255,"minLength":1,"name":"timespan","required":false,"type":"string"},{"default":true,"description":"是否启用缓存,默认true, 禁用缓存 false","in":"query","name":"cache","required":false,"type":"boolean"}],"produces":["application/json"],"responses":{"200":{"description":"请求成功","examples":{"application/json":[{"metric_id":"1f0f5e29-5a92-17a5-2c16-5f37c6dc109c","result":{"datarows":[[{}]],"effective_column":"0:1","labels":["label1"]},"status":"SUCCESS"}]},"schema":{"items":{"$ref":"#/definitions/ShowMetricResultResponseBody"},"type":"array"}}},"summary":"批量查询指标结果","tags":["指标查询"],"x-enable-auth-anno":{"type":"CsbIamAuth.NAME"},"x-iam-auth-meta-anno":{"abacAction":"secmaster:metric:getResult","authContextInitializer":"CsbIamAuthContextInitializer.class","authLevel":"project","needAbacResourceCheck":true,"rbac":["readonly"]},"x-imports":["com.huawei.hwclouds.csb.auth.service.impl.CsbIamAuth;","com.huawei.hwclouds.csb.auth.annotation.CsbAuthMeta;","com.huawei.hwclouds.csb.auth.service.impl.CsbIamAuthContextInitializer;","com.huawei.clouds.wushan.auth.IamAuthParam;"],"x-is-registered":"N","x-method-annotations":["@IamAuthParam(instanceId = \"metric_id\")","@CsbAuthMeta(instanceType = \"metric\", supportInternalAccess = true)"],"x-request-examples-1":{"metric_ids":["1f0f5e29-5a92-17a5-2c16-5f37c6dc109c"],"params":[{"start_date":"2024-06-25T00:00:00.000+08:00"}]},"x-request-examples-description-1":"通过指标接口查询从6月25日至当前的告警等级分布","x-request-examples-text-1":{"metric_ids":["1f0f5e29-5a92-17a5-2c16-5f37c6dc109c"],"params":[{"start_date":"2024-06-25T00:00:00.000+08:00"}]},"x-request-examples-url-1":"https://{endpoint}/v1/{project_id}/workspaces/{workspace_id}/sa/metrics/hits","x-support-sdk":"Y","x-surpport-apiexplorer":true}}},"product_short":"SecMaster","region_id":"cn-north-4","schemes":["HTTPS"],"security_definitions":null,"summary":"批量查询指标结果","tags":"指标查询","uri":null,"version":"2.0"}