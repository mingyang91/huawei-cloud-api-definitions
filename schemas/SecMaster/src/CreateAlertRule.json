{"base_path":null,"components":null,"consumes":"","definitions":{"AlertRule":{"example":{"create_by":"582dd19dd99d4505a1d7929dc943b169","create_time":1665221214,"custom_properties":{"maintainer":"isap","references":"https://localhost/references"},"delete_time":0,"event_grouping":true,"pipe_id":"772fb35b-83bc-46c9-a0b1-ebe31070a889","query":"* | select status, count(*) as count group by status","query_type":"SQL","rule_id":"443a0117-1aa4-4595-ad4a-796fad4d4950","rule_name":"Alert rule","schedule":{"delay_interval":2,"frequency_interval":5,"frequency_unit":"MINUTE","overtime_interval":10,"period_interval":5,"period_unit":"MINUTE"},"severity":"TIPS","status":"ENABLED","triggers":[{"expression":10,"mode":"COUNT","operator":"GT","severity":"TIPS"}],"update_by":"582dd19dd99d4505a1d7929dc943b169","update_time":1665221214},"properties":{"create_by":{"description":"创建人","maxLength":255,"minLength":1,"type":"string"},"create_time":{"description":"创建时间","format":"int64","maximum":9223372036854775807,"minimum":0,"type":"integer"},"custom_properties":{"additionalProperties":{"maxLength":1024,"minLength":1,"type":"string"},"description":"自定义扩展信息","type":"object"},"delete_time":{"description":"删除时间","format":"int64","maximum":9223372036854775807,"minimum":0,"type":"integer"},"event_grouping":{"default":true,"description":"告警分组","type":"boolean"},"pipe_id":{"description":"数据管道 ID","maxLength":36,"minLength":36,"type":"string"},"pipe_name":{"description":"数据管道名称","maxLength":63,"minLength":5,"type":"string"},"query":{"description":"查询语句","maxLength":1024,"minLength":1,"type":"string"},"query_type":{"default":"SQL","description":"**参数解释**:\n查询语法类型\n- SQL查询\n**约束限制**:\n不涉及 \n**取值范围**:\n- SQL\n**默认值**: \nSQL","enum":["SQL"],"maxLength":255,"minLength":1,"type":"string"},"rule_id":{"description":"告警规则 ID","maxLength":36,"minLength":36,"type":"string"},"rule_name":{"description":"告警规则名称","maxLength":255,"minLength":1,"type":"string"},"schedule":{"$ref":"#/definitions/Schedule","description":"调度规则"},"severity":{"default":"MEDIUM","description":"**参数解释**:\n状态\n- TIPS 提示\n- LOW 低危\n- MEDIUM 中危\n- HIGH 高危\n- FATAL 致命\n**约束限制**\n不涉及\n**取值范围**:\n- TIPS\n- LOW\n- MEDIUM\n- HIGH\n- FATAL\n**默认值**\nMEDIUM","enum":["TIPS","LOW","MEDIUM","HIGH","FATAL"],"maxLength":255,"minLength":1,"type":"string"},"status":{"default":"ENABLED","description":"**参数解释**:\n状态\n- ENABLED 启用\n- DISABLED 禁用\n\n**约束限制**\n不涉及\n**取值范围**:\n- ENABLED\n- DISABLED\n\n**默认值**\n不涉及","enum":["ENABLED","DISABLED"],"maxLength":255,"minLength":1,"type":"string"},"triggers":{"description":"告警触发规则","items":{"$ref":"#/definitions/AlertRuleTrigger"},"maxItems":5,"minItems":1,"type":"array"},"update_by":{"description":"更新人","maxLength":255,"minLength":1,"type":"string"},"update_time":{"description":"更新时间","format":"int64","maximum":9223372036854775807,"minimum":0,"type":"integer"}},"required":["create_by","create_time","pipe_id","pipe_name","rule_id","rule_name","severity","status","update_by","update_time"],"type":"object"},"AlertRuleTrigger":{"example":{"accumulated_times":1,"expression":10,"mode":"COUNT","operator":"GT","severity":"TIPS"},"properties":{"accumulated_times":{"description":"累计次数","maximum":1000,"minimum":1,"type":"integer"},"expression":{"description":"表达式","maxLength":255,"minLength":1,"type":"string"},"mode":{"default":"COUNT","description":"**参数解释**:\n指标模式\n- COUNT 数量\n\n**约束限制**\n不涉及\n**取值范围**:\n- COUNT\n\n**默认值**\n不涉及","enum":["COUNT"],"maxLength":255,"minLength":1,"type":"string"},"operator":{"default":"GT","description":"**参数解释**:\n操作符类型\n- GT 大于\n- LT 小于\n- EQ 等于\n- NE 不等于\n\n**约束限制**\n不涉及\n**取值范围**:\n- GT\n- LT\n- EQ\n- NE\n\n**默认值**\n不涉及","enum":["EQ","NE","GT","LT"],"maxLength":255,"minLength":1,"type":"string"},"severity":{"description":"**参数解释**:\n告警等级\n- TIPS 提示\n- LOW 低危\n- MEDIUM 中危\n- HIGH 高危\n- FATAL 致命\n\n**约束限制**\n不涉及\n**取值范围**:\n- TIPS\n- LOW\n- MEDIUM\n- HIGH\n- FATAL\n\n**默认值**\n不涉及","enum":["TIPS","LOW","MEDIUM","HIGH","FATAL"],"maxLength":255,"minLength":1,"type":"string"}},"required":["expression"],"type":"object"},"CreateAlertRuleRequestBody":{"example":{"accumulated_times":1,"alert_name":"test","custom_properties":{"maintainer":"isap","references":"https://localhost/references"},"description":"An alert rule","event_grouping":false,"pipe_id":"772fb35b-83bc-46c9-a0b1-ebe31070a889","pipe_name":"sec-hss-alarm","query":"* | select status, count(*) as count group by status","query_type":"SQL","rule_name":"Alert rule","schedule":{"delay_interval":2,"frequency_interval":5,"frequency_unit":"MINUTE","overtime_interval":10,"period_interval":5,"period_unit":"MINUTE"},"severity":"TIPS","simulation":false,"status":"ENABLED","suppression":false,"triggers":[{"accumulated_times":1,"expression":10,"mode":"COUNT","operator":"GT","severity":"TIPS"}]},"properties":{"accumulated_times":{"description":"执行次数","format":"int32","maximum":65535,"minimum":0,"type":"integer"},"alert_description":{"description":"告警描述","maxLength":1024,"minLength":0,"type":"string"},"alert_name":{"description":"告警名称","maxLength":256,"minLength":0,"type":"string"},"alert_remediation":{"description":"修复建议","maxLength":1024,"minLength":0,"type":"string"},"alert_type":{"additionalProperties":{"maxLength":1024,"minLength":1,"type":"string"},"description":"告警类型,通过“查询数据类列表” 接口获取.","type":"object"},"custom_properties":{"additionalProperties":{"maxLength":1024,"minLength":1,"type":"string"},"description":"自定义扩展信息","type":"object"},"description":{"description":"描述","maxLength":1024,"minLength":0,"type":"string"},"event_grouping":{"default":true,"description":"告警分组","type":"boolean"},"pipe_id":{"description":"数据管道 ID","example":"2b31ed520xxxxxxebedb6e57xxxxxxxx","maxLength":36,"minLength":36,"type":"string"},"pipe_name":{"description":"管道名称","maxLength":63,"minLength":5,"type":"string"},"query":{"description":"查询语句","maxLength":1024,"minLength":1,"type":"string"},"query_type":{"default":"SQL","description":"**参数解释**:\n查询语法类型\n- SQL查询\n**约束限制**:\n不涉及 \n**取值范围**:\n- SQL\n**默认值**: \nSQL","enum":["SQL"],"maxLength":255,"minLength":1,"type":"string"},"rule_name":{"description":"告警规则名称","example":"Rule name","maxLength":255,"minLength":1,"type":"string"},"schedule":{"$ref":"#/definitions/Schedule","description":"告警规则的调度周期"},"severity":{"default":"TIPS","description":"**参数解释**:\n告警等级\n- TIPS 提示\n- LOW 低危\n- MEDIUM 中危\n- HIGH 高危\n- FATAL 致命\n\n**约束限制**\n不涉及\n**取值范围**:\n- TIPS\n- LOW\n- MEDIUM\n- HIGH\n- FATAL\n\n**默认值**\n不涉及","enum":["TIPS","LOW","MEDIUM","HIGH","FATAL"],"maxLength":255,"minLength":1,"type":"string"},"simulation":{"default":true,"description":"模拟告警","type":"boolean"},"status":{"default":"ENABLED","description":"**参数解释**:\n状态\n- ENABLED 启用\n- DISABLED 禁用\n\n**约束限制**\n不涉及\n**取值范围**:\n- ENABLED\n- DISABLED\n\n**默认值**\n不涉及","enum":["ENABLED","DISABLED"],"maxLength":255,"minLength":1,"type":"string"},"suppression":{"default":true,"description":"告警抑制","type":"boolean"},"triggers":{"description":"告警触发规则","items":{"$ref":"#/definitions/AlertRuleTrigger"},"maxItems":5,"minItems":1,"type":"array"}},"required":["alert_name","pipe_id","pipe_name","query","rule_name","schedule","triggers"],"type":"object"},"Schedule":{"example":{"delay_interval":5,"frequency_interval":5,"frequency_unit":"MINUTE","overtime_interval":10,"period_interval":5,"period_unit":"MINUTE"},"properties":{"delay_interval":{"description":"延迟间隔","maximum":10,"minimum":0,"type":"integer"},"frequency_interval":{"description":"调度间隔","maximum":60,"minimum":1,"type":"integer"},"frequency_unit":{"description":"**参数解释**:\n调度间隔单位\n- MINUTE10 10分钟\n- HOUR 小时\n- DAY 天\n\n**约束限制**\n不涉及\n**取值范围**:\n- MINUTE\n- HOUR\n- DAY\n\n**默认值**\n不涉及","enum":["MINUTE","HOUR","DAY"],"maxLength":255,"minLength":1,"type":"string"},"overtime_interval":{"description":"超时间隔","maximum":10,"minimum":0,"type":"integer"},"period_interval":{"description":"时间窗口间隔","maximum":60,"minimum":1,"type":"integer"},"period_unit":{"description":"**参数解释**:\n时间窗口单位\n- MINUTE10 10分钟\n- HOUR 小时\n- DAY 天\n\n**约束限制**\n不涉及\n**取值范围**:\n- MINUTE\n- HOUR\n- DAY\n\n**默认值**\n不涉及","enum":["MINUTE","HOUR","DAY"],"maxLength":255,"minLength":1,"type":"string"}},"required":["frequency_interval","frequency_unit","period_interval","period_unit"],"type":"object"}},"description":null,"group_id":"705709df764d40488141daec53da8672","host":"secmaster.cn-north-4.myhuaweicloud.com","id":"ac4488207dc44794be98017929095e6c","info_version":"v1","method":"post","name":"CreateAlertRule","parameters":{},"paths":{"/v1/{project_id}/workspaces/{workspace_id}/siem/alert-rules":{"post":{"consumes":["application/json"],"description":"创建告警规则","operationId":"CreateAlertRule","parameters":[{"description":"用户Token,通过调用IAM服务获取用户Token接口获取","in":"header","maxLength":2097152,"minLength":1,"name":"X-Auth-Token","required":true,"type":"string","x-example":"asdfasdfas"},{"description":"项目 ID","in":"path","maxLength":36,"minLength":32,"name":"project_id","required":true,"type":"string","x-example":"2b31ed520xxxxxxebedb6e57xxxxxxxx"},{"description":"工作空间 ID","in":"path","maxLength":36,"minLength":32,"name":"workspace_id","required":true,"type":"string","x-example":"2b31ed520xxxxxxebedb6e57xxxxxxxx"},{"description":"创建告警规则请求体","in":"body","name":"CreateAlertRuleRequestBody","required":true,"schema":{"$ref":"#/definitions/CreateAlertRuleRequestBody"}}],"produces":["application/json"],"responses":{"200":{"description":"请求成功","examples":{"application/json":{"create_by":"582dd19dd99d4505a1d7929dc943b169","create_time":1665221214,"custom_properties":{"maintainer":"isap","references":"https://localhost/references"},"delete_time":0,"event_grouping":true,"pipe_id":"772fb35b-83bc-46c9-a0b1-ebe31070a889","query":"* | select status, count(*) as count group by status","query_type":"SQL","rule_id":"443a0117-1aa4-4595-ad4a-796fad4d4950","rule_name":"Alert rule","schedule":{"delay_interval":2,"frequency_interval":5,"frequency_unit":"MINUTE","overtime_interval":10,"period_interval":5,"period_unit":"MINUTE"},"severity":"TIPS","status":"ENABLED","triggers":[{"expression":10,"mode":"COUNT","operator":"GT","severity":"TIPS"}],"update_by":"582dd19dd99d4505a1d7929dc943b169","update_time":1665221214}},"headers":{"X-request-id":{"description":"任务追踪请求ID","type":"string"}},"schema":{"$ref":"#/definitions/AlertRule"}},"400":{"description":"请求失败","headers":{"X-request-id":{"description":"任务追踪请求ID","type":"string"}}}},"summary":"创建告警规则","tags":["告警规则管理"],"x-api-service-plane":"Control-plane","x-api-type":"open-api","x-is-registered":"Y","x-order":1,"x-request-examples-1":{"accumulated_times":1,"alert_name":"test","custom_properties":{"maintainer":"isap","references":"https://localhost/references"},"description":"An alert rule","event_grouping":false,"pipe_id":"772fb35b-83bc-46c9-a0b1-ebe31070a889","pipe_name":"sec-hss-alarm","query":"* | select status, count(*) as count group by status","query_type":"SQL","rule_name":"Alert rule","schedule":{"delay_interval":2,"frequency_interval":5,"frequency_unit":"MINUTE","overtime_interval":10,"period_interval":5,"period_unit":"MINUTE"},"severity":"TIPS","simulation":false,"status":"ENABLED","suppression":false,"triggers":[{"accumulated_times":1,"expression":10,"mode":"COUNT","operator":"GT","severity":"TIPS"}]},"x-request-examples-description-1":"创建一条告警规则,告警规则所属的管道ID为772fb35b-83bc-46c9-a0b1-ebe31070a889,告警规则名称为Alert rule,查询类型为SQL,状态为启用。","x-sec-data-level":"L1","x-support-sdk":"Y","x-surpport-apiexplorer":"true","x-surpport-hcs":"Y"}}},"product_short":"SecMaster","region_id":"cn-north-4","schemes":["HTTPS"],"security_definitions":null,"summary":"创建告警规则","tags":"告警规则管理","uri":null,"version":"2.0"}