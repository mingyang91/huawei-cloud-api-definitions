{"base_path":null,"components":null,"consumes":"","definitions":{"Match":{"properties":{"key":{"description":"键。第一期限定为resource_name,后续扩展。","maxLength":128,"minLength":1,"type":"string"},"value":{"description":"值。每个值最大长度255个unicode字符。","maxLength":255,"minLength":1,"type":"string"}},"required":["key","value"],"type":"object"},"QueryResourceInstanceCountResponse":{"properties":{"total_count":{"description":"资产总数","format":"int32","maximum":1000,"minimum":0,"type":"integer"}},"required":["total_count"],"type":"object"},"QueryResourceInstanceRequestBody":{"properties":{"matches":{"description":"搜索字段,key为要匹配的字段,如resource_name等。value为匹配的值。key为固定字典值,不能包含重复的key或不支持的key。根据key的值确认是否需要模糊匹配,如resource_name默认为模糊搜索(不区分大小写),如果value为空字符串精确匹配(多数服务不存在资源名称为空的情况,因此此类情况返回空列表)。resource_id为精确匹配。第一期只做resource_name,后续再扩展。","items":{"$ref":"#/definitions/Match"},"maxItems":1,"minItems":0,"type":"array"},"sys_tags":{"description":"仅op_service权限可以使用此字段做资源实例过滤条件。目前TMS调用时只包含一个tag结构体。key:_sys_enterprise_project_idvalue:企业项目id列表目前TMS调用时,key下面只包含一个value。0表示默认企业项目sys_tags和租户标签过滤条件(without_any_tag 、tags、tags_any、not_tags、not_tags_any)不能同时使用无sys_tags时按照tag接口处理,无tag过滤条件时返回全量数据。","items":{"$ref":"#/definitions/WorkspaceTag"},"maxItems":1,"minItems":0,"type":"array"},"tags":{"description":"包含标签,最多包含50个key,每个key下面的value最多10个,每个key对应的value可以为空数组但结构体不能缺失 。Key不能重复,同一个key中values不能重复。结果返回包含所有标签的资源列表,key之间是与的关系,key-value结构中value是或的关系。无tag过滤条件时返回全量数据。","items":{"$ref":"#/definitions/WorkspaceTag"},"maxItems":50,"minItems":0,"type":"array"},"without_any_tag":{"description":"不包含任意一个标签,该字段为true时查询所有不带标签的资源,此时忽略 “tags”、“tags_any”、“not_tags”、“not_tags_any”字段。","type":"boolean"}},"type":"object"},"WorkspaceErrorResponseBody":{"description":"Error response for failed request.","properties":{"error_code":{"description":"Error code.","example":"SecMaster.20011001","maxLength":64,"minLength":0,"type":"string"},"error_msg":{"description":"Error description.","example":"Parameter error.","maxLength":1024,"minLength":0,"type":"string"}},"type":"object"},"WorkspaceTag":{"properties":{"key":{"description":"键。最大长度128个unicode字符。 key不能为空。(搜索时不对此参数做字符集校验),key不能为空或者空字符串,不能为空格,校验和使用之前先trim 前后半角空格。","maxLength":128,"minLength":1,"type":"string"},"values":{"description":"值列表。每个值最大长度255个unicode字符,校验和使用之前先trim 前后半角空格。\nvalue可为空数组但不可缺省。\n如果values为空列表,则表示any_value(查询任意value)。value之间为或的关系。","items":{"maxLength":255,"minLength":1,"type":"string"},"maxItems":10,"minItems":0,"type":"array"}},"required":["key","values"],"type":"object"}},"description":null,"group_id":"705709df764d40488141daec53da8672","host":"secmaster.cn-north-4.myhuaweicloud.com","id":"5a124488b8b349caad99eeec073accbb","info_version":"v1","method":"post","name":"CountResourceInstance","parameters":{},"paths":{"/v1/{project_id}/{resource_type}/resource-instances/count":{"post":{"description":"使用标签过滤实例,查询资源实例数量","operationId":"CountResourceInstance","parameters":[{"description":"资源类型","in":"path","maxLength":100,"minLength":0,"name":"resource_type","required":true,"type":"string"},{"description":"**参数解释:**\n项目ID,用于明确项目归属,配置后可通过该ID查询项目下资产,可以通过调用API获取,也可以从控制台获取。[获取项目ID](secmaster_03_0014.xml)\n**约束限制:**\n不涉及\n**取值范围:**\n不涉及\n**默认取值:**\n不涉及","in":"path","maxLength":64,"minLength":32,"name":"project_id","required":true,"type":"string","x-example":"156*******************341da6"},{"default":"application/json;charset=UTF-8","description":"**参数解释:**\n内容类型\n- application/json;charset=UTF-8    普通API请求的类型\n\n**约束限制:**\n不涉及\n**取值范围:**\n- application/json;charset=UTF-8\n\n**默认取值:**\n不涉及","in":"header","maxLength":100,"minLength":0,"name":"Content-type","required":true,"type":"string"},{"description":"用户Token。\n通过调用IAM服务获取用户Token接口获取(响应消息头中X-Subject-Token的值)。","in":"header","maxLength":100,"minLength":0,"name":"X-Auth-Token","required":true,"type":"string","x-example":"MIIDkgYJKoZIhvcNAQcCoIIDgzCCXXXXX..."},{"description":"请求体","in":"body","name":"CountResourceInstanceRequestBody","required":true,"schema":{"$ref":"#/definitions/QueryResourceInstanceRequestBody"}}],"responses":{"200":{"description":"OK","examples":{"application/json":{"total_count":1000}},"schema":{"$ref":"#/definitions/QueryResourceInstanceCountResponse"}},"400":{"description":"参数非法","schema":{"$ref":"#/definitions/WorkspaceErrorResponseBody"}},"401":{"description":"鉴权失败","schema":{"$ref":"#/definitions/WorkspaceErrorResponseBody"}},"403":{"description":"权限不足","schema":{"$ref":"#/definitions/WorkspaceErrorResponseBody"}},"404":{"description":"资源未找到","schema":{"$ref":"#/definitions/WorkspaceErrorResponseBody"}},"500":{"description":"系统异常","schema":{"$ref":"#/definitions/WorkspaceErrorResponseBody"}}},"summary":"查询资源实例数量","tags":["资源实例管理"],"x-api-type":"open-api","x-is-registered":"Y","x-order":5,"x-request-examples-1":{"matches":[{"key":"resource_name","value":"resource1"}],"sys_tags":[{"key":"_sys_enterprise_project_id","values":["5aa119a8-d25b-45a7-8d1b-88e127885635"]}],"tags":[{"key":"tag_name","values":["tag_value","tag_value1"]},{"key":"tag_name1","values":["tag_value","tag_value1"]}],"without_any_tag":true},"x-request-examples-text-1":{"matches":[{"key":"resource_name","value":"resource1"}],"sys_tags":[{"key":"_sys_enterprise_project_id","values":["5aa119a8-d25b-45a7-8d1b-88e127885635"]}],"tags":[{"key":"tag_name","values":["tag_value","tag_value1"]},{"key":"tag_name1","values":["tag_value","tag_value1"]}],"without_any_tag":true},"x-request-examples-url-1":"https://{endpoint}/v1/{project_id}/{resource_type}/resource-instances/count","x-support-sdk":"Y","x-surpport-apiexplorer":true}}},"product_short":"SecMaster","region_id":"cn-north-4","schemes":["HTTPS"],"security_definitions":null,"summary":"查询资源实例数量","tags":"资源实例管理","uri":null,"version":"2.0"}