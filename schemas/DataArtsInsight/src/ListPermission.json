{"base_path":"/","components":null,"consumes":"","definitions":{"DatasetPermissionPageVo":{"properties":{"count":{"description":"数据总量","example":3,"format":"int32","maximum":2147483647,"minimum":0,"type":"integer"},"page_data":{"description":"数据","items":{"$ref":"#/definitions/DatasetPermissionVo","required":["id","name","dataset_id","is_open","permission_type","rule_type","rule_scope","project_id","workspace_Id","rule_user","rule_content","display_fields"]},"maxItems":2147483647,"minItems":0,"type":"array"}},"required":["count","page_data"],"type":"object"},"DatasetPermissionVo":{"properties":{"dataset_id":{"description":"数据集ID","example":"5994345e-1ae0-4b4a-a476-48ea10b4bbd3","maxLength":64,"minLength":0,"type":"string"},"display_fields":{"$ref":"#/definitions/DisplayFieldsDescribe","description":"用户、用户组、字段ID和名称映射关系"},"id":{"description":"规则ID","maxLength":100,"minLength":0,"type":"string"},"is_open":{"description":"当前规则是否生效","enum":[0,1],"example":1,"format":"int32","type":"integer"},"name":{"description":"规则名称","example":"行权限8","maxLength":64,"minLength":0,"type":"string"},"permission_type":{"description":"权限类型:\nCOLUMN、ROW","example":"ROW","maxLength":20,"minLength":0,"type":"string"},"rule_content":{"$ref":"#/definitions/PermissionRuleContent","description":"规则条件详情"},"rule_scope":{"description":"规则范围:ALL:全部用户生效;SPECIFIED:指定用户生效;SPECIFIED_NOT:指定用户不生效。\n权限类型为行权限时允许值:ALL、SPECIFIED\n权限类型为列权限时允许值:ALL、SPECIFIED、SPECIFIED_NOT","example":"ALL","maxLength":20,"minLength":0,"type":"string"},"rule_type":{"description":"规则类型:\n权限类型为COLUMN时:MASK:数据脱敏;FORBID:禁止查看;\n权限类型为ROW时:\nBY_CONDITION:条件组合授权\nBY_TAG:用户标签授权","example":"BY_CONDITION","maxLength":20,"minLength":0,"type":"string"},"rule_user":{"$ref":"#/definitions/RuleUserDescribe","description":"生效用户或用户组列表。\nrule_scope为SPECIFIED或SPECIFIED_NOT时有值;"}},"required":["name","dataset_id","is_open","permission_type","rule_scope","rule_type","rule_user"],"type":"object"},"DisplayFieldsDescribe":{"description":"显示字段描述信息","properties":{"field_map":{"additionalProperties":{"maxLength":128,"minLength":0,"type":"string"},"description":"字段描述","example":{"60716987b3dc4d9fb68b8dff1e733bb4.id":"id"},"type":"object"},"group_map":{"additionalProperties":{"maxLength":128,"minLength":0,"type":"string"},"description":"用户组描述","example":{"60716987b3dc4d9fb68b8dff1e733bb4":"auth_test"},"type":"object"},"user_map":{"additionalProperties":{"maxLength":128,"minLength":0,"type":"string"},"description":"用户描述","example":{"60716987b3dc4d9fb68b8dff1e733bb4":"auth_test"},"type":"object"}},"title":"DisplayFieldsDescribe","type":"object"},"PermissionRuleContent":{"properties":{"column_ids":{"description":"字段id列表","example":["fd7ce9d6-6dae-4126-bd51-36fc0ee3ce54.amount"],"items":{"maxLength":100,"minLength":0,"type":"string"},"maxItems":1000,"minItems":0,"type":"array"},"condition_node":{"description":"条件信息","type":"object"},"first":{"description":"自定义情况下待处理字符的开始位置","example":1,"format":"int32","maximum":2147483647,"minimum":0,"type":"integer"},"last":{"description":"自定义情况下待处理字符的结束位置","example":1,"format":"int32","maximum":2147483647,"minimum":0,"type":"integer"},"logic_operator":{"description":"当前层次下sub_conditions条件间关联关系;AND|OR","enum":["AND","OR"],"example":"string","maxLength":20,"minLength":0,"type":"string"},"mask_type":{"description":"脱敏类型:PRESET_STYLE_1,PRESET_STYLE_2,PRESET_STYLE_3,RETAIN_FIRST_N_LAST_M,RETAIN_N_TO_M,REPLACE_SPECIAL_CHARACTERS,RETAIN_SPECIAL_CHARACTERS,BEFORE_SPECIAL_CHARACTERS,AFTER_SPECIAL_CHARACTERS","enum":["PRESET_STYLE_1","PRESET_STYLE_2","PRESET_STYLE_3","RETAIN_FIRST_N_LAST_M","RETAIN_N_TO_M","REPLACE_SPECIAL_CHARACTERS","RETAIN_SPECIAL_CHARACTERS","BEFORE_SPECIAL_CHARACTERS","AFTER_SPECIAL_CHARACTERS"],"example":"RETAIN_FIRST_N_LAST_M","maxLength":200,"minLength":0,"type":"string"},"special_words":{"description":"特殊字符列表","example":["xxx"],"items":{"maxLength":512,"minLength":0,"type":"string"},"maxItems":1000,"minItems":0,"type":"array"},"sub_conditions":{"description":"行条件列表信息;条件可嵌套","items":{"$ref":"#/definitions/RowPermissionDescribe"},"maxItems":1000,"minItems":0,"type":"array"}},"type":"object"},"RowPermissionDescribe":{"properties":{"condition_node":{"description":"条件信息","properties":{"column_id":{"description":"字段ID","example":"cf610dc3-a43e-4c09-aec5-a7aeedb19822.ca_country","maxLength":100,"minLength":0,"type":"string"},"column_name":{"description":"字段名称","example":"ca_country","maxLength":512,"minLength":0,"type":"string"},"data_type":{"description":"字段类型","example":null,"maxLength":16,"minLength":0,"type":"string"},"execute_expression":{"description":"可执行函数表达式","example":null,"maxLength":100,"minLength":0,"type":"string"},"is_measure":{"description":"是否为度量字段","example":false,"type":"boolean"},"relation_operator":{"description":"条件符;注:一下括号中的内容为枚举的解释,非条件符组成部分。 EQUAL-TO(=)、 NOT-EQUAL(!=)、 GREATER-THAN(>)、 GREATER-THAN-OR-EQUAL-TO(>=)、 LESS-THAN(<)、 LESS-THAN-OR-EQUAL-TO(<=)、 ””(无条件符)、 BETWEEN、 ABSOLUTE(absolute)、 IN、NOT-IN、 START-WITH、 NOT-START-WITH、 END-WITH、 NOT-END-WITH、 CONTAIN、 NOT-CONTAIN、 NULL(IS NULL)、 NOT-NULL(IS NOT NULL)","example":"CONTAIN","maxLength":20,"minLength":0,"type":"string"},"value":{"description":"条件值信息","properties":{"value_names":{"description":"值名称列表;当value_type为TAG_USER_GROUP、TAG_USER时必须存在","example":null,"maxLength":1000,"minLength":0,"type":"string"},"value_type":{"description":"值类型;ENUM、CONDITION、TAG_USER_GROUP、TAG_USER","example":"CONDITION","maxLength":20,"minLength":0,"type":"string"},"values":{"description":"值列表","example":["123"],"items":{"maxLength":1000,"minLength":0,"type":"string"},"maxItems":1000,"minItems":0,"type":"array"}}}}},"logic_operator":{"description":"当前层sub_conditions条件间关联关系;AND|OR","enum":["AND","OR"],"example":"AND","maxLength":20,"minLength":0,"type":"string"},"sub_conditions":{"description":"行条件信息列表","items":{"$ref":"#/definitions/RowPermissionDescribe"},"maxItems":1000,"minItems":0,"type":"array"}},"type":"object"},"RuleUserDescribe":{"properties":{"user_groups":{"description":"用户组id列表","example":["string"],"items":{"maxLength":100,"minLength":0,"type":"string"},"maxItems":100,"minItems":0,"type":"array"},"users":{"description":"用户列表","example":["string"],"items":{"maxLength":100,"minLength":0,"type":"string"},"maxItems":1000,"minItems":0,"type":"array"}},"type":"object"}},"description":null,"group_id":"5627c46eae194ce98be7980e997bd424","host":"dataartsinsight.cn-north-4.myhuaweicloud.com","id":"fab03599e0224e08a12d0a1a2101e958","info_version":"v1","method":"get","name":"ListPermission","parameters":{},"paths":{"/v1/{project_id}/datasets/{dataset_id}/permissions":{"get":{"description":"获取数据集权限列表","operationId":"ListPermission","parameters":[{"description":"dataset_id","in":"path","maxLength":128,"minLength":0,"name":"dataset_id","required":true,"type":"string"},{"description":"工作空间ID,即控制台的项目ID。","in":"header","maxLength":128,"minLength":0,"name":"X-Workspace-Id","required":true,"type":"string"},{"description":"用户Token。 通过调用IAM服务 获取IAM用户Token接口获取,接口返回的响应消息头中“X-Subject-Token”就是需要获取的用户Token。","in":"header","maxLength":8192,"minLength":0,"name":"X-Auth-Token","required":true,"type":"string"},{"description":"项目ID","in":"path","maxLength":128,"minLength":0,"name":"project_id","required":true,"type":"string"},{"description":"权限类别:ROW或COLUMN","in":"query","maxLength":65535,"minLength":0,"name":"permission_type","required":true,"type":"string"},{"description":"偏移值","format":"int32","in":"query","maximum":1000,"minimum":0,"name":"offset","required":false,"type":"integer"},{"description":"返回列表数量","format":"int32","in":"query","maximum":1000,"minimum":1,"name":"limit","required":false,"type":"integer"},{"description":"排序字段 isOpen","in":"query","maxLength":128,"minLength":0,"name":"sort_key","required":false,"type":"string"},{"description":"排序类别:desc、asc","in":"query","maxLength":128,"minLength":0,"name":"sort_dir","required":false,"type":"string"}],"responses":{"200":{"description":"获取数据集权限配置信息","examples":{"application/json":{"count":3,"page_data":[{"dataset_id":"1e27d682-e129-4589-ad8e-673f02d395f4","display_fields":{"field_map":{"fd7ce9d6-6dae-4126-bd51-36fc0ee3ce54.amount":"amount"},"group_map":{},"user_map":{}},"id":"57b2fdff-3c1b-43cb-8f52-e15e35a361ea","is_open":true,"name":"COLUMN","permission_type":"COLUMN","project_id":"06086703a500d4982fb3c00f9feee911","rule_content":{"column_ids":["fd7ce9d6-6dae-4126-bd51-36fc0ee3ce54.amount"],"first":1,"last":1,"mask_type":"RETAIN_FIRST_N_LAST_M","special_words":["xxx"]},"rule_scope":"ALL","rule_type":"MASK","rule_user":{"user_groups":[],"users":[]},"workspace_Id":"06086703a500d4982fb3c00f9feee911"},{"dataset_id":"83174d13-c2a3-426f-b657-829addaba20e","display_fields":null,"id":"3ee7da33-dace-40a8-8ddf-c6dfa485fbf1","is_open":true,"name":"USER_TAG","permission_type":"ROW","rule_content":{"condition_node":null,"logic_operator":"AND","sub_conditions":[{"condition_node":{"column_id":"ae756722-b74c-4752-9630-43ca65d0d12c.buyer_name","column_name":"buyer_name","is_measure":false,"relation_operator":"","value":{"value_names":["userGroup2"],"value_type":"TAG_USER_GROUP","values":["0b1a3355-4ffa-4340-9b5d-0bd85668cbd4"]}},"logic_operator":null},{"condition_node":{"column_id":"ae756722-b74c-4752-9630-43ca65d0d12c.buyer_name","column_name":"buyer_name","is_measure":false,"relation_operator":"","value":{"value_names":["userGroup2"],"value_type":"TAG_USER_GROUP","values":["0b1a3355-4ffa-4340-9b5d-0bd85668cbd4"]}},"logic_operator":null}]},"rule_scope":"ALL","rule_type":"BY_TAG","rule_user":{"user_groups":[],"users":[]}},{"dataset_id":"83174d13-c2a3-426f-b657-829addaba20e","display_fields":{"field_map":null,"group_map":{},"user_map":{"60716987b3dc4d9fb68b8dff1e733bb4":"auth_test","774d5ac55eeb4950aabc86513080f9ba":"chenxiantao","d6e7d57ed1b94534a6c943de304ae564":"abac_test"}},"id":"85f14b04-ef3d-4ebc-a9ee-c651f563d67c","is_open":true,"name":"测试","permission_type":"ROW","rule_content":{"condition_node":null,"logic_operator":"AND","sub_conditions":[{"condition_node":{"column_id":"ae756722-b74c-4752-9630-43ca65d0d12c.buyer_name","column_name":"buyer_name","is_measure":false,"relation_operator":"CONTAIN","value":{"value_type":"CONDITION","values":["123"]}},"logic_operator":null},{"condition_node":null,"logic_operator":"OR","sub_conditions":[{"condition_node":{"column_id":"ae756722-b74c-4752-9630-43ca65d0d12c.buyer_name","column_name":"buyer_name","is_measure":false,"relation_operator":"CONTAIN","value":{"value_type":"CONDITION","values":["qwe"]}},"logic_operator":null}]}]},"rule_scope":"SPECIFIED","rule_type":"BY_CONDITION","rule_user":{"user_groups":[],"users":["d6e7d57ed1b94534a6c943de304ae564","60716987b3dc4d9fb68b8dff1e733bb4","774d5ac55eeb4950aabc86513080f9ba"]}}]}},"schema":{"$ref":"#/definitions/DatasetPermissionPageVo"}}},"security":[{"apig-auth-iam":[]}],"summary":"获取数据集权限列表","tags":["数据集权限"],"x-apigateway-backend":{"httpEndpoints":{"description":"","method":"GET","path":"/v1/{project_id}/datasets/{dataset_id}/permissions","schemas":"https","timeout":30000},"parameters":[{"description":"","in":"PATH","name":"project_id","origin":"REQUEST","value":"project_id"},{"description":"","in":"PATH","name":"dataset_id","origin":"REQUEST","value":"dataset_id"}],"type":"HTTP"},"x-apigateway-cors":false,"x-apigateway-match-mode":"NORMAL","x-apigateway-query-string-encode":"ENABLE","x-apigateway-request-type":"public","x-is-registered":"Y","x-request-examples-url-1":"GET https://{endpoint}/v1/{project_id}/datasets/{dataset_id}/permissions?limt=10&offset=0&sort_key=isOpen&sort_dir=desc&permission_type=ROW","x-support-sdk":"N"}}},"product_short":"DataArtsInsight","region_id":"cn-north-4","schemes":["HTTPS"],"security_definitions":{"apig-auth-app":{"in":"header","name":"Authorization","type":"apiKey","x-apigateway-auth-type":"AppSigv1"},"apig-auth-app-optional":{"in":"header","name":"Authorization","type":"apiKey","x-apigateway-auth-opt":{"access-auth-type":"optional"},"x-apigateway-auth-type":"AppSigv1"},"apig-auth-iam":{"in":"header","name":"unused","type":"apiKey","x-apigateway-auth-type":"IAM"},"apig-auth-iam-new":{"in":"header","name":"Authorization","type":"apiKey","x-apigateway-auth-type":"IAM_NEW"},"apig-auth-iam-none":{"in":"header","name":"unused","type":"apiKey","x-apigateway-auth-type":"IAM_NONE"},"apig-auth-iam-none-used-authn5":{"in":"header","name":"unused","type":"apiKey","x-apigateway-auth-opt":{"inner-auth-type":"iam_auth_n5"},"x-apigateway-auth-type":"IAM_NONE"},"apig-auth-iam-used-authn5":{"in":"header","name":"unused","type":"apiKey","x-apigateway-auth-opt":{"inner-auth-type":"iam_auth_n5"},"x-apigateway-auth-type":"IAM"}},"summary":"获取数据集权限列表","tags":"数据集权限","uri":null,"version":"2.0"}