{"base_path":"/","components":null,"consumes":"","definitions":{"DatasetPermissionVo":{"properties":{"dataset_id":{"description":"数据集ID","example":"5994345e-1ae0-4b4a-a476-48ea10b4bbd3","maxLength":64,"minLength":0,"type":"string"},"display_fields":{"$ref":"#/definitions/DisplayFieldsDescribe","description":"用户、用户组、字段ID和名称映射关系"},"id":{"description":"规则ID","maxLength":100,"minLength":0,"type":"string"},"is_open":{"description":"当前规则是否生效","enum":[0,1],"example":1,"format":"int32","type":"integer"},"name":{"description":"规则名称","example":"行权限8","maxLength":64,"minLength":0,"type":"string"},"permission_type":{"description":"权限类型:\nCOLUMN、ROW","example":"ROW","maxLength":20,"minLength":0,"type":"string"},"rule_content":{"$ref":"#/definitions/PermissionRuleContent","description":"规则条件详情"},"rule_scope":{"description":"规则范围:ALL:全部用户生效;SPECIFIED:指定用户生效;SPECIFIED_NOT:指定用户不生效。\n权限类型为行权限时允许值:ALL、SPECIFIED\n权限类型为列权限时允许值:ALL、SPECIFIED、SPECIFIED_NOT","example":"ALL","maxLength":20,"minLength":0,"type":"string"},"rule_type":{"description":"规则类型:\n权限类型为COLUMN时:MASK:数据脱敏;FORBID:禁止查看;\n权限类型为ROW时:\nBY_CONDITION:条件组合授权\nBY_TAG:用户标签授权","example":"BY_CONDITION","maxLength":20,"minLength":0,"type":"string"},"rule_user":{"$ref":"#/definitions/RuleUserDescribe","description":"生效用户或用户组列表。\nrule_scope为SPECIFIED或SPECIFIED_NOT时有值;"}},"required":["name","dataset_id","is_open","permission_type","rule_scope","rule_type","rule_user"],"type":"object"},"DisplayFieldsDescribe":{"description":"显示字段描述信息","properties":{"field_map":{"additionalProperties":{"maxLength":128,"minLength":0,"type":"string"},"description":"字段描述","example":{"60716987b3dc4d9fb68b8dff1e733bb4.id":"id"},"type":"object"},"group_map":{"additionalProperties":{"maxLength":128,"minLength":0,"type":"string"},"description":"用户组描述","example":{"60716987b3dc4d9fb68b8dff1e733bb4":"auth_test"},"type":"object"},"user_map":{"additionalProperties":{"maxLength":128,"minLength":0,"type":"string"},"description":"用户描述","example":{"60716987b3dc4d9fb68b8dff1e733bb4":"auth_test"},"type":"object"}},"title":"DisplayFieldsDescribe","type":"object"},"PermissionRuleContent":{"properties":{"column_ids":{"description":"字段id列表","example":["fd7ce9d6-6dae-4126-bd51-36fc0ee3ce54.amount"],"items":{"maxLength":100,"minLength":0,"type":"string"},"maxItems":1000,"minItems":0,"type":"array"},"condition_node":{"description":"条件信息","type":"object"},"first":{"description":"自定义情况下待处理字符的开始位置","example":1,"format":"int32","maximum":2147483647,"minimum":0,"type":"integer"},"last":{"description":"自定义情况下待处理字符的结束位置","example":1,"format":"int32","maximum":2147483647,"minimum":0,"type":"integer"},"logic_operator":{"description":"当前层次下sub_conditions条件间关联关系;AND|OR","enum":["AND","OR"],"example":"string","maxLength":20,"minLength":0,"type":"string"},"mask_type":{"description":"脱敏类型:PRESET_STYLE_1,PRESET_STYLE_2,PRESET_STYLE_3,RETAIN_FIRST_N_LAST_M,RETAIN_N_TO_M,REPLACE_SPECIAL_CHARACTERS,RETAIN_SPECIAL_CHARACTERS,BEFORE_SPECIAL_CHARACTERS,AFTER_SPECIAL_CHARACTERS","enum":["PRESET_STYLE_1","PRESET_STYLE_2","PRESET_STYLE_3","RETAIN_FIRST_N_LAST_M","RETAIN_N_TO_M","REPLACE_SPECIAL_CHARACTERS","RETAIN_SPECIAL_CHARACTERS","BEFORE_SPECIAL_CHARACTERS","AFTER_SPECIAL_CHARACTERS"],"example":"RETAIN_FIRST_N_LAST_M","maxLength":200,"minLength":0,"type":"string"},"special_words":{"description":"特殊字符列表","example":["xxx"],"items":{"maxLength":512,"minLength":0,"type":"string"},"maxItems":1000,"minItems":0,"type":"array"},"sub_conditions":{"description":"行条件列表信息;条件可嵌套","items":{"$ref":"#/definitions/RowPermissionDescribe"},"maxItems":1000,"minItems":0,"type":"array"}},"type":"object"},"RowPermissionDescribe":{"properties":{"condition_node":{"description":"条件信息","properties":{"column_id":{"description":"字段ID","example":"cf610dc3-a43e-4c09-aec5-a7aeedb19822.ca_country","maxLength":100,"minLength":0,"type":"string"},"column_name":{"description":"字段名称","example":"ca_country","maxLength":512,"minLength":0,"type":"string"},"data_type":{"description":"字段类型","example":null,"maxLength":16,"minLength":0,"type":"string"},"execute_expression":{"description":"可执行函数表达式","example":null,"maxLength":100,"minLength":0,"type":"string"},"is_measure":{"description":"是否为度量字段","example":false,"type":"boolean"},"relation_operator":{"description":"条件符;注:一下括号中的内容为枚举的解释,非条件符组成部分。 EQUAL-TO(=)、 NOT-EQUAL(!=)、 GREATER-THAN(>)、 GREATER-THAN-OR-EQUAL-TO(>=)、 LESS-THAN(<)、 LESS-THAN-OR-EQUAL-TO(<=)、 ””(无条件符)、 BETWEEN、 ABSOLUTE(absolute)、 IN、NOT-IN、 START-WITH、 NOT-START-WITH、 END-WITH、 NOT-END-WITH、 CONTAIN、 NOT-CONTAIN、 NULL(IS NULL)、 NOT-NULL(IS NOT NULL)","example":"CONTAIN","maxLength":20,"minLength":0,"type":"string"},"value":{"description":"条件值信息","properties":{"value_names":{"description":"值名称列表;当value_type为TAG_USER_GROUP、TAG_USER时必须存在","example":null,"maxLength":1000,"minLength":0,"type":"string"},"value_type":{"description":"值类型;ENUM、CONDITION、TAG_USER_GROUP、TAG_USER","example":"CONDITION","maxLength":20,"minLength":0,"type":"string"},"values":{"description":"值列表","example":["123"],"items":{"maxLength":1000,"minLength":0,"type":"string"},"maxItems":1000,"minItems":0,"type":"array"}}}}},"logic_operator":{"description":"当前层sub_conditions条件间关联关系;AND|OR","enum":["AND","OR"],"example":"AND","maxLength":20,"minLength":0,"type":"string"},"sub_conditions":{"description":"行条件信息列表","items":{"$ref":"#/definitions/RowPermissionDescribe"},"maxItems":1000,"minItems":0,"type":"array"}},"type":"object"},"RuleUserDescribe":{"properties":{"user_groups":{"description":"用户组id列表","example":["string"],"items":{"maxLength":100,"minLength":0,"type":"string"},"maxItems":100,"minItems":0,"type":"array"},"users":{"description":"用户列表","example":["string"],"items":{"maxLength":100,"minLength":0,"type":"string"},"maxItems":1000,"minItems":0,"type":"array"}},"type":"object"}},"description":null,"group_id":"5627c46eae194ce98be7980e997bd424","host":"dataartsinsight.cn-north-4.myhuaweicloud.com","id":"5842d4d8e18745459db7afa40a6966ef","info_version":"v1","method":"post","name":"CreateAndUpdatePermission","parameters":{},"paths":{"/v1/{project_id}/datasets/{dataset_id}/permissions":{"post":{"description":"配置数据集权限","operationId":"CreateAndUpdatePermission","parameters":[{"description":"dataset_id","in":"path","maxLength":128,"minLength":0,"name":"dataset_id","required":true,"type":"string"},{"description":"工作空间ID,即控制台的项目ID。","in":"header","maxLength":128,"minLength":0,"name":"X-Workspace-Id","required":true,"type":"string"},{"description":"用户Token。 通过调用IAM服务 获取IAM用户Token接口获取,接口返回的响应消息头中“X-Subject-Token”就是需要获取的用户Token。","in":"header","maxLength":8192,"minLength":0,"name":"X-Auth-Token","required":true,"type":"string"},{"description":"项目ID","in":"path","maxLength":128,"minLength":0,"name":"project_id","required":true,"type":"string"},{"description":"行列权限信息","in":"body","name":"CreateAndUpdatePermissionRequestBody","required":true,"schema":{"$ref":"#/definitions/DatasetPermissionVo"}}],"responses":{"200":{"description":"配置成功返回信息","examples":{"application/json":{"dataset_id":"5994345e-1ae0-4b4a-a476-48ea10b4bbd3","display_fields":{"field_map":null,"group_map":{},"user_map":{}},"id":"64b76272-daed-49bd-a7e2-46cd7dab427e","is_open":true,"name":"行权限8","permission_type":"ROW","rule_content":{"condition_node":null,"logic_operator":"AND","sub_conditions":[{"condition_node":{"column_id":"cf610dc3-a43e-4c09-aec5-a7aeedb19822.ca_country","column_name":"ca_country","data_type":null,"execute_expression":null,"is_measure":false,"relation_operator":"CONTAIN","value":{"value_names":null,"value_type":"CONDITION","values":["123"]}},"logic_operator":null,"sub_conditions":[]},{"condition_node":{"column_id":"cf610dc3-a43e-4c09-aec5-a7aeedb19822.ca_zip","column_name":"ca_zip","data_type":null,"execute_expression":null,"is_measure":false,"relation_operator":"CONTAIN","value":{"value_names":null,"value_type":"CONDITION","values":["weq"]}},"logic_operator":null,"sub_conditions":[]},{"condition_node":null,"logic_operator":"OR","sub_conditions":[{"condition_node":{"column_id":"2d83ad17-32bb-4002-9c55-2a47415bdaf6.cs_item_sk","column_name":"cs_item_sk","data_type":null,"execute_expression":null,"is_measure":true,"relation_operator":"NOT-EQUAL","value":{"value_names":null,"value_type":"CONDITION","values":["12"]}},"logic_operator":null,"sub_conditions":[]}]}]},"rule_scope":"ALL","rule_type":"BY_CONDITION","rule_user":{"user_groups":null,"users":[]}}},"schema":{"$ref":"#/definitions/DatasetPermissionVo"}}},"security":[{"apig-auth-iam":[]}],"summary":"配置数据集权限","tags":["数据集权限"],"x-apigateway-backend":{"httpEndpoints":{"description":"","method":"POST","path":"/v1/{project_id}/datasets/{dataset_id}/permissions","schemas":"https","timeout":30000},"parameters":[{"description":"","in":"PATH","name":"project_id","origin":"REQUEST","value":"project_id"},{"description":"","in":"PATH","name":"dataset_id","origin":"REQUEST","value":"dataset_id"}],"type":"HTTP"},"x-apigateway-cors":false,"x-apigateway-match-mode":"NORMAL","x-apigateway-query-string-encode":"ENABLE","x-apigateway-request-type":"public","x-is-registered":"Y","x-request-examples-1":{"dataset_id":"5994345e-1ae0-4b4a-a476-48ea10b4bbd3","display_fields":{"group_map":{},"user_map":{}},"is_open":1,"name":"行权限8","permission_type":"ROW","rule_content":{"condition_node":null,"logic_operator":"AND","sub_conditions":[{"condition_node":{"column_id":"cf610dc3-a43e-4c09-aec5-a7aeedb19822.ca_country","column_name":"ca_country","data_type":null,"execute_expression":null,"is_measure":false,"relation_operator":"CONTAIN","value":{"value_names":null,"value_type":"CONDITION","values":["123"]}},"logic_operator":null,"sub_conditions":[]},{"condition_node":{"column_id":"cf610dc3-a43e-4c09-aec5-a7aeedb19822.ca_zip","column_name":"ca_zip","data_type":null,"execute_expression":null,"is_measure":false,"relation_operator":"CONTAIN","value":{"value_names":null,"value_type":"CONDITION","values":["weq"]}},"logic_operator":null,"sub_conditions":[]},{"condition_node":null,"logic_operator":"OR","sub_conditions":[{"condition_node":{"column_id":"2d83ad17-32bb-4002-9c55-2a47415bdaf6.cs_item_sk","column_name":"cs_item_sk","data_type":null,"execute_expression":null,"is_measure":true,"relation_operator":"NOT-EQUAL","value":{"value_names":null,"value_type":"CONDITION","values":["12"]}},"logic_operator":null,"sub_conditions":[]}]}]},"rule_scope":"ALL","rule_type":"BY_CONDITION","rule_user":{"userGroups":[],"users":[]}},"x-request-examples-text-1":{"dataset_id":"5994345e-1ae0-4b4a-a476-48ea10b4bbd3","display_fields":{"group_map":{},"user_map":{}},"is_open":1,"name":"行权限8","permission_type":"ROW","rule_content":{"condition_node":null,"logic_operator":"AND","sub_conditions":[{"condition_node":{"column_id":"cf610dc3-a43e-4c09-aec5-a7aeedb19822.ca_country","column_name":"ca_country","data_type":null,"execute_expression":null,"is_measure":false,"relation_operator":"CONTAIN","value":{"value_names":null,"value_type":"CONDITION","values":["123"]}},"logic_operator":null,"sub_conditions":[]},{"condition_node":{"column_id":"cf610dc3-a43e-4c09-aec5-a7aeedb19822.ca_zip","column_name":"ca_zip","data_type":null,"execute_expression":null,"is_measure":false,"relation_operator":"CONTAIN","value":{"value_names":null,"value_type":"CONDITION","values":["weq"]}},"logic_operator":null,"sub_conditions":[]},{"condition_node":null,"logic_operator":"OR","sub_conditions":[{"condition_node":{"column_id":"2d83ad17-32bb-4002-9c55-2a47415bdaf6.cs_item_sk","column_name":"cs_item_sk","data_type":null,"execute_expression":null,"is_measure":true,"relation_operator":"NOT-EQUAL","value":{"value_names":null,"value_type":"CONDITION","values":["12"]}},"logic_operator":null,"sub_conditions":[]}]}]},"rule_scope":"ALL","rule_type":"BY_CONDITION","rule_user":{"userGroups":[],"users":[]}},"x-request-examples-url-1":"POST https://{endpoint}/v1/{project_id}/datasets/{dataset_id}/permissions","x-support-sdk":"N"}}},"product_short":"DataArtsInsight","region_id":"cn-north-4","schemes":["HTTPS"],"security_definitions":{"apig-auth-app":{"in":"header","name":"Authorization","type":"apiKey","x-apigateway-auth-type":"AppSigv1"},"apig-auth-app-optional":{"in":"header","name":"Authorization","type":"apiKey","x-apigateway-auth-opt":{"access-auth-type":"optional"},"x-apigateway-auth-type":"AppSigv1"},"apig-auth-iam":{"in":"header","name":"unused","type":"apiKey","x-apigateway-auth-type":"IAM"},"apig-auth-iam-new":{"in":"header","name":"Authorization","type":"apiKey","x-apigateway-auth-type":"IAM_NEW"},"apig-auth-iam-none":{"in":"header","name":"unused","type":"apiKey","x-apigateway-auth-type":"IAM_NONE"},"apig-auth-iam-none-used-authn5":{"in":"header","name":"unused","type":"apiKey","x-apigateway-auth-opt":{"inner-auth-type":"iam_auth_n5"},"x-apigateway-auth-type":"IAM_NONE"},"apig-auth-iam-used-authn5":{"in":"header","name":"unused","type":"apiKey","x-apigateway-auth-opt":{"inner-auth-type":"iam_auth_n5"},"x-apigateway-auth-type":"IAM"}},"summary":"配置数据集权限","tags":"数据集权限","uri":null,"version":"2.0"}