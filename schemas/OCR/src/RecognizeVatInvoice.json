{"base_path":"/","components":null,"consumes":"[\"application/json;charset=UTF-8\"]","definitions":{"BelongItemList":{"description":"","properties":{"amount":{"description":"金额。","type":"string"},"item_number":{"description":"序号。","type":"string"},"name":{"description":"货物或应税劳务、服务名称。","type":"string"},"quantity":{"description":"数量。","type":"string"},"specification":{"description":"规格型号。","type":"string"},"tax":{"description":"税额。","type":"string"},"tax_rate":{"description":"税率。","type":"string"},"unit":{"description":"单位。","type":"string"},"unit_price":{"description":"单价。","type":"string"}}},"ItemList":{"description":"","properties":{"amount":{"description":"金额。","type":"string"},"end_date":{"description":"通行日期止。\n当\"type\"被识别为\"toll\"且\"advanced_mode\"设置为“true”时才返回。","type":"string"},"license_plate_number":{"description":"车牌号码。\n当\"type\"被识别为\"toll\"且\"advanced_mode\"设置为“true”时才返回。","type":"string"},"name":{"description":"货物或应税劳务、服务名称。","type":"string"},"quantity":{"description":"数量。","type":"string"},"specification":{"description":"规格型号。","type":"string"},"start_date":{"description":"通行日期起。\n当\"type\"被识别为\"toll\"且\"advanced_mode\"设置为“true”时才返回。","type":"string"},"tax":{"description":"税额。","type":"string"},"tax_rate":{"description":"税率。","type":"string"},"unit":{"description":"单位。","type":"string"},"unit_price":{"description":"单价。","type":"string"},"vehicle_type":{"description":"车辆类型。\n当\"type\"被识别为\"toll\"且\"advanced_mode\"设置为“true”时才返回。","type":"string"}}},"PassengerTravelItemList":{"description":"","properties":{"arrival_location":{"description":"到达地。","type":"string"},"class":{"description":"等级。","type":"string"},"departure_location":{"description":"出发地。","type":"string"},"id_number":{"description":"有效身份证件号。","type":"string"},"transportation_type":{"description":"交通工具类型。","type":"string"},"travel_date":{"description":"出行日期。","type":"string"},"traveler_name":{"description":"出行人。","type":"string"}}},"VatInvoiceErrorResponseBody":{"description":"","properties":{"error_code":{"description":"调用失败时的错误码,具体请参见[错误码](https://support.huaweicloud.com/api-ocr/ocr_03_0028.html)。当出现错误码“ModelArts.4204”时,请参考[为什么调用API时提示“ModelArts.4204”?](https://support.huaweicloud.com/ocr_faq/ocr_01_0031.html)章节。\n调用成功时无此字段。","type":"string"},"error_msg":{"description":"调用失败时的错误信息。\n调用成功时无此字段。","type":"string"}},"required":["error_code","error_msg"]},"VatInvoiceRequestBody":{"description":"","properties":{"advanced_mode":{"description":"默认为false,如果传参为true,则返回更多字段","type":"boolean"},"image":{"description":"该参数与url二选一。图像数据,base64编码,要求base64编码后大小不超过10MB。图片最小边不小于100px,最长边不超过8192px,支持JPEG、JPG、PNG、BMP、TIFF、PDF、OFD格式,多页PDF仅识别第一页。\n\n图片文件Base64编码字符串,点击[这里](https://support.huaweicloud.com/ocr_faq/ocr_01_0032.html)查看详细获取方式。","type":"string"},"page_num":{"description":"页码,默认为1,返回第一页结果。如果传参不大于PDF页数,则返回对应PDF页的结果。","format":"int32","type":"integer"},"return_text_location":{"description":"识别到的文字块的区域位置信息。可选值包括:\n\n- true:返回各个文字块区域\n\n- false:不返回各个文字块区域\n\n如果无该参数,系统默认不返回文字块区域。如果输入参数不是Boolean类型,则会报非法参数错误。","type":"boolean"},"url":{"description":"与image二选一\n\n要求图片Base64编码后大小不超过10MB。\n图片最小边不小于100px,最长边不超过8192px,支持JPEG、JPG、PNG、BMP、TIFF、PDF、OFD格式,多页PDF仅识别第一页。\n图片的URL路径,目前支持:\n- 公网http/https url\n- OBS提供的url,使用OBS数据需要进行授权。包括对服务授权、临时授权、匿名公开授权,详情参见[配置OBS访问权限](https://support.huaweicloud.com/api-ocr/ocr_03_0132.html)。\n> 说明:\n- 接口响应时间依赖于图片的下载时间,如果图片下载时间过长,会返回接口调用失败。\n- 请保证被检测图片所在的存储服务稳定可靠,推荐使用OBS服务存储图片数据。\n- url中不能存在中文字符,若存在,中文需要进行utf8编码。","type":"string"}}},"VatInvoiceResponseBody":{"description":"","properties":{"result":{"$ref":"#/definitions/VatInvoiceResult","description":"调用成功时表示调用结果。\n\n调用失败时无此字段。"}},"required":["result"]},"VatInvoiceResult":{"properties":{"attribution":{"description":"发票归属地。 \n当\"advanced_mode\"设置为\"true\"时才返回。","type":"string"},"belong_buyer_name":{"description":"销货清单的购买方名称。\n当传入图片为发票销货清单时返回此字段。","type":"string"},"belong_current_page":{"description":"销货清单的当前页码。\n当传入图片为发票销货清单时返回此字段。","type":"string"},"belong_discount_amount":{"description":"销货清单的折扣金额。\n当传入图片为发票销货清单时返回此字段。","type":"string"},"belong_discount_tax":{"description":"销货清单的折扣税额。\n当传入图片为发票销货清单时返回此字段。","type":"string"},"belong_issue_date":{"description":"销货清单的填开日期。\n当传入图片为发票销货清单时返回此字段。","type":"string"},"belong_item_list":{"description":"销货清单的货物(劳务)名称列表。\n当传入图片为发票销货清单时返回此字段。","items":{"$ref":"#/definitions/BelongItemList"},"type":"array"},"belong_number":{"description":"销货清单的开票号码。\n当传入图片为发票销货清单时返回此字段。","type":"string"},"belong_pages":{"description":"销货清单的总页码数。\n当传入图片为发票销货清单时返回此字段。","type":"string"},"belong_remarks":{"description":"销货清单的备注。\n当传入图片为发票销货清单时返回此字段。","type":"string"},"belong_seller_name":{"description":"销货清单的销售方名称。\n当传入图片为发票销货清单时返回此字段。","type":"string"},"belong_subtotal_amount":{"description":"销货清单的总计或者合计金额。\n当传入图片为发票销货清单时返回此字段。","type":"string"},"belong_subtotal_tax":{"description":"销货清单的总计税额。\n当传入图片为发票销货清单时返回此字段。","type":"string"},"belong_sum_amount":{"description":"销货清单的小计金额。\n当传入图片为发票销货清单时返回此字段。","type":"string"},"belong_sum_tax":{"description":"销货清单的小计税额。\n当传入图片为发票销货清单时返回此字段。","type":"string"},"belong_vat_code":{"description":"所属的增值税发票代码。\n当传入图片为发票销货清单时返回此字段。","type":"string"},"buyer_address":{"description":"购买方地址、电话。","type":"string"},"buyer_bank":{"description":"购买方开户行及帐号。","type":"string"},"buyer_id":{"description":"购买方纳税人识别号。","type":"string"},"buyer_name":{"description":"购买方名称。","type":"string"},"check_code":{"description":"发票校验码,特定类型增值税发票内不存在该信息时返回空字符串。","type":"string"},"city":{"description":"市。","type":"string"},"code":{"description":"发票代码。","type":"string"},"confidence":{"description":"各个字段的置信度。 当“advanced_mode”设置为“true”时才返回。","properties":{},"type":"object"},"encryption_block":{"description":"密码区。","type":"string"},"invoice_tag":{"description":"增值税发票左上角标志。取值包含:通行费、代开、成品油、收购、机动车、旅客运输服务。\n当\"advanced_mode\"设置为\"true\"时才返回。","type":"string"},"issue_date":{"description":"开票日期。","type":"string"},"issuer":{"description":"开票人。 \n当\"advanced_mode\"设置为\"true\"时才返回。","type":"string"},"item_list":{"description":"货物或应税劳务列表。","items":{"$ref":"#/definitions/ItemList"},"type":"array"},"machine_number":{"description":"机器编号。 \n当\"advanced_mode\"设置为\"true\"时才返回。","type":"string"},"number":{"description":"发票号码。","type":"string"},"passenger_travel_item_list":{"description":"旅客运输服务的出行信息列表。\n当传入图片为旅客运输服务发票时返回此字段。","items":{"$ref":"#/definitions/PassengerTravelItemList"},"type":"array"},"print_code":{"description":"机打代码。\n当\"advanced_mode\"设置为\"true\"时才返回。","type":"string"},"print_number":{"description":"机打号码。 \n当\"advanced_mode\"设置为\"true\"时才返回。","type":"string"},"province":{"description":"省。","type":"string"},"receiver":{"description":"收款人。 \n当\"advanced_mode\"设置为\"true\"时才返回。","type":"string"},"remarks":{"description":"备注。 \n当\"advanced_mode\"设置为\"true\"时才返回。","type":"string"},"reviewer":{"description":"复核。 \n当\"advanced_mode\"设置为\"true\"时才返回。","type":"string"},"sales_mark":{"description":"是否是销货清单,可选值为:\n- true:输入图片是销货清单。\n- false:输入图片不是销货清单。","type":"boolean"},"seller_address":{"description":"销售方地址、电话。","type":"string"},"seller_bank":{"description":"销售方开户行及帐号。","type":"string"},"seller_id":{"description":"销售方纳税人识别号。","type":"string"},"seller_name":{"description":"销售方名称。","type":"string"},"seller_seal":{"description":"销售方发票专用章。 \n当\"advanced_mode\"设置为\"true\"时才返回。","items":{"description":"销售方发票专用章。","type":"string"},"type":"array"},"serial_number":{"description":"发票联次。 \n当\"advanced_mode\"设置为\"true\"时才返回。","type":"string"},"subtotal_amount":{"description":"合计金额。","type":"string"},"subtotal_tax":{"description":"合计税额。","type":"string"},"sum_amount":{"description":"小计金额,当传入多页PDF时返回此字段。","type":"string"},"sum_tax":{"description":"小计税额,当传入多页PDF时返回此字段。","type":"string"},"supervision_seal":{"description":"发票监制章。 \n当\"advanced_mode\"设置为\"true\"时才返回。","items":{"description":"发票监制章。","type":"string"},"type":"array"},"text_location":{"description":"文本框在原图位置。输出左上、右上、右下、左下四个点坐标。当\"return_text_location\"设置为“true”时才返回。","properties":{},"type":"object"},"title":{"description":"增值税发票标题","type":"string"},"total":{"description":"价税合计。","type":"string"},"total_in_words":{"description":"价税合计(大写)。 \n当\"advanced_mode\"设置为\"true\"时才返回。","type":"string"},"type":{"description":"增值税发票类型,取值包括:\n- special: 增值税专用发票\n\n- normal: 增值税普通发票\n\n- electronic: 增值税电子普通发票\n\n- special_electronic: 增值税电子专用发票\n\n- toll: 增值税电子普通发票(通行费)\n\n- roll: 增值税普通发票(卷票)\n\n- fully_digitalized_special_electronic: 全电专用发票\n\n- fully_digitalized_normal_electronic: 全电普通发票","type":"string"}}}},"description":null,"group_id":"1c08976078264963b5b1b4d4fcddc6cb","host":"ocr.cn-north-4.myhuaweicloud.com","id":"7bb4b8e565a7401f855bc1e7b9a75f1c","info_version":"v1","method":"post","name":"RecognizeVatInvoice","parameters":{},"paths":{"/v2/{project_id}/ocr/vat-invoice":{"post":{"consumes":[],"deprecated":false,"description":"识别增值税发票的类别,以及图片中的文字内容,并以json格式返回识别的结构化结果,不支持真伪验证。该接口的使用限制请参见[约束与限制](https://support.huaweicloud.com/productdesc-ocr/ocr_01_0006.html#section15),详细使用指导请参见[OCR服务使用简介](https://support.huaweicloud.com/qs-ocr/ocr_05_0001.html)章节。\n说明:\n该增值税发票仅限于中华人民共和国境内使用的增值税发票。\n支持的增值税发票包括:增值税专用发票、增值税普通发票、增值税电子普通发票、增值税电子专用发票、增值税电子普通发票(通行费)、增值税普通发票(卷票)。\n如果图片中包含多张卡证票据,请调用智能分类识别服务。","operationId":"RecognizeVatInvoice","parameters":[{"description":"用户Token。\n用于获取操作API的权限。[获取Token接口](https://support.huaweicloud.com/api-ocr/ocr_03_0005.html)响应消息头中X-Subject-Token的值即为Token。","in":"header","name":"X-Auth-Token","required":true,"type":"string","x-example":"MIINRwYJKoZIhvcNAQcCoIINODCCDTQCAQExDTALBglghkgBZQMEAgEwgguVBgkqhkiG...","x-order":1},{"description":"项目ID,您可以从[获取项目ID](https://support.huaweicloud.com/api-ocr/ocr_03_0130.html)中获取。","in":"path","name":"project_id","required":true,"type":"string","x-order":2},{"description":"企业项目ID。OCR支持通过企业项目管理(EPS)对不同用户组和用户的资源使用,进行分账。\n获取方法:进入“[企业项目管理](https://console.huaweicloud.com/eps/?region=cn-north-4#/projects/list)”页面,单击企业项目名称,在企业项目详情页获取Enterprise-Project-Id(企业项目ID)。\n企业项目创建步骤请参见用户指南。\n> 说明:\n创建企业项目后,在传参时,有以下三类场景。\n- 携带正确的ID,正常使用OCR服务,账单的企业项目会被分类到企业ID对应的企业项目中。\n- 携带格式正确但不存在的ID,正常使用OCR服务,账单的企业项目会显示对应不存在的企业项目ID。\n- 不携带ID或格式错误ID(包含特殊字符等),正常使用OCR服务,账单的企业项目会被分类到\"default\"中。","in":"header","name":"Enterprise-Project-Id","required":false,"type":"string","x-order":3},{"description":"This is a auto create Body Object","in":"body","name":"RecognizeVatInvoiceRequestBody","required":true,"schema":{"$ref":"#/definitions/VatInvoiceRequestBody"}}],"produces":[],"responses":{"200":{"description":"成功响应示例","examples":{"application/json":{"result":{"attribution":"深圳","buyer_address":"XXXX","buyer_bank":"XX银行20384543252XXXX","buyer_id":"917107277650880665","buyer_name":"XX有限公司","check_code":"","city":"深圳市","code":"310316XXXX","confidence":{"attribution":0.996,"buyer_address":0.0,"buyer_bank":"0. 0000","buyer_id":0.9869,"buyer_name":0.9854,"check_code":0.843,"city":0.9936,"code":0.99999,"encryption_block":0.9922,"issue_date":0.9848,"issuer":0.9872,"item_list":[{"amount":0.8227,"end_date":0.0,"license_plate_number":0.0,"name":0.9779,"quantity":0.0,"specification":0.0,"start_date":0.0,"tax":0.8394,"tax_rate":0.5183,"unit":0.0,"unit_price":0.0,"vehicle_type":0.0}],"machine_number":0.907,"number":1.9856,"print_number":0.0,"province":0.9936,"receiver":0.985,"remarks":0.8762,"reviewer":0.9759,"seller_address":0.9952,"seller_bank":0.9829,"seller_id":0.9914,"seller_name":0.9883,"seller_seal":[0.9883,0.9914,0.9999],"serial_number":0.9652,"subtotal_amount":0.9533,"subtotal_tax":0.9167,"supervision_seal":[0.997,0.9945,0.996],"title":0.9962,"total":0.9444,"total_in_words":0.9854,"type":0.996},"encryption_block":"6/+1+733<672085+063>82>30<1872/1<>*312671<9<1-11208-746599*6/>+7>2163+141-8737*4932+7970*11892126>0*-+7+78>1","issue_date":"2017年08月30日","issuer":"XX","item_list":[{"amount":"8400.00","end_date":"","license_plate_number":"","name":"食品A","quantity":"300","specification":"200g/盒","start_date":"","tax":"1428.00","tax_rate":"17%","unit":"盒","unit_price":"28.00","vehicle_type":""}],"machine_number":"310316XXXX","number":"60543XXX","print_number":"","province":"广东省","receiver":"XX","remarks":"校验码11XXXXXXXXXXX","reviewer":"XX","seller_address":"XXXX","seller_bank":"XX银行991101526087XXXX","seller_id":"9351099411892126","seller_name":"餐饮有限公司","seller_seal":["深圳市XXX有限公司","91440300736259277E","发票专用章"],"serial_number":"第二联:发票联","subtotal_amount":"¥8850.00","subtotal_tax":"¥1504.50","supervision_seal":["全国统一发票监制章","深圳","国家税务总局监制"],"title":"深圳增值税电子专用发票","total":"¥10354.50","total_in_words":"肆仟肆佰玖拾圆整","type":"special"}},"application/json-1":{"result":{"belong_buyer_name":"XX有限公司合肥分公司","belong_current_page":"2","belong_discount_amount":"","belong_discount_tax":"","belong_issue_date":"","belong_item_list":[{"amount":"-1.69","item_number":"20","name":"肉及肉制品*帝皇鲜澳洲长期谷饲M3安格斯牛键肉500g/袋","quantity":"","specification":"","tax":"***","tax_rate":"免税","unit":"","unit_price":""}],"belong_number":"144XXX70","belong_pages":"2","belong_remarks":"","belong_seller_name":"XX有限公司","belong_subtotal_amount":"¥133.62","belong_subtotal_tax":"¥11.86","belong_sum_amount":"¥27.73","belong_sum_tax":"¥3.31","belong_vat_code":"03XXXX900311","confidence":{"belong_buyer_name":0.9794,"belong_current_page":0.9184,"belong_discount_amount":0,"belong_discount_tax":0,"belong_issue_date":0,"belong_item_list":[{"amount":0.9693,"item_number":0.9396,"name":"0.9629,","quantity":0,"specification":0,"tax":0.8532,"tax_rate":0.9804,"unit":0,"unit_price":0}],"belong_number":0.9723,"belong_pages":0.951,"belong_remarks":0,"belong_seller_name":0.96,"belong_subtotal_amount":0.9646,"belong_subtotal_tax":0.9538,"belong_sum_amount":0.9697,"belong_sum_tax":"0.9676,","belong_vat_code":0.9785,"sales_mark":0.9725},"sales_mark":true,"text_location":[]}}},"headers":{"X-Request-Id":{"description":"This field is the request ID number for task tracking. Format is request_uuid-timestamp-hostname.","type":"string"}},"schema":{"$ref":"#/definitions/VatInvoiceResponseBody"}},"400":{"description":"失败响应示例","examples":{"application/json":{"result":{"error_code":"AIS.0103","error_msg":"The image size does not meet the requirements."}}},"schema":{"$ref":"#/definitions/VatInvoiceErrorResponseBody"}}},"summary":"增值税发票识别","tags":["增值税发票识别"],"x-is-registered":"Y","x-name":"增值税发票识别","x-open-region-cloud":"hc","x-order":1,"x-request-examples-1":{"advanced_mode":true,"image":"/9j/4AAQSkZJRgABAgEASABIAAD/4RFZRXhpZgAATU0AKgAAAA..."},"x-request-examples-2":{"advanced_mode":true,"url":"https://BucketName.obs.myhuaweicloud.com/ObjectName"},"x-request-examples-description-1":"传入增值税发票的base64编码进行文字识别,并通过设置“advanced_mode”返回发票类型、联次、金额等信息。","x-request-examples-description-2":"传入增值税发票的url进行文字识别,并通过设置“advanced_mode”返回发票类型、联次、金额等信息。","x-request-examples-url-1":"POST https://{endpoint}/v2/{project_id}/ocr/vat-invoice","x-request-examples-url-2":"POST https://{endpoint}/v2/{project_id}/ocr/vat-invoice","x-support-sdk":"Y"}}},"product_short":"OCR","region_id":"cn-north-4","schemes":["HTTPS"],"security_definitions":null,"summary":"增值税发票识别","tags":"增值税发票识别","uri":null,"version":"2.0"}