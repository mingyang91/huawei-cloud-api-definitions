{"base_path":"/","components":null,"consumes":"[\"application/json;charset=UTF-8\"]","definitions":{"TrainTicketErrorResponseBody":{"description":"","properties":{"error_code":{"description":"调用失败时的错误码,具体请参见错误码。\n调用成功时无此字段。","type":"string"},"error_msg":{"description":"调用失败时的错误信息。\n调用成功时无此字段。","type":"string"}},"required":["error_code","error_msg"]},"TrainTicketRequestBody":{"description":"","properties":{"image":{"description":"与url二选一。\n图片的Base64编码,要求单个图片、OFD文件其对应的Base64编码不超过10MB。文件在Base64编码后会大于文件原本大小,请注意做好边界判断,建议文件大小不超过7MB。\n图片最小边不小于15px,最长边不超过8192px,支持JPEG、JPG、PNG、BMP、TIFF、OFD格式。OFD格式数据仅支持铁路电子客票。\n\n图片文件Base64编码字符串,点击[这里](https://support.huaweicloud.com/ocr_faq/ocr_01_0032.html)查看详细获取方式。","type":"string"},"return_text_location":{"description":"识别到的文字块的区域位置信息。可选值包括:\n\n- true:返回各个文字块区域\n\n- false:不返回各个文字块区域\n\n如果无该参数,系统默认不返回文字块区域。如果输入参数不是Boolean类型,则会报非法参数错误。","type":"boolean"},"url":{"description":"与image二选一。\n\n单个图片、OFD文件其对应的Base64编码不超过10MB。文件在Base64编码后会大于文件原本大小,请注意做好边界判断,建议文件大小不超过7MB。\n图片最小边不小于15px,最长边不超过8192px,支持JPEG、JPG、PNG、BMP、TIFF、OFD格式。OFD格式数据仅支持铁路电子客票。\n图片的URL路径,目前支持:\n- 公网http/https url\n- OBS提供的url,使用OBS数据需要进行授权。包括对服务授权、临时授权、匿名公开授权,详情参见[配置OBS访问权限](https://support.huaweicloud.com/api-ocr/ocr_03_0132.html)。\n> 说明:\n- 接口响应时间依赖于图片的下载时间,如果图片下载时间过长,会返回接口调用失败。\n- 请保证被检测图片所在的存储服务稳定可靠,推荐使用OBS服务存储图片数据。\n- url中不能存在中文字符,若存在,中文需要进行utf8编码。","type":"string"}}},"TrainTicketResponseBody":{"description":"","properties":{"result":{"$ref":"#/definitions/TrainTicketResult","description":"调用成功时表示调用结果。\n\n调用失败时无此字段。"}},"required":["result"]},"TrainTicketResult":{"properties":{"air_conditioning":{"description":"是否是空调车厢","type":"string"},"amount_in_figures":{"description":"小写票据金额","type":"string"},"amount_in_words":{"description":"大写票据金额","type":"string"},"area":{"description":"地区","type":"string"},"buyer_name":{"description":"购买方名称","type":"string"},"check_port":{"description":"检票口信息。","type":"string"},"confidence":{"description":"相关字段的置信度信息,置信度越大,表示本次识别的对应字段的可靠性越高,在统计意义上,置信度越大,准确率越高。\n置信度由算法给出,不直接等价于对应字段的准确率。","properties":{},"type":"object"},"departure_station":{"description":"始发站。","type":"string"},"departure_station_en":{"description":"始发站拼音。","type":"string"},"departure_time":{"description":"开车时间。","type":"string"},"destination_station":{"description":"终点站。","type":"string"},"destination_station_en":{"description":"终点站拼音。","type":"string"},"discount_mark":{"description":"打折标识","type":"string"},"id_number":{"description":"车票持有人的身份证号。","type":"string"},"invoice_number":{"description":"发票号码","type":"string"},"invoice_style":{"description":"类型。包含以下几种类型:\n- paper:纸质火车票\n- electronic:铁路电子客票\n- refund_old:退票费报销凭证\n- refund_new:纸质火车票退票凭证 \n- refund_electronic:铁路电子客票退票凭证","type":"string"},"issue_date":{"description":"开票时间","type":"string"},"log_id":{"description":"车票最下方的序列号。","type":"string"},"name":{"description":"车票持有人姓名。","type":"string"},"original_invoice_number":{"description":"原发票号码","type":"string"},"receipt_number":{"description":"收据编码","type":"string"},"sale_location":{"description":"车票售票地点。","type":"string"},"sale_method":{"description":"售票方式。","type":"string"},"seal_mark":{"description":"是否有印章,True表示有印章,False表示不含印章,字段默认为False","type":"boolean"},"seat_category":{"description":"座位类别。","type":"string"},"seat_number":{"description":"座位号。","type":"string"},"serial_number":{"description":"电子客票号","type":"string"},"tax_amount":{"description":"税金价格","type":"string"},"tax_rate":{"description":"税率","type":"string"},"text_location":{"description":"对应所有在原图上识别到的字段位置信息,包含所有文字区域四个顶点的二维坐标(x,y)。采用图像坐标系,坐标原点为图片左上角,x轴沿水平方向,y轴沿竖直方向。\n\n> 说明:输入数据格式是OFD时,返回的字段坐标为空列表。","properties":{},"type":"object"},"ticket_changing":{"description":"标识信息,包含始发改签、退票、差额退票等。","type":"string"},"ticket_id":{"description":"火车票左上角的车票ID。","type":"string"},"ticket_price":{"description":"票价,当为退票凭证时,表示退票费。","type":"string"},"title":{"description":"标题","type":"string"},"total_amount_excluding_tax":{"description":"不含税价格","type":"string"},"train_number":{"description":"车次。","type":"string"},"unified_social_credit_code":{"description":"统一社会信用号码","type":"string"}}}},"description":null,"group_id":"1c08976078264963b5b1b4d4fcddc6cb","host":"ocr.cn-north-4.myhuaweicloud.com","id":"75c33599e36c44a994bb8616431d6c34","info_version":"v1","method":"post","name":"RecognizeTrainTicket","parameters":{},"paths":{"/v2/{project_id}/ocr/train-ticket":{"post":{"consumes":[],"deprecated":false,"description":"识别火车票中的文字信息,并返回识别的结构化结果。该接口的使用限制请参见[约束与限制](https://support.huaweicloud.com/productdesc-ocr/ocr_01_0006.html#section22),详细使用指导请参见[OCR服务使用简介](https://support.huaweicloud.com/qs-ocr/ocr_05_0001.html)章节。\n说明:\n如果图片中包含多张卡证票据,请调用[智能分类识别](https://apiexplorer.developer.huaweicloud.com/apiexplorer/doc?product=OCR&api=AutoClassification)服务。","operationId":"RecognizeTrainTicket","parameters":[{"description":"用户Token。\n用于获取操作API的权限。[获取Token接口](https://support.huaweicloud.com/api-ocr/ocr_03_0005.html)响应消息头中X-Subject-Token的值即为Token。","in":"header","name":"X-Auth-Token","required":true,"type":"string","x-example":"MIINRwYJKoZIhvcNAQcCoIINODCCDTQCAQExDTALBglghkgBZQMEAgEwgguVBgkqhkiG...","x-order":1},{"description":"项目ID,您可以从[获取项目ID](https://support.huaweicloud.com/api-ocr/ocr_03_0130.html)中获取。","in":"path","name":"project_id","required":true,"type":"string","x-order":2},{"description":"企业项目ID。OCR支持通过企业项目管理(EPS)对不同用户组和用户的资源使用,进行分账。\n获取方法:进入“[企业项目管理](https://console.huaweicloud.com/eps/?region=cn-north-4#/projects/list)”页面,单击企业项目名称,在企业项目详情页获取Enterprise-Project-Id(企业项目ID)。\n企业项目创建步骤请参见用户指南。\n> 说明:\n创建企业项目后,在传参时,有以下三类场景。\n- 携带正确的ID,正常使用OCR服务,账单的企业项目会被分类到企业ID对应的企业项目中。\n- 携带格式正确但不存在的ID,正常使用OCR服务,账单的企业项目会显示对应不存在的企业项目ID。\n- 不携带ID或格式错误ID(包含特殊字符等),正常使用OCR服务,账单的企业项目会被分类到\"default\"中。","in":"header","name":"Enterprise-Project-Id","required":false,"type":"string","x-order":3},{"description":"This is a train ticket Body Object","in":"body","name":"RecognizeTrainTicketRequestBody","required":true,"schema":{"$ref":"#/definitions/TrainTicketRequestBody"}}],"produces":[],"responses":{"200":{"description":"成功响应示例","examples":{"application/json":{"result":{"air_conditioning":"","amount_in_figures":"","amount_in_words":"","area":"","buyer_name":"","check_port":"B6","confidence":{"air_conditioning":0,"amount_in_figures":0,"amount_in_words":0,"area":0,"buyer_name":0,"check_port":0.9165,"destination_station":0.9998,"destination_station_en":0.9848,"discount_mark":0,"id_number":0.9986,"invoice_number":0,"issue_date":0,"log_id":0.9968,"name":0.996,"original_invoice_number":0,"receipt_number":0,"sale_method":0.9836,"seal_mark":false,"seat_category":0.9958,"seat_number":0.9985,"serial_number":0,"starting_station":0.9982,"starting_station_en":0.9254,"starting_time":0.5141,"tax_amount":0,"tax_rate":0,"ticket_changing":0.9,"ticket_id":0.9992,"ticket_office":0.9984,"ticket_rates":0.9977,"title":0,"total_amount_excluding_tax":0,"train_number":0.9968,"unified_social_credit_code":0},"departure_station":"长沙南站","departure_station_en":"Changshanan","departure_time":"2017年12月12日20:39","destination_station":"武汉站","destination_station_en":"Wuhan","discount_mark":"","id_number":"1402271998****0012","invoice_number":"","invoice_style":"paper","issue_date":"","log_id":"65818301991213K090841","name":"xxx","original_invoice_number":"","receipt_number":"","sale_location":"长沙南售","sale_method":"网","seal_mark":false,"seat_category":"二等座","seat_number":"03车03C号","serial_number":"","tax_amount":"","tax_rate":"","ticket_changing":"No","ticket_id":"K090841","ticket_price":"164.5元","title":"","total_amount_excluding_tax":"","train_number":"G1138","unified_social_credit_code":""}}},"headers":{"X-Request-Id":{"description":"This field is the request ID number for task tracking. Format is request_uuid-timestamp-hostname.","type":"string"}},"schema":{"$ref":"#/definitions/TrainTicketResponseBody"}},"400":{"description":"失败响应示例","examples":{"application/json":{"error_code":"AIS.0103","error_msg":"The image size does not meet the requirements."}},"schema":{"$ref":"#/definitions/TrainTicketErrorResponseBody"}}},"summary":"火车票识别","tags":["火车票识别"],"x-is-registered":"Y","x-name":"火车票识别","x-open-region-cloud":"hc","x-order":1,"x-request-examples-1":{"image":"/9j/4AAQSkZJRgABAgEASABIAAD/4RFZRXhpZgAATU0AKgAAAA..."},"x-request-examples-2":{"url":"https://BucketName.obs.myhuaweicloud.com/ObjectName"},"x-request-examples-description-1":"传入火车票图片的base64编码进行文字识别","x-request-examples-description-2":"传入火车票图片的url进行文字识别","x-request-examples-url-1":"POST https://{endpoint}/v2/{project_id}/ocr/train-ticket","x-request-examples-url-2":"POST https://{endpoint}/v2/{project_id}/ocr/train-ticket","x-support-sdk":"Y"}}},"product_short":"OCR","region_id":"cn-north-4","schemes":["HTTPS"],"security_definitions":null,"summary":"火车票识别","tags":"火车票识别","uri":null,"version":"2.0"}