{"base_path":"/","components":null,"consumes":"[\"application/json;charset=UTF-8\"]","definitions":{"CharListIem":{"properties":{"char":{"description":"单字符识别结果。","type":"string"},"char_confidence":{"description":"单字符的置信度,置信度越大,表示本次识别的文字的可靠性越高,在统计意义上,置信度越大,准确率越高。置信度由算法给出,不直接等价于对应字段的准确率。","format":"float","type":"number"},"char_location":{"description":"单字符的位置信息,列表形式,分别表示文字块4个顶点的x, y坐标;坐标原点为图片左上角,x轴沿水平方向,y轴沿竖直方向。","items":{"description":"文字块位置信息。","items":{"format":"int32","type":"integer"},"type":"array"},"type":"array"}}},"GeneralTableErrorResponseBody":{"description":"","properties":{"error_code":{"description":"调用失败时的错误码,具体请参见错误码。\n调用成功时无此字段。","type":"string"},"error_msg":{"description":"调用失败时的错误信息。\n调用成功时无此字段。","type":"string"}},"required":["error_code","error_msg"]},"GeneralTableRequestBody":{"description":"","properties":{"image":{"description":"与url二选一。\n\n图片的Base64编码,要求单个图片其对应的Base64编码不超过10MB。文件在Base64编码后会大于文件原本大小,请注意做好边界判断,建议文件大小不超过7MB。\n图片最小边不小于15px,最长边不超过8192px,支持JPEG、JPG、PNG、BMP、TIFF格式。\n\n图片文件Base64编码字符串,点击[这里](https://support.huaweicloud.com/ocr_faq/ocr_01_0032.html)查看详细获取方式。","type":"string"},"return_char_location":{"description":"返回单字符的坐标信息,可选值包括:\n- true:返回单字符的坐标\n- false:不返回\n\n未传入该参数时默认为false,即不返回。如果此参数为true时,return_text_loaction必须为true","type":"boolean"},"return_confidence":{"description":"是否返回置信度的开关,可选值包括:\n- true:返回置信度\n- false:不返回置信度\n\n> 说明:\n- 如果未传入该参数,系统默认为“false”,即不返回置信度。","type":"boolean"},"return_excel":{"description":"是否返回表格转换Microsoft Excel的base64编码字段。可选值包括:\n- true:返回'excel'字段,表示xlsx格式的表格识别结果的base64编码\n- false:不返回。默认为false\n\n> 说明:\n- 对返回的Excel编码,可用Python函数 base64.b64decode解码后保存为.xlsx文件。","type":"boolean"},"return_rectification_matrix":{"description":"可选值包括:\n- true:返回透视变换矩阵\n- false:不返回\n\n未传入该参数时默认为false,即不返回透视变换矩阵。","type":"boolean"},"return_text_location":{"description":"返回文本块坐标及单元格坐标信息,可选值如下所示:\n- true:返回文本块和单元格坐标\n- false:不返回\n\n> 说明:\n- 如果未传入该参数时默认为false,即不返回。","type":"boolean"},"url":{"description":"与image二选一。\n\n单个图片其对应的Base64编码不超过10MB。文件在Base64编码后会大于文件原本大小,请注意做好边界判断,建议文件大小不超过7MB。\n图片最小边不小于15px,最长边不超过8192px,支持JPEG、JPG、PNG、BMP、TIFF格式。\n图片的URL路径,目前支持:\n- 公网http/https url\n- OBS提供的url,使用OBS数据需要进行授权。包括对服务授权、临时授权、匿名公开授权,详情参见[配置OBS访问权限](https://support.huaweicloud.com/api-ocr/ocr_03_0132.html)。\n> 说明:\n- 接口响应时间依赖于图片的下载时间,如果图片下载时间过长,会返回接口调用失败。\n- 请保证被检测图片所在的存储服务稳定可靠,推荐使用OBS服务存储图片数据。\n- url中不能存在中文字符,若存在,中文需要进行utf8编码。","type":"string"},"with_borders":{"description":"可选值包括:\n- true:输入图像仅包含有线表格,仅进行有线表格识别。\n- false: 输入图像可能包含无线表格,同时进行有线表格与无线表格识别。\n\n未传入该参数时默认为false,即同时进行有线表格与无线表格识别。当确认输入仅包含有线表格时,该参数设为true可达到更优识别效果。","type":"boolean"}}},"GeneralTableResponseBody":{"description":"","properties":{"result":{"$ref":"#/definitions/GeneralTableResult","description":"调用成功时表示调用结果。\n\n调用失败时无此字段。"}},"required":["result"]},"GeneralTableResult":{"description":"","properties":{"excel":{"description":"表格图像转换为excel的base64编码,图像中的文字和表格按位置写入excel。对返回的excel编码可用base64.b64decode解码并保存为.xlsx文件。","type":"string"},"words_region_count":{"description":"文字区域数目。","format":"int32","type":"integer"},"words_region_list":{"description":"文字区域识别结果列表,输出顺序从左到右,先上后下。","items":{"$ref":"#/definitions/WordsRegionList"},"type":"array"}},"required":["words_region_count","words_region_list"]},"GeneralTableWordsBlockList":{"description":"子区域识别文字块列表,输出顺序从左到右,先上后下。","properties":{"cell_location":{"description":"单元格位置信息,列表形式,分别表示单元格4个顶点的x, y坐标;坐标原点为图片左上角,x轴沿水平方向,y轴沿竖直方向。","items":{"description":"单元格位置信息。","items":{"format":"int32","type":"integer"},"type":"array"},"type":"array"},"columns":{"description":"文字块占用的列信息,编号从0开始,列表形式,数据类型为Integer。仅在表格区域内有效,即type字段为\"table\"时该字段有效。","items":{"description":"文字块占用的列信息。","format":"int32","type":"integer"},"type":"array"},"confidence":{"description":"字段的平均置信度,置信度越大,表示本次识别的对应字段的可靠性越高,在统计意义上,置信度越大,准确率越高。置信度由算法给出,不直接等价于对应字段的准确率。","format":"float","type":"number"},"location":{"description":"文字块位置信息,列表形式,分别表示文字块4个顶点的x, y坐标;坐标原点为图片左上角,x轴沿水平方向,y轴沿竖直方向。","items":{"description":"文字块位置信息。","items":{"format":"int32","type":"integer"},"type":"array"},"type":"array"},"rows":{"description":"文字块占用的行信息,编号从0开始,列表形式,数据类型为Integer。仅在表格区域内有效,即type字段为\"table\"时该字段有效。","items":{"description":"文字块占用的行信息。","format":"int32","type":"integer"},"type":"array"},"words":{"description":"文字块识别结果。","type":"string"},"words_list":{"description":"单元格内文字段列表。输出顺序从左到右,从上到下。仅当入参\"return_text_location\"为true时存在。","items":{"$ref":"#/definitions/WordsListIem"},"type":"array"}}},"WordsListIem":{"description":"单元格内文字段列表。","properties":{"char_list":{"description":"单元格内文字段列表。输出顺序从左到右,从上到下。仅当入参\"return_text_location\"和\"return_char_location\"同时为true时存在。","items":{"$ref":"#/definitions/CharListIem"},"type":"array"},"confidence":{"description":"字段的平均置信度,置信度越大,表示本次识别的对应字段的可靠性越高,在统计意义上,置信度越大,准确率越高。置信度由算法给出,不直接等价于对应字段的准确率。","format":"float","type":"number"},"location":{"description":"文字块位置信息,列表形式,分别表示文字块4个顶点的x, y坐标;坐标原点为图片左上角,x轴沿水平方向,y轴沿竖直方向。","items":{"description":"文字块位置信息。","items":{"format":"int32","type":"integer"},"type":"array"},"type":"array"},"words":{"description":"文字块识别结果。","type":"string"}}},"WordsRegionList":{"description":"文字区域识别结果列表,输出顺序从左到右,先上后下。","properties":{"type":{"description":"文字识别区域类型。\n- text:文本识别区域;\n- table:表格识别区域。","type":"string"},"words_block_count":{"description":"子区域识别文字块数目。","format":"int32","type":"integer"},"words_block_list":{"description":"子区域识别文字块列表,输出顺序从左到右,先上后下。","items":{"$ref":"#/definitions/GeneralTableWordsBlockList"},"type":"array"}},"required":["type","words_block_count","words_block_list"]}},"description":null,"group_id":"1c08976078264963b5b1b4d4fcddc6cb","host":"ocr.cn-north-4.myhuaweicloud.com","id":"cc3ba1a094fb49dc8e6e12c36095947b","info_version":"v1","method":"post","name":"RecognizeGeneralTable","parameters":{},"paths":{"/v2/{project_id}/ocr/general-table":{"post":{"consumes":[],"deprecated":false,"description":"用于识别用户上传的通用表格图片(或者用户提供的华为云上OBS的通用表格图片文件的URL)中的文字内容,并将识别的结果返回给用户。该接口的使用限制请参见[约束与限制](https://support.huaweicloud.com/productdesc-ocr/ocr_01_0006.html#section0),详细使用指导请参见[OCR服务使用简介](https://support.huaweicloud.com/qs-ocr/ocr_05_0001.html)章节。","operationId":"RecognizeGeneralTable","parameters":[{"description":"用户Token。\n用于获取操作API的权限。[获取Token接口](https://support.huaweicloud.com/api-ocr/ocr_03_0005.html)响应消息头中X-Subject-Token的值即为Token。","in":"header","name":"X-Auth-Token","required":true,"type":"string","x-example":"MIINRwYJKoZIhvcNAQcCoIINODCCDTQCAQExDTALBglghkgBZQMEAgEwgguVBgkqhkiG...","x-order":1},{"description":"项目ID,您可以从[获取项目ID](https://support.huaweicloud.com/api-ocr/ocr_03_0130.html)中获取。","in":"path","name":"project_id","required":true,"type":"string","x-order":2},{"description":"企业项目ID。OCR支持通过企业项目管理(EPS)对不同用户组和用户的资源使用,进行分账。\n获取方法:进入“[企业项目管理](https://console.huaweicloud.com/eps/?region=cn-north-4#/projects/list)”页面,单击企业项目名称,在企业项目详情页获取Enterprise-Project-Id(企业项目ID)。\n企业项目创建步骤请参见用户指南。\n> 说明:\n创建企业项目后,在传参时,有以下三类场景。\n- 携带正确的ID,正常使用OCR服务,账单的企业项目会被分类到企业ID对应的企业项目中。\n- 携带格式正确但不存在的ID,正常使用OCR服务,账单的企业项目会显示对应不存在的企业项目ID。\n- 不携带ID或格式错误ID(包含特殊字符等),正常使用OCR服务,账单的企业项目会被分类到\"default\"中。","in":"header","name":"Enterprise-Project-Id","required":false,"type":"string","x-order":3},{"description":"This is a generaltable Body Object","in":"body","name":"RecognizeGeneralTableRequestBody","required":false,"schema":{"$ref":"#/definitions/GeneralTableRequestBody"}}],"produces":[],"responses":{"200":{"description":"成功响应示例","examples":{"application/json":{"result":{"words_region_count":2,"words_region_list":[{"type":"text","words_block_count":1,"words_block_list":[{"confidence":0.9991,"words":"文字区域识别文字块1"}]},{"type":"table","words_block_count":2,"words_block_list":[{"columns":[0],"confidence":0.9942,"rows":[0],"words":"表格区域识别文字块1"},{"columns":[1,2],"confidence":0.914,"rows":[0],"words":"表格区域识别文字块2"}]}]}}},"headers":{"X-Request-Id":{"description":"This field is the request ID number for task tracking. Format is request_uuid-timestamp-hostname.","type":"string"}},"schema":{"$ref":"#/definitions/GeneralTableResponseBody"}},"400":{"description":"失败响应示例","examples":{"application/json":{"result":{"error_code":"AIS.0103","error_msg":"The image size does not meet the requirements."}}},"schema":{"$ref":"#/definitions/GeneralTableErrorResponseBody"}}},"summary":"通用表格识别","tags":["通用表格识别"],"x-is-registered":"Y","x-name":"通用表格识别","x-open-region-cloud":"hk,hc","x-order":1,"x-request-examples-1":{"image":"/9j/4AAQSkZJRgABAgEASABIAAD/4RFZRXhpZgAATU0AKgAAAA...","return_confidence":false},"x-request-examples-2":{"return_confidence":false,"url":"https://BucketName.obs.myhuaweicloud.com/ObjectName"},"x-request-examples-description-1":"传入表格图片的base64编码进行文字识别,并不返回置信度信息","x-request-examples-description-2":"传入表格图片的url进行文字识别,并不返回置信度信息","x-request-examples-url-1":"POST https://{endpoint}/v2/{project_id}/ocr/general-table","x-request-examples-url-2":"POST https://{endpoint}/v2/{project_id}/ocr/general-table","x-support-sdk":"Y"}}},"product_short":"OCR","region_id":"cn-north-4","schemes":["HTTPS"],"security_definitions":null,"summary":"通用表格识别","tags":"通用表格识别","uri":null,"version":"2.0"}