{"base_path":"/","components":null,"consumes":"[\"application/json;charset=UTF-8\"]","definitions":{"SmartDocumentRecognizerErrorResponseBody":{"description":"","properties":{"error_code":{"description":"调用失败时的错误码,具体请参见[错误码](https://support.huaweicloud.com/api-ocr/ocr_03_0028.html)。当出现错误码“ModelArts.4204”时,请参考[为什么调用API时提示“ModelArts.4204”?](https://support.huaweicloud.com/ocr_faq/ocr_01_0031.html)章节。\n调用成功时无此字段。","type":"string"},"error_msg":{"description":"调用失败时的错误信息。\n调用成功时无此字段。","type":"string"}},"required":["error_code","error_msg"]},"SmartDocumentRecognizerFormResult":{"properties":{"form_count":{"description":"模型识别到的有线表单数量。","format":"int32","type":"integer"},"form_list":{"description":"有线表单识别结果列表。","items":{"$ref":"#/definitions/SmartDocumentRecognizerTableBlock"},"type":"array"}}},"SmartDocumentRecognizerFormulaBlock":{"properties":{"formula":{"description":"数学公式识别结果,以latex字符串表示。","type":"string"},"location":{"description":"数学公式位置信息,列表形式,分别表示4个顶点的x, y坐标;坐标原点为图片左上角,x轴沿水平方向,y轴沿竖直方向。","items":{"description":"数学公式位置信息","items":{"format":"int32","type":"integer"},"type":"array"},"type":"array"}}},"SmartDocumentRecognizerFormulaResult":{"properties":{"formula_count":{"description":"数学公式数量。","format":"int32","type":"integer"},"formula_list":{"description":"数学公式识别结果列表。","items":{"$ref":"#/definitions/SmartDocumentRecognizerFormulaBlock"},"type":"array"}}},"SmartDocumentRecognizerKVBlock":{"properties":{"key":{"description":"key-value对(键值对)中的key,例如“姓名:小明”中的“姓名”","type":"string"},"value":{"description":"key-value对(键值对)中的value,例如“姓名:小明”中的“小明”","type":"string"},"words_block_count":{"description":"该键值对中所包含的文本框数量。","format":"int32","type":"integer"},"words_block_list":{"description":"文本框识别结果列表。","items":{"$ref":"#/definitions/SmartDocumentRecognizerKVWordsBlock"},"type":"array"}}},"SmartDocumentRecognizerKVWordsBlock":{"properties":{"location":{"description":"文字块的区域位置信息,列表形式,包含文字区域四个顶点的二维坐标(x,y);坐标原点为图片左上角,x轴沿水平方向,y轴沿竖直方向。","items":{"description":"文字块的区域位置信息。","items":{"format":"int32","type":"integer"},"type":"array"},"type":"array"},"type":{"description":"类型。","type":"string"},"words":{"description":"文字块识别结果。","type":"string"}}},"SmartDocumentRecognizerKvResult":{"properties":{"kv_block_count":{"description":"模型识别到的键值对数量。","format":"int32","type":"integer"},"kv_block_list":{"description":"键值对识别结果列表。","items":{"$ref":"#/definitions/SmartDocumentRecognizerKVBlock"},"type":"array"}}},"SmartDocumentRecognizerLayoutBlock":{"properties":{"form_id":{"description":"仅当type为\"form\"且入参form为True时返回该字段,表示当前有线表单区域对应form_result中哪一项识别结果。","format":"int32","type":"integer"},"location":{"description":"文字块的区域位置信息,列表形式,包含文字区域四个顶点的二维坐标(x,y);坐标原点为图片左上角,x轴沿水平方向,y轴沿竖直方向。","items":{"description":"文字块的区域位置信息。","items":{"format":"int32","type":"integer"},"type":"array"},"type":"array"},"table_id":{"description":"仅当type为\"table\"且入参table为True时返回该字段,表示当前逻辑表格区域对应table_result中哪一项识别结果。","format":"int32","type":"integer"},"text":{"description":"文档区域文字内容。对于表格与图像,不返回其中的文字内容。","type":"string"},"type":{"description":"文档区域类别,包含text、title、sub_title、image、image_caption、form、table、table_caption、header、footer、page_number、reference、formula、stamp、directory共15个类别。","type":"string"},"words_ids":{"description":"文字识别结果索引列表,表示ocr_result的words_block_list中哪些文本框位于该文档区域内。","items":{"format":"int32","type":"integer"},"type":"array"}}},"SmartDocumentRecognizerLayoutResult":{"properties":{"layout_block_count":{"description":"模型识别到的文档版面区域数量。","format":"int32","type":"integer"},"layout_block_list":{"description":"文档版面区域识别结果列表。","items":{"$ref":"#/definitions/SmartDocumentRecognizerLayoutBlock"},"type":"array"}}},"SmartDocumentRecognizerOcrResult":{"properties":{"direction":{"description":"图片朝向","format":"float","type":"number"},"words_block_count":{"description":"识别文字块数目。","format":"int32","type":"integer"},"words_block_list":{"description":"识别文字块列表,输出顺序从左到右,先上后下。","items":{"$ref":"#/definitions/SmartDocumentRecognizerWordsBlockList"},"type":"array"}}},"SmartDocumentRecognizerRequestBody":{"properties":{"data":{"description":"与url二选一。\n图片的Base64编码,要求单个图片、PDF文件其对应的Base64编码不超过10MB。文件在Base64编码后会大于文件原本大小,请注意做好边界判断,建议文件大小不超过7MB。\n\n图像尺寸不小于15×15像素,最长边不超过30000像素,支持JPG/PNG/BMP/TIFF格式。\nPDF以144dpi的分辨率转为图像进行文档解析,需符合上述图像尺寸规定。若PDF有多页,当前仅对第1页进行识别。","type":"string"},"erase_seal":{"description":"是否打开印章擦除功能。可选值包括:\n- true:打开印章擦除功能。\n- false:关闭印章擦除功能。\n\n开启后,可提升印章遮挡区域的文字识别精度。","type":"boolean"},"form":{"description":"是否进行有线表单识别。有线表单指关键信息以有线单元格形式进行呈现,例如户口本、机动车发票等。若是,结果会以\"form_result\"这一关键字返回。","type":"boolean"},"formula":{"description":"是否进行公式识别,识别结果为latex序列。若是,结果会以“formula_result”这一关键字返回。\n\n- 开启公式识别后会降低响应速度。\n- 当前仅支持3行以内公式识别,不支持3行以上的多行公式。","type":"boolean"},"kv":{"description":"是否进行键值对(key-value)提取。若是,结果会以“kv_result”这一关键字返回。","type":"boolean"},"kv_map":{"description":"需要传入字典的json序列化后字符串,用于对kv_result中的特定key值进行归一化映射。例如,kv_result中包含{\"名称\":\"小明\"}的键值对,若传入{\"名称\":\"姓名\"}的kv_map,则返回结果为{“姓名”:“小明”}。 \n> 参数传入示例:\n- \"kv_map\":\"{\\\"名称\\\":\\\"姓名\\\"}\"","type":"string"},"language":{"description":"语种选择,未传入该参数时默认为中英文识别模式。参考[华为云通用文字支持语种](https://support.huaweicloud.com/api-ocr/ocr_03_0042.html)。","type":"string"},"layout":{"description":"是否进行版面分析。若是,结果会以“layout_result”这一关键字返回。","type":"boolean"},"pdf_page_number":{"description":"指定PDF页码识别。传入该参数时,则识别指定页码的内容。如果不传该参数,则默认识别第1页。","format":"int32","type":"integer"},"return_excel":{"description":"仅当table为True时有效。是否返回表格转换Microsoft Excel的Base64编码字段。","type":"boolean"},"single_orientation_mode":{"description":"单朝向模式开关。可选值包括:\n- true:打开单朝向模式。\n- false:关闭单朝向模式。\n\n图片文字方向一致时,打开该开关可提升识别精度;图片文字方向不一致时,关闭该开关可支持多朝向文字识别。未传入该参数时默认为\"true\",既默认图片中的文字方向为单朝向。","type":"boolean"},"table":{"description":"是否进行表格识别。此处表格特指逻辑表格,通常具有M行N列的形式,且第一行或第一列为表头。若是,结果会以“table_result”这一关键字返回。","type":"boolean"},"url":{"description":"与data二选一。\n\n单个图片、PDF文件其对应的Base64编码不超过10MB。文件在Base64编码后会大于文件原本大小,请注意做好边界判断,建议文件大小不超过7MB。\n图像尺寸不小于15×15像素,最长边不超过30000像素,支持JPG/PNG/BMP/TIFF格式。\nPDF以144dpi的分辨率转为图像进行文档解析,需符合上述图像尺寸规定。若PDF有多页,当前仅对第1页进行识别。\n图片或PDF的URL路径,目前支持:\n- 公网http/https url\n- OBS提供的url,使用OBS数据需要进行授权。包括对服务授权、临时授权、匿名公开授权,详情参见[配置OBS访问权限](https://support.huaweicloud.com/api-ocr/ocr_03_0132.html)。\n> 说明:\n- 接口响应时间依赖于图片的下载时间,如果图片下载时间过长,会返回接口调用失败。\n- 请保证被检测图片所在的存储服务稳定可靠,推荐使用OBS服务存储图片数据。\n- url中不能存在中文字符,若存在,中文需要进行utf8编码。","type":"string"}}},"SmartDocumentRecognizerResponseBody":{"description":"","properties":{"result":{"description":"调用成功时返回的结果列表,按页面顺序返回,列表第一项为第一页识别结果,依次类推。\n调用失败时无此字段。","items":{"$ref":"#/definitions/SmartDocumentRecognizerResult"},"type":"array"}},"required":["result"]},"SmartDocumentRecognizerResult":{"properties":{"form_result":{"$ref":"#/definitions/SmartDocumentRecognizerFormResult","description":"有线表单识别结果。当输入参数\"form\"为true时,才返回该参数。"},"formula_result":{"$ref":"#/definitions/SmartDocumentRecognizerFormulaResult","description":"公式识别结果。"},"kv_result":{"$ref":"#/definitions/SmartDocumentRecognizerKvResult","description":"键值对提取结果。当输入参数“kv”为“true”时,才返回该参数。"},"layout_result":{"$ref":"#/definitions/SmartDocumentRecognizerLayoutResult","description":"版面分析结果。当输入参数“layout”为“true”时,才返回该参数。"},"ocr_result":{"$ref":"#/definitions/SmartDocumentRecognizerOcrResult","description":"文字识别结果。"},"table_result":{"$ref":"#/definitions/SmartDocumentRecognizerTableResult","description":"表格识别结果。当输入参数“table”为“true”时,才返回该参数。"}},"required":["ocr_result"]},"SmartDocumentRecognizerTableBlock":{"properties":{"excel":{"description":"表格识别结果的base64编码,仅当return_excel为True时返回该字段。对返回的excel编码可用base64.b64decode解码并保存为.xlsx文件。","type":"string"},"location":{"description":"当前表格的位置信息,列表形式,分别表示文字块4个顶点的x, y坐标;坐标原点为图片左上角,x轴沿水平方向,y轴沿竖直方向。","items":{"description":"文字块位置信息。","items":{"format":"int32","type":"integer"},"type":"array"},"type":"array"},"words_block_count":{"description":"表格中所包含的单元格数量。","format":"int32","type":"integer"},"words_block_list":{"description":"单元格识别结果列表。","items":{"$ref":"#/definitions/SmartDocumentRecognizerTableWordsBlock"},"type":"array"}}},"SmartDocumentRecognizerTableResult":{"properties":{"table_count":{"description":"模型识别到的表格数量。","format":"int32","type":"integer"},"table_list":{"description":"表格识别结果列表。","items":{"$ref":"#/definitions/SmartDocumentRecognizerTableBlock"},"type":"array"}}},"SmartDocumentRecognizerTableWordsBlock":{"properties":{"columns":{"description":"文字块占用的列信息,编号从0开始,列表形式,数据类型为Integer。","items":{"description":"文字块占用的列信息。","format":"int32","type":"integer"},"type":"array"},"rows":{"description":"文字块占用的行信息,编号从0开始,列表形式,数据类型为Integer。","items":{"description":"文字块占用的行信息。","format":"int32","type":"integer"},"type":"array"},"words":{"description":"单元格内的文字识别结果。","type":"string"}}},"SmartDocumentRecognizerWordsBlockList":{"properties":{"confidence":{"description":"文字块识别结果的置信度。","format":"float","type":"number"},"location":{"description":"文字块的区域位置信息,列表形式,包含文字区域四个顶点的二维坐标(x,y);坐标原点为图片左上角,x轴沿水平方向,y轴沿竖直方向。","items":{"description":"文字块的区域位置信息。","items":{"format":"int32","type":"integer"},"type":"array"},"type":"array"},"words":{"description":"文字块识别结果。","type":"string"}}}},"description":null,"group_id":"1c08976078264963b5b1b4d4fcddc6cb","host":"ocr.cn-north-4.myhuaweicloud.com","id":"1d02a830d1bb4738898f4cce4d65ecf4","info_version":"v1","method":"post","name":"RecognizeSmartDocumentRecognizer","parameters":{},"paths":{"/v2/{project_id}/ocr/smart-document-recognizer":{"post":{"consumes":[],"deprecated":false,"description":"对证件、票据、表单等任意版式文档进行键值对提取、文字识别、以及表格识别等任务,实现进阶高效的自动化结构化返回。该接口的使用限制请参见[约束与限制](https://support.huaweicloud.com/productdesc-ocr/ocr_01_0006.html#section11),详细使用指导请参见[OCR服务使用简介](https://support.huaweicloud.com/qs-ocr/ocr_05_0001.html)章节。","operationId":"RecognizeSmartDocumentRecognizer","parameters":[{"description":"用户Token。\n用于获取操作API的权限。[获取Token接口](https://support.huaweicloud.com/api-ocr/ocr_03_0005.html)响应消息头中X-Subject-Token的值即为Token。","in":"header","name":"X-Auth-Token","required":true,"type":"string","x-example":"MIINRwYJKoZIhvcNAQcCoIINODCCDTQCAQExDTALBglghkgBZQMEAgEwgguVBgkqhkiG...","x-order":1},{"description":"项目ID,您可以从[获取项目ID](https://support.huaweicloud.com/api-ocr/ocr_03_0130.html)中获取。","in":"path","name":"project_id","required":true,"type":"string","x-order":2},{"description":"企业项目ID。OCR支持通过企业项目管理(EPS)对不同用户组和用户的资源使用,进行分账。\n获取方法:进入“[企业项目管理](https://console.huaweicloud.com/eps/?region=cn-north-4#/projects/list)”页面,单击企业项目名称,在企业项目详情页获取Enterprise-Project-Id(企业项目ID)。\n企业项目创建步骤请参见用户指南。\n> 说明:\n创建企业项目后,在传参时,有以下三类场景。\n- 携带正确的ID,正常使用OCR服务,账单的企业项目会被分类到企业ID对应的企业项目中。\n- 携带格式正确但不存在的ID,正常使用OCR服务,账单的企业项目会显示对应不存在的企业项目ID。\n- 不携带ID或格式错误ID(包含特殊字符等),正常使用OCR服务,账单的企业项目会被分类到\"default\"中。","in":"header","name":"Enterprise-Project-Id","required":false,"type":"string","x-order":3},{"description":"This is a smart-document-recognizer Body Object","in":"body","name":"RecognizeSmartDocumentRecognizerRequestBody","required":true,"schema":{"$ref":"#/definitions/SmartDocumentRecognizerRequestBody"}}],"produces":[],"responses":{"200":{"description":"成功响应示例","examples":{"application/json":{"result":[{"formula_result":{"formula_count":1,"formula_list":[{"formula":"\\\\int _ { L } \\\\left ( 2 x y ^ { 3 } - y ^ { 2 } \\\\cos x \\\\right ) \\\\mathrm { d } x + \\\\left ( 1 - 2 y \\\\sin x + 3 x ^ { 2 } y ^ { 2 } \\\\right ) \\\\mathrm { d } y","location":[[171,919],[950,919],[950,967],[171,967]]}]}},{"layout_result":{"layout_block_count":19,"layout_block_list":[{"location":[[1165,368],[2031,368],[2031,465],[1165,465]],"text":"黑龙江增值税专用发票","type":"title","words_ids":[0]},{"form_id":0,"location":[[15,19],[1078,19],[1078,637],[15,637]],"text":"xxxx","type":"form","words_ids":[2,3,4]},{"location":[[18,180],[1077,180],[1077,636],[18,636]],"table_id":0,"text":"xxxx","type":"table","words_ids":[0,1,2]}]}},{"form_result":{"form_count":1,"form_list":[{"excel":"UEsDBBQAAAAIAAAAIQBhXUk6TwEAAI8EAAATAAAAW0NvbnRlbnRfVHlwZX...","location":[[15,19],[1074,19],[1074,636],[15,636]],"words_block_count":24,"words_block_list":[{"columns":[0,1,2],"rows":[0],"words":"xxx"},{"columns":[0,1,2],"rows":[1],"words":"xxxx"}]}]}},{"table_result":{"table_count":1,"table_list":[{"excel":"xxxx","location":[[275,967],[2919,967],[2919,1177],[275,1177]],"words_block_count":24,"words_block_list":[{"columns":[0],"rows":[0],"words":"货物或应税劳务、服务名称"},{"columns":[1],"rows":[0],"words":"规格型号"}]}]}},{"kv_result":{"kv_block_count":25,"kv_block_list":[{"key":"开票日期","value":"2017年08月31日","words_block_count":2,"words_block_list":[{"location":[[2241,589],[2480,592],[2480,646],[2241,643]],"type":"key","words":"开票日期"},{"location":[[2479,591],[2850,595],[2850,649],[2479,645]],"type":"value","words":"2017年08月31日"}]}]}},{"ocr_result":{"direction":0.4767,"words_block_count":67,"words_block_list":[{"confidence":0.9552,"location":[[430,100],[874,99],[874,139],[430,141]],"words":"黑龙江增值税专用发票"}]}}]}},"headers":{"X-Request-Id":{"description":"This field is the request ID number for task tracking. Format is request_uuid-timestamp-hostname.","type":"string"}},"schema":{"$ref":"#/definitions/SmartDocumentRecognizerResponseBody"}},"400":{"description":"失败响应示例","examples":{"application/json":{"error_code":"AIS.0103","error_msg":"The image size does not meet the requirements."}},"schema":{"$ref":"#/definitions/SmartDocumentRecognizerErrorResponseBody"}}},"summary":"智能文档解析","tags":["智能文档解析"],"x-is-registered":"Y","x-name":"智能文档解析","x-open-region-cloud":"hc,hk","x-order":1,"x-request-examples-1":{"data":"/9j/4AAQSkZJRgABAgEASABIAAD/4RFZRXhpZgAATU0AKgAAAA..."},"x-request-examples-2":{"url":"https://BucketName.obs.myhuaweicloud.com/ObjectName"},"x-request-examples-description-1":"传入文档图片的base64编码进行文字识别","x-request-examples-description-2":"传入文档图片的url进行文字识别","x-request-examples-url-1":"POST https://{endpoint}/v2/{project_id}/ocr/smart-document-recognizer","x-request-examples-url-2":"POST https://{endpoint}/v2/{project_id}/ocr/smart-document-recognizer","x-support-sdk":"Y"}}},"product_short":"OCR","region_id":"cn-north-4","schemes":["HTTPS"],"security_definitions":null,"summary":"智能文档解析","tags":"智能文档解析","uri":null,"version":"2.0"}