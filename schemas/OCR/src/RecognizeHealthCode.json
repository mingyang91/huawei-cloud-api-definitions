{"base_path":"/","components":null,"consumes":"[\"application/json;charset=UTF-8\"]","definitions":{"HealthCodeErrorResponseBody":{"description":"","properties":{"error_code":{"description":"调用失败时的错误码,具体请参见错误码。\n调用成功时无此字段。","type":"string"},"error_msg":{"description":"调用失败时的错误信息。\n调用成功时无此字段。","type":"string"}},"required":["error_code","error_msg"]},"HealthCodeRequestBody":{"description":"","properties":{"detect_direction":{"description":"校正图片的倾斜角度开关,可选值如下所示:\n- true:校正图片的倾斜角度\n- false:不校正图片的倾斜角度\n\n支持任意角度的校正,未传入该参数时默认为“false”。","type":"boolean"},"image":{"description":"图像数据,base64编码,图片尺寸不小于15×15像素,最长边不超过8192像素,支持JPG/PNG/BMP/TIFF格式。","type":"string"},"url":{"description":"与image二选一\n图片的URL路径,目前支持:\n- 公网http/https url\n- OBS提供的url,使用OBS数据需要进行授权。包括对服务授权、临时授权、匿名公开授权,详情参见[配置OBS访问权限](https://support.huaweicloud.com/api-ocr/ocr_03_0132.html)。\n> 说明:\n- 接口响应时间依赖于图片的下载时间,如果图片下载时间过长,会返回接口调用失败。\n- 请保证被检测图片所在的存储服务稳定可靠,推荐使用OBS服务存储图片数据。\n- url中不能存在中文字符,若存在,中文需要进行utf8编码。","type":"string"}}},"HealthCodeResponseBody":{"description":"","properties":{"result":{"$ref":"#/definitions/HealthCodeResult","description":"调用成功时表示调用结果。\n\n调用失败时此字段为空。"}},"required":["result"]},"HealthCodeResult":{"description":"","properties":{"city":{"description":"城市","type":"string"},"color":{"description":"健康码或行程卡颜色。\n健康码颜色可选值包括:\n\n- \"green\",绿码\n- \"yellow\",黄码\n- \"red\",红码\n- \"gray\",灰码\n\n行程卡颜色可选值包括:\n\n- \"green\",绿码\n- \"yellow\",黄码\n- \"red\",红码","type":"string"},"confidence":{"description":"各个字段的置信度。","properties":{},"type":"object"},"idcard_number":{"description":"身份证号码","type":"string"},"name":{"description":"姓名","type":"string"},"pcr_sampling_time":{"description":"核酸检测采样时间","type":"string"},"pcr_test_organization":{"description":"核酸检测机构","type":"string"},"pcr_test_result":{"description":"核酸检测结果,可选值包括:\n- \"positive\",即阳性\n- \"negative\",即阴性\n- \"unknown\",未知","type":"string"},"pcr_test_time":{"description":"核酸检测结果更新时间","type":"string"},"phone_number":{"description":"手机号码","type":"string"},"province":{"description":"省份","type":"string"},"reached_city":{"description":"行程卡的途径地址","items":{"description":"","type":"string"},"type":"array"},"test_interval":{"description":"核酸检测间隔时长,可选值包括:\n- 24小时内\n- 48小时内\n- 72小时内\n- 5天内\n- 7天内\n- 7天外","type":"string"},"time":{"description":"健康码或行程卡的更新时间","type":"string"},"type":{"description":"防疫码类别:\n- 健康码:health_code\n- 核酸检测记录:pcr_test_record\n- 通信行程卡:travel_card\n- 其他:other","type":"string"},"vaccination_status":{"description":"疫苗接种情况,可选值包括:\n\n- 未接种\n- 接种中\n- 无接种记录\n- 已接种1针\n- 已接种2针\n- 已接种3针\n- 已完成新冠疫苗接种","type":"string"},"words_block_count":{"description":"代表检测识别出来的文字块数目。","format":"int32","type":"integer"},"words_block_list":{"description":"识别文字块列表,输出顺序从左到右,从上到下。","items":{"$ref":"#/definitions/HealthCodeWordsBlockList"},"type":"array"}},"required":["type","name","idcard_number","phone_number","province","city","time","color","vaccination_status","test_interval","pcr_test_result","pcr_test_organization","pcr_test_time","pcr_sampling_time","reached_city","confidence","words_block_count","words_block_list"]},"HealthCodeWordsBlockList":{"description":"","properties":{"confidence":{"description":"各个字段的置信度","format":"float","type":"number"},"location":{"description":"识别到的文字块的区域位置信息,列表形式,分别表示文字块4个顶点的(x,y)坐标。采用图像坐标系,图像坐标原点为图像左上角,x轴沿水平方向,y轴沿竖直方向。","items":{"description":"文字块占用的行信息。","items":{"format":"int32","type":"integer"},"type":"array"},"type":"array"},"words":{"description":"文字块识别结果。","type":"string"}}}},"description":null,"group_id":"1c08976078264963b5b1b4d4fcddc6cb","host":"ocr.cn-north-4.myhuaweicloud.com","id":"799af03fdaae4ddda6831f7c8854b543","info_version":"v1","method":"post","name":"RecognizeHealthCode","parameters":{},"paths":{"/v2/{project_id}/ocr/health-code":{"post":{"consumes":[],"deprecated":false,"description":"支持对全国各地区不同版式的防疫健康码、核酸检测记录、行程卡中的14个关键字段进行结构化识别;支持识别4种健康码颜色,包括绿码、黄码、红码、灰码;支持返回各个关键字段的置信度,以便提高人工校验效率。该接口的使用限制请参见[约束与限制](https://support.huaweicloud.com/productdesc-ocr/ocr_01_0006.html#section26),详细使用指导请参见[OCR服务使用简介](https://support.huaweicloud.com/qs-ocr/ocr_05_0001.html)章节。","operationId":"RecognizeHealthCode","parameters":[{"description":"用户Token。\n用于获取操作API的权限。[获取Token接口](https://support.huaweicloud.com/api-ocr/ocr_03_0005.html)响应消息头中X-Subject-Token的值即为Token。","in":"header","name":"X-Auth-Token","required":true,"type":"string","x-example":"MIINRwYJKoZIhvcNAQcCoIINODCCDTQCAQExDTALBglghkgBZQMEAgEwgguVBgkqhkiG...","x-order":1},{"description":"项目ID,您可以从[获取项目ID](https://support.huaweicloud.com/api-ocr/ocr_03_0130.html)中获取。","in":"path","name":"project_id","required":true,"type":"string","x-order":2},{"description":"企业项目ID。OCR支持通过企业项目管理(EPS)对不同用户组和用户的资源使用,进行分账。\n获取方法:进入“[企业项目管理](https://console.huaweicloud.com/eps/?region=cn-north-4#/projects/list)”页面,单击企业项目名称,在企业项目详情页获取Enterprise-Project-Id(企业项目ID)。\n企业项目创建步骤请参见用户指南。\n> 说明:\n创建企业项目后,在传参时,有以下三类场景。\n- 携带正确的ID,正常使用OCR服务,账单的企业项目会被分类到企业ID对应的企业项目中。\n- 携带格式正确但不存在的ID,正常使用OCR服务,账单的企业项目会显示对应不存在的企业项目ID。\n- 不携带ID或格式错误ID(包含特殊字符等),正常使用OCR服务,账单的企业项目会被分类到\"default\"中。","in":"header","name":"Enterprise-Project-Id","required":false,"type":"string","x-order":3},{"description":"This is a healthcode Body Object","in":"body","name":"RecognizeHealthCodeRequestBody","required":false,"schema":{"$ref":"#/definitions/HealthCodeRequestBody"}}],"produces":[],"responses":{"200":{"description":"成功响应示例","examples":{"application/json":{"result":{"city":"合肥市","color":"green","confidence":{"city":0.8785,"color":0.615,"idcard_number":0,"name":0.9003,"pcr_sampling_time":0,"pcr_test_organization":0,"pcr_test_result":0,"pcr_test_time":0,"phone_number":0,"province":0,"reached_city":0,"time":0.9174,"type":0.615,"vaccination_status":0.8691},"idcard_number":"","name":"**余","pcr_sampling_time":"","pcr_test_organization":"","pcr_test_result":"","pcr_test_time":"","phone_number":"","province":"安徽省","reached_city":[],"time":"2022-03-30 15:37:13","type":"health_code","vaccination_status":"x 2已接种新冠疫苗","words_block_count":16,"words_block_list":[{"confidence":0.8327,"location":[[754,21],[855,21],[855,60],[754,60]],"words":"文字块1"},{"confidence":0.7972,"location":[[929,22],[1022,22],[1022,59],[929,59]],"words":"文字块2"}]}}},"headers":{"X-Request-Id":{"description":"This field is the request ID number for task tracking. Format is request_uuid-timestamp-hostname.","type":"string"}},"schema":{"$ref":"#/definitions/HealthCodeResponseBody"}},"400":{"description":"失败响应示例","examples":{"application/json":{"error_code":"AIS.0103","error_msg":"The image size does not meet the requirements."}},"schema":{"$ref":"#/definitions/HealthCodeErrorResponseBody"}}},"summary":"防疫健康码识别","tags":["防疫健康码识别"],"x-is-registered":"Y","x-name":"防疫健康码识别","x-open-region-cloud":"hc","x-order":1,"x-request-examples-1":{"image":"/9j/4AAQSkZJRgABAgEASABIAAD/4RFZRXhpZgAATU0AKgAAAA..."},"x-request-examples-2":{"url":"https://BucketName.obs.myhuaweicloud.com/ObjectName"},"x-request-examples-description-1":"传入防疫健康码图片的base64编码进行文字识别","x-request-examples-description-2":"传入防疫健康码图片的url进行文字识别","x-request-examples-url-1":"POST https://{endpoint}/v2/{project_id}/ocr/health-code","x-request-examples-url-2":"POST https://{endpoint}/v2/{project_id}/ocr/health-code","x-support-sdk":"Y"}}},"product_short":"OCR","region_id":"cn-north-4","schemes":["HTTPS"],"security_definitions":null,"summary":"防疫健康码识别","tags":"防疫健康码识别","uri":null,"version":"2.0"}