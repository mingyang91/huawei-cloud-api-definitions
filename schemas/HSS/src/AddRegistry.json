{"base_path":"/","components":null,"consumes":"","definitions":{"AddRegistryRequestBody":{"description":"三方镜像仓信息","properties":{"api_version":{"description":"**参数解释**:\n镜像仓接口版本\n**约束限制**:\n不涉及\n**取值范围**:\n  - V1:V1版本。\n  - V2:V2版本。\n\n**默认取值**:\n不涉及","example":"V2","maxLength":32,"minLength":1,"pattern":"^V1|V2$","type":"string"},"connect_cluster_id":{"description":"**参数解释**:\n承载集群id。请选择一个已接入HSS的集群作为承载集群,镜像同步组件和扫描组件会以任务的方式运行在您所选的集群上,来帮助主机安全获取您的镜像数据和扫描镜像安全风险。\n**约束限制**:\n不涉及\n**取值范围**:\n字符长度1-64位\n\n**默认取值**:\n不涉及","example":"ed5202b31xxxxxxe6e57bedbxxxxxxxx","maxLength":64,"minLength":1,"pattern":"^[a-z0-9-]*$","type":"string"},"get_scan_image_channel":{"description":"**参数解释**:\n获取扫描组件的方式\n**约束限制**:\n不涉及\n**取值范围**:\n- Swr:访问swr获取扫描组件。\n- Other:手动上传扫描组件到承载集群。选择此方式,需要调用接口/v5/{project_id}/image/registries/image-upload-command 获取扫描组件镜像上传指令。\n\n**默认取值**:\n不涉及","example":"Swr","maxLength":32,"minLength":1,"pattern":"^Swr|Other$","type":"string"},"namespace":{"description":"**参数解释**:\n镜像仓项目,用来指定扫描组件要上传到的镜像仓目录。get_scan_image_channel为Other时需要填写。\n**约束限制**:\n不涉及\n**取值范围**:\n字符长度1-128位\n\n**默认取值**:\n不涉及","example":"user","maxLength":128,"minLength":1,"pattern":"^.*$","type":"string"},"protocol":{"description":"**参数解释**:\n协议类型\n**约束限制**:\n不涉及\n**取值范围**:\n  - http:http协议。\n  - https:https协议。\n\n**默认取值**:\n不涉及","example":"http","maxLength":32,"minLength":1,"pattern":"^http|https$","type":"string"},"registry_addr":{"description":"**参数解释**:\n镜像仓地址\n**约束限制**:\n网址/IP:端口。如:myharbor.com。\n**取值范围**:\n字符长度1-256位\n\n**默认取值**:\n不涉及","example":"myharbor.com","maxLength":256,"minLength":1,"pattern":"^.*$","type":"string"},"registry_name":{"description":"**参数解释**:\n仓库名称\n**约束限制**:\n不涉及\n**取值范围**:\n字符长度1-128位\n**默认取值**:\n不涉及","example":"my-harbor","maxLength":128,"minLength":1,"pattern":"^.*$","type":"string"},"registry_password":{"description":"**参数解释**:\n用于登录镜像仓的密码。仅用于访问镜像仓,HSS服务不会存储您的镜像仓密码。\n**约束限制**:\n不涉及\n**取值范围**:\n字符长度1-128位\n\n**默认取值**:\n不涉及","example":123456,"maxLength":128,"minLength":1,"pattern":"^.*$","type":"string"},"registry_type":{"description":"**参数解释**:\n镜像仓类型\n**约束限制**:\n不涉及\n**取值范围**:\n  - Harbor:Harbor镜像仓。\n  - Jfrog:Jfrog镜像仓。\n\n**默认取值**:\n不涉及","example":"Harbor","maxLength":32,"minLength":1,"pattern":"^Harbor|Jfrog$","type":"string"},"registry_username":{"description":"**参数解释**:\n用于登录镜像仓的用户名。\n**约束限制**:\n不涉及\n**取值范围**:\n字符长度1-128位\n\n**默认取值**:\n不涉及","example":"me","maxLength":128,"minLength":1,"pattern":"^.*$","type":"string"}},"required":["registry_name","registry_type","api_version","protocol","registry_addr","registry_username","registry_password","connect_cluster_id","get_scan_image_channel"],"type":"object"}},"description":null,"group_id":"3f29a7c68cc24a39a794ff9ddec0ba77","host":"hss.cn-north-4.myhuaweicloud.com","id":"591791b354c6498baa8f76dd9cda403d","info_version":"v5","method":"post","name":"AddRegistry","parameters":{"EnterpriseProjectId":{"default":"0","description":"**参数解释**:\n企业项目ID,用于过滤不同企业项目下的资产。获取方式请参见[获取企业项目ID](hss_02_0027.xml)。\n如需查询所有企业项目下的资产请传参“all_granted_eps”。\n**约束限制**:\n开通企业项目功能后才需要配置企业项目ID参数。\n**取值范围**:\n字符长度1-256位\n**默认取值**:\n0,表示默认企业项目(default)。","in":"query","maxLength":256,"minLength":1,"name":"enterprise_project_id","pattern":"^.*$","required":false,"type":"string"},"ProjectId":{"description":"**参数解释**:\n项目ID,用于明确项目归属,配置后可通过该ID查询项目下资产。获取方式请参见[获取项目ID](hss_02_0024.xml)。\n**约束限制**:\n不涉及\n**取值范围**:\n字符长度1-256位\n**默认取值**:\n不涉及","in":"path","maxLength":256,"minLength":1,"name":"project_id","pattern":"^.*$","required":true,"type":"string","x-example":"9d4f774865034d119917acc61b1b806e"},"XAuthToken":{"description":"**参数解释**:\n用户Token,包含了用户的身份、权限等信息,在调用API接口时,可通过Token进行身份认证。获取方式请参见[获取用户Token](hss_02_0009.xml)。\n**约束限制**:\n不涉及\n**取值范围**:\n字符长度1-32768位\n**默认取值**:\n不涉及","in":"header","maxLength":32768,"minLength":1,"name":"X-Auth-Token","pattern":"^.*$","required":true,"type":"string","x-example":"$${X-Auth-Token}"}},"paths":{"/v5/{project_id}/image/registries":{"post":{"description":"新增镜像仓库","operationId":"AddRegistry","parameters":[{"$ref":"#/parameters/XAuthToken"},{"$ref":"#/parameters/ProjectId"},{"$ref":"#/parameters/EnterpriseProjectId"},{"description":"接入三方镜像仓请求参数","in":"body","name":"AddRegistryRequestBody","required":true,"schema":{"$ref":"#/definitions/AddRegistryRequestBody"}}],"responses":{"200":{"description":"请求已成功"}},"summary":"新增镜像仓库","tags":["container"],"x-api-type":"open-api","x-apigateway-request-type":"public","x-iam-auth-meta-anno":{"abacAction":"hss:image:addRegistry","abacActionAlias":"hss:images:set","authLevel":"PROJECT","rbac":["op_service","te_admin","hss_adm","te_admin+op_restricted","te_admin+op_suspended","hss_adm+op_restricted","hss_adm+op_suspended","readonly"]},"x-is-registered":"Y","x-method-annotations":["@CtsInfo(userOperationType = \"addRegistry\", operationId = \"AddRegistry\", readOnly = false)"],"x-request-examples-1":{"api_version":"V2","connect_cluster_id":"xxx","get_scan_image_channel":"Swr","protocol":"http","registry_addr":"myharbor.com","registry_name":"my-harbor","registry_password":123456,"registry_type":"Harbor","registry_username":"me"},"x-request-examples-description-1":"接入三方镜像仓。","x-request-examples-url-1":"POST https://{endpoint}/v5/{project_id}/image/registries?enterprise_project_id=all_granted_eps","x-support-sdk":"Y","x-surpport-apiexplorer":true}}},"product_short":"HSS","region_id":"cn-north-4","schemes":["HTTPS"],"security_definitions":null,"summary":"新增镜像仓库","tags":"容器安装与配置","uri":null,"version":"2.0"}