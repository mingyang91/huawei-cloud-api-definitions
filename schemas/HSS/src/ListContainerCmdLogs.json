{"base_path":"/","components":null,"consumes":"","definitions":{"ContainerCmdLogListResponseInfo":{"description":"容器内运行命令的日志列表","properties":{"data_list":{"description":"容器内运行命令的日志列表","items":{"$ref":"#/definitions/ContainerCmdLogResponseInfo"},"maxItems":65535,"minItems":0,"type":"array"},"total_num":{"description":"日志总条数","format":"int32","maximum":2147483647,"minimum":0,"type":"integer"}},"type":"object"},"ContainerCmdLogResponseInfo":{"description":"容器内运行命令的日志信息","properties":{"cluster_id":{"description":"集群id","maxLength":256,"minLength":1,"type":"string"},"cluster_name":{"description":"集群名称","maxLength":256,"minLength":1,"type":"string"},"cluster_type":{"description":"集群类型,包含以下几种:\n- cce: cce集群\n- ali: 阿里云集群\n- tencent: 腾讯云集群\n- azure: 微软云集群\n- aws: 亚马逊集群\n- self_built_hw: 华为云自建集群\n- self_built_idc: IDC自建集群","maxLength":32,"minLength":1,"type":"string"},"cmd":{"description":"执行的命令","maxLength":512,"minLength":1,"type":"string"},"container_id":{"description":"产生日志的容器id","maxLength":128,"minLength":1,"type":"string"},"container_name":{"description":"产生日志的容器名称","maxLength":128,"minLength":1,"type":"string"},"group_name":{"description":"执行命令的用户所属用户组","maxLength":512,"minLength":1,"type":"string"},"host_id":{"description":"主机ID","maxLength":128,"minLength":0,"type":"string"},"host_name":{"description":"主机名称","maxLength":128,"minLength":0,"type":"string"},"parent_path":{"description":"父进程路径","maxLength":512,"minLength":1,"type":"string"},"parent_process_pid":{"description":"父进程pid","format":"int32","maximum":10000000,"minimum":0,"type":"integer"},"path":{"description":"命令行对应的进程路径","maxLength":256,"minLength":1,"type":"string"},"private_ip":{"description":"容器所在主机的私网ip","maxLength":128,"minLength":0,"type":"string"},"process_pid":{"description":"命令行对应的进程pid","format":"int32","maximum":10000000,"minimum":0,"type":"integer"},"public_ip":{"description":"主机ip","example":"100.0.0.1","maxLength":128,"minLength":0,"type":"string"},"time":{"description":"日志产生的时间","format":"int64","maximum":9223372036854775807,"minimum":0,"type":"integer"},"user_name":{"description":"执行命令的用户","maxLength":128,"minLength":1,"type":"string"}},"type":"object"}},"description":null,"group_id":"3f29a7c68cc24a39a794ff9ddec0ba77","host":"hss.cn-north-4.myhuaweicloud.com","id":"4ef7a6a83b654a7c819f4db35429b385","info_version":"v5","method":"get","name":"ListContainerCmdLogs","parameters":{},"paths":{"/v5/{project_id}/container/cmd-histories":{"get":{"description":"查询容器内运行的命令列表","operationId":"ListContainerCmdLogs","parameters":[{"description":"用户Token。\n通过调用IAM服务获取用户Token接口获取(响应消息头中X-Subject-Token的值)","in":"header","maxLength":32768,"minLength":1,"name":"x-auth-token","pattern":"^.*$","required":true,"type":"string"},{"description":"租户项目ID","in":"path","maxLength":128,"minLength":1,"name":"project_id","pattern":"^.*$","required":true,"type":"string","x-example":"2b31ed520xxxxxxebedb6e57xxxxxxxx"},{"default":"0","description":"主机所属的企业项目ID。\n开通企业项目功能后才需要配置企业项目。\n企业项目ID默认取值为“0”,表示默认企业项目。如果需要查询所有企业项目下的主机,请传参“all_granted_eps”。如果您只有某个企业项目的权限,则需要传递该企业项目ID,查询该企业项目下的主机,否则会因权限不足而报错。","in":"query","maxLength":256,"minLength":1,"name":"enterprise_project_id","pattern":"^.*$","required":false,"type":"string"},{"description":"集群id","in":"query","maxLength":256,"minLength":1,"name":"cluster_id","pattern":"^.*$","required":false,"type":"string"},{"description":"集群名称","in":"query","maxLength":256,"minLength":0,"name":"cluster_name","pattern":"^.*$","required":false,"type":"string"},{"description":"产生日志的容器所在主机的名称","in":"query","maxLength":256,"minLength":0,"name":"host_name","pattern":"^.*$","required":false,"type":"string"},{"description":"产生日志的容器所在主机的id","in":"query","maxLength":64,"minLength":0,"name":"host_id","pattern":"^.*$","required":false,"type":"string"},{"description":"产生日志的容器所在主机的ip","in":"query","maxLength":64,"minLength":0,"name":"host_ip","pattern":"^.*$","required":false,"type":"string"},{"description":"容器id","in":"query","maxLength":256,"minLength":1,"name":"container_id","pattern":"^.*$","required":false,"type":"string"},{"description":"产生日志的容器名称","in":"query","maxLength":128,"minLength":0,"name":"container_name","pattern":"^.*$","required":false,"type":"string"},{"description":"运行的命令行","in":"query","maxLength":128,"minLength":0,"name":"cmd","pattern":"^.*$","required":false,"type":"string"},{"description":"命令行对应的进程路径","in":"query","maxLength":128,"minLength":0,"name":"path","pattern":"^.*$","required":false,"type":"string"},{"description":"查询日志范围的最小时间","format":"int64","in":"query","maximum":9223372036854775807,"minimum":0,"name":"start_time","required":false,"type":"integer"},{"description":"查询日志范围的最大时间","format":"int64","in":"query","maximum":9223372036854775807,"minimum":0,"name":"end_time","required":false,"type":"integer"},{"default":10,"description":"每页显示个数,默认为10","format":"int32","in":"query","maximum":200,"minimum":0,"name":"limit","required":true,"type":"integer"},{"default":0,"description":"偏移量:指定返回记录的开始位置,必须为数字,取值范围为大于或等于0,默认0","format":"int32","in":"query","maximum":2000000,"minimum":0,"name":"offset","required":true,"type":"integer"}],"responses":{"200":{"description":"容器内运行命令列表","examples":{"application/json":{"data_list":[{"cluster_id":"d8980c20-fd83-418a-a9c1-1abe9044ee3a","cluster_name":"cluster_1323","cluster_type":"cce","cmd":"nsenter -t 1 -m -n -i -p -u systemctl is-enabled docker","container_id":"eedf8817-f486-4c4f-a395-b8373ecc7ef4","container_name":"edfry","group_name":"testuser","host_id":"09724867-7b91-482d-9702-daf9113f1b62","host_name":"agentcompile-2","parent_path":"/usr/bin/containerd-shim","parent_process_pid":542637,"path":"/usr/bin/ls","private_ip":"172.16.0.**","process_pid":12345,"public_ip":"100.0.0.1","time":1736925153481,"user_name":"testuser"}],"total_num":1}},"schema":{"$ref":"#/definitions/ContainerCmdLogListResponseInfo"}}},"summary":"查询容器内运行的命令列表","tags":["容器管理"],"x-api-type":"open-api","x-apigateway-request-type":"public","x-iam-auth-meta-anno":{"abacAction":"hss:container:listContainerCmdLogs","abacActionAlias":"hss:containers:list","authLevel":"PROJECT","rbac":["te_admin","hss_adm","te_admin+op_restricted","te_admin+op_suspended","hss_adm+op_restricted","hss_adm+op_suspended","readonly","op_service"]},"x-is-registered":"Y","x-method-annotations":["@CtsInfo(userOperationType = \"listContainerCmdLogs\", operationId = \"ListContainerCmdLogs\")"],"x-support-sdk":"N"}}},"product_short":"HSS","region_id":"cn-north-4","schemes":["HTTPS"],"security_definitions":null,"summary":"查询容器内运行的命令列表","tags":"容器管理","uri":null,"version":"2.0"}