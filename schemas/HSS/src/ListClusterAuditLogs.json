{"base_path":"/","components":null,"consumes":"","definitions":{"ClusterAuditLogListResponseInfo":{"description":"k8s集群审计日志列表","properties":{"data_list":{"description":"k8s集群审计日志列表","items":{"$ref":"#/definitions/ClusterAuditLogResponseInfo"},"maxItems":65535,"minItems":0,"type":"array"},"total_num":{"description":"日志总条数","format":"int32","maximum":2147483647,"minimum":0,"type":"integer"}},"type":"object"},"ClusterAuditLogResponseInfo":{"description":"k8s集群审计日志信息","properties":{"cluster_id":{"description":"集群id","maxLength":256,"minLength":1,"type":"string"},"cluster_name":{"description":"集群名称","maxLength":256,"minLength":1,"type":"string"},"cluster_type":{"description":"集群类型,包含以下几种:\n- cce: cce集群\n- ali: 阿里云集群\n- tencent: 腾讯云集群\n- azure: 微软云集群\n- aws: 亚马逊集群\n- self_built_hw: 华为云自建集群\n- self_built_idc: IDC自建集群","maxLength":32,"minLength":1,"type":"string"},"content":{"description":"审计日志的内容,json格式的字符串","maxLength":65535,"minLength":1,"type":"string"},"host_id":{"description":"主机ID","maxLength":128,"minLength":0,"type":"string"},"host_ip":{"description":"主机ip","maxLength":128,"minLength":0,"type":"string"},"host_name":{"description":"主机名称","maxLength":128,"minLength":0,"type":"string"},"line_num":{"description":"cce集群日志的行号","example":123123,"maxLength":128,"minLength":0,"type":"string"},"time":{"description":"日志产生的时间","format":"int64","maximum":9223372036854775807,"minimum":0,"type":"integer"}},"type":"object"}},"description":null,"group_id":"3f29a7c68cc24a39a794ff9ddec0ba77","host":"hss.cn-north-4.myhuaweicloud.com","id":"23e38652e8b74892a6c6e174eb89209d","info_version":"v5","method":"get","name":"ListClusterAuditLogs","parameters":{},"paths":{"/v5/{project_id}/container/kubernetes/cluster/audit-logs":{"get":{"description":"查询k8s集群审计日志列表","operationId":"ListClusterAuditLogs","parameters":[{"description":"用户Token。\n通过调用IAM服务获取用户Token接口获取(响应消息头中X-Subject-Token的值)","in":"header","maxLength":32768,"minLength":1,"name":"X-Auth-Token","pattern":"^.*$","required":true,"type":"string","x-example":"$${X-Auth-Token}"},{"description":"项目ID","in":"path","maxLength":256,"minLength":1,"name":"project_id","pattern":"^.*$","required":true,"type":"string"},{"default":"0","description":"主机所属的企业项目ID。\n开通企业项目功能后才需要配置企业项目。\n企业项目ID默认取值为“0”,表示默认企业项目。如果需要查询所有企业项目下的主机,请传参“all_granted_eps”。如果您只有某个企业项目的权限,则需要传递该企业项目ID,查询该企业项目下的主机,否则会因权限不足而报错。","in":"query","maxLength":256,"minLength":1,"name":"enterprise_project_id","pattern":"^.*$","required":false,"type":"string"},{"description":"集群id","in":"query","maxLength":256,"minLength":1,"name":"cluster_id","pattern":"^.*$","required":true,"type":"string"},{"description":"集群名称","in":"query","maxLength":256,"minLength":0,"name":"cluster_name","pattern":"^.*$","required":false,"type":"string"},{"description":"主机名称","in":"query","maxLength":256,"minLength":0,"name":"host_name","pattern":"^.*$","required":false,"type":"string"},{"description":"主机id","in":"query","maxLength":256,"minLength":0,"name":"host_id","pattern":"^.*$","required":false,"type":"string"},{"description":"主机ip","in":"query","maxLength":256,"minLength":0,"name":"host_ip","pattern":"^.*$","required":false,"type":"string"},{"description":"审计日志对应的动作,包含以下几种:\n- create 创建资源\n- delete 删除资源\n- deletecollection 批量资源集合\n- patch 修改资源\n- update 更新资源\n- get 获取资源\n- list 获取资源列表\n- watch 监控资源","in":"query","maxLength":256,"minLength":0,"name":"verb","pattern":"^create|delete|deletecollection|patch|update|get|list|watch$","required":false,"type":"string"},{"description":"查询日志范围的最小时间","format":"int64","in":"query","maximum":9223372036854775807,"minimum":0,"name":"start_time","required":true,"type":"integer"},{"description":"查询日志范围的最大时间","format":"int64","in":"query","maximum":9223372036854775807,"minimum":0,"name":"end_time","required":true,"type":"integer"},{"default":10,"description":"每页显示个数,默认为10","format":"int32","in":"query","maximum":200,"minimum":0,"name":"limit","required":true,"type":"integer"},{"default":0,"description":"偏移量:指定返回记录的开始位置,必须为数字,取值范围为大于或等于0,默认0","format":"int32","in":"query","maximum":2000000,"minimum":0,"name":"offset","required":true,"type":"integer"},{"description":"查询cce集群日志时需要传的分页行号","in":"query","maxLength":128,"minLength":0,"name":"line_num","required":false,"type":"string"}],"responses":{"200":{"description":"请求已成功","examples":{"application/json":{"data_list":[{"cluster_id":"b075094b-d21a-499a-9006-624089c94402","cluster_name":"ywk-55555","cluster_type":"cce","content":"listImageTagscdcssd-2/log4j:*, Method:GET Url=/v2/manage/namespaces/cdcssd-2/repos/log4j/tags, Reason","host_id":"16***0dc-94cb-4ca3-9087-06***cd168c1","host_ip":"192.168.0.93","host_name":111,"time":1814080859608}],"total_num":1}},"schema":{"$ref":"#/definitions/ClusterAuditLogListResponseInfo"}}},"summary":"查询k8s集群审计日志列表","tags":["集群管理"],"x-api-type":"open-api","x-apigateway-request-type":"public","x-iam-auth-meta-anno":{"abacAction":"hss:container:listClusterAuditLogs","abacActionAlias":"hss:containers:list","authLevel":"PROJECT","rbac":["te_admin","hss_adm","te_admin+op_restricted","te_admin+op_suspended","hss_adm+op_restricted","hss_adm+op_suspended","readonly","op_service"]},"x-is-registered":"Y","x-method-annotations":["@CtsInfo(userOperationType = \"listClusterAuditLogs\", operationId = \"ListClusterAuditLogs\")"],"x-support-sdk":"N","x-surpport-apiexplorer":true}}},"product_short":"HSS","region_id":"cn-north-4","schemes":["HTTPS"],"security_definitions":null,"summary":"查询k8s集群审计日志列表","tags":"集群管理","uri":null,"version":"2.0"}