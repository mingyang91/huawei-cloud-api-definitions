{"base_path":"/","components":null,"consumes":"","definitions":{"CreateBuildJobParameter":{"description":"创建构建作业参数","properties":{"name":{"description":"参数定义名,默认为hudson.model.StringParameterDefinition","example":"hudson.model.StringParameterDefinition","type":"string"},"params":{"description":"构建执行参数子参数","items":{"$ref":"#/definitions/CreateBuildJobParameterParam"},"type":"array"}}},"CreateBuildJobParameterParam":{"description":"构建执行参数子参数","properties":{"limits":{"description":"枚举类参数限制","items":{"$ref":"#/definitions/LimitsParam"},"type":"array"},"name":{"description":"参数字段名","example":"name","type":"string"},"value":{"description":"参数字段值","example":"codeBranch","type":"string"}}},"CreateBuildJobRequestBody":{"description":"创建构建任务接口请求体","properties":{"arch":{"description":"使用机器的架构","example":"x86-64","type":"string"},"auto_update_sub_module":{"description":"是否自动更新子模块","example":false,"type":"string"},"build_config_type":{"description":"构建的配置类型","example":"ACTION","type":"string"},"flavor":{"description":"执行机规格","example":"2u8g","type":"string"},"host_type":{"description":"host类型","example":"devcloud","type":"string"},"job_name":{"description":"任务名称","example":"jobname","type":"string"},"parameters":{"description":"构建执行参数列表","items":{"$ref":"#/definitions/CreateBuildJobParameter"},"type":"array"},"project_id":{"description":"构建任务所在项目的ID","example":"a287e712be6c404ca26e5f69040fa12b","type":"string"},"scms":{"description":"构建执行SCM","items":{"$ref":"#/definitions/CreateBuildJobScm"},"type":"array"},"steps":{"description":"构建执行的步骤","items":{"$ref":"#/definitions/CreateBuildJobSteps"},"type":"array"}},"required":["arch","project_id","job_name","steps"],"type":"object"},"CreateBuildJobScm":{"description":"构建执行SCM","properties":{"branch":{"description":"代码分支","example":"master","type":"string"},"build_type":{"description":"构建类别","example":"branch","type":"string"},"depth":{"description":"克隆深度","example":1,"type":"string"},"end_point_id":{"description":"endpointId","example":"endpointId","type":"string"},"is_auto_build":{"description":"是否自动构建","example":true,"type":"boolean"},"repo_id":{"description":"repo的id","example":2131746215,"type":"string"},"scm_type":{"description":"仓库类别,Repo、Github等","example":"codehub","type":"string"},"source":{"description":"source","example":"source","type":"string"},"url":{"description":"代码仓地址","example":"git@codehub.git","type":"string"},"web_url":{"description":"代码仓http地址","example":"https://codehub.devcloud/xxx","type":"string"}},"required":["url","scm_type"],"type":"object"},"CreateBuildJobSteps":{"description":"构建执行的步骤,采用驼峰式命名","example":"{ \"Properties\": {\n    \"image\": \"maven3.5.3-jdk8-open\",\n    \"settingMode\": \"auto\",\n    \"userPublicRepositories\": [],\n    \"userPrivateRepositories\": [],\n    \"pomMode\": \"no\",\n    \"releaseArtifact\": {\n        \"displayName\": \"\",\n        \"value\": \"\"\n    },\n    \"snapshotArtifact\": {\n        \"displayName\": \"\",\n        \"value\": \"\"\n    },\n    \"deal\": \"notDeal\",\n    \"ignoreTest\": false,\n    \"file\": \"**/TEST*.xml\",\n    \"junitCoverageSwitch\": false,\n    \"coverageReportPath\": \"**/site/jacoco\",\n    \"cacheOption\": \"cached\",\n    \"command\": \"# 功能:  打包\\n# 参数说明:\\n#\\t\\t-Dmaven.test.skip=true:跳过单元测试\\n#\\t\\t-U:每次构建检查依赖更新,可避免缓存中快照版本依赖不更新问题,但会牺牲部分性能\\n#\\t\\t-e -X :打印调试信息,定位疑难构建问题时建议使用此参数构建\\n#\\t\\t-B:以batch模式运行,可避免日志打印时出现ArrayIndexOutOfBoundsException异常\\n# 使用场景: 打包项目且不需要执行单元测试时使用\\nmvn package -Dmaven.test.skip=true -U -e -X -B\\n\\n#功能:打包;执行单元测试,但忽略单元测试用例失败,每次构建检查依赖更新\\n#使用场景: 需要执行单元测试,且使用构建提供的单元测试报告服务统计执行情况\\n# 使用条件:在”单元测试“中选择处理单元测试结果,并正确填写测试结果文件路径\\n#mvn package -Dmaven.test.failure.ignore=true -U -e -X -B\\n\\n#功能:打包并发布依赖包到私有依赖库\\n#使用场景: 需要将当前项目构建结果发布到私有依赖仓库以供其它maven项目引用时使用\\n#注意事项: 此处上传的目标仓库为CodeArts私有依赖仓库,注意与软件发布仓库区分\\n#mvn deploy -Dmaven.test.skip=true -U -e -X -B\",\n    \"doCheck\": \"disable\",\n    \"dependencyProjectDir\": \"./\",\n    \"dependencySettings\": \"~/.m2/settings.xml\",\n    \"dependencyCheckParam\": \" \"\n}, \"module_id\": \"devcloud2018.codeci_action_20043.action\", \"name\": \"Maven构建\", \"version\": \"20231001.6\", \"enable\": true },\n","properties":{"enable":{"description":"是否开启","example":true,"type":"boolean"},"module_id":{"description":"构建模块id","example":"devcloud2018.codeci_action_20043.action","type":"string"},"name":{"description":"构建模块名称","example":"Maven构建","type":"string"},"properties":{"additionalProperties":{"type":"object"},"description":"具体的构建步骤","example":"\"image\": \"maven3.5.3-jdk8-open\",\n          \"settingMode\": \"auto\",\n          \"userPublicRepositories\": [],\n          \"userPrivateRepositories\": [],\n          \"pomMode\": \"no\",\n          \"releaseArtifact\": {\n              \"displayName\": \"\",\n              \"value\": \"\"\n          },\n          \"snapshotArtifact\": {\n              \"displayName\": \"\",\n              \"value\": \"\"\n          },\n          \"deal\": \"notDeal\",\n          \"ignoreTest\": false,\n          \"file\": \"**/TEST*.xml\",\n          \"junitCoverageSwitch\": false,\n          \"coverageReportPath\": \"**/site/jacoco\",\n          \"cacheOption\": \"cached\",\n          \"command\": \"# 功能:  打包\\n# 参数说明:\\n#\\t\\t-Dmaven.test.skip=true:跳过单元测试\\n#\\t\\t-U:每次构建检查依赖更新,可避免缓存中快照版本依赖不更新问题,但会牺牲部分性能\\n#\\t\\t-e -X :打印调试信息,定位疑难构建问题时建议使用此参数构建\\n#\\t\\t-B:以batch模式运行,可避免日志打印时出现ArrayIndexOutOfBoundsException异常\\n# 使用场景: 打包项目且不需要执行单元测试时使用\\nmvn package -Dmaven.test.skip=true -U -e -X -B\\n\\n#功能:打包;执行单元测试,但忽略单元测试用例失败,每次构建检查依赖更新\\n#使用场景: 需要执行单元测试,且使用构建提供的单元测试报告服务统计执行情况\\n# 使用条件:在”单元测试“中选择处理单元测试结果,并正确填写测试结果文件路径\\n#mvn package -Dmaven.test.failure.ignore=true -U -e -X -B\\n\\n#功能:打包并发布依赖包到私有依赖库\\n#使用场景: 需要将当前项目构建结果发布到私有依赖仓库以供其它maven项目引用时使用\\n#注意事项: 此处上传的目标仓库为CodeArts私有依赖仓库,注意与软件发布仓库区分\\n#mvn deploy -Dmaven.test.skip=true -U -e -X -B\",\n          \"doCheck\": \"disable\",\n          \"dependencyProjectDir\": \"./\",\n          \"dependencySettings\": \"~/.m2/settings.xml\",\n          \"dependencyCheckParam\": \" \"\n","type":"object"},"version":{"description":"构建版本","example":20231001.6,"type":"string"}},"required":["module_id","name"],"type":"object"},"ErrorResponseBody":{"properties":{"error_code":{"description":"错误码","example":"CB.00060200","type":"string"},"error_msg":{"description":"错误描述","example":"Invalid param","type":"string"}},"type":"object"},"LimitsParam":{"description":"枚举类参数限制","properties":{"disable":{"description":"是否生效,默认为\"0\",为生效状态","type":"string"},"display_name":{"description":"参数展示的名字","type":"string"},"name":{"description":"参数名字","type":"string"}}},"QueryJobConfigResponseBody":{"properties":{"error":{"description":"返回错误信息","example":"error_message","type":"string"},"result":{"$ref":"#/definitions/CreateBuildJobRequestBody","description":"查询模板结果"},"status":{"description":"返回状态信息","example":"success","type":"string"}},"type":"object"}},"description":null,"group_id":"50626d0f704e4af3adfd875e2acffcb6","host":"cloudbuild-ext.cn-north-4.myhuaweicloud.com","id":"5183d4ef76004a659dbda15c660ab604","info_version":"v3","method":"get","name":"ShowJobConfig","parameters":{"Job_Id":{"description":"构建的任务ID;\n编辑构建任务时,浏览器URL末尾的32位数字、字母组合的字符串。","in":"path","name":"job_id","pattern":"^[0-9a-z]{32}$","required":true,"type":"string","x-example":"901878212b1a49be9c1a1054c272762a"}},"paths":{"/v1/job/{job_id}/config":{"get":{"deprecated":false,"description":"获取构建任务详情","operationId":"ShowJobConfig","parameters":[{"$ref":"#/parameters/Job_Id"},{"description":"输入\"true\"或者\"false\"来控制返回参数是不是完整的","in":"query","name":"get_all_params","required":false,"type":"string"}],"produces":["application/json;charset=UTF-8"],"responses":{"200":{"description":"OK","examples":{"application/json":{"error":null,"result":{"arch":"x86-64","auto_update_sub_module":"false","flavor":"2u8g","host_type":"devcloud","job_name":"oychap213i2","parameters":[{"name":"hudson.model.StringParameterDefinition","params":[{"limits":null,"name":"name","value":"codeBranch"},{"limits":null,"name":"type","value":"normalparam"},{"limits":null,"name":"defaultValue","value":"master"},{"limits":null,"name":"description","value":"Code branch, predefined parameters"},{"limits":null,"name":"deletion","value":"false"},{"limits":null,"name":"defaults","value":"true"},{"limits":null,"name":"staticVar","value":"false"},{"limits":null,"name":"sensitiveVar","value":"false"}]}],"project_id":"a287e712be6c404ca26e5f69040fa12b","scms":[{"branch":"master","build_type":"branch","depth":"1","end_point_id":null,"is_auto_build":false,"repo_id":"2111746211","scm_type":"codehub","source":null,"url":"git@codehub.devcloud.cn-north-7.ulanqab.huawei.com:soso-test00001/an.git","web_url":"https://devcloud.cn-north-7.ulanqab.huawei.com/codehub/2111746211/home"}],"steps":null},"status":"success"}},"schema":{"$ref":"#/definitions/QueryJobConfigResponseBody"}},"400":{"description":"Bad Request","schema":{"$ref":"#/definitions/ErrorResponseBody"}},"401":{"description":"Unauthorized","schema":{"$ref":"#/definitions/ErrorResponseBody"}},"403":{"description":"Forbidden","schema":{"$ref":"#/definitions/ErrorResponseBody"}},"404":{"description":"Not Found","schema":{"$ref":"#/definitions/ErrorResponseBody"}},"500":{"description":"Internal Server Error","schema":{"$ref":"#/definitions/ErrorResponseBody"}}},"security":[{"apig-auth-iam":[]}],"summary":"获取构建任务详情","tags":["JobManager"],"x-api-type":"open-api","x-apigateway-ratelimit":"ten_50_min","x-internel":"false","x-is-registered":"Y","x-request-examples-url-1":"POST https://{endpoint}/v1/job/48c66c6002964721be537cdc6ce0297b/config","x-support-sdk":"Y"}}},"product_short":"CodeArtsBuild","region_id":"cn-north-4","schemes":["HTTPS"],"security_definitions":{"APP":{"in":"header","name":"Authorization","type":"apiKey","x-apigateway-auth-type":"AppSigv1"},"apig-auth-app-optional":{"in":"header","name":"Authorization","type":"apiKey","x-apigateway-auth-opt":{"access-auth-type":"optional"},"x-apigateway-auth-type":"AppSigv1"},"apig-auth-iam":{"in":"header","name":"unused","type":"apiKey","x-apigateway-auth-type":"IAM"},"apig-auth-iam-none":{"in":"header","name":"unused","type":"apiKey","x-apigateway-auth-type":"IAM_NONE"}},"summary":"获取构建任务详情","tags":"构建任务管理","uri":null,"version":"2.0"}