{"base_path":"/","components":null,"consumes":"","definitions":{"AgentConfig":{"description":"探针配置","properties":{"agent_id":{"description":"探针id","format":"int32","maximum":2147483647,"minimum":0,"type":"integer"},"app_log_level":{"description":"应用日志等级(ALL/TRACE/DEBUG/INFO/WARN/ERROR/OFF)","type":"string"},"app_log_path":{"description":"应用日志路径","type":"string"},"clickhouse_enable":{"description":"clickhouse影子规则开关","type":"boolean"},"clickhouse_shadow_repository":{"description":"clickhouse影子库映射信息","type":"string"},"clickhouse_shadow_type":{"description":"clickhouse影子规则类型","type":"string"},"db_enable":{"description":"是否开启数据库影子规则","example":false,"type":"boolean"},"db_shadow_repository":{"description":"数据库影子库名称","example":"","maxLength":1024,"minLength":0,"type":"string"},"db_shadow_type":{"description":"数据库影子库类型","example":"","maxLength":64,"minLength":0,"type":"string"},"extensions":{"description":"自定义配置","example":"{\\\"ext1\\\":\\\"val1\\\",\\\"ext2\\\":\\\"val2\\\"}","type":"string"},"kafka_enable":{"description":"kafka影子规则开关","type":"boolean"},"kafka_shadow_topic_prefix":{"description":"kafka影子topic前缀","type":"string"},"log_level":{"description":"日志级别,枚举值:INFO,DEBUG,WARN,ERROR","example":"INFO","maxLength":128,"minLength":0,"type":"string"},"log_path":{"description":"日志路径","example":"/opt/cloud/logs/","maxLength":1024,"minLength":0,"type":"string"},"main_switch":{"description":"影子规则开关","example":false,"type":"boolean"},"mock_rule_list":{"description":"mock规则列表","items":{"$ref":"#/definitions/MockRuleConfig"},"type":"array"},"pulsar_enable":{"description":"是否开启pulsar影子库规则","type":"boolean"},"pulsar_shadow_topic_prefix":{"description":"pulsar影子库前缀","type":"string"},"redis_enable":{"description":"是否开启redis影子库规则","example":false,"type":"boolean"},"redis_shadow_key_prefix":{"description":"redis影子库key前缀","example":"","maxLength":1024,"minLength":0,"type":"string"},"redis_shadow_repository":{"description":"redis影子库名称","example":"","maxLength":1024,"minLength":0,"type":"string"},"redis_shadow_type":{"description":"redis影子库类型","example":"","maxLength":1024,"minLength":0,"type":"string"}},"type":"object"},"MockRuleConfig":{"description":"全链路压测探针Mock规则配置","properties":{"enable":{"description":"是否启用","example":true,"type":"boolean"},"id":{"description":"规则id","example":1,"format":"int32","maximum":2147483647,"minimum":0,"type":"integer"},"mock_strategy":{"description":"mock策略(redirect/json)","example":"redirect","type":"string"},"name":{"description":"规则名称","example":"test","type":"string"},"project_id":{"description":"项目id","example":"d61111bc87a5429283677286922222","type":"string"},"redirect_url":{"description":"重定向地址","example":"https://cde.com","type":"string"},"request_method":{"description":"请求方式(GET/POST/PUT/DELET/PATCH)","example":"GET","maxLength":1024,"minLength":0,"type":"string"},"request_url":{"description":"请求地址","example":"https://abc.com","type":"string"},"response_body":{"description":"自定义响应体","type":"string"},"response_code":{"description":"自定义响应码","format":"int32","type":"integer"},"response_header":{"additionalProperties":{"type":"string"},"description":"自定义响应头","type":"object"},"response_time":{"description":"自定义响应时长","format":"int32","type":"integer"},"service_type":{"description":"服务类型(当前只支持http)","example":"http","type":"string"}},"type":"object"},"UpdateAgentHealthStatusRequestBody":{"description":"上报探针健康状态请求体","properties":{"update_time":{"description":"探针上次获取全链路应用的更新时间戳(单位:毫秒)","example":1681020743000,"format":"int64","maximum":9999999999999,"minimum":0,"type":"integer"}},"required":["update_time"],"type":"object"},"UpdateAgentStatusResponseBody":{"properties":{"code":{"description":"响应码","maxLength":1024,"minLength":0,"type":"string"},"extend":{"description":"扩展信息","type":"object"},"message":{"description":"响应消息","maxLength":10240,"minLength":0,"type":"string"},"result":{"$ref":"#/definitions/UpdateAgentStatusResponseDetail","description":"结果"}},"required":["code","message"],"type":"object"},"UpdateAgentStatusResponseDetail":{"properties":{"id":{"description":"全链路应用id","format":"int32","maximum":2147483647,"minimum":0,"type":"integer"},"result":{"$ref":"#/definitions/AgentConfig","description":"探针配置"},"status":{"description":"全链路应用状态,枚举值:CREATING,FAILED,NORMAL,DELETE","maxLength":64,"minLength":0,"type":"string"},"update_time":{"description":"全链路应用更新时间","format":"int64","maximum":9999999999999,"minimum":0,"type":"integer"}},"required":["id","status","update_time"],"type":"object"}},"description":null,"group_id":"efacf12b40d94df780e9934bee36f309","host":"cpts.cn-north-4.myhuaweicloud.com","id":"1a63badd6ab34db2a463ad850850a126","info_version":"v1","method":"put","name":"UpdateAgentHealthStatus","parameters":{"project_id":{"description":"项目ID,获取方式请参见[获取项目ID](cpts_api_0017.xml)。","in":"path","maxLength":64,"minLength":0,"name":"project_id","required":true,"type":"string"}},"paths":{"/v1/{project_id}/stress/agents/{agent_id}":{"put":{"description":"全链路压测探针上报健康状态","operationId":"UpdateAgentHealthStatus","parameters":[{"description":"探针id","format":"int32","in":"path","name":"agent_id","required":true,"type":"integer"},{"$ref":"#/parameters/project_id"},{"description":"全链路压测探针上报健康状态请求体","in":"body","name":"UpdateAgentHealthStatusRequestBody","required":true,"schema":{"$ref":"#/definitions/UpdateAgentHealthStatusRequestBody"}}],"responses":{"200":{"description":"上报探针健康状态响应体","schema":{"$ref":"#/definitions/UpdateAgentStatusResponseBody"}}},"summary":"全链路压测探针上报健康状态","tags":["全链路压测管理"],"x-api-type":"open-api","x-apiexplorer-hide":"false","x-is-registered":"Y","x-open-region-cloud":"hws,hcs,hcs_sm","x-request-examples-1":{"update_time":1688113839000},"x-request-examples-description-1":"上报全链路压测探针的健康状态,当前时间戳是1688113839000(毫秒时间戳)。","x-request-examples-text-1":{"update_time":1688113839000},"x-request-examples-url-1":"/v1/{project_id}/stress/agents/1","x-support-sdk":"Y"}}},"product_short":"CPTS","region_id":"cn-north-4","schemes":["HTTPS"],"security_definitions":null,"summary":"全链路压测探针上报健康状态","tags":"全链路压测管理","uri":null,"version":"2.0"}