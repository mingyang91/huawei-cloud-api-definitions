{"base_path":"/","components":null,"consumes":"","definitions":{"CaseDoc":{"description":"文本用例信息","properties":{"description":{"description":"用例描述信息","example":"this is description","maxLength":2147483647,"minLength":0,"type":"string"},"label_names":{"description":"标签","example":["label1"],"items":{"type":"string"},"type":"array"},"preparation":{"description":"前置条件","example":"this is prerequisites","maxLength":2147483647,"minLength":0,"type":"string"},"rank":{"description":"用例等级(0-L0;1-L1;2-L2;3-L3;4-L4;)","example":1,"format":"int32","maximum":64,"minimum":0,"type":"integer"},"status_code":{"description":"状态(0-新建;5-设计中;6-测试中;7-完成;)","example":0,"format":"int32","type":"integer"},"steps":{"description":"测试步骤","items":{"properties":{"expect_result":{"description":"步骤描述","example":"response status code 200","maxLength":2147483647,"minLength":0,"type":"string"},"test_step":{"description":"预期结果","example":"this is test steps","maxLength":2147483647,"minLength":0,"type":"string"}}},"type":"array"}},"type":"object"},"CaseInfoDetail":{"properties":{"case_id":{"description":"用例id","example":150,"format":"int32","maximum":2147483647,"minimum":0,"type":"integer"},"case_info":{"$ref":"#/definitions/CaseDoc","description":"文本用例信息"},"case_type":{"description":"用例类型(0:常规用例;)","example":0,"format":"int32","maximum":2147483647,"minimum":0,"type":"integer"},"collect_log_policy":{"description":"日志采集策略(0-请求模式;1-用例模式)","format":"int32","maximum":32,"minimum":0,"type":"integer"},"contents":{"description":"用例脚本信息","items":{"$ref":"#/definitions/Contents"},"maxItems":1024,"minItems":0,"type":"array"},"directory_id":{"description":"用例所属目录id(旧版接口可不传)","format":"int32","maximum":2147483647,"minimum":0,"type":"integer"},"for_loop_params":{"description":"旧版本逻辑控制器字段,当前已未使用","items":{"type":"object"},"maxItems":10240,"minItems":0,"type":"array"},"increase_setting":{"description":"梯度递增","items":{"type":"object"},"maxItems":10240,"minItems":0,"type":"array"},"link_app_list":{"description":"关联全链路应用列表","items":{"format":"int32","type":"integer"},"type":"array"},"name":{"description":"用例名称","example":"1","maxLength":1024,"minLength":0,"type":"string"},"setup_contents":{"description":"前置步骤","items":{"$ref":"#/definitions/Contents"},"type":"array"},"sort":{"description":"排序字段","format":"int32","type":"integer"},"stages":{"description":"阶段信息","items":{"$ref":"#/definitions/TestCaseStage"},"maxItems":1024,"minItems":0,"type":"array"},"status":{"description":"状态,0:已删除;1:启用;2:禁用","example":1,"format":"int32","maximum":2147483647,"minimum":0,"type":"integer"},"temp_id":{"description":"用例id","example":0,"format":"int32","maximum":2147483647,"minimum":0,"type":"integer"},"user_replicas":{"description":"执行器个数","format":"int32","maximum":2147483647,"minimum":0,"type":"integer"}},"type":"object"},"Content":{"properties":{"content":{"$ref":"#/definitions/ContentInfo","description":"内容"},"content_type":{"description":"用例卡片类型(1:思考时间;2:报文;3:检查点;4:变量提取)","example":2,"format":"int32","maximum":2147483647,"minimum":0,"type":"integer"}},"type":"object"},"ContentHeader":{"properties":{"key":{"description":"键","example":"Content-Type","maxLength":40960,"minLength":0,"type":"string"},"value":{"description":"值","example":"application/json","maxLength":40960,"minLength":0,"type":"string"}},"type":"object"},"ContentInfo":{"properties":{"bitrate_type":{"description":"分辨率策略","format":"int32","maximum":128,"minimum":0,"type":"integer"},"body_type":{"description":"body类型(0:字符串;1:form-data格式;3:x-www-form-urlencoded格式)","example":0,"format":"int32","maximum":2147483647,"minimum":0,"type":"integer"},"bodys":{"description":"bodys","items":{"type":"object"},"type":"array"},"check_end_length":{"description":"TCP/UDP协议返回数据长度","type":"object"},"check_end_str":{"description":"TCP/UDP协议返回结束符","type":"object"},"check_end_type":{"description":"TCP/UDP协议返回结束类型,1:返回数据长度;2:结束符","type":"object"},"connect_timeout":{"description":"超时时间","example":5000,"format":"int32","maximum":2147483647,"minimum":0,"type":"integer"},"connect_type":{"description":"连接设置,当前版本已未使用","example":1,"format":"int32","maximum":2147483647,"minimum":0,"type":"integer"},"duration":{"description":"持续时间","format":"int32","maximum":2147483647,"minimum":0,"type":"integer"},"flv_url":{"description":"flv地址","maxLength":40960,"minLength":0,"type":"string"},"headers":{"description":"请求头","items":{"$ref":"#/definitions/ContentHeader"},"maxItems":1024,"minItems":0,"type":"array"},"http_version":{"description":"HTTP版本","example":"HTTP/1.1","maxLength":1024,"minLength":0,"type":"string"},"method":{"description":"HTTP方法","example":"GET","maxLength":1024,"minLength":0,"type":"string"},"name":{"description":"用例名称","example":"Msg-fe27","maxLength":1024,"minLength":0,"type":"string"},"protocol_type":{"description":"协议类型(1:HTTP;2:HTTPS;3:TCP;4:UDP;7:HLS/RTMP;9:WebSocket;10:HTTP-FLV)","example":1,"format":"int32","maximum":2147483647,"minimum":0,"type":"integer"},"retry_delay":{"description":"HLS重试延迟时间","format":"int32","maximum":2147483647,"minimum":0,"type":"integer"},"retry_time":{"description":"HLS重试次数","format":"int32","maximum":2147483647,"minimum":0,"type":"integer"},"return_timeout":{"description":"响应超时","example":5000,"format":"int32","maximum":2147483647,"minimum":0,"type":"integer"},"return_timeout_param":{"description":"响应超时参数","maxLength":40960,"minLength":0,"type":"string"},"rtmp_url":{"description":"rtmp地址","maxLength":40960,"minLength":0,"type":"string"},"url":{"description":"请求地址","example":"http://1.1.1.1","maxLength":40960,"minLength":0,"type":"string"}},"type":"object"},"Contents":{"properties":{"conditions":{"description":"若类型为202:条件指令,该字段为条件配置","type":"object"},"content":{"description":"内容","items":{"$ref":"#/definitions/Content"},"maxItems":1000,"minItems":0,"type":"array"},"content_id":{"description":"事务id,若不为0表示此卡片为事务;为0表示非事务","example":0,"format":"int32","maximum":2147483647,"minimum":0,"type":"integer"},"data":{"description":"数据(循环、条件控制器作用的数据)","type":"object"},"data_type":{"description":"类型,0:默认请求;1:数据指令;201:循环指令; 202:条件指令;301:集合点","example":0,"format":"int32","maximum":2147483647,"minimum":0,"type":"integer"},"index":{"description":"排序索引标识","example":0,"format":"int32","maximum":2147483647,"minimum":0,"type":"integer"},"is_disabled":{"description":"是否禁用","type":"boolean"},"selected_temp_name":{"description":"选择的事务或者用例名称","maxLength":40960,"minLength":0,"type":"string"}},"type":"object"},"RelatedTempRunningData":{"properties":{"content_method_url":{"description":"请求信息,包括请求名称,方法,url信息","items":{"type":"string"},"type":"array"},"related_temp_running_data":{"description":"最近一次运行的报告简略信息","items":{"$ref":"#/definitions/TempRunningData"},"type":"array"},"related_temp_running_id":{"description":"运行用例id。对应其他(如报告)接口的运行用例id(case_run_id)。","example":350,"format":"int32","maximum":2147483647,"minimum":0,"type":"integer"},"task_run_info_id":{"description":"运行任务id,即报告id。启动任务(更新任务状态或批量启停任务)接口,会返回运行任务id。","example":325,"format":"int32","maximum":2147483647,"minimum":0,"type":"integer"},"temp_id":{"description":"用例id","example":0,"format":"int32","maximum":2147483647,"minimum":0,"type":"integer"},"temp_name":{"description":"用例名称","example":"asdf","maxLength":4096,"minLength":0,"type":"string"}},"type":"object"},"ShowTaskResq":{"properties":{"code":{"description":"响应码","example":"CPTS.00000000","maxLength":1024,"minLength":0,"type":"string"},"message":{"description":"响应消息","example":"success","maxLength":1024,"minLength":0,"type":"string"},"taskInfo":{"$ref":"#/definitions/TaskInfo","description":"任务详情"}},"type":"object"},"StageKpiItem":{"properties":{"comparison":{"description":"比较符","example":"<=","type":"string"},"value":{"description":"比较值","example":60000,"format":"int32","type":"integer"}},"type":"object"},"StageKpiItems":{"properties":{"average_response_time":{"$ref":"#/definitions/StageKpiItem","description":"平均响应时间"},"success_rate":{"$ref":"#/definitions/StageKpiItem","description":"成功率"}},"type":"object"},"TaskInfo":{"properties":{"bench_concurrent":{"description":"基准并发","example":100,"format":"int32","maximum":2147483647,"minimum":0,"type":"integer"},"case_list":{"description":"用例Id列表","items":{"$ref":"#/definitions/CaseInfoDetail"},"maxItems":1000,"minItems":0,"type":"array"},"create_time":{"description":"创建时间","format":"date-time","type":"string"},"description":{"description":"描述信息","example":"string","maxLength":1024,"minLength":0,"type":"string"},"name":{"description":"任务名称","example":"string","maxLength":1024,"minLength":0,"type":"string"},"operate_mode":{"description":"任务模式(0:时长模式;1:次数模式;2:混合模式)","example":2,"format":"int32","maximum":2147483647,"minimum":0,"type":"integer"},"parallel":{"description":"任务间用例是否并行执行","type":"boolean"},"project_id":{"description":"任务所属工程id","example":1,"format":"int32","maximum":2147483647,"minimum":0,"type":"integer"},"related_temp_running_data":{"description":"最近一次运行的报告简略信息,包括运行任务id,即本对象的task_run_info_id。运行用例id,即本对象的related_temp_running_id。","items":{"$ref":"#/definitions/RelatedTempRunningData"},"maxItems":1024,"minItems":0,"type":"array"},"run_status":{"description":"任务运行状态(9:等待运行;0:运行中;1:暂停;2:结束; 3:异常中止;4:用户主动终止(完成状态);5:用户主动终止)","example":2,"format":"int32","maximum":2147483647,"minimum":0,"type":"integer"},"update_time":{"description":"任务更新时间","example":"2021-05-18T14:25:38.605735+08:00","maxLength":1024,"minLength":0,"type":"string"}},"type":"object"},"TaskRunInfo":{"description":"TaskRunInfo","properties":{"id":{"description":"任务id","example":0,"format":"int32","maximum":2147483647,"minimum":0,"type":"integer"},"run_type":{"description":"任务类型(0:旧版本任务;1:新版本任务)","example":0,"format":"int32","maximum":2147483647,"minimum":0,"type":"integer"}},"type":"object"},"TempRunningData":{"properties":{"content_method_url":{"description":"请求信息,包括请求名称,方法,url信息","items":{"type":"string"},"type":"array"},"crawler_status":{"description":"请求运行状态(0:正常返回;1:解析失败; 2:比对失败; 3:响应超时;)","format":"int32","type":"integer"},"related_temp_running_id":{"description":"运行用例id。对应其他(如报告)接口的运行用例id(case_run_id)。","format":"int32","type":"integer"},"task_run_info_id":{"description":"运行任务id,即报告id。启动任务(更新任务状态或批量启停任务)接口,会返回运行任务id。","format":"int32","type":"integer"},"temp_id":{"description":"用例或者事务id","format":"int32","type":"integer"},"temp_name":{"description":"用例或者事务名称","type":"string"},"temp_running_status":{"description":"运行状态(9:表示等待运行;0:表示运行中;2:表示结束;3:异常中止;4:用户主动终止(完成状态);5:用户主动终止(终止中状态))","format":"int32","type":"integer"}},"type":"object"},"TestCaseStage":{"properties":{"count":{"description":"次数模式发送总次数","example":1,"format":"int32","type":"integer"},"current_tps":{"description":"起始tps值","example":1,"format":"int32","type":"integer"},"current_user_num":{"description":"起始并发数","example":10,"format":"int32","type":"integer"},"end_time":{"description":"结束时间","example":0,"format":"int32","type":"integer"},"issue_num":{"description":"最大并发数","example":10,"format":"int32","type":"integer"},"loop_count":{"description":"震荡/浪涌次数","example":2,"format":"int32","type":"integer"},"max_duration":{"description":"浪涌模式下峰值持续时间","example":30,"format":"int32","type":"integer"},"maximum":{"description":"浪涌/浪涌模式下最大并发数","example":3,"format":"int32","type":"integer"},"minimum":{"description":"浪涌/浪涌模式下最小并发数","example":1,"format":"int32","type":"integer"},"name":{"description":"阶段名称","example":"Stage-f1u1","type":"string"},"operate_mode":{"description":"压力阶段模式,0:时长模式;1:次数模式","example":0,"format":"int32","type":"integer"},"peak_load_kpis":{"$ref":"#/definitions/StageKpiItems","description":"摸高指标"},"pressure_mode":{"description":"压力模式,0:并发模式;1:TPS模式;2:摸高模式;3:浪涌并发模式;4:浪涌TPS模式;5:震荡并发模式;6:震荡TPS模式;7:智能摸高模式","example":0,"format":"int32","type":"integer"},"ramp_up":{"description":"摸高模式下爬坡时长(单位:秒)","example":30,"format":"int32","type":"integer"},"start_time":{"description":"开始时间","example":0,"format":"int32","type":"integer"},"step_duration":{"description":"智能摸高模式下单步执行时长","example":30,"format":"int32","type":"integer"},"step_size":{"description":"智能摸高模式下递增并发数","example":1,"format":"int32","type":"integer"},"time":{"description":"压测时长(单位:秒)","example":60,"format":"int32","type":"integer"},"tps_value":{"description":"TPS模式下TPS值","example":1,"format":"int32","type":"integer"},"voltage_regulating_mode":{"description":"调压模式,0:自动调压模式;1:手动调压模式","example":0,"format":"int32","type":"integer"}},"type":"object"},"UpdateTaskRequestBody":{"description":"UpdateTaskRequestBody","properties":{"bench_concurrent":{"description":"基准并发","example":100,"format":"int32","maximum":2147483647,"minimum":0,"type":"integer"},"case_list":{"description":"用例信息","items":{"$ref":"#/definitions/CaseInfoDetail"},"maxItems":1024,"minItems":0,"type":"array"},"description":{"description":"描述","maxLength":1024,"minLength":0,"type":"string"},"id":{"description":"任务id","example":1,"exclusiveMinimum":true,"format":"int32","maximum":2147483647,"minimum":0,"type":"integer"},"name":{"description":"任务名称","example":"taskName","maxLength":42,"minLength":1,"type":"string"},"operate_mode":{"description":"压力阶段模式,0:时长模式;1:次数模式","example":2,"format":"int32","maximum":2147483647,"minimum":0,"type":"integer"},"project_id":{"description":"工程id","example":1,"exclusiveMinimum":true,"format":"int32","maximum":2147483647,"minimum":0,"type":"integer"},"related_temp_running_data":{"description":"最近一次运行的报告简略信息","items":{"$ref":"#/definitions/RelatedTempRunningData"},"maxItems":1024,"minItems":0,"type":"array"},"run_status":{"description":"任务运行状态(9:等待运行;0:运行中;1:暂停;2:结束; 3:异常中止;4:用户主动终止(完成状态);5:用户主动终止)","example":2,"format":"int32","maximum":2147483647,"minimum":0,"type":"integer"},"run_type":{"description":"任务类型(0:旧版本任务;1:融合版本任务)","example":0,"format":"int32","maximum":2147483647,"minimum":0,"type":"integer"},"task_run_info":{"$ref":"#/definitions/TaskRunInfo","description":"任务运行信息"}},"required":["id","name","project_id"],"type":"object"}},"description":null,"group_id":"efacf12b40d94df780e9934bee36f309","host":"cpts.cn-north-4.myhuaweicloud.com","id":"46a2fdcf86c5460b80abad58d6b81cda","info_version":"v1","method":"put","name":"UpdateTask","parameters":{"project_id":{"description":"项目ID,获取方式请参见[获取项目ID](cpts_api_0017.xml)。","in":"path","maxLength":64,"minLength":0,"name":"project_id","required":true,"type":"string"},"task_id":{"description":"任务id","exclusiveMinimum":true,"format":"int32","in":"path","maximum":2147483647,"minimum":0,"name":"task_id","required":true,"type":"integer"}},"paths":{"/v1/{project_id}/tasks/{task_id}":{"put":{"consumes":["application/json","text/plain; charset=utf-8"],"description":"修改任务(旧版)","operationId":"UpdateTask","parameters":[{"$ref":"#/parameters/project_id"},{"$ref":"#/parameters/task_id"},{"description":"修改任务请求体","in":"body","name":"UpdateTaskRequestBody","required":true,"schema":{"$ref":"#/definitions/UpdateTaskRequestBody"}}],"produces":["application/json","text/plain; charset=utf-8"],"responses":{"200":{"description":"success","examples":{"application/json":{"code":"SVCSTG.CPTS.0000000","message":"success","taskInfo":{"bench_concurrent":100,"case_list":[{"case_id":211751,"case_type":0,"contents":[{"conditions":null,"content":[{"content":{"body_type":0,"bodys":[],"check_end_length":null,"check_end_str":null,"check_end_type":null,"connect_timeout":5000,"connect_type":1,"headers":[{"key":"Content-Type","value":"application/json"}],"http_version":"HTTP/1.1","method":"GET","name":"Msg-43147","protocol_type":1,"return_timeout":5000,"return_timeout_param":null,"url":"https://www.example.com"},"content_type":2}],"content_id":0,"data":null,"data_type":0,"index":0,"selected_temp_name":""}],"for_loop_params":[],"increase_setting":[],"sort":1,"stages":[],"status":1,"temp_id":0,"user_replicas":0},{"case_id":213142,"case_type":0,"contents":null,"for_loop_params":[],"increase_setting":[],"sort":2,"stages":[],"status":1,"temp_id":0,"user_replicas":0}],"create_time":"2022-01-18T15:20:50.466972+08:00","description":"","name":"task","operate_mode":2,"parallel":false,"project_id":122025,"related_temp_running_data":[],"run_status":2,"update_time":"2022-01-20T15:00:44.284053+08:00"}}},"schema":{"$ref":"#/definitions/ShowTaskResq"}},"501":{"description":"unknown error","schema":{"type":"string"}}},"summary":"修改任务(旧版)","tags":["任务管理"],"x-api-type":"open-api","x-apiErrorCodes":[{"errorCode":"CPTS.00000000","errorDescription":"success","httpStatus":"204"},{"errorCode":"CPTS.05001001","errorDescription":"UNKNOWN_ERROR","httpStatus":"501"}],"x-apiexplorer-hide":"false","x-is-registered":"Y","x-open-region-cloud":"hws,hws_hk","x-request-examples-1":{"bench_concurrent":100,"case_list":[],"description":"","id":1,"name":"taskName","operate_mode":2,"project_id":1,"related_temp_running_data":[{"related_temp_running_id":350,"task_run_info_id":325,"temp_id":0,"temp_name":"asdf"}],"run_status":2,"run_type":0,"task_run_info":{"id":0,"run_type":0}},"x-request-examples-description-1":"修改id为1的任务,任务名字修改为taskName。","x-request-examples-text-1":{"bench_concurrent":100,"case_list":[],"description":"","id":1,"name":"taskName","operate_mode":2,"project_id":1,"related_temp_running_data":[{"related_temp_running_id":350,"task_run_info_id":325,"temp_id":0,"temp_name":"asdf"}],"run_status":2,"run_type":0,"task_run_info":{"id":0,"run_type":0}},"x-request-examples-url-1":"https://cpts.{region}.domain-example.com/v1/{project_id}/tasks/1","x-support-sdk":"Y"}}},"product_short":"CPTS","region_id":"cn-north-4","schemes":["HTTPS"],"security_definitions":null,"summary":"修改任务(旧版)","tags":"任务管理","uri":null,"version":"2.0"}