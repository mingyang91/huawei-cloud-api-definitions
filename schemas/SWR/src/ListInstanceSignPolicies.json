{"base_path":"/","components":null,"consumes":"","definitions":{"ListSignaturePoliciesResponseBody":{"properties":{"policies":{"description":"签名策略列表","items":{"$ref":"#/definitions/SignPolicyDetail"},"type":"array"},"total":{"description":"签名策略总数","type":"integer"}},"required":["policies","total"]},"SignPolicyDetail":{"properties":{"created_at":{"description":"创建时间","type":"string"},"creator":{"description":"创建者","type":"string"},"description":{"description":"签名策略描述","type":"string"},"enabled":{"description":"是否","type":"boolean"},"id":{"description":"签名策略ID","type":"integer"},"name":{"description":"签名策略名称","type":"string"},"namespace_id":{"description":"命名空间ID","type":"integer"},"namespace_name":{"description":"命名空间名","type":"string"},"scope_rules":{"description":"作用范围规则","items":{"$ref":"#/definitions/SignScopeRule"},"type":"array"},"signature_algorithm":{"description":"加签算法,KMS的密钥算法EC_P256对应着ECDSA_SHA_256,EC_P384对应着ECDSA_SHA_384,SM2对应着SM2DSA_SM3","type":"string"},"signature_key":{"description":"签名算法key ID","type":"string"},"signature_method":{"description":"镜像签名方式","type":"string"},"trigger":{"$ref":"#/definitions/TriggerConfig","description":"触发方式","type":"object"},"updated_at":{"description":"更新时间","type":"string"}}},"SignRuleSelector":{"properties":{"decoration":{"description":"选择器匹配类型,当前支持repoMatches","type":"string"},"extras":{"description":"预留字段,镜像签名策略中,对无版本的制品进行签名则传入{\"untagged\":true}","type":"string"},"kind":{"description":"匹配类型,目前只支持doublestar","type":"string"},"pattern":{"description":"选择器匹配样式,最大长度512。支持正则表达式,正则表达式规则可填写如 nginx-* ,{repo1,repo2} 等,其中:\n* : 匹配不包含 '/' 的任何字段。\n**:匹配包含 '/' 的任何字段。\n? :匹配任何单个非 '/' 的字符。\n{选项1,选项2,...}:同时匹配多个选项。","type":"string"}},"required":["kind","decoration","pattern"]},"SignScopeRule":{"properties":{"repo_scope_mode":{"description":"repository选择方式。可选regular、selection,前端显示需要,api调用时可选regular","type":"string"},"scope_selectors":{"additionalProperties":{"items":{"$ref":"#/definitions/SignRuleSelector"},"type":"array"},"description":"制品仓库选择器,目前只支持repository且长度为1","type":"object"},"tag_selectors":{"description":"制品版本选择器,目前只支持长度为1","items":{"$ref":"#/definitions/SignRuleSelector"},"type":"array"}},"required":["tag_selectors","scope_selectors","repo_scope_mode"]},"TriggerConfig":{"properties":{"trigger_settings":{"$ref":"#/definitions/TriggerSetting","description":"触发设置,只有type为scheduled的时候,才需要设置"},"type":{"description":"触发类型,老化规则只支持manual(手动)、scheduled(定时+手动);同步策略支持manual(手动)、scheduled(定时+手动)、event_based(事件触发+手动);镜像签名支持manual(手动)、event_based(事件触发+手动)","enum":["manual","scheduled","event_based"],"type":"string"}},"required":["type"],"type":"object"},"TriggerSetting":{"properties":{"cron":{"description":"定时设置,cron格式描述 '* * * * * *'。cron 基于 UTC 时间。","type":"string"}},"type":"object"}},"description":null,"group_id":"fb5102f8c9554d70b608ae6cc563f6ae","host":"swr-api.cn-north-4.myhuaweicloud.com","id":"6a33b085e26944538ddba427182074f8","info_version":"v2","method":"get","name":"ListInstanceSignPolicies","parameters":{},"paths":{"/v2/{project_id}/instances/{instance_id}/signature/policies":{"get":{"description":"获取签名策略列表","operationId":"ListInstanceSignPolicies","parameters":[{"description":"项目ID","in":"path","name":"project_id","required":true,"type":"string"},{"description":"用户Token。\n\n通过调用IAM服务获取用户Token接口获取(响应消息头中X-Subject-Token的值)。","in":"header","name":"X-Auth-Token","required":true,"type":"string","x-example":"MIIDkgYJKoZIhvcNAQcCoIIDgzCCXXXXXX...","x-order":1},{"description":"企业仓库实例ID","in":"path","name":"instance_id","required":true,"type":"string","x-example":"test_instance_id","x-order":2},{"description":"起始索引,默认值为0。**注意:offset和limit参数需要配套使用,offset必须为0或者为limit的倍数。**","format":"int32","in":"query","name":"offset","required":false,"type":"integer","x-example":"0","x-order":3},{"description":"返回条数,默认为10,最大值为100。**注意:offset和limit参数需要配套使用,offset必须为0或者为limit的倍数。**","format":"int32","in":"query","maximum":100,"minimum":1,"name":"limit","required":false,"type":"integer","x-api-type":"open-api","x-example":"20","x-order":4}],"produces":["application/json"],"responses":{"200":{"description":"查询签名策略列表成功","examples":{"application/json":{"policies":[{"created_at":"2020-11-19T02:58:54.809Z","creator":"admin","description":"","enabled":true,"id":1,"name":"test-abc","namespace_id":1,"scope_rules":[{"scope_selectors":{"repository":[{"decoration":"repoMatches","kind":"doublestar","pattern":"**"}]},"tag_selectors":[{"decoration":"matches","kind":"doublestar","pattern":"**"}]}],"trigger":{"type":"manual"},"updated_at":"2020-11-19T02:58:54.809Z"}],"total":2}},"schema":{"$ref":"#/definitions/ListSignaturePoliciesResponseBody"}},"400":{"$ref":"#/responses/400"},"401":{"$ref":"#/responses/401"},"403":{"$ref":"#/responses/403"},"404":{"$ref":"#/responses/404"},"500":{"$ref":"#/responses/500"}},"summary":"获取签名策略列表","tags":["镜像签名管理(SWR企业版)"],"x-api-type":"open-api","x-apiexplorer-hide":"false","x-apigateway-backend":{"httpVpcEndpoints":{"description":"","host":"swr-ee-internal.{{region_id}}.myhuaweicloud.com","method":"ANY","name":"cer-instance-manage","path":"/v2/{project_id}/instances/{instance_id}/signature/policies","scheme":"https","timeout":30000},"type":"HTTP-VPC"},"x-apigateway-cors":false,"x-apigateway-match-mode":"NORMAL","x-apigateway-request-type":"public","x-constraint":"无","x-is-registered":"N","x-name":"获取签名策略列表","x-open-region-cloud":"hc,hk","x-publishpath":"swr_03_1201","x-request-examples-1":{"enabled":true,"name":"aaa","scope_rules":[{"repo_scope_mode":"selection","scope_selectors":{"repository":[{"decoration":"repoMatches","kind":"doublestar","pattern":"{repo}"}]},"tag_selectors":[{"decoration":"matches","extras":"{\"untagged\":true}","kind":"doublestar","pattern":"**"}]}],"signature_algorithm":"ECDSA_SHA_256","signature_key":"key-123456","signature_method":"KMS","trigger":{"type":"manual"}},"x-request-examples-2":{"enabled":true,"name":"aaa","scope_rules":[{"repo_scope_mode":"selection","scope_selectors":{"repository":[{"decoration":"repoMatches","kind":"doublestar","pattern":"{repo}"}]},"tag_selectors":[{"decoration":"matches","extras":"","kind":"doublestar","pattern":"**"}]}],"signature_algorithm":"ECDSA_SHA_256","signature_key":"key-123456","signature_method":"KMS","trigger":{"type":"manual"}},"x-request-examples-description-1":"创建签名规则,范围包括无版本制品","x-request-examples-description-2":"创建签名规则,范围不包括无版本制品","x-request-examples-text-1":{"enabled":true,"name":"aaa","scope_rules":[{"repo_scope_mode":"selection","scope_selectors":{"repository":[{"decoration":"repoMatches","kind":"doublestar","pattern":"{repo}"}]},"tag_selectors":[{"decoration":"matches","extras":"{\"untagged\":true}","kind":"doublestar","pattern":"**"}]}],"signature_algorithm":"ECDSA_SHA_256","signature_key":"key-123456","signature_method":"KMS","trigger":{"type":"manual"}},"x-request-examples-text-2":{"enabled":true,"name":"aaa","scope_rules":[{"repo_scope_mode":"selection","scope_selectors":{"repository":[{"decoration":"repoMatches","kind":"doublestar","pattern":"{repo}"}]},"tag_selectors":[{"decoration":"matches","extras":"","kind":"doublestar","pattern":"**"}]}],"signature_algorithm":"ECDSA_SHA_256","signature_key":"key-123456","signature_method":"KMS","trigger":{"type":"manual"}},"x-request-examples-url-1":"GET https://{endpoint}/v2/{project_id}/instances/{instance_id}/signature/policies","x-request-examples-url-2":"GET https://{endpoint}/v2/{project_id}/instances/{instance_id}/signature/policies","x-scope":"Commercial","x-support-sdk":"Y","x-version":"v1"}}},"product_short":"SWR","region_id":"cn-north-4","schemes":["HTTPS"],"security_definitions":null,"summary":"获取签名策略列表","tags":"镜像签名管理(SWR企业版)","uri":null,"version":"2.0"}