{"base_path":"/","components":null,"consumes":"[\"application/json;charset=UTF-8\"]","definitions":{"BaseResponse":{"description":"--","properties":{"data":{"description":"响应数据","type":"object"},"error_code":{"description":"请求响应代码,范围:0000~9999,正常时取值:0","maxLength":20,"minLength":1,"type":"string"},"error_msg":{"description":"请求响应描述","maxLength":10240,"minLength":0,"type":"string"},"provider_code":{"default":4,"description":"服务标识","maxLength":3,"minLength":3,"type":"string"}},"required":["provider_code","error_code","error_msg","data"],"type":"object"},"CommonUploadFileResponse":{"allOf":[{"$ref":"#/definitions/UploadFileResponse"},{"properties":{"id":{"description":"**参数解释:**\n附件唯一id。\n**取值范围:**\n不涉及\n**默认取值:**\n不涉及","maxLength":255,"minLength":0,"type":"string"},"name":{"description":"**参数解释:**\n附件文件名。\n**取值范围:**\n不涉及\n**默认取值:**\n不涉及","maxLength":255,"minLength":0,"type":"string"}},"type":"object"}],"description":"上传附件返回体。","type":"object"},"ExternalAttachment":{"description":"上传成功后的附件信息。","properties":{"doc_id":{"description":"附件唯一id。","maxLength":255,"minLength":0,"type":"string"},"doc_name":{"description":"附件文件名。","maxLength":255,"minLength":0,"type":"string"}},"type":"object"},"ResponseBodyTemplate":{"description":"通用返回体,用于文档生成。","properties":{"code":{"default":"0","description":"业务code,0 代表业务成功,其他数值代表有错误,详情请见错误码。","example":"0","maxLength":10,"minLength":0,"type":"string"},"msg":{"description":"错误信息,code为0,此值为空;code不为0,此处为具体的错误描述。","example":null,"maxLength":1024,"minLength":0,"type":"string"},"provider_code":{"default":"049","description":"服务编码。","example":"049","maxLength":255,"minLength":0,"type":"string"}},"type":"object"},"UploadFileResponse":{"allOf":[{"$ref":"#/definitions/ResponseBodyTemplate"},{"properties":{"data":{"$ref":"#/definitions/ExternalAttachment"}},"type":"object"}],"description":"上传附件返回体。","type":"object"}},"description":null,"group_id":"82af75d8fb894fc2b06ca4175859ba53","host":"coc.myhuaweicloud.com","id":"07d468b6ab3f43a0a2bfd12da90352cc","info_version":"v1","method":"post","name":"CreateAttachment","parameters":{},"paths":{"/v1/{ticket_type}/attachments":{"post":{"consumes":["multipart/form-data"],"description":"上传附件,创建工单(事件单、变更单、问题单)的场景下,如需上传附件,需要先调用该接口将文件上传到obs。上传成功时,该接口将返回文档唯一id。支持文件类型:.jpg,.png,.docx,.txt,.pdf,且文本大小不超10M。","operationId":"CreateAttachment","parameters":[{"default":"incident","description":"**参数解释:**\n需要创建的工单类型,此处为固定值incident。此处的ticket_type传递的值为固定值incident,但是创建变更单或者问题单时,如需上传附件使用的依然是此接口。\n**约束限制:**\n不涉及\n**取值范围:**\n固定值incident\n**默认取值:**\n不涉及","in":"path","maxLength":255,"minLength":1,"name":"ticket_type","required":true,"type":"string"},{"description":"**参数解释:**\n需要上传的文件,以表单的形式上传。\n**约束限制:**\n内容为二进制binary文本。支持文件类型:.jpg,.png,.docx,.txt,.pdf,且文本大小不超10M。\n**取值范围:**\n不涉及\n**默认取值:**\n不涉及","in":"formData","name":"file","required":true,"type":"file"}],"produces":["application/json"],"responses":{"200":{"description":"请求成功。\n更多状态码请参考[状态码](coc_api_05_03.xml)。","examples":{"application/json":{"data":{"doc_id":"78f86d47-55d6-4e98-ba51-b293ac95bc8a","doc_name":"uploadFile.doc"},"error_code":"GOM.00000000","error_msg":null,"id":"78f86d47-55d6-4e98-ba51-b293ac95bc8a","name":"uploadFile.doc","provider_code":"049"}},"schema":{"$ref":"#/definitions/CommonUploadFileResponse"}},"400":{"description":"服务器未能处理请求。\n更多状态码请参考[状态码](coc_api_05_03.xml)。","examples":{"application/json":{"data":null,"error_code":"GOM.00007256","error_msg":"参数错误","provider_code":"049"}},"schema":{"$ref":"#/definitions/BaseResponse"}}},"summary":"上传附件","tags":["ExternalCocTicket"],"x-access-level":"ReadWrite","x-classAnnotation":"@EnableAuth(type = \"${wushan.integration.common.auth.type}\")","x-imports":"com.huawei.globaloperationmgmt.common.auth.IAMCustomAuthContextInitializer;com.huawei.clouds.wushan.auth.token.meta.BssOpType;com.huawei.globaloperationmgmt.common.enums.GomResourceTypeEnum;com.huawei.clouds.wushan.integration.common.auth.EnableAuth;com.huawei.clouds.wushan.coa.abac.auth.CoaAuth;com.huawei.clouds.wushan.coa.CoaAuthMeta;com.huawei.globaloperationmgmt.common.enums.UserTypeEnum;com.huawei.globaloperationmgmt.common.apos.CoaAuthExtendMeta;com.huawei.globaloperationmgmt.common.apos.AuditLog;com.huawei.clouds.wushan.auth.token.IamAuthMeta;com.huawei.clouds.wushan.auth.token.IamAuthLevel;com.huawei.clouds.wushan.cts.meta.CtsMeta;com.huawei.globaloperationmgmt.common.apos.CtsExtendMeta;com.huawei.globaloperationmgmt.common.apos.QuotaCheck;","x-is-registered":"Y","x-methodAnnotations":["@CoaAuthMeta(action = \"gocm:CreateAttachment\")","@CoaAuthExtendMeta(userType=UserTypeEnum.MAN_MACHINE_ACCOUNT)","@IamAuthMeta(authLevel = IamAuthLevel.TOKEN, abacAction = \"coc:ticket:uploadFile\", opType = BssOpType.RESOURCE, needApigwJwtAuthCheck = false, authContextInitializer = IAMCustomAuthContextInitializer.class)","@AuditLog(operation = \"gocm:CreateAttachment\", risk = \"middle\", resourceType = GomResourceTypeEnum.ATTACHMENT, resourceId = \"gocm:AttachmentId=#ticketType\", resourceName = \"#ticketType\")","@CtsMeta(resourceType = \"Attachment\", traceName = \"uploadFileTicket\", operationId = \"CreateAttachment\")","@CtsExtendMeta(resourceId = \"#ticketType\", resourceName = \"#ticketType\")","@QuotaCheck(needTicketType = true, operateId = \"operate\")"],"x-request-examples-1":"form-data表单:\nkey: file\nvalue: binary二进制文件","x-request-examples-description-1":"上传附件请求示例。","x-request-examples-url-1":"https://{Endpoint}/v1/incident/attachments","x-risk-level":"middle","x-sre-api-type":"D","x-support-sdk":"Y"}}},"product_short":"COC","region_id":"cn-north-4","schemes":["HTTPS"],"security_definitions":null,"summary":"上传附件","tags":"ExternalCocTicket","uri":null,"version":"2.0"}