{"base_path":"/","components":null,"consumes":"[\"application/json;charset=UTF-8\"]","definitions":{"BaseResponse":{"description":"--","properties":{"data":{"description":"响应数据","type":"object"},"error_code":{"description":"请求响应代码,范围:0000~9999,正常时取值:0","maxLength":20,"minLength":1,"type":"string"},"error_msg":{"description":"请求响应描述","maxLength":10240,"minLength":0,"type":"string"},"provider_code":{"default":4,"description":"服务标识","maxLength":3,"minLength":3,"type":"string"}},"required":["provider_code","error_code","error_msg","data"],"type":"object"},"CreateCocTicketRequestBody":{"properties":{"change_guides":{"description":"**参数解释:**\n变更指导书ID。\n**约束限制:**\n当ticket_type为change创建变更单,且任务选择变更指导书时,该字段必填。\n**取值范围:**\n不涉及\n**默认取值:**\n不涉及","maxLength":255,"minLength":1,"type":"string"},"change_notes":{"description":"**参数解释:**\n变更单描述。\n**约束限制:**\n当ticket_type为change创建变更单时,该字段必填。\n**取值范围:**\n不涉及\n**默认取值:**\n不涉及","example":"变更描述信息","maxLength":4096,"minLength":1,"type":"string"},"change_scene_id":{"description":"**参数解释:**\n变更场景。\n**约束限制:**\n当ticket_type为change创建变更单时,该字段必填。\n**取值范围:**\n取配置页面【流程管理】下“变更场景”TAB页中列表属性ID列的值,示例:GOCMLL06\n**默认取值:**\n不涉及","maxLength":255,"minLength":1,"type":"string"},"change_scheme":{"description":"**参数解释:**\n任务类型,可选作业或者变更指导书两种。\n**约束限制:**\n当ticket_type为change创建变更单时,该字段必填。当取值为change_scheme_guides时,请求参数change_guides必填。当取值为change_scheme_runbook时,参数plan_task_sub_type、plan_task_id、plan_task_name和plan_task_params必填。\n**取值范围:**\n枚举值\nchange_scheme_runbook:作业\nchange_scheme_guides:变更指导书\n**默认取值:**\n不涉及","maxLength":255,"minLength":1,"type":"string"},"change_type":{"description":"**参数解释:**\n变更类型。\n**约束限制:**\n当ticket_type为change创建变更单时,该字段必填。\n**取值范围:**\n枚举值\nchange_type_conventional:常规变更\nchange_type_urgentu:紧急变更\n**默认取值:**\n不涉及","example":"change_type_conventional","maxLength":255,"minLength":1,"type":"string"},"commit_upload_attachment":{"description":"**参数解释:**\n问题单附件,上传附件ID。\n**约束限制:**\n当ticket_type为issues_mgmt创建问题单时,该字段选填。\n**取值范围:**\n不涉及\n**默认取值:**\n不涉及","maxLength":255,"minLength":1,"type":"string"},"current_cloud_service_id":{"description":"**参数解释:**\n归属应用。\n**约束限制:**\n当ticket_type为change创建变更单时,该字段必填。\n**取值范围:**\n不涉及\n**默认取值:**\n不涉及","maxLength":255,"minLength":1,"type":"string"},"description":{"description":"**参数解释:**\n问题单描述信息。\n**约束限制:**\n当ticket_type为issues_mgmt创建问题单时,该字段必填。\n**取值范围:**\n不涉及\n**默认取值:**\n不涉及","example":"问题单描述信息","maxLength":1000,"minLength":1,"type":"string"},"enterprise_project":{"description":"**参数解释:**\n企业项目ID\n**约束限制:**\n当ticket_type为issues_mgmt创建问题单时,该字段必填。\n**取值范围:**\n不涉及\n**默认取值:**\n0","maxLength":1000,"minLength":1,"type":"string"},"fount_time":{"description":"**参数解释:**\n发现时间,时间戳。\n**约束限制:**\n当ticket_type为issues_mgmt创建问题单时,该字段选填。\n**取值范围:**\n不涉及\n**默认取值:**\n不涉及","example":1716968654000,"format":"int64","maximum":9999999999999,"minimum":1,"type":"integer"},"is_start_process":{"default":true,"description":"**参数解释:**\n是否启动流程,当此值为false时,创建出来的工单为草稿状态。此值默认为true,创建出来的工单状态为未受理状态。\n**约束限制:**\n不涉及\n**取值范围:**\n不涉及\n**默认取值:**\n不涉及","example":true,"type":"boolean"},"issue_contact_person":{"description":"**参数解释:**\n问题单责任人工号ID。\n**约束限制:**\n当ticket_type为issues_mgmt创建问题单时,该字段选填。如需指定问题单责任人,则该字段必填。\n**取值范围:**\n不涉及\n**默认取值:**\n不涉及","maxLength":255,"minLength":1,"type":"string"},"level":{"description":"**参数解释:**\n工单级别。\n**约束限制:**\n不涉及\n**取值范围:**\n当ticket_type为change创建变更单时,枚举值\nchange_level_010 -- A级变更\nchange_level_020 -- B级变更\nchange_level_030 -- C级变更\nchange_level_040 -- D级变更\n当ticket_type为issues_mgmt创建问题单时,枚举值\nissues_level_1000 -- 致命\nissues_level_2000 -- 严重\nissues_level_3000 -- 一般\nissues_level_4000 -- 提示\n**默认取值:**\n不涉及","maxLength":255,"minLength":1,"type":"string"},"location_id":{"description":"**参数解释:**\n变更区域ID。\n**约束限制:**\n当ticket_type为change创建变更单时,该字段必填。\n**取值范围:**\n不涉及\n**默认取值:**\n不涉及","maxLength":255,"minLength":1,"type":"string"},"plan_task_id":{"description":"**参数解释:**\n需要执行的作业ID。\n**约束限制:**\n当ticket_type为change创建变更单时,该字段必填。当任务类型change_scheme取值为change_scheme_runbook时,该值必填。\n**取值范围:**\n不涉及\n**默认取值:**\n不涉及","maxLength":50,"minLength":0,"type":"string"},"plan_task_name":{"description":"**参数解释:**\n需要执行的作业名称。\n**约束限制:**\n当ticket_type为change创建变更单时,该字段必填。当任务类型change_scheme取值为change_scheme_runbook时,该值必填。\n**取值范围:**\n不涉及\n**默认取值:**\n不涉及","maxLength":50,"minLength":0,"type":"string"},"plan_task_params":{"description":"**参数解释:**\n执行作业时所需的参数信息。\n**约束限制:**\n当ticket_type为change创建变更单时,该字段必填。当任务类型change_scheme取值为change_scheme_runbook时,该值必填。\n**取值范围:**\n不涉及\n**默认取值:**\n不涉及","maxLength":999999999,"minLength":0,"type":"string"},"plan_task_sub_type":{"description":"**参数解释:**\n预案子类型。\n**约束限制:**\n当ticket_type为change创建变更单时,该字段必填。当任务类型change_scheme取值为change_scheme_runbook时,该值必填。\n**取值范围:**\n枚举值\nCUSTOMIZATION:自定义作业\nCOMMUNAL:公共作业\n**默认取值:**\n不涉及","maxLength":50,"minLength":0,"type":"string"},"regions":{"description":"**参数解释:**\n问题单所属Region,此处传RegionID,多个Region用英文逗号隔开。\n**约束限制:**\n当ticket_type为issues_mgmt创建问题单时,该字段选填。\n**取值范围:**\n不涉及\n**默认取值:**\n不涉及","maxLength":999999,"minLength":0,"type":"string"},"root_cause_cloud_service":{"description":"**参数解释:**\n归属应用。\n**约束限制:**\n当ticket_type为issues_mgmt创建问题单时,该字段选填。\n**取值范围:**\n不涉及\n**默认取值:**\n不涉及","maxLength":255,"minLength":1,"type":"string"},"schedule_scenes":{"description":"**参数解释:**\n问题单责任人从排班中获取,该值为排班场景ID。\n**约束限制:**\n当ticket_type为issues_mgmt创建问题单时,该字段选填。\n**取值范围:**\n不涉及\n**默认取值:**\n不涉及","maxLength":255,"minLength":1,"type":"string"},"source":{"description":"**参数解释:**\n问题单来源。\n**约束限制:**\n当ticket_type为issues_mgmt创建问题单时,该字段选填。\n**取值范围:**\n当ticket_type为issues_mgmt创建问题单时,枚举值\nissues_mgmt_associated_type_1000 -- 事件\nissues_mgmt_associated_type_4000 -- 运维主动发现\nissues_mgmt_associated_type_2000 -- 告警\nissues_mgmt_associated_type_3000 -- WarRoom\n**默认取值:**\n不涉及","maxLength":255,"minLength":1,"type":"string"},"source_id":{"description":"**参数解释:**\n问题单来源工单单号。\n**约束限制:**\n当ticket_type为issues_mgmt创建问题单时,该字段选填。当source的值为issues_mgmt_associated_type_1000、issues_mgmt_associated_type_2000或issues_mgmt_associated_type_3000时,必填。需要填写关联的工单单号。\n**取值范围:**\n不涉及\n**默认取值:**\n不涉及","maxLength":255,"minLength":1,"type":"string"},"sub_tickets":{"description":"**参数解释:**\n变更子单的信息,包含变更单涉及的服务和Region信息。\n**约束限制:**\n当ticket_type为change创建变更单时,该字段必填且有效,当ticket_type非change时,该字段可置空。\n**取值范围:**\n不涉及\n**默认取值:**\n不涉及","items":{"$ref":"#/definitions/TicketCreateSubTicketInfo"},"maxItems":1024,"minItems":0,"type":"array","x-maxLength":1024,"x-minLength":0},"ticket_type":{"description":"**参数解释:**\n问题单类型,通过访问 云运维中心-->基础配置-->流程管理页签下问题流程-->问题类别可查询所有可传递的问题类型,此处传递问题类型ID。\n**约束限制:**\n当ticket_type为issues_mgmt创建问题单时,必填。\n**取值范围:**\n不涉及\n**默认取值:**\n不涉及","maxLength":255,"minLength":1,"type":"string"},"title":{"description":"**参数解释:**\n工单标题。\n**约束限制:**\n不涉及\n**取值范围:**\n不涉及\n**默认取值:**\n不涉及","example":"变更单标题","maxLength":255,"minLength":1,"type":"string"},"virtual_schedule_role":{"description":"**参数解释:**\n问题单责任人从排班中获取,该值为排班角色ID。\n**约束限制:**\n当ticket_type为issues_mgmt创建问题单时,该字段选填。\n**取值范围:**\n不涉及\n**默认取值:**\n不涉及","maxLength":255,"minLength":1,"type":"string"},"virtual_schedule_type":{"description":"**参数解释:**\n问题单处理人类型。\n**约束限制:**\n当ticket_type为issues_mgmt创建问题单时,该字段必填。\n**取值范围:**\n当ticket_type为issues_mgmt创建问题单时,枚举值\nissues_mgmt_virtual_schedule_type_1000 -- 排班\nissues_mgmt_virtual_schedule_type_2000 -- 个人\n**默认取值:**\n不涉及","maxLength":255,"minLength":1,"type":"string"}},"type":"object"},"CreateTicketResponseInfo":{"allOf":[{"$ref":"#/definitions/BaseResponse"},{"properties":{"data":{"description":"返回体","properties":{"id":{"description":"**参数解释:**\n新创建的工单单号唯一ID。\n**取值范围:**\n不涉及\n**默认取值:**\n不涉及","example":"f9990e23-188f-4979-b5e8-57d265cfc90d","maxLength":255,"minLength":1,"type":"string"},"is_return_full_info":{"description":"**参数解释:**\n是否返回全部字段。\n**取值范围:**\nfalse\n**默认取值:**\nfalse","type":"boolean"},"is_start_process":{"description":"**参数解释:**\n是否启动流程,当此值为false时,创建出来的工单为草稿状态。此值默认为true,创建出来的工单状态为未受理状态。\n**取值范围:**\nfalse\n**默认取值:**\nfalse","type":"boolean"},"is_start_process_async":{"description":"**参数解释:**\n是否异步启动流程,该值固定值true,表示后台创建工单为异步流程。\n**取值范围:**\ntrue\n**默认取值:**\ntrue","type":"boolean"},"is_update_null":{"description":"**参数解释:**\n是否重新提交空字段。\n**取值范围:**\nfalse\n**默认取值:**\nfalse","type":"boolean"},"ticket_id":{"description":"**参数解释:**\n新创建的工单单号。\n**取值范围:**\n不涉及\n**默认取值:**\n不涉及","example":"CM202506241152560174680890","maxLength":255,"minLength":1,"type":"string"}}}},"type":"object"}],"description":"工单创建成功后响应体信息"},"TicketCreateSubTicketInfo":{"allOf":[{"properties":{"app_name":{"description":"**参数解释:**\n变更服务。\n**约束限制:**\n当target_type为change_scope时,该字段需传递对应的变更服务中文名称。\n**取值范围:**\n不涉及\n**默认取值:**\n不涉及","maxLength":255,"minLength":1,"type":"string"},"cooperators":{"description":"**参数解释:**\n变更单配合人。\n**约束限制:**\n当target_type值为child_ticket时,该值有效。\n**取值范围:**\n不涉及\n**默认取值:**\n不涉及","maxLength":255,"minLength":1,"type":"string"},"executors":{"description":"**参数解释:**\n变更单实施人。\n**约束限制:**\n当target_type值为child_ticket时,该值有效。\n**取值范围:**\n不涉及\n**默认取值:**\n不涉及","maxLength":255,"minLength":1,"type":"string"},"expected_end_time":{"description":"**参数解释:**\n变更单计划结束时间时间戳。\n**约束限制:**\n当target_type值为child_ticket时,该值有效。\n**取值范围:**\n不涉及\n**默认取值:**\n不涉及","format":"int64","maximum":9999999999999,"minimum":0,"type":"integer"},"expected_start_time":{"description":"**参数解释:**\n变更单计划开始时间时间戳。\n**约束限制:**\n当target_type值为child_ticket时,该值有效。\n**取值范围:**\n不涉及\n**默认取值:**\n不涉及","format":"int64","maximum":9999999999999,"minimum":0,"type":"integer"},"region":{"description":"**参数解释:**\n变更Region。\n**约束限制:**\n当target_type为change_scope时,该字段需传递对应的变更RegionID。\n**取值范围:**\n不涉及\n**默认取值:**\n不涉及","maxLength":255,"minLength":1,"type":"string"},"target_type":{"description":"**参数解释:**\n目标选项信息,该值可传递不同的信息,当传递变更应用时,该值传递change_scope,当传递变更计划时,该值传递child_ticket。\n**约束限制:**\n不涉及\n**取值范围:**\n不涉及\n**默认取值:**\n不涉及","maxLength":255,"minLength":0,"type":"string"},"target_value":{"description":"**参数解释:**\n传递变更单RegionID,需和target_type配合使用。\n**约束限制:**\n当target_type值为child_ticket时,该值有效。\n**取值范围:**\n不涉及\n**默认取值:**\n不涉及","maxLength":255,"minLength":1,"type":"string"}},"type":"object"}],"x-annotations":["@EnableMetadata(bean = \"SubTicketInfo\")","@JsonInclude(JsonInclude.Include.NON_NULL)"],"x-imports":"com.huawei.globaloperationmgmt.common.metadata.EnableMetadata;com.fasterxml.jackson.annotation.JsonInclude"}},"description":null,"group_id":"82af75d8fb894fc2b06ca4175859ba53","host":"coc.myhuaweicloud.com","id":"264833f1a4a74f1ba0aac84f302e22d4","info_version":"v1","method":"post","name":"CreateTicket","parameters":{},"paths":{"/v1/{ticket_type}/tickets":{"post":{"description":"创建变更单或问题单的接口,通过路径参数ticket_type区分需要创建的工单类型。ticket_type为change表示要创建变更单,ticket_type为issues_mgmt为创建问题单。","operationId":"CreateTicket","parameters":[{"description":"**参数解释:**\n需要创建的工单类型,如需创建变更单传值change,如需创建问题单传值issues_mgmt。\n**约束限制:**\n不涉及\n**取值范围:**\n枚举值:change/issues_mgmt\n当前支持的工单类型:变更单传值change,问题单传值issues_mgmt\n**默认取值:**\nincident","enum":["change","issues_mgmt"],"in":"path","name":"ticket_type","required":true,"type":"string"},{"description":"TicketInfo object that needs to be created","in":"body","name":"CreateTicketRequestBody","required":true,"schema":{"$ref":"#/definitions/CreateCocTicketRequestBody"}}],"produces":["application/json"],"responses":{"200":{"description":"工单创建成功响应示例。","examples":{"application/json":{"data":{"id":"f9990e23-188f-4979-b5e8-57d265cfc90d","is_return_full_info":false,"is_start_process":true,"is_start_process_async":true,"is_update_null":false,"ticket_id":"CM202506241152560174680890"},"error_code":"GOM.00000000","error_msg":null,"provider_code":"049"}},"schema":{"$ref":"#/definitions/CreateTicketResponseInfo"}},"400":{"description":"服务器未能处理请求。\n更多状态码请参考[状态码](coc_api_05_03.xml)。","examples":{"application/json":{"data":null,"error_code":"GOM.00007256","error_msg":"参数错误","provider_code":"049"}},"schema":{"$ref":"#/definitions/BaseResponse"}}},"summary":"新建工单","tags":["ExternalCocTicket"],"x-access-level":"ReadWrite","x-imports":"com.huawei.globaloperationmgmt.incident.aops.TicketQuotaCheck;com.huawei.globaloperationmgmt.common.auth.IAMCustomAuthContextInitializer;","x-is-registered":"Y","x-methodAnnotations":["@CoaCustomizeAuthMeta","@CoaAuthExtendMeta(userType=UserTypeEnum.MAN_MACHINE_ACCOUNT)","@IamAuthMeta(authLevel = IamAuthLevel.TOKEN, abacAction = \"coc:ticket:create\", opType = BssOpType.RESOURCE, needApigwJwtAuthCheck = false,  authContextInitializer = IAMCustomAuthContextInitializer.class)","@AuditLog(operation = \"gocm:CreateTicket\", risk = \"middle\", resourceType = GomResourceTypeEnum.TICKET, resourceId = \"gocm:TicketId=#ticketType\", resourceName = \"#ticketType\")","@CtsMeta(resourceType = \"Ticket\", traceName = \"createTicket\", operationId = \"CreateTicket\")","@CtsExtendMeta(resourceId = \"#ticketType\", resourceName = \"#ticketType\")","@QuotaCheck(needTicketType = true, operateId = \"operate\")","@TicketQuotaCheck()"],"x-request-examples-1":"{\n  \"title\": \"变更单创建\",\n  \"change_notes\": \"变更单描述信息,这是一个测试变更单\",\n  \"change_type\": \"change_type_conventional\",\n  \"level\": \"change_level_030\",\n  \"change_scheme\": \"change_scheme_guides\",\n  \"change_guides\": \"ad2997a2-ad31-4aed-a07b-eb22b132520a\",\n  \"change_scene_id\": \"GOCMLL01001\",\n  \"current_cloud_service_id\": \"6470681a31da2a47ed50a919\",\n  \"location_id\": \"cn-north-7,cn-north-208\",\n  \"approve_type\": \"or_sign\",\n  \"is_start_process\": true,\n  \"sub_tickets\": [\n    {\n      \"target_type\": \"change_scope\",\n      \"app_name\": \"COC应用\",\n      \"region\": \"cn-north-7\",\n      \"resource_biz_id\": \"6470681a31da2a47ed50a919\"\n    },\n    {\n      \"target_type\": \"change_scope\",\n      \"app_name\": \"COC应用\",\n      \"region\": \"cn-north-208\",\n      \"resource_biz_id\": \"6470681a31da2a47ed50a919\"\n    },\n    {\n      \"target_type\": \"child_ticket\",\n      \"target_value\": \"cn-north-7\",\n      \"expected_start_time\": 1750755723000,\n      \"expected_end_time\": 1750842123000,\n      \"executors\": \"005b950b4863447cb97cd77a89559c79\",\n      \"cooperators\": \"0064670859f74dc89398d676d95e3577\"\n    },\n    {\n      \"target_type\": \"child_ticket\",\n      \"target_value\": \"cn-north-208\",\n      \"expected_start_time\": 1750755733000,\n      \"expected_end_time\": 1750842134000,\n      \"executors\": \"005b950b4863447cb97cd77a89559c79\",\n      \"cooperators\": \"0064670859f74dc89398d676d95e3577\"\n    }\n  ],\n  \"plan_task_type\": \"scheme_type_plan_task\",\n  \"plan_task_sub_type\": \"\",\n  \"plan_task_id\": \"\",\n  \"plan_task_name\": \"\",\n  \"plan_task_params\": \"\"\n}","x-request-examples-2":"{\n  \"title\": \"sdk_test_create\",\n  \"description\": \"【问题现象】sdk创建问题单\\n【问题对现网的影响】\",\n  \"commit_upload_attachment\": \"\",\n  \"regions\": \"\",\n  \"enterprise_project\": \"0\",\n  \"level\": \"issues_level_4000\",\n  \"ticket_type\": \"issues_type_1000\",\n  \"root_cause_cloud_service\": \"6470681a31da2a47ed50a919\",\n  \"source\": null,\n  \"source_id\": \"\",\n  \"fount_time\": 0,\n  \"virtual_schedule_type\": \"issues_mgmt_virtual_schedule_type_2000\",\n  \"issue_contact_person\": \"51875a8200fd45189f94745678545bc3\",\n  \"schedule_scenes\": \"\",\n  \"virtual_schedule_role\": \"\"\n}","x-request-examples-description-1":"创建变更单。","x-request-examples-description-2":"创建问题单。","x-request-examples-url-1":"https://{Endpoint}/v1/change/tickets","x-request-examples-url-2":"https://{Endpoint}/v1/issues_mgmt/tickets","x-risk-level":"middle","x-sre-api-type":"D","x-support-sdk":"Y"}}},"product_short":"COC","region_id":"cn-north-4","schemes":["HTTPS"],"security_definitions":null,"summary":"新建工单","tags":"ExternalCocTicket","uri":null,"version":"2.0"}