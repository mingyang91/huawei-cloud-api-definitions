{"base_path":"/","components":null,"consumes":"[\"application/json;charset=UTF-8\"]","definitions":{"Customttribute":{"description":"当前执行脚本的自定义属性,仅用于表示本次执行的产生工单的信息","properties":{"key":{"description":"自定义属性key","example":"1kkkkkk","maxLength":10,"minLength":0,"type":"string"},"value":{"description":"自定义属性的value","example":"1lhkjh","maxLength":20,"minLength":0,"type":"string"}},"required":["key","value"],"type":"object"},"InstancesBatchResultMode":{"description":"获取分批结果返回体","properties":{"batch_index":{"description":"批次Id","example":1,"format":"int32","maximum":20,"minimum":1,"type":"integer"},"target_instances":{"description":"当前批次内机器","items":{"$ref":"#/definitions/ResourceInstance"},"maxItems":10,"minItems":1,"type":"array"}},"required":["batch_index","target_instances"],"type":"object"},"InstancesBatchesMode":{"description":"需要分批的机器","properties":{"batch_strategy":{"description":"分批策略:只支持自动分批","enum":["AUTO_BATCH"],"example":"AUTO_BATCH","type":"string"},"target_instances":{"description":"目标主机实例","items":{"$ref":"#/definitions/ResourceInstance"},"maxItems":200,"minItems":1,"type":"array"}},"required":["batch_strategy","target_instances"],"type":"object"},"ListInstancesBatchRes":{"description":"自动分批返回结果","properties":{"data":{"description":"分批结果","items":{"$ref":"#/definitions/InstancesBatchResultMode"},"type":"array"}},"required":["data"],"type":"object"},"ResourceInstance":{"properties":{"agent_sn":{"description":"agent纳管id。该参数即将废弃,请勿使用。","example":"7aec98ca0edd45bc8145005c1892cb3a","type":"string"},"agent_status":{"description":"agent纳管状态。该参数即将废弃,请勿使用。","example":"ONLINE","type":"string"},"custom_attributes":{"description":"支持用户自定义5个key_value形式的属性。\n约束条件:\n\t- key值长度为20\n    - value长度为50\n    - map长度最大为5","items":{"$ref":"#/definitions/Customttribute"},"type":"array"},"properties":{"$ref":"#/definitions/ResourceInstanceProp","description":"主机附加属性。该参数即将废弃,请勿使用。"},"provider":{"description":"资源提供者:ECS。单个脚本工单, 每个实例的provider是一致的","type":"string"},"region_id":{"description":"机器所属region的ID","type":"string"},"resource_id":{"description":"实例唯一id","example":"66006c8e-dc6b-45bb-a65b-6f8a3700392f","type":"string"},"type":{"description":"资源提供者下资源类型,不传默认为CLOUDSERVER\nCLOUDSERVER:CLOUDSERVER类型","enum":["CLOUDSERVER"],"type":"string"}},"required":["provider","region_id","resource_id","type"],"type":"object"},"ResourceInstanceProp":{"description":"主机附加属性","properties":{"application":{"description":"CMDB应用,CMDB应用视图才有值。类似管理面的云服务","type":"string"},"fixed_ip":{"description":"内网ip\n未校验:\n格式,长度","example":"192.168.0.163","type":"string"},"floating_ip":{"description":"弹性公网ip\n未校验:\n格式,长度","example":"1.1.1.1","type":"string"},"group":{"description":"CMDB分组,CMDB应用视图才有值。类似管理面的schema","type":"string"},"host_name":{"description":"主机名\n未校验:长度","example":"coc-cdr001-0002","type":"string"},"project_id":{"description":"实例的 project_id\n\n需要消费,建议必填\n未校验长度","example":"1076d5e8a93f4fd383ad8b40498fcf7d","type":"string"},"region_id":{"description":"区域\n未校验:\n长度","example":"cn-north-7","type":"string"},"zone_id":{"description":"可用区","example":"cn-north-7a","type":"string"}},"required":["fixed_ip","host_name","region_id","zone_id"],"type":"object"}},"description":null,"group_id":"82af75d8fb894fc2b06ca4175859ba53","host":"coc.myhuaweicloud.com","id":"886593d007b343c9b725396e654f7992","info_version":"v1","method":"post","name":"ListInstancesBatch","parameters":{"X-Auth-Token":{"description":"租户token。","in":"header","name":"X-Auth-Token","required":true,"type":"string"},"X-Language":{"description":"国际化标记,zh-cn表示中文,en-us或不传表示英文。","in":"header","name":"X-Language","required":false,"type":"string"},"x-project-id":{"description":"项目ID。","in":"header","name":"x-project-id","required":false,"type":"string"},"x-user-profile":{"description":"IAM5.0用户信息。","in":"header","name":"x-user-profile","required":false,"type":"string"}},"paths":{"/v1/instances/batches":{"post":{"description":"根据分批策略获取分批结果,只支持自动分批:\n规则如下:\n1.单个批次的所有实例必须属于同一个区域;\n     * 2.单个批次的所有实例必须属于同一个可用区;\n     * 3.单个批次的所有实例必须属于同一个应用;\n     * 4.单个批次内同一分组下的实例不超过50%(除分组下仅以一个实例的情况外);\n     * 5.前三批每批节点数量不超过10。\n     * 6.每批次实例数量不超过10。\n\n   总机器数量为200。","operationId":"ListInstancesBatch","parameters":[{"description":"分批请求体。","in":"body","name":"ListInstancesBatchRequestBody","required":true,"schema":{"$ref":"#/definitions/InstancesBatchesMode"}},{"$ref":"#/parameters/X-Auth-Token"},{"$ref":"#/parameters/X-Language"},{"$ref":"#/parameters/x-project-id"},{"$ref":"#/parameters/x-user-profile"}],"responses":{"200":{"description":"请求成功。\n更多状态码请参考[状态码](coc_api_05_03.xml)。","schema":{"$ref":"#/definitions/ListInstancesBatchRes"}}},"summary":"获取自动分批结果","tags":["ScriptManagement"],"x-api-type":"open-api","x-apiexplorer-hide":false,"x-is-registered":"Y","x-order":8,"x-support-sdk":"Y"}}},"product_short":"COC","region_id":"cn-north-4","schemes":["HTTPS"],"security_definitions":null,"summary":"获取自动分批结果","tags":"ScriptManagement","uri":null,"version":"2.0"}