{"base_path":"/","components":null,"consumes":"[\"application/json;charset=UTF-8\"]","definitions":{"FailedResp":{"properties":{"code":{"description":"服务异常错误信息编码。","example":"SMN.0167","type":"string"},"message":{"description":"服务异常错误信息描述。","example":"xxxxxxxx","type":"string"},"request_id":{"description":"请求的唯一标识ID。","example":"6a63a18b8bab40ffb71ebd9cb80d0085","type":"string"}},"required":["request_id","code","message"]},"HttpDetectRequestBody":{"description":"Http探测请求参数,包含protocol,endpoint,extension字段,详细限制见参数描述。","properties":{"endpoint":{"description":"待探测的终端地址,当前仅支持以http:// 或https://开头,不可为空","example":"http://172.20.0.51:32000/http_notify","pattern":"^(http|https)://.*$","type":"string"},"extension":{"description":"Http/Https协议可以指定多个K/V对,在发送Http/Https协议消息时会携带这些K/V对作为请求header。extension字段允许为空,header字段允许为空。","example":"{\"header\": {\"x-abc\": \"1213\", \t\"x-abc-cba\": \"test2\"} }  ","properties":{"header":{"additionalProperties":{"type":"string"},"description":"header应满足如下要求:\n1. key值限定为:包含英文字母([A-Za-z])、数字([0-9])、中划线(-)hyphens,中划线不得作为结尾,不得连续出现。\n2. K/V不得超过10个\n3. key需要以\"x-\"开头,不能以\"x-smn\"开头,正确示例:x-abc-cba,  x-abc\n4. 所有K/V长度总和不得超过1024个字符\n5. key不区分大小写\n6. key值不可重复\n7. value值限定为ASCII码,不支持中文或其他Unicode,支持空格","example":"{\"x-abc\": \"1213\", \"x-abc-cba\": \"test2\"}","type":"object"}}},"protocol":{"description":"协议类型,当前仅支持http/https,不可为空","enum":["http","https"],"example":"http","type":"string"}},"required":["protocol","endpoint"],"type":"object"},"PostHTTPDetectResponseBody":{"description":"发送Http探测成功返回体","properties":{"request_id":{"description":"请求ID","example":"adc82efa7e0042899722531681b1959a","type":"string"},"task_id":{"description":"探测任务ID","example":"adc82efa7e0042899722531681b1959a","type":"string"}},"type":"object"}},"description":null,"group_id":"28d7e20abf9b4048b20fdaf3ce746d32","host":"smn.cn-north-4.myhuaweicloud.com","id":"27fffe8d3b034592bb0b25ad52a591ad","info_version":"v2","method":"post","name":"PublishHttpDetect","parameters":{"X-Auth-Token":{"description":"用户Token。\n\n通过调用IAM服务获取用户Token接口获取(响应消息头中X-Subject-Token的值)。","in":"header","name":"X-Auth-Token","required":true,"type":"string","x-example":"MIIDkgYJKoZIhvcNAQcCoIIDgzCCXXXXXX..."}},"paths":{"/v2/{project_id}/notifications/topics/{topic_urn}/detection":{"post":{"description":"基于主题发送http/https探测消息,探测当前http/https 终端是否可用,SMN出口是否能够正常访问该终端。","operationId":"PublishHttpDetect","parameters":[{"description":"项目ID。 获取项目ID请参考 [获取项目ID](smn_api_66000.xml)。","in":"path","name":"project_id","required":true,"type":"string"},{"description":"Topic的唯一的资源标识,可通过[查询主题列表](smn_api_51004.xml)获取该标识。","in":"path","name":"topic_urn","required":true,"type":"string"},{"$ref":"#/parameters/X-Auth-Token"},{"description":"Http探测请求参数,不能为空。","in":"body","name":"HttpDetectRequestBody","required":true,"schema":{"$ref":"#/definitions/HttpDetectRequestBody"}}],"responses":{"200":{"description":"发送http探测成功","examples":{"application/json":{"request_id":"adc82efa7e0042899722531681b1959a","task_id":"adc82efa7e0042899722531681b1959a"}},"schema":{"$ref":"#/definitions/PostHTTPDetectResponseBody"}},"400":{"description":"发送http探测失败","examples":{"application/json":{"error_code":"SMN.00011004","error_msg":"Parameter: Extension is invalid. Http header key is invalid.","request_id":"373cdb9696e44454832ea02e61a2c689"}},"schema":{"$ref":"#/definitions/FailedResp"}},"403":{"description":"Unauthorized","schema":{"$ref":"#/definitions/FailedResp"}},"404":{"description":"Not Found","schema":{"$ref":"#/definitions/FailedResp"}},"429":{"description":"Too Many Requests","schema":{"$ref":"#/definitions/FailedResp"}},"500":{"description":"Internal Server Error","schema":{"$ref":"#/definitions/FailedResp"}}},"summary":"发布探测消息","tags":["发布消息操作"],"x-apiexplorer-hide":"N","x-iftype":"externalAPI","x-is-registered":"Y","x-name":"发送http终端探测消息","x-open-region-cloud":"hk,hc,g42,hk_g42,sbc,hk_sbc","x-request-examples-1":{"endpoint":"http://172.20.0.51:32000/http_notify","extension":{"header":{"x-abc":"1213","x-abc-cba":"test2"}},"protocol":"http"},"x-request-examples-description-1":"正确调用接口示例","x-request-examples-text-1":{"endpoint":"http://172.20.0.51:32000/http_notify","extension":{"header":{"x-abc":"1213","x-abc-cba":"test2"}},"protocol":"http"},"x-request-examples-url-1":"POST https://{SMN_Endpoint}/v2/{project_id}/notifications/topics/urn:smn:regionId:f96188c7ccaf4ffba0c9aa149ab2bd57:test_create_topic_v2/detect","x-support-sdk":"Y"}}},"product_short":"SMN","region_id":"cn-north-4","schemes":["HTTPS"],"security_definitions":null,"summary":"发布探测消息","tags":"发布消息操作","uri":null,"version":"2.0"}