{"base_path":"/","components":null,"consumes":"[\"application/json;charset=UTF-8\"]","definitions":{"FailedResp":{"properties":{"code":{"description":"服务异常错误信息编码。","example":"SMN.0167","type":"string"},"message":{"description":"服务异常错误信息描述。","example":"xxxxxxxx","type":"string"},"request_id":{"description":"请求的唯一标识ID。","example":"6a63a18b8bab40ffb71ebd9cb80d0085","type":"string"}},"required":["request_id","code","message"]},"ListInstanceRequestBody":{"properties":{"action":{"description":"操作标识(仅限于filter,count):filter(过滤),count(查询总条数)。\n为filter时表示分页查询,为count只需按照条件将总条数返回即可。","example":"filter","type":"string"},"limit":{"default":1000,"description":"查询记录数。\n\naction为count时无此参数。\n\naction为filter时,默认为1000。limit最多为1000,不能为负数,最小值为1。","example":1000,"type":"string"},"matches":{"description":"搜索字段。\n\nkey为要匹配的字段,当前只支持resource_name。\n\nvalue为匹配的值,当前为精确匹配。","example":[{"key":"resource_name","value":"resource1"}],"items":{"$ref":"#/definitions/TagMatch"},"type":"array"},"not_tags":{"description":"最多包含10个key,每个key最多包含10个value,结构体不能缺失。key不能为空或者空字符串。key不能重复,同一个key中value不能重复,不同key对应的资源之间为与非的关系。","example":[{"key":"key1","values":["*value1","value2"]},{"key":"key2","values":["*value21","value22"]}],"items":{"$ref":"#/definitions/ResourceTags"},"type":"array"},"not_tags_any":{"description":"最多包含10个key,每个key最多包含10个value,结构体不能缺失。key不能为空或者空字符串。key不能重复,同一个key中value不能重复,不同key对应的资源之间为或非的关系。","example":[{"key":"key1","values":["value1","value2"]}],"items":{"$ref":"#/definitions/ResourceTags"},"type":"array"},"offset":{"default":0,"description":"索引位置, 从offset指定的下一条数据开始查询。 查询第一页数据时,不需要传入此参数,查询后续页码数据时,将查询前一页数据时响应体中的值带入此参数。\n\naction为count时无此参数。\n\naction为filter时,默认为0,必须为数字,且不能为负数。","example":0,"type":"string"},"tags":{"description":"最多包含10个key,每个key最多包含10个value,结构体不能缺失。key不能为空或者空字符串。key不能重复,同一个key中value不能重复,不同key对应的资源之间为与的关系。","example":[{"key":"key1","values":["*value1","value2"]}],"items":{"$ref":"#/definitions/ResourceTags"},"type":"array"},"tags_any":{"description":"最多包含10个key,每个key最多包含10个value,结构体不能缺失。key不能为空或者空字符串。key不能重复,同一个key中value不能重复,不同key对应的资源之间为或的关系。","example":[{"key":"key1","values":["value1","value2"]}],"items":{"$ref":"#/definitions/ResourceTags"},"type":"array"}},"required":["action"]},"ListInstancesResponseBody":{"properties":{"resources":{"description":"返回的资源列表。","items":{"$ref":"#/definitions/TagResource"},"type":"array"},"total_count":{"description":"总记录数。","format":"int32","type":"integer"}},"required":["total_count","resources"]},"ResourceDetail":{"properties":{"detailId":{"description":"详情ID","example":"urn:smn:br-iaas-odin1:0605767f6f00d5762ff9c001c70e7359:test_etcd","type":"string"},"display_name":{"description":"显示名","example":"sssssss","type":"string"},"enterprise_project_id":{"description":"企业项目ID","example":"0","type":"string"},"topic_urn":{"description":"topic唯一标识","example":"urn:smn:br-iaas-odin1:0605767f6f00d5762ff9c001c70e7359:sssss","type":"string"}},"required":["enterprise_project_id","detailId","topic_urn","display_name"]},"ResourceTag":{"description":"资源标签结构体。","properties":{"key":{"description":"键,表示要匹配的字段。\n\n当前key的参数值只能取“resource_name”,此时value的参数值为云服务器名称。\n\n- key不能重复,value为匹配的值。\n\n- 此字段为固定字典值。\n\n- 不允许为空字符串。","example":"key","type":"string"},"value":{"description":"值。\n\n当前key的参数值只能取“resource_name”,此时value的参数值为云服务器名称。\n\n- 每个值最大长度255个unicode字符。\n\n- 不可以为空。","example":"value","type":"string"}},"required":["key","value"]},"ResourceTags":{"description":"资源标签列表结构体。","properties":{"key":{"description":"键。\n\n- 最大长度127个unicode字符。\n\n- key不能为空。","type":"string"},"values":{"description":"值列表。\n\n- 最多10个value。\n\n- value不允许重复。\n\n- 每个值最大长度255个unicode字符。\n\n- 如果values为空则表示any_value。\n\n- value之间为或的关系。","items":{"type":"string"},"type":"array"}},"required":["key","values"]},"TagMatch":{"description":"搜索字段,用于按条件搜索资源。","properties":{"key":{"description":"键,表示要匹配的字段。\n\n当前key的参数值只能取“resource_name”,此时value的参数值为云服务器名称。\n\n- key不能重复,value为匹配的值。\n\n- 此字段为固定字典值。\n\n- 不允许为空字符串。","type":"string"},"value":{"description":"值。\n\n当前key的参数值只能取“resource_name”,此时value的参数值为云服务器名称。\n\n- 每个值最大长度255个unicode字符。\n\n- 不可以为空。","type":"string"}},"required":["key","value"]},"TagResource":{"description":"资源结构体。","properties":{"resource_detail":{"$ref":"#/definitions/ResourceDetail","description":"资源详情。"},"resource_id":{"description":"资源ID。","type":"string"},"resource_name":{"description":"资源名称。","type":"string"},"tags":{"description":"标签列表。","items":{"$ref":"#/definitions/ResourceTag"},"type":"array"}},"required":["resource_detail","resource_id","resource_name","tags"]}},"description":null,"group_id":"28d7e20abf9b4048b20fdaf3ce746d32","host":"smn.cn-north-4.myhuaweicloud.com","id":"fbc1a75cdf824bb08d87aa29a2f1cb88","info_version":"v2","method":"post","name":"ListResourceInstances","parameters":{"X-Auth-Token":{"description":"用户Token。\n\n通过调用IAM服务获取用户Token接口获取(响应消息头中X-Subject-Token的值)。","in":"header","name":"X-Auth-Token","required":true,"type":"string","x-example":"MIIDkgYJKoZIhvcNAQcCoIIDgzCCXXXXXX..."}},"paths":{"/v2/{project_id}/{resource_type}/resource_instances/action":{"post":{"consumes":[],"deprecated":false,"description":"使用标签过滤实例。","operationId":"ListResourceInstances","parameters":[{"description":"项目ID。\n\n获取项目ID请参考 [获取项目ID](smn_api_66000.xml)。","in":"path","name":"project_id","required":true,"type":"string","x-example":"2c31ed520xxxxxxebedb6e81xxxxxxxx"},{"description":"资源类型,目前有:\n\nsmn_topic,主题\n\nsmn_sms,短信\n\nsmn_application,移动推送","in":"path","name":"resource_type","required":true,"type":"string","x-example":"smn_topic"},{"$ref":"#/parameters/X-Auth-Token"},{"in":"body","name":"ListInstancesRequestBody","schema":{"$ref":"#/definitions/ListInstanceRequestBody"}}],"produces":[],"responses":{"200":{"description":"OK","examples":{"application/json":{"resources":{"resource_detail":{"display_name":"testtest","enterprise_project_id":"0","topic_urn":"urn:smn:regionId:f96188c7ccaf4ffba0c9aa149ab2bd57:resouece1"},"resource_id":"cffe4fc4c9a54219b60dbaf7b586e132","resource_name":"resouece1","tags":[{"key":"key1","value":"value1"}]},"total_count":1000}},"schema":{"$ref":"#/definitions/ListInstancesResponseBody"}},"400":{"description":"Bad Request","schema":{"$ref":"#/definitions/FailedResp"}},"403":{"description":"Unauthorized","schema":{"$ref":"#/definitions/FailedResp"}},"404":{"description":"Not Found","schema":{"$ref":"#/definitions/FailedResp"}},"500":{"description":"Internal Server Error","schema":{"$ref":"#/definitions/FailedResp"}}},"summary":"查询资源实例","tags":["使用标签管理服务"],"x-apiexplorer-hide":"N","x-iftype":"externalAPI","x-is-registered":"Y","x-name":"查询资源实例","x-open-region-cloud":"hk,hc,otc,ocb,hcso,g42","x-request-examples-1":{"action":"filter","limit":"100","matches":[{"key":"resource_name","value":"resource1"}],"not_tags":[{"key":"key1","values":["*value1","value2"]},{"key":"key2","values":["*value21","value22"]}],"not_tags_any":[{"key":"key1","values":["value1","value2"]}],"offset":"100","tags":[{"key":"key1","values":["*value1","value2"]}],"tags_any":[{"key":"key1","values":["value1","value2"]}]},"x-request-examples-2":{"action":"count","matches":[{"key":"resource_name","value":"resource"}],"not_tags":[{"key":"key1","values":["value1","*value2"]}],"not_tags_any":[{"key":"key1","values":["value1","value2"]}],"tags":[{"key":"key1","values":["value1","value2"]}],"tags_any":[{"key":"key1","values":["value1","value2"]}]},"x-request-examples-description-1":"使用标签过滤资源实例","x-request-examples-description-2":"使用标签查询资源实例总数","x-request-examples-text-1":{"action":"filter","limit":"100","matches":[{"key":"resource_name","value":"resource1"}],"not_tags":[{"key":"key1","values":["*value1","value2"]},{"key":"key2","values":["*value21","value22"]}],"not_tags_any":[{"key":"key1","values":["value1","value2"]}],"offset":"100","tags":[{"key":"key1","values":["*value1","value2"]}],"tags_any":[{"key":"key1","values":["value1","value2"]}]},"x-request-examples-text-2":{"action":"count","matches":[{"key":"resource_name","value":"resouurce"}],"not_tags":[{"key":"key1","values":["value1","*value2"]}],"not_tags_any":[{"key":"key1","values":["value1","value2"]}],"tags":[{"key":"key1","values":["value1","value2"]}],"tags_any":[{"key":"key1","values":["value1","value2"]}]},"x-request-examples-url-1":"POST https://{SMN_Endpoint}/v2/{project_id}/{resource_type}/resource_instances/action","x-request-examples-url-2":"POST https://{SMN_Endpoint}/v2/{project_id}/{resource_type}/resource_instances/action","x-support-sdk":"Y"}}},"product_short":"SMN","region_id":"cn-north-4","schemes":["HTTPS"],"security_definitions":null,"summary":"查询资源实例","tags":"使用标签管理服务","uri":null,"version":"2.0"}