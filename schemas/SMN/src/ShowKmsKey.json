{"base_path":"/","components":null,"consumes":"[\"application/json;charset=UTF-8\"]","definitions":{"FailedResp":{"properties":{"code":{"description":"服务异常错误信息编码。","example":"SMN.0167","type":"string"},"message":{"description":"服务异常错误信息描述。","example":"xxxxxxxx","type":"string"},"request_id":{"description":"请求的唯一标识ID。","example":"6a63a18b8bab40ffb71ebd9cb80d0085","type":"string"}},"required":["request_id","code","message"]},"ShowKmsKeyResponseBody":{"properties":{"id":{"description":"密钥对应的资源ID,该ID由SMN服务生成。","type":"string"},"key_id":{"description":"在DEW服务上创建的用户主密钥对应的密钥ID,具体参考在DEW服务上创建密钥章节。","maxLength":36,"pattern":"^[0-9a-z]{8}-[0-9a-z]{4}-[0-9a-z]{4}-[0-9a-z]{4}-[0-9a-z]{12}$","type":"string"},"request_id":{"description":"请求的唯一标识ID。","type":"string"},"status":{"description":"密钥的状态字段,为枚举类型。\n- ENABLED状态为密钥启用状态,此时发布的消息均使用该主密钥创建的数据密钥进行加解密。\n- TO_BE_ACTIVATED状态为密钥待激活状态,当密钥未激活时,发布主题消息会返回失败,请前往DEW服务对密钥进行操作。\n- DISABLED状态为密钥禁用状态,当密钥已被禁用时,发布主题消息会返回失败,请前往DEW服务对密钥进行操作。\n- PENDING_DELETION状态为密钥计划删除状态,当密钥已被计划删除时,发布主题消息仍能正常使用该密钥。\n- PENDING_IMPORT状态为密钥计划导入状态,当密钥计划导入时,发布主题消息会返回失败,请前往DEW服务对密钥进行操作。\n- DELETED状态为密钥已删除状态,当密钥已删除后,SMN无法从DEW服务处获取有效的密钥,此时发布主题消息会返回失败,请重新在主题下配置可用的密钥。","enum":["ENABLED","TO_BE_ACTIVATED","DISABLED","PENDING_DELETION","PENDING_IMPORT","DELETED"],"example":"ENABLED","type":"string"}},"required":["key_id","status","id","request_id"],"type":"object"}},"description":null,"group_id":"28d7e20abf9b4048b20fdaf3ce746d32","host":"smn.cn-north-4.myhuaweicloud.com","id":"494e780702f34855a1fd2b39aa45c981","info_version":"v2","method":"get","name":"ShowKmsKey","parameters":{"X-Auth-Token":{"description":"用户Token。\n\n通过调用IAM服务获取用户Token接口获取(响应消息头中X-Subject-Token的值)。","in":"header","name":"X-Auth-Token","required":true,"type":"string","x-example":"MIIDkgYJKoZIhvcNAQcCoIIDgzCCXXXXXX..."}},"paths":{"/v2/{project_id}/notifications/topics/{topic_urn}/kms":{"get":{"description":"查询主题下密钥ID。执行绑定KMS密钥时,用户需要先在IAM处创建名为smn_kms_agency的委托,并将资源操作权限授权给SMN服务。SMN会使用该委托进行查询密钥信息操作。","operationId":"ShowKmsKey","parameters":[{"description":"项目ID。 获取项目ID请参考 [获取项目ID](smn_api_66000.xml)。","in":"path","name":"project_id","required":true,"type":"string"},{"description":"Topic的唯一的资源标识。可以通过[查看主题列表](smn_api_51004.xml)获取该标识。","in":"path","name":"topic_urn","required":true,"type":"string"},{"$ref":"#/parameters/X-Auth-Token"}],"responses":{"200":{"description":"请求成功的返回体。","examples":{"application/json":{"id":"d39453da9d6c4026ba0bb3ed1a6efc2d","key_id":"9a618041-a917-49e0-bb3a-1a90163e97fe","request_id":"c16810962f1140da82abcd9e783cf4e2","status":"ENABLED"}},"schema":{"$ref":"#/definitions/ShowKmsKeyResponseBody"}},"403":{"description":"Forbidden","examples":{"application/json":{"code":"SMN.0001","message":"No permission to request resources.","request_id":"c7da9c96193c4017b6d2250477107416"}},"schema":{"$ref":"#/definitions/FailedResp"}},"404":{"description":"Not Found","examples":{"application/json":{"error_code":"SMN.00010008","error_msg":"Topic information is not found.","request_id":"135be5478b594200be295f6603f223bd"}},"schema":{"$ref":"#/definitions/FailedResp"}},"500":{"description":"Internal Server Error","schema":{"$ref":"#/definitions/FailedResp"}}},"summary":"查询主题下KMS密钥","tags":["密钥操作"],"x-apiexplorer-hide":"N","x-iftype":"externalAPI","x-is-registered":"Y","x-name":"查询主题下KMS密钥","x-open-region-cloud":"hk,hc","x-request-examples-description-1":"请求成功的示例。","x-request-examples-url-1":"https://{SMN_Endpoint}/v2/{project_id}/notifications/topics/urn:smn:regionId:44ef0bd78eb24f02b40614fe85a7d234:topic_05721ee8904211f0871f84a93e8ae4b6/kms","x-support-sdk":"Y"}}},"product_short":"SMN","region_id":"cn-north-4","schemes":["HTTPS"],"security_definitions":null,"summary":"查询主题下KMS密钥","tags":"密钥操作","uri":null,"version":"2.0"}