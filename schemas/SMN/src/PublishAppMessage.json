{"base_path":"/","components":null,"consumes":"[\"application/json;charset=UTF-8\"]","definitions":{"FailedResp":{"properties":{"code":{"description":"服务异常错误信息编码。","example":"SMN.0167","type":"string"},"message":{"description":"服务异常错误信息描述。","example":"xxxxxxxx","type":"string"},"request_id":{"description":"请求的唯一标识ID。","example":"6a63a18b8bab40ffb71ebd9cb80d0085","type":"string"}},"required":["request_id","code","message"]},"PublishAppMessageRequestBody":{"properties":{"message":{"description":"message与message_structure二者选其一。\n\nmessage, App消息发布。\n\nmessage_structure, 使用消息结构体方式的App消息发布。\n\napp推送的消息内容,当前支持的推送平台有HMS、APNS、APNS_SANDBOX。\n\nHMS是为开发者提供的消息推送平台。\n\nAPNS和APNS_SANDBOX是用于推送iOS消息的服务平台。\n\nHMS平台指定的消息内容不超过2K。\n\nAPNS和APNS_SANDBOX平台的消息内容不能超过4K。\n\n推送平台的消息内容格式要求详情见application消息体格式。\n\n华为透传消息\n\n{\n  \"hps\": {\n    \"msg\": {\n      \"type\": 1,\n      \"body\": {\n        \"key\": \"value\"\n      }\n    }\n  }\n}\n\n华为系统通知栏消息\n\n{\n  \"hps\": {\n    \"msg\": {\n      \"type\": 3,\n      \"body\": {\n        \"content\": \"Push message content\",\n        \"title\": \"Push message content\"\n      },\n      \"action\": {\n        \"type\": 1,\n        \"param\": {\n          \"intent\": \"#Intent;compo=com.rvr/.Activity;S.W=U;end\"\n        }\n      }\n    },\n    \"ext\": {\n      \"biTag\": \"Trump\",\n      \"icon\": \"http://upload.w.org/00/150pxsvg.png\"\n    }\n  }\n}\n\n苹果平台消息格式\n{\n  \"aps\": {\n    \"alert\": \"hello world\"\n  }\n}","example":{"hps":{"msg":{"action":{"param":{"intent":"#Intent;compo=com.HC.SmnAppPush.defaultAction/.Activity;S.W=U;end"},"type":1},"body":{"content":"hello world","title":"hello world"},"type":3}}},"type":"string"},"message_structure":{"description":"app推送的消息内容,当前支持的推送平台有HMS、APNS、APNS_SANDBOX。\n\nHMS是为开发者提供的消息推送平台。\n\nAPNS和APNS_SANDBOX是用于推送iOS消息的服务平台。\n\nHMS平台指定的消息内容不超过2K。\n\nAPNS和APNS_SANDBOX平台的消息内容不能超过4K。\n\n推送平台的消息内容格式要求详情见application消息体格式。\n\n华为透传消息\n\n{\n  \"HMS\": {\n    \"hps\": {\n      \"msg\": {\n        \"type\": 1,\n        \"body\": {\n          \"key\": \"value\"\n        }\n      }\n    }\n  }\n}\n\n华为系统通知栏消息\n\n{\n  \"HMS\": {\n    \"hps\": {\n      \"msg\": {\n        \"type\": 3,\n        \"body\": {\n          \"content\": \"Push message content\",\n          \"title\": \"Push message content\"\n        },\n        \"action\": {\n          \"type\": 1,\n          \"param\": {\n            \"intent\": \"#Intent;compo=com.rvr/.Activity;S.W=U;end\"\n          }\n        }\n      },\n      \"ext\": {\n        \"biTag\": \"Trump\",\n        \"icon\": \"http://upload.w.org/00/150pxsvg.png\"\n      }\n    }\n  }\n}\n\n苹果平台消息格式\n\n{\n  \"APNS\": {\n    \"aps\": {\n      \"alert\": \"hello world\"\n    }\n  }\n}","example":{"HMS":{"hps":{"msg":{"action":{"param":{"intent":"#Intent;compo=com.HC.SmnAppPush.defaultAction/.Activity;S.W=U;end"},"type":1},"body":{"content":"hello world","title":"hello world"},"type":3}}}},"type":"string"},"time_to_live":{"default":"3600","description":"消息发送的生存时间,是相对于发布时间的。\n\nSMN系统将移动推送消息转交给推送平台前,会计算该消息在系统消耗的时间。只有消耗的时间小于time_to_live时,SMN才会将消息转交给推送平台,并将time_to_live减去消耗的时间传递给推送平台,否则消息废弃。\n\ntime _to_live的单位是s,变量默认值是3600s,即一小时。值为正整数且小于等于3600*24。","example":"3600","type":"string"}}},"PublishAppMessageResponseBody":{"properties":{"message_id":{"description":"唯一的消息ID。","example":"bf94b63a5dfb475994d3ac34664e24f2","type":"string"},"request_id":{"description":"请求的唯一标识ID。","example":"9974c07f6d554a6d827956acbeb4be5f","type":"string"}},"required":["message_id","request_id"]}},"description":null,"group_id":"28d7e20abf9b4048b20fdaf3ce746d32","host":"smn.cn-north-4.myhuaweicloud.com","id":"4d68237f0b9f41ae9eb39de0b0937700","info_version":"v2","method":"post","name":"PublishAppMessage","parameters":{"X-Auth-Token":{"description":"用户Token。\n\n通过调用IAM服务获取用户Token接口获取(响应消息头中X-Subject-Token的值)。","in":"header","name":"X-Auth-Token","required":true,"type":"string","x-example":"MIIDkgYJKoZIhvcNAQcCoIIDgzCCXXXXXX..."}},"paths":{"/v2/{project_id}/notifications/endpoints/{endpoint_urn}/publish":{"post":{"consumes":[],"deprecated":true,"description":"将消息直发给endpoint设备。","operationId":"PublishAppMessage","parameters":[{"description":"项目ID。\n\n获取项目ID请参考 [获取项目ID](smn_api_66000.xml)。","in":"path","name":"project_id","required":true,"type":"string","x-example":"2c31ed520xxxxxxebedb6e81xxxxxxxx"},{"description":"Endpoint的唯一资源标识,可通过[查询Application的Endpoint列表](smn_api_58004.xml)获取该标识","in":"path","name":"endpoint_urn","required":true,"type":"string","x-example":"urn:smn:regionId:f96188c7ccaf4ffba0c9aa149ab2bd57:endpoint-APNS-example_application_name-37a2cb947fa43a20bc66e91281194e7a"},{"$ref":"#/parameters/X-Auth-Token"},{"in":"body","name":"PublishAppMessageRequestBody","schema":{"$ref":"#/definitions/PublishAppMessageRequestBody"}}],"produces":[],"responses":{"200":{"description":"OK","examples":{"application/json":{"message_id":"bf94b63a5dfb475994d3ac34664e24f2","request_id":"6a63a18b8bab40ffb71ebd9cb80d0085"}},"schema":{"$ref":"#/definitions/PublishAppMessageResponseBody"}},"400":{"description":"Bad Request","schema":{"$ref":"#/definitions/FailedResp"}},"403":{"description":"Unauthorized","schema":{"$ref":"#/definitions/FailedResp"}},"404":{"description":"Not Found","schema":{"$ref":"#/definitions/FailedResp"}},"500":{"description":"Internal Server Error","schema":{"$ref":"#/definitions/FailedResp"}}},"summary":"App消息发布","tags":["Application直发消息操作"],"x-apiexplorer-hide":"N","x-iftype":"externalAPI","x-is-registered":"Y","x-name":"将消息直发给endpoint设备。","x-open-region-cloud":"hk,hc","x-request-examples-1":{"message":{"hps":{"msg":{"action":{"param":{"intent":"#Intent;compo=com.HC.SmnAppPush.defaultAction/.Activity;S.W=U;end"},"type":1},"body":{"content":"hello world","title":"hello world"},"type":3}}},"time_to_live":3600},"x-request-examples-2":{"message_structure":{"HMS":{"hps":{"msg":{"action":{"param":{"intent":"#Intent;compo=com.HC.SmnAppPush.defaultAction/.Activity;S.W=U;end"},"type":1},"body":{"content":"hello world","title":"hello world"},"type":3}}}},"time_to_live":3600},"x-request-examples-description-1":"App消息发布","x-request-examples-description-2":"使用消息结构体方式的App消息发布","x-request-examples-text-1":{"message":{"hps":{"msg":{"action":{"param":{"intent":"#Intent;compo=com.HC.SmnAppPush.defaultAction/.Activity;S.W=U;end"},"type":1},"body":{"content":"hello world","title":"hello world"},"type":3}}},"time_to_live":3600},"x-request-examples-text-2":{"message":{"HMS":{"hps":{"msg":{"action":{"param":{"intent":"#Intent;compo=com.HC.SmnAppPush.defaultAction/.Activity;S.W=U;end"},"type":1},"body":{"content":"hello world","title":"hello world"},"type":3}}}},"time_to_live":3600},"x-request-examples-url-1":"POST https://{SMN_Endpoint}/v2/{project_id}/notifications/endpoints/{endpoint_urn}/publish","x-request-examples-url-2":"POST https://{SMN_Endpoint}/v2/{project_id}/notifications/endpoints/{endpoint_urn}/publish","x-support-sdk":"Y"}}},"product_short":"SMN","region_id":"cn-north-4","schemes":["HTTPS"],"security_definitions":null,"summary":"App消息发布","tags":"Application直发消息操作","uri":null,"version":"2.0"}