{"base_path":null,"components":{"parameters":{"application_id":{"description":"应用ID。","in":"path","name":"application_id","required":true,"schema":{"type":"string"}},"auth-token":{"description":"租户身份验证令牌。","in":"header","name":"X-Auth-Token","required":true,"schema":{"type":"string"}},"limit":{"description":"指定个数,明确指定的时候用于分页,取值[0, 100]。不指定的时候表示不分页,最多查询1000条记录。","in":"query","name":"limit","required":false,"schema":{"maximum":100,"minimum":0,"type":"integer"}},"offset":{"description":"指定查询偏移量,默认偏移量为0.","in":"query","name":"offset","required":false,"schema":{"type":"integer"}},"order":{"description":"desc/asc,默认desc。","in":"query","name":"order","required":false,"schema":{"enum":["desc","asc"],"type":"string"}},"order_by":{"description":"排序字段,默认按创建时间排序。\n\n排序字段支持枚举值:create_time、name、update_time。","in":"query","name":"order_by","required":false,"schema":{"type":"string"}},"project_id":{"description":"租户项目ID。","in":"path","name":"project_id","required":true,"schema":{"type":"string"}}},"responses":{"500":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}},"description":"内部错误。"}},"schemas":{"BuildInfo":{"description":"构建工程。","properties":{"id":{"description":"构建ID,查看构建列表获取。","maxLength":64,"type":"string"},"parameters":{"description":"构建任务的环境变量。","properties":{"artifact_namespace":{"description":"构建归档组织,默认cas_{project_id}。","maxLength":64,"type":"string"},"build_cmd":{"description":"编译命令。默认:\n\n1、根目录存在build.sh:./build.sh\n\n2、根据运行系统,示例如下:\n\nJava和Tomcat:mvn clean package\n\nNodejs: npm build","type":"string"},"cluster_id":{"description":"指定构建集群的id。","type":"string"},"dockerfile_path":{"description":"dockerfile地址。默认是根目录./。","type":"string"},"node_label_selector":{"description":"key是标签的键,value是标签的值。","type":"object"}},"type":"object"}},"type":"object"},"ComponentCategory":{"description":"应用组件类型包括:Webapp、MicroService、Common。","enum":["Webapp","MicroService","Common"],"type":"string"},"ComponentSubCategory":{"description":"应用组件子类型。\n\nWebapp的子类型有Web、Magento、Wordpress。\n\nMicroService的子类型有Java Chassis、Go Chassis、Mesher、SpringCloud。\n\nCommon的子类型可以为空。","enum":["Web","Magento","Wordpress","SpringCloud","Java Chassis","Go Chassis","Mesher"],"maxLength":32,"type":"string"},"ComponentView":{"example":{"category":"Webapp","create_time":1572263247157,"description":"desc","id":"6f8a56d1-59dc-4783-8676-81e44486eeab","name":"app-bypspe","runtime":"Docker","sub_category":"Web","update_time":1572263247157},"properties":{"application_id":{"description":"应用ID。","type":"string"},"build":{"$ref":"#/components/schemas/BuildInfo"},"category":{"$ref":"#/components/schemas/ComponentCategory"},"create_time":{"description":"创建时间。","format":"int64","type":"integer"},"creator":{"description":"创建人。","type":"string"},"description":{"description":"组件描述。","type":"string"},"id":{"description":"组件ID。","type":"string"},"name":{"description":"应用组件名称。","type":"string"},"project_id":{"description":"项目ID。","type":"string"},"runtime":{"$ref":"#/components/schemas/RuntimeType"},"source":{"$ref":"#/components/schemas/SourceObject"},"status":{"description":"取值0或1。\n\n0:表示正常状态。\n\n1:表示正在删除。","type":"integer"},"sub_category":{"$ref":"#/components/schemas/ComponentSubCategory"},"update_time":{"description":"修改时间。","format":"int64","type":"integer"}},"type":"object"},"Components":{"properties":{"components":{"description":"组件列表。","items":{"$ref":"#/components/schemas/ComponentView"},"type":"array"},"count":{"description":"组件个数。","example":10,"type":"integer"}},"type":"object"},"ErrorResponse":{"properties":{"error_code":{"description":"错误码。","type":"string"},"error_detail":{"description":"详细定位信息。","type":"string"},"error_message":{"description":"错误详细信息。","example":"error message","type":"string"},"error_msg":{"description":"错误信息。","type":"string"}},"type":"object"},"ObsProperties":{"description":"软件包的其他属性,只有在选择对象存储obs的时候才需要添加。","properties":{"bucket":{"description":"软件包在obs的桶名。","type":"string"},"endpoint":{"description":"obs的终端地址,比如:https://obs.region_name.external_domain_name.com。","type":"string"},"key":{"description":"obs桶中的对象,一般是软件包名,有文件夹的话要加上文件夹的路径。比如test.jar或者demo/test.jar。","type":"string"}},"type":"object"},"RuntimeType":{"description":"运行时类型。","enum":["Tomcat8","Java8","Php7","Nodejs8","Docker","Python3","Custom"],"type":"string"},"SourceKind":{"description":"来源类型。支持源码code和artifact软件包。","enum":["code","artifact"],"type":"string"},"SourceObject":{"description":"组件来源。","example":{"kind":"artifact","spec":{"auth":"iam","storage":"swr","type":"pacakge","url":"https://100.125.0.198:20202/xxx/xxx.jar"}},"properties":{"kind":{"$ref":"#/components/schemas/SourceKind"},"spec":{"$ref":"#/components/schemas/SourceOrArtifact"}},"required":["kind","spec"],"type":"object"},"SourceOrArtifact":{"description":"当组件来源的kind是artifact时spec的内容结构。","example":{"component_name":{"auth":"iam","storage":"swr","type":"package","url":"100.125.0.198:20202/xxx/xxx.jar"}},"properties":{"auth":{"default":"iam","description":"认证方式,支持iam,none,默认是iam。","type":"string"},"properties":{"$ref":"#/components/schemas/ObsProperties"},"repo_auth":{"description":"授权名称,在授权列表获取。","maxLength":32,"type":"string"},"repo_ref":{"description":"代码分支或者Tag,默认是master。","maxLength":32,"type":"string"},"repo_type":{"$ref":"#/components/schemas/SourceRepoType"},"repo_url":{"description":"代码仓url,如:https://github.com/example/demo.git","maxLength":256,"type":"string"},"storage":{"description":"存储方式,支持软件仓库swr和对象存储obs。","enum":["swr","obs"],"type":"string"},"type":{"description":"类别,支持package。","enum":["package"],"type":"string"},"url":{"description":"软件包源码地址,如https://{IP}:20202/xxx/xxx.jar。","type":"string"},"webUrl":{"description":"软件包/源码仓库地址","type":"string"}},"type":"object"},"SourceRepoType":{"description":"代码仓类型,支持GitHub、GitLab、Gitee、Bitbucket。","enum":["GitHub","GitLab","Gitee","Bitbucket"],"type":"string"}}},"consumes":"","definitions":null,"description":null,"group_id":"66601b9b4dd246ddab6e76d90a0b0ecd","host":"servicestage.cn-north-4.myhuaweicloud.com","id":"0139a743deea449dbb3fce356720e421","info_version":"v2","method":"get","name":"ListComponents","parameters":null,"paths":{"/v2/{project_id}/cas/applications/{application_id}/components":{"get":{"description":"通过此API获取应用下所有应用组件。","operationId":"ListComponents","parameters":[{"$ref":"#/components/parameters/auth-token"},{"$ref":"#/components/parameters/project_id"},{"$ref":"#/components/parameters/application_id"},{"$ref":"#/components/parameters/limit"},{"$ref":"#/components/parameters/offset"},{"$ref":"#/components/parameters/order_by"},{"$ref":"#/components/parameters/order"}],"responses":{"200":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/Components"}}},"description":"操作成功。"},"500":{"$ref":"#/components/responses/500"}},"summary":"获取应用所有组件","tags":["组件"],"x-is-registered":"Y","x-support-sdk":"Y"}}},"product_short":"ServiceStage","region_id":"cn-north-4","schemes":["HTTPS"],"security_definitions":null,"summary":"获取应用所有组件","tags":"组件","uri":null,"version":"3.0.1"}