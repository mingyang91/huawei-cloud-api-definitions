{"base_path":"/","components":null,"consumes":"","definitions":{"KnowledgeBaseRetrievalReq":{"description":"知识检索请求体。","properties":{"image_mask_policy":{"default":"REMOVE_IMAGE","description":"**参数解释**:\n知识检索结果切片中,对图片标签进行处理和保留的具体方式。\n\n**约束限制**:\n该功能要求被检索的知识库本身支持返回图片信息。\n\n**取值范围**:\n- RETAIN_IMAGE_ID:保留图片ID,格式:{KI|imageId}。\n- RETAIN_PLACEHOLDER:保留占位符,格式:{KI|N},N为序号。\n- REMOVE_IMAGE:移除图片(即替换为空字符串)。\n\n**默认取值**:\nREMOVE_IMAGE。","enum":["RETAIN_IMAGE_ID","RETAIN_PLACEHOLDER","REMOVE_IMAGE"],"maxLength":64,"minLength":1,"type":"string"},"knowledge_base_ids":{"description":"**参数解释**:\n知识库ID列表。\n\n**约束限制**:\n最多可同时检索3个知识库。\n\n**取值范围**:\n不涉及。\n\n**默认取值**:\n不涉及。","example":["781d380d-ac06-11f0-8c32-fa163ea89...","82e8dda0-ac06-11f0-8c32-fa163ea89..."],"items":{"description":"知识库ID。","maxLength":100,"minLength":0,"type":"string"},"maxItems":3,"minItems":1,"type":"array"},"query":{"description":"**参数解释**:\n用户输入的问题或关键词。\n\n**约束限制**:\n不涉及。\n\n**取值范围**:\n长度 1 至 4096 字符。\n\n**默认取值**:\n不涉及。","example":"测试检索问题。","maxLength":4096,"minLength":1,"type":"string"},"search_mode":{"default":"doc","description":"**参数解释**:\n检索策略模式。\n\n**约束限制**:\n不涉及。\n\n**取值范围**:\n- doc:语义检索。\n- keyword:关键词检索。\n- mix:混合检索。\n- faq:FAQ检索。\n\n**默认取值**:\ndoc。","enum":["doc","keyword","mix","faq"],"maxLength":16,"minLength":1,"type":"string"},"similarity_threshold":{"default":0.5,"description":"**参数解释**:\n检索结果的最低相关度得分,低于此值的片段将被过滤。\n\n**约束限制**:\n不涉及。\n\n**取值范围**:\n[0.0, 1.0],包含两端。\n\n**默认取值**:\n0.5。","format":"float","maximum":1,"minimum":0,"type":"number"},"top_k":{"default":10,"description":"**参数解释**:\n每个知识库最多返回的检索结果数量。\n\n**约束限制**:\n若传入小数,系统会默认截断小数部分。\n\n**取值范围**:\n1 至 100(含)。\n\n**默认取值**:\n10。","format":"int32","maximum":100,"minimum":1,"type":"integer"}},"required":["knowledge_base_ids","query"],"type":"object"},"KnowledgeBaseRetrievalRsp":{"description":"知识检索响应体。","properties":{"retrieve_result_list":{"description":"**参数解释**:\n检索结果列表。\n\n**取值范围**:\n不涉及。","items":{"$ref":"#/definitions/RetrievalResultInfo"},"type":"array"},"total":{"description":"**参数解释**:\n检索结果总数。\n\n**取值范围**:\n不涉及。","format":"int32","maximum":65535,"type":"integer"}},"required":["total"],"type":"object"},"RetrievalResultInfo":{"description":"检索结果。","properties":{"chunk_id":{"description":"**参数解释**:\n分片ID。\n\n**取值范围**:\n不涉及。","maxLength":64,"minLength":1,"pattern":"^[a-zA-Z0-9_-]+$","type":"string"},"content":{"description":"**参数解释**:\n文本内容(如果是FAQ,返回ANSWER)。\n\n**取值范围**:\n不涉及。","maxLength":65535,"minLength":1,"type":"string"},"file_id":{"description":"**参数解释**:\n文件ID(或FAQ ID)。\n\n**取值范围**:\n不涉及。","maxLength":64,"minLength":1,"type":"string"},"image_ids":{"description":"**参数解释**:\n检索到的图片列表(需知识库支持),与content中的图片占位符{KI|N}保持一一对应关系,N为图片索引值,从0开始。\n\n**取值范围**:\n不涉及。","items":{"description":"图片ID。","type":"string"},"type":"array"},"knowledge_base_id":{"description":"**参数解释**:\n知识库ID。\n\n**取值范围**:\n不涉及。","maxLength":64,"minLength":1,"type":"string"},"similarity":{"description":"**参数解释**:\n相似度。\n\n**取值范围**:\n[0.0, 1.0],包含两端。","format":"float","type":"number"},"title":{"description":"**参数解释**:\n文档标题(如果是FAQ,返回QUESTION)。\n\n**取值范围**:\n不涉及。","type":"string"}},"type":"object"}},"description":null,"group_id":"da9676f02c9840ef99327ebcb7e87a6e","host":"versatile.cn-north-4.myhuaweicloud.com","id":"a22f6553e4fd4ce2b86fdb8e0c84877f","info_version":"v1","method":"post","name":"SearchKnowledgeBase","parameters":{"projectId":{"description":"**参数解释**:\n当前租户项目ID。\n\n**取值范围**:\n由英文,数字,“-”,“_”组成,不超过64位字符。","in":"path","maxLength":64,"name":"project_id","pattern":"^[a-zA-Z0-9_-]+$","required":true,"type":"string"},"xAuthToken":{"description":"**参数解释**:\n用户Token。通过调用IAM服务获取用户Token接口获取(响应消息头中X-Subject-Token的值)。\n\n**取值范围**:\n不涉及。","in":"header","maxLength":15000,"name":"X-Auth-Token","required":true,"type":"string"}},"paths":{"/v2/{project_id}/knowledge-bases/retrieve":{"post":{"consumes":["application/json"],"description":"提供多知识库并行检索能力,支持语义、关键词、混合及FAQ四种检索模式,并允许自定义相似度阈值与返回结果数量,实现精准高效的信息匹配。\n\n**适用场景**:\n- 同时从多个知识库或文档集合中搜索相关内容。\n- 在预设的问答列表中快速定位最相关的答案(FAQ检索)。\n- 通过混合模式或调整阈值,兼顾搜索结果的准确性和全面性。","operationId":"SearchKnowledgeBase","parameters":[{"$ref":"#/parameters/projectId"},{"$ref":"#/parameters/xAuthToken"},{"description":"知识库检索请求体。","in":"body","name":"KnowledgeBaseRetrievalReq","required":true,"schema":{"$ref":"#/definitions/KnowledgeBaseRetrievalReq"}}],"produces":["application/json"],"responses":{"200":{"description":"知识库检索结果。","schema":{"$ref":"#/definitions/KnowledgeBaseRetrievalRsp"},"x-response-examples-1":{"application/json":{"retrieve_result_list":[{"chunk_id":"840003a72d6f4325958920e52c5a9...","content":"测试检索召回内容。","file_id":"687c7914cbddcc8702cb6698f6230...","knowledge_base_id":"b56c5138-96e3-4630-8381-7846dfdbcdd5","similarity":0.9785156,"title":"test"}],"total":1}}}},"summary":"知识库检索","tags":["OpenKnowledgeBase"],"x-is-registered":"Y","x-open-region-cloud":"hc","x-request-examples-1":{"knowledge_base_ids":["bad2ef8771e6443096b528a8a7gh...."],"query":"测试检索问题。","search_mode":"DOC","similarity_threshold":0.5,"top_k":10},"x-request-examples-url-1":"https://{endpoint}/v2/{project_id}/knowledge-bases/retrieve","x-support-sdk":"Y"}}},"product_short":"Versatile","region_id":"cn-north-4","schemes":["HTTPS"],"security_definitions":null,"summary":"知识库检索","tags":"OpenKnowledgeBase","uri":null,"version":"2.0"}