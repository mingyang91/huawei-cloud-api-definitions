{"base_path":"/","components":null,"consumes":"","definitions":{"Conversation":{"description":"会话记录","properties":{"lastUpdateTime":{"format":"int64","type":"integer"},"messageList":{"items":{"$ref":"#/definitions/Message"},"type":"array"}},"type":"object"},"ErrorDetail":{"description":"错误信息","properties":{"error_code":{"description":"错误码","type":"string"},"error_msg":{"description":"错误信息","type":"string"}},"type":"object"},"ErrorRsp":{"description":"完整错误信息","properties":{"details":{"description":"调用接口返回的错误信息","items":{"$ref":"#/definitions/ErrorDetail"},"type":"array"},"error_code":{"description":"错误码","type":"string"},"error_msg":{"description":"错误信息","type":"string"},"error_reason":{"description":"错误原因","type":"string"},"error_suggestion":{"description":"错误建议","type":"string"}},"type":"object"},"FeedbackReason":{"description":"用户反馈原因","properties":{"content":{"description":"具体原因内容","maxLength":256,"type":"string"},"tags":{"description":"原因标签列表","items":{"maxLength":64,"type":"string"},"maxItems":10,"minItems":1,"type":"array"}},"required":["tags"],"type":"object"},"Message":{"properties":{"agent_id":{"description":"agent id","type":"string"},"content":{"description":"内容","type":"string"},"create_time":{"description":"时间戳","format":"int64","type":"integer"},"enable_history":{"description":"是否开启会话历史","type":"boolean"},"execution_id":{"description":"对话ID","type":"string"},"files":{"description":"多模态文件列表","items":{"type":"object"},"type":"array"},"function_call":{"description":"工具调用信息","type":"object"},"intent":{"items":{"type":"string"},"type":"array"},"name":{"description":"工具名称","type":"object"},"node_id":{"description":"节点ID","type":"string"},"rating":{"description":"评分,-1(点赞)、1(点踩)","maximum":1,"minimum":-1,"type":"integer"},"reason":{"$ref":"#/definitions/FeedbackReason"},"role":{"description":"角色","maxLength":64,"minLength":1,"type":"string"},"tool_call_id":{"description":"工具调用ID信息","type":"object"},"tool_calls":{"description":"工具调用信息","type":"object"}},"type":"object"},"NodeMessage":{"properties":{"content":{"description":"内容","type":"string"},"createdTime":{"description":"事件发生时间","format":"int64","type":"integer"},"nodeId":{"description":"节点id","type":"string"},"nodeName":{"description":"节点名","type":"string"},"nodeType":{"description":"节点类型","minLength":1,"type":"string"},"origin":{"description":"原始内容","type":"string"},"role":{"description":"角色","maxLength":64,"minLength":1,"type":"string"}},"type":"object"},"NodeRunInfo":{"properties":{"agent_id":{"description":"工作流id","maxLength":128,"type":"string"},"end_time":{"description":"结束时间,13位时间戳 workflow_finished,node_finished必填","format":"int64","type":"integer"},"error_message":{"description":"错误信息","maxLength":4096,"type":"string"},"execution_id":{"description":"execution id","maxLength":128,"type":"string"},"inner_error":{"properties":{"error_body":{"properties":{"error_code":{"description":"错误码","type":"string"},"error_message":{"description":"错误信息","type":"string"}},"type":"object"},"is_success":{"description":"是否成功","type":"boolean"}},"type":"object"},"inputs":{"additionalProperties":{"type":"object"},"description":"输入参数:debug才设置","type":"object"},"loop_index":{"description":"循环次数","type":"integer"},"loop_node_id":{"description":"上层循环节点id","maxLength":128,"type":"string"},"memory":{"additionalProperties":{"type":"object"},"description":"记忆变量","type":"object"},"messages":{"description":"消息节点或提问器节点的输出","items":{"$ref":"#/definitions/Message"},"type":"array"},"metadata":{"additionalProperties":{"type":"object"},"description":"节点特有的输出,如:大模型原始回复debug才设置","type":"object"},"node_id":{"description":"节点id","maxLength":128,"type":"string"},"node_name":{"description":"节点名称","maxLength":128,"type":"string"},"node_status":{"description":"工作流节点状态","enum":["node_started","node_wait","node_finished"],"type":"string"},"node_type":{"description":"节点类型","maxLength":32,"type":"string"},"outputs":{"additionalProperties":{"type":"object"},"description":"输出参数:debug才设置","type":"object"},"parent_node_id":{"description":"父节点id","maxLength":128,"type":"string"},"parent_workflow_id":{"description":"父工作流节点id","maxLength":128,"type":"string"},"prefill_time":{"description":"预热时间,如大模型节点表示首token时间","format":"int64","type":"integer"},"start_time":{"description":"开始时间,13位时间戳 workflow_started,node_started必填","format":"int64","type":"integer"},"startup_time":{"description":"真正启动的时间,13位时间戳","format":"int64","type":"integer"},"status":{"$ref":"#/definitions/Status"}},"type":"object"},"PluginConfig":{"description":"插件参数","properties":{"config":{"additionalProperties":{"type":"object"},"description":"单个插件参数","type":"object"},"plugin_id":{"description":"插件id","type":"string"}},"type":"object"},"Status":{"properties":{"code":{"description":"错误码","type":"integer"},"desc":{"description":"错误描述信息","maxLength":1024,"type":"string"}},"required":["code","desc"],"type":"object"},"UserProfile":{"properties":{"enable_extract":{"default":false,"description":"运行时, 是否构建用户画像","type":"boolean"},"enable_retrieve":{"default":false,"description":"运行时, 是否读取用户画像","type":"boolean"}},"type":"object"},"WorkflowRunReq":{"properties":{"conversation":{"$ref":"#/definitions/Conversation"},"enable_history":{"default":true,"description":"会话历史写入","type":"boolean"},"globals":{"additionalProperties":{"type":"object"},"type":"object"},"inputs":{"additionalProperties":{"type":"object"},"properties":{"query":{"description":"用户输入","type":"string"}},"type":"object"},"memory_inputs":{"additionalProperties":{"type":"object"},"type":"object"},"messages":{"description":"user消息","items":{"$ref":"#/definitions/Message"},"type":"array"},"plugin_configs":{"description":"插件参数数组","items":{"$ref":"#/definitions/PluginConfig"},"type":"array"},"userId":{"description":"用户ID","type":"string"},"user_profile":{"$ref":"#/definitions/UserProfile"},"version":{"format":"int64","type":"integer"}},"required":["inputs"],"type":"object"},"WorkflowRunRsp":{"description":"agent 非流式运行结果","properties":{"conversation_id":{"description":"会话id","type":"string"},"end_time":{"description":"结束时间","format":"int64","type":"integer"},"error_code":{"description":"会话id","type":"string"},"error_message":{"description":"会话id","type":"string"},"events":{"items":{"$ref":"#/definitions/WorkflowRunStreamRsp"},"type":"array"},"messages":{"items":{"$ref":"#/definitions/NodeMessage"},"type":"array"},"metadata":{"additionalProperties":{"type":"object"},"type":"object"},"node_info":{"items":{"$ref":"#/definitions/NodeRunInfo"},"type":"array"},"outputs":{"additionalProperties":{"type":"object"},"type":"object"},"start_time":{"description":"开始时间","format":"int64","type":"integer"},"status":{"$ref":"#/definitions/Status"}},"type":"object"},"WorkflowRunStreamRsp":{"description":"工作流执行接口流式响应体","properties":{"conversation_id":{"description":"执行的conversation_id","maxLength":32,"type":"string"},"createdTime":{"description":"事件发生时间","format":"int64","type":"integer"},"data":{"description":"类型说明:1. node_started,node_finished,node_wait data使用NodeInfo对象 2. workflow_started, workflow_finished  data使用 WorkflowInfo对象 3. text_chunk使用对象TextChunk","type":"object"},"event":{"description":"事件类型:1、workflow_started 2、node_started 3、node_wait 4、node_finished 5、workflow_finished 6、text_chunk :流式输出到对话框的信息","type":"string"}},"type":"object"}},"description":null,"group_id":"da9676f02c9840ef99327ebcb7e87a6e","host":"versatile.cn-north-4.myhuaweicloud.com","id":"5a4bb9ae233c402fb058e248226bcbfe","info_version":"v1","method":"post","name":"RunWorkflow","parameters":{"conversationId":{"description":"**参数解释**:\n会话ID,历史对话记忆功能基于同一个会话\n\n**取值范围**:\n由英文,数字,“-”,“_”组成,不超过64位字符。","in":"path","maxLength":64,"name":"conversation_id","pattern":"^[a-zA-Z0-9_-]+$","required":true,"type":"string"},"projectId":{"description":"**参数解释**:\n当前租户项目ID。\n\n**取值范围**:\n由英文,数字,“-”,“_”组成,不超过64位字符。","in":"path","maxLength":64,"name":"project_id","pattern":"^[a-zA-Z0-9_-]+$","required":true,"type":"string"},"stream":{"description":"**参数解释**:\n是否流式响应\n\n**取值范围**:\ntrue,false(不传默认 true,支持流式)","in":"header","name":"stream","required":false,"type":"boolean"},"version":{"description":"**参数解释**:\n运行的智能体/工作流的发布版本号,默认运行最新发布版本\n\n**取值范围**:\n不涉及","in":"query","maxLength":128,"name":"version","required":false,"type":"string"},"workflowId":{"description":"**参数解释**:\n工作流ID\n\n**取值范围**:\n由英文,数字,“-”,“_”组成,不超过64位字符。","in":"path","maxLength":64,"name":"workflow_id","pattern":"^[a-zA-Z0-9_-]+$","required":true,"type":"string"},"workspaceId":{"description":"**参数解释**:\n空间ID,当前资源所属工作空间\n\n**取值范围**:\n由英文,数字,“-”,“_”组成,不超过64位字符。","in":"query","maxLength":64,"name":"workspace_id","required":false,"type":"string"},"xAuthToken":{"description":"**参数解释**:\n用户Token。通过调用IAM服务获取用户Token接口获取(响应消息头中X-Subject-Token的值)。\n\n**取值范围**:\n不涉及。","in":"header","maxLength":15000,"name":"X-Auth-Token","required":true,"type":"string"}},"paths":{"/v1/{project_id}/workflows/{workflow_id}/conversations/{conversation_id}":{"post":{"description":"运行一个工作流,支持流式和非流式","operationId":"RunWorkflow","parameters":[{"$ref":"#/parameters/projectId"},{"$ref":"#/parameters/workflowId"},{"$ref":"#/parameters/conversationId"},{"$ref":"#/parameters/workspaceId"},{"$ref":"#/parameters/version"},{"$ref":"#/parameters/xAuthToken"},{"$ref":"#/parameters/stream"},{"description":"工作流运行入参","in":"body","name":"WorkflowRunReq","required":true,"schema":{"$ref":"#/definitions/WorkflowRunReq"}}],"produces":["application/json"],"responses":{"200":{"description":"stream 为 true 时返回类型是 SseEmitter, 为 false 时返回类型是 WorkflowRunRsp","schema":{"$ref":"#/definitions/WorkflowRunRsp"}},"400":{"description":"Error response","schema":{"$ref":"#/definitions/ErrorRsp"}},"401":{"description":"Unauthorized 鉴权失败","schema":{"type":"string"}},"403":{"description":"Forbidden 没有操作权限","schema":{"$ref":"#/definitions/ErrorRsp"}},"404":{"description":"Not Found 找不到资源","schema":{"$ref":"#/definitions/ErrorRsp"}},"500":{"description":"Internal Server Error 服务内部错误","schema":{"$ref":"#/definitions/ErrorRsp"}}},"summary":"运行一个工作流","tags":["VersatileRuntime"],"x-is-registered":"Y","x-open-region-cloud":"hc","x-request-examples-1":{"inputs":{"query":"你好"}},"x-request-examples-url-1":"https://{endpoint}/v1/{project_id}/workflows/{workflow_id}/conversations/{conversation_id}","x-support-sdk":"Y"}}},"product_short":"Versatile","region_id":"cn-north-4","schemes":["HTTPS"],"security_definitions":null,"summary":"运行一个工作流","tags":"VersatileRuntime","uri":null,"version":"2.0"}