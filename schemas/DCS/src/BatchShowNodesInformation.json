{"base_path":"/","components":null,"consumes":"[\"application/json;charset=UTF-8\"]","definitions":{"BatchInstanceNodesInfoResp":{"description":"批量查询节点信息响应体","properties":{"count":{"description":"查询结果的实例总数","example":1,"format":"int32","type":"integer"},"instances":{"description":"实例列表。","items":{"$ref":"#/definitions/InstanceNodesInfoResp","type":"object"},"type":"array"}}},"ErrorResponse":{"description":"错误响应体","properties":{"error_code":{"description":"错误码","example":"DCS.4062","maxLength":9,"type":"string"},"error_ext_msg":{"description":"扩展错误信息(暂未使用,赋值为null)","example":null,"maxLength":1024,"type":"string"},"error_msg":{"description":"错误信息","example":"Invalid capacity parameter in the request.","maxLength":1024,"type":"string"}}},"InstanceNodesInfoResp":{"description":"实例信息响应体","properties":{"instance_id":{"description":"实例ID","example":"493c1301-baca-4253-98f8-70b749ac769f","type":"string"},"node_count":{"description":"当前实例节点总数","example":2,"format":"int32","type":"integer"},"nodes":{"description":"节点详情。","items":{"$ref":"#/definitions/NodesInfoResp","type":"object"},"type":"array"}}},"InstanceReplicationDimensionsInfo":{"description":"监控指标维度对象信息","properties":{"name":{"description":"监控维度名称","example":"dcs_cluster_redis_node","format":"String","type":"string"},"value":{"description":"维度取值","format":"String","type":"string"}}},"NodesInfoResp":{"properties":{"az_code":{"description":"可用区code","example":"cn-north-7c","type":"string"},"dimensions":{"description":"副本对应的监控指标维度信息。可用于调用云监控服务的查询监控数据指标相关接口\n- 副本的监控维度为多维度,返回数组中包含两个维度信息。从云监控查询监控数据时,要按多维度传递指标维度参数,才能查询到监控指标值\n- 第一个维度为副本父维度信息\n维度名称为dcs_instance_id,维度值对应副本所在的实例ID\n- 第二个维度,维度名称为dcs_cluster_redis_node,维度值为副本的监控对象ID,与副本ID和节点ID不同。","items":{"$ref":"#/definitions/InstanceReplicationDimensionsInfo","type":"object"},"type":"array"},"group_id":{"description":"分片ID","example":"ace962d1-7841-4e50-9313-c239fd75dee3","type":"string"},"group_name":{"description":"分片名称","example":"group-0","type":"string"},"is_access":{"description":"节点的IP是否可直接访问","example":true,"type":"boolean"},"is_remove_ip":{"description":"是否从只读域名中摘除IP","example":false,"type":"boolean"},"logical_node_id":{"description":"逻辑节点ID","example":"8f997eb512a92834bf5914be52ca8919","type":"string"},"name":{"description":"节点名称","example":"(replica)192.168.0.178","type":"string"},"node_id":{"description":"节点ID","example":"8a2c26c17f4d6516017f4d7b77940030","type":"string"},"node_ip":{"description":"节点的IP","example":"192.168.0.178","type":"string"},"node_port":{"description":"节点的port","example":"6379","type":"string"},"node_role":{"description":"节点角色,所有值如下:\n- redis-server:Redis server节点。\n- redis-proxy:proxy节点。","enum":["redis-server","redis-proxy"],"example":"redis-server","type":"string"},"node_type":{"description":"节点主从角色:\n- master:主\n- slave:从\n- proxy: proxy实例节点角色为\"proxy\"","enum":["master","slave","proxy"],"example":"slave","type":"string"},"priority_weight":{"description":"节点权重","example":100,"format":"int32","type":"integer"},"replication_id":{"description":"副本id","example":"b4468cb1-4f75-4866-a49d-86959acc0c9c","type":"string"},"status":{"description":"节点状态,所有值如下:\n- Creating:创建中。\n- Active:运行中。\n- Inactive:故障。\n- Deleting:删除中。\n- AddSharding:添加分片中。","enum":["Creating","Active","Inactive","Deleting","AddSharding"],"example":"Active","type":"string"}}}},"description":null,"group_id":"6d1f519281c6497eba6cbfcc3b6d06e5","host":"dcs.cn-north-4.myhuaweicloud.com","id":"203b0c8d23f741808c4b5a85c4fb166f","info_version":"v2","method":"get","name":"BatchShowNodesInformation","parameters":{},"paths":{"/v2/{project_id}/instances-logical-nodes":{"get":{"description":"批量查询指定项目所有实例的节点信息、有效实例个数及节点个数。\n创建中实例不返回节点信息。\n仅支持Redis4.0和Redis5.0实例查询","operationId":"BatchShowNodesInformation","parameters":[{"description":"项目ID","in":"path","name":"project_id","required":true,"type":"string","x-example":"666486c2d9b948c1bbea57e714d744fa"},{"description":"偏移量,表示从此偏移量开始查询,offset大于等于0。","format":"int32","in":"query","name":"offset","type":"integer","x-example":1},{"description":"每页显示的条目数量,当前最大值为100。若不设置该参数,则为10。","format":"int32","in":"query","name":"limit","type":"integer","x-example":10}],"responses":{"200":{"description":"查询节点信息成功","examples":{"application/json":{"count":1,"instances":[{"instance_id":"b4468cb1-4f75-4866-a49d-86959acc0c9c","node_count":2,"nodes":[{"az_code":"cn-north-7c","dimensions":[{"name":"dcs_instance_id","value":"caf2d19f-7783-44b0-be46-8c9da3ef1e94"},{"name":"dcs_cluster_redis_node","value":"8263dc69629c5b2d840e9816fa9c6200"}],"group_id":"ace962d1-7841-4e50-9313-c239fd75dee3","group_name":"group-0","is_access":true,"is_remove_ip":false,"logical_node_id":"8f997eb512a92834bf5914be52ca8919","name":"(replica)192.168.0.178","node_id":"8a2c26c17f4d6516017f4d7b77940030","node_ip":"192.168.0.178","node_port":"6379","node_role":"redis-server","node_type":"slave","priority_weight":100,"replication_id":"e40aa09e-03c2-4319-86eb-5ef4ca637544","status":"Active"}]}]}},"schema":{"$ref":"#/definitions/BatchInstanceNodesInfoResp"}},"400":{"description":"非法请求","examples":{"application/json":{"error_code":"DCS.4800","error_msg":"Invalid offset in the request."}},"schema":{"$ref":"#/definitions/ErrorResponse"}},"500":{"description":"内部服务错误","examples":{"application/json":{"error_code":"DCS.5000","error_msg":"Internal service error."}},"schema":{"$ref":"#/definitions/ErrorResponse"}}},"summary":"批量查询实例节点信息","tags":["分片与副本"],"x-constraint":"仅支持Redis4.0和Redis5.0实例查询","x-hybridcloud":true,"x-is-registered":"Y","x-name":"批量查询实例节点信息","x-open-region-cloud":"hc,hk,otc,ocb,sbc,g42,tm,ctc,cmc","x-request-examples-url-1":"GET https://{dcs_endpoint}/v2/{project_id}/instances-logical-nodes?offset={offset}&limit={limit}","x-scope":"","x-support-sdk":"Y"}}},"product_short":"DCS","region_id":"cn-north-4","schemes":["HTTPS"],"security_definitions":null,"summary":"批量查询实例节点信息","tags":"分片与副本","uri":null,"version":"2.0"}