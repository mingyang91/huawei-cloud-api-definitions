{"base_path":"/","components":null,"consumes":"[\"application/json;charset=UTF-8\"]","definitions":{"ConfigMigrationInstanceBody":{"description":"迁移任务实例信息","properties":{"addrs":{"description":"Redis实例地址。(Redis类型为自建Redis时必须填写)。","example":"192.168.69.111:6379","type":"string"},"id":{"description":"Redis实例ID。(Redis类型为云服务Redis时必须填写)","example":"b9adffff-bf37-46c5-8648-7d4be47bef42","type":"string"},"password":{"description":"Redis密码,如果设置了密码,则必须填写。","example":"xxxxxx","type":"string"}}},"CreateMigrateTaskResponse":{"description":"创建数据迁移任务响应体","properties":{"id":{"description":"迁移任务ID。","example":"ff8080816e255ad4016e2682e0b700a5","type":"string"},"name":{"description":"迁移任务名称。","example":"dcs-migration","type":"string"},"status":{"description":"迁移任务状态,这个字段的值包括:SUCCESS, FAILED, MIGRATING,TERMINATED","enum":["SUCCESS","FAILED","MIGRATING","TERMINATED"],"example":"MIGRATING","type":"string"}}},"ErrorResponse":{"description":"错误响应体","properties":{"error_code":{"description":"错误码","example":"DCS.4062","maxLength":9,"type":"string"},"error_ext_msg":{"description":"扩展错误信息(暂未使用,赋值为null)","example":null,"maxLength":1024,"type":"string"},"error_msg":{"description":"错误信息","example":"Invalid capacity parameter in the request.","maxLength":1024,"type":"string"}}},"SetOnlineMigrationTaskBody":{"description":"配置在线数据迁移任务结构体","properties":{"bandwidth_limit_mb":{"description":"带宽限制,当迁移方式为增量迁移时,为保证业务正常运行,您可以启用带宽限制功能,当数据同步速度达到带宽限制时,将限制同步速度的继续增长。 -限制为MB/s -取值范围:1-10,241(大于0小于10,241的整数)","example":5,"type":"string"},"migration_method":{"description":"迁移方式,包括全量迁移和增量迁移两种类型。\n- 全量迁移:该模式为Redis的一次性迁移,适用于可中断业务的迁移场景。\n  全量迁移过程中,如果源Redis有数据更新,这部分更新数据不会被迁移到目标Redis。\n- 增量迁移:该模式为Redis的持续性迁移,适用于对业务中断敏感的迁移场景。\n  增量迁移阶段通过解析日志等技术, 持续保持源Redis和目标端Redis的数据一致。\n取值范围:\n- full_amount_migration:表示全量迁移。\n- incremental_migration:表示增量迁移。","enum":["full_amount_migration","incremental_migration"],"example":"full_amount_migration","type":"string"},"resume_mode":{"description":"自动重连,根据参数决定是否自动重连。\n自动重连模式在遇到网络等异常情况时,会无限自动重试。\n自动重连模式在无法进行增量同步时,会触发全量同步,增加带宽占用,请谨慎选择。\n取值范围:\n- auto:自动重连。\n- manual:手动重连。","enum":["auto","manual"],"example":"auto","type":"string"},"source_instance":{"$ref":"#/definitions/ConfigMigrationInstanceBody","description":"表示源Redis信息。","type":"object"},"target_instance":{"$ref":"#/definitions/ConfigMigrationInstanceBody","description":"表示目标Redis信息。","type":"object"}},"required":["migration_method","resume_mode","source_instance","target_instance"]}},"description":null,"group_id":"6d1f519281c6497eba6cbfcc3b6d06e5","host":"dcs.cn-north-4.myhuaweicloud.com","id":"dc192d875be944a08658694b4b6541e4","info_version":"v2","method":"post","name":"SetOnlineMigrationTask","parameters":{},"paths":{"/v2/{project_id}/migration/{task_id}/task":{"post":{"description":"配置在线数据迁移任务。","operationId":"SetOnlineMigrationTask","parameters":[{"description":"项目ID。","in":"path","name":"project_id","required":true,"type":"string"},{"description":"在线迁移任务ID。","in":"path","name":"task_id","required":true,"type":"string"},{"description":"配置在线数据迁移任务请求体","in":"body","name":"SetOnlineMigrationTaskRequestBody","required":true,"schema":{"$ref":"#/definitions/SetOnlineMigrationTaskBody"}}],"responses":{"200":{"description":"配置在线数据迁移任务成功。","examples":{"application/json":{"id":"90754308-a156-406f-a837-8f852f38a646","name":"dcs-migration-1db7","status":"FULLMIGRATING"}},"schema":{"$ref":"#/definitions/CreateMigrateTaskResponse"}},"400":{"description":"非法请求","schema":{"$ref":"#/definitions/ErrorResponse"}},"401":{"description":"认证信息非法","schema":{"$ref":"#/definitions/ErrorResponse"}},"403":{"description":"请求被拒绝访问。","schema":{"$ref":"#/definitions/ErrorResponse"}},"404":{"description":"所请求的资源不存在。","schema":{"$ref":"#/definitions/ErrorResponse"}},"500":{"description":"内部服务错误","schema":{"$ref":"#/definitions/ErrorResponse"}}},"summary":"配置在线数据迁移任务","tags":["数据迁移"],"x-constraint":"","x-is-registered":"Y","x-name":"配置在线数据迁移任务","x-open-region-cloud":"hc,hk,otc,ocb,sbc,g42,tm,ctc,cmc","x-request-examples-1":{"bandwidth_limit_mb":123,"migration_method":"incremental_migration","resume_mode":"auto","source_instance":{"addrs":"192.168.1.1:6379,192.168.0.0:6379","id":null,"password":"xxxxxx"},"target_instance":{"addrs":null,"id":"cf4a05df-1c38-47c5-bb5a-0a7b3673b3bd","password":null}},"x-request-examples-description":"配置在线迁移任务","x-request-examples-url-1":"POST https://{dcs_endpoint}/v2/{project_id}/migration/{task_id}/task","x-scope":"","x-support-sdk":"Y"}}},"product_short":"DCS","region_id":"cn-north-4","schemes":["HTTPS"],"security_definitions":null,"summary":"配置在线数据迁移任务","tags":"数据迁移","uri":null,"version":"2.0"}