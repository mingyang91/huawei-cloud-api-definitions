{"base_path":"/","components":null,"consumes":"[\"application/json;charset=UTF-8\"]","definitions":{"BackupPlan":{"properties":{"backup_at":{"description":"每周的周几开始备份,取值1-7,1代表周一,7代表周日。","items":{"example":"1 2 3 4 5 6 7","format":"int32","type":"integer"},"type":"array"},"begin_at":{"description":"备份执行时间,“00:00-01:00”代表0点开始执行备份。","example":"16:00-17:00","type":"string"},"period_type":{"description":"备份周期类型,目前支持“weekly”。","example":"weekly","type":"string"},"timezone_offset":{"description":"备份的时区。取值为-1200 ~+1200之间的时区。若为空则默认使用DCS-Server节点的当前时区。","example":"+0800","type":"string"}},"required":["begin_at","period_type","backup_at"],"type":"object"},"BackupPolicy":{"properties":{"backup_type":{"description":"备份类型。\n- auto:自动备份\n- manual:手动备份","example":"auto","type":"string"},"periodical_backup_plan":{"$ref":"#/definitions/BackupPlan","description":"备份计划,当backup_type设置为auto时,该参数为必填。","type":"object"},"save_days":{"description":"当backup_type设置为auto时,该参数为必填。\n保留天数,单位:天,取值范围:1-7。","example":1,"format":"int32","type":"integer"}},"required":["backup_type"],"type":"object"},"BssParam":{"properties":{"charging_mode":{"default":"postPaid","description":"功能说明:付费方式(预付费、按需付费;预付费,即包周期付费)。\n取值范围:\n- prePaid:预付费,即包年包月;\n- postPaid:后付费,即按需付费;\n默认值是postPaid。\n后付费的场景下,bss_param参数的其他字段都会被忽略。","enum":["prePaid","postPaid"],"example":"prePaid","type":"string"},"is_auto_pay":{"description":"功能说明:下单订购后,是否自动从客户的账户中支付;默认是“不自动支付” 。\n\n取值范围:\n- true:是(自动支付,从账户余额自动扣费)\n- false:否(默认值,只提交订单不支付,需要客户手动去支付)\n\n约束:\n自动支付时,只能使用账户的现金支付;如果要使用代金券,请选择不自动支付,然后在用户费用中心,选择代金券支付。\n\n**如果没有设置成自动支付,即设置为false时,在创建实例之后,实例状态为“支付中”,用户必须在“费用中心 > 我的订单”,完成订单支付,否则订单一直在支付中,实例没有创建成功**。","enum":["true","false"],"example":true,"type":"string"},"is_auto_renew":{"default":"false","description":"当选择包年包月时,该字段为必选,表示是否自动续订资源。\n取值范围:\n- false:不自动续订;\n- true:自动续订;\n默认值为:false\n约束:\n如果设置为自动续订,到期后,会自动续订一个月(自动续订时间后续可能会变化),详情可联系客服咨询。","enum":["true","false"],"example":false,"type":"string"},"period_num":{"description":"功能说明:订购周期数\n取值范围:(后续会随运营策略变化)\n- period_type为month时,为[1,9],\n- period_type为year时,为[1,3]\n\n约束:同period_type约束。","example":1,"format":"int32","type":"integer"},"period_type":{"description":"当选择包年包月时,该字段为必选,表示订购资源的周期类型。\n\n取值范围如下:\n- month:表示包月\n- year:表示包年","enum":["month","year"],"example":"month","type":"string"}},"required":["charging_mode"]},"CreateInstanceBody":{"properties":{"access_user":{"description":"当缓存类型为Redis时,则不需要设置,保持为空即可。\n\n当缓存引擎为Memcached,且“no_password_access”为“false”时才需要设置,表示通过密码认证访问缓存实例的认证用户名。\n\n由英文字符开头,只能由英文字母、数字、中划线和下划线组成,长度为1~64的字符。\n>\n  - 当缓存引擎为Memcached时,该参数为可选项。\n  - 当缓存引擎为Redis时,该参数不需要设置。","example":"","type":"string"},"az_codes":{"description":"创建缓存节点到指定且有资源的可用区Code。创建缓存节点到指定且有资源的可用区Code。具体查询方法,请参考[查询可用区信息](https://support.huaweicloud.com/api-dcs/ListAvailableZones.html),在查询时,请注意查看该可用区是否有资源。\n\n如果是创建主备、Proxy集群、Cluster集群实例,支持跨可用区部署,可以为备节点指定备可用区。在为节点指定可用区时,用逗号分隔开,具体请查看示例。","items":{"example":"12c47a78666b4e438cd0c692b9860387","type":"string"},"type":"array"},"bss_param":{"$ref":"#/definitions/BssParam","description":"表示包周期计费模式的相关参数。如果为空,则默认计费模式为按需计费;否则是包周期方式。","type":"object"},"capacity":{"description":"缓存容量(G Byte)\n- Redis3.0:单机和主备类型实例取值:2、4、8、16、32、64。Proxy集群实例规格支持64、128、256、512和1024。\n- Redis4.0和Redis5.0:单机和主备类型实例取值:0.125、0.25、0.5、1、2、4、8、16、32、64。Cluster集群实例规格支持24、32、48、64、96、128、192、256、384、512、768、1024。\n- Memcached:单机和主备类型实例取值:2、4、8、16、32、64。","example":2,"format":"float","type":"number"},"description":{"description":"实例的描述信息。\n\n长度不超过1024的字符串。\n> \\与\"在json报文中属于特殊字符,如果参数值中需要显示\\或者\"字符,请在字符前增加转义字符\\,比如\\\\或者\\\"。","example":"Test","type":"string"},"enable_publicip":{"default":false,"description":"Redis缓存实例是否开启公网访问功能。\n- true:开启\n- false:不开启","example":false,"type":"boolean"},"enable_ssl":{"description":"Redis缓存实例开启公网访问功能时,是否选择支持ssl。\n- true:开启\n- false:不开启","example":false,"type":"boolean"},"engine":{"description":"缓存引擎:Redis和Memcached。","example":"Redis","type":"string"},"engine_version":{"description":"缓存版本。\n当缓存引擎为Redis时,取值为4.0及以上。","example":"3.0","type":"string"},"enterprise_project_id":{"description":"企业项目ID。","example":"dcs-APITest","type":"string"},"enterprise_project_name":{"description":"企业项目名称。","example":"dcs-APITest","type":"string"},"instance_backup_policy":{"$ref":"#/definitions/BackupPolicy","description":"备份策略,实例类型为主备和集群时支持。","type":"object"},"instance_num":{"default":1,"description":"表示批量创建缓存实例时,购买的实例个数。仅Redis和Memcached实例支持批量创建。\n\n默认值:1\n\n取值范围:1-100","example":1,"format":"int32","type":"integer"},"maintain_begin":{"description":"维护时间窗开始时间,为UTC时间,格式为HH:mm:ss\n- 维护时间窗开始和结束时间必须为指定的时间段,可参考[查询维护时间窗时间段](https://support.huaweicloud.com/api-dcs/ListMaintenanceWindows.html)获取。\n- 开始时间必须为22:00:00、02:00:00、06:00:00、10:00:00、14:00:00和18:00:00。\n- 该参数不能单独为空,若该值为空,则结束时间也为空。系统分配一个默认开始时间02:00:00。","example":"02:00:00","type":"string"},"maintain_end":{"description":"维护时间窗结束时间,为UTC时间,格式为HH:mm:ss。\n- 维护时间窗开始和结束时间必须为指定的时间段,可参考[查询维护时间窗时间段](https://support.huaweicloud.com/api-dcs/ListMaintenanceWindows.html)获取。\n- 结束时间在开始时间基础上加四个小时,即当开始时间为22:00:00时,结束时间为02:00:00。\n- 该参数不能单独为空,若该值为空,则开始时间也为空,系统分配一个默认结束时间06:00:00。","example":"06:00:00","type":"string"},"name":{"description":"实例名称。\n\n由英文字符开头,只能由英文字母、数字、中划线和下划线组成。\n\n创建单个实例时,名称长度为4到64位的字符串。批量创建实例时,名称长度为4到56位的字符串,且实例名称格式为“自定义名称-n”,其中n从000开始,依次递增。例如,批量创建两个实例,自定义名称为dcs_demo,则两个实例的名称为dcs_demo-000和dcs_demo-001。","example":"dcs-APITest","type":"string"},"no_password_access":{"default":false,"description":"是否允许免密码访问缓存实例。\n- true:该实例无需密码即可访问。\n- false:该实例必须通过密码认证才能访问。\n若未配置该参数则默认值为“false”。","example":false,"type":"boolean"},"password":{"description":"缓存实例的认证信息\n> 当“no_password_access”配置为“false”或未配置时,请求消息中须包含password参数。\nRedis类型的缓存实例密码复杂度要求:\n- 输入长度为8到32位的字符串。\n- 新密码不能与旧密码相同。\n- 必须包含如下四种字符中的三种组合:\n  - 小写字母\n  - 大写字母\n  - 数字\n  - 特殊字符包括(`~!@#$^&*()-_=+\\|{}:'\",<.>/?)","example":"********","type":"string"},"port":{"description":"实例自定义端口。只有创建Redis4.0和Redis5.0实例才支持自定义端口,Redis3.0和Memcached实例不支持。\n\n创建Redis4.0和Redis5.0实例,如果没发送该参数或该参数为空,表示实例使用默认端口6379。如果自定义端口,端口范围为1~65535的任意数字。","example":6379,"type":"integer"},"private_ip":{"description":"创建缓存实例手动指定的IP地址,支持Redis和Memcached。","example":"192.168.0.133","type":"string"},"publicip_id":{"default":"false","description":"Redis缓存实例绑定的弹性IP地址的id。\n\n如果开启了公网访问功能(即enable_publicip为true),该字段为必选。","example":"","type":"string"},"rename_commands":{"description":"支持自定义重命名高危命令。只有创建Redis4.0和Redis5.0实例才支持重命名高危命令,Redis3.0和Memcached实例不支持。\n\n创建Redis4.0和Redis5.0实例,如果没发送该参数或该参数为空,表示没有需要重命名的命令。当前支持重命名的高危命令有command、keys、flushdb、flushall和hgetall,其他命令暂不支持重命名。","type":"object"},"security_group_id":{"description":"指定实例所属的安全组。\n\n当engine为Redis且engine_version为3.0时,或engine为Memcached时,该参数为必选。Redis3.0和Memcached实例支持安全组访问控制。\n\n当engine为Redis且engine_version为4.0和5.0时,该参数为可选。Redis4.0和Redis5.0版本实例不支持安全组控制访问,只支持白名单控制。\n\n获取方法如下:\n- 方法1:登录虚拟私有云服务的控制台界面,在安全组的详情页面查找安全组ID。\n- 方法2:通过虚拟私有云服务的API接口查询,具体操作可参考[查询安全组列表](https://support.huaweicloud.com/api-vpc/vpc_sg01_0002.html)。","example":"4b95a790-5cfc-463d-8de5-42199e55371c","type":"string"},"spec_code":{"description":"产品规格编码。具体查询方法如下:\n\n- 方法一:查询产品介绍中的[实例规格](https://support.huaweicloud.com/productdesc-dcs/dcs-pd-0522002.html)\n- 方法二:登录分布式缓存的控制台界面,点击购买缓存实例,查找对应的实例规格名称\n- 方法三:调用[查询产品规格](https://support.huaweicloud.com/api-dcs/ListFlavors.html)接口查询。","example":"redis.single.au1.large.1","type":"string"},"spec_param":{"$ref":"#/definitions/SpecParam","description":"**参数解释**:\n规格参数,创建spec_type为node类型的线性规格需要填写该参数。\n**约束限制**:\n不涉及。"},"subnet_id":{"description":"子网的网络ID。\n\n获取方法如下:\n- 方法1:登录虚拟私有云服务的控制台界面,单击VPC下的子网,进入子网详情页面,查找网络ID。\n- 方法2:通过虚拟私有云服务的API接口查询,具体操作可参考[查询子网列表](https://support.huaweicloud.com/api-vpc/vpc_subnet01_0003.html)。","example":"a3bd29e4-d5bc-414c-a79a-1f35ee4ead88","type":"string"},"tags":{"description":"实例标签键值。","items":{"$ref":"#/definitions/ResourceTag","type":"object"},"type":"array"},"template_id":{"description":"参数模板ID","example":"b3ecc9c7-1133-4c47-a06a-21366e227d61","type":"string"},"vpc_id":{"description":"虚拟私有云ID。\n\n获取方法如下:\n  - 方法1:登录虚拟私有云服务的控制台界面,在虚拟私有云的详情页面查找VPC ID。\n  - 方法2:通过虚拟私有云服务的API接口查询,具体操作可参考[查询VPC列表](https://support.huaweicloud.com/api-vpc/vpc_api01_0003.html)。","example":"0402ea19-5457-4032-9d1b-eb48b98f6c66","type":"string"}},"required":["name","engine","capacity","vpc_id","subnet_id","az_codes","spec_code"]},"CreateInstanceResp":{"properties":{"instances":{"description":"缓存实例ID和名称,如果批量创建实例,则会返回多个。","items":{"$ref":"#/definitions/Instances","type":"object"},"type":"array"},"order_id":{"description":"订单ID,仅在创建包周期实例时返回。","example":"CS2005271528ZYJH2","type":"string","x-open-region-cloud":"hws,ctc,cmcc"}}},"Instances":{"properties":{"instance_id":{"description":"缓存实例ID。","example":"3c49fd6b-fc7c-419e-9644-b6cce008653f","type":"string"},"instance_name":{"description":"缓存实例名称。","example":"dcs-test005","type":"string"}}},"ResourceTag":{"properties":{"key":{"description":"标签键\n- 不能为空。\n- 对于同一资源键值唯一。\n- 长度不超过36个字符。\n- 标签的键必须唯一且输入不能为空。","example":"key1","type":"string"},"value":{"description":"标签值\n- action为create时必选。action为delete时非必选。\n- 长度不超过43个字符。","example":"value1","type":"string"}},"required":["key"],"type":"object"},"SpecParam":{"properties":{"cache_mode":{"description":"副本数 **参数解释**: 实例类型。 **约束限制**: 不涉及。 **取值范围**: 1.ha:主备类型 2.single:单机类型 3.ha_rw_split:读写分离类型 4.proxy:proxy集群类型 5.cluster:cluster集群类型 **默认取值**: 不涉及。","type":"string"},"replica_count":{"description":"副本数 **参数解释**: 实例副本数。 **约束限制**: 不涉及。 **取值范围**: 1-10。 **默认取值**: 不涉及。","format":"int32","type":"integer"},"sharding_count":{"description":"**参数解释**:\n实例分片数。\n**约束限制**:\n不涉及。\n**取值范围**:\n1-128。\n**默认取值**:\n不涉及。","format":"int32","type":"integer"}},"type":"object"}},"description":null,"group_id":"6d1f519281c6497eba6cbfcc3b6d06e5","host":"dcs.cn-north-4.myhuaweicloud.com","id":"551e03fdf5f0436690205678fab006f9","info_version":"v2","method":"post","name":"CreateInstance","parameters":{},"paths":{"/v2/{project_id}/instances":{"post":{"description":"创建缓存实例,该接口创建的缓存实例支持按需计费和包周期两种方式。","operationId":"CreateInstance","parameters":[{"description":"项目ID","in":"path","name":"project_id","required":true,"type":"string","x-example":"666486c2d9b948c1bbea57e714d744fa"},{"description":"This is a auto create BodyParameter","in":"body","name":"CreateInstanceRequestBody","required":true,"schema":{"$ref":"#/definitions/CreateInstanceBody"}}],"responses":{"200":{"description":"创建缓存实例成功。","examples":{"application/json":{"instances":[{"instance_id":"3c49fd6b-fc7c-419e-9644-b6cce008653f","instance_name":"dcs-test005"}]},"application/json-1":{"instances":[{"instance_id":"77284d69-cd51-4bf1-aa30-2e60f055800c","instance_name":"dcs-APITest1"}],"order_id":"CS2005091653L2DAM"}},"schema":{"$ref":"#/definitions/CreateInstanceResp"}},"400":{"description":"非法请求。"},"401":{"description":"认证信息非法。"},"403":{"description":"请求被拒绝访问。"},"404":{"description":"所请求的资源不存在。"},"500":{"description":"内部服务错误"}},"summary":"创建缓存实例","tags":["生命周期管理"],"x-constraint":"","x-is-registered":"Y","x-name":"创建缓存实例","x-produc-type":"dcs","x-request-examples-1":{"access_user":"","az_codes":["cn-north-4a"],"capacity":2,"description":"Test","enable_publicip":false,"enable_ssl":false,"engine":"Redis","engine_version":3.0,"enterprise_project_id":0,"enterprise_project_name":"default","instance_num":1,"maintain_begin":"02:00:00","maintain_end\"":"06:00:00","name":"dcs-APITest","no_password_access":false,"password":"********","private_ip":"","security_group_id":"4b95a790-5cfc-463d-8de5-42199e55371c","spec_code":"dcs.single_node","subnet_id":"a3bd29e4-d5bc-414c-a79a-1f35ee4ead88","vpc_id":"0402ea19-5457-4032-9d1b-eb48b98f6c66"},"x-request-examples-2":{"access_user":"","az_codes":["cn-north-4a","cn-north-4b"],"capacity":2,"description":"Test","enable_publicip":false,"enable_ssl":false,"engine":"Redis","engine_version":4.0,"enterprise_project_id":0,"enterprise_project_name":"default","instance_num":1,"maintain_begin":"02:00:00","maintain_end\"":"06:00:00","name":"dcs-demo","no_password_access":true,"password":"********","port":4040,"private_ip":"","rename_commands":{"flushall":"flushall001","flushdb":"flushdb001","keys":"keys001"},"security_group_id":"d57fad27-e3e9-43b7-9498-0a698ab63b27","spec_code":"redis.ha.au1.large.2","subnet_id":"7e95c4d6-d7af-424c-a3cf-2be10968fe81","tags":[{"key":"dcs001","value":2},{"key":"dcs003","value":4}],"vpc_id":"c5cd009b-9ba9-41f2-9a26-2b8c3f3ffd39"},"x-request-examples-3":{"access_user":"","az_codes":["cn-north-4a"],"bss_param":{"charging_mode":"prePaid","is_auto_pay":true,"is_auto_renew":false,"period_num":1,"period_type":"month"},"capacity":2,"description":"Test","enable_publicip":false,"enable_ssl":false,"engine":"Redis","engine_version":3.0,"enterprise_project_id":0,"enterprise_project_name":"default","instance_backup_policy":{"backup_type":"auto","periodical_backup_plan":{"backup_at":[1,2,3,4,5,6,7],"begin_at":"16:00-17:00","period_type":"weekly","timezone_offset":"+0800"},"save_days":1},"instance_num":1,"maintain_begin":"02:00:00","maintain_end\"":"06:00:00","name":"dcs-APITest1","no_password_access":false,"password":"********","private_ip":"","publicip_id":"","security_group_id":"4b95a790-5cfc-463d-8de5-42199e55371c","spec_code":"dcs.master_standy","subnet_id":"a3bd29e4-d5bc-414c-a79a-1f35ee4ead88","vpc_id":"0402ea19-5457-4032-9d1b-eb48b98f6c66"},"x-request-examples-4":{"access_user":"","az_codes":["cn-north-4a"],"bss_param":{"charging_mode":"prePaid","is_auto_pay":true,"is_auto_renew":false,"period_num":1,"period_type":"month"},"capacity":64,"description":"Test","enable_publicip":false,"enable_ssl":false,"engine":"Redis","engine_version":3.0,"enterprise_project_id":0,"enterprise_project_name":"default","instance_backup_policy":{"backup_type":"auto","periodical_backup_plan":{"backup_at":[1,2,3,4,5,6,7],"begin_at":"16:00-17:00","period_type":"weekly","timezone_offset":"+0800"},"save_days":1},"instance_num":1,"maintain_begin":"02:00:00","maintain_end\"":"06:00:00","name":"dcs-APITest2","no_password_access":true,"password":"","private_ip":"","publicip_id":"","security_group_id":"4b95a790-5cfc-463d-8de5-42199e55371c","spec_code":"dcs.cluster","subnet_id":"a3bd29e4-d5bc-414c-a79a-1f35ee4ead88","vpc_id":"0402ea19-5457-4032-9d1b-eb48b98f6c66"},"x-request-examples-5":{"access_user":"","az_codes":["cn-north-4a"],"capacity":2,"description":"Test","enable_publicip":false,"enable_ssl":false,"engine":"Memcached","engine_version":"","enterprise_project_id":0,"enterprise_project_name":"default","instance_backup_policy":{"backup_type":"auto","periodical_backup_plan":{"backup_at":[1,2,3,4,5,6,7],"begin_at":"16:00-17:00","period_type":"weekly","timezone_offset":"+0800"},"save_days":1},"instance_num":1,"maintain_begin":"02:00:00","maintain_end\"":"06:00","name":"dcs-APITest","no_password_access":false,"password":"********","private_ip":"","publicip_id":"","security_group_id":"4b95a790-5cfc-463d-8de5-42199e55371c","spec_code":"dcs.memcached.master_standby","subnet_id":"a3bd29e4-d5bc-414c-a79a-1f35ee4ead88","vpc_id":"0402ea19-5457-4032-9d1b-eb48b98f6c66"},"x-request-examples-6":{"access_user":"","az_codes":["cn-north-4a"],"capacity":2,"description":"Test","enable_publicip":false,"enable_ssl":false,"engine":"Memcached","engine_version":"","enterprise_project_id":0,"enterprise_project_name":"default","instance_backup_policy":{"backup_type":"auto","periodical_backup_plan":{"backup_at":[1,2,3,4,5,6,7],"begin_at":"16:00-17:00","period_type":"weekly","timezone_offset":"+0800"},"save_days":1},"instance_num":1,"maintain_begin":"02:00:00","maintain_end\"":"06:00","name":"dcs-APITest","no_password_access":false,"password":"********","private_ip":"","publicip_id":"","security_group_id":"4b95a790-5cfc-463d-8de5-42199e55371c","spec_code":"dcs.memcached.single_node","subnet_id":"a3bd29e4-d5bc-414c-a79a-1f35ee4ead88","vpc_id":"0402ea19-5457-4032-9d1b-eb48b98f6c66"},"x-request-examples-description-1":"创建Redis实例","x-request-examples-description-2":"创建按需的Redis主备实例(设置了标签、自定义端口、重命名高危命令、跨可用区部署)","x-request-examples-description-3":"创建包周期的Redis主备实例(设置了备份策略)","x-request-examples-description-4":"创建包周期的Redis集群实例(设置了备份策略)","x-request-examples-description-5":"创建Memcached主备实例(设置了备份策略)","x-request-examples-description-6":"创建Memcached单机实例","x-request-examples-url-1":"POST https://{dcs_endpoint}/v2/{project_id}/instances","x-scope":"","x-support-sdk":"Y"}}},"product_short":"DCS","region_id":"cn-north-4","schemes":["HTTPS"],"security_definitions":null,"summary":"创建缓存实例","tags":"生命周期管理","uri":null,"version":"2.0"}