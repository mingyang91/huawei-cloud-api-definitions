{"base_path":"/","components":null,"consumes":"[\"application/json;charset=UTF-8\"]","definitions":{"BackupFilesBody":{"description":"备份文件列表的结构体","properties":{"backup_id":{"description":"备份记录ID,数据来源为备份记录时必须填写","type":"string"},"bucket_name":{"description":"OBS桶名。","type":"string"},"file_source":{"description":"数据来源,当前仅支持OBS桶方式,取值为:self_build_obs。","enum":["self_build_obs","backup_record"],"type":"string"},"files":{"description":"导入的备份文件文件列表。","items":{"$ref":"#/definitions/Files","type":"object"},"type":"array"}},"required":["bucket_name","files"]},"CreateMigrateTaskResponse":{"description":"创建数据迁移任务响应体","properties":{"id":{"description":"迁移任务ID。","example":"ff8080816e255ad4016e2682e0b700a5","type":"string"},"name":{"description":"迁移任务名称。","example":"dcs-migration","type":"string"},"status":{"description":"迁移任务状态,这个字段的值包括:SUCCESS, FAILED, MIGRATING,TERMINATED","enum":["SUCCESS","FAILED","MIGRATING","TERMINATED"],"example":"MIGRATING","type":"string"}}},"CreateMigrationTaskBody":{"description":"创建数据迁移任务结构体","properties":{"backup_files":{"$ref":"#/definitions/BackupFilesBody","description":"迁移任务类型为备份文件导入场景时的备份文件列表。","type":"object"},"description":{"description":"迁移任务描述。","example":"创建数据迁移任务","type":"string"},"migration_method":{"description":"迁移方式,包括全量迁移和增量迁移两种类型。\n取值范围:\n- full_amount_migration:表示全量迁移。\n- incremental_migration:表示增量迁移。","enum":["full_amount_migration","incremental_migration"],"example":"full_amount_migration","type":"string"},"migration_type":{"description":"迁移任务类型,包括备份文件导入和在线迁移两种类型。\n取值范围:\n- backupfile_import:表示备份文件导入\n- online_migration:表示在线迁移。","enum":["backupfile_import","online_migration"],"example":"online_migration","type":"string"},"network_type":{"description":"迁移任务类型为在线迁移时,表示源Redis和目标Redis联通的网络类型,包括vpc和vpn两种类型。","enum":["vpc","vpn"],"example":"vpc","type":"string"},"source_instance":{"$ref":"#/definitions/SourceInstanceBody","description":"迁移任务类型为在线迁移场景时该参数为必填参数,表示源Redis信息。","type":"object"},"target_instance":{"$ref":"#/definitions/TargetInstanceBody","description":"表示目标Redis信息。","type":"object"},"task_name":{"description":"迁移任务名称。","example":"dcs-migration","type":"string"}},"required":["task_name","migration_type","migration_method","target_instance"]},"Files":{"description":"导入的备份文件文件列表。","properties":{"file_name":{"description":"备份文件名。","type":"string"},"size":{"description":"文件大小(单位:Byte)。","type":"string"},"update_at":{"description":"文件最后修改时间(格式YYYY-MM-DD HH:MM:SS)。","type":"string"}},"required":["file_name"]},"SourceInstanceBody":{"description":"源实例信息。","properties":{"addrs":{"description":"Redis实例名称(source_instance信息中填写)。","example":"172.16.0.116:6379","type":"string"},"db":{"description":"Redis数据库。","type":"string"},"id":{"description":"Redis实例ID。","type":"string"},"ip":{"description":"Redis IP地址。","type":"string"},"name":{"description":"Redis名称。","type":"string"},"password":{"description":"Redis密码,如果设置了密码,则必须填写。","example":"xxxxxx","type":"string"},"port":{"description":"Redis端口。","type":"string"},"proxy_multi_db":{"description":"proxy实例是否开启了多DB。","type":"boolean"},"task_status":{"description":"任务状态。","type":"string"}},"required":["addrs"]},"TargetInstanceBody":{"description":"目标实例信息。","properties":{"addrs":{"description":"Redis实例地址。","type":"string"},"db":{"description":"Redis数据库。","type":"string"},"id":{"description":"Redis实例ID(target_instance信息中必须填写)。","example":"4cd5dbb8-aacd-4603-b817-3e97d48c7a20","type":"string"},"ip":{"description":"Redis IP地址。","type":"string"},"name":{"description":"Redis实例名称(target_instance信息中填写)。","example":"dcs-cdrc","type":"string"},"password":{"description":"Redis密码,如果设置了密码,则必须填写。","example":"xxxxxx","type":"string"},"port":{"description":"Redis端口。","type":"string"},"proxy_multi_db":{"description":"proxy实例是否开启了多DB。","type":"boolean"}},"required":["id"]}},"description":null,"group_id":"6d1f519281c6497eba6cbfcc3b6d06e5","host":"dcs.cn-north-4.myhuaweicloud.com","id":"8af4c4e285bc437b9799be20d51da8f1","info_version":"v2","method":"post","name":"CreateMigrationTask","parameters":{},"paths":{"/v2/{project_id}/migration-task":{"post":{"description":"创建数据迁移任务。","operationId":"CreateMigrationTask","parameters":[{"description":"项目ID。","in":"path","name":"project_id","required":true,"type":"string"},{"description":"This is a auto create BodyParameter","in":"body","name":"CreateMigrationTaskRequestBody","required":true,"schema":{"$ref":"#/definitions/CreateMigrationTaskBody"}}],"responses":{"200":{"description":"创建数据迁移任务成功。","examples":{"application/json":{"id":"8aa6999e71cb638b0171f485f5266ef0","name":"dcs-test","status":"MIGRATING"}},"schema":{"$ref":"#/definitions/CreateMigrateTaskResponse"}},"400":{"description":"非法请求"},"401":{"description":"认证信息非法"},"403":{"description":"请求被拒绝访问。"},"404":{"description":"所请求的资源不存在。"},"500":{"description":"内部服务错误"}},"summary":"创建数据迁移任务","tags":["数据迁移"],"x-apiErrorCodes":[{"errorCode":"DCS.4005","errorDescription":"请求消息体不是JSON格式或字段非法。。","errorDescriptionEn":"","errorMessage":"The message body contains invalid characters or is not in JSON format","httpStatus":400,"solution":"","solutionEn":""},{"errorCode":"DCS.4913","errorDescription":"不支持数据迁移","errorDescriptionEn":"","errorMessage":"Do not support migration","httpStatus":400,"solution":"","solutionEn":""},{"errorCode":"DCS.4800","errorDescription":"请求参数{0}非法。","errorDescriptionEn":"","errorMessage":"Invalid {0} in the request.","httpStatus":400,"solution":"","solutionEn":""},{"errorCode":"DCS.4848","errorDescription":"弹性IP已经被绑定或者无效。","errorDescriptionEn":"","errorMessage":"PublicIp Id is invalid or this publicIp is already bound.","httpStatus":400,"solution":"请检查弹性IP是否合法","solutionEn":""},{"errorCode":"DCS.3022","errorDescription":"实例不存在。","errorDescriptionEn":"","errorMessage":"This DCS instance does not exist.","httpStatus":404,"solution":"实例不存在,请检查实例ID是否合法","solutionEn":""},{"errorCode":"DCS.5000","errorDescription":"内部服务错误。","errorDescriptionEn":"","errorMessage":"Internal service error.","httpStatus":500,"schema":{"$ref":"#/definitions/CreateMigrateTaskResponse"},"solution":"请联系技术支持","solutionEn":""}],"x-constraint":"","x-is-registered":"Y","x-name":"创建数据迁移任务","x-produc-type":"dcs","x-request-examples-1":{"description":"Test","migration_method":"full_amount_migration","migration_type":"online_migration","network_type":"vpc","source_instance":{"addrs":"192.168.1.135:6379","password":"xxxxxx"},"target_instance":{"id":"4cd5dbb8-aacd-4603-b817-3e97d48c7a20","name":"dcs-test"},"task_name":"migration1"},"x-request-examples-description":"创建在线迁移任务","x-request-examples-url-1":"POST https://{dcs_endpoint}/v2/{project_id}/migration-task","x-scope":"","x-support-sdk":"Y"}}},"product_short":"DCS","region_id":"cn-north-4","schemes":["HTTPS"],"security_definitions":null,"summary":"创建数据迁移任务","tags":"数据迁移","uri":null,"version":"2.0"}