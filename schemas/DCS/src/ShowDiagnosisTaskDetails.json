{"base_path":"/","components":null,"consumes":"[\"application/json;charset=UTF-8\"]","definitions":{"CommandTimeTaken":{"description":"命令耗时统计","properties":{"average_usec":{"description":"每次调用平均耗时","format":"double","type":"number"},"calls_sum":{"description":"调用次数","format":"int32","type":"integer"},"command_name":{"description":"命令名称","type":"string"},"per_usec":{"description":"耗时占比","type":"string"},"usec_sum":{"description":"耗时总数","format":"double","type":"number"}},"required":["calls_sum","usec_sum","command_name","per_usec","average_usec"]},"CommandTimeTakenList":{"description":"命令耗时统计列表","properties":{"command_list":{"description":"命令耗时统计","items":{"$ref":"#/definitions/CommandTimeTaken"},"type":"array"},"result":{"description":"命令耗时统计结果","enum":["succeed","failed"],"type":"string"},"total_num":{"description":"执行命令的总次数","format":"int32","type":"integer"},"total_usec_sum":{"description":"执行命令的总耗时","format":"double","type":"number"}},"required":["total_num","total_usec_sum","result","command_list"]},"ConclusionItem":{"description":"诊断结论","properties":{"id":{"description":"结论id","format":"int32","type":"integer"},"params":{"additionalProperties":{"type":"string"},"description":"结论参数","type":"object"}},"required":["id"]},"DiagnosisDimension":{"description":"诊断维度","properties":{"abnormal_num":{"description":"诊断结果为异常的诊断项总数","format":"int32","type":"integer"},"diagnosis_item_list":{"description":"诊断项列表","items":{"$ref":"#/definitions/DiagnosisItem"},"type":"array"},"failed_num":{"description":"诊断失败的诊断项总数","format":"int32","type":"integer"},"name":{"description":"诊断维度名称","enum":["network","storage","load"],"type":"string"}},"required":["name","abnormal_num","failed_num","diagnosis_item_list"]},"DiagnosisItem":{"description":"诊断项","properties":{"advice_ids":{"description":"建议ID列表","items":{"$ref":"#/definitions/ConclusionItem"},"type":"array"},"cause_ids":{"description":"原因ID列表","items":{"$ref":"#/definitions/ConclusionItem"},"type":"array"},"impact_ids":{"description":"影响ID列表","items":{"$ref":"#/definitions/ConclusionItem"},"type":"array"},"name":{"description":"诊断项名称","enum":["connection_num","rx_controlled","persistence","centralized_expiration","inner_memory_fragmentation","time_consuming_commands","hit_ratio","memory_usage","cpu_usage"],"type":"string"},"result":{"description":"诊断结果","enum":["failed","abnormal","normal"],"type":"string"}},"required":["name","result"]},"DiagnosisNodeReport":{"description":"节点诊断报告","properties":{"abnormal_sum":{"description":"诊断结果为异常的诊断项总数","format":"int32","type":"integer"},"az_code":{"description":"节点所在可用区Code","type":"string"},"command_time_taken_list":{"$ref":"#/definitions/CommandTimeTakenList","description":"命令耗时统计列表","type":"object"},"diagnosis_dimension_list":{"description":"诊断维度列表","items":{"$ref":"#/definitions/DiagnosisDimension"},"type":"array"},"failed_sum":{"description":"诊断失败的诊断项总数","format":"int32","type":"integer"},"group_name":{"description":"节点所在分片的名称","type":"string"},"node_ip":{"description":"节点IP。例如:192.168.0.234:6379","type":"string"},"role":{"description":"节点角色","enum":["master","slave"],"type":"string"}},"required":["node_ip","az_code","group_name","abnormal_sum","failed_sum","role","diagnosis_dimension_list","command_time_taken_list"]},"DiagnosisReportResp":{"description":"查询诊断报告返回体","properties":{"abnormal_item_sum":{"description":"诊断结果为异常的诊断项总数","example":1,"format":"int32","type":"integer"},"diagnosis_node_report_list":{"description":"节点诊断报告列表","example":[{"abnormal_sum":1,"az_code":"cn-north-4a","command_time_taken_list":{"command_list":[{"average_usec":0.063,"calls_sum":329,"command_name":"info","per_usec":"68.61%","usec_sum":20.732},{"average_usec":0.001,"calls_sum":1788,"command_name":"ping","per_usec":"5.91%","usec_sum":1.787},{"average_usec":0.013,"calls_sum":2,"command_name":"config","per_usec":"0.08%","usec_sum":0.025},{"average_usec":0.003,"calls_sum":60,"command_name":"slowlog","per_usec":"0.62%","usec_sum":0.186},{"average_usec":0.004,"calls_sum":1764,"command_name":"publish","per_usec":"24.77%","usec_sum":7.485}],"error_code":null,"result":"succeed","total_num":5,"total_usec_sum":30.215},"diagnosis_dimension_list":[{"abnormal_num":0,"diagnosis_item_list":[{"advice_ids":null,"cause_ids":null,"error_code":null,"impact_ids":null,"name":"cpu_usage","result":"normal"},{"advice_ids":null,"cause_ids":null,"error_code":null,"impact_ids":null,"name":"time_consuming_commands","result":"normal"}],"failed_num":0,"name":"load"},{"abnormal_num":1,"diagnosis_item_list":[{"advice_ids":[{"id":4,"params":null}],"cause_ids":[{"id":7,"params":null}],"error_code":null,"impact_ids":[{"id":3,"params":null}],"name":"inner_memory_fragmentation","result":"abnormal"},{"advice_ids":null,"cause_ids":null,"error_code":null,"impact_ids":null,"name":"persistence","result":"normal"},{"advice_ids":null,"cause_ids":null,"error_code":null,"impact_ids":null,"name":"memory_usage","result":"normal"},{"advice_ids":null,"cause_ids":null,"error_code":null,"impact_ids":null,"name":"centralized_expiration","result":"normal"},{"advice_ids":null,"cause_ids":null,"error_code":null,"impact_ids":null,"name":"hit_ratio","result":"normal"}],"failed_num":0,"name":"storage"},{"abnormal_num":0,"diagnosis_item_list":[{"advice_ids":null,"cause_ids":null,"error_code":null,"impact_ids":null,"name":"connection_num","result":"normal"},{"advice_ids":null,"cause_ids":null,"error_code":null,"impact_ids":null,"name":"rx_controlled","result":"normal"}],"failed_num":0,"name":"network"}],"failed_sum":0,"group_name":"group-0","node_ip":"192.168.0.170:6379","role":"master"}],"items":{"$ref":"#/definitions/DiagnosisNodeReport"},"type":"array"},"failed_item_sum":{"description":"诊断失败的诊断项总数","example":0,"format":"int32","type":"integer"}},"required":["abnormal_item_sum","failed_item_sum","diagnosis_node_report_list"]}},"description":null,"group_id":"6d1f519281c6497eba6cbfcc3b6d06e5","host":"dcs.cn-north-4.myhuaweicloud.com","id":"cab68c8d852e4bbc987ca6feac553fe2","info_version":"v2","method":"get","name":"ShowDiagnosisTaskDetails","parameters":{},"paths":{"/v2/{project_id}/diagnosis/{report_id}":{"get":{"description":"通过报告ID查询诊断报告的详细信息。","operationId":"ShowDiagnosisTaskDetails","parameters":[{"description":"项目ID","in":"path","name":"project_id","required":true,"type":"string"},{"description":"诊断报告ID","in":"path","name":"report_id","required":true,"type":"string"}],"responses":{"200":{"description":"查询指定报告成功。","schema":{"$ref":"#/definitions/DiagnosisReportResp"}},"400":{"description":"非法请求。"},"500":{"description":"内部服务错误。"}},"summary":"查询指定诊断报告","tags":["实例诊断"],"x-is-registered":"Y","x-name":"查询指定诊断报告","x-produc-type":"dcs","x-support-sdk":"Y"}}},"product_short":"DCS","region_id":"cn-north-4","schemes":["HTTPS"],"security_definitions":null,"summary":"查询指定诊断报告","tags":"实例诊断","uri":null,"version":"2.0"}