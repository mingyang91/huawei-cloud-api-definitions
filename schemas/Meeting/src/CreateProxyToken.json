{"base_path":"/","components":null,"consumes":"","definitions":{"AuthProxyInfo":{"properties":{"account":{"description":"认证帐号。","example":"01alki06nq413uiaxy60bd3t3sotout1yg2l156axiw4bxg84ako6u9bwvxxv4u5","maxLength":255,"minLength":0,"type":"string"},"authServerType":{"description":"鉴权服务类型。\n* workplace:WeLink代理鉴权\n* oauth2:OAuth2.0鉴权","example":"workplace","maxLength":255,"minLength":1,"type":"string"},"authType":{"description":"鉴权类型。\n* AccountAndPwd:Welink代理鉴权\n* AuthCode:OAuth2.0鉴权","example":"AccountAndPwd","maxLength":255,"minLength":1,"type":"string"},"clientType":{"description":"登录帐号类型。\n* 72:API调用类型","example":5,"type":"integer"},"createTokenType":{"default":0,"description":"是否生成Token。 默认0。\n* 0:生成,用于登录鉴权;\n* 1:不生成。","example":1,"type":"integer"},"credential":{"description":"OAuth2.0时填从鉴权中心获取的临时Code。","example":"b609c27b4a5a440ab1ee5b1b77fcd0bb","maxLength":2048,"minLength":0,"type":"string"},"domain":{"description":"企业域名。OAuth2.0鉴权时需要填写。","example":"huawei.com","maxLength":255,"minLength":0,"type":"string"},"pwd":{"description":"认证密码。Welink代理鉴权时需要填写。","example":"Qdjtufjwr4$4","format":"password","maxLength":255,"minLength":0,"type":"string"},"remark":{"description":"备注信息。","example":"xxxx","maxLength":255,"minLength":0,"type":"string"}},"required":["authServerType","authType","clientType"],"x-subPackage":"dto"},"ProxyTokenDTO":{"description":"代理鉴权信息。","properties":{"accessToken":{"description":"代理鉴权服务器的短token字符串。","type":"string"},"enableRerouting":{"description":"是否开启二次路由。","type":"boolean"},"longAccessToken":{"description":"代理鉴权服务器的长token字符串。","type":"string"},"middleEndInnerUrl":{"description":"中台内网地址。","type":"string"},"middleEndUrl":{"description":"中台地址。","type":"string"},"validPeriod":{"description":"Token有效时长,单位:秒。","format":"int64","type":"integer"}},"required":["accessToken"],"x-subPackage":"dto"},"ReturnCodeDTO":{"description":"错误码。","properties":{"error_code":{"description":"错误码。","example":"USG.206010000","type":"string"},"error_msg":{"description":"错误描述。","example":"User name or password is incorrect","type":"string"},"request_id":{"description":"请求唯一标识。","example":"9655664f10724b398187598a1d5097c3","type":"string"}},"required":["error_code","error_msg"],"x-subPackage":"discard"},"TokenDTO":{"description":"鉴权请求信息。","properties":{"accessToken":{"description":"Access Token字符串。","example":"stb8cyTJFlVdaeCIWXXXX....","type":"string"},"clientType":{"description":"登录帐号类型。\n* 72:API调用类型","example":72,"type":"integer"},"createTime":{"description":"Access Token的创建时间戳,单位:毫秒。","format":"int64","type":"integer"},"daysPwdAvailable":{"description":"密码有效天数。","example":-18171,"type":"integer"},"delayDelete":{"default":false,"description":"是否延时删除状态。","type":"boolean"},"expireTime":{"description":"Access Token的失效时间戳,单位:秒。","example":1577858014,"format":"int64","type":"integer"},"firstLogin":{"default":false,"description":"是否首次登录。\n> 首次登录表示尚未修改过密码。首次登录时,系统会提醒用户需要修改密码。\n默认值:false。","example":true,"type":"boolean"},"forceLoginInd":{"description":"抢占登录标识。\n* 0: 非抢占\n* 1: 抢占","example":null,"type":"integer"},"proxyToken":{"$ref":"#/definitions/ProxyTokenDTO"},"pwdExpired":{"default":false,"description":"密码是否过期,默认值:false。","example":false,"type":"boolean"},"refreshCreateTime":{"description":"Refresh Token的创建时间戳,单位:毫秒。","format":"int64","type":"integer"},"refreshExpireTime":{"description":"Refresh Token的失效时间戳,单位:秒。","format":"int64","type":"integer"},"refreshToken":{"description":"Refresh Token字符串。","type":"string"},"refreshValidPeriod":{"description":"Refresh Token有效时长,单位:秒。","format":"int64","type":"integer"},"tokenIp":{"description":"用户IP。","example":"10.8.0.90","type":"string"},"tokenType":{"description":"Token类型。\n* 0:用户Access Token\n* 1:会控TOKEN\n* 2:一次性TOKEN","type":"integer"},"user":{"$ref":"#/definitions/UserInfo"},"validPeriod":{"description":"Access Token有效时长,单位:秒。","example":82188,"format":"int64","type":"integer"}},"required":["user","accessToken","validPeriod","expireTime","tokenIp","clientType"],"x-subPackage":"dto"},"UserInfo":{"description":"用户鉴权信息。","properties":{"adminType":{"description":"管理员类型。\n* 0:默认管理员\n* 1:普通管理员\n* 2:非管理员,即普通企业成员,userType为2时有效","example":2,"type":"integer"},"alias1":{"description":"用户别名。","example":null,"type":"string"},"appId":{"description":"应用ID。","type":"string"},"cloudUserId":{"description":"华为云帐号ID。","type":"string"},"companyDomain":{"description":"企业域名。","example":null,"type":"string"},"companyId":{"description":"用户归属的企业ID。","example":"c71e568704104ceb89717789692372fa","type":"string"},"corpType":{"description":"企业类型。\n* 0:旗舰版\n* 5:免费版\n* 6:标准版","type":"integer"},"freeUser":{"description":"标识是否是免费试用用户。","type":"boolean"},"grayUser":{"description":"标识是否是灰度用户。","type":"boolean"},"headPictureUrl":{"description":"头像链接。","maxLength":255,"minLength":0,"type":"string"},"isBindPhone":{"description":"标识是否绑定手机。","type":"boolean"},"name":{"description":"用户名称。","example":"张三","type":"string"},"nameEn":{"description":"用户英文名称。","example":"zhangsan","type":"string"},"numberHA1":{"description":"号码对应的HA1。","example":"1ead5e5ce44849bc2718d5cb479c890f","type":"string"},"paidAccount":{"description":"付费用户机机帐号,用于智慧屏登录。","maxLength":255,"minLength":0,"type":"string"},"paidPassword":{"description":"付费用户机机密码,用于智慧屏登录。","maxLength":255,"minLength":0,"type":"string"},"password":{"description":"机机密码,用于智慧屏登录。","maxLength":255,"minLength":0,"type":"string"},"realm":{"description":"本地鉴权。","example":"huawei.com","type":"string","x-annotations":["@JsonIgnore"]},"serviceAccount":{"description":"用户关联的SIP号码。","example":"sip:+99111210334849378@huaweicloud.com","type":"string"},"spId":{"description":"用户所在企业归属的SP ID。","example":"acf9324477ef47a79bb691ee57496513","type":"string"},"status":{"description":"用户状态。\n* 0:正常\n* 1:停用","maximum":7,"minimum":0,"type":"integer"},"thirdAccount":{"description":"第三方的用户帐号。","maxLength":255,"minLength":0,"type":"string"},"tr069Account":{"description":"tr069帐号。","type":"string"},"ucloginAccount":{"description":"华为云会议帐号。","example":"p-53df7b90d6a3410fa75f82e08bfd9181","type":"string"},"userId":{"description":"用户UUID。","example":"689ead28d0a2409985b8f85a167b78fc","type":"string"},"userType":{"description":"用户类型。\n* 1:SP管理用户\n* 2:企业用户\n* 3:免费注册用户\n* 10:企业设备用户\n* 11:匿名用户\n* 12:智慧屏用户\n* 13:IdeaHub用户\n* 14:电子白板(SmartRooms)用户","example":2,"type":"integer"},"visionAccount":{"description":"智慧屏设备ID。","maxLength":255,"minLength":0,"type":"string"},"weLinkUser":{"description":"标识是否是WeLink用户。","type":"boolean"}},"required":["ucloginAccount"],"x-imports":"com.fasterxml.jackson.annotation.JsonIgnore","x-subPackage":"dto"}},"description":null,"group_id":"ad8a7fcbd9b44cae85e4fdbe7e9dda22","host":"api.meeting.huaweicloud.com","id":"91e5ade750d1460582802a3e156b7686","info_version":"v1","method":"post","name":"CreateProxyToken","parameters":{},"paths":{"/v1/usg/acs/auth/proxy":{"post":{"consumes":["application/json"],"description":"该接口使用第三方的帐号进行代理鉴权,鉴权通过后生成一个Access Token。当前支持的第三方代理帐号包括:\n* Welink的帐号和密码\n* 支持OAuth2.0标准的第三方帐号\n> * 当clientType取值为72时,同一个account,同时最多能创建64个Token。比如已经创建了64个Token,并且Token都在有效期内,再用同一个account创建一个Token,前64个Token中最早创建的Token将失效。\n> * 当clientType取值为非72时,同一个account,同时最多能创建1个Token。\n> * Token有效期是12~24小时。","operationId":"CreateProxyToken","parameters":[{"description":"Body的媒体格式。\n* 样例:application/json; charset=UTF-8。","in":"header","name":"Content-Type","required":true,"type":"string","x-example":"application/json; charset=UTF-8","x-notgenerate":true},{"description":"请求requestId,用来标识一路请求,用于问题跟踪定位,建议使用UUID,若不携带,则后台自动生成。","in":"header","name":"X-Request-ID","required":false,"type":"string","x-example":"5162fa32dc7e47afafeee39a72a2eec3","x-notgenerate":true},{"description":"语言参数,默认为中文zh-CN,英文为en-US。","in":"header","name":"Accept-Language","required":false,"type":"string","x-example":"en-US","x-notgenerate":true},{"description":"第三方鉴权信息。","in":"body","name":"authProxyInfo","required":true,"schema":{"$ref":"#/definitions/AuthProxyInfo"}}],"produces":["application/json"],"responses":{"200":{"description":"操作成功。","examples":{"application/json":{"accessToken":"stbc3SRoXXZhsuw4XXXXX.....","clientType":0,"createTime":1599102826754,"daysPwdAvailable":-18172,"delayDelete":false,"expireTime":1577979513,"firstLogin":true,"forceLoginInd":null,"proxyToken":null,"pwdExpired":false,"refreshCreateTime":1599102826754,"refreshExpireTime":1601694826,"refreshToken":"stbYaza5VVRr3IGuLSs6ZvF0lMHHvGO0tQ0f","refreshValidPeriod":2592000,"tokenIp":"10.8.0.90","tokenType":0,"user":{"adminType":2,"alias1":null,"appId":null,"cloudUserId":"76aaaba8a12f4c0a8a43192...","companyDomain":null,"companyId":"f5968fc4f9c14d50905e8e66672dabc6","corpType":0,"freeUser":false,"grayUser":false,"headPictureUrl":null,"isBindPhone":null,"name":"张三","nameEn":null,"numberHA1":"1ead5e5ce44849bc2718d5c....","paidAccount":null,"paidPassword":null,"password":null,"realm":"huaweicloud.com","serviceAccount":"sip:+99111210335819378@huaweicloud.com","spId":"666bd8558e4646e1a7e1a0c99cf898e8","status":0,"thirdAccount":"zhangsan@yourcorp.com","tr069Account":"","ucloginAccount":"p-53df7b9046ae41efa75e82e08bfe9181","userId":"0d5202707123429d876....","userType":2,"visionAccount":null,"weLinkUser":false},"validPeriod":84616}},"schema":{"$ref":"#/definitions/TokenDTO"}},"400":{"description":"参数异常。","schema":{"$ref":"#/definitions/ReturnCodeDTO"}},"401":{"description":"未鉴权或鉴权失败。","schema":{"$ref":"#/definitions/ReturnCodeDTO"}},"412":{"description":"帐号被停用。","schema":{"$ref":"#/definitions/ReturnCodeDTO"}},"423":{"description":"帐号已被锁定。","schema":{"$ref":"#/definitions/ReturnCodeDTO"}},"500":{"description":"服务端异常。","schema":{"$ref":"#/definitions/ReturnCodeDTO"}}},"summary":"代理鉴权","tags":["登录鉴权"],"x-api-type":"open-api","x-apiexplorer-auth":false,"x-imports":"com.huawei.springframework.response.dto.ResultDTO;com.huawei.usg.cloudsso.model.dto.TokenDTO;com.huawei.usg.oms.model.kafka.annotation.*;com.huawei.usg.oms.model.kafka.constants.oplog.*;com.huawei.springframework.om.trace.masker.annotation.*;com.huawei.springframework.om.trace.masker.base.*;","x-is-registered":"Y","x-methodAnnotations":["@OpLogFunction(opObject = OpObjectEnum.LOGIN_LOGOUT, opType = OpTypeEnum.USER_LOGIN)","@RequestMaskRule(type = Type.JSON, rules = {@Rule(path = \"credential\", masker = TokenMasker.class), @Rule(path = \"account\", masker = LoginKeyMasker.class), @Rule(path = \"pwd\", masker = PasswordMasker.class)})","@ResponseMaskRule(type = Type.JSON, rules = {@Rule(path = \"tokenIp\", masker = IpMasker.class), @Rule(path = \"accessToken\", masker = TokenMasker.class), @Rule(path = \"user.numberHA1\", masker = PasswordMasker.class)})"],"x-order":6,"x-request-examples-1":{"account":"01alki06nq413uiaxy60bd3t3sotout1yg2l156axiw4bxg84ako6u9bwvxxv4u5","authServerType":"workplace","authType":"AccountAndPwd","clientType":0,"createTokenType":0,"credential":"","domain":"","pwd":"Qdjtufjwr4$4","remark":""},"x-request-examples-text-1":{"account":"01alki06nq413uiaxy60bd3t3sotout1yg2l156axiw4bxg84ako6u9bwvxxv4u5","authServerType":"workplace","authType":"AccountAndPwd","clientType":5,"createTokenType":0,"credential":"","domain":"","pwd":"Qdjtufjwr4$4","remark":""},"x-request-examples-url-1":"POST https://{endpoint}/v1/usg/acs/auth/proxy","x-returnType":"TokenDTO","x-support-sdk":"N"}}},"product_short":"Meeting","region_id":"cn-north-4","schemes":["HTTPS"],"security_definitions":null,"summary":"代理鉴权","tags":"登录鉴权","uri":null,"version":"2.0"}