{"base_path":"/","components":null,"consumes":"","definitions":{"ErrorResp":{"description":"失败时返回的错误对象","properties":{"error_code":{"description":"错误码","maxLength":36,"minLength":8,"type":"string"},"error_msg":{"description":"错误描述","maxLength":512,"minLength":2,"type":"string"}},"required":["error_code","error_msg"]},"ExecutionPlan":{"properties":{"extra":{"description":"其他信息","type":"string"},"filtered":{"description":"按表条件过滤的表行的估计百分比","type":"string"},"id":{"description":"id","type":"string"},"key":{"description":"实际使用的键(索引)","type":"string"},"key_len":{"description":"决定使用的键的长度","type":"string"},"partitions":{"description":"查询将匹配记录的分区","type":"string"},"possible_keys":{"description":"可能使用的键(索引)","type":"string"},"ref":{"description":"使用哪个列或常数与键一起来选择行","type":"string"},"rows":{"description":"MySQL认为它执行查询时必须检查的行数","type":"string"},"select_type":{"description":"select子句的类型","type":"string"},"table":{"description":"数据库表","type":"string"},"type":{"description":"访问类型","type":"string"}},"required":["id","select_type","table","partitions","type","possible_keys","key","key_len","ref","rows","filtered","extra"]},"QuerySqlPlanBody":{"properties":{"database":{"description":"数据库名称","type":"string"},"db_user_id":{"description":"数据库用户ID","type":"string"},"sql":{"description":"SQL语句","type":"string"}}},"SqlExplainResp":{"properties":{"error_message":{"description":"SQL执行失败时,显示执行错误信息","type":"string"},"execution_plans":{"description":"SQL执行计划列表","items":{"$ref":"#/definitions/ExecutionPlan"},"type":"array"}}}},"description":null,"group_id":"7f831fc0dd494cfe86eff0b79e4f207d","host":"das.cn-north-4.myhuaweicloud.com","id":"a4aeb034b9e2431584a648523680d127","info_version":"v3","method":"post","name":"ShowSqlExplain","parameters":{},"paths":{"/v3/{project_id}/instances/{instance_id}/sql/explain":{"post":{"consumes":["application/json"],"description":"查询SQL执行计划。\n目前仅支持MySQL实例。\n补充GET请求,处理超长SQL","operationId":"ShowSqlExplain","parameters":[{"description":"项目ID","in":"path","name":"project_id","required":true,"type":"string"},{"description":"实例ID","in":"path","name":"instance_id","required":true,"type":"string"},{"description":"用户token","in":"header","name":"X-Auth-Token","required":true,"type":"string"},{"description":"语言","enum":["zh-cn","en-us"],"in":"header","name":"X-Language","required":false,"type":"string"},{"description":"请求体","in":"body","name":"QuerySqlPlanBody","required":true,"schema":{"$ref":"#/definitions/QuerySqlPlanBody"}}],"produces":["application/json"],"responses":{"200":{"description":"Success.","examples":{"application/json":{"execution_plans":[{"extra":"No tables used","filtered":"","id":"1","key":"","key_len":"","partitions":"","possible_keys":"","ref":"","rows":"","select_type":"SIMPLE","table":"","type":""}]}},"schema":{"$ref":"#/definitions/SqlExplainResp"}},"400":{"description":"BadRequest.","schema":{"$ref":"#/definitions/ErrorResp"}},"500":{"description":"InternalServerError.","schema":{"$ref":"#/definitions/ErrorResp"}}},"summary":"查询SQL执行计划","tags":["云DBA"],"x-das-is-publish":"#ShowSqlExplain_Placeholder#","x-is-registered":"Y","x-order":1,"x-request-examples-1":{"database":"abc","db_user_id":"2c250598-1e3c-4d31-bc19-be1d866247e6","sql":"select 1"},"x-request-examples-text-1":{"database":"abc","db_user_id":"2c250598-1e3c-4d31-bc19-be1d866247e6","sql":"select 1"},"x-request-examples-url-1":"POST https://das.cn-north-1.myhuaweicloud.com/v3/054e292c9880d4992f02c0196d3ea468/instances/da304cd5bbb944de828759bc7be3d3fein01/sql/explain","x-support-sdk":"Y"}}},"product_short":"DAS","region_id":"cn-north-4","schemes":["HTTPS"],"security_definitions":null,"summary":"查询SQL执行计划","tags":"云DBA","uri":null,"version":"2.0"}