{"base_path":"/","components":null,"consumes":"","definitions":{"ErrorResp":{"description":"失败时返回的错误对象","properties":{"error_code":{"description":"错误码","maxLength":36,"minLength":8,"type":"string"},"error_msg":{"description":"错误描述","maxLength":512,"minLength":2,"type":"string"}},"required":["error_code","error_msg"]},"ExportSlowSqlStatisticsRequestBody":{"properties":{"datastore_type":{"description":"数据库类型。慢SQL统计支持的类型:DDS-Community。","enum":["DDS-Community"],"type":"string"},"end_at":{"description":"结束时间(Unix timestamp),单位:毫秒。","format":"int64","type":"integer"},"limit":{"description":"每页记录数,默认为20,最大取值100。","maximum":100,"minimum":1,"type":"integer"},"node_ids":{"description":"节点ID列表。","items":{"type":"string"},"type":"array"},"offset":{"description":"偏移量。从第一条数据偏移offset条数据后开始查询,默认为0(偏移0条数据,表示从第一条数据开始查询),必须为数字,不能为负数。","maximum":200,"minimum":0,"type":"integer"},"start_at":{"description":"开始时间(Unix timestamp),单位:毫秒。","format":"int64","type":"integer"},"statistics_field":{"description":"统计字段。支持统计的字段:node_id、sql_type、db_name、collection、user、client。默认使用node_id统计。","enum":["node_id","sql_type","db_name","collection","user","client"],"type":"string"}},"required":["datastore_type","start_at","end_at"]},"SlowSqlStatistics":{"properties":{"avg_execute_time":{"description":"平均执行耗时(s)。","format":"double","type":"number"},"avg_key_examined":{"description":"平均扫描索引数。","format":"double","type":"number"},"avg_lock_wait_time":{"description":"平均锁等待时间(s)。","format":"double","type":"number"},"avg_rows_examined":{"description":"平均扫描文档数。","format":"double","type":"number"},"avg_rows_sent":{"description":"平均返回文档数。","format":"double","type":"number"},"client":{"description":"客户端,按client统计时赋值。","type":"string"},"collection":{"description":"数据库表,按collection统计时赋值。","type":"string"},"db_name":{"description":"库名,按db_name、collection统计时赋值。","type":"string"},"execute_count":{"description":"执行次数。","format":"int64","type":"integer"},"max_execute_time":{"description":"最大执行耗时(s)。","format":"double","type":"number"},"max_key_examined":{"description":"最大扫描索引数。","format":"double","type":"number"},"max_lock_wait_time":{"description":"最大锁等待时间(s)。","format":"double","type":"number"},"max_rows_examined":{"description":"最大扫描文档数。","format":"double","type":"number"},"max_rows_sent":{"description":"最大返回文档数。","format":"double","type":"number"},"node_id":{"description":"节点ID,按node_id统计时赋值。","type":"string"},"node_name":{"description":"节点名称,按node_id统计时赋值。","type":"string"},"sql_type":{"description":"语句类型,按sql_type统计时赋值。","type":"string"},"user":{"description":"用户名,按user统计时赋值。","type":"string"}},"required":["execute_count","avg_execute_time","max_execute_time","avg_lock_wait_time","max_lock_wait_time","avg_rows_sent","max_rows_sent","avg_rows_examined","max_rows_examined","avg_key_examined","max_key_examined"],"type":"object"},"SlowSqlStatisticsResp":{"properties":{"statistics_list":{"description":"慢SQL统计列表。","items":{"$ref":"#/definitions/SlowSqlStatistics"},"type":"array"},"total_count":{"description":"总数。","format":"int32","type":"integer"}},"required":["statistics_list","total_count"],"type":"object"}},"description":null,"group_id":"7f831fc0dd494cfe86eff0b79e4f207d","host":"das.cn-north-4.myhuaweicloud.com","id":"9dec3921646b49289e512bfa8401b17f","info_version":"v3","method":"post","name":"ExportSlowSqlStatistics","parameters":{},"paths":{"/v3/{project_id}/instances/{instance_id}/slow-sql-statistics":{"post":{"description":"慢SQL开关打开后,导出慢SQL统计数据。","operationId":"ExportSlowSqlStatistics","parameters":[{"description":"项目ID。","in":"path","name":"project_id","required":true,"type":"string"},{"description":"实例ID。","in":"path","name":"instance_id","required":true,"type":"string"},{"description":"用户Token。","in":"header","name":"X-Auth-Token","required":true,"type":"string"},{"description":"请求语言类型。","enum":["en-us","zh-cn"],"in":"header","name":"X-Language","required":false,"type":"string"},{"description":"请求体","in":"body","name":"ExportSlowSqlStatisticsRequestBody","required":true,"schema":{"$ref":"#/definitions/ExportSlowSqlStatisticsRequestBody"}}],"responses":{"200":{"description":"Success.","examples":{"application/json":{"statistics_list":[{"avg_execute_time":5.000509315066868,"avg_key_examined":0,"avg_lock_wait_time":1.0,"avg_rows_examined":0,"avg_rows_sent":1.0,"execute_count":6,"max_execute_time":5.008123874664307,"max_key_examined":0,"max_lock_wait_time":1.0,"max_rows_examined":0,"max_rows_sent":1.0,"node_id":"fec05693c76c4f389561051db430324cno02","node_name":"dds-1234_node_1"}],"total_count":1}},"schema":{"$ref":"#/definitions/SlowSqlStatisticsResp"}},"400":{"description":"Client error.","schema":{"$ref":"#/definitions/ErrorResp"}},"500":{"description":"Server error.","schema":{"$ref":"#/definitions/ErrorResp"}}},"summary":"导出慢SQL统计数据","tags":["云DBA"],"x-das-is-publish":"#ExportSlowSqlStatistics_Placeholder#","x-is-registered":"Y","x-request-examples-description-1":"导出慢SQL统计数据","x-request-examples-text-1":{"datastore_type":"DDS-Community","end_at":1611979064337,"limit":20,"offset":0,"start_at":1611975464337,"statistics_field":"node_id"},"x-request-examples-url-1":"POST https://das.cn-north-1.myhuaweicloud.com/v3/054c630ff780d4cc2f40c00d7f6fb21d/instances/6243b3fcf2f948578d46ed4c52fb54eein02/slow-sql-statistics","x-support-sdk":"Y"}}},"product_short":"DAS","region_id":"cn-north-4","schemes":["HTTPS"],"security_definitions":null,"summary":"导出慢SQL统计数据","tags":"云DBA","uri":null,"version":"2.0"}