{"base_path":null,"components":{"parameters":{"X-Auth-Token":{"description":"**参数解释:**\n用户Token。 通过调用IAM服务[获取用户Token](https://support.huaweicloud.com/api-iam/iam_30_0001.html)接口获取(响应消息头中X-Subject-Token的值)。\n **约束限制:**\n必传。\n **取值范围:**\n字符串长度不少于1,不超过10万。\n**默认取值:**\n不涉及。","explode":false,"in":"header","name":"X-Auth-Token","required":true,"schema":{"maxLength":100000,"minLength":1,"type":"string"},"style":"simple"},"repository_id":{"description":"**参数解释:**\n仓库的ID,通过[查询用户所有仓库](https://support.huaweicloud.com/api-codeartsrepo/ListUserAllRepositories.html)接口查询项目列表获取。\n**约束限制:**\n不涉及。","explode":false,"in":"path","name":"repository_id","required":true,"schema":{"maximum":2147483647,"minimum":1,"type":"integer"},"style":"simple"}},"schemas":{"BasicRoleDto":{"properties":{"chinese_name":{"description":"**参数解释:**\n角色中文名。\n**取值范围:**\n不涉及。","readOnly":true,"type":"string"},"id":{"description":"**参数解释:**\n角色ID。\n**取值范围:**\n1-2147483647","format":"int32","readOnly":true,"type":"integer"},"name":{"description":"**参数解释:**\n角色名称。\n**取值范围:**\n不涉及。","readOnly":true,"type":"string"},"related_role_id":{"description":"**参数解释:** \n关联角色ID。\n**取值范围:**\n不涉及。","readOnly":true,"type":"string"}},"type":"object"},"BatchUpdateProtectedTagsBodyDto":{"properties":{"actions":{"description":"**参数解释:**\n权限列表。\n**约束限制:**\n不涉及\n**取值范围:**\n不涉及\n**默认取值:**\n不涉及。","items":{"$ref":"#/components/schemas/RepositoryProtectedTagActionBodyDto"},"maxItems":10,"minItems":0,"type":"array"},"names":{"description":"**参数解释:**\n保护Tag名或通配符列表。\n**约束限制:**\n必填\n**取值范围:**\n不涉及\n**默认取值:**\n不涉及。","items":{"maxLength":255,"minLength":1,"type":"string"},"maxItems":50,"minItems":0,"type":"array"}},"required":["names"],"type":"object"},"RepositoryProtectedActionBasicBodyDto":{"properties":{"enable":{"default":true,"description":"**参数解释:**\n是否启用。\n**约束限制:**\n不涉及。\n**取值范围:**\n- true,开启规则限制\n- false,关闭规则限制\n**默认取值:**\n不涉及。","type":"boolean"},"related_role_ids":{"description":"**参数解释:**\n关联角色ID列表。\n**约束限制:**\n不涉及。\n**取值范围:**\n不涉及。\n**默认取值:**\n不涉及。","items":{"maxLength":50,"minLength":1,"type":"string"},"maxItems":50,"minItems":0,"type":"array"},"user_ids":{"description":"**参数解释:**\n用户ID列表。\n**约束限制:**\n不涉及。\n**取值范围:**\nInteger\n**默认取值:**\n不涉及。","items":{"format":"int32","maximum":2147483647,"minimum":1},"maxItems":100,"minItems":0,"type":"array"},"user_team_ids":{"description":"**参数解释:**\n成员组ID列表。\n**约束限制:**\n不涉及。\n**取值范围:**\n不涉及。\n**默认取值:**\n不涉及。","items":{"format":"int32","maximum":2147483647,"minimum":1,"type":"integer"},"maxItems":20,"minItems":0,"type":"array"}},"type":"object"},"RepositoryProtectedActionDto":{"properties":{"action":{"description":"**参数解释:**\n事件名称。\n**取值范围:**\n不涉及。","readOnly":true,"type":"string"},"enable":{"description":"**参数解释:**\n是否启用。\n**取值范围:**\n- true,开启规则限制。\n- false,未开启规则限制。","readOnly":true,"type":"boolean"},"roles":{"description":"**参数解释:**\n白名单角色列表。\n**取值范围:**\n不涉及。","items":{"$ref":"#/components/schemas/BasicRoleDto"},"maxItems":50,"minItems":0,"type":"array"},"user_teams":{"description":"**参数解释:**\n白名单用户组列表。\n**取值范围:**\n不涉及。","items":{"$ref":"#/components/schemas/UserTeamBasicDto"},"maxItems":20,"minItems":0,"type":"array"},"users":{"description":"**参数解释:**\n白名单用户列表。\n**取值范围:**\n不涉及。","items":{"$ref":"#/components/schemas/RepositoryUserDto"},"maxItems":100,"minItems":0,"type":"array"}},"type":"object"},"RepositoryProtectedTagActionBodyDto":{"allOf":[{"$ref":"#/components/schemas/RepositoryProtectedActionBasicBodyDto"},{"properties":{"action":{"description":"**参数解释:**\n事件名称。\n**约束限制:**\n不涉及\n**取值范围:**\n- create,创建。\n**默认取值:**\n不涉及。","enum":["create"],"type":"string"}}}],"type":"object"},"RepositoryProtectedTagDto":{"properties":{"actions":{"description":"**参数解释:**\n事件列表。\n**取值范围:**\n不涉及","items":{"$ref":"#/components/schemas/RepositoryProtectedActionDto"},"readOnly":true,"type":"array"},"id":{"description":"**参数解释:**\n保护Tag ID。\n**取值范围:**\n1-2147483647","readOnly":true,"type":"integer"},"name":{"description":"**参数解释:**\n分支名称或通配符。\n**取值范围:**\n不涉及","maxLength":255,"minLength":1,"readOnly":true,"type":"string"}},"type":"object"},"RepositoryUserDto":{"allOf":[{"$ref":"#/components/schemas/UserSafeDto"},{"properties":{"avatar_url":{"description":"**参数解释:**\n头像地址。\n**取值范围:**\n不涉及。","readOnly":true,"type":"string"},"nick_name":{"description":"**参数解释:**\n用户昵称。\n**取值范围:**\n不涉及。","readOnly":true,"type":"string"},"state":{"description":"**参数解释:**\n用户状态。\n**取值范围:**\n- active,激活。\n- blocked,禁用。","enum":["active","blocked"],"readOnly":true,"type":"string"},"tenant_name":{"description":"**参数解释:**\n所属租户名称。\n**取值范围:**\n不涉及。","readOnly":true,"type":"string"}}}],"type":"object"},"UserSafeDto":{"description":"**参数解释:**\n用户基础信息。","properties":{"id":{"description":"**参数解释:**\n用户id。","format":"int32","maximum":2147483647,"minimum":1,"type":"integer"},"name":{"description":"**参数解释:**\n用户名称。","maxLength":255,"minLength":1,"type":"string"},"username":{"description":"**参数解释:**\n用户名。","maxLength":255,"minLength":1,"type":"string"}},"type":"object"},"UserTeamBasicDto":{"properties":{"id":{"description":"**参数解释:**\n用户组ID。\n**取值范围:**\n1-2147483647","readOnly":true,"type":"integer"},"name":{"description":"**参数解释:**\n用户组名称。\n**取值范围:**\n不涉及。","readOnly":true,"type":"string"}},"type":"object"}}},"consumes":"","definitions":null,"description":null,"group_id":"183513bb7aa84dab9d17c9bc8a4a9fab","host":"codehub-ext.cn-north-4.myhuaweicloud.com","id":"83626e473e114dbfa39d5bc4ca5934c2","info_version":"v4","method":"put","name":"BatchUpdateProtectedTags","parameters":null,"paths":{"/v4/repositories/{repository_id}/protected-tags":{"put":{"description":"批量更新仓库保护Tag","operationId":"BatchUpdateProtectedTags","parameters":[{"$ref":"#/components/parameters/X-Auth-Token"},{"$ref":"#/components/parameters/repository_id"}],"requestBody":{"content":{"application/json":{"example":{"actions":[{"action":"create","enable":true,"related_role_ids":["Administrator"],"user_ids":[9124],"user_team_ids":[251]}],"names":["ttt6","ttt5"]},"schema":{"$ref":"#/components/schemas/BatchUpdateProtectedTagsBodyDto"}}},"description":"批量更新仓库保护Tag","required":true},"responses":{"200":{"content":{"application/json":{"example":[{"actions":[{"action":"create","enable":true,"roles":[{"chinese_name":"项目管理员","id":23836595,"name":"Administrator","related_role_id":"7a96af96176e4f728f571b8af8551dec"},{"chinese_name":"测试经理","id":23836597,"name":"Test manager","related_role_id":"24f72d0b611746c3a43da596ea5065f5"},{"chinese_name":"customer_role_1","id":23836612,"name":"customer_role_1","related_role_id":"31bcd56943f0491fbc2f410d163f70cc"}],"user_teams":[{"id":247,"name":"team-1"}],"users":[{"avatar_url":"","id":9087,"name":"test11","nick_name":"","state":"blocked","tenant_name":"t1","username":"04ef19ad5eaf4b8c9cf2451d3536202d"},{"avatar_url":"","id":9090,"name":"test3","nick_name":"","state":"blocked","tenant_name":"t1","username":"ba1bd837aa09470ba4ccf0cebb837f89"},{"avatar_url":"","id":9093,"name":"test444","nick_name":"","state":"blocked","tenant_name":"t1","username":"a225d72a70df46c3a15915285be1eeb3"}]}],"id":124607,"name":"ttt7"}],"schema":{"description":"仓库保护Tag列表","items":{"$ref":"#/components/schemas/RepositoryProtectedTagDto"},"type":"array"}}},"description":"仓库保护Tag列表"}},"summary":"批量更新仓库保护Tag","tags":["ProtectedRefs"],"x-api-framework":"RestfulAPI","x-api-highrisk":"N","x-api-position":"Region_ZONE","x-api-type":"open-api","x-api-user":"IAM_User","x-is-registered":"Y","x-open-region-cloud":"hws,hws_hk","x-request-examples-1":{"actions":[{"action":"create","enable":true,"related_role_ids":["Administrator"],"user_ids":[9124],"user_team_ids":[251]}],"names":["ttt6","ttt5"]},"x-request-examples-description-1":"批量更新仓库保护Tag","x-request-examples-text-1":{"actions":[{"action":"create","enable":true,"related_role_ids":["Administrator"],"user_ids":[9124],"user_team_ids":[251]}],"names":["ttt6","ttt5"]},"x-request-examples-url-1":"PUT /v4/repositories/123/protected-tags","x-sec-auditlog":"N","x-sec-upload-download":0,"x-support-sdk":"Y"}}},"product_short":"CodeHub","region_id":"cn-north-4","schemes":["HTTPS"],"security_definitions":null,"summary":"批量更新仓库保护Tag","tags":"ProtectedRefs","uri":null,"version":"3.0.1"}