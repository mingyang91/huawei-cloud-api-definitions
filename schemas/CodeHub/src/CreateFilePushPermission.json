{"base_path":null,"components":{"parameters":{"X-Auth-Token":{"description":"**参数解释:**\n用户Token。 通过调用IAM服务[获取用户Token](https://support.huaweicloud.com/api-iam/iam_30_0001.html)接口获取(响应消息头中X-Subject-Token的值)。\n **约束限制:**\n必传。\n **取值范围:**\n字符串长度不少于1,不超过10万。\n**默认取值:**\n不涉及。","explode":false,"in":"header","name":"X-Auth-Token","required":true,"schema":{"maxLength":100000,"minLength":1,"type":"string"},"style":"simple"},"repository_id":{"description":"**参数解释:**\n仓库的ID,通过[查询用户所有仓库](https://support.huaweicloud.com/api-codeartsrepo/ListUserAllRepositories.html)接口查询项目列表获取。\n**约束限制:**\n不涉及。","explode":false,"in":"path","name":"repository_id","required":true,"schema":{"maximum":2147483647,"minimum":1,"type":"integer"},"style":"simple"}},"schemas":{"BasicRoleDto":{"properties":{"chinese_name":{"description":"**参数解释:**\n角色中文名。\n**取值范围:**\n不涉及。","readOnly":true,"type":"string"},"id":{"description":"**参数解释:**\n角色ID。\n**取值范围:**\n1-2147483647","format":"int32","readOnly":true,"type":"integer"},"name":{"description":"**参数解释:**\n角色名称。\n**取值范围:**\n不涉及。","readOnly":true,"type":"string"},"related_role_id":{"description":"**参数解释:** \n关联角色ID。\n**取值范围:**\n不涉及。","readOnly":true,"type":"string"}},"type":"object"},"CreateRepositoryFilePushPermissionDto":{"properties":{"actions":{"description":"**参数解释:**\n事件设置列表\n**约束限制:**\n不涉及。\n**取值范围:**\n不涉及。\n**默认取值:**\n不涉及。","items":{"$ref":"#/components/schemas/FilePushPermissionActionBodyDto"},"maxItems":1,"minItems":0,"type":"array"},"path":{"description":"**参数解释:**\n目录路径或通配符\n**约束限制:**\n不涉及。\n**取值范围:**\n不涉及。\n**默认取值:**\n不涉及。","maxLength":255,"minLength":1,"type":"string"}},"required":["path"],"type":"object"},"FilePushPermissionActionBodyDto":{"allOf":[{"$ref":"#/components/schemas/RepositoryProtectedActionBasicBodyDto"},{"properties":{"action":{"description":"**参数解释:**\n事件名称。\n**约束限制:**\n不涉及。\n**取值范围:**\n  - push,推送。\n**默认取值:**\n不涉及。","enum":["push"],"type":"string"}}}],"type":"object"},"RepositoryFilePushPermissionDto":{"properties":{"actions":{"description":"**参数解释:**\n事件列表。\n**取值范围:**\n不涉及。","items":{"$ref":"#/components/schemas/RepositoryProtectedActionDto"},"maxItems":1,"minItems":0,"type":"array"},"id":{"description":"**参数解释:**\n仓库文件推送权限ID。\n**取值范围:**\n1-2147483647","format":"int32","maximum":2147483647,"minimum":1,"type":"integer"},"path":{"description":"**参数解释:**\n目录路径或通配符。\n**取值范围:**\n不涉及。","maxLength":255,"minLength":1,"type":"string"}},"type":"object"},"RepositoryProtectedActionBasicBodyDto":{"properties":{"enable":{"default":true,"description":"**参数解释:**\n是否启用。\n**约束限制:**\n不涉及。\n**取值范围:**\n- true,开启规则限制\n- false,关闭规则限制\n**默认取值:**\n不涉及。","type":"boolean"},"related_role_ids":{"description":"**参数解释:**\n关联角色ID列表。\n**约束限制:**\n不涉及。\n**取值范围:**\n不涉及。\n**默认取值:**\n不涉及。","items":{"maxLength":50,"minLength":1,"type":"string"},"maxItems":50,"minItems":0,"type":"array"},"user_ids":{"description":"**参数解释:**\n用户ID列表。\n**约束限制:**\n不涉及。\n**取值范围:**\nInteger\n**默认取值:**\n不涉及。","items":{"format":"int32","maximum":2147483647,"minimum":1},"maxItems":100,"minItems":0,"type":"array"},"user_team_ids":{"description":"**参数解释:**\n成员组ID列表。\n**约束限制:**\n不涉及。\n**取值范围:**\n不涉及。\n**默认取值:**\n不涉及。","items":{"format":"int32","maximum":2147483647,"minimum":1,"type":"integer"},"maxItems":20,"minItems":0,"type":"array"}},"type":"object"},"RepositoryProtectedActionDto":{"properties":{"action":{"description":"**参数解释:**\n事件名称。\n**取值范围:**\n不涉及。","readOnly":true,"type":"string"},"enable":{"description":"**参数解释:**\n是否启用。\n**取值范围:**\n- true,开启规则限制。\n- false,未开启规则限制。","readOnly":true,"type":"boolean"},"roles":{"description":"**参数解释:**\n白名单角色列表。\n**取值范围:**\n不涉及。","items":{"$ref":"#/components/schemas/BasicRoleDto"},"maxItems":50,"minItems":0,"type":"array"},"user_teams":{"description":"**参数解释:**\n白名单用户组列表。\n**取值范围:**\n不涉及。","items":{"$ref":"#/components/schemas/UserTeamBasicDto"},"maxItems":20,"minItems":0,"type":"array"},"users":{"description":"**参数解释:**\n白名单用户列表。\n**取值范围:**\n不涉及。","items":{"$ref":"#/components/schemas/RepositoryUserDto"},"maxItems":100,"minItems":0,"type":"array"}},"type":"object"},"RepositoryUserDto":{"allOf":[{"$ref":"#/components/schemas/UserSafeDto"},{"properties":{"avatar_url":{"description":"**参数解释:**\n头像地址。\n**取值范围:**\n不涉及。","readOnly":true,"type":"string"},"nick_name":{"description":"**参数解释:**\n用户昵称。\n**取值范围:**\n不涉及。","readOnly":true,"type":"string"},"state":{"description":"**参数解释:**\n用户状态。\n**取值范围:**\n- active,激活。\n- blocked,禁用。","enum":["active","blocked"],"readOnly":true,"type":"string"},"tenant_name":{"description":"**参数解释:**\n所属租户名称。\n**取值范围:**\n不涉及。","readOnly":true,"type":"string"}}}],"type":"object"},"UserSafeDto":{"description":"**参数解释:**\n用户基础信息。","properties":{"id":{"description":"**参数解释:**\n用户id。","format":"int32","maximum":2147483647,"minimum":1,"type":"integer"},"name":{"description":"**参数解释:**\n用户名称。","maxLength":255,"minLength":1,"type":"string"},"username":{"description":"**参数解释:**\n用户名。","maxLength":255,"minLength":1,"type":"string"}},"type":"object"},"UserTeamBasicDto":{"properties":{"id":{"description":"**参数解释:**\n用户组ID。\n**取值范围:**\n1-2147483647","readOnly":true,"type":"integer"},"name":{"description":"**参数解释:**\n用户组名称。\n**取值范围:**\n不涉及。","readOnly":true,"type":"string"}},"type":"object"}}},"consumes":"","definitions":null,"description":null,"group_id":"183513bb7aa84dab9d17c9bc8a4a9fab","host":"codehub-ext.cn-north-4.myhuaweicloud.com","id":"b4ba9326f82848c1aba9d529bb4ed5d9","info_version":"v4","method":"post","name":"CreateFilePushPermission","parameters":null,"paths":{"/v4/repositories/{repository_id}/file-push-permissions":{"post":{"description":"创建仓库文件推送权限","operationId":"CreateFilePushPermission","parameters":[{"$ref":"#/components/parameters/X-Auth-Token"},{"$ref":"#/components/parameters/repository_id"}],"requestBody":{"content":{"application/json":{"example":{"actions":[{"action":"push","enable":true,"related_role_ids":["6115a3ddd9044e288c558d1ae827a732"],"user_ids":[9124],"user_team_ids":[247]}],"path":"/config1/*"},"schema":{"$ref":"#/components/schemas/CreateRepositoryFilePushPermissionDto"}}},"description":"创建仓库文件推送权限","required":true},"responses":{"200":{"content":{"application/json":{"example":{"actions":[{"action":"push","enable":true,"roles":[{"chinese_name":"项目经理","id":23836594,"name":"Project manager","related_role_id":"6115a3ddd9044e288c558d1ae827a732"}],"user_teams":[{"id":247,"name":"team-1"}],"users":[{"avatar_url":"","id":7574,"name":"user","nick_name":"user","state":"active","tenant_name":"tenant","username":"a618e34bd5704be3ae3395dfede06041"}]}],"id":44,"path":"33"},"schema":{"$ref":"#/components/schemas/RepositoryFilePushPermissionDto"}}},"description":"仓库文件推送权限"}},"summary":"创建仓库文件推送权限","tags":["Permission"],"x-api-framework":"RestfulAPI","x-api-highrisk":"N","x-api-position":"Region_ZONE","x-api-type":"open-api","x-api-user":"IAM_User","x-is-registered":"Y","x-open-region-cloud":"hws,hws_hk","x-request-examples-1":{"actions":[{"action":"push","enable":true,"related_role_ids":["6115a3ddd9044e288c558d1ae827a732"],"user_ids":[9124],"user_team_ids":[247]}],"path":"/config1/*"},"x-request-examples-description-1":"创建仓库文件推送权限","x-request-examples-text-1":{"actions":[{"action":"push","enable":true,"related_role_ids":["6115a3ddd9044e288c558d1ae827a732"],"user_ids":[9124],"user_team_ids":[247]}],"path":"/config1/*"},"x-request-examples-url-1":"POST /v4/repositories/123/file-push-permissions","x-sec-auditlog":"N","x-sec-upload-download":0,"x-support-sdk":"Y"}}},"product_short":"CodeHub","region_id":"cn-north-4","schemes":["HTTPS"],"security_definitions":null,"summary":"创建仓库文件推送权限","tags":"Permission","uri":null,"version":"3.0.1"}