{"base_path":null,"components":{"schemas":{"ApiError":{"description":"**参数解释:**\n错误信息。","properties":{"error_code":{"description":"**参数解释:**\n错误码。","maxLength":20,"minLength":0,"type":"string"},"error_msg":{"description":"**参数解释:**\n错误信息。","maxLength":1000,"minLength":0,"type":"string"}},"type":"object"},"CreateMergeRequestNoteDto":{"description":"创建合并请求检视意见请求体","properties":{"assignee_id":{"description":"**参数解释:**\n检视意见指派人id。","type":"string"},"body":{"description":"**参数解释:**\n评论内容。","maxLength":8000,"minLength":1,"type":"string"},"line_types":{"description":"**参数解释:**\n检视意见所在行类型(代码行评论需要)。","enum":["new","old"],"type":"string"},"position":{"$ref":"#/components/schemas/PositionDto"},"proposer_id":{"description":"**参数解释:**\n检视人。","type":"string"},"review_categories":{"description":"**参数解释:**\n检视意见分类。","type":"string"},"review_modules":{"description":"**参数解释:**\n检视意见模块。","type":"string"},"severity":{"description":"**参数解释:**\n检视意见严重程度。","enum":["suggestion","minor","major","fatal"],"type":"string"}},"type":"object"},"MergeRequestBasicDiscussionDto":{"description":"合并请求单个检视意见基础信息。","properties":{"a_mode":{"description":"**参数解释:**\n文件旧权限(默认100644)。","maxLength":100000,"minLength":1,"type":"string"},"archived":{"description":"**参数解释:**\n是否已归档。","type":"boolean"},"assignee":{"$ref":"#/components/schemas/UserBasicDto"},"b_mode":{"description":"**参数解释:**\n文件新权限(默认100644)。","maxLength":100000,"minLength":1,"type":"string"},"commit_id":{"description":"**参数解释:**\n提交记录id。","maxLength":40,"minLength":40,"type":"string"},"deleted_file":{"description":"**参数解释:**\n是否为删除文件。","type":"boolean"},"id":{"description":"**参数解释:**\n检视意见id(主评论和回复共用)。","maxLength":40,"minLength":40,"type":"string"},"individual_note":{"description":"**参数解释:**\n个人检视意见(不需要解决)。","type":"boolean"},"merge_request_version_params":{"$ref":"#/components/schemas/MergeRequestVersionParamsDto"},"new_file":{"description":"**参数解释:**\n是否为新增文件。","type":"boolean"},"noteable_type":{"description":"**参数解释:**\n意见类型。\n**取值范围:**\n- MergeRequest: 合并请求下提的检视意见。\n- Commit: 代码页或提交记录下提的检视意见。","enum":["MergeRequest","Commit"],"type":"string"},"notes":{"description":"**参数解释:**\n评论列表(主评+回复)。","items":{"$ref":"#/components/schemas/NoteDto"},"type":"array"},"proposer":{"$ref":"#/components/schemas/UserBasicDto"},"repository_full_path":{"description":"**参数解释:**\n仓库路径。","maxLength":100000,"minLength":1,"type":"string"},"repository_id":{"description":"**参数解释:**\n仓库id。","format":"int32","maximum":2147483647,"minimum":1,"type":"integer"},"resolved":{"description":"**参数解释:**\n是否已解决。","type":"boolean"},"review_categories":{"description":"**参数解释:**\n意见分类key。","maxLength":200,"minLength":1,"type":"string"},"review_categories_cn":{"description":"**参数解释:**\n意见分类中文。","maxLength":200,"minLength":1,"type":"string"},"review_categories_en":{"description":"**参数解释:**\n意见分类英文。","maxLength":200,"minLength":1,"type":"string"},"review_modules":{"description":"**参数解释:**\n意见模块。","maxLength":200,"minLength":1,"type":"string"},"severity":{"description":"**参数解释:**\n严重程度key。\n**取值范围:**\n- suggestion: 建议。\n- minor: 一般。\n- major: 严重。\n- fatal: 致命。","enum":["suggestion","minor","major","fatal"],"type":"string"},"severity_cn":{"description":"**参数解释:**\n严重程度中文。\n**取值范围:**\n- 建议\n- 一般\n- 严重\n- 致命","type":"string"},"severity_en":{"description":"**参数解释:**\n严重程度英文。\n**取值范围:**\n- Suggestion: 建议。\n- Minor: 一般。\n- major: 严重。\n- fatal: 致命。","enum":["Suggestion","Minor","Major","Fatal"],"type":"string"}},"type":"object"},"MergeRequestDiscussionDto":{"allOf":[{"$ref":"#/components/schemas/MergeRequestBasicDiscussionDto"},{"properties":{"added_lines":{"description":"**参数解释:**\n检视意见所在文件的新增行数量。","format":"int32","maximum":2147483647,"minimum":0,"type":"integer"},"diff_file":{"description":"**参数解释:**\n变更页检视意见的代码片段。","maxLength":100000,"minLength":1,"type":"string"},"removed_lines":{"description":"**参数解释:**\n检视意见所在文件的删除行数量。","format":"int32","maximum":2147483647,"minimum":0,"type":"integer"}}}],"description":"合并请求检视意见返回体","type":"object"},"MergeRequestVersionParamsDto":{"description":"合并请求版本详情。","properties":{"commit_id":{"description":"**参数解释:**\n提交记录id。","type":"string"},"diff_id":{"description":"**参数解释:**\n版本id(由合并请求id和sha值共同组成)。","format":"int32","type":"integer"},"start_sha":{"description":"**参数解释:**\n起始sha值。","type":"string"}},"type":"object"},"NoteDto":{"description":"评论详细信息。","properties":{"archived":{"description":"**参数解释:**\n是否已归档。","type":"boolean"},"assignee":{"$ref":"#/components/schemas/UserBasicDto"},"attachment":{"description":"**参数解释:**\n附件(弃用)。","maxLength":100000,"minLength":1,"type":"string"},"author":{"$ref":"#/components/schemas/UserBasicDto"},"body":{"description":"**参数解释:**\n评论内容。","maxLength":8000,"minLength":1,"type":"string"},"commit_id":{"description":"**参数解释:**\n提交记录id。","maxLength":40,"minLength":40,"type":"string"},"created_at":{"description":"**参数解释:**\n创建时间。","format":"yyyy-MM-dd'T'HH:mm:ss.SSSXXX","type":"string"},"diff":{"description":"**参数解释:**\n关联代码行的代码片段。","maxLength":100000,"minLength":1,"type":"string"},"diff_file":{"description":"**参数解释:**\n关联代码行所在文件的文件名。","maxLength":100000,"minLength":1,"type":"string"},"discussion_id":{"description":"**参数解释:**\n检视意见id(主评论和回复共用)。","maxLength":40,"minLength":40,"type":"string"},"file_path":{"description":"**参数解释:**\n文件路径(弃用)。","maxLength":100000,"minLength":1,"type":"string"},"id":{"description":"**参数解释:**\n评论id(主评论和回复不共用)。","format":"int32","maximum":2147483647,"minimum":1,"type":"integer"},"is_outdated":{"description":"**参数解释:**\n是否已过期。","type":"boolean"},"is_reply":{"description":"**参数解释:**\n是否为回复。","type":"boolean"},"line":{"description":"**参数解释:**\n行号(弃用)。","maxLength":100000,"minLength":1,"type":"string"},"moderation_result":{"description":"**参数解释:**\n内容审核结果。","type":"boolean"},"moderation_status":{"description":"**参数解释:**\n内容审核状态。","format":"int32","type":"integer"},"moderation_time":{"description":"**参数解释:**\n内容审核时间。","format":"int64","type":"integer"},"noteable_id":{"description":"**参数解释:**\n合并请求id或issue id。","format":"int32","maximum":2147483647,"minimum":1,"type":"integer"},"noteable_iid":{"description":"**参数解释:**\n合并请求iid或issue iid。","format":"int32","maximum":2147483647,"minimum":1,"type":"integer"},"noteable_type":{"description":"**参数解释:**\n意见类型。\n**取值范围:**\n- MergeRequest: 合并请求下提的检视意见。\n- Commit: 代码页或提交记录下提的检视意见。","enum":["MergeRequest","Commit"],"type":"string"},"position":{"$ref":"#/components/schemas/PositionDto"},"proposer":{"$ref":"#/components/schemas/UserBasicDto"},"repository":{"description":"**参数解释:**\n仓库路径。","maxLength":100000,"minLength":1,"type":"string"},"resolvable":{"description":"**参数解释:**\n是否需要解决。","type":"boolean"},"resolved":{"description":"**参数解释:**\n是否已解决。","type":"boolean"},"resolved_by":{"$ref":"#/components/schemas/UserBasicDto"},"review_categories":{"description":"**参数解释:**\n意见分类key。","maxLength":200,"minLength":1,"type":"string"},"review_categories_cn":{"description":"**参数解释:**\n意见分类中文名。","maxLength":200,"minLength":1,"type":"string"},"review_categories_en":{"description":"**参数解释:**\n合并请求版本信息。","maxLength":200,"minLength":1,"type":"string"},"review_modules":{"description":"**参数解释:**\n合并请求版本信息。","maxLength":200,"minLength":1,"type":"string"},"severity":{"description":"**参数解释:**\n严重程度key。","enum":["suggestion","minor","major","fatal"],"type":"string"},"severity_cn":{"description":"**参数解释:**\n严重程度中文。\n**约束限制:**\n- 建议\n- 一般\n- 严重\n- 致命","type":"string"},"severity_en":{"description":"**参数解释:**\n严重程度英文。","enum":["Suggestion","Minor","Major","Fatal"],"type":"string"},"system":{"description":"**参数解释:**\n是否为系统添加的。","type":"boolean"},"type":{"description":"**参数解释:**\n评论类型。\n**取值范围:**\n- DiscussionNote: 需要解决的关联代码行的评论。\n- DiffNote: 一般。","type":"string"},"updated_at":{"description":"**参数解释:**\n更新时间。","format":"yyyy-MM-dd'T'HH:mm:ss.SSSXXX","type":"string"}},"type":"object"},"PositionDto":{"description":"检视意见位置详情。","properties":{"base_sha":{"description":"**参数解释:**\n基础sha值。","type":"string"},"head_sha":{"description":"**参数解释:**\n最新sha值。","type":"string"},"new_line":{"description":"**参数解释:**\n新文件行号。","format":"int32","type":"integer"},"new_path":{"description":"**参数解释:**\n文件新路径。","type":"string"},"old_line":{"description":"**参数解释:**\n旧文件行号。","format":"int32","type":"integer"},"old_path":{"description":"**参数解释:**\n文件旧路径。","type":"string"},"position_type":{"description":"**参数解释:**\n文件类型。","type":"string"},"start_sha":{"description":"**参数解释:**\n起始sha值。","type":"string"}},"type":"object"},"UserBasicDto":{"allOf":[{"$ref":"#/components/schemas/UserSafeDto"},{"properties":{"avatar_path":{"description":"用户头像路径","type":"string"},"avatar_url":{"description":"用户头像url","type":"string"},"email":{"description":"用户邮箱","type":"string"},"error_message":{"description":"**参数解释:**\n部分查询接口校验到传参里的用户权限不足或不存在时,返回该用户但该字段不为空用于提示。","type":"string"},"name_cn":{"description":"用户中文名称","type":"string"},"nick_name":{"description":"用户昵称","type":"string"},"service_license_status":{"description":"服务级权限状态 0:停用 1:启用","type":"integer"},"state":{"description":"**参数解释:**\n用户状态。\n**取值范围:**\n- active: 可用账户。\n- blocked: 被锁定用户。\n- error: 未查询到该用户。","enum":["active","blocked","error"],"type":"string"},"tenant_name":{"description":"租户名称","type":"string"},"web_url":{"description":"用户个人首页","type":"string"}}}],"description":"用户信息","type":"object"},"UserSafeDto":{"description":"**参数解释:**\n用户基础信息。","properties":{"id":{"description":"**参数解释:**\n用户id。","format":"int32","maximum":2147483647,"minimum":1,"type":"integer"},"name":{"description":"**参数解释:**\n用户名称。","maxLength":255,"minLength":1,"type":"string"},"username":{"description":"**参数解释:**\n用户名。","maxLength":255,"minLength":1,"type":"string"}},"type":"object"}}},"consumes":"","definitions":null,"description":null,"group_id":"183513bb7aa84dab9d17c9bc8a4a9fab","host":"codehub-ext.cn-north-4.myhuaweicloud.com","id":"c425f91085c5498b965450852317aea8","info_version":"v4","method":"post","name":"CreateMergeRequestDiscussion","parameters":null,"paths":{"/v4/repositories/{repository_id}/merge-requests/{merge_request_iid}/discussions":{"post":{"description":"创建合并请求检视意见","operationId":"CreateMergeRequestDiscussion","parameters":[{"description":"**参数解释:**\n用户Token。 通过调用IAM服务[获取用户Token](https://support.huaweicloud.com/api-iam/iam_30_0001.html)接口获取(响应消息头中X-Subject-Token的值)。\n **约束限制:**\n必传。\n **取值范围:**\n字符串长度不少于1,不超过10万。\n**默认取值:**\n不涉及。","explode":false,"in":"header","name":"X-Auth-Token","required":true,"schema":{"maxLength":100000,"minLength":1,"type":"string"},"style":"simple"},{"description":"**参数解释:**\n仓库的ID,通过[查询用户所有仓库](https://support.huaweicloud.com/api-codeartsrepo/ListUserAllRepositories.html)接口查询项目列表获取。\n**约束限制:**\n不涉及。","explode":false,"in":"path","name":"repository_id","required":true,"schema":{"maximum":2147483647,"minimum":1,"type":"integer"},"style":"simple"},{"description":"**参数解释:**\n 合并请求 iid。","explode":false,"in":"path","name":"merge_request_iid","required":true,"schema":{"format":"int32","maximum":2147483647,"minimum":1,"type":"integer"},"style":"simple"}],"requestBody":{"content":{"application/json":{"example":{"assignee_id":9124,"body":"test","line_types":"new","position":{"base_sha":"25897251038e328995d9443b348292d63e52440a","head_sha":"afcab695cbc7014db3c99f18ff5a50094ea02d96","new_line":1,"new_path":"test","old_line":-1,"old_path":"test","position_type":"text","start_sha":"5054195b8132ed1c9a226457f1570fa326a8803b"},"proposer_id":9124,"review_categories":"realize","review_modules":789,"severity":"suggestion"},"schema":{"$ref":"#/components/schemas/CreateMergeRequestNoteDto"}}},"description":"创建合并请求审核设置参数","required":true},"responses":{"201":{"content":{"application/json":{"example":{"a_mode":100644,"added_lines":1,"archived":false,"assignee":{"avatar_url":null,"email":"7806db92698840d794a70e53e1295cb7@example.com","id":1130646,"name":"example_name","name_cn":"example_name","nick_name":"example_name","state":"active","tenant_name":"example_name","username":"7806db92698840d794a70e53e1295cb7","web_url":"https://example.com/7806db92698840d794a70e53e1295cb7"},"b_mode":100644,"deleted_file":false,"diff_file":"@@ -20 +11 @@\\n\\\\ No newline at end of file\\n+# mr_test\\n","id":"3da6d31d0b3d426de6b183d604de50b6b972d87c","individual_note":false,"merge_request_version_params":{},"new_file":false,"noteable_type":"MergeRequest","notes":[{"archived":false,"assignee":{"avatar_url":null,"email":"7806db92698840d794a70e53e1295cb7@example.com","id":1130646,"name":"example_name","name_cn":"example_name","nick_name":"example_name","state":"active","tenant_name":"example_name","username":"7806db92698840d794a70e53e1295cb7","web_url":"https://example.com/7806db92698840d794a70e53e1295cb7"},"author":{"avatar_url":null,"email":"7806db92698840d794a70e53e1295cb7@example.com","id":1130646,"name":"example_name","name_cn":"example_name","nick_name":"example_name","state":"active","tenant_name":"example_name","username":"7806db92698840d794a70e53e1295cb7","web_url":"https://example.com/7806db92698840d794a70e53e1295cb7"},"body":"test","created_at":"2025-01-06T14:54:43.000+08:00","diff":"@@ -20 +11 @@\\n\\\\ No newline at end of file\\n+# mr_test\\n","diff_file":"README.md","discussion_id":"3da6d31d0b3d426de6b183d604de50b6b972d87c","id":1399939,"is_outdated":false,"is_reply":false,"moderation_result":true,"moderation_status":0,"moderation_time":1736146483268,"noteable_id":1242586,"noteable_iid":1,"noteable_type":"MergeRequest","position":{"base_sha":"cdb34fb2431d57aaf6701b4026425acde1d8a84c","head_sha":"2032553aab2bbe1855687885da9165412b3fa3a4","new_line":1,"new_path":"README.md","old_path":"README.md","position_type":"text","start_sha":"cdb34fb2431d57aaf6701b4026425acde1d8a84c"},"proposer":{"avatar_url":null,"email":"7806db92698840d794a70e53e1295cb7@example.com","id":1130646,"name":"example_name","name_cn":"example_name","nick_name":"example_name","state":"active","tenant_name":"example_name","username":"7806db92698840d794a70e53e1295cb7","web_url":"https://example.com/7806db92698840d794a70e53e1295cb7"},"repository":"07c8683c4bb0445393c5eab0ea354003/mr_test","resolvable":true,"resolved":false,"review_categories_cn":null,"review_categories_en":null,"severity":"suggestion","severity_cn":"建议","severity_en":"Suggestion","system":false,"type":"DiffNote","updated_at":"2025-01-06T14:54:43.000+08:00"}],"proposer":{"avatar_url":null,"email":"7806db92698840d794a70e53e1295cb7@example.com","id":1130646,"name":"example_name","name_cn":"example_name","nick_name":"example_name","state":"active","tenant_name":"example_name","username":"7806db92698840d794a70e53e1295cb7","web_url":"https://example.com/7806db92698840d794a70e53e1295cb7"},"removed_lines":1,"repository_full_path":"07c8683c4bb0445393c5eab0ea354003/mr_test","repository_id":2663641,"resolved":false,"review_categories_cn":null,"review_categories_en":null,"severity":"suggestion","severity_cn":"建议","severity_en":"Suggestion"},"schema":{"$ref":"#/components/schemas/MergeRequestDiscussionDto"}}},"description":"OK"},"401":{"content":{"application/json":{"example":{"error_code":"DEV.00000003","error_msg":"认证信息过期"},"schema":{"$ref":"#/components/schemas/ApiError"}}},"description":"Unauthorized"},"403":{"content":{"application/json":{"example":{"error_code":"CH.004403","error_msg":"您没有操作权限,请升级权限后重试。"},"schema":{"$ref":"#/components/schemas/ApiError"}}},"description":"Bad Request"}},"summary":"创建合并请求检视意见","tags":["Discussion"],"x-api-framework":"RestfulAPI","x-api-highrisk":"N","x-api-position":"Region_ZONE","x-api-type":"open-api","x-api-user":"IAM_User","x-is-registered":"Y","x-open-region-cloud":"hws,hws_hk","x-request-examples-1":{"assignee_id":9124,"body":"test","line_types":"new","position":{"base_sha":"25897251038e328995d9443b348292d63e52440a","head_sha":"afcab695cbc7014db3c99f18ff5a50094ea02d96","new_line":1,"new_path":"test","old_line":-1,"old_path":"test","position_type":"text","start_sha":"5054195b8132ed1c9a226457f1570fa326a8803b"},"proposer_id":9124,"review_categories":"realize","review_modules":789,"severity":"suggestion"},"x-request-examples-text-1":{"assignee_id":9124,"body":"test","line_types":"new","position":{"base_sha":"25897251038e328995d9443b348292d63e52440a","head_sha":"afcab695cbc7014db3c99f18ff5a50094ea02d96","new_line":1,"new_path":"test","old_line":-1,"old_path":"test","position_type":"text","start_sha":"5054195b8132ed1c9a226457f1570fa326a8803b"},"proposer_id":9124,"review_categories":"realize","review_modules":789,"severity":"suggestion"},"x-request-examples-url-1":"/v4/repositories/{repository_id}/merge-requests/{merge_request_iid}/discussions","x-sec-auditlog":"Y","x-sec-authority-parameter-body":"null","x-sec-authority-parameter-url":"null","x-sec-privacy-parameter":"null","x-sec-sensitiveinfo":"null","x-sec-upload-download":0,"x-sec-userinput-untrust":"null","x-support-sdk":"Y"}}},"product_short":"CodeHub","region_id":"cn-north-4","schemes":["HTTPS"],"security_definitions":null,"summary":"创建合并请求检视意见","tags":"Discussion","uri":null,"version":"3.0.1"}