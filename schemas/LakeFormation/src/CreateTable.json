{"base_path":null,"components":null,"consumes":"","definitions":{"Column":{"description":"列信息","properties":{"column_name":{"description":"列名","example":"c1","maxLength":767,"minLength":1,"pattern":"^[a-zA-Z0-9_\\-\\+*\\\\(), \\u4e00-\\u9fa5]+$","type":"string"},"column_type":{"description":"列类型,包括array bigint binary boolean char date decimal double float int interval map set smallint string struct timestamp tinyint union varchar","maxLength":65535,"minLength":1,"type":"string"},"comment":{"description":"列描述信息","maxLength":4000,"pattern":".*","type":"string"}},"required":["column_name","column_type"],"type":"object"},"ErrorMessage":{"description":"失败时返回的错误对象","properties":{"common_error_code":{"description":"CBC公共错误码","example":"CMM.1008","maxLength":36,"minLength":1,"type":"string"},"error_code":{"description":"错误码","example":"lakeformation.00010003","maxLength":36,"minLength":8,"type":"string"},"error_msg":{"description":"错误描述","example":"failed","maxLength":4096,"minLength":2,"type":"string"},"solution_msg":{"description":"解决方案描述","example":"Please use correct instance id.","maxLength":4096,"minLength":2,"type":"string"}},"required":["error_code","error_msg"],"type":"object"},"Order":{"description":"排列顺序","properties":{"column":{"description":"列的名称","maxLength":256,"minLength":1,"pattern":"^[a-zA-Z0-9_\\-\\+*\\\\(), \\u4e00-\\u9fa5]+$","type":"string"},"sort_order":{"description":"指示是按升序 (== 1) 还是降序 (==0) 对列进行排序","format":"int32","maximum":1,"minimum":0,"type":"integer"}},"title":"Order","type":"object"},"SerDeInfo":{"description":"序列化/反序列化的信息","properties":{"name":{"description":"名字信息","maxLength":256,"type":"string"},"parameters":{"additionalProperties":{"maxLength":4000,"type":"string"},"description":"参数数组。\nkey最小值1,最大值255\nvalue最大值4000","type":"object"},"serialization_library":{"description":"实现序列化/反序列化的类","maxLength":256,"minLength":1,"type":"string"}},"title":"SerDeInfo"},"SkewedInfo":{"properties":{"skewed_column_names":{"description":"数据偏移列的列表","items":{"maxLength":256,"minLength":1,"pattern":"^[a-zA-Z0-9_\\-\\+*\\\\(), \\u4e00-\\u9fa5]+$","type":"string"},"type":"array"},"skewed_column_value_location_maps":{"additionalProperties":{"type":"string"},"description":"偏斜值和地址的映射关系.","type":"object"},"skewed_column_values":{"description":"偏斜值的列表.","items":{"items":{"type":"string"},"maxItems":255,"type":"array"},"type":"array"}},"required":["skewed_column_names","skewed_column_value_location_maps","skewed_column_values"],"title":"SkewedInfo"},"StorageDescriptor":{"properties":{"bucket_columns":{"description":"分桶字段","items":{"maxLength":255,"minLength":1,"type":"string"},"maxItems":200,"minItems":0,"type":"array"},"columns":{"description":"分区列以外的所有字段","items":{"$ref":"#/definitions/Column"},"maxItems":10000,"type":"array"},"compressed":{"default":false,"description":"是否启用数据压缩","type":"boolean","x-annotations":["@UsNoConstraint(reason = \"Boolean类型无需校验\")"],"x-imports":["com.huawei.us.validator.annotation.UsNoConstraint;"]},"input_format":{"description":"输入格式","maxLength":128,"type":"string"},"location":{"description":"存储路径","maxLength":4000,"pattern":"^(obs|har)://.+/.+$","type":"string"},"number_of_buckets":{"default":0,"description":"分桶的桶数量","format":"int32","type":"integer"},"output_format":{"description":"输出格式","maxLength":128,"type":"string"},"parameters":{"additionalProperties":{"maxLength":4000,"type":"string"},"description":"存储描述符的参数。\nkey最小长度为1,最大长度为255.\nvalue最大长度为4000","type":"object"},"serde_info":{"$ref":"#/definitions/SerDeInfo","description":"序列化/反序列化信息"},"skewed_info":{"$ref":"#/definitions/SkewedInfo","description":"有关在列中经常出现的值(偏斜值)的信息"},"sort_columns":{"description":"指定表中的每个存储桶的排序顺序的列表","items":{"$ref":"#/definitions/Order"},"type":"array"},"stored_as_sub_directories":{"default":false,"description":"数据是否会存放在子目录中","type":"boolean","x-annotations":["@UsNoConstraint(reason = \"Boolean类型无需校验\")"],"x-imports":["com.huawei.us.validator.annotation.UsNoConstraint;"]}},"required":["columns","compressed","parameters","serde_info"],"title":"StorageDescriptor","type":"object"},"Table":{"description":"table","properties":{"catalog_name":{"description":"catalog名字","example":"catalog1","maxLength":256,"minLength":1,"pattern":"[a-zA-Z0-9_]+","type":"string"},"comments":{"description":"表描述信息","maxLength":2048,"pattern":".*","type":"string"},"create_time":{"description":"表创建时间","format":"date-time","type":"string"},"database_name":{"description":"数据库名字","example":"db1","maxLength":128,"minLength":1,"pattern":"^[a-zA-Z0-9\\u4e00-\\u9fa5_]*$","type":"string"},"last_access_time":{"description":"最后访问时间","format":"date-time","type":"string"},"last_analyzed_time":{"description":"上一次做列级别的统计信息计算的时间","format":"date-time","type":"string"},"owner":{"description":"用户信息","maxLength":256,"minLength":1,"pattern":"[a-zA-Z0-9_]+","type":"string"},"owner_type":{"description":"用户类型","enum":["USER","GROUP","ROLE"],"type":"string"},"parameters":{"additionalProperties":{"maxLength":409600,"type":"string"},"description":"参数","type":"object"},"partition_keys":{"description":"表分区列的列表","items":{"$ref":"#/definitions/Column"},"maxItems":100,"type":"array"},"retention":{"description":"表保留时间","format":"int32","type":"integer"},"storage_descriptor":{"$ref":"#/definitions/StorageDescriptor","description":"表的存储描述符"},"table_name":{"description":"表名字","example":"tbl1","maxLength":256,"minLength":1,"pattern":"^[a-zA-Z0-9\\u4e00-\\u9fa5_]*$","type":"string"},"table_type":{"description":"表类型","enum":["MANAGED_TABLE","EXTERNAL_TABLE","VIRTUAL_VIEW","MATERIALIZED_VIEW"],"type":"string"},"update_time":{"description":"表元数据最后一次修改时间","format":"date-time","type":"string"},"view_expanded_text":{"description":"如果表是视图,则为视图的扩展文本;否则为 null","maxLength":409600,"type":"string"},"view_original_text":{"description":"如果表是视图,则为视图的原始文本;否则为 null","maxLength":409600,"type":"string"}},"required":["catalog_name","create_time","database_name","last_access_time","owner","owner_type","parameters","partition_keys","retention","storage_descriptor","table_name","table_type","view_expanded_text","view_original_text"],"title":"Table","type":"object"},"TableInput":{"description":"表输入模型","properties":{"comments":{"default":"","description":"表描述信息。由用户创建表时输入,最大长度为4000个字符。","maxLength":4000,"pattern":".*","type":"string"},"create_time":{"description":"表创建时间","format":"date-time","type":"string"},"ignore_obs_checked":{"default":false,"description":"是否忽略内表建表时对Obs路径的限制","type":"boolean"},"last_access_time":{"description":"最近一次访问时间","format":"date-time","type":"string"},"last_analyzed_time":{"description":"最近一次分析统计时间","format":"date-time","type":"string"},"owner":{"description":"表所有者。只能包含字母、数字和下划线,且长度为1~49个字符。","example":"zhangsan","maxLength":49,"minLength":1,"pattern":"[a-zA-Z0-9_]+","type":"string"},"owner_type":{"description":"所有者类型,USER-用户,GROUP-组,ROLE-角色","enum":["USER","GROUP","ROLE"],"type":"string"},"parameters":{"additionalProperties":{"maxLength":4000,"minLength":0,"type":"string"},"description":"表参数信息,每个键是一个键字符串,不少于 1 个字节或超过 255 个字节\n每个值是一个 UTF-8 字符串,不超过 4000 个字节","type":"object"},"partition_keys":{"description":"分区列的信息","items":{"$ref":"#/definitions/Column"},"maxItems":100,"minItems":0,"type":"array"},"retention":{"default":0,"description":"表保留时间","format":"int32","maximum":2147483647,"minimum":0,"type":"integer"},"storage_descriptor":{"$ref":"#/definitions/StorageDescriptor","description":"数据存储"},"table_name":{"description":"表名称。只能包含中文、字母、数字和下划线,且长度为1~256个字符。","example":"t1","maxLength":256,"minLength":1,"pattern":"^[a-zA-Z0-9\\u4e00-\\u9fa5_]*$","type":"string"},"table_type":{"description":"表类型,MANAGED_TABLE-内表,EXTERNAL_TABLE-外表,VIRTUAL_VIEW-视图,MATERIALIZED_VIEW-物化视图","enum":["MANAGED_TABLE","EXTERNAL_TABLE","VIRTUAL_VIEW","MATERIALIZED_VIEW"],"type":"string"},"view_expanded_text":{"default":"","description":"如果表是视图,则为视图的扩展文本;否则为 null","maxLength":409600,"minLength":0,"type":"string"},"view_original_text":{"default":"","description":"如果表是视图,则为视图的原始文本;否则为 null","maxLength":409600,"minLength":0,"type":"string"}},"required":["table_name","table_type","owner","owner_type","storage_descriptor"],"title":"TableInput","type":"object"}},"description":null,"group_id":"bf0ce8340d8b4439b53683607ef0d87f","host":"lakeformation.cn-north-4.myhuaweicloud.com","id":"59ccb8af05754fa5a5437c29a1818571","info_version":"v1","method":"post","name":"CreateTable","parameters":{},"paths":{"/v1/{project_id}/instances/{instance_id}/catalogs/{catalog_name}/databases/{database_name}/tables":{"post":{"consumes":["application/json"],"deprecated":false,"description":"创建表操作","operationId":"CreateTable","parameters":[{"description":"租户token","in":"header","items":{"type":"string"},"name":"X-Auth-Token","required":true,"type":"array"},{"description":"项目id","in":"path","maxLength":64,"minLength":1,"name":"project_id","pattern":"^[a-z0-9]+$","required":true,"type":"string"},{"description":"实例Id","in":"path","name":"instance_id","pattern":"^[a-zA-Z0-9-]{36}$","required":true,"type":"string"},{"description":"catalog名字","in":"path","maxLength":256,"minLength":1,"name":"catalog_name","pattern":"[a-zA-Z0-9_]+","required":true,"type":"string"},{"description":"数据库名字","in":"path","maxLength":128,"minLength":1,"name":"database_name","pattern":"^[a-zA-Z0-9\\u4e00-\\u9fa5_]*$","required":true,"type":"string"},{"description":"表信息","in":"body","name":"table_input","required":true,"schema":{"$ref":"#/definitions/TableInput"}}],"produces":["application/json;charset=UTF-8"],"responses":{"201":{"description":"Created","examples":{"application/json":{"page_info":{"current_count":1},"tables":[{"catalog_name":"hive","comments":"","create_time":"2022-11-19T03:10:14.000+00:00","database_name":"dba","last_access_time":"1969-12-31T23:59:59.000+00:00","owner":"lakeformation","owner_type":"USER","parameters":{"classification":"avro","transient_lastDdlTime":"1668827414","ww":"ww","www":"ww","wwww":"ww"},"partition_keys":[],"retention":0,"storage_descriptor":{"bucket_columns":[],"columns":[{"column_name":"ww","column_type":"tinyint"}],"compressed":true,"input_format":"org.apache.hadoop.hive.ql.io.avro.AvroContainerInputFormat","location":"obs://lakeformation/test","number_of_buckets":0,"output_format":"org.apache.hadoop.hive.ql.io.avro.AvroContainerOutputFormat","parameters":{},"serde_info":{"name":"name","parameters":{"serialization.format":"1"},"serialization_library":"org.apache.hadoop.hive.serde2.avro.AvroSerDe"},"skewed_info":{"skewed_column_names":[],"skewed_column_value_location_maps":{},"skewed_column_values":[]},"sort_columns":[],"stored_as_sub_directories":false},"table_name":"www","table_type":"MANAGED_TABLE","view_expanded_text":"","view_original_text":""}]}},"schema":{"$ref":"#/definitions/Table"}},"400":{"description":"Bad Request","examples":{"application/json":{"error_code":"common.01000001","error_msg":"failed to read http request, please check your input, code: 400, reason: Type mismatch., cause: TypeMismatchException"}},"schema":{"$ref":"#/definitions/ErrorMessage"}},"401":{"description":"Unauthorized","examples":{"application/json":"{\n  \"error_code\": 'APIG.1002',\n  \"error_msg\": 'Incorrect token or token resolution failed'\n}"}},"403":{"description":"Forbidden","examples":{"application/json":{"error":{"code":"403","message":"X-Auth-Token is invalid in the request","title":"Forbidden"},"error_code":"403","error_msg":"X-Auth-Token is invalid in the request","title":"Forbidden"}}},"404":{"description":"Not Found","examples":{"application/json":{"error_code":"common.01000001","error_msg":"response status exception, code: 404"}},"schema":{"$ref":"#/definitions/ErrorMessage"}},"408":{"description":"Request Timeout","examples":{"application/json":{"error_code":"common.00000408","error_msg":"timeout exception occurred"}}},"500":{"description":"Internal Server Error","examples":{"application/json":{"error_code":"common.00000500","error_msg":"internal error"}},"schema":{"$ref":"#/definitions/ErrorMessage"}}},"summary":"创建表","tags":["Table"],"x-apiexplorer-hide":"N","x-cts-meta-anno":{"isAsyncApi":"false","resourceType":"Table","traceName":"createTable"},"x-is-registered":"Y","x-order":4,"x-request-examples-1":{"page_info":{"current_count":1},"tables":[{"catalog_name":"hive","comments":"","create_time":"2022-11-19T03:10:14.000+00:00","database_name":"dba","last_access_time":"1969-12-31T23:59:59.000+00:00","owner":"lakeformation","owner_type":"USER","parameters":{"classification":"avro","transient_lastDdlTime":"1668827414","ww":"ww","www":"ww","wwww":"ww"},"partition_keys":[],"retention":0,"storage_descriptor":{"bucket_columns":[],"columns":[{"column_name":"ww","column_type":"tinyint"}],"compressed":true,"input_format":"org.apache.hadoop.hive.ql.io.avro.AvroContainerInputFormat","location":"obs://lakeformation/test","number_of_buckets":0,"output_format":"org.apache.hadoop.hive.ql.io.avro.AvroContainerOutputFormat","parameters":{},"serde_info":{"name":"name","parameters":{"serialization.format":"1"},"serialization_library":"org.apache.hadoop.hive.serde2.avro.AvroSerDe"},"skewed_info":{"skewed_column_names":[],"skewed_column_value_location_maps":{},"skewed_column_values":[]},"sort_columns":[],"stored_as_sub_directories":false},"table_name":"www","table_type":"MANAGED_TABLE","view_expanded_text":"","view_original_text":""}]},"x-request-examples-text-1":{"page_info":{"current_count":1},"tables":[{"catalog_name":"hive","comments":"","create_time":"2022-11-19T03:10:14.000+00:00","database_name":"dba","last_access_time":"1969-12-31T23:59:59.000+00:00","owner":"lakeformation","owner_type":"USER","parameters":{"classification":"avro","transient_lastDdlTime":"1668827414","ww":"ww","www":"ww","wwww":"ww"},"partition_keys":[],"retention":0,"storage_descriptor":{"bucket_columns":[],"columns":[{"column_name":"ww","column_type":"tinyint"}],"compressed":true,"input_format":"org.apache.hadoop.hive.ql.io.avro.AvroContainerInputFormat","location":"obs://lakeformation/test","number_of_buckets":0,"output_format":"org.apache.hadoop.hive.ql.io.avro.AvroContainerOutputFormat","parameters":{},"serde_info":{"name":"name","parameters":{"serialization.format":"1"},"serialization_library":"org.apache.hadoop.hive.serde2.avro.AvroSerDe"},"skewed_info":{"skewed_column_names":[],"skewed_column_value_location_maps":{},"skewed_column_values":[]},"sort_columns":[],"stored_as_sub_directories":false},"table_name":"www","table_type":"MANAGED_TABLE","view_expanded_text":"","view_original_text":""}]},"x-request-examples-url-1":"/v1/{project_id}/instances/{instance_id}/catalogs/{catalog_name}/databases/{database_name}/tables","x-support-sdk":"Y"}}},"product_short":"LakeFormation","region_id":"cn-north-4","schemes":["HTTPS"],"security_definitions":null,"summary":"创建表","tags":"数据表管理","uri":null,"version":"2.0"}