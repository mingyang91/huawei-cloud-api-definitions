{"base_path":null,"components":null,"consumes":"","definitions":{"CommonErrorResponse":{"description":"通用错误响应体","properties":{"encoded_authorization_message":{"description":"包含有关未经授权请求的信息。","type":"string","x-omitempty":true},"error_code":{"description":"响应码","maxLength":11,"minLength":11,"type":"string"},"error_msg":{"description":"响应消息","type":"string"}},"type":"object"},"EstimateExecutionPlanPriceResponseBody":{"properties":{"currency":{"description":"币种,枚举值\n  * `CNY` - 元,中国站返回的币种\n  * `USD` - 美元,国际站返回的币种","enum":["CNY","USD"],"type":"string"},"items":{"description":"执行计划中所有资源的询价结果","items":{"$ref":"#/definitions/ItemsResponse"},"type":"array"}},"type":"object"},"IndexPrimitiveTypeHolder":{"properties":{"index":{"description":"资源的索引,若用户在模板中使用了count或for_each则会返回index。若index出现,则resource_name + index可以作为该资源的一种标识\n\n若用户在模板中使用count,则index为从0开始的数字\n\n以HCL格式的模板为例,用户在模板中可以通过`huaweicloud_vpc.my_hello_world_vpc[0]`和`huaweicloud_vpc.my_hello_world_vpc[1]`标识两个资源\n\n```hcl\nresource \"huaweicloud_vpc\" \"my_hello_world_vpc\" {\n  count = 2\n  name = \"test_vpc\"\n}\n```\n\n以json格式的模板为例,用户在模板中可以通过`huaweicloud_vpc.my_hello_world_vpc[0]`和`huaweicloud_vpc.my_hello_world_vpc[1]`标识两个资源\n\n```json\n{\n  \"resource\": {\n    \"huaweicloud_vpc\": {\n      \"my_hello_world_vpc\": {\n        \"name\": \"test_vpc\",\n        \"count\": 2\n      }\n    }\n  }\n}\n```\n\n若用户在模板中使用for_each,则index为用户自定义的字符串\n\n以HCL格式的模板为例,用户在模板中可以通过`huaweicloud_vpc.my_hello_world_vpc[\"vpc1\"]`和`huaweicloud_vpc.my_hello_world_vpc[\"vpc2\"]`标识两个资源\n\n```hcl\nresource \"huaweicloud_vpc\" \"my_hello_world_vpc\" {\n  for_each = {\n    \"vpc1\" = \"test_vpc\"\n    \"vpc2\" = \"test_vpc\"\n  }\n  name = each.value\n}\n```\n\n以json格式的模板为例,用户在模板中可以通过`huaweicloud_vpc.my_hello_world_vpc[\"vpc1\"]`和`huaweicloud_vpc.my_hello_world_vpc[\"vpc2\"]`标识两个资源\n\n```json\n{\n  \"resource\": {\n    \"huaweicloud_vpc\": {\n      \"my_hello_world_vpc\": {\n        \"for_each\": {\n          \"vpc1\": \"test_vpc\",\n          \"vpc2\": \"test_vpc\"\n        }\n        \"name\": \"${each.value}\"\n      }\n    }\n  }\n}\n```","type":"string","x-omitempty":true}},"type":"object"},"ItemsResponse":{"allOf":[{"$ref":"#/definitions/ResourceTypePrimitiveTypeHolder"},{"$ref":"#/definitions/ResourceNamePrimitiveTypeHolder"},{"$ref":"#/definitions/IndexPrimitiveTypeHolder"},{"properties":{"resource_price":{"description":"该资源的询价信息\n\n若该资源支持包周期计费或按需计费,或者该资源为免费资源,则返回该字段;若该资源不支持询价,则不返回该字段。","items":{"$ref":"#/definitions/ResourcePriceResponse"},"type":"array","x-omitempty":true},"supported":{"description":"该资源或该资源当前所给予的参数是否支持进行询价","type":"boolean","x-omitempty":false},"unsupported_message":{"description":"该资源不支持询价的具体原因","type":"string","x-omitempty":true}},"type":"object"}]},"ResourceNamePrimitiveTypeHolder":{"example":{"resource_name":"my_hello_world_vpc"},"properties":{"resource_name":{"description":"资源的名称,默认为资源的逻辑名称\n\n以HCL格式的模板为例,resource_name 为 my_hello_world_vpc\n\n```hcl\nresource \"huaweicloud_vpc\" \"my_hello_world_vpc\" {\n  name = \"test_vpc\"\n}\n```\n\n以json格式的模板为例,resource_name 为 my_hello_world_vpc\n\n```json\n{\n  \"resource\": {\n    \"huaweicloud_vpc\": {\n      \"my_hello_world_vpc\": {\n        \"name\": \"test_vpc\"\n      }\n    }\n  }\n}\n```","type":"string"}},"type":"object"},"ResourcePriceResponse":{"properties":{"charge_mode":{"description":"计费模式\n\n* `PRE_PAID` - 包周期计费\n* `POST_PAID` - 按需计费\n* `FREE` - 免费","enum":["PRE_PAID","POST_PAID","FREE"],"type":"string"},"discount":{"description":"该资源的总优惠额,保留小数点后2位,向上取整,默认单位是元。","format":"double","type":"number","x-omitempty":false},"original_price":{"description":"该资源的原价,保留小数点后2位,向上取整,默认单位是元。","format":"double","type":"number","x-omitempty":false},"period_count":{"description":"该资源的计费数量,需要和period_type搭配使用\n\n若该资源支持包周期计费或按需计费,则会返回该字段;若该资源为免费资源,则不返回该字段。\n\n* 对于按需计费资源,此值默认返回1,代表在1个计费单位下,该资源的价格\n* 对于包周期计费资源,此值与模板中该资源的period字段保持一致","type":"integer","x-omitempty":true},"period_type":{"description":"计费单位\n\n若该资源支持包周期计费或按需计费,则会返回该字段;若该资源为免费资源,则不返回该字段。\n\n* `HOUR` - 小时,按需计费的单位\n* `DAY` - 天,按需计费的单位\n* `MONTH` - 月,包周期计费的单位\n* `YEAR` - 年,包周期计费的单位\n* `BYTE` - 字节,按需计费的单位\n* `MB` - 百万字节,包周期计费和按需计费的单位\n* `GB` - 千兆字节,包周期计费和按需计费的单位","enum":["HOUR","DAY","MONTH","YEAR","BYTE","MB","GB"],"type":"string","x-omitempty":true},"sale_price":{"description":"该资源最终优惠后的金额(只考虑官网折扣、商务折扣以及伙伴折扣,不包含促销折扣及优惠券),保留小数点后2位,向上取整,默认单位是元。","format":"double","type":"number","x-omitempty":false}},"type":"object"},"ResourceTypePrimitiveTypeHolder":{"example":{"resource_type":"huaweicloud_vpc"},"properties":{"resource_type":{"description":"资源的类型\n\n以HCL格式的模板为例,resource_type 为 huaweicloud_vpc\n\n```hcl\nresource \"huaweicloud_vpc\" \"my_hello_world_vpc\" {\n  name = \"test_vpc\"\n}\n```\n\n以json格式的模板为例,resource_type 为 huaweicloud_vpc\n\n```json\n{\n  \"resource\": {\n    \"huaweicloud_vpc\": {\n      \"my_hello_world_vpc\": {\n        \"name\": \"test_vpc\"\n      }\n    }\n  }\n}\n```","type":"string"}},"type":"object"}},"description":null,"group_id":"ffbc0f3a195c4338b5218addf5d56a6c","host":"aos.cn-north-4.myhuaweicloud.com","id":"7243499891454d238e11a14eece9fd91","info_version":"v1","method":"get","name":"EstimateExecutionPlanPrice","parameters":{},"paths":{"/v1/{project_id}/stacks/{stack_name}/execution-plans/{execution_plan_name}/prices":{"get":{"description":"预估执行计划价格(EstimateExecutionPlanPrice)\n\n此API可以基于一份已有的执行计划中增量的资源进行询价,当前支持询价的计费模式有包周期计费、按需计费、免费,暂不支持其他形式的计费模式,例如竞价计费模式等。\n\n注:\n  * 由于某些资源的属性值含有默认值,且该属性和询价参数相关。若用户的模板中描述的资源没有声明这些属性,则询价结果可能存在偏差。\n  * 询价结果仅为预估结果,具体请以实际为准。\n  * 若用户在模板中使用了depends_on参数,如A资源询价必要字段依赖于B资源的创建,则A资源不支持询价。\n  * 暂不支持传入data sources的flavor.id的场景的询价。\n  * 暂不支持镜像询价。\n  * 如果A资源的询价必要字段设置了sensitive = true,则A资源不支持询价。\n  * 模板中询价的资源的个数是有限制的。当前一个模板中最多支持12个包周期计费资源和24个按需计费资源。\n  * 支持询价的资源列表和询价必要参数\n      * huaweicloud_cce_cluster: \n          * 支持的计费模式:包周期、按需\n      * huaweicloud_css_cluster:\n          * 支持的计费模式:按需\n      * huaweicloud_evs_volume: \n          * 支持的计费模式:包周期、按需\n          * 询价必要参数:size(磁盘规格)\n      * huaweicloud_compute_instance: \n          * 支持的计费模式:包周期、按需\n          * 询价必要参数:flavor_id(规格ID)、flavor_name(规格名称,flavor_id和flavor_name至少给出一个)、system_disk_size(系统磁盘大小)\n      * huaweicloud_vpc_bandwidth:\n          * 支持的计费模式:按需\n          * 询价必要参数:charge_mode仅支持bandwidth\n      * huaweicloud_vpc_eip: \n          * 支持的计费模式:包周期、按需\n          * 询价必要参数:bandwidth.size(带宽大小)\n      * huaweicloud_gaussdb_redis_instance: \n          * 支持的计费模式:包周期、按需\n      * huaweicloud_nat_gateway: \n          * 支持的计费模式:按需\n      * huaweicloud_rds_instance: \n          * 支持的计费模式:包周期、按需\n      * huaweicloud_sfs_turbo: \n          * 支持的计费模式:按需\n          * 询价必要参数:share_type(文件系统类型)\n      * huaweicloud_dms_kafka_instance: \n          * 支持的计费模式:按需\n          * 询价必要参数:flavor_id(规格ID)、product_id(产品ID。flavor_id和product_id至少给出一个。)、storage_space(存储容量)\n      * huaweicloud_dcs_instance: \n          * 支持的计费模式:包周期、按需\n      * huaweicloud_gaussdb_mysql_instance: \n          * 支持的计费模式:包周期、按需\n          * 询价必要参数:proxy_node_number(代理节点数量)、volume_size(挂载卷的存储空间)\n      * huaweicloud_vpc: \n          * 支持的计费模式:免费\n      * huaweicloud_drs_job: \n          * 支持的计费模式:按需\n      * huaweicloud_apig_instance: \n          * 支持的计费模式:按需","operationId":"EstimateExecutionPlanPrice","parameters":[{"description":"用户指定的,对于此请求的唯一ID,用于定位某个请求,推荐使用UUID","in":"header","maxLength":128,"minLength":36,"name":"Client-Request-Id","pattern":"^[A-Za-z0-9]+[A-Za-z0-9-]*$","required":true,"type":"string"},{"description":"项目ID,可以从调用API处获取,也可以从控制台获取。\n\n[项目ID获取方式](https://support.huaweicloud.com/api-ticket/ticket_api_20002.html)","in":"path","maxLength":64,"minLength":3,"name":"project_id","pattern":"^[A-Za-z0-9-]+$","required":true,"type":"string"},{"description":"资源栈的名称。此名字在domain_id+区域+project_id下应唯一,可以使用中文、大小写英文、数字、下划线、中划线。首字符需为中文或者英文,区分大小写。","in":"path","maxLength":128,"minLength":1,"name":"stack_name","pattern":"^[一-龥A-Za-z]+[一-龥A-Za-z0-9_-]*$","required":true,"type":"string"},{"description":"执行计划的名称。此名字在domain_id+区域+project_id+stack_id下应唯一,可以使用中文、大小写英文、数字、下划线、中划线。首字符需为中文或者英文,区分大小写。","in":"path","maxLength":128,"minLength":1,"name":"execution_plan_name","pattern":"^[一-龥A-Za-z]+[一-龥A-Za-z0-9_-]*$","required":true,"type":"string"},{"description":"资源栈(stack)的唯一Id。\n\n此Id由资源编排服务在生成资源栈的时候生成,为UUID。\n\n由于资源栈名仅仅在同一时间下唯一,即用户允许先生成一个叫HelloWorld的资源栈,删除,再重新创建一个同名资源栈。\n\n对于团队并行开发,用户可能希望确保,当前我操作的资源栈就是我认为的那个,而不是其他队友删除后创建的同名资源栈。因此,使用ID就可以做到强匹配。\n\n资源编排服务保证每次创建的资源栈所对应的ID都不相同,更新不会影响ID。如果给与的stack_id和当前资源栈的ID不一致,则返回400","in":"query","maxLength":36,"minLength":36,"name":"stack_id","pattern":"^[a-z0-9]+[a-z0-9-]*$","required":false,"type":"string","x-isnullable":true},{"description":"执行计划(execution_plan)的唯一Id。\n\n此Id由资源编排服务在生成执行计划的时候生成,为UUID。\n\n由于执行计划名仅仅在同一时间下唯一,即用户允许先生成一个叫HelloWorld的执行计划,删除,再重新创建一个同名执行计划。\n\n对于团队并行开发,用户可能希望确保,当前我操作的执行计划就是我认为的那个,而不是其他队友删除后创建的同名执行计划。因此,使用ID就可以做到强匹配。\n\n资源编排服务保证每次创建的执行计划所对应的ID都不相同,更新不会影响ID。如果给与的execution_plan_id和当前执行计划的ID不一致,则返回400","in":"query","maxLength":36,"minLength":36,"name":"execution_plan_id","pattern":"^[a-z0-9]+[a-z0-9-]*$","required":false,"type":"string"}],"produces":["application/json"],"responses":{"200":{"description":"询价成功","examples":{"example":{"currency":"CNY","items":[{"resource_name":"vpc","resource_price":[{"charge_mode":"FREE","discount":0,"original_price":0,"sale_price":0}],"resource_type":"huaweicloud_vpc","supported":true}]}},"schema":{"$ref":"#/definitions/EstimateExecutionPlanPriceResponseBody"}},"400":{"description":"用户请求非法","schema":{"$ref":"#/definitions/CommonErrorResponse"}},"401":{"description":"用户身份认证失败","schema":{"$ref":"#/definitions/CommonErrorResponse"}},"403":{"description":"用户无权限调用此API","schema":{"$ref":"#/definitions/CommonErrorResponse"}},"404":{"description":"执行计划不存在","schema":{"$ref":"#/definitions/CommonErrorResponse"}},"429":{"description":"请求数量过多","schema":{"$ref":"#/definitions/CommonErrorResponse"}},"500":{"description":"服务器内部错误","schema":{"$ref":"#/definitions/CommonErrorResponse"}}},"summary":"预估执行计划价格","tags":["Execution Plan"],"x-api-type":"open-api","x-is-registered":"Y","x-request-examples-description-1":"预估执行计划价格,该执行计划中包含了一个新创建的vpc资源","x-request-examples-description-2":"预估执行计划价格,该执行计划中包含了一个新创建的vpc资源,并提供资源栈id和执行计划id以校验是否与当前资源栈和执行计划匹配","x-request-examples-url-1":"GET https://{endpoint}/v1/ba2b9930c977f71edaeaa3a5e96a8ff1/stacks/my_hello_world_stack/execution-plans/my_first_execution_plan/prices","x-request-examples-url-2":"GET https://{endpoint}/v1/ba2b9930c977f71edaeaa3a5e96a8ff1/stacks/my_hello_world_stack/execution-plans/my_first_execution_plan/prices?stack_id=ea6a4f0e-ee8a-494e-b12a-8be4a1e65af2&execution_plan_id=fb5e781e-a27d-46e2-9954-242753857a9f","x-support-sdk":"Y"}}},"product_short":"AOS","region_id":"cn-north-4","schemes":["HTTPS"],"security_definitions":{"apig-auth-app":{"in":"header","name":"Authorization","type":"apiKey","x-apigateway-auth-type":"AppSigv1"},"apig-auth-app-optional":{"in":"header","name":"Authorization","type":"apiKey","x-apigateway-auth-opt":{"access-auth-type":"optional"},"x-apigateway-auth-type":"AppSigv1"},"apig-auth-iam":{"in":"header","name":"unused","type":"apiKey","x-apigateway-auth-type":"IAM"},"apig-auth-iam-none":{"in":"header","name":"unused","type":"apiKey","x-apigateway-auth-type":"IAM_NONE"},"token":{"in":"header","name":"X-Auth-Token","type":"apiKey"}},"summary":"预估执行计划价格","tags":"资源编排-执行计划","uri":null,"version":"2.0"}