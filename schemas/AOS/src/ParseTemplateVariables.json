{"base_path":null,"components":null,"consumes":"[\"application/json\"]","definitions":{"CommonErrorResponse":{"description":"通用错误响应体","properties":{"details":{"description":"权限拒绝时服务返回的详细错误信息。","items":{"$ref":"#/definitions/Detail"},"type":"array","x-omitempty":true},"encoded_authorization_message":{"description":"包含有关未经授权请求的信息。","type":"string","x-omitempty":true},"error_code":{"description":"响应码","maxLength":11,"minLength":11,"type":"string"},"error_msg":{"description":"响应消息","type":"string"}},"type":"object"},"Detail":{"properties":{"error_code":{"description":"响应码","type":"string"},"error_msg":{"description":"响应消息","type":"string"}},"type":"object"},"ParseTemplateVariablesRequestBody":{"allOf":[{"$ref":"#/definitions/TemplateBodyPrimitiveTypeHolder"},{"$ref":"#/definitions/TemplateURIPrimitiveTypeHolder"}]},"ParseTemplateVariablesResponseBody":{"properties":{"variables":{"description":"解析模板得到的参数列表","items":{"$ref":"#/definitions/VariableResponse"},"type":"array","x-omitempty":true}},"type":"object"},"TemplateBodyPrimitiveTypeHolder":{"example":{"template_body":""},"properties":{"template_body":{"description":"HCL模板,描述了资源的目标状态。资源编排服务将比较此模板与当前远程资源的状态之间的区别。\n\ntemplate_body和template_uri 必须有且只有一个存在\n\n**注意:**\n  * 资源栈集不支持敏感数据加密,资源编排服务会直接明文使用、log、展示、存储对应的template_body","maxLength":51200,"minLength":0,"type":"string"}},"type":"object"},"TemplateURIPrimitiveTypeHolder":{"example":{"template_uri":"https://your-bucket.cn-north-7.myhuaweicloud.com/my-hello-world-template.tf"},"properties":{"template_uri":{"description":"HCL模板的OBS地址,该模板描述了资源的目标状态。资源编排服务将比较此模板与当前远程资源的状态之间的区别\n\n请确保OBS地址所在局点与使用RFS服务局点一致。\n\n对应的文件应该是纯tf文件或zip压缩包\n\n纯tf文件需要以“.tf”或者“.tf.json”结尾,并遵守HCL语法,且文件的编码格式须为UTF-8\n\n压缩包目前只支持zip格式,文件需要以\".zip\"结尾。解压后的文件不得包含\".tfvars\"文件。解压前最大支持1MB,解压后最大支持1MB。zip压缩包文件数量不能超过100个\n\ntemplate_body和template_uri 必须有且只有一个存在\n\n**注意:**\n  * 资源栈集不支持敏感数据加密,资源编排服务会直接明文使用、log、展示、存储template_uri对应的模板文件内容。\n  * template_uri对应的模板文件如果为zip类型,则内部的文件或文件夹名称长度不得超过255个字节,最深路径长度不得超过2048字节,zip包大小不得超过1MB","maxLength":2048,"minLength":0,"pattern":"^(http|https)://[\\S]*(\\.tf|\\.tf.json|\\.zip){1}(\\?[\\S]+)?$","type":"string"}},"type":"object"},"VariableResponse":{"properties":{"default":{"description":"参数默认值。此返回值的类型将与type保持一致\n\n例如,对于type为string的变量,此值的返回类型为string;对于type为number的变量,此值的返回类型为number\n\n以HCL格式的模板为例,default 为 `hello world`\n\n```hcl\nvariable \"my_hello_world_variable\" {\n  type = string\n  description = \"this is a variable\"\n  default = \"hello world\"\n  sensitive = false\n  nullable = false\n  validation {\n    condition     = length(var.my_hello_world_variable) > 0 && substr(var.my_hello_world_variable, 0, 5) == \"hello\"\n    error_message = \"my_hello_world_variable should start with 'hello'.\"\n  }\n}\n```\n\n以json格式的模板为例,default 为 `hello world`\n\n```json\n{\n  \"variable\": {\n    \"my_hello_world_variable\": [\n      {\n        \"default\": \"hello world\",\n        \"description\": \"this is a variable\",\n        \"nullable\": false,\n        \"sensitive\": false,\n        \"type\": \"string\",\n        \"validation\": [\n          {\n            \"condition\": \"${length(var.my_hello_world_variable) > 0 && substr(var.my_hello_world_variable, 0, 5) == \\\"hello\\\"}\",\n            \"error_message\": \"my_hello_world_variable should start with 'hello'.\"\n          }\n        ]\n      }\n    ]\n  }\n}\n```","properties":{},"type":"object"},"description":{"description":"参数的描述\n\n以HCL格式的模板为例,description 为 `this is a variable`\n\n```hcl\nvariable \"my_hello_world_variable\" {\n  type = string\n  description = \"this is a variable\"\n  default = \"hello world\"\n  sensitive = false\n  nullable = false\n  validation {\n    condition     = length(var.my_hello_world_variable) > 0 && substr(var.my_hello_world_variable, 0, 5) == \"hello\"\n    error_message = \"my_hello_world_variable should start with 'hello'.\"\n  }\n}\n```\n\n以json格式的模板为例,description 为 `this is a variable`\n\n```json\n{\n  \"variable\": {\n    \"my_hello_world_variable\": [\n      {\n        \"default\": \"hello world\",\n        \"description\": \"this is a variable\",\n        \"nullable\": false,\n        \"sensitive\": false,\n        \"type\": \"string\",\n        \"validation\": [\n          {\n            \"condition\": \"${length(var.my_hello_world_variable) > 0 && substr(var.my_hello_world_variable, 0, 5) == \\\"hello\\\"}\",\n            \"error_message\": \"my_hello_world_variable should start with 'hello'.\"\n          }\n        ]\n      }\n    ]\n  }\n}\n```","type":"string"},"name":{"description":"参数的名字\n\n以HCL格式的模板为例,name 为 `my_hello_world_variable`\n\n```hcl\nvariable \"my_hello_world_variable\" {\n  type = string\n  description = \"this is a variable\"\n  default = \"hello world\"\n  sensitive = false\n  nullable = false\n  validation {\n    condition     = length(var.my_hello_world_variable) > 0 && substr(var.my_hello_world_variable, 0, 5) == \"hello\"\n    error_message = \"my_hello_world_variable should start with 'hello'.\"\n  }\n}\n```\n\n以json格式的模板为例,name 为 `my_hello_world_variable`\n\n```json\n{\n  \"variable\": {\n    \"my_hello_world_variable\": [\n      {\n        \"default\": \"hello world\",\n        \"description\": \"this is a variable\",\n        \"nullable\": false,\n        \"sensitive\": false,\n        \"type\": \"string\",\n        \"validation\": [\n          {\n            \"condition\": \"${length(var.my_hello_world_variable) > 0 && substr(var.my_hello_world_variable, 0, 5) == \\\"hello\\\"}\",\n            \"error_message\": \"my_hello_world_variable should start with 'hello'.\"\n          }\n        ]\n      }\n    ]\n  }\n}\n```","type":"string"},"nullable":{"description":"参数是否可设置为null。\n\n如果variable中没有定义nullable,默认返回true。\n\n以HCL格式的模板为例,nullable 为 `false`\n\n```hcl\nvariable \"my_hello_world_variable\" {\n  type = string\n  description = \"this is a variable\"\n  default = \"hello world\"\n  sensitive = false\n  nullable = false\n  validation {\n    condition     = length(var.my_hello_world_variable) > 0 && substr(var.my_hello_world_variable, 0, 5) == \"hello\"\n    error_message = \"my_hello_world_variable should start with 'hello'.\"\n  }\n}\n```\n\n以json格式的模板为例,nullable 为 `false`\n\n```json\n{\n  \"variable\": {\n    \"my_hello_world_variable\": [\n      {\n        \"default\": \"hello world\",\n        \"description\": \"this is a variable\",\n        \"nullable\": false,\n        \"sensitive\": false,\n        \"type\": \"string\",\n        \"validation\": [\n          {\n            \"condition\": \"${length(var.my_hello_world_variable) > 0 && substr(var.my_hello_world_variable, 0, 5) == \\\"hello\\\"}\",\n            \"error_message\": \"my_hello_world_variable should start with 'hello'.\"\n          }\n        ]\n      }\n    ]\n  }\n}\n```","type":"boolean","x-omitempty":false},"sensitive":{"description":"参数是否为敏感字段\n\n如果variable中没有定义sensitive,默认返回false。\n\n以HCL格式的模板为例,sensitive 为 `false`\n\n```hcl\nvariable \"my_hello_world_variable\" {\n  type = string\n  description = \"this is a variable\"\n  default = \"hello world\"\n  sensitive = false\n  nullable = false\n  validation {\n    condition     = length(var.my_hello_world_variable) > 0 && substr(var.my_hello_world_variable, 0, 5) == \"hello\"\n    error_message = \"my_hello_world_variable should start with 'hello'.\"\n  }\n}\n```\n\n以json格式的模板为例,sensitive 为 `false`\n\n```json\n{\n  \"variable\": {\n    \"my_hello_world_variable\": [\n      {\n        \"default\": \"hello world\",\n        \"description\": \"this is a variable\",\n        \"nullable\": false,\n        \"sensitive\": false,\n        \"type\": \"string\",\n        \"validation\": [\n          {\n            \"condition\": \"${length(var.my_hello_world_variable) > 0 && substr(var.my_hello_world_variable, 0, 5) == \\\"hello\\\"}\",\n            \"error_message\": \"my_hello_world_variable should start with 'hello'.\"\n          }\n        ]\n      }\n    ]\n  }\n}\n```","type":"boolean","x-omitempty":false},"type":{"description":"参数的类型\n\n以HCL格式的模板为例,type 为 `string`\n\n```hcl\nvariable \"my_hello_world_variable\" {\n  type = string\n  description = \"this is a variable\"\n  default = \"hello world\"\n  sensitive = false\n  nullable = false\n  validation {\n    condition     = length(var.my_hello_world_variable) > 0 && substr(var.my_hello_world_variable, 0, 5) == \"hello\"\n    error_message = \"my_hello_world_variable should start with 'hello'.\"\n  }\n}\n```\n\n以json格式的模板为例,type 为 `string`\n\n```json\n{\n  \"variable\": {\n    \"my_hello_world_variable\": [\n      {\n        \"default\": \"hello world\",\n        \"description\": \"this is a variable\",\n        \"nullable\": false,\n        \"sensitive\": false,\n        \"type\": \"string\",\n        \"validation\": [\n          {\n            \"condition\": \"${length(var.my_hello_world_variable) > 0 && substr(var.my_hello_world_variable, 0, 5) == \\\"hello\\\"}\",\n            \"error_message\": \"my_hello_world_variable should start with 'hello'.\"\n          }\n        ]\n      }\n    ]\n  }\n}\n```","type":"string"},"validations":{"description":"参数的校验模块","items":{"$ref":"#/definitions/VariableValidationResponse"},"type":"array","x-omitempty":true}},"type":"object"},"VariableValidationResponse":{"properties":{"condition":{"description":"校验表达式","type":"string"},"error_message":{"description":"校验失败后的错误信息","type":"string"}},"type":"object"}},"description":null,"group_id":"ffbc0f3a195c4338b5218addf5d56a6c","host":"rfs.cn-north-4.myhuaweicloud.com","id":"8605f51d898a4bd7bd3b085c49c1b07f","info_version":"v1","method":"post","name":"ParseTemplateVariables","parameters":{},"paths":{"/v1/{project_id}/template-analyses/variables":{"post":{"description":"解析模板参数(ParseTemplateVariables)\n\n此API用于解析用户输入的模板中的参数(variable),将解析模板中的所有variable块并返回\n\n* 如果用户传入的模板中定义了variable参数,则返回200和所有variable\n* 如果用户传入的模板中没有定义variable参数,则返回200和空对象\n* 如果用户请求非法或传入的模板非法,则返回400","operationId":"ParseTemplateVariables","parameters":[{"description":"用户指定的,对于此请求的唯一ID,用于定位某个请求,推荐使用UUID","in":"header","maxLength":128,"minLength":36,"name":"Client-Request-Id","pattern":"^[A-Za-z0-9]+[A-Za-z0-9-]*$","required":true,"type":"string"},{"description":"项目ID,可以从调用API处获取,也可以从控制台获取。\n\n[项目ID获取方式](https://support.huaweicloud.com/api-ticket/ticket_api_20002.html)","in":"path","maxLength":64,"minLength":3,"name":"project_id","pattern":"^[A-Za-z0-9-]+$","required":true,"type":"string"},{"description":"ParseTemplateVariables API的请求Body体","in":"body","name":"ParseTemplateVariablesRequestBody","required":true,"schema":{"$ref":"#/definitions/ParseTemplateVariablesRequestBody"}}],"produces":["application/json"],"responses":{"200":{"description":"解析成功","examples":{"x-response-examples-1":{"variables":[{"default":"my_default_vpc","name":"name","nullable":true,"sensitive":true,"type":"string","validations":[{"condition":"${length(var.id) > 2 && substr(var.id, 0, 2) == \"my\"}","error_message":"The id value must be a valid id, starting with my."}]}]}},"schema":{"$ref":"#/definitions/ParseTemplateVariablesResponseBody"}},"400":{"description":"用户请求非法","schema":{"$ref":"#/definitions/CommonErrorResponse"}},"401":{"description":"用户身份认证失败","schema":{"$ref":"#/definitions/CommonErrorResponse"}},"403":{"description":"用户无权限调用此API","schema":{"$ref":"#/definitions/CommonErrorResponse"}},"429":{"description":"请求数量过多","schema":{"$ref":"#/definitions/CommonErrorResponse"}},"500":{"description":"服务器内部错误","schema":{"$ref":"#/definitions/CommonErrorResponse"}}},"summary":"解析模板参数","tags":["Template Analyse"],"x-api-type":"open-api","x-is-registered":"Y","x-request-examples-1":{"template_uri":"https://my_hello_world_bucket.{region}.myhuaweicloud.com/my_hello_world_template.zip"},"x-request-examples-2":{"template_body":"terraform {\n    required_providers {\n      huaweicloud = {\n        source = \"huawei.com/provider/huaweicloud\"\n        version = \"1.41.0\"\n        }\n    }\n}\nprovider \"huaweicloud\"{\n    insecure = true\n    cloud = \"{cloud_name}\"\n    region = \"{region}\"\n    endpoints = {\n        iam = \"{iam_endpoint}\"\n    }\n}\n\nvariable \"name\" {\n  type = string\n  default = \"my_default_vpc\"\n  sensitive = true\n  nullable = true\n  validation {\n  condition     = length(var.name) > 2 && substr(var.name, 0, 2) == \"my\"\n  error_message = \"The name value must be a valid name, starting with my.\"\n  }\n}\n\nresource \"huaweicloud_vpc\" \"vpc\" {\n  cidr = \"172.16.0.0/16\"\n  name = var.name\n}"},"x-request-examples-description-1":"解析uri中的模板的参数","x-request-examples-description-2":"解析请求中的模板的参数。RFS模板支持HCL语法,同时规定required_providers模块下用于声明provider路径的source字段,需按照huawei.com/provider/{provider_name}的形式拼接,例如huawei.com/provider/huaweicloud","x-request-examples-url-1":"POST https://{endpoint}/v1/ba2b9930c977f71edaeaa3a5e96a8ff1/template-analyses/variables","x-request-examples-url-2":"POST https://{endpoint}/v1/ba2b9930c977f71edaeaa3a5e96a8ff1/template-analyses/variables","x-support-sdk":"Y"}}},"product_short":"AOS","region_id":"cn-north-4","schemes":["HTTPS"],"security_definitions":{"apig-auth-app":{"in":"header","name":"Authorization","type":"apiKey","x-apigateway-auth-type":"AppSigv1"},"apig-auth-app-optional":{"in":"header","name":"Authorization","type":"apiKey","x-apigateway-auth-opt":{"access-auth-type":"optional"},"x-apigateway-auth-type":"AppSigv1"},"apig-auth-iam":{"in":"header","name":"unused","type":"apiKey","x-apigateway-auth-type":"IAM"},"apig-auth-iam-none":{"in":"header","name":"unused","type":"apiKey","x-apigateway-auth-type":"IAM_NONE"},"token":{"in":"header","name":"X-Auth-Token","type":"apiKey"}},"summary":"解析模板参数","tags":"资源编排-模板分析","uri":null,"version":"2.0"}