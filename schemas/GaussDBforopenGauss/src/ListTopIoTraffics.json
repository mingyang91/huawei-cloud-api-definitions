{"base_path":"/","components":null,"consumes":"[\"application/json;charset=UTF-8\"]","definitions":{"ListTopIoTrafficsResponseBody":{"properties":{"top_io_infos":{"description":"Top IO列表","items":{"$ref":"#/definitions/TopIoInfo"},"type":"array"}}},"ParaErrorResponseBody":{"properties":{"error_code":{"description":"错误码。","example":"DBS.280001","type":"string"},"error_msg":{"description":"错误消息。","example":"参数错误。","type":"string"}},"required":["error_code","error_msg"]},"TopIoInfo":{"description":"Top IO信息","properties":{"client_ip":{"description":"客户端IP","example":"23.100.74.131","type":"string"},"database_name":{"description":"数据库","example":"postgres","type":"string"},"disk_read_rate":{"description":"从磁盘读取数据速率, 单位:KB/s","example":0.0,"format":"float","type":"integer"},"disk_write_rate":{"description":"写入磁盘数据速率, 单位:KB/s","example":1.43,"format":"float","type":"integer"},"session_id":{"description":"会话ID","example":"725","type":"string"},"sql_start":{"description":"语句开始时间","example":1690448618689,"format":"int64","type":"integer"},"state":{"description":"状态","example":"active","type":"string"},"thread_id":{"description":"线程ID","example":"55067","type":"string"},"thread_type":{"description":"线程分类标识,取值:业务(worker)和后台(background)。需将GUC参数\"enable_thread_pool\"设置为on","enum":["worker","background"],"example":"worker","type":"string"},"unique_sql_id":{"description":"SQL ID","example":"3545025713","type":"string"},"user_name":{"description":"用户名","example":"root","type":"string"}}}},"description":null,"group_id":"cb81c3e0ae314c27a40e8fc90fd34a80","host":"gaussdb-opengauss.cn-north-4.myhuaweicloud.com","id":"cc825446bbcb444b84e5631418bf38bd","info_version":"v3","method":"get","name":"ListTopIoTraffics","parameters":{},"paths":{"/v3/{project_id}/instances/{instance_id}/top-io-traffics":{"get":{"description":"查询实例数据库进程下的Top IO流量数据,返回与会话信息相关联后的结果","operationId":"ListTopIoTraffics","parameters":[{"description":"用户Token","in":"header","name":"X-Auth-Token","required":true,"type":"string","x-example":"******"},{"description":"语言","in":"header","name":"X-Language","required":false,"type":"string","x-example":"zh-cn"},{"description":"租户在某一region下的project ID。\n\n获取方法请参见[获取项目ID](https://support.huaweicloud.com/api-opengauss/opengauss_api_0034.html)。","in":"path","name":"project_id","required":true,"type":"string","x-example":"0483b6b16e954cb88930a360d2c4e663"},{"description":"实例ID,严格匹配UUID规则。","in":"path","name":"instance_id","required":true,"type":"string","x-example":"cc6fd964d93f4003851dfc29d57d30a5in14"},{"description":"节点ID。节点应为CN或者非日志角色的DN节点,并且节点状态为正常。","in":"query","name":"node_id","required":true,"type":"string","x-example":"42cbf784585e419d9eb33c005f4ced94no14"},{"description":"组件ID。组件应为CN或者非日志角色的DN组件。\nDN:Data Node,和CN对应的概念。负责实际执行表数据的存储、查询操作。\nCN:Coordinator Node,负责数据库系统元数据存储、查询任务的分解和部分执行,以及将DN中查询结果汇聚在一起。","in":"query","name":"component_id","required":true,"type":"string","x-example":"dn_6001"},{"description":"期望查询数据库进程下TOP IO线程数(默认值为20)。接口返回TOP IO线程与会话信息关联后的结果,数量最大不超过该值。","in":"query","name":"top_io_num","required":false,"type":"integer","x-example":20},{"description":"TOP IO排序条件","enum":["read","write"],"in":"query","name":"sort_condition","required":false,"type":"string","x-example":"worker"}],"responses":{"200":{"description":"Success.","examples":{"application/json":{"top_io_infos":[{"client_ip":"23.100.74.131","database_name":"postgres","disk_read_rate":0,"disk_write_rate":1.43,"session_id":"725","sql_start":1690448618689,"state":"active","thread_id":"55067","thread_type":"worker","unique_sql_id":"3545025713","user_name":"root"}]}},"schema":{"$ref":"#/definitions/ListTopIoTrafficsResponseBody"}},"default":{"description":"Client or server error.","schema":{"$ref":"#/definitions/ParaErrorResponseBody"}}},"summary":"查询Top IO列表","tags":["实例管理"],"x-constraint":"实例资源类型和操作系统需支持pidstat命令","x-is-registered":"Y","x-request-examples-description-1":"查询Top IO列表","x-request-examples-url-1":"GET https://{Endpoint}/gaussdb/v3/0483b6b16e954cb88930a360d2c4e663/instances/cc6fd964d93f4003851dfc29d57d30a5in14/top-io-traffics?node_id=42cbf784585e419d9eb33c005f4ced94no14&component_id=dn_6001","x-support-sdk":"Y"}}},"product_short":"GaussDBforopenGauss","region_id":"cn-north-4","schemes":["HTTPS"],"security_definitions":null,"summary":"查询Top IO列表","tags":"实例管理","uri":null,"version":"2.0"}