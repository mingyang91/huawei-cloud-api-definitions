{"base_path":"/","components":null,"consumes":"[\"application/json;charset=UTF-8\"]","definitions":{"ErrorResponseBody":{"properties":{"error_code":{"description":"**参数解释**:\n错误码。\n**取值范围**:\n不涉及。","example":"DBS.00114000","type":"string"},"error_msg":{"description":"**参数解释**:\n错误消息。\n**取值范围**:\n不涉及。","example":"系统内部错误","type":"string"}},"required":["error_code","error_msg"]},"OpenGaussBackupStrategy":{"description":"备份策略。","properties":{"keep_days":{"description":"指定备份文件的可保存天数。\n\n取值范围:0~732。该参数缺省或为0时,默认填写为7天。","format":"int32","type":"integer"},"start_time":{"description":"备份时间段。自动备份将在该时间段内触发。\n\n取值范围:非空,格式必须为hh:mm-HH:MM且有效,当前时间指UTC时间。\n\n- HH取值必须比hh大1。\n- mm和MM取值必须相同,且取值必须为00。\n取值示例:\n\n- 08:00-09:00\n- 23:00-00:00","example":"23:00-00:00","type":"string"}},"required":["start_time"]},"OpenGaussBackupStrategyForResponse":{"description":"自动备份策略。","properties":{"keep_days":{"description":"指定已生成备份文件的可保存天数。\n\n取值范围:1~732。\n\n如果请求体中不填写“backup_strategy”字段,则响应体中 “keep_days”默认返回“7”。","format":"int32","type":"integer"},"start_time":{"description":"备份时间段。自动备份将在该时间段内触发。\n\n取值范围:非空,格式必须为hh:mm-HH:MM且有效,当前时间指UTC时间。\n\n- HH取值必须比hh大1。\n- mm和MM取值必须相同,且取值必须为00。\n取值示例:\n\n- 08:00-09:00\n- 23:00-00:00","example":"23:00-00:00","type":"string"}},"required":["start_time","keep_days"]},"OpenGaussChargeInfo":{"description":"计费类型信息,仅支持按需和包周期。","properties":{"charge_mode":{"description":"计费模式。postPaid:后付费,即按需付费。prePaid:预付费,即包年/包月。","enum":["postPaid","prePaid"],"type":"string"},"is_auto_pay":{"description":"创建包周期实例时可指定,表示是否自动从账户中支付,该字段不影响自动续订的支付方式。\n\ntrue,表示自动从账户中支付。\nfalse,表示手动从账户中支付,默认为该支付方式。","type":"boolean"},"is_auto_renew":{"description":"创建包周期实例时可指定,表示是否自动续订,续订时会自动支付。\n按月订购时续订周期默认为1个月,按年订购时续订周期默认为1年,续订周期可自定义修改。\n\ntrue,表示自动续订。\nfalse,表示不自动续订,默认为该方式。","type":"boolean"},"period_num":{"description":"“charge_mode”为“prePaid”时生效,且为必选值,指定订购的时间。\n\n取值范围:\n\n当“period_type”为“month”时,取值为1~9。\n当“period_type”为“year”时,取值为1~3。\n\n当传入浮点型时,会自动截取为整型。","type":"integer"},"period_type":{"description":"订购周期类型。month:包月。year:包年。\n说明:\n“charge_mode”为“prePaid”时生效,且为必选值。","enum":["month","year"],"type":"string"}},"required":["charge_mode"]},"OpenGaussChargeInfoResponse":{"description":"计费类型信息,支持按需和包周期。","properties":{"charge_mode":{"description":"计费模式。postPaid:后付费,即按需付费。prePaid:预付费,即包年/包月。","enum":["postPaid","prePaid"],"type":"string"},"is_auto_pay":{"description":"创建包周期实例时可指定,表示是否自动从账户中支付,该字段不影响自动续订的支付方式。\n\ntrue,表示自动从账户中支付。\nfalse,表示手动从账户中支付,默认为该支付方式。","type":"boolean"},"is_auto_renew":{"description":"创建包周期实例时可指定,表示是否自动续订,续订的周期和原周期相同,且续订时会自动支付。\n\ntrue,表示自动续订。\nfalse,表示不自动续订,默认为该方式。","type":"boolean"},"period_num":{"description":"“charge_mode”为“prePaid”时生效,且为必选值,指定订购的时间。\n\n取值范围:\n\n当“period_type”为“month”时,取值为1~9。\n当“period_type”为“year”时,取值为1~3。","format":"int32","type":"integer"},"period_type":{"description":"订购周期类型。month:包月。year:包年。\n说明:\n“charge_mode”为“prePaid”时生效,且为必选值。","enum":["month","year"],"type":"string"}},"required":["charge_mode"]},"OpenGaussCreateInstanceResponse":{"properties":{"instance":{"$ref":"#/definitions/OpenGaussInstanceResponse"},"job_id":{"description":"实例创建的任务id。\n\n仅创建按需实例时会返回该参数。","example":"dff1d289-4d03-4942-8b9f-463ea07c000d","type":"string"},"order_id":{"description":"创建实例的订单ID。\n\n仅创建包周期实例时会返回该参数。","example":"CS2205191100OWHLL","type":"string"}},"required":["instance"]},"OpenGaussDatastore":{"description":"数据库信息。","properties":{"type":{"description":"数据库引擎,不区分大小写,取值如下:\n\nGaussDB(for openGauss)。","enum":["GaussDB(for openGauss)","GaussDB"],"example":"GaussDB(for openGauss)","type":"string"},"version":{"description":"数据库版本。不填时,默认为当前最新版本。\n\nGaussDB支持的版本参考[查询数据库引擎的版本](https://apiexplorer.developer.huaweicloud.com/apiexplorer/doc?product=GaussDBforopenGauss&api=ListDatastores)。","example":"1.4","type":"string"}},"required":["type"]},"OpenGaussDatastoreResponse":{"description":"数据库版本。不填时,默认为当前最新版本。\n\n数据库支持版本可根据查询数据库引擎版本接口获取","properties":{"type":{"description":"数据库引擎,不区分大小写,取值如下:\n\nGaussDB(for openGauss)","enum":["GaussDB","GaussDB(for openGauss)"],"example":"GaussDB","type":"string"},"version":{"description":"数据库版本。","example":"1.4","type":"string"}},"required":["type","version"]},"OpenGaussHa":{"description":"实例部署形态。","properties":{"consistency":{"description":"指定实例一致性类型,当创建分布式模式实例时,该字段值必传,当创建主备模式实例时,该字段值不传。取值范围:strong(强一致性) | eventual(最终一致性),不分区大小写。","enum":["strong","eventual"],"example":"strong","type":"string"},"instance_mode":{"description":"指定创建实例的产品类型,创建企业版实例时传空值或者enterprise,创建基础版实例时需要指定instance_mode的值为basic,创建生态版实例时需要指定instance_mode的值为ecology。","enum":["enterprise","basic","ecology"],"type":"string"},"mode":{"description":"GaussDB为分布式时,取值:enterprise;为集中式时,取值:centralization_standard。不区分大小写。","enum":["enterprise","centralization_standard"],"example":"enterprise","type":"string"},"replication_mode":{"description":"备机同步参数。\n\n取值:\n\nGaussDB为“sync\"\n\n说明:\n- “sync”为同步模式。","enum":["sync"],"type":"string"}},"required":["mode","replication_mode","consistency"]},"OpenGaussHaResponse":{"description":"实例部署形态。","properties":{"consistency":{"description":"GaussDB的预留参数:指定实例一致性类型,取值范围:strong(强一致性) | eventual(最终一致性)。","enum":["strong","eventual"],"example":"strong","type":"string"},"mode":{"description":"GaussDB 分布式模式,返回值为:Enterprise(企业版);主备版,返回值为:Ha(主备版)。","enum":["Enterprise","Ha"],"example":"Enterprise","type":"string"},"replication_mode":{"description":"备机同步参数。\n\n取值:\n\nGaussDB为“sync”。\n说明:\n- “sync”为同步模式。","enum":["sync"],"type":"string"}},"required":["mode","replication_mode","consistency"]},"OpenGaussInstanceRequest":{"description":"实例信息","properties":{"availability_zone":{"description":"可用区ID。\n\nGaussDB取值范围:非空,可选部署在同一可用区或三个不同可用区,可用区之间用逗号隔开。详见示例。\n\n- 部署在同一可用区:需要输入三个相同的可用区。例如:部署在“cn-north-4a”可用区,则需要在此处输入\"cn-north-4a,cn-north-4a,cn-north-4a\"。\n- 部署在三个不同可用区:需要分别输入三个不同的可用区。\n取值范围:非空,请参见[地区和终端节点](https://developer.huaweicloud.com/endpoint)。","example":"cn-north-4a,cn-north-4a,cn-north-4a","type":"string"},"backup_strategy":{"$ref":"#/definitions/OpenGaussBackupStrategy"},"charge_info":{"$ref":"#/definitions/OpenGaussChargeInfo"},"configuration_id":{"description":"参数模板ID。当不传该参数时,使用系统默认的参数模板。","example":"452408-ef4b-44c5-94be-305145fg","type":"string"},"coordinator_num":{"description":"仅分布式形态需要填写该参数。协调节点数量,取值范围1~9。CN数量必须小于或等于两倍的分片数。","example":1,"format":"int32","type":"integer"},"datastore":{"$ref":"#/definitions/OpenGaussDatastore"},"disk_encryption_id":{"description":"用于磁盘加密的密钥ID,默认为空。","type":"string"},"enable_force_switch":{"description":"enable_force_switch表示是否开启备机强升主功能,enable_force_switch=true表示开启备机强升主功能,enable_force_switch=false表示关闭,默认关闭。仅支持1.2.2及以上版本。\n\n说明:\n\n备机强升主功能适用场景:在主机发生故障后,为了保障集群的可用性,强制拉起备机作为新主机对外提供服务的场景。 本功能在集群故障状态下,以丢失部分数据为代价换取集群尽可能快的恢复服务。本功能是集群状态为不可用时的一个逃生方法,如果操作者不清楚备机强升后丢失数据对业务的影响,请勿使用本功能。 备机强升主相关介绍请参考《故障处理》备机强升主章节。","example":false,"type":"boolean"},"enterprise_project_id":{"description":"企业项目ID。只有企业租户时该参数才生效。\n\n使用请参考《企业管理 API参考》的“[查询企业项目列表](https://support.huaweicloud.com/api-em/zh-cn_topic_0121230880.html)”响应消息表“enterprise_project字段数据结构说明”的“id”。","type":"string"},"flavor_ref":{"description":"规格码,取值范围:非空。参考[表1](https://support.huaweicloud.com/api-opengauss/opengauss_api_0037.html#opengauss_api_0037__ted9b9d433c8a4c52884e199e17f94479)中GaussDB 的“规格编码”列内容获取。","example":"gaussdb.opengauss.ee.dn.m6.large.8.in","type":"string"},"ha":{"$ref":"#/definitions/OpenGaussHa"},"name":{"description":"实例名称。\n用于表示实例的名称,同一租户下,同类型的实例名可重名。\n\n取值范围:4~64个字符之间,必须以字母开头,区分大小写,可以包含字母、数字、中划线或者下划线,不能包含其他的特殊字符。","type":"string"},"password":{"description":"数据库密码。必选。\n\n取值范围:\n\n'非空; 至少包含大写字母(A-Z),小写字母(a-z),数字(0-9),非字母数字字符(限定为~!@#%^*-_=+?,)四类字符中的三类字符;长度8~32个字符。'\n\n'建议您输入高强度密码,以提高安全性,防止出现密码被暴力破解等安全风险。'","type":"string"},"port":{"description":"数据库对外开放的端口,不填默认为8000,可选范围为:1024-39998。限制端口: 2378,2379,2380,4999,5000,5999,6000,6001,8097,8098,12016,12017,20049,20050,21731,21732,32122,32123,32124。\n\n- GaussDB数据库端口当前只支持设置为8000,当不传该参数时,默认端口为8000。","example":"3306","type":"string"},"region":{"description":"区域ID。\n\n取值范围:非空,请参见[地区和终端节点](https://developer.huaweicloud.com/endpoint)。","type":"string"},"replica_num":{"description":"实例副本数,支持取值3。不填默认为3。仅支持1.3.0及以上版本的实例。","enum":[3],"example":3,"format":"int32","type":"integer"},"security_group_id":{"description":"指定实例所属的安全组。如果不需要指定安全组,请联系客服申请白名单。\n\n- 方法1:登录虚拟私有云服务的控制台界面,在安全组的详情页面查找安全组ID。\n- 方法2:通过虚拟私有云服务的API接口查询,具体操作可参考[查询安全组列表](https://support.huaweicloud.com/api-vpc/vpc_sg01_0003.html)。","type":"string"},"sharding_num":{"description":"仅分布式形态需要填写该参数。分片数量,取值范围1~9。","example":1,"format":"int32","type":"integer"},"subnet_id":{"description":"子网的网络ID信息,获取方法如下:\n\n- 方法1:登录虚拟私有云服务的控制台界面,单击VPC下的子网,进入子网详情页面,查找网络ID。\n- 方法2:通过虚拟私有云服务的API接口查询,具体操作可参考[查询子网列表](https://support.huaweicloud.com/api-vpc/vpc_subnet01_0003.html)。","type":"string"},"time_zone":{"description":"UTC时区。\n\n- 不选择时,GaussDB国内站、默认为UTC时间。\n- 选择填写时,取值范围为UTC-12:00~UTC+12:00,且只支持整段时间,如UTC+08:00,不支持UTC+08:30。","type":"string"},"volume":{"$ref":"#/definitions/OpenGaussVolume"},"vpc_id":{"description":"虚拟私有云ID,获取方法如下:\n\n- 方法1:登录虚拟私有云服务的控制台界面,在虚拟私有云的详情页面查找VPC ID。\n- 方法2:通过虚拟私有云服务的API接口查询,具体操作可参考[查询VPC列表](https://support.huaweicloud.com/api-vpc/vpc_api01_0003.html)。","type":"string"}},"required":["name","datastore","ha","password","flavor_ref","volume","region","availability_zone","vpc_id","subnet_id","security_group_id"]},"OpenGaussInstanceResponse":{"description":"实例信息。","properties":{"availability_zone":{"description":"可用区ID。","type":"string"},"backup_strategy":{"$ref":"#/definitions/OpenGaussBackupStrategyForResponse"},"charge_info":{"$ref":"#/definitions/OpenGaussChargeInfoResponse"},"datastore":{"$ref":"#/definitions/OpenGaussDatastoreResponse"},"enterprise_project_id":{"description":"项目标签。","type":"string"},"flavor_ref":{"description":"规格码,取值范围:非空。参考[表1](https://support.huaweicloud.com/api-opengauss/opengauss_api_0037.html#opengauss_api_0037__ted9b9d433c8a4c52884e199e17f94479)中GaussDB 的“规格编码”列内容获取。","type":"string"},"ha":{"$ref":"#/definitions/OpenGaussHaResponse"},"id":{"description":"实例ID。","example":"cc6fd964d93f4003851dfc29d57d30a5in14","type":"string"},"name":{"description":"实例名称。用于表示实例的名称,同一租户下,同类型的实例名称可相同。\n\n取值范围:4~64个字符之间,必须以字母开头,不区分大小写,可以包含字母、数字、中划线或者下划线,不能包含其他的特殊字符。","type":"string"},"port":{"description":"数据库端口信息,与请求参数相同。","example":3306,"type":"string"},"region":{"description":"区域ID。","type":"string"},"replica_num":{"description":"实例副本数。","example":3,"format":"int32","type":"integer"},"security_group_id":{"description":"实例所属的安全组。","type":"string"},"status":{"description":"实例状态。如BUILD,表示创建中。\n\n仅创建按需实例时会返回该参数。","example":"BUILD","type":"string"},"subnet_id":{"description":"子网的网络ID信息。","type":"string"},"volume":{"$ref":"#/definitions/OpenGaussVolumeResponse"},"vpc_id":{"description":"虚拟私有云ID。","type":"string"}},"required":["id","name","status","datastore","backup_strategy","port","enterprise_project_id","flavor_ref","volume","region","availability_zone","vpc_id","subnet_id","security_group_id","charge_info"]},"OpenGaussVolume":{"description":"volume信息。","properties":{"size":{"description":"磁盘大小。例如:该参数填写为“40”,表示为创建的实例分配40GB的磁盘空间。\n\n取值范围:(分片数*40GB)~(分片数*16TB),且大小只能为分片数*40的整数倍。","example":40,"format":"int32","type":"integer"},"type":{"description":"磁盘类型。  仅支持ULTRAHIGH和ESSD,区分大小写,分别表示SSD和急速云盘。","enum":["ULTRAHIGH","ESSD"],"example":"ULTRAHIGH","type":"string"}},"required":["type","size"]},"OpenGaussVolumeResponse":{"description":"volume信息。","properties":{"size":{"description":"磁盘大小。\n\nGaussDB分布式实例创建时需指定大小:要求必须为(分片数 * 40GB)的倍数,取值范围:(分片数*40GB)~(分片数*16TB)。","example":40,"type":"integer"},"type":{"description":"磁盘类型。\n\n取值如下,区分大小写:\n\n- ULTRAHIGH,表示SSD。\n- ESSD,表示急速云盘","enum":["ULTRAHIGH","ESSD"],"example":"ULTRAHIGH","type":"string"}},"required":["type","size"]}},"description":null,"group_id":"cb81c3e0ae314c27a40e8fc90fd34a80","host":"gaussdb-opengauss.cn-north-4.myhuaweicloud.com","id":"1ae42cefd9664c379e46ddbaad14ac45","info_version":"v3","method":"post","name":"CreateInstance","parameters":{},"paths":{"/v3/{project_id}/instances":{"post":{"description":"创建数据库企业版和集中式实例","operationId":"CreateInstance","parameters":[{"description":"用户Token","in":"header","name":"X-Auth-Token","required":false,"type":"string","x-example":"******"},{"description":"语言","in":"header","name":"X-Language","required":false,"type":"string","x-example":"zh-cn"},{"description":"**参数解释**:\n租户在某一Region下的项目ID。\n获取方法请参见[获取项目ID](https://support.huaweicloud.com/api-gaussdb/gaussdb_api_196.html)。\n**约束限制**:\n不涉及。\n**取值范围**:\n只能由英文字母、数字组成,且长度为32个字符。\n**默认取值**:\n不涉及。","in":"path","name":"project_id","required":true,"type":"string","x-example":"619d3e78f61b4be68bc5aa0b59edcf7b"},{"description":"请求体","in":"body","name":"CreateInstanceRequest","required":true,"schema":{"$ref":"#/definitions/OpenGaussInstanceRequest"}}],"responses":{"202":{"description":"成功。","examples":{"application/json":{"instance":{"availability_zone":"cn-north-4a,cn-north-4a,cn-north-4a","backup_strategy":{"keep_days":7,"start_time":"17:00-18:00"},"charge_info":{"charge_mode":"postPaid"},"datastore":{"type":"GaussDB(for openGauss)","version":"1.1"},"flavor_ref":"gaussdb.opengauss.ee.dn.m6.2xlarge.8.in","ha":{"consistency":"strong","mode":"Enterprise","replication_mode":"sync"},"id":"ad8cd1440aa94a02ae4580fcbebb3143in14","name":"user1-v3-independent","port":"8000","region":"cn-north-4","replica_num":3,"security_group_id":"c6123999-8532-421c-9db6-e078013ff58f","status":"BUILD","subnet_id":"54a44bec-e36f-441e-86bb-d749ace9c189","volume":{"size":120,"type":"ULTRAHIGH"},"vpc_id":"1f011c32-2de2-4aa8-a161-9498dbcef329"},"job_id":"30f2790a-a5b6-4a13-a5ab-733c746609af"}},"schema":{"$ref":"#/definitions/OpenGaussCreateInstanceResponse"}},"default":{"description":"系统内部错误。","schema":{"$ref":"#/definitions/ErrorResponseBody"}}},"summary":"创建数据库实例","tags":["历史API"],"x-apiexplorer-hide":"false","x-request-examples-1":{"availability_zone":"cn-north-4a,cn-north-4a,cn-north-4a","backup_strategy":{"keep_days":7,"start_time":"17:00-18:00"},"charge_info":{"charge_mode":"postPaid"},"configuration_id":"b000d7c91f1749da87315700793a11d4pr14","coordinator_num":1,"datastore":{"type":"GaussDB","version":"1.1"},"disk_encryption_id":"24ae42b5-4009-4ea2-b66a-0b211e424dab","enable_force_switch":false,"enterprise_project_id":"","flavor_ref":"gaussdb.opengauss.ee.dn.m6.2xlarge.8.in","ha":{"consistency":"strong","mode":"enterprise","replication_mode":"sync"},"name":"user1-v3-independent","password":"Gauss_234","port":8000,"region":"cn-north-4","replica_num":3,"security_group_id":"c6123999-8532-421c-9db6-e078013ff58f","sharding_num":1,"subnet_id":"54a44bec-e36f-441e-86bb-d749ace9c189","time_zone":"UTC+08:00","volume":{"size":120,"type":"ULTRAHIGH"},"vpc_id":"1f011c32-2de2-4aa8-a161-9498dbcef329"},"x-request-examples-description-1":"创建GaussDB企业版实例","x-request-examples-text-1":{"availability_zone":"cn-north-4a,cn-north-4a,cn-north-4a","backup_strategy":{"keep_days":7,"start_time":"17:00-18:00"},"charge_info":{"charge_mode":"postPaid"},"configuration_id":"b000d7c91f1749da87315700793a11d4pr14","coordinator_num":1,"datastore":{"type":"GaussDB","version":"1.1"},"disk_encryption_id":"24ae42b5-4009-4ea2-b66a-0b211e424dab","enable_force_switch":false,"enterprise_project_id":"","flavor_ref":"gaussdb.opengauss.ee.dn.m6.2xlarge.8.in","ha":{"consistency":"strong","mode":"enterprise","replication_mode":"sync"},"name":"user1-v3-independent","password":"Gauss_234","port":8000,"region":"cn-north-4","replica_num":3,"security_group_id":"c6123999-8532-421c-9db6-e078013ff58f","sharding_num":1,"subnet_id":"54a44bec-e36f-441e-86bb-d749ace9c189","time_zone":"UTC+08:00","volume":{"size":120,"type":"ULTRAHIGH"},"vpc_id":"1f011c32-2de2-4aa8-a161-9498dbcef329"},"x-request-examples-url-1":"POST https://{endpoint}/v3/054b61972980d4552f0bc00ac8d3f5cd/instances","x-support-sdk":"Y"}}},"product_short":"GaussDBforopenGauss","region_id":"cn-north-4","schemes":["HTTPS"],"security_definitions":null,"summary":"创建数据库实例","tags":"历史API","uri":null,"version":"2.0"}