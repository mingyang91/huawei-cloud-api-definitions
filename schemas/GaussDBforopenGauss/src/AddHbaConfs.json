{"base_path":"/","components":null,"consumes":"[\"application/json;charset=UTF-8\"]","definitions":{"AddHbaConfRequestBody":{"properties":{"hba_confs":{"description":"**参数解释**:\n需要新增的hba配置信息。\n**约束限制**:\n不涉及。","items":{"$ref":"#/definitions/HbaConfOption"},"type":"array"}},"required":["hba_confs"]},"ErrorResponseBody":{"properties":{"error_code":{"description":"**参数解释**:\n错误码。\n**取值范围**:\n不涉及。","example":"DBS.00114000","type":"string"},"error_msg":{"description":"**参数解释**:\n错误消息。\n**取值范围**:\n不涉及。","example":"系统内部错误","type":"string"}},"required":["error_code","error_msg"]},"HbaConfOption":{"properties":{"address":{"description":"**参数解释**\n指定与记录匹配且允许访问的IP地址范围。\n**约束限制**\n当前仅支持IP地址/掩码长度格式。\n数据库引擎版本为V2.0-8.1.0及以上支持address配置IPv6的IP。\n**取值范围**\n支持IPv4和IPv6,可以使用如下形式来表示:\nIP地址/掩码长度。例如,10.10.0.0/24、2001:250:250:250:250:250:250:175/128。\n**默认取值**:\n不涉及。","type":"string"},"database":{"description":"**参数解释**\n声明记录所匹配且允许访问的数据库,多租特性场景下该参数声明记录所匹配且允许访问的PDB。\n- 值replication表示如果请求一个复制连接,则匹配,但复制连接不表示任何特定的数据库。如需使用名为replication的数据库,需在database列使用记录“replication”作为数据库名。\n- 多租数据库下, 值replication_pdb1表示如果请求一个名为pdb1数据库的复制连接,则匹配成功。值replication方式只生效Non-PDB。\n- PDB复制连接生效配置方式为replication_[pdbname],pdbname为用户创建PDB数据库时候的名字。\n- 如需使用名为replication_pdb1的数据库,需在database列使用记录“replication_pdb1”作为数据库名。\n\n**约束限制**:\n不涉及。\n**取值范围**\n- all:表示该记录匹配所有数据库。\n- 特定的数据库名称或者用逗号分隔的数据库列表。\n\n**默认取值**:\n不涉及。","type":"string"},"method":{"description":"**参数解释**\n声明连接时使用的认证方法。\n**约束限制**:\n不涉及。\n**取值范围**\n- reject:无条件地拒绝连接。常用于过滤某些主机。\n- md5:MD5加密算法安全性低,存在安全风险,不推荐使用,建议使用更安全的加密算法。默认不支持,可通过password_encryption_type参数配置。\n- sha256:要求客户端提供一个sha256算法加密的口令进行认证,该口令在传送过程中结合salt(服务器发送给客户端的随机数)的单向sha256加密,增强了安全性。\n- sm3:要求客户端提供一个sm3算法加密口令进行认证,该口令在传送过程中结合salt(服务器发送给客户端的随机数)的单向sm3加密,增加了安全性。\n- cert:客户端证书认证模式,此模式需进行SSL连接配置且需要客户端提供有效的SSL证书,不需要提供用户密码。cert认证方式只支持hostssl类型的规则。\n\n**默认取值**:\n不涉及。","enum":["reject","md5","sha256","sm3","cert"],"type":"string"},"type":{"description":"**参数解释**\n客户端连接类型。\n**约束限制**:\n不涉及。\n**取值范围**\n- host:表示这条记录既接受一个普通的TCP/IP套接字连接,也接受一个经过SSL加密的TCP/IP套接字连接。\n- hostssl:表示这条记录只接受一个经过SSL加密的TCP/IP套接字连接。\n- hostnossl:表示这条记录只接受一个普通的TCP/IP套接字连接。\n\n**默认取值**:\n不涉及。","enum":["host","hostnossl","hostssl"],"type":"string"},"user":{"description":"**参数解释**\n声明记录所匹配且允许访问的数据库用户。\n**约束限制**\n不支持系统用户。\n**取值范围**\n- all:表明该记录匹配所有用户。\n- 特定的数据库用户名或者用逗号分隔的用户列表。\n**默认取值**:\n不涉及。","type":"string"}},"required":["type","database","user","address","method"],"type":"object"}},"description":null,"group_id":"cb81c3e0ae314c27a40e8fc90fd34a80","host":"gaussdb-opengauss.cn-north-4.myhuaweicloud.com","id":"dfaf68f0df984c9282a449c81cdd11ff","info_version":"v3","method":"post","name":"AddHbaConfs","parameters":{},"paths":{"/v3/{project_id}/instances/{instance_id}/hba-info":{"post":{"description":"新增客户端接入认证配置。","operationId":"AddHbaConfs","parameters":[{"description":"**参数解释**:\n用户Token。\n通过调用IAM服务[获取用户token](https://support.huaweicloud.com/intl/zh-cn/api-iam/iam_30_0001.html)。\n**约束限制**:\n不涉及。\n**取值范围**:\n不涉及。\n**默认取值**:\n不涉及。","in":"header","name":"X-Auth-Token","required":true,"type":"string","x-example":"******"},{"default":"en-us","description":"**参数解释**:\n语言。\n**约束限制**:\n不涉及。\n**取值范围**:\n- zh-cn \n- en-us\n\n**默认取值**:\nen-us","enum":["zh-cn","en-us"],"in":"header","name":"X-Language","required":false,"type":"string","x-example":"en-us"},{"description":"**参数解释**:\n租户在某一Region下的项目ID。\n获取方法请参见[获取项目ID](https://support.huaweicloud.com/api-gaussdb/gaussdb_api_196.html)。\n**约束限制**:\n不涉及。\n**取值范围**:\n只能由英文字母、数字组成,且长度为32个字符。\n**默认取值**:\n不涉及。","in":"path","name":"project_id","required":true,"type":"string","x-example":"4f07d3f50ce2466a9a7c014337b36409"},{"description":"**参数解释**:\n实例ID,此参数是用户创建实例的唯一标识。\n**约束限制**:\n不涉及\n**取值范围**:\n只能由英文字母、数字组成,且长度为36个字符。\n**默认取值**:\n不涉及。","in":"path","name":"instance_id","required":true,"type":"string","x-example":"e73893ef73754465a8bd2e0857bbf13ein01"},{"description":"修改参数","in":"body","name":"AddHbaConfRequestBody","required":true,"schema":{"$ref":"#/definitions/AddHbaConfRequestBody"}}],"responses":{"200":{"description":"成功。"},"default":{"description":"系统内部错误。","schema":{"$ref":"#/definitions/ErrorResponseBody"}}},"summary":"新增客户端接入认证配置","tags":["管理数据库和用户"],"x-api-type":"open-api","x-apigateway-ratelimit":"opengauss_default_policy","x-constraint":"客户端接入认证暂时不支持容灾关系内同步,如果实例已搭建容灾关系,建议在对端也进行相同的配置操作。","x-is-registered":"Y","x-request-examples-1":[{"address":"0.0.0.0/0","database":"all","method":"sha256","type":"host","user":"all"}],"x-request-examples-url-1":"POST https://{endpoint}/v3/0483b6b16e954cb88930a360d2c4e663/instances/e28979107ed04d3b8b2f1b819b8d2be3in03/hba-info","x-support-sdk":"Y"}}},"product_short":"GaussDBforopenGauss","region_id":"cn-north-4","schemes":["HTTPS"],"security_definitions":null,"summary":"新增客户端接入认证配置","tags":"管理数据库和用户","uri":null,"version":"2.0"}