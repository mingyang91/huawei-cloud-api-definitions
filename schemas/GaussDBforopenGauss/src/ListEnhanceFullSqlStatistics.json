{"base_path":"/","components":null,"consumes":"[\"application/json;charset=UTF-8\"]","definitions":{"CompareConditionOption":{"description":"组合比较查询条件,可针对某个给定过滤字段,进行区间范围、大小、小于等条件合并查询。","properties":{"enable_equal":{"description":"**参数解释**:\n是否使能包含等于,如果为true,则表示包含边界条件(min或max)的取值。\n**约束限制**:\n不涉及。\n**取值范围**:\n- true\n- false\n\n**默认取值**:\n不涉及。","example":true,"type":"boolean"},"max":{"description":"**参数解释**:\n最大值判断条件对应取值(小于条件)。\n**约束限制**:\n不涉及。\n**取值范围**:\n[0, 2^63-1]\n**默认取值**:\n不涉及。","format":"int64","type":"integer"},"min":{"description":"**参数解释**:\n最小值判断条件对应取值(大于条件)。\n**约束限制**:\n不涉及。\n**取值范围**:\n[0, 2^63-1]\n**默认取值**:\n不涉及。","format":"int64","type":"integer"},"name":{"description":"**参数解释**:\n查询字段名称,当前仅支持特定的数值字段。\n**约束限制**:\n不涉及。\n**取值范围**:\n- total_sql_time: 总SQL耗时。\n- sql_time:SQL执行次数。\n\n**默认取值**:\n不涉及。","example":"query","type":"string"},"value":{"description":"**参数解释**:\n等值判断条件对应取值(等于条件)。value的优先级最高,如果value不为空,则忽略min和max的取值设置;value为空时,才使能min和max的条件过滤。\n**约束限制**:\n不涉及。\n**取值范围**:\n[0, 2^63-1]\n**默认取值**:\n不涉及。","format":"int64","type":"integer"}},"type":"object"},"ErrorResponseBody":{"properties":{"error_code":{"description":"**参数解释**:\n错误码。\n**取值范围**:\n不涉及。","example":"DBS.00114000","type":"string"},"error_msg":{"description":"**参数解释**:\n错误消息。\n**取值范围**:\n不涉及。","example":"系统内部错误","type":"string"}},"required":["error_code","error_msg"]},"FullSqlStatisticInfoResult":{"description":"全量SQL聚合统计信息。","properties":{"avg_cpu_time":{"description":"**参数解释**:\n平均CPU执行耗时(微秒)。\n**取值范围**:\n不涉及。","example":133,"format":"int64","type":"integer"},"avg_data_io_time":{"description":"**参数解释**:\n平均IO耗时(微秒)。\n**取值范围**:\n不涉及。","example":0,"format":"int64","type":"integer"},"avg_db_time":{"description":"**参数解释**:\n平均有效DB耗时(微秒)。\n**取值范围**:\n不涉及。","example":206,"format":"int64","type":"integer"},"avg_execution_time":{"description":"**参数解释**:\n平均SQL执行器内执行时间(微秒)。\n**取值范围**:\n不涉及。","example":11,"format":"int64","type":"integer"},"avg_n_blocks_hit":{"description":"**参数解释**:\n平均Buffer块命中次数。\n**取值范围**:\n不涉及。","example":2,"format":"int64","type":"integer"},"avg_n_returned_rows":{"description":"**参数解释**:\n平均返回行数。\n**取值范围**:\n不涉及。","example":154922,"format":"int64","type":"integer"},"avg_n_tuples_fetched":{"description":"**参数解释**:\n平均扫描行数。\n**取值范围**:\n不涉及。","example":154922,"format":"int64","type":"integer"},"avg_parse_time":{"description":"**参数解释**:\n平均解释器时间(微秒)。\n**取值范围**:\n不涉及。","example":154922,"format":"int64","type":"integer"},"avg_plan_time":{"description":"**参数解释**:\n平均执行计划时间(微秒)。\n**取值范围**:\n不涉及。","example":154922,"format":"int64","type":"integer"},"avg_sql_time":{"description":"**参数解释**:\n平均SQL耗时(微秒)。\n**取值范围**:\n不涉及。","example":154922,"format":"int64","type":"integer"},"end_time_stamp":{"description":"**参数解释**:\n结束时间戳。\n**取值范围**:\n不涉及。","example":1735112940220,"format":"int64","type":"integer"},"sql_count":{"description":"**参数解释**:\n汇总SQL条目数。\n**取值范围**:\n不涉及。","example":154922,"format":"int64","type":"integer"},"sql_id":{"description":"**参数解释**:\n归一化SQL ID。\n**取值范围**:\n不涉及。","example":"3801186389","type":"string"},"start_time_stamp":{"description":"**参数解释**:\n开始时间戳。\n**取值范围**:\n不涉及。","example":1735033855579,"format":"int64","type":"integer"},"template":{"description":"**参数解释**:\nSQL模板。未开启实例内核GUC参数(track_stmt_parameter)时,展示的是归一化SQL模板内容;开启该参数后,展示的是随机一条SQL记录中截断参数列表后的内容。\n**取值范围**:\n不涉及。","example":"select name, $1 from table where key = 'value'","type":"string"},"total_cpu_time":{"description":"**参数解释**:\n总CPU耗时(微秒)。\n**取值范围**:\n不涉及。","example":154922,"format":"int64","type":"integer"},"total_data_io_time":{"description":"**参数解释**:\n总IO耗时(微秒)。\n**取值范围**:\n不涉及。","example":154922,"format":"int64","type":"integer"},"total_db_time":{"description":"**参数解释**:\n总有效DB耗时(微秒)。\n**取值范围**:\n不涉及。","example":154922,"format":"int64","type":"integer"},"total_sql_time":{"description":"**参数解释**:\n总SQL耗时(微秒)。\n**取值范围**:\n不涉及。","example":154922,"format":"int64","type":"integer"}},"type":"object"},"ListEnhanceFullSqlStatisticsRequestBody":{"properties":{"application_name":{"description":"**参数解释**:\n应用名称。\n**约束限制**:\n不涉及。\n**取值范围**:\n不涉及。\n**默认取值**:\n不涉及。","example":"abc","type":"string"},"begin_time":{"description":"**参数解释**:\n查询开始时间。\n**约束限制**:\nISO 8601 UTC格式。模式为“yyyy-mm-ddThh:mm:ssZ”。其中,T指某个时间的开始;Z指时区偏移量。时区中的+号需要进行URL编码,编码为%2B,时区中的-号无需编码。例如:北京时间偏移显示为+0800,begin_time=2024-03-15T17:20:33+0800,传参时编码为begin_time=2024-03-15T17:20:33%2B0800。\n**取值范围**:\n时间区间(begin_time ~ end_time)不能超过30天。\n**默认取值**:\n不涉及。","example":"2025-01-01T16:01:10+0800","type":"string"},"client_addr":{"description":"**参数解释**:\n客户端地址。\n**约束限制**:\n不涉及。\n**取值范围**:\n不涉及。\n**默认取值**:\n不涉及。","example":"192.168.0.10","type":"string"},"client_port":{"description":"**参数解释**:\n客户端端口。\n**约束限制**:\n不涉及。\n**取值范围**:\n不涉及。\n**默认取值**:\n不涉及。","example":"8000","type":"string"},"compare_conditions":{"description":"**参数解释**:\n组合比较查询条件,可针对某个给定过滤字段,进行区间范围、大小、小于等条件合并查询。\n**约束限制**:\n不涉及。","items":{"$ref":"#/definitions/CompareConditionOption"},"minItems":0,"type":"array"},"component_id":{"description":"**参数解释**:\n组件ID。\n**约束限制**:\n不涉及。\n**取值范围**:\n不涉及。\n**默认取值**:\n不涉及。","example":"dn_abc","type":"string"},"db_name":{"description":"**参数解释**:\n数据库名称。\n**约束限制**:\n不涉及。\n**取值范围**:\n不涉及。\n**默认取值**:\n不涉及。","example":"postgres","type":"string"},"end_time":{"description":"**参数解释**:\n查询结束时间。\n**约束限制**:\nISO 8601 UTC格式。模式为“yyyy-mm-ddThh:mm:ssZ”。其中,T指某个时间的开始;Z指时区偏移量。时区中的+号需要进行URL编码,编码为%2B,时区中的-号无需编码。例如:北京时间偏移显示为+0800,end_time=2024-03-16T17:20:33+0800,传参时编码为end_time=2024-03-16T17:20:33%2B0800。\n**取值范围**:\n时间区间(begin_time ~ end_time)不能超过30天。\n**默认取值**:\n不涉及。","example":"2025-01-20T16:01:10+0800","type":"string"},"is_slow_sql":{"description":"**参数解释**:\n是否是慢SQL。\n**约束限制**:\n不涉及。\n**取值范围**:\n- true:是慢SQL。\n- false:不是慢SQL。\n\n**默认取值**:\n不涉及。","enum":[true,false],"example":false,"type":"boolean"},"limit":{"default":10,"description":"**参数解释**:\n查询记录数。例如该参数设定为10,则查询结果最多只显示10条记录。\n**约束限制**:\n不涉及。\n**取值范围**:\n[1, 1000]\n**默认取值**:\n默认为10。","example":10,"type":"integer"},"multi_queries":{"description":"**参数解释**:\n字段汇聚查询条件列表。\n**约束限制**:\n只支持针对query字段全与或者全或的查询。","items":{"$ref":"#/definitions/MultiQueryConditionOption"},"minItems":0,"type":"array"},"node_id":{"description":"**参数解释**:\n节点ID。\n**约束限制**:\n不涉及。\n**取值范围**:\n不涉及。\n**默认取值**:\n不涉及。","example":"9e4e46a450f348e3945872186622cbc2no14","type":"string"},"offset":{"default":0,"description":"**参数解释**:\n索引位置,偏移量。从第一条数据偏移offset条数据后开始查询。例如:该参数指定为0,limit指定为10,则只展示第1~10条数据。\n**约束限制**:\n不涉及。\n**取值范围**:\n[0, 9223372036854774807]\n**默认取值**:\n默认为0(偏移0条数据,表示从第一条数据开始查询)。","example":0,"type":"integer"},"order":{"default":"DESC","description":"**参数解释**:\n排序方式,支持升序和降序。\n**约束限制**:\n不涉及。\n**取值范围**:\n- DESC:降序。\n- ASC:升序。\n\n**默认取值**:\nDESC","enum":["DESC","ASC"],"example":"DESC","type":"string"},"order_by":{"default":"sql_count","description":"**参数解释**:\n排序字段。\n**约束限制**:\n不涉及。\n**取值范围**:\n- sql_id\n- sql_count\n- avg_db_time\n- avg_cpu_time\n- avg_execution_time\n- avg_data_io_time\n- start_time_stamp\n\n**默认取值**:\nsql_count","enum":["sql_id","sql_count","avg_db_time","avg_cpu_time","avg_execution_time","avg_data_io_time","start_time_stamp"],"example":"sql_count","type":"string"},"query":{"description":"**参数解释**:\nSQL文本。\n**约束限制**:\n不涉及。\n**取值范围**:\n长度1~4096。\n**默认取值**:\n不涉及。","example":"select name $1 from table","type":"string"},"schema_name":{"description":"**参数解释**:\nschema名称。\n**约束限制**:\n不涉及。\n**取值范围**:\n不涉及。\n**默认取值**:\n不涉及。","example":"$user.public","type":"string"},"sql_exec_id":{"description":"**参数解释**:\n唯一SQL ID。\n**约束限制**:\n不涉及。\n**取值范围**:\n不涉及。\n**默认取值**:\n不涉及。","example":"1945836514000776938","type":"string"},"sql_id":{"description":"**参数解释**:\n归一化SQL ID。\n**约束限制**:\n不涉及。\n**取值范围**:\n不涉及。\n**默认取值**:\n不涉及。","example":"3801186389","type":"string"},"trace_id":{"description":"**参数解释**:\n链路ID。\n**约束限制**:\n不涉及。\n**取值范围**:\n不涉及。\n**默认取值**:\n不涉及。","example":"d3eef567-4be6-424c-860f-75684457bf72","type":"string"},"transaction_id":{"description":"**参数解释**:\n事务ID。\n**约束限制**:\n不涉及。\n**取值范围**:\n不涉及。\n**默认取值**:\n不涉及。","example":"0","type":"string"},"username":{"description":"**参数解释**:\n用户名称。\n**约束限制**:\n不涉及。\n**取值范围**:\n不涉及。\n**默认取值**:\n不涉及。","example":"root","type":"string"}},"required":["begin_time","end_time"],"type":"object"},"ListEnhanceFullSqlStatisticsResponseBody":{"properties":{"statistics":{"description":"**参数解释**:\n全量SQL聚合统计列表。","items":{"$ref":"#/definitions/FullSqlStatisticInfoResult"},"minItems":0,"type":"array"},"total_count":{"description":"**参数解释**:\n全量SQL聚合统计列表总数。\n**取值范围**:\n不涉及。","format":"int64","type":"integer"}},"type":"object"},"MultiQueryConditionOption":{"properties":{"condition":{"description":"**参数解释**:\n组合条件类型。\n**约束限制**:\n不涉及。\n**取值范围**:\n仅限字符串:\"AND\"、\"OR\"。\n**默认取值**:\n不涉及。","enum":["OR","AND"],"example":"AND","type":"string"},"is_fuzzy":{"description":"**参数解释**:\n多个过滤检索条件内容集合。\n**约束限制**:\n只支持为true进行模糊查询。\n**取值范围**:\n- true:模糊查询。\n- false:精确匹配。\n\n**默认取值**:\ntrue","enum":[true,false],"example":true,"type":"boolean"},"name":{"description":"**参数解释**:\n查询字段名称。\n**约束限制**:\n只支持字符串\"query\"。\n**取值范围**:\n由英文字母(大小写)、数字或下划线组成,长度为 1 至 128 个字符。\n**默认取值**:\n不涉及。","example":"query","type":"string"},"values":{"description":"**参数解释**:\n多个过滤检索条件内容集合。由 1 至 5 个字符串组成的列表。\n**约束限制**:\n不涉及。\n**取值范围**:\n不涉及。\n**默认取值**:\n不涉及。","example":["select"],"items":{"type":"string"},"type":"array"}},"type":"object"}},"description":null,"group_id":"cb81c3e0ae314c27a40e8fc90fd34a80","host":"gaussdb-opengauss.cn-north-4.myhuaweicloud.com","id":"0160c5edaf344f0986e4b48c64e55210","info_version":"v3","method":"post","name":"ListEnhanceFullSqlStatistics","parameters":{},"paths":{"/v3/{project_id}/instances/{instance_id}/list-full-sql-statistics":{"post":{"description":"查询GaussDB数据库实例全量SQL聚合统计列表,主要统计各唯一SQL ID下的SQL记录总数量以及相关时间指标的平均值。支持增强型条件过滤, 如可以对SQL文本(query字段)进行多条件合并查询,对total_sql_time、sql_count字段进行大于、小于、区间范围等条件的过滤。","operationId":"ListEnhanceFullSqlStatistics","parameters":[{"description":"**参数解释**:\n用户Token。\n通过调用IAM服务[获取用户token](https://support.huaweicloud.com/intl/zh-cn/api-iam/iam_30_0001.html)。\n**约束限制**:\n不涉及。\n**取值范围**:\n不涉及。\n**默认取值**:\n不涉及。","in":"header","name":"X-Auth-Token","required":true,"type":"string","x-example":"******"},{"default":"en-us","description":"**参数解释**:\n语言。\n**约束限制**:\n不涉及。\n**取值范围**:\n- zh-cn \n- en-us\n\n**默认取值**:\nen-us","enum":["zh-cn","en-us"],"in":"header","name":"X-Language","required":false,"type":"string","x-example":"en-us"},{"description":"**参数解释**:\n租户在某一Region下的项目ID。\n获取方法请参见[获取项目ID](https://support.huaweicloud.com/api-gaussdb/gaussdb_api_196.html)。\n**约束限制**:\n不涉及。\n**取值范围**:\n只能由英文字母、数字组成,且长度为32个字符。\n**默认取值**:\n不涉及。","in":"path","maxLength":32,"minLength":1,"name":"project_id","pattern":"^[a-zA-Z0-9]{1,32}$","required":true,"type":"string","x-example":"43391853d5634d7e98fdcce8192e414c"},{"description":"**参数解释**:\n实例ID,此参数是用户创建实例的唯一标识。\n**约束限制**:\n不涉及。\n**取值范围**:\n只能由英文字母、数字组成,且长度为36个字符。\n**默认取值**:\n不涉及。","in":"path","maxLength":36,"minLength":1,"name":"instance_id","pattern":"^[a-zA-Z0-9]{1,36}$","required":true,"type":"string","x-example":"d414353314304bb3942517fe7f23b459in14"},{"description":"查询全量SQL聚合统计列表请求体。","in":"body","name":"ListEnhanceFullSqlStatisticsRequestBody","required":true,"schema":{"$ref":"#/definitions/ListEnhanceFullSqlStatisticsRequestBody"}}],"produces":["application/json"],"responses":{"200":{"description":"成功。","examples":{"application/json":{"statistics":[],"total_count":0}},"schema":{"$ref":"#/definitions/ListEnhanceFullSqlStatisticsResponseBody"}},"default":{"description":"系统内部错误。","schema":{"$ref":"#/definitions/ErrorResponseBody"}}},"summary":"查询实例全量SQL聚合统计列表","tags":["全量SQL"],"x-api-type":"open-api","x-apigateway-ratelimit":"opengauss_default_policy","x-is-registered":"Y","x-request-examples-1":{"application_name":"gsql","begin_time":"2025-08-06T07:32:24+0000","client_addr":"127.0.0.1","client_port":"58958","compare_conditions":[{"max":100,"min":1,"name":"sql_count"},{"max":1000,"name":"total_sql_time"}],"component_id":"cn_5001","db_name":"postgres","end_time":"2025-08-06T08:32:24+0000","is_slow_sql":true,"limit":10,"multi_queries":[{"condition":"OR","is_fuzzy":true,"name":"query","values":["select"]}],"node_id":"672cd018568d40b980ce7bf345ebd5a7no14","offset":0,"order":"DESC","order_by":"sql_count","query":"select name $1 from table","schema_name":"public","sql_exec_id":"72902018970165236","sql_id":"1790862420","trace_id":"d3eef567-4be6-424c-860f-75684457bf72","transaction_id":"0","username":"rdsAdmin"},"x-request-examples-description-1":"","x-request-examples-url-1":"POST https://{endpoint}/v3/1528a5fecb4449ec9d383630ec58b1d3/instances/9e4e46a450f348e3945872186622cbc2in14/list-full-sql-statistics","x-support-sdk":"Y"}}},"product_short":"GaussDBforopenGauss","region_id":"cn-north-4","schemes":["HTTPS"],"security_definitions":null,"summary":"查询实例全量SQL聚合统计列表","tags":"全量SQL","uri":null,"version":"2.0"}