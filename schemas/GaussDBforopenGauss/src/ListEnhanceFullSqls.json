{"base_path":"/","components":null,"consumes":"[\"application/json;charset=UTF-8\"]","definitions":{"CompareConditionOption":{"description":"组合比较查询条件,可针对某个给定过滤字段,进行区间范围、大小、小于等条件合并查询。","properties":{"enable_equal":{"description":"**参数解释**:\n是否使能包含等于,如果为true,则表示包含边界条件(min或max)的取值。\n**约束限制**:\n不涉及。\n**取值范围**:\n- true\n- false\n\n**默认取值**:\n不涉及。","example":true,"type":"boolean"},"max":{"description":"**参数解释**:\n最大值判断条件对应取值(小于条件)。\n**约束限制**:\n不涉及。\n**取值范围**:\n[0, 2^63-1]\n**默认取值**:\n不涉及。","format":"int64","type":"integer"},"min":{"description":"**参数解释**:\n最小值判断条件对应取值(大于条件)。\n**约束限制**:\n不涉及。\n**取值范围**:\n[0, 2^63-1]\n**默认取值**:\n不涉及。","format":"int64","type":"integer"},"name":{"description":"**参数解释**:\n查询字段名称,当前仅支持特定的数值字段。\n**约束限制**:\n不涉及。\n**取值范围**:\n- total_sql_time: 总SQL耗时。\n- sql_time:SQL执行次数。\n\n**默认取值**:\n不涉及。","example":"query","type":"string"},"value":{"description":"**参数解释**:\n等值判断条件对应取值(等于条件)。value的优先级最高,如果value不为空,则忽略min和max的取值设置;value为空时,才使能min和max的条件过滤。\n**约束限制**:\n不涉及。\n**取值范围**:\n[0, 2^63-1]\n**默认取值**:\n不涉及。","format":"int64","type":"integer"}},"required":["name"],"type":"object"},"ErrorResponseBody":{"properties":{"error_code":{"description":"**参数解释**:\n错误码。\n**取值范围**:\n不涉及。","example":"DBS.00114000","type":"string"},"error_msg":{"description":"**参数解释**:\n错误消息。\n**取值范围**:\n不涉及。","example":"系统内部错误","type":"string"}},"required":["error_code","error_msg"]},"FullSqlResult":{"description":"**参数解释**:\n全量SQL。","properties":{"all_time":{"description":"**参数解释**:\n执行总时间(单位:微秒)。\n**取值范围**:\n不涉及。","example":100,"format":"int64","type":"integer"},"application_name":{"description":"**参数解释**:\n用户发起的请求的应用程序名称。\n**取值范围**:\n不涉及。","example":"gsql","type":"string"},"begin_time":{"description":"**参数解释**:\n开始时间,格式为“yyyy-mm-ddThh:mm:ss.SSSSSZ”。\n**取值范围**:\n不涉及。","example":"2022-05-09T16:01:10.000000+0800","type":"string"},"client_addr":{"description":"**参数解释**:\n用户发起的请求的客户端地址。\n**取值范围**:\n不涉及。","example":"192.168.0.10","type":"string"},"client_port":{"description":"**参数解释**:\n用户发起请求的客户端端口。\n**取值范围**:\n不涉及。","example":"54321","type":"string"},"component_id":{"description":"**参数解释**:\n组件ID。\n**取值范围**:\n不涉及。","example":"component-abcde","type":"string"},"cpu_time":{"description":"**参数解释**:\nCPU时间(单位:微秒)。\n**取值范围**:\n不涉及。","example":100,"format":"int64","type":"integer"},"data_io_time":{"description":"**参数解释**:\nIO时间(单位:微秒)。\n**取值范围**:\n不涉及。","example":100,"format":"int64","type":"integer"},"db_name":{"description":"**参数解释**:\n数据库名称。\n**取值范围**:\n不涉及。","example":"postgres","type":"string"},"db_time":{"description":"**参数解释**:\n有效DB时间(单位:微秒)。\n**取值范围**:\n不涉及。","example":100,"format":"int64","type":"integer"},"delete_rows":{"description":"**参数解释**:\n删除行。\n**取值范围**:\n不涉及。","example":10,"format":"int64","type":"integer"},"end_time":{"description":"**参数解释**:\n结束时间,格式为“yyyy-mm-ddThh:mm:ss.SSSSSZ”。\n**取值范围**:\n不涉及。","example":"2022-05-09T16:01:10.000000+0800","type":"string"},"execution_time":{"description":"**参数解释**:\n执行器内执行时间(单位:微秒)。\n**取值范围**:\n不涉及。","example":100,"format":"int64","type":"integer"},"finish_timestamp":{"description":"**参数解释**:\nSQL结束时间,格式为13位标准时间戳,如1754647168355。\n**取值范围**:\n不涉及。","example":"17546''7168355","format":"int64","type":"integer"},"hit_rate":{"description":"**参数解释**:\nSQL命中率。\n计划即将下线,请勿使用。\n**取值范围**:\n不涉及。","example":0.95,"format":"double","type":"number"},"id":{"description":"**参数解释**:\nSQL记录唯一键ID。\n**取值范围**:\n不涉及。","example":"291e7e91-f920-4269-94c7-f9d7237c5f05","type":"string"},"insert_rows":{"description":"**参数解释**:\n插入行。\n**取值范围**:\n不涉及。","example":100,"format":"int64","type":"integer"},"instance_id":{"description":"**参数解释**:\n实例ID。\n**取值范围**:\n不涉及。","example":"instance-12345","type":"string"},"is_slow_sql":{"description":"**参数解释**:\n是否慢SQL。\n**取值范围**:\n不涉及。","example":true,"type":"boolean"},"node_id":{"description":"**参数解释**:\n节点ID。\n**取值范围**:\n不涉及。","example":"node-67890","type":"string"},"query":{"description":"**参数解释**:\n归一化SQL。\n**取值范围**:\n不涉及。","example":"SELECT * FROM user WHERE id = ?","type":"string"},"scan_lines":{"description":"**参数解释**:\n扫描行。\n**取值范围**:\n不涉及。","example":1000,"format":"int64","type":"integer"},"schema_name":{"description":"**参数解释**:\nschema名称。\n**取值范围**:\n不涉及。","example":"$user.public","type":"string"},"sql":{"description":"**参数解释**:\n解析后的原始SQL文本。\n**取值范围**:\n开启track_stmt_parameter参数后,会把SQL文本中的变量替换成真实值,展示原始的SQL。对于track_stmt_parameter参数关闭时采集的SQL文本,无法获取到SQL参数变量的值,展示的内容为空。","example":"SELECT * FROM user WHERE id = 123","type":"string"},"sql_exec_id":{"description":"**参数解释**:\n唯一SQL ID,对应内核字段:debug_query_id。\n**取值范围**:\n不涉及。","example":"3929508612","type":"string"},"sql_id":{"description":"**参数解释**:\n归一化SQL ID,对应内核字段:unique_sql_id。\n**取值范围**:\n不涉及。","example":"3929508612","type":"string"},"start_timestamp":{"description":"**参数解释**:\nSQL开始时间。格式为13位标准时间戳,如1754647168354。\n**取值范围**:\n不涉及。","example":1754647168354,"format":"int64","type":"integer"},"trace_id":{"description":"**参数解释**:\n链路ID。\n**取值范围**:\n不涉及。","example":"d3eef567-4be6-424c-860f-75684457bf72","type":"string"},"transaction_id":{"description":"**参数解释**:\n事务ID,对应内核字段:debug_query_id。\n**取值范围**:\n不涉及。","example":"3929508612","type":"string"},"update_rows":{"description":"**参数解释**:\n更新行。\n**取值范围**:\n不涉及。","example":50,"format":"int64","type":"integer"},"username":{"description":"**参数解释**:\n用户名称。\n**取值范围**:\n不涉及。","example":"root","type":"string"}},"type":"object"},"ListEnhanceFullSqlsRequestBody":{"description":"查询全量SQL列表请求体","properties":{"begin_time":{"description":"**参数解释**:\n查询开始时间。\n**约束限制**:\nISO 8601 UTC格式。模式为“yyyy-mm-ddThh:mm:ssZ”。其中,T指某个时间的开始;Z指时区偏移量。\n时区中的+号需要进行URL编码,编码为%2B,时区中的-号无需编码。\n例如:北京时间偏移显示为+0800,begin_time=2024-03-15T17:20:33+0800,传参时编码为begin_time=2024-03-15T17:20:33%2B0800。\n**取值范围**:\n时间区间(begin_time ~ end_time)不能超过30天。\n**默认取值**:\n不涉及。","example":"2025-01-01T16:01:10+0800","type":"string"},"client_addr":{"description":"**参数解释**:\n客户端地址。\n**约束限制**:\n不涉及。\n**取值范围**:\n不涉及。\n**默认取值**:\n不涉及。","example":"192.168.0.10","type":"string"},"client_port":{"description":"**参数解释**:\n客户端端口。\n**约束限制**:\n不涉及。\n**取值范围**:\n不涉及。\n**默认取值**:\n不涉及。","example":"8890","type":"string"},"compare_conditions":{"description":"**参数解释**:\n组合比较查询条件,可针对某个给定过滤字段,进行区间范围、大小、小于等条件合并查询。默认取值为[]。\n**约束限制**:\n不涉及。","items":{"$ref":"#/definitions/CompareConditionOption"},"minItems":0,"type":"array"},"db_name":{"description":"**参数解释**:\n数据库名称。\n**约束限制**:\n不涉及。\n**取值范围**:\n不涉及。\n**默认取值**:\n不涉及。","example":"postgres","type":"string"},"end_time":{"description":"**参数解释**:\n查询结束时间。\n**约束限制**:\nISO 8601 UTC格式。模式为“yyyy-mm-ddThh:mm:ssZ”。其中,T指某个时间的开始;Z指时区偏移量。\n时区中的+号需要进行URL编码,编码为%2B,时区中的-号无需编码。\n例如:北京时间偏移显示为+0800,end_time=2024-03-16T17:20:33+0800,传参时编码为end_time=2024-03-16T17:20:33%2B0800。\n**取值范围**:\n时间区间(begin_time ~ end_time)不能超过30天。\n**默认取值**:\n不涉及。","example":"2025-01-20T16:01:10+0800","type":"string"},"is_slow_sql":{"description":"**参数解释**:\n是否为慢SQL。\n**约束限制**:\n不涉及。\n**取值范围**:\n- true:是慢SQL。\n- false:不是慢SQL。\n\n**默认取值**:\n不涉及。","enum":[true,false],"example":true,"type":"boolean"},"limit":{"default":10,"description":"**参数解释**:\n最大查询记录数。例如该参数设定为10,则查询结果最多只显示10条记录。\n**约束限制**:\n对于公有云25.5.0.1及以上版本,此参数弃用,请勿传值。通过系统系统参数控制最大返回记录数量,默认为200。\n**取值范围**:\n[1, 1000]\n**默认取值**:\n默认为10。","example":10,"type":"integer"},"multi_queries":{"description":"**参数解释**:\n字段汇聚查询条件列表。默认取值为[]。\n**约束限制**:\n不涉及。","items":{"$ref":"#/definitions/MultiQueryConditionOption"},"minItems":0,"type":"array"},"node_id":{"description":"**参数解释**:\n节点ID。\n**约束限制**:\n不涉及。\n**取值范围**:\n不涉及。\n**默认取值**:\n不涉及。","example":"b470c6297bb24c258e3eccf8dcaaa3f0no14","type":"string"},"order":{"description":"**参数解释**:\n排序方式,支持升序和降序。\n**约束限制**:\n不涉及。\n**取值范围**:\n- DESC:降序。\n- ASC:升序。\n\n**默认取值**:\nDESC","enum":["ASC","DESC"],"example":"DESC","type":"string"},"order_by":{"description":"**参数解释**:\n排序字段。\n**约束限制**:\n不涉及。\n**取值范围**:\n- begin_time:起始时间。\n\n**默认取值**:\nbegin_time","enum":["begin_time"],"example":"begin_time","type":"string"},"query":{"description":"**参数解释**:\nSQL文本。\n**约束限制**:\n不涉及。\n**取值范围**:\n长度1-4096。\n**默认取值**:\n不涉及。","example":"select * from gaussdb","type":"string"},"schema_name":{"description":"**参数解释**:\nschema名称。\n**约束限制**:\n不涉及。\n**取值范围**:\n不涉及。\n**默认取值**:\n不涉及。","example":"$user.public","type":"string"},"sql_exec_id":{"description":"**参数解释**:\n唯一SQL ID。\n**约束限制**:\n不涉及。\n**取值范围**:\n不涉及。\n**默认取值**:\n不涉及。","example":"1945836514000776938","type":"string"},"sql_id":{"description":"**参数解释**:\n归一化SQL ID。\n**约束限制**:\n不涉及。\n**取值范围**:\n不涉及。\n**默认取值**:\n不涉及。","example":"3801186389","type":"string"},"trace_id":{"description":"**参数解释**:\n链路ID。\n**约束限制**:\n不涉及。\n**取值范围**:\n不涉及。\n**默认取值**:\n不涉及。","example":"d3eef567-4be6-424c-860f-75684457bf72","type":"string"},"transaction_id":{"description":"**参数解释**:\n事务ID。\n**约束限制**:\n不涉及。\n**取值范围**:\n不涉及。\n**默认取值**:\n不涉及。","example":"0","type":"string"},"username":{"description":"**参数解释**:\n用户名称。\n**约束限制**:\n不涉及。\n**取值范围**:\n不涉及。\n**默认取值**:\n不涉及。","example":"root","type":"string"}},"required":["begin_time","end_time"],"type":"object"},"ListFullSqlsResponseBody":{"description":"**参数解释**:\n全量SQL列表。\n**约束限制**:\n不涉及。","properties":{"full_sqls":{"description":"**参数解释**:\n全量SQL列表。","items":{"$ref":"#/definitions/FullSqlResult"},"minItems":0,"type":"array"},"limit_count":{"description":"**参数解释**:\n最大查询记录数量。主要供前端交互控制使用。\n**取值范围**:\n不涉及。","format":"int64","type":"integer"},"total_count":{"description":"**参数解释**:\n总记录数量。\n**取值范围**:\n不涉及。","format":"int64","type":"integer"}},"type":"object"},"MultiQueryConditionOption":{"properties":{"condition":{"description":"**参数解释**:\n组合条件类型。\n**约束限制**:\n不涉及。\n**取值范围**:\n仅限字符串:\"AND\"、\"OR\"。\n**默认取值**:\n不涉及。","enum":["OR","AND"],"example":"AND","type":"string"},"is_fuzzy":{"description":"**参数解释**:\n多个过滤检索条件内容集合。\n**约束限制**:\n只支持为true进行模糊查询。\n**取值范围**:\n- true:模糊查询。\n- false:精确匹配。\n\n**默认取值**:\ntrue","enum":[true,false],"example":true,"type":"boolean"},"name":{"description":"**参数解释**:\n查询字段名称。\n**约束限制**:\n只支持字符串\"query\"。\n**取值范围**:\n由英文字母(大小写)、数字或下划线组成,长度为 1 至 128 个字符。\n**默认取值**:\n不涉及。","example":"query","type":"string"},"values":{"description":"**参数解释**:\n多个过滤检索条件内容集合。由 1 至 5 个字符串组成的列表。\n**约束限制**:\n不涉及。\n**取值范围**:\n不涉及。\n**默认取值**:\n不涉及。","example":["select"],"items":{"type":"string"},"type":"array"}},"required":["name","condition","values"],"type":"object"}},"description":null,"group_id":"cb81c3e0ae314c27a40e8fc90fd34a80","host":"gaussdb-opengauss.cn-north-4.myhuaweicloud.com","id":"343e2cd38faf461a8198fde5054b9a93","info_version":"v3","method":"post","name":"ListEnhanceFullSqls","parameters":{},"paths":{"/v3/{project_id}/instances/{instance_id}/list-full-sqls":{"post":{"description":"查询GaussDB数据库实例全量SQL日志记录列表,支持增强型条件过滤。 如可对SQL文本(query字段)进行多条件合并查询,可对db_time、cpu_time、data_io_time及execution_time字段进行大于、小于、区间范围等条件的过滤","operationId":"ListEnhanceFullSqls","parameters":[{"description":"**参数解释**:\n用户Token。\n通过调用IAM服务[获取用户token](https://support.huaweicloud.com/intl/zh-cn/api-iam/iam_30_0001.html)。\n**约束限制**:\n不涉及。\n**取值范围**:\n不涉及。\n**默认取值**:\n不涉及。","in":"header","name":"X-Auth-Token","required":true,"type":"string","x-example":"******"},{"default":"en-us","description":"**参数解释**:\n语言。\n**约束限制**:\n不涉及。\n**取值范围**:\n- zh-cn \n- en-us\n\n**默认取值**:\nen-us","enum":["zh-cn","en-us"],"in":"header","name":"X-Language","required":false,"type":"string","x-example":"en-us"},{"description":"**参数解释**:\n租户在某一Region下的项目ID。\n获取方法请参见[获取项目ID](https://support.huaweicloud.com/api-gaussdb/gaussdb_api_196.html)。\n**约束限制**:\n不涉及。\n**取值范围**:\n只能由英文字母、数字组成,且长度为32个字符。\n**默认取值**:\n不涉及。","in":"path","name":"project_id","required":true,"type":"string","x-example":"1528a5fecb4449ec9d383630ec58b1d3"},{"description":"**参数解释**:\n实例ID,此参数是用户创建实例的唯一标识。\n**约束限制**:\n不涉及。\n**取值范围**:\n只能由英文字母、数字组成,且长度为32个字符。\n**默认取值**:\n不涉及。","in":"path","name":"instance_id","required":true,"type":"string","x-example":"9e4e46a450f348e3945872186622cbc2in14"},{"description":"**参数解释**:\n查询全量SQL列表请求体。\n**约束限制**:\n不涉及。","in":"body","name":"ListEnhanceFullSqlsRequestBody","required":true,"schema":{"$ref":"#/definitions/ListEnhanceFullSqlsRequestBody"}}],"produces":["application/json"],"responses":{"200":{"description":"OK","examples":{"application/json":{"full_sqls":[{"all_time":175,"begin_time":"2025-01-04 07:24:21 +0000","client_addr":"192.168.0.10","cpu_time":170,"data_io_time":0,"db_name":"postgres","db_time":214,"end_time":"2025-01-04 07:24:60 +0000","execution_time":26,"hit_rate":1,"id":"291e7e91-f920-4269-94c7-f9d7237c5f05","is_slow_sql":false,"query":"select name, $1 from table where key = 'value'; parameters: $1 = 'cuirong'","scan_lines":0,"schema_name":"\\$user\\public","sql_exec_id":"1945836514000776938","sql_id":"3801186389","template":"select name, $1 from table where key = 'value';","trace_id":null,"transaction_id":"0","username":"rdsAdmin"}],"total_count":1}},"schema":{"$ref":"#/definitions/ListFullSqlsResponseBody"}},"default":{"description":"系统内部错误。","schema":{"$ref":"#/definitions/ErrorResponseBody"}}},"summary":"查询全量单条SQL记录列表","tags":["全量SQL"],"x-api-type":"open-api","x-apigateway-ratelimit":"opengauss_default_policy","x-is-registered":"Y","x-request-examples-1":{"begin_time":"2025-01-01T16:01:10+0800","compare_conditions":[{"enable_equal":true,"max":10000,"min":1,"name":"db_time"}],"end_time":"2025-01-20T16:01:10+0800","limit":10,"multi_queries":[{"condition":"AND","is_fuzzy":true,"name":"query","values":["select","from table"]}],"offset":0,"username":"root"},"x-request-examples-description-1":"","x-request-examples-url-1":"POST https://{Endpoint}/v3/1528a5fecb4449ec9d383630ec58b1d3/instances/9e4e46a450f348e3945872186622cbc2in14/list-full-sqls","x-support-sdk":"Y"}}},"product_short":"GaussDBforopenGauss","region_id":"cn-north-4","schemes":["HTTPS"],"security_definitions":null,"summary":"查询全量单条SQL记录列表","tags":"全量SQL","uri":null,"version":"2.0"}