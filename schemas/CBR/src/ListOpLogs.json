{"base_path":"/","components":null,"consumes":"[\"application/json;charset=UTF-8\"]","definitions":{"OpErrorInfo":{"properties":{"code":{"description":"请参见[错误码](ErrorCode.xml)。","type":"string","x-huawei-extraAnnotation":""},"message":{"description":"错误信息","type":"string"}}},"OpExtendInfoBckup":{"properties":{"app_consistency_error_code":{"description":"应用一致性备份失败错误码。请参见[错误码](ErrorCode.xml)。","type":"string","x-open-region-cloud":"hc,hk,obc,hcso,tm,mix,hws_ocb,fcs_dt"},"app_consistency_error_message":{"description":"应用一致性备份错误信息","type":"string","x-open-region-cloud":"hc,hk,obc,hcso,tm,hws_ocb,fcs_dt"},"app_consistency_status":{"description":"应用一致性备份状态;0:非应用一致性,1:应用一致性备份","enum":["0","1"],"type":"string","x-open-region-cloud":"hc,hk,obc,hcso,tm,hws_ocb,fcs_dt"},"backup_id":{"description":"备份副本ID","type":"string"},"backup_name":{"description":"备份名称","type":"string"},"incremental":{"description":"是否增备","enum":["\"true\"","\"false\""],"type":"string","x-open-region-cloud":"hc,hk,otc,obc,ctc,hcso,sbc,g42,tm,cmcc,dt_test,hk_sbc,hws_ocb,fcs"}},"required":["backup_id"]},"OpExtendInfoCommon":{"properties":{"progress":{"description":"进度,取值为0-100","format":"int32","maximum":100,"minimum":0,"type":"integer","x-huawei-extraAnnotation":""},"request_id":{"description":"请求id","type":"string"},"task_id":{"description":"备份任务id","type":"string","x-huawei-extraAnnotation":""}},"required":["progress","request_id"]},"OpExtendInfoDelete":{"properties":{"backup_id":{"description":"备份副本ID","type":"string"},"backup_name":{"description":"备份名称","type":"string"}},"required":["backup_id","backup_name"]},"OpExtendInfoRemoveResources":{"properties":{"fail_count":{"description":"删除失败的资源数量","format":"int32","type":"integer"},"resources":{"description":"","items":{"$ref":"#/definitions/Resource"},"type":"array"},"total_count":{"description":"删除的备份数量","format":"int32","type":"integer"}}},"OpExtendInfoReplication":{"properties":{"destination_backup_id":{"description":"目标副本ID","type":"string","x-open-region-cloud":"hc,hk,obc"},"destination_backup_name":{"description":"目标备份名称","type":"string","x-open-region-cloud":"hc,hk,obc"},"destination_checkpoint_id":{"description":"目标还原点ID","type":"string","x-open-region-cloud":"hc,hk,obc"},"destination_project_id":{"description":"目标project_id","type":"string","x-open-region-cloud":"hc,hk,obc"},"destination_region":{"description":"目标区域","type":"string","x-open-region-cloud":"hc,hk,obc"},"source_backup_id":{"description":"源副本ID","type":"string","x-open-region-cloud":"hc,hk,obc"},"source_backup_name":{"description":"源备份名称","type":"string","x-open-region-cloud":"hc,hk,obc"},"source_checkpoint_id":{"description":"源还原点ID","type":"string","x-open-region-cloud":"hc,hk,obc"},"source_project_id":{"description":"源project_id","type":"string","x-open-region-cloud":"hc,hk,obc"},"source_region":{"description":"源区域","type":"string","x-open-region-cloud":"hc,hk,obc"}},"required":["destination_project_id","destination_region","source_backup_id","source_project_id","source_region"]},"OpExtendInfoRestore":{"properties":{"backup_id":{"description":"备份副本ID","type":"string"},"backup_name":{"description":"备份名称","type":"string"},"target_resource_id":{"description":"恢复目标资源ID","type":"string"},"target_resource_name":{"description":"恢复目标资源名称","type":"string"}}},"OpExtendInfoSync":{"properties":{"delete_backup_num":{"description":"删除的备份副本数","format":"int32","type":"integer"},"err_sync_backup_num":{"description":"同步失败备副本数","format":"int32","type":"integer"},"sync_backup_num":{"description":"同步备份副本数","format":"int32","type":"integer"}}},"OpExtendInfoVaultDelete":{"properties":{"fail_count":{"description":"本次任务删除失败的资源数量","format":"int32","type":"integer"},"total_count":{"description":"本次任务删除的备份总数","format":"int32","type":"integer"}}},"OpExtraInfo":{"properties":{"backup":{"$ref":"#/definitions/OpExtendInfoBckup","description":"备份扩展参数"},"common":{"$ref":"#/definitions/OpExtendInfoCommon","description":"公共参数"},"delete":{"$ref":"#/definitions/OpExtendInfoDelete","description":"删除扩展参数"},"remove_resources":{"$ref":"#/definitions/OpExtendInfoRemoveResources","description":"移除Vault的资源"},"replication":{"$ref":"#/definitions/OpExtendInfoReplication","description":"扩展复制信息","x-open-region-cloud":"hc,hk"},"resource":{"$ref":"#/definitions/Resource","description":"资源信息"},"restore":{"$ref":"#/definitions/OpExtendInfoRestore","description":"扩展恢复信息"},"sync":{"$ref":"#/definitions/OpExtendInfoSync","description":"扩展同步信息"},"vault_delete":{"$ref":"#/definitions/OpExtendInfoVaultDelete","description":"删除vault"}},"required":["common","resource"]},"OpListResp":{"properties":{"count":{"description":"任务个数","format":"int32","type":"integer"},"limit":{"default":1000,"description":"每页显示的条目数量","format":"int32","maximum":1000,"minimum":1,"type":"integer"},"offset":{"default":0,"description":"偏移量,表示从此偏移量开始查询","format":"int32","minimum":0,"type":"integer"},"operation_logs":{"description":"任务列表","items":{"$ref":"#/definitions/OperationLog"},"type":"array"}},"required":["count","operation_logs"]},"OperationLog":{"properties":{"checkpoint_id":{"description":"备份记录id","type":"string"},"created_at":{"description":"创建时间,例如: \"2020-02-23T01:00:32Z\"","type":"string","x-huawei-extraAnnotation":""},"ended_at":{"description":"任务结束时间,例如: \"2020-02-23T01:00:32Z\"","type":"string","x-huawei-extraAnnotation":""},"error_info":{"$ref":"#/definitions/OpErrorInfo","description":"任务错误信息"},"extra_info":{"$ref":"#/definitions/OpExtraInfo","description":"任务扩展信息"},"id":{"description":"任务id","type":"string"},"operation_type":{"description":"任务类型","enum":["backup","copy","replication","restore","delete","sync","vault_delete","remove_resource"],"type":"string","x-huawei-extraAnnotation":""},"policy_id":{"description":"策略ID","type":"string"},"project_id":{"description":"项目ID","type":"string"},"provider_id":{"description":"备份提供商ID。用于区分备份对象。","type":"string","x-huawei-extraAnnotation":""},"started_at":{"description":"任务开始时间,例如: \"2020-02-23T01:00:32Z\"","type":"string","x-huawei-extraAnnotation":""},"status":{"description":"任务状态","enum":["success","skipped","failed","running","timeout","waiting"],"type":"string","x-huawei-extraAnnotation":""},"updated_at":{"description":"修改时间,例如: \"2020-02-23T01:00:32Z\"","type":"string","x-huawei-extraAnnotation":""},"vault_id":{"description":"任务操作资源所属存储库ID","type":"string","x-huawei-extraAnnotation":""},"vault_name":{"description":"任务操作资源所属存储库名称","type":"string","x-huawei-extraAnnotation":""}},"required":["created_at","error_info","id","project_id","started_at","status","updated_at"]},"Resource":{"properties":{"extra_info":{"$ref":"#/definitions/ResourceExtraInfo","description":"资源附加信息","x-open-region-cloud":"hc,hk"},"id":{"description":"待备份资源id","type":"string"},"name":{"description":"待备份资源名称,长度限制:0-255","maxLength":255,"minLength":0,"type":"string","x-huawei-extraAnnotation":""},"type":{"description":"待备份资源的类型, 云服务器: OS::Nova::Server, 云硬盘: OS::Cinder::Volume, 裸金属服务器: OS::Ironic::BareMetalServer, 线下本地服务器: OS::Native::Server, 弹性文件系统: OS::Sfs::Turbo, 云桌面:OS::Workspace::DesktopV2","type":"string","x-huawei-extraAnnotation":""}},"required":["id","type"]},"ResourceExtraInfo":{"properties":{"exclude_volumes":{"description":"需要排除备份的卷id。仅在多系统盘备份特性中有效,排除不需要备份的磁盘。当虚拟机新绑定磁盘时,也能继续排除之前设置不用备份的卷。","items":{"description":"","type":"string"},"type":"array","x-open-region-cloud":"hc,hk,otc,ocb,hcso,sbc,g42,hcso_dt"}}},"ResourceExtraInfoIncludeVolumes":{"description":"","properties":{"id":{"description":"卷ID,仅支持uuid","type":"string","x-open-region-cloud":"hc,hk"},"os_version":{"description":"操作系统类型","type":"string","x-open-region-cloud":"hc,hk"}},"required":["id"]}},"description":null,"group_id":"11b1e4b30d524dacb6891902e04115dd","host":"cbr.cn-north-4.myhuaweicloud.com","id":"fe65b346177c4dbea68bc6e0384438c7","info_version":"v1","method":"get","name":"ListOpLogs","parameters":{},"paths":{"/v3/{project_id}/operation-logs":{"get":{"consumes":[],"deprecated":false,"description":"查询任务列表","operationId":"ListOpLogs","parameters":[{"description":"任务结束时间,格式为%YYYY-%mm-%ddT%HH:%MM:%SSZ,例如2018-02-01T12:00:00Z","in":"query","name":"end_time","required":false,"type":"string","x-order":1},{"description":"每页显示的条目数量,正整数","format":"int32","in":"query","minimum":1,"name":"limit","required":false,"type":"integer","x-order":2},{"description":"偏移值,正整数","format":"int32","in":"query","minimum":1,"name":"offset","required":false,"type":"integer","x-order":3},{"description":"任务类型","enum":["backup","copy","replication","delete","restore","vault_delete","remove_resource","sync"],"in":"query","name":"operation_type","required":false,"type":"string","x-order":4},{"description":"项目ID","in":"path","name":"project_id","required":true,"type":"string","x-order":5},{"description":"备份提供商ID","in":"query","name":"provider_id","required":false,"type":"string","x-order":6},{"description":"该任务操作的资源ID","in":"query","name":"resource_id","required":false,"type":"string","x-order":7},{"description":"该任务操作的资源名称","in":"query","name":"resource_name","required":false,"type":"string","x-order":8},{"description":"任务开始时间,格式为%YYYY-%mm-%ddT%HH:%MM:%SSZ,例如2018-01-01T12:00:00Z","in":"query","name":"start_time","required":false,"type":"string","x-order":9},{"description":"任务状态","enum":["success","skipped","failed","running","timeout","waiting"],"in":"query","name":"status","required":false,"type":"string","x-order":10},{"description":"存储库ID,该任务操作的资源所属绑定的存储库。","in":"query","name":"vault_id","required":false,"type":"string","x-order":11},{"description":"存储库名称,该任务操作资源所绑定的存储库名称。","in":"query","name":"vault_name","required":false,"type":"string","x-order":12},{"description":"企业项目id或all_granted_eps,all_granted_eps表示查询用户有权限的所有企业项目id","in":"query","name":"enterprise_project_id","required":false,"type":"string","x-open-region-cloud":"hc,hk,hcso,tm","x-order":13},{"description":"用户Token。\n通过调用IAM服务获取用户Token接口获取(响应消息头中X-Subject-Token的值)。","in":"header","name":"X-Auth-Token","required":true,"type":"string","x-example":"MIIDkgYJKoZIhvcNAQcCoIIDgzCCXXXXX...","x-order":14}],"produces":[],"responses":{"200":{"description":"OK","examples":{"application/json":{"count":1,"operation_logs":[{"checkpoint_id":"b432511f-d889-428f-8b0e-5f47c524c6b6","created_at":"2019-05-23T14:31:36.039365","ended_at":"2019-05-23T14:35:23.511155","error_info":{"code":"","message":""},"extra_info":{"backup":{"backup_id":"0e5d0ef6-7f0a-4890-b98c-cb12490e31c1","backup_name":"manualbk_backup"},"common":{"progress":100,"request_id":"req-cdb98cc4-e87b-4f40-9b4a-57ec036620bc"},"resource":{"id":"1dab32fa-ebf2-415a-ab0b-eabe6353bc86","name":"ECS-0001","type":"OS::Nova::Server"}},"id":"4827f2da-b008-4507-ab7d-42d0df5ed912","operation_type":"backup","policy_id":null,"project_id":"04f1829c788037ac2fb8c01eb2b04b95","provider_id":"0daac4c5-6707-4851-97ba-169e36266b66","started_at":"2019-05-23T14:31:36.007230","status":"success","updated_at":"2019-05-23T14:35:23.584418","vault_id":null,"vault_name":null}]}},"schema":{"$ref":"#/definitions/OpListResp"}},"404":{"description":"Not Found","schema":{"$ref":"#/definitions/OpListResp"}}},"summary":"查询任务列表","tags":["任务"],"x-apiexplorer-hide":"false","x-constraint":"","x-first-open-time":"","x-hybridcloud":"","x-is-registered":"Y","x-name":"查询任务列表","x-open-region-cloud":"hc,hk,otc,obc,ctc,hcso,sbc,g42,tm,cmcc,hk-g42,hcso_dt","x-order":11,"x-publishpath":"","x-request-examples-1":"","x-request-examples-description-1":"","x-request-examples-text-1":"","x-request-examples-url-1":"GET https://{endpoint}/v3/{project_id}/operation-logs","x-scope":"Commercial","x-source":"SelfDeveloped","x-support-sdk":"Y"}}},"product_short":"CBR","region_id":"cn-north-4","schemes":["HTTPS"],"security_definitions":null,"summary":"查询任务列表","tags":"任务","uri":null,"version":"2.0"}