{"base_path":"/","components":null,"consumes":"[\"application/json;charset=UTF-8\"]","definitions":{"Agent":{"description":"","properties":{"agent_id":{"description":"客户端ID","type":"string"},"agent_type":{"description":"客户端类型","type":"string"},"agent_version":{"description":"客户端版本号","type":"string"},"created_at":{"description":"客户端创建时间","format":"date-time","type":"string"},"host_ip":{"description":"客户端所在主机的IP","type":"string"},"host_name":{"description":"客户端所在的主机名","type":"string"},"host_nickname":{"description":"客户端所在的主机昵称","type":"string"},"host_os":{"description":"客户端主机所在的操作系统","type":"string"},"last_active_time":{"description":"客户端上次激活时间","format":"date-time","type":"string"},"paths":{"description":"客户端的备份路径","items":{"$ref":"#/definitions/Path","description":"路径详情"},"type":"array"},"status":{"description":"客户端状态","type":"string"},"updated_at":{"description":"客户端更新时间","format":"date-time","type":"string"}},"required":["agent_id"]},"AgentGetResp":{"description":"","properties":{"agent":{"$ref":"#/definitions/Agent","description":"客户端详情"}},"required":["agent"]},"AgentRegister":{"description":"","properties":{"agent_id":{"description":"客户端ID","type":"string"},"agent_type":{"description":"客户端类型,分本地客户端和云上客户端(cloud/native)","type":"string"},"agent_version":{"description":"客户端版本","pattern":"((\\d){1,3}\\.){2}(\\d){1,3}$","type":"string"},"host_ip":{"description":"客户端所在主机的IP","type":"string"},"host_name":{"description":"客户端所在的主机名","type":"string"},"host_nickname":{"description":"客户端所在主机的主机别名","type":"string"},"host_os":{"description":"客户端所在主机的操作系统","type":"string"}},"required":["agent_id","host_ip","host_name","host_os"]},"AgentRegisterReq":{"description":"","properties":{"agent":{"$ref":"#/definitions/AgentRegister","description":"客户端注册参数"}},"required":["agent"]},"Path":{"description":"","properties":{"agent_id":{"description":"该路径所属于的客户端ID","type":"string"},"dir_path":{"description":"路径详情","type":"string"},"id":{"description":"路径ID","type":"string"},"status":{"description":"路径状态,有available和remove两种状态","type":"string"}}}},"description":null,"group_id":"11b1e4b30d524dacb6891902e04115dd","host":"cbr.cn-north-4.myhuaweicloud.com","id":"8f8878cf9a6c44858fd51be61823881b","info_version":"v1","method":"post","name":"RegisterAgent","parameters":{},"paths":{"/v3/{project_id}/agents":{"post":{"consumes":[],"deprecated":false,"description":"注册客户端,安装时候由Agent调用,无需手动注册。","operationId":"RegisterAgent","parameters":[{"description":"项目ID","in":"path","name":"project_id","required":true,"type":"string","x-open-region-cloud":"","x-order":1},{"description":"用户Token。\n通过调用IAM服务获取用。","in":"header","name":"X-Auth-Token","required":true,"type":"string","x-open-region-cloud":"","x-order":2},{"description":"注册客户端参数明细","in":"body","name":"RegisterAgentRequestBody","required":true,"schema":{"$ref":"#/definitions/AgentRegisterReq"},"x-open-region-cloud":"","x-order":3}],"produces":[],"responses":{"200":{"description":"OK","examples":{"application/json":{"agent":{"agent_id":"489654f2-363b-4ebf-966a-bdf079d97114","agent_type":"native","agent_version":"1.0.0","created_at":"2022-01-30T09:28:09.334153","host_ip":"192.168.10.144","host_name":"ecs-0001","host_nickname":"","host_os":"linux","last_active_time":"2022-01-30T09:28:08.959908","status":"normal","updated_at":"2022-01-30T09:28:09.334153"}}},"schema":{"$ref":"#/definitions/AgentGetResp"}}},"summary":"注册客户端","tags":["文件应用备份"],"x-apiErrorCodes":[{"errorCode":"BackupService.7403","errorDescription":"非法的客户端ID","errorDescriptionEn":"Invalid agent %(agent_id)s","errorMessage":"非法的客户端ID","httpStatus":"400","parentId":"i30315073d874ab8bc3bf8047e03c519","solution":"客户端注册和解注册不需要手动调用,如有问题请联系技术支持。","solutionEn":""}],"x-apiexplorer-hide":"false","x-constraint":"","x-first-open-time":"","x-hybridcloud":"","x-is-registered":"Y","x-name":"注册客户端","x-open-region-cloud":"hc,hk","x-order":6,"x-publishpath":"","x-request-examples-1":{"agent":{"agent_id":"489654f2-363b-4ebf-966a-bdf079d97114","agent_type":"native","agent_version":"1.0.0","host_ip":"10.10.0.2","host_name":"ecs-00002","host_os":"linux"}},"x-request-examples-description-1":"注册客户端由agent安装时自动触发,无需客户手动调用。","x-request-examples-text-1":"{\n\t\"agent\": {\n\t\t\"agent_id\":\"489654f2-363b-4ebf-966a-bdf079d97114\",\n\t\t\"host_name\": \"ecs-00002\", \n\t\t\"host_ip\": \"10.10.0.2\",\n\t\t\"host_os\": \"linux\", \n\t\t\"agent_version\": \"1.0.0\",\n\t\t\"agent_type\": \"native\"\n\t}\n}","x-request-examples-url-1":" POST https://{endpoint}/v3/f841e01fd2b14e7fa41b6ae7aa6b0594/agents","x-scope":"Commercial","x-source":"","x-support-sdk":"Y"}}},"product_short":"CBR","region_id":"cn-north-4","schemes":["HTTPS"],"security_definitions":null,"summary":"注册客户端","tags":"文件应用备份","uri":null,"version":"2.0"}