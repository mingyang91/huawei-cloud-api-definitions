{"base_path":"/","components":null,"consumes":"[\"application/json\"]","definitions":{"BssParam":{"description":"表示包周期计费模式的相关参数。\n\n如果为空,则默认计费模式为按需计费;否则是包周期方式。","properties":{"charging_mode":{"description":"计费模式。\n\n功能说明:付费方式。\n\n取值范围:\n  - prePaid:预付费,即包年包月;\n  - postPaid:后付费,即按需付费;\n\n默认为postPaid。","enum":["prePaid","postPaid"],"type":"string"},"is_auto_pay":{"description":"下单订购后,是否自动从客户的账户中支付,而不需要客户手动去进行支付。\n\n取值范围:\n  - true:是(自动支付)\n  - false:否(需要客户手动支付)\n\n默认为手动支付。","type":"boolean"},"is_auto_renew":{"description":"是否自动续订。\n\n取值范围:\n  - true: 自动续订。\n  - false: 不自动续订。\n\n默认不自动续订。","type":"boolean"},"period_num":{"description":"订购周期数。\n\n取值范围:\n\n - periodType=month(周期类型为月)时,取值为[1,9];\n - periodType=year(周期类型为年)时,取值为[1,3];\n\n**chargingMode为prePaid时生效且为必选值。**","type":"integer"},"period_type":{"description":"订购周期类型。\n\n取值范围:\n  - month:月\n  - year:年\n\n**chargingMode为prePaid时生效且为必选值。**","enum":["month","year"],"type":"string"}},"type":"object"},"CreateInstanceByEngineReq":{"description":"创建实例请求体。","example":{"access_user":"********","arch_type":"X86","available_zones":["********706d4c1fb0eb72f0********"],"broker_num":3,"description":"","disk_encrypted_enable":true,"disk_encrypted_key":"********-b953-4875-a743-************","enable_auto_topic":true,"enable_publicip":true,"engine":"kafka","engine_version":"2.7","enterprise_project_id":"0","ipv6_enable":false,"kafka_manager_password":"********","kafka_manager_user":"********","kafka_security_protocol":"SASL_SSL","name":"kafka-test","password":"********","product_id":"c6.2u4g.cluster","publicip_id":"********-88fc-4a8c-86d0-************,********-16af-455d-8d54-************,********-3d69-4367-95ab-************","retention_policy":"time_base","sasl_enabled_mechanisms":["SCRAM-SHA-512"],"security_group_id":"********-e073-4aad-991f-************","ssl_enable":true,"storage_space":300,"storage_spec_code":"dms.physical.storage.ultra.v2","subnet_id":"********-8fbf-4438-ba71-************","tags":[{"key":"aaa","value":"111"}],"vpc_client_plain":true,"vpc_id":"********-9b4a-44c5-a964-************"},"properties":{"access_user":{"description":"当ssl_enable为true时,该参数必选,ssl_enable为false时,该参数无效。\n\n认证用户名,只能由英文字母开头且由英文字母、数字、中划线、下划线组成,长度为4~64的字符。","type":"string"},"arch_type":{"description":"CPU架构。当前只支持X86架构。\n\n取值范围:\n  - X86","type":"string"},"available_zones":{"description":"创建节点到指定且有资源的可用区ID。请参考[查询可用区信息](ListAvailableZones.xml)获取可用区ID。\n\n该参数不能为空数组或者数组的值为空。\n\n创建Kafka实例,支持节点部署在1个或3个及3个以上的可用区。在为节点指定可用区时,用逗号分隔开。","items":{"description":"可用区ID。","type":"string"},"type":"array"},"broker_num":{"description":"代理个数。","type":"integer"},"bss_param":{"$ref":"#/definitions/BssParam"},"connector_enable":{"description":"是否开启消息转储功能。\n\n默认不开启消息转储。","type":"boolean"},"description":{"description":"实例的描述信息。\n\n长度不超过1024的字符串。\n\n> \\与\"在json报文中属于特殊字符,如果参数值中需要显示\\或者\"字符,请在字符前增加转义字符\\,比如\\\\或者\\\"。","type":"string"},"disk_encrypted_enable":{"description":"是否开启磁盘加密。","type":"boolean"},"disk_encrypted_key":{"description":"磁盘加密key,未开启磁盘加密时为空","type":"string"},"enable_auto_topic":{"description":"是否打开kafka自动创建topic功能。\n- true:开启\n- false:关闭\n\n当您选择开启,表示生产或消费一个未创建的Topic时,会自动创建一个包含3个分区和3个副本的Topic。\n\n默认是false关闭。","type":"boolean"},"enable_publicip":{"description":"是否开启公网访问功能。默认不开启公网。\n- true:开启\n- false:不开启","type":"boolean"},"engine":{"description":"消息引擎。取值填写为:kafka。","enum":["kafka"],"type":"string"},"engine_version":{"description":"消息引擎的版本。取值填写为:\n  - 1.1.0\n  \n  - 2.7","type":"string"},"enterprise_project_id":{"description":"企业项目ID。若为企业项目账号,该参数必填。","type":"string"},"kafka_manager_password":{"description":"表示登录Kafka Manager的密码。\n\n复杂度要求:\n  - 输入长度为8到32位的字符串。\n  - 必须包含如下四种字符中的三种组合:\n      - 小写字母\n      - 大写字母\n      - 数字\n      - 特殊字符包括(`~!@#$%^&*()-_=+\\|[{}]:'\",<.>/?)和空格,并且不能以-开头","type":"string"},"kafka_manager_user":{"description":"表示登录Kafka Manager的用户名。只能由英文字母、数字、中划线、下划线组成,长度为4~64的字符。","type":"string"},"kafka_security_protocol":{"description":"开启SASL后使用的安全协议,如果开启了SASL认证功能(即ssl_enable=true),该字段为必选。\n\n若该字段值为空,默认开启SASL_SSL认证机制。\n\n实例创建后将不支持动态开启和关闭。\n\n- SASL_SSL: 采用SSL证书进行加密传输,支持账号密码认证,安全性更高。\n- SASL_PLAINTEXT: 明文传输,支持账号密码认证,性能更好,建议使用SCRAM-SHA-512机制。","type":"string"},"maintain_begin":{"description":"维护时间窗开始时间,格式为HH:mm。","type":"string"},"maintain_end":{"description":"维护时间窗结束时间,格式为HH:mm。","type":"string"},"name":{"description":"实例名称。\n\n由英文字符开头,只能由英文字母、数字、中划线、下划线组成,长度为4~64的字符。","type":"string"},"password":{"description":"当ssl_enable为true时,该参数必选,ssl_enable为false时,该参数无效。\n\n实例的认证密码。\n\n复杂度要求:\n- 输入长度为8到32位的字符串。\n- 必须包含如下四种字符中的三种组合:\n  - 小写字母\n  - 大写字母\n  - 数字\n  - 特殊字符包括(`~!@#$%^&*()-_=+\\|[{}]:'\",<.>/?)和空格,并且不能以-开头","type":"string"},"product_id":{"description":"产品ID。\n\n产品ID可以从[查询产品规格列表](ListEngineProducts.xml)获取。","type":"string"},"publicip_id":{"description":"实例绑定的弹性IP地址的ID。\n\n以英文逗号隔开多个弹性IP地址的ID。\n\n如果开启了公网访问功能(即enable_publicip为true),该字段为必选。","type":"string"},"retention_policy":{"description":"磁盘的容量到达容量阈值后,对于消息的处理策略。\n\n取值如下:\n- produce_reject:表示拒绝消息写入。\n- time_base:表示自动删除最老消息。","enum":["time_base","produce_reject"],"type":"string"},"sasl_enabled_mechanisms":{"description":"开启SASL后使用的认证机制,如果开启了SASL认证功能(即ssl_enable=true),该字段为必选。\n\n若该字段值为空,默认开启PLAIN认证机制。\n\n选择其一进行SASL认证即可,支持同时开启两种认证机制。\n取值如下:\n- PLAIN: 简单的用户名密码校验。\n- SCRAM-SHA-512: 用户凭证校验,安全性比PLAIN机制更高。","items":{"enum":["PLAIN","SCRAM-SHA-512"],"type":"string"},"type":"array"},"security_group_id":{"description":"指定实例所属的安全组。\n\n获取方法如下:登录虚拟私有云服务的控制台界面,在安全组的详情页面查找安全组ID。","type":"string"},"ssl_enable":{"description":"是否打开SSL加密访问。\n\n实例创建后将不支持动态开启和关闭。\n\n- true:打开SSL加密访问。\n- false:不打开SSL加密访问。","type":"boolean"},"storage_space":{"description":"消息存储空间,单位GB。\n  - Kafka实例规格为c6.2u4g.cluster时,存储空间取值范围300GB ~ 300000GB。\n  - Kafka实例规格为c6.4u8g.cluster时,存储空间取值范围300GB ~ 600000GB。\n  - Kafka实例规格为c6.8u16g.cluster时,存储空间取值范围300GB ~ 1500000GB。\n  - Kafka实例规格为c6.12u24g.cluster时,存储空间取值范围300GB ~ 1500000GB。\n  - Kafka实例规格为c6.16u32g.cluster时,存储空间取值范围300GB ~ 1500000GB。","type":"integer"},"storage_spec_code":{"description":"存储IO规格。\n\n取值范围:\n  - dms.physical.storage.high.v2:使用高IO的磁盘类型。\n  - dms.physical.storage.ultra.v2:使用超高IO的磁盘类型。\n\n如何选择磁盘类型请参考《云硬盘 产品介绍》的“磁盘类型及性能介绍”。","enum":["dms.physical.storage.high.v2","dms.physical.storage.ultra.v2"],"type":"string"},"subnet_id":{"description":"子网信息。\n\n获取方法如下:登录虚拟私有云服务的控制台界面,单击VPC下的子网,进入子网详情页面,查找网络ID。","type":"string"},"tags":{"description":"标签列表。","items":{"$ref":"#/definitions/TagEntity"},"type":"array"},"vpc_client_plain":{"description":"VPC内网明文访问。","type":"boolean"},"vpc_id":{"description":"虚拟私有云ID。\n\n获取方法如下:登录虚拟私有云服务的控制台界面,在虚拟私有云的详情页面查找VPC ID。","type":"string"}},"required":["name","engine","engine_version","broker_num","storage_space","storage_spec_code","vpc_id","security_group_id","subnet_id","available_zones","product_id"],"type":"object"},"CreateInstanceByEngineResp":{"properties":{"instance_id":{"description":"实例ID","type":"string"}},"type":"object"},"TagEntity":{"properties":{"key":{"description":"标签键。\n\n- 不能为空。\n\n- 对于同一个实例,Key值唯一。\n\n\n\n- 长度为1~128个字符(中文也可以输入128个字符)。\n\n\n\n- 由任意语种字母、数字、空格和字符组成,字符仅支持_ . : = + - @\n\n- 首尾字符不能为空格。","type":"string"},"value":{"description":"标签值。\n\n\n\n\n\n- 长度为0~255个字符(中文也可以输入128个字符)。\n\n\n\n- 由任意语种字母、数字、空格和字符组成,字符仅支持_ . : = + - @\n\n- 首尾字符不能为空格。","type":"string"}},"type":"object"}},"description":null,"group_id":"8a85d11de826424da4cfa5ef6ad2ef39","host":"dms.cn-north-4.myhuaweicloud.com","id":"7dabf47b1260494d9386b0aef3e343e8","info_version":"v2","method":"post","name":"CreateInstanceByEngine","parameters":{},"paths":{"/v2/{engine}/{project_id}/instances":{"post":{"description":"创建实例。\n\n该接口支持创建按需和包周期两种计费方式的实例。","operationId":"CreateInstanceByEngine","parameters":[{"default":"kafka","description":"消息引擎。","enum":["kafka"],"in":"path","name":"engine","required":true,"type":"string","x-order":1},{"description":"项目ID,获取方式请参见[获取项目ID](kafka-api-0036212547.xml)。","in":"path","name":"project_id","required":true,"type":"string","x-example":"2b31ed520xxxxxxebedb6e57xxxxxxxx","x-order":2},{"description":"请求消息。","in":"body","name":"CreateInstanceByEngineRequestBody","required":true,"schema":{"$ref":"#/definitions/CreateInstanceByEngineReq"},"x-order":3}],"responses":{"200":{"description":"创建实例成功。","examples":{"application/json":{"instance_id":"8959ab1c-7n1a-yyb1-a05t-93dfc361b32d"}},"schema":{"$ref":"#/definitions/CreateInstanceByEngineResp"}}},"schemes":["https"],"security":[{"apig-auth-iam":[]}],"summary":"创建实例","tags":["生命周期管理"],"x-api-type":"open-api","x-apigateway-backend":{"httpEndpoints":{"address":"#dms_endpoint#","description":"","method":"POST","path":"/v2/{engine}/{project_id}/instances","scheme":"https","timeout":60000},"parameters":[{"description":"","in":"path","name":"engine","origin":"REQUEST","value":"engine"},{"description":"","in":"path","name":"project_id","origin":"REQUEST","value":"project_id"}],"type":"HTTP"},"x-apigateway-cors":false,"x-apigateway-match-mode":"NORMAL","x-apigateway-ratelimit":"dms01","x-apigateway-request-type":"public","x-hybridcloud":true,"x-is-registered":"Y","x-name":"创建实例","x-open-region-cloud":"hws,hws_hk,g42,tm,hk_g42,ctc,hk_tm,ocb,hws_ocb,hws_eu","x-order":1,"x-produc-type":"kafka","x-request-examples-1":{"access_user":"********","arch_type":"X86","available_zones":["********706d4c1fb0eb72f0********"],"broker_num":3,"description":"","disk_encrypted_enable":true,"disk_encrypted_key":"********-b953-4875-a743-************","enable_auto_topic":true,"enable_publicip":true,"engine":"kafka","engine_version":"2.7","enterprise_project_id":"0","kafka_manager_password":"********","kafka_manager_user":"********","kafka_security_protocol":"SASL_SSL","name":"kafka-test","password":"********","product_id":"c6.2u4g.cluster","publicip_id":"********-88fc-4a8c-86d0-************,********-16af-455d-8d54-************,********-3d69-4367-95ab-************","retention_policy":"time_base","sasl_enabled_mechanisms":["SCRAM-SHA-512"],"security_group_id":"********-e073-4aad-991f-************","ssl_enable":true,"storage_space":300,"storage_spec_code":"dms.physical.storage.ultra.v2","subnet_id":"********-8fbf-4438-ba71-************","tags":[{"key":"aaa","value":"111"}],"vpc_client_plain":true,"vpc_id":"********-9b4a-44c5-a964-************"},"x-request-examples-2":{"access_user":"********","arch_type":"X86","available_zones":["********706d4c1fb0eb72f0********"],"broker_num":3,"bss_param":{"charging_mode":"prePaid","is_auto_pay":true,"period_num":1,"period_type":"month"},"description":"","enable_auto_topic":true,"enable_publicip":true,"engine":"kafka","engine_version":"2.7","enterprise_project_id":"0","kafka_manager_password":"********","kafka_manager_user":"********","kafka_security_protocol":"SASL_SSL","name":"kafka-test1","password":"********","product_id":"c6.2u4g.cluster","publicip_id":"********-88fc-4a8c-86d0-************,********-16af-455d-8d54-************,********-3d69-4367-95ab-************","retention_policy":"time_base","sasl_enabled_mechanisms":["SCRAM-SHA-512"],"security_group_id":"********-e073-4aad-991f-************","ssl_enable":true,"storage_space":300,"storage_spec_code":"dms.physical.storage.ultra.v2","subnet_id":"********-8fbf-4438-ba71-************","tags":[{"key":"aaa","value":"111"}],"vpc_client_plain":true,"vpc_id":"********-9b4a-44c5-a964-************"},"x-request-examples-description-1":"创建一个按需付费的Kafka实例,版本为2.7,规格为2U4G*3,300GB的存储空间。","x-request-examples-description-2":"创建一个包年包月的Kafka实例,版本为2.7,规格为2U4G*3,300GB的存储空间。","x-request-examples-url-1":"POST https://{endpoint}/v2/{engine}/{project_id}/instances","x-request-examples-url-2":"POST https://{endpoint}/v2/{engine}/{project_id}/instances","x-support-sdk":"Y"}}},"product_short":"Kafka","region_id":"cn-north-4","schemes":["HTTPS"],"security_definitions":{"IAM_AUTH_TYPE_NEW":{"in":"header","name":"unused","type":"apiKey","x-apigateway-auth-type":"IAM"},"apig-auth-app":{"in":"header","name":"Authorization","type":"apiKey","x-apigateway-auth-type":"AppSigv1"},"apig-auth-app-optional":{"in":"header","name":"Authorization","type":"apiKey","x-apigateway-auth-opt":{"access-auth-type":"optional"},"x-apigateway-auth-type":"AppSigv1"},"apig-auth-iam":{"in":"header","name":"unused","type":"apiKey","x-apigateway-auth-type":"IAM"},"apig-auth-iam-none":{"in":"header","name":"unused","type":"apiKey","x-apigateway-auth-type":"IAM_NONE"}},"summary":"创建实例","tags":"生命周期管理","uri":null,"version":"2.0"}