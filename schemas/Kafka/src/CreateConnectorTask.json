{"base_path":"/","components":null,"consumes":"[\"application/json\"]","definitions":{"CreateSmartConnectTaskReq":{"properties":{"sink_task":{"$ref":"#/definitions/SmartConnectTaskReqSinkConfig","description":"SmartConnect任务的目标端配置。","type":"object","x-no-support-region":"fcs"},"sink_type":{"description":"SmartConnect任务的目标端类型。","enum":["OBS_SINK","NONE"],"type":"string","x-no-support-region":"fcs"},"source_task":{"$ref":"#/definitions/SmartConnectTaskReqSourceConfig","description":"SmartConnect任务的源端配置。","type":"object"},"source_type":{"description":"SmartConnect任务的源端类型。","enum":["KAFKA_REPLICATOR_SOURCE","NONE"],"type":"string"},"start_later":{"description":"是否稍后再启动任务。如需要创建任务后立即启动,请填false;如希望稍后在任务列表中手动开启任务,请填true。","type":"boolean","x-no-support-region":"fcs"},"task_name":{"description":"SmartConnect任务名称。","type":"string"},"topics":{"description":"SmartConnect任务配置的Topic。","type":"string","x-no-support-region":"fcs"},"topics_regex":{"description":"SmartConnect任务配置的Topic正则表达式。","type":"string"}},"type":"object"},"SmartConnectTaskEntity":{"properties":{"create_time":{"description":"**参数解释**:\nSmart Connect任务的创建时间。\n**取值范围**:\n不涉及。","format":"int64","type":"integer"},"id":{"description":"**参数解释**:\nSmart Connect任务的id。\n**取值范围**:\n不涉及。","type":"string"},"sink_task":{"$ref":"#/definitions/SmartConnectTaskRespSinkConfig","description":"**参数解释**:\nSmart Connect任务的目标端配置。","type":"object","x-no-support-region":"fcs"},"sink_type":{"description":"**参数解释**:\nSmart Connect任务的目标端类型。\n**取值范围**:\n- NONE:不配置。\n- OBS_SINK:转储。","type":"string","x-no-support-region":"fcs"},"source_task":{"$ref":"#/definitions/SmartConnectTaskRespSourceConfig","description":"**参数解释**:\nSmart Connect任务的源端配置。","type":"object"},"source_type":{"description":"**参数解释**:\nSmart Connect任务的源端类型。\n**取值范围**:\n- NONE:不配置。\n- KAFKA_REPLICATOR_SOURCE:Kafka数据复制。","type":"string"},"status":{"description":"**参数解释**:\nSmart Connect任务的状态。\n**取值范围**:\n不涉及。","type":"string"},"task_name":{"description":"**参数解释**:\nSmart Connect任务名称。\n**取值范围**:\n不涉及。","type":"string"},"topics":{"description":"**参数解释**:\nSmart Connect任务配置的Topic。\n**取值范围**:\n不涉及。","type":"string"},"topics_regex":{"description":"**参数解释**:\nSmart Connect任务配置的Topic正则表达式。\n**取值范围**:\n不涉及。","type":"string"}},"type":"object"},"SmartConnectTaskReqSinkConfig":{"properties":{"access_key":{"description":"AK,访问密钥ID。(仅目标端类型为OBS时需要填写)","type":"string","x-no-support-region":"fcs"},"consumer_strategy":{"description":"转储启动偏移量,latest为获取最新的数据,earliest为获取最早的数据。(仅目标端类型为OBS时需要填写)","type":"string","x-no-support-region":"fcs"},"deliver_time_interval":{"description":"数据转储周期(秒),默认配置为300秒。(仅目标端类型为OBS时需要填写)","type":"integer","x-no-support-region":"fcs"},"destination_file_type":{"description":"转储文件格式。当前只支持TEXT。(仅目标端类型为OBS时需要填写)","type":"string","x-no-support-region":"fcs"},"obs_bucket_name":{"description":"转储地址,即存储Topic数据的OBS桶的名称。(仅目标端类型为OBS时需要填写)","type":"string","x-no-support-region":"fcs"},"obs_path":{"description":"转储目录,即OBS中存储Topic的目录,多级目录可以用“/”进行分隔。(仅目标端类型为OBS时需要填写)","type":"string","x-no-support-region":"fcs"},"partition_format":{"description":"时间目录格式。(仅目标端类型为OBS时需要填写)\n  - yyyy:年\n  - yyyy/MM:年/月\n  - yyyy/MM/dd:年/月/日\n  - yyyy/MM/dd/HH:年/月/日/时\n  - yyyy/MM/dd/HH/mm:年/月/日/时/分","type":"string","x-no-support-region":"fcs"},"record_delimiter":{"description":"记录分行符,用于分隔写入转储文件的用户数据。(仅目标端类型为OBS时需要填写) \n\n取值范围:\n  - 逗号“,”\n  - 分号“;”\n  - 竖线“|”\n  - 换行符“\\n”\n  - NULL","type":"string","x-no-support-region":"fcs"},"secret_key":{"description":"SK,与访问密钥ID结合使用的密钥。(仅目标端类型为OBS时需要填写)","type":"string","x-no-support-region":"fcs"},"store_keys":{"description":"是否转储Key,开启表示转储Key,关闭表示不转储Key。(仅目标端类型为OBS时需要填写)","type":"boolean","x-no-support-region":"fcs"}},"type":"object"},"SmartConnectTaskReqSourceConfig":{"properties":{"bootstrap_servers":{"description":"对端Kafka实例地址。(仅源端类型为Kafka时需要填写,instance_id和bootstrap_servers仅需要填写其中一个)","type":"string"},"cluster_name":{"description":"对端Kafka实例别名。(仅源端类型为Kafka时需要填写)","type":"string"},"compression_type":{"description":"复制消息所使用的压缩算法。(仅源端类型为Kafka时需要填写)\n- none\n- gzip\n- snappy\n- lz4\n- zstd","type":"string"},"consumer_strategy":{"description":"启动偏移量,latest为获取最新的数据,earliest为获取最早的数据。(仅源端类型为Kafka时需要填写)","type":"string"},"current_cluster_name":{"description":"当前Kafka实例别名。(仅源端类型为Kafka时需要填写)","type":"string"},"direction":{"description":"同步方向;pull为把对端Kafka实例数据复制到当前Kafka实例中,push为把当前Kafka实例数据复制到对端Kafka实例中,two-way为对两端Kafka实例数据进行双向复制。(仅源端类型为Kafka时需要填写)","type":"string"},"instance_id":{"description":"对端Kafka实例ID。(仅源端类型为Kafka时需要填写,instance_id和bootstrap_servers仅需要填写其中一个)","type":"string"},"password":{"description":"对端Kafka开启SASL_SSL时设置的密码,或者创建SASL_SSL用户时设置的密码。(仅源端类型为Kafka且对端Kafka认证方式为“SASL_SSL”时需要填写)","type":"string"},"provenance_header_enabled":{"description":"目标Topic接收复制的消息,此消息header中包含消息来源。两端实例数据双向复制时,请开启“添加来源header”,防止循环复制。(仅源端类型为Kafka时需要填写)","type":"boolean"},"rename_topic_enabled":{"description":"是否重命名Topic,在目标Topic名称前添加源端Kafka实例的别名,形成目标Topic新的名称。(仅源端类型为Kafka时需要填写)","type":"boolean"},"replication_factor":{"description":"在对端实例中自动创建Topic时,指定Topic的副本数,此参数值不能超过对端实例的代理数。如果对端实例中设置了“default.replication.factor”,此参数的优先级高于“default.replication.factor”。(仅源端类型为Kafka时需要填写)","format":"int32","type":"integer"},"sasl_mechanism":{"description":"对端Kafka认证机制。(仅源端类型为Kafka且“认证方式”为“SASL_SSL”时需要填写)","type":"string"},"security_protocol":{"description":"对端Kafka认证方式。(仅源端类型为Kafka需要填写)\n支持以下两种认证方式:\n  - SASL_SSL:表示实例已开启SASL_SSL。\n  - PLAINTEXT:表示实例未开启SASL_SSL。","type":"string"},"sync_consumer_offsets_enabled":{"description":"是否同步消费进度。(仅源端类型为Kafka时需要填写)","type":"boolean"},"task_num":{"description":"数据复制的任务数。默认值为2,建议保持默认值。如果“同步方式”为“双向”,实际任务数=设置的任务数*2。(仅源端类型为Kafka时需要填写)","format":"int32","type":"integer"},"topics_mapping":{"description":"Topic映射,用于自定义目标端Topic名称。不能同时设置“重命名Topic”和“Topic映射”。Topic映射请按照“源端Topic:目的端Topic”的格式填写,如涉及多个Topic映射,请用“,”分隔开,例如:topic-sc-1:topic-sc-2,topic-sc-3:topic-sc-4。(仅源端类型为Kafka时需要填写)","type":"string"},"user_name":{"description":"对端Kafka开启SASL_SSL时设置的用户名,或者创建SASL_SSL用户时设置的用户名。(仅源端类型为Kafka且对端Kafka认证方式为“SASL_SSL”时需要填写)","type":"string"}},"type":"object"},"SmartConnectTaskRespSinkConfig":{"properties":{"consumer_strategy":{"description":"**参数解释**:\n转储启动偏移量。(仅目标端类型为OBS时会显示)\n**取值范围**:\n- latest:获取最新的数据。\n- earliest:获取最早的数据。","type":"string"},"deliver_time_interval":{"description":"**参数解释**:\n数据转储周期(秒)。(仅目标端类型为OBS时会显示)\n**取值范围**:\n不涉及。","type":"integer"},"destination_file_type":{"description":"**参数解释**:\n转储文件格式。当前只支持TEXT。(仅目标端类型为OBS时会显示)\n**取值范围**:\n不涉及。","type":"string"},"flush_size":{"description":"**参数解释**:\n刷写数量。(仅目标端类型为OBS时会显示)\n**取值范围**:\n不涉及。","type":"integer"},"key_converter":{"description":"**参数解释**:\n键转换器,默认为\"org.apache.kafka.connect.converters.ByteArrayConverter\"。(仅目标端类型为OBS时会显示)\n**取值范围**:\n不涉及。","type":"string"},"kv_delimiter":{"description":"**参数解释**:\n键值分隔符,默认为\":\"。(仅目标端类型为OBS时会显示)\n**取值范围**:\n不涉及。","type":"string"},"obs_bucket_name":{"description":"**参数解释**:\n转储地址。(仅目标端类型为OBS时会显示)\n**取值范围**:\n不涉及。","type":"string"},"obs_part_size":{"description":"**参数解释**:\n每个传输文件多大后就开始上传,单位为byte;默认值5242880。(仅目标端类型为OBS时会显示)\n**取值范围**:\n不涉及。","type":"integer"},"obs_path":{"description":"**参数解释**:\n转储目录。(仅目标端类型为OBS时会显示)\n**取值范围**:\n不涉及。","type":"string"},"partition_format":{"description":"**参数解释**:\n时间目录格式。(仅目标端类型为OBS时会显示)\n**取值范围**:\n不涉及。","type":"string"},"partitioner_class":{"description":"**参数解释**:\npartitioner类,默认\"io.confluent.connect.storage.partitioner.TimeBasedPartitioner\"。(仅目标端类型为OBS时会显示)\n**取值范围**:\n不涉及。","type":"string"},"record_delimiter":{"description":"**参数解释**:\n记录分行符。(仅目标端类型为OBS时会显示)\n**取值范围**:\n不涉及。","type":"string"},"schema_generator_class":{"description":"**参数解释**:\nschema_generator类,默认为\"io.confluent.connect.storage.hive.schema.DefaultSchemaGenerator\"。(仅目标端类型为OBS时会显示)\n**取值范围**:\n不涉及。","type":"string"},"store_keys":{"description":"**参数解释**:\n存储Key。(仅目标端类型为OBS时会显示)\n**取值范围**:\n不涉及。","type":"boolean"},"timezone":{"description":"**参数解释**:\n时区。(仅目标端类型为OBS时会显示)\n**取值范围**:\n不涉及。","type":"string"},"value_converter":{"description":"**参数解释**:\n值转换器,默认为\"org.apache.kafka.connect.converters.ByteArrayConverter\"。(仅目标端类型为OBS时会显示)\n**取值范围**:\n不涉及。","type":"string"}},"type":"object"},"SmartConnectTaskRespSourceConfig":{"properties":{"bootstrap_servers":{"description":"**参数解释**:\n对端Kafka实例地址。(仅源端类型为Kafka时会显示)\n**取值范围**:\n不涉及。","type":"string"},"cluster_name":{"description":"**参数解释**:\n对端Kafka实例别名。(仅源端类型为Kafka时会显示)\n**取值范围**:\n不涉及。","type":"string"},"compression_type":{"description":"**参数解释**:\n压缩算法。(仅源端类型为Kafka时会显示)\n**取值范围**:\n- none\n- gzip\n- snappy\n- lz4\n- zstd","type":"string"},"consumer_strategy":{"description":"**参数解释**:\n启动偏移量。(仅源端类型为Kafka时会显示)\n**取值范围**:\n- latest:获取最新的数据。\n- earliest:获取最早的数据。","type":"string"},"current_cluster_name":{"description":"**参数解释**:\n当前Kafka实例别名。(仅源端类型为Kafka时会显示)\n**取值范围**:\n不涉及。","type":"string"},"direction":{"description":"**参数解释**:\n同步方向。(仅源端类型为Kafka时会显示)\n**取值范围**:\n- pull:拉取。\n- push:推送。\n- two-way:双向。","type":"string"},"instance_id":{"description":"**参数解释**:\n对端Kafka实例ID。(仅源端类型为Kafka时会显示)\n**取值范围**:\n不涉及。","type":"string"},"provenance_header_enabled":{"description":"**参数解释**:\n是否添加来源header。(仅源端类型为Kafka时会显示)\n**取值范围**:\n- true:添加来源header。\n- false:不添加来源header。","type":"boolean"},"rename_topic_enabled":{"description":"**参数解释**:\n是否重命名Topic。(仅源端类型为Kafka时会显示)\n**取值范围**:\n- true:重命名Topic。\n- false:不进行重命名Topic。","type":"boolean"},"replication_factor":{"description":"**参数解释**:\n副本数。(仅源端类型为Kafka时会显示)\n**取值范围**:\n不涉及。","format":"int32","type":"integer"},"sasl_mechanism":{"description":"**参数解释**:\n对端Kafka认证机制。(仅源端类型为Kafka时会显示)\n**取值范围**:\n- PLAIN\n- SCRAM-SHA-512","type":"string"},"security_protocol":{"description":"**参数解释**:\n对端Kafka认证方式。(仅源端类型为Kafka时会显示)\n**取值范围**:\n- PLAINTEXT:不开启SSL,明文传输。\n- SASL_SSL:采用SASL方式进行认证,数据通过SSL证书进行加密传输,安全性更高。\n- SASL_PLAINTEXT:采用SASL方式进行认证,数据通过明文传输,性能更好。","type":"string"},"sync_consumer_offsets_enabled":{"description":"**参数解释**:\n是否同步消费进度。(仅源端类型为Kafka时会显示)\n**取值范围**:\n- true:同步消费进度\n- false:不同步消费进度","type":"boolean"},"task_num":{"description":"**参数解释**:\n任务数。(仅源端类型为Kafka时会显示)\n**取值范围**:\n不涉及。","format":"int32","type":"integer"},"topics_mapping":{"description":"**参数解释**:\nTopic映射。(仅源端类型为Kafka时会显示)\n**取值范围**:\n不涉及。","type":"string"},"user_name":{"description":"**参数解释**:\n对端Kafka用户名。(仅源端类型为Kafka时会显示)\n**取值范围**:\n不涉及。","type":"string"}},"type":"object"}},"description":null,"group_id":"8a85d11de826424da4cfa5ef6ad2ef39","host":"dms.cn-north-4.myhuaweicloud.com","id":"ed22072351bd4e99b72d0b05572b7d91","info_version":"v2","method":"post","name":"CreateConnectorTask","parameters":{},"paths":{"/v2/{project_id}/instances/{instance_id}/connector/tasks":{"post":{"description":"创建Smart Connect任务。","operationId":"CreateConnectorTask","parameters":[{"description":"项目ID,获取方式请参见[获取项目ID](kafka-api-0036212547.xml)。","in":"path","name":"project_id","required":true,"type":"string","x-example":"2b31ed520xxxxxxebedb6e57xxxxxxxx","x-order":1},{"description":"实例ID。","in":"path","name":"instance_id","required":true,"type":"string","x-order":2},{"description":"请求消息。","in":"body","name":"CreateSmartConnectTaskRequestBody","required":true,"schema":{"$ref":"#/definitions/CreateSmartConnectTaskReq"},"x-order":3}],"responses":{"200":{"description":"创建Smart Connect任务成功。","examples":{"application/json":{"create_time":1708427753133,"id":"194917d0-****-****-****-********","sink_task":null,"sink_type":"NONE","source_task":{"bootstrap_servers":"192.168.45.58:9092,192.168.44.1:9092,192.168.41.230:9092,192.168.43.112:9092","cluster_name":"B","compression_type":"none","consumer_strategy":"earliest","current_cluster_name":"A","direction":"pull","instance_id":"59f6d088-****-****-****-********","provenance_header_enabled":false,"rename_topic_enabled":false,"replication_factor":3,"sasl_mechanism":"PLAIN","security_protocol":"PLAINTEXT","sync_consumer_offsets_enabled":false,"task_num":2,"topics_mapping":"","user_name":""},"source_type":"KAFKA_REPLICATOR_SOURCE","status":"RUNNING","task_name":"smart-connect-121248117","topics":"topic-1643449744"}},"schema":{"$ref":"#/definitions/SmartConnectTaskEntity"}}},"summary":"创建Smart Connect任务","tags":["Smart Connect"],"x-api-type":"open-api","x-hybridcloud":true,"x-is-registered":"Y","x-name":"创建Smart Connect任务","x-open-region-cloud":"hws,hws_hk,g42,hk_g42,ctc,fcs,dt,hws_eu","x-produc-type":"kafka","x-request-examples-1":{"sink_task":{"access_key":"********","consumer_strategy":"earliest","deliver_time_interval":300,"destination_file_type":"TEXT","obs_bucket_name":"obs_bucket","obs_path":"obsTransfer-1810125534","partition_format":"yyyy/MM/dd/HH/mm","record_delimiter":"\\n","secret_key":"********","store_keys":false},"sink_type":"OBS_SINK","source_type":"NONE","start_later":false,"task_name":"smart-connect-1","topics_regex":"topic-obs*"},"x-request-examples-2":{"source_task":{"cluster_name":"B","compression_type":"snappy","consumer_strategy":"latest","current_cluster_name":"A","direction":"two-way","instance_id":"b54c9dd8-********-********","password":"********","provenance_header_enabled":true,"rename_topic_enabled":false,"replication_factor":3,"sasl_mechanism":"SCRAM-SHA-512","sync_consumer_offsets_enabled":false,"task_num":2,"topics_mapping":"topic-sc-1:topic-sc-3,topic-sc-2:topic-sc-4","user_name":"user1"},"source_type":"KAFKA_REPLICATOR_SOURCE","start_later":true,"task_name":"smart-connect-2"},"x-request-examples-description-1":"创建一个立即启动的转储任务。","x-request-examples-description-2":"创建一个稍后启动的Kafka数据复制任务。","x-request-examples-url-1":"POST https://{endpoint}/v2/{project_id}/instances/{instance_id}/connector/tasks","x-request-examples-url-2":"POST https://{endpoint}/v2/{project_id}/instances/{instance_id}/connector/tasks","x-support-sdk":"Y"}}},"product_short":"Kafka","region_id":"cn-north-4","schemes":["HTTPS"],"security_definitions":{"IAM_AUTH_TYPE_NEW":{"in":"header","name":"unused","type":"apiKey","x-apigateway-auth-type":"IAM"},"apig-auth-app":{"in":"header","name":"Authorization","type":"apiKey","x-apigateway-auth-type":"AppSigv1"},"apig-auth-app-optional":{"in":"header","name":"Authorization","type":"apiKey","x-apigateway-auth-opt":{"access-auth-type":"optional"},"x-apigateway-auth-type":"AppSigv1"},"apig-auth-iam":{"in":"header","name":"unused","type":"apiKey","x-apigateway-auth-type":"IAM"},"apig-auth-iam-none":{"in":"header","name":"unused","type":"apiKey","x-apigateway-auth-type":"IAM_NONE"}},"summary":"创建Smart Connect任务","tags":"Smart Connect","uri":null,"version":"2.0"}