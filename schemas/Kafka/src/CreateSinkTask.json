{"base_path":"/","components":null,"consumes":"[\"application/json\"]","definitions":{"CreateSinkTaskReq":{"example":{"destination_type":"OBS","obs_destination_descriptor":{"access_key":"XXXXXXXXXXXXXXXXXXXX","consumer_strategy":"earliest","deliver_time_interval":300,"destination_file_type":"TEXT","obs_bucket_name":"6666","obs_path":"obsTransfer-1122976956","partition_format":"yyyy/MM/dd/HH/mm","record_delimiter":"\n","secret_key":"XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX","topics":"topic-test"},"source_type":"BLOB","task_name":"obsTransfer-1122976956"},"properties":{"destination_type":{"description":"转存的目标类型,当前只支持OBS。","enum":["OBS"],"type":"string"},"obs_destination_descriptor":{"$ref":"#/definitions/ObsDestinationDescriptor"},"source_type":{"description":"源数据类型,目前只支持BLOB。","enum":["BLOB"],"type":"string"},"task_name":{"description":"转储任务名称。","type":"string"}},"required":["source_type","task_name","destination_type","obs_destination_descriptor","deliver_time_interval"],"type":"object"},"CreateSinkTaskResp":{"properties":{"task_id":{"description":"任务ID。","type":"string"}},"type":"object"},"ObsDestinationDescriptor":{"description":"转存目标的描述。","properties":{"access_key":{"description":"访问密钥AK。","type":"string"},"consumer_strategy":{"description":"转储启动偏移量:\n\n  - latest: 从Topic最后端开始消费。\n  \n  - earliest: 从Topic最前端消息开始消费。\n\n默认是latest。","enum":["latest","earliest"],"type":"string"},"deliver_time_interval":{"description":"根据用户配置的时间,周期性的将数据导入OBS,若某个时间段内无数据,则此时间段不会生成打包文件。\n\n取值范围:30~900\n\n单位:秒。\n\n> 使用OBS通道转储流式数据时该参数为必选配置。","type":"integer"},"destination_file_type":{"description":"转储文件格式。当前只支持text。","enum":["TEXT"],"type":"string"},"obs_bucket_name":{"description":"存储该通道数据的OBS桶名称。","type":"string"},"obs_path":{"description":"存储在obs的路径,默认可以不填。\n\n取值范围:英文字母、数字、下划线、中划线和斜杠,最大长度为64个字符。\n\n默认配置为空。","type":"string"},"partition_format":{"description":"将转储文件的生成时间使用“yyyy/MM/dd/HH/mm”格式生成分区字符串,用来定义写到OBS的Object文件所在的目录层次结构。\n  \n  - yyyy:年\n  \n  - yyyy/MM:年/月\n  \n  - yyyy/MM/dd:年/月/日\n  \n  - yyyy/MM/dd/HH:年/月/日/时\n  \n  - yyyy/MM/dd/HH/mm:年/月/日/时/分,例如:2017/11/10/14/49,目录结构就是“2017 > 11 > 10 > 14 > 49”,“2017”表示最外层文件夹。\n\n> 数据转储成功后,存储的目录结构为“obs_bucket_path/file_prefix/partition_format”。默认时间是GMT+8 时间","enum":["yyyy","yyyy/MM","yyyy/MM/dd","yyyy/MM/dd/HH","yyyy/MM/dd/HH/mm"],"type":"string"},"record_delimiter":{"description":"转储文件的记录分隔符,用于分隔写入转储文件的用户数据。\n\n取值范围:\n  - 逗号“,”\n  - 分号“;”\n  - 竖线“|”\n  - 换行符“\\n”\n  - NULL\n\n默认值:换行符“\\n”。","type":"string"},"secret_key":{"description":"访问密钥SK。","type":"string"},"topics":{"description":"转存的topic列表名称,支持输入多个topic,以逗号“,”分隔。同时支持正则表达式。","type":"string"},"topics_regex":{"description":"转存topic的正则表达式,与topics必须二选一,不能同时都设置或者“.*”。","type":"string"}},"required":["consumer_strategy","destination_file_type","access_key","secret_key","obs_bucket_name","deliver_time_interval","topics","partition_format"],"type":"object"}},"description":null,"group_id":"8a85d11de826424da4cfa5ef6ad2ef39","host":"dms.cn-north-4.myhuaweicloud.com","id":"2f98841db8e94aecb41307213ba33c6a","info_version":"v2","method":"post","name":"CreateSinkTask","parameters":{},"paths":{"/v2/{project_id}/connectors/{connector_id}/sink-tasks":{"post":{"description":"创建转储任务。","operationId":"CreateSinkTask","parameters":[{"description":"项目ID,获取方式请参见[获取项目ID](kafka-api-0036212547.xml)。","in":"path","name":"project_id","required":true,"type":"string","x-example":"2b31ed520xxxxxxebedb6e57xxxxxxxx","x-order":1},{"description":"实例转储ID。\n\n请参考[查询实例](ShowInstance.xml)返回的数据。","in":"path","name":"connector_id","required":true,"type":"string","x-order":2},{"description":"请求消息。","in":"body","name":"CreateSinkTaskRequestBody","required":true,"schema":{"$ref":"#/definitions/CreateSinkTaskReq"},"x-order":3}],"responses":{"200":{"description":"创建转储任务成功。","examples":{"application/json":{"task_id":"2962882a-386c-4c9d-bb59-3b4f55d82961"}},"schema":{"$ref":"#/definitions/CreateSinkTaskResp"}}},"schemes":["https"],"security":[{"apig-auth-iam":[]}],"summary":"创建转储任务","tags":["转储管理"],"x-api-type":"open-api","x-apigateway-backend":{"httpEndpoints":{"address":"#dms_endpoint#","description":"","method":"POST","path":"/v2/{project_id}/connectors/{connector_id}/sink-tasks","scheme":"https","timeout":60000},"parameters":[{"description":"","in":"path","name":"project_id","origin":"REQUEST","value":"project_id"},{"description":"","in":"path","name":"connector_id","origin":"REQUEST","value":"connector_id"}],"type":"HTTP"},"x-apigateway-cors":false,"x-apigateway-match-mode":"NORMAL","x-apigateway-ratelimit":"dms01","x-apigateway-request-type":"public","x-hybridcloud":true,"x-is-registered":"Y","x-name":"创建转储任务","x-open-region-cloud":"hws,hws_hk,g42,hk_g42,ctc","x-produc-type":"kafka","x-request-examples-1":{"destination_type":"OBS","obs_destination_descriptor":{"access_key":"XXXXXXXXXXXXXXXXXXXX","consumer_strategy":"earliest","deliver_time_interval":300,"destination_file_type":"TEXT","obs_bucket_name":"6666","obs_path":"obsTransfer-1122976956","partition_format":"yyyy/MM/dd/HH/mm","record_delimiter":"\n","secret_key":"XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX","topics":"topic-test"},"source_type":"BLOB","task_name":"obsTransfer-1122976956"},"x-request-examples-description-1":"创建一个转储任务,转储topic-test中的数据到OBS。","x-request-examples-text-1":{"destination_type":"OBS","obs_destination_descriptor":{"access_key":"XXXXXXXXXXXXXXXXXXXX","consumer_strategy":"earliest","deliver_time_interval":300,"destination_file_type":"TEXT","obs_bucket_name":"6666","obs_path":"obsTransfer-1122976956","partition_format":"yyyy/MM/dd/HH/mm","record_delimiter":"\n","secret_key":"XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX","topics":"topic-test"},"source_type":"BLOB","task_name":"obsTransfer-1122976956"},"x-request-examples-url-1":"POST https://{endpoint}/v2/{project_id}/connectors/{connector_id}/sink-tasks","x-support-sdk":"Y"}}},"product_short":"Kafka","region_id":"cn-north-4","schemes":["HTTPS"],"security_definitions":{"IAM_AUTH_TYPE_NEW":{"in":"header","name":"unused","type":"apiKey","x-apigateway-auth-type":"IAM"},"apig-auth-app":{"in":"header","name":"Authorization","type":"apiKey","x-apigateway-auth-type":"AppSigv1"},"apig-auth-app-optional":{"in":"header","name":"Authorization","type":"apiKey","x-apigateway-auth-opt":{"access-auth-type":"optional"},"x-apigateway-auth-type":"AppSigv1"},"apig-auth-iam":{"in":"header","name":"unused","type":"apiKey","x-apigateway-auth-type":"IAM"},"apig-auth-iam-none":{"in":"header","name":"unused","type":"apiKey","x-apigateway-auth-type":"IAM_NONE"}},"summary":"创建转储任务","tags":"转储管理","uri":null,"version":"2.0"}