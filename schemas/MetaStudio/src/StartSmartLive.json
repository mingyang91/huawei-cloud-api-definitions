{"base_path":null,"components":null,"consumes":"[\"application/json\",\"application/json;charset=utf-8\"]","definitions":{"CoStreamerConfig":{"description":"助播配置","properties":{"streamer_action":{"description":"助播出声时主播行为。\n* SILENCE:静默\n* VOLUME_DOWN:音量降低","enum":["SILENCE","VOLUME_DOWN"],"type":"string"},"voice_config":{"$ref":"#/definitions/VoiceConfig","description":"语音配置参数。"}}},"LiveEventCallBackConfig":{"description":"直播事件回调通知配置","properties":{"auth_type":{"default":"NONE","description":"认证类型。\n* NONE。URL中自带认证。\n* MSS_A。HMACSHA256签名模式,在URL中追加参数:hwSecret,hwTime。取值方式:hwSecret=hmac_sha256(Key, URI(live_event_callback_url)+ hwTime)&hwTime=hex(timestamp)\n* RTMP_STREAM_STATE_CHANGE。 RTMP链接发生变化回调事件\n* MEITUAN_DEFAULT。仅用于美团平台调用回调使用。","enum":["NONE","MSS_A","RTMP_STREAM_STATE_CHANGE","MEITUAN_DEFAULT"],"maxLength":32,"minLength":0,"type":"string"},"callback_event_type":{"description":"回调的直播事件类型列表。\n\n当前仅支持取值:\n  SHOOT_SCRIPT_SWITCH,剧本段落切换事件。 \n  RTMP_STREAM_STATE_CHANGE, RTMP链接发生变化回调事件。\n回调事件结构体定义:\n* event_type: 事件类型。\n* message: 事件描述。\nSHOOT_SCRIPT_SWITCH事件回调定义如下:\n```json\n{\n  \"event_type\":  \"SHOOT_SCRIPT_SWITCH\",\n  \"message\":\"{\\\"room_id\\\":\\\"26f065244f754b3aa853b649a21aaf66\\\",\\\"job_id\\\":\\\"e87104f76d7546ce8a46ac6b04c49c3c\\\",\\\"scene_script_name\\\":\\\"商品1\\\",\\\"shoot_script_sequence_no\\\":\\\"2\\\",\\\"shoot_script_title\\\":\\\"段落2\\\"}\"\n}\n```\nRTMP_STREAM_STATE_CHANGE回调定义如下:\n```json\n{\n  \"event_type\":  \"RTMP_STREAM_STATE_CHANGE\",\n  \"message\":\"{\\\"room_id\\\":\\\"26f065244f754b3aa853b649a21aaf66\\\",\\\"job_id\\\":\\\"e87104f76d7546ce8a46ac6b04c49c3c\\\",\\\"output_url\\\":\\\"rtmp://xxx/xx/xx\\\",\\\"stream_key\\\":\\\"xxxxx\\\",\\\"state\\\":\\\"CONNECTED\\\"}\"\n}\n```\n其中state取值: CONNECTING 链路连接中, CONNECTED 链路已连接,DISCONNECTED 链路已断开,RECONNECTING 链路重连中, END 联络不再重连,链路已结束","items":{"description":"回调的直播事件类型\n* SHOOT_SCRIPT_SWITCH,剧本段落切换事件\n* RTMP_STREAM_STATE_CHANGE, RTMP链接发生变化回调事件","maxLength":32,"minLength":1,"type":"string"},"maxItems":10,"minItems":1,"type":"array"},"key":{"description":"密钥Key","maxLength":32,"minLength":0,"type":"string"},"live_event_type_callback_url":{"description":"直播事件回调地址。https地址,需自带鉴权串。","maxLength":2048,"minLength":0,"type":"string"}},"type":"object"},"LiveWarningItem":{"description":"开播风险警告","properties":{"warning_type":{"description":"告警类型。\n- TOO_LESSS_SCRIPT_ITEMS:段落(话术)数量太少。\n- TOO_SHORT_SCRIPT_TIME:段落(话术)总时长太短。\n- TOO_LESS_DANMAKU_RULES: 弹幕互动规则太少。\n- RANDOM_PLAY_CLOSED: 随机播放开关关闭。\n- ROTATION_MODEL_CLOSED: 主播轮转未配置。","enum":["TOO_LESSS_SCRIPT_ITEMS","TOO_SHORT_SCRIPT_TIME","TOO_LESS_DANMAKU_RULES","RANDOM_PLAY_CLOSED","ROTATION_MODEL_CLOSED"],"maxLength":32,"minLength":0,"type":"string"}}},"PlayPolicy":{"description":"剧本播放策略","properties":{"auto_play_script":{"default":true,"description":"是否自动播放剧本。\ntrue: 服务完成任务初始化后,自动播放剧本\nfalse: 服务完成任务初始化后,等待信号后再开始播放剧本","type":"boolean"},"need_independent_capture_client":{"default":false,"description":"是否需要独立采集端","type":"boolean"},"play_mode":{"default":"TEXT","description":"驱动方式。默认TEXT\n* TEXT: 文本驱动,即通过TTS合成语音\n* AUDIO: 语音驱动\n* NO_PRESET: 无预置剧本。人工控制模式。","enum":["TEXT","AUDIO","NO_PRESET"],"maxLength":32,"minLength":0,"type":"string"},"random_play_mode":{"default":"SCRIPT_ITEM","description":"随机播报模式。\n* NONE: 不启动随机播报。\n* SCENE: 按场景随机播报。场景内段落按顺序播报。\n* SCRIPT_ITEM:按段落随机播报。场景按顺序播报。\n* SCENE_AND_SCRIPT_ITEM: 场景和段落都随机播报。","enum":["NONE","SCENE","SCRIPT_ITEM","SCENE_AND_SCRIPT_ITEM"],"maxLength":32,"minLength":0,"type":"string"},"repeat_count":{"default":0,"description":"剧本重复播放次数。\n-1表示持续重复,直至人工停止\n0 表示不重复,仅执行一次\n其他值n,实际运行次数为n+1次","format":"int32","maximum":100,"minimum":-1,"type":"integer"}}},"RTCRoomInfoList":{"description":"RTC房间信息。","properties":{"app_id":{"description":"RTC应用ID。","maxLength":32,"minLength":1,"type":"string"},"room_id":{"description":"RTC房间ID。","maxLength":36,"minLength":1,"type":"string"},"users":{"description":"加入RTC房间用户信息。","items":{"$ref":"#/definitions/RTCUserInfo"},"maxItems":4,"minItems":2,"type":"array"}},"type":"object"},"RTCUserInfo":{"description":"接入RTC的用户信息。","properties":{"ctime":{"description":"有效期。时间戳,单位:秒。","format":"int64","maximum":4294967295,"minimum":0,"type":"integer"},"signature":{"description":"RTC鉴权token。","maxLength":64,"minLength":1,"type":"string"},"user_id":{"description":"RTC用户ID。","maxLength":64,"minLength":1,"type":"string"},"user_type":{"description":"用户类型。\n* CAPTURE: 直播助手,将摄像头获取视频流推送到RTC房间\n* ANIMATION: VDS服务,从RTC房间拉视频流生成动作数据\n* RENDER: 渲染服务,将动作数据渲染成数字人动画\n* PLAYER: 普通观看方,可选择原始视频流或者数字人动画视频流观看\n* INFERENCE_USER: 数字人推理端用户。从RTC房间接收音频流,并推送视频流到RTC房间\n* END_USER: 端侧用户。从推送音频流到RTC房间,并从RTC房间接收视频流","enum":["CAPTURE","ANIMATION","RENDER","PLAYER","INFERENCE_USER","END_USER"],"type":"string"}},"type":"object"},"StartSmartLiveReq":{"description":"数字人直播任务请求。","properties":{"co_streamer_config":{"$ref":"#/definitions/CoStreamerConfig"},"interaction_callback_url":{"description":"互动回调URL,含鉴权信息。","maxLength":2048,"minLength":0,"type":"string"},"live_event_callback_config":{"$ref":"#/definitions/LiveEventCallBackConfig"},"output_urls":{"description":"RTMP视频推流第三方直播平台地址。","items":{"maxLength":1024,"minLength":0,"type":"string"},"maxItems":1,"minItems":0,"type":"array"},"play_policy":{"$ref":"#/definitions/PlayPolicy","description":"剧本播放策略"},"stream_keys":{"description":"RTMP视频推流第三方直播平台流秘钥,与推流地址对应。","items":{"maxLength":1024,"minLength":0,"type":"string"},"maxItems":1,"minItems":0,"type":"array"},"video_config":{"$ref":"#/definitions/VideoConfig","description":"视频输出配置。"},"view_mode":{"description":"横竖屏类型。默认值为:VERTICAL。\n* LANDSCAPE:横屏。\n* VERTICAL: 竖屏。","enum":["LANDSCAPE","VERTICAL"],"example":"LANDSCAPE","type":"string"}}},"StartSmartLiveRsp":{"description":"数字人直播任务响应。","properties":{"job_id":{"description":"直播任务ID。","maxLength":64,"minLength":1,"type":"string"},"live_event_callback_config":{"$ref":"#/definitions/LiveEventCallBackConfig"},"live_event_report_url":{"description":"直播事件上报地址。用户将自行获取的直播间事件上报到此地址,用于触发智能互动,自动回复话术。","maxLength":2048,"minLength":0,"type":"string"},"live_warning_info":{"description":"开播风险告警列表。","items":{"$ref":"#/definitions/LiveWarningItem"},"maxItems":100,"minItems":1,"type":"array"},"rtc_room_info":{"$ref":"#/definitions/RTCRoomInfoList"}},"required":["job_id"]},"SubtitleConfig":{"description":"字幕配置。","properties":{"dx":{"description":"字幕框左下角像素点坐标。\n\n> *横屏(16:9)视频像素为1920x1080;竖屏(9:16)视频像素为1080x1920。","example":256,"format":"int32","maximum":1920,"minimum":0,"type":"integer"},"dy":{"description":"字幕框左下角像素点坐标。\n\n> *横屏(16:9)视频像素为1920x1080;竖屏(9:16)视频像素为1080x1920。","format":"int32","maximum":1920,"minimum":0,"type":"integer"},"font_name":{"default":"HarmonyOS_Sans_SC_Black","description":"字体。当前支持的字体:\n* HarmonyOS_Sans_SC_Black:鸿蒙粗体\n* HarmonyOS_Sans_SC_Regular:鸿蒙常规\n* HarmonyOS_Sans_SC_Thin:鸿蒙细体","maxLength":64,"minLength":0,"type":"string"},"font_size":{"default":16,"description":"字体大小。\n\n取值范围:[4, 120]","format":"int32","maximum":120,"minimum":0,"type":"integer"},"h":{"description":"字幕框高度\n> * 参数h用于方便前端计算字幕框左上角坐标,后台不使用该参数","format":"int32","maximum":1920,"minimum":0,"type":"integer"},"w":{"description":"字幕框宽度\n> * 字幕框宽度固定为屏幕宽度的80%\n> * 参数w用于方便前端计算字幕框左上角坐标,后台不使用该参数","format":"int32","maximum":1920,"minimum":0,"type":"integer"}}},"VideoConfig":{"description":"视频输出配置。","properties":{"bitrate":{"description":"输出平均码率。\n\n单位:kbps。\n\n最小值40,最大值30000。\n> * 分身数字人视频制作采用质量优先,可能会超过设置的码率。\n> * 分身数字人直播码率范围[1000, 8000]。","maximum":30000,"minimum":40,"type":"integer"},"clip_mode":{"default":"RESIZE","description":"输出视频的剪辑方式。默认值RESIZE。\n* RESIZE:视频缩放。\n* CROP:视频裁剪。","enum":["RESIZE","CROP"],"type":"string"},"codec":{"description":"视频编码格式及视频文件格式。\n* H264: h264编码,输出mp4文件\n* VP8:vp8编码,输出webm文件","enum":["H264","VP8","VP9"],"type":"string"},"dx":{"description":"裁剪视频左上角像素点坐标。\n\nclip_mode= CROP时生效。\n> * 以模特分辨率为画布大小,比如1920*1080分辨率的模特,dx最小值是0,最大值是1920。","example":256,"format":"int32","maximum":3840,"minimum":-1920,"type":"integer"},"dy":{"description":"裁剪视频左上角像素点坐标。\n\nclip_mode= CROP时生效。\n> * 以模特分辨率为画布大小,比如1920*1080分辨率的模特,dy最小值是0,最大值是1080","format":"int32","maximum":3840,"minimum":-1920,"type":"integer"},"frame_rate":{"default":"25","description":"帧率。\n\n单位:FPS。\n> *  分身数字人视频固定25FPS。","enum":["24","25","30"],"format":"string","maxLength":10,"minLength":0,"type":"string"},"height":{"description":"视频高度。\n\n单位:像素。\n\n> * clip_mode=RESIZE时,当前支持1920x1080、1080x1920、1280x720、720x1280、3840x2160、2160x3840六种分辨率分辨率。\n> * clip_mode=CROP,裁剪后视频,(dx,dy)为原点,保留视频像高度为height。\n> * 分身数字人直播目前只支持1080x1920。","maximum":3840,"minimum":0,"type":"integer"},"is_subtitle_enable":{"default":false,"description":"输出的视频是否带字幕。默认false。\n> true: 打开字幕\n> false: 关闭字幕","enum":[true,false],"example":true,"type":"boolean"},"subtitle_config":{"$ref":"#/definitions/SubtitleConfig"},"width":{"description":"视频宽度。\n\n单位:像素。\n\n> * clip_mode=RESIZE时,当前支持1920x1080、1080x1920、1280x720、720x1280、3840x2160、2160x3840六种分辨率。4K分辨率视频需要分身数字人模型支持4K的情况下才能使用。\n> * clip_mode=CROP,裁剪后视频,(dx,dy)为原点,保留视频像宽度为width。\n> * 分身数字人直播目前只支持1080x1920。","maximum":3840,"minimum":0,"type":"integer"}},"required":["bitrate","codec","height","width"],"type":"object"},"VoiceConfig":{"description":"语音配置参数。","properties":{"pitch":{"default":100,"description":"音高。\n\n默认值100,最小值50,最大值200。","format":"int32","maximum":200,"minimum":50,"type":"integer"},"speed":{"default":100,"description":"语速。\n\n默认值100,最小值50,最大值200。\n> * 当取值为“100”时,表示一个成年人正常的语速,约为250字/分钟。\n> * 50表示0.5倍语速,100表示正常语速,200表示2倍语速。","format":"int32","maximum":200,"minimum":50,"type":"integer"},"voice_asset_id":{"description":"音色资产ID。","example":"39b9cedccec1f19b33d8f7ce1a6d35b9","maxLength":64,"minLength":1,"type":"string"},"volume":{"default":140,"description":"音量。\n\n默认值140,最小值90,最大值240。","format":"int32","maximum":240,"minimum":90,"type":"integer"}},"required":["voice_asset_id"]}},"description":null,"group_id":"7984cf04c82a4342865464b938d5dfc2","host":"metastudio.cn-north-4.myhuaweicloud.com","id":"263595cad70a4c88934b85496dbb3610","info_version":"v1","method":"post","name":"StartSmartLive","parameters":{"AuthorizationHeader":{"description":"使用AK/SK方式认证时必选,携带的鉴权信息。","in":"header","maxLength":256,"minLength":1,"name":"Authorization","required":false,"type":"string","x-annotations":["@Size(min = 1, max = 256)"],"x-example":"SDK-HMAC-SHA256 Access=xxx, SignedHeaders=content-type;host;x-sdk-date, Signature=xxx"},"Project-IdPath":{"description":"项目ID,获取方法请参考[获取项目ID](metastudio_02_0006.xml)。","in":"path","maxLength":64,"minLength":1,"name":"project_id","required":true,"type":"string","x-annotations":["@Size(min = 1, max = 64)"],"x-example":"70b76xxxxxx34253880af501cdxxxxxx"},"X-App-UserId":{"description":"第三方用户ID。不允许输入中文。","in":"header","maxLength":256,"minLength":1,"name":"X-App-UserId","required":false,"type":"string","x-annotations":["@Size(min = 1, max = 256)"],"x-example":"abcdefg1234567"},"X-Auth-TokenHeader":{"description":"用户Token。使用Token鉴权方式时必选。\n\n通过调用IAM服务获取用户Token接口获取。\n\n响应消息头中X-Subject-Token的值。","in":"header","maxLength":16384,"minLength":1,"name":"X-Auth-Token","required":false,"type":"string","x-annotations":["@Size(min = 1, max = 16384)"],"x-example":"MIIDkgYJKoZIhvcNAQcCoIIDgzCCXXXXX..."},"X-Project-IdHeader":{"description":"使用AK/SK方式认证时必选,携带项目ID信息。","in":"header","maxLength":64,"minLength":1,"name":"X-Project-Id","required":false,"type":"string","x-annotations":["@Size(min = 1, max = 64)"],"x-example":"70b76xxxxxx34253880af501cdxxxxxx"},"X-Sdk-DateHeader":{"description":"使用AK/SK方式认证时必选,请求的发生时间。\n\n格式为(YYYYMMDD'T'HHMMSS'Z')。","in":"header","maxLength":16,"minLength":16,"name":"X-Sdk-Date","required":false,"type":"string","x-annotations":["@Size(min = 16, max = 16)"],"x-example":"20191115T033655Z"}},"paths":{"/v1/{project_id}/smart-live-rooms/{room_id}/smart-live-jobs":{"post":{"consumes":["application/json"],"description":"该接口用于启动数字人智能直播任务。","operationId":"StartSmartLive","parameters":[{"$ref":"#/parameters/Project-IdPath"},{"description":"剧本ID。","in":"path","maxLength":64,"minLength":1,"name":"room_id","required":true,"type":"string","x-annotations":["@Size(min = 1, max = 64)"],"x-example":"70b76xxxxxx34253880af501cdxxxxxx"},{"$ref":"#/parameters/X-Auth-TokenHeader"},{"$ref":"#/parameters/AuthorizationHeader"},{"$ref":"#/parameters/X-Sdk-DateHeader"},{"$ref":"#/parameters/X-Project-IdHeader"},{"$ref":"#/parameters/X-App-UserId"},{"description":"数字人智能直播任务创建请求。","in":"body","name":"StartSmartLiveRequestBody","required":true,"schema":{"$ref":"#/definitions/StartSmartLiveReq"}}],"produces":["application/json"],"responses":{"202":{"description":"成功。","examples":{"application/json":{"job_id":"26f06524-4f75-4b3a-a853-b649a21aaf66"}},"headers":{"X-Request-Id":{"description":"请求ID。","type":"string"}},"schema":{"$ref":"#/definitions/StartSmartLiveRsp"}},"400":{"$ref":"#/responses/BadRequest"},"401":{"$ref":"#/responses/Unauthorized"},"500":{"$ref":"#/responses/InternalServiceError"}},"summary":"启动数字人智能直播任务","tags":["SmartLiveJobManager"],"x-api-type":"open-api","x-apiexplorer-hide":"N","x-apig-group":"public-iam,internal-appcode","x-classAnnotation":"@HttpStatusController","x-feature":"2dlive","x-imports":"com.huawei.springframework.advice.HttpStatusController;","x-interface-frequency":"LOW","x-interface-rist":"LOW","x-is-registered":"Y","x-navigation-title":"StartSmartLive","x-open-range":"public","x-request-examples-1":{"output_urls":["rtmp://vfxpush.hwcloudvr.cn/live/lysa"]},"x-request-examples-url-1":"POST https://{endpoint}/v1/70b76xxxxxx34253880af501cdxxxxxx/smart-live-rooms/24bad716-87b1-45e5-8912-6102f7693265/smart-live-jobs","x-support-sdk":"Y"}}},"product_short":"MetaStudio","region_id":"cn-north-4","schemes":["HTTPS"],"security_definitions":null,"summary":"启动数字人智能直播任务","tags":"直播任务管理","uri":null,"version":"2.0"}