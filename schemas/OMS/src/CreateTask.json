{"base_path":"/","components":null,"consumes":"[\"application/json;charset=UTF-8\"]","definitions":{"BandwidthPolicyDto":{"description":"带宽限速策略。","properties":{"end":{"description":"流量控制结束时间(包含),格式为“hh:mm”。例如“12:03”表示12时03分。","example":"23:59","pattern":"^(20|21|22|23|[0-1]\\d):[0-5]\\d","type":"string"},"max_bandwidth":{"description":"时段内允许的最大流量带宽,单位Byte/s,取值范围为>= 1048576Byte/s(相当于1MB/s)且<=209715200Byte/s(相当于200MB/s)。","example":5242880,"format":"int64","maximum":209715200,"minimum":1048576,"type":"integer","x-annotations":""},"start":{"description":"流量控制开始时间(包含),格式为“hh:mm”。例如“12:03”表示12时03分。","example":"00:00","pattern":"^(20|21|22|23|[0-1]\\d):[0-5]\\d","type":"string"}},"required":["end","max_bandwidth","start"]},"CreateTaskReq":{"description":"This is a auto create Body Object","properties":{"bandwidth_policy":{"description":"配置流量控制策略。数组中一个元素对应一个时段的最大带宽,最多允许5个时段,且时段不能重叠。","items":{"$ref":"#/definitions/BandwidthPolicyDto"},"maxItems":5,"minItems":0,"type":"array","x-annotations":"@Size(max = 5)"},"consistency_check":{"default":"size_last_modified","description":"一致性校验方式,用于迁移前/后校验对象是否一致,所有校验方式需满足源端/目的端对象的加密状态一致,具体校验方式和校验结果可通过对象列表查看。默认size_last_modified。\nsize_last_modified:默认配置。迁移前后,通过对比源端和目的端对象大小+最后修改时间,判断对象是否已存在或迁移后数据是否完整。源端与目的端同名对象大小相同,且目的端对象的最后修改时间不早于源端对象的最后修改时间,则代表该对象已存在/迁移成功。\ncrc64:目前仅支持华为/阿里/腾讯。迁移前后,通过对比源端和目的端对象元数据中CRC64值是否相同,判断对象是否已存在/迁移完成。如果源端与目的端对象元数据中不存在CRC64值,则系统会默认使用大小/最后修改时间校验方式来校验。\nno_check:目前仅支持HTTP/HTTPS数据源。当源端对象无法通过标准http协议中content-length字段获取数据大小时,默认数据下载成功即迁移成功,不对数据做额外校验,且迁移时源端对象默认覆盖目的端同名对象。当源端对象能正常通过标准http协议中content-length字段获取数据大小时,则采用大小/最后修改时间校验方式来校验。","enum":["size_last_modified","crc64","no_check"],"example":"size_last_modified","type":"string"},"description":{"description":"任务描述,不能超过255个字符,且不能包含^<>&\"'等特殊字符。","example":"这是一个迁移任务","maxLength":255,"minLength":0,"pattern":"^[^<>&\\\"'\\\\\\\\]*$","type":"string"},"dst_node":{"$ref":"#/definitions/DstNodeReq","description":"目的端信息。","x-annotations":""},"enable_failed_object_recording":{"default":true,"description":"是否记录失败对象,默认开启。\n\n开启后,如果有迁移失败对象,会在目的端存储失败对象信息。","example":true,"type":"boolean","x-annotations":""},"enable_kms":{"default":false,"description":"是否开启KMS加密,默认不开启。","example":true,"type":"boolean","x-annotations":""},"enable_metadata_migration":{"default":false,"description":"是否启用元数据迁移,默认否。不启用时,为保证迁移任务正常运行,仍将为您迁移ContentType元数据。","example":false,"type":"boolean","x-annotations":""},"enable_requester_pays":{"default":"false","description":"是否开启请求者付款,在启用后,请求者支付请求和数据传输费用。","example":"true","type":"boolean"},"enable_restore":{"default":false,"description":"是否自动解冻归档数据,默认否。\n\n开启后,如果遇到归档类型数据,会自动解冻再进行迁移。","example":true,"type":"boolean","x-annotations":""},"migrate_since":{"default":0,"description":"以时间戳方式表示的迁移指定时间(单位:秒),表示仅迁移在指定时间之后修改的源端待迁移对象。默认不设置迁移指定时间。","example":1586490079,"format":"int64","maximum":9223372036854775807,"minimum":0,"type":"integer","x-annotations":""},"object_overwrite_mode":{"description":"迁移前同名对象覆盖方式,用于迁移前判断源端与目的端有同名对象时,覆盖目的端或跳过迁移。默认SIZE_LAST_MODIFIED_COMPARISON_OVERWRITE。\nNO_OVERWRITE:不覆盖。迁移前源端对象与目的端对象同名时,不做对比直接跳过迁移。\nSIZE_LAST_MODIFIED_COMPARISON_OVERWRITE:大小/最后修改时间对比覆盖。默认配置。迁移前源端对象与目的端对象同名时,通过对比源端和目的端对象大小和最后修改时间,判断是否覆盖目的端,需满足源端/目的端对象的加密状态一致。源端与目的端同名对象大小不相同,或目的端对象的最后修改时间晚于源端对象的最后修改时间(源端较新),覆盖目的端。\nCRC64_COMPARISON_OVERWRITE:CRC64对比覆盖。目前仅支持华为/阿里/腾讯。迁移前源端对象与目的端对象同名时,通过对比源端和目的端对象元数据中CRC64值是否相同,判断是否覆盖目的端,需满足源端/目的端对象的加密状态一致。如果源端与目的端对象元数据中不存在CRC64值,则系统会默认使用SIZE_LAST_MODIFIED_COMPARISON_OVERWRITE(大小/最后修改时间对比覆盖)来对比进行覆盖判断。\nFULL_OVERWRITE:全覆盖。迁移前源端对象与目的端对象同名时,不做对比覆盖目的端。","enum":["NO_OVERWRITE","SIZE_LAST_MODIFIED_COMPARISON_OVERWRITE","CRC64_COMPARISON_OVERWRITE","FULL_OVERWRITE"],"example":"SIZE_LAST_MODIFIED_COMPARISON_OVERWRITE","type":"string"},"smn_config":{"$ref":"#/definitions/SmnConfig","description":"SMN消息发送配置。"},"source_cdn":{"$ref":"#/definitions/SourceCdnReq","description":"指定是否启用CDN迁移支持,若包含此字段则为支持,否则为不支持,启用CDN迁移支持后,迁移时将从CDN域名获取源端对象。"},"src_node":{"$ref":"#/definitions/SrcNodeReq","description":"源端信息。","x-annotations":""},"task_type":{"default":"object","description":"任务类型,默认为object。\n\nlist:对象列表迁移\nurl_list:URL列表迁移\nobject:文件/文件夹迁移,默认\nprefix:对象前缀迁移","enum":["list","url_list","object","prefix"],"example":"object","type":"string"}},"required":["src_node","dst_node"]},"CreateTaskResp":{"description":"This is a auto create Response Object","properties":{"id":{"description":"任务ID。","example":200844628315687,"format":"int64","maximum":999999999999999,"minimum":0,"type":"integer","x-annotations":""},"task_name":{"description":"任务名称。","example":"test-bucket-oms-test-01-20200810115700121_779","maxLength":2048,"minLength":0,"type":"string","x-annotations":""}}},"DstNodeReq":{"description":"","properties":{"ak":{"description":"目的端桶的AK(最大长度100个字符)。","example":"9NV6VOXXX...","maxLength":100,"minLength":0,"pattern":"^[^<>&\\\"'\\\\\\\\]*$","type":"string"},"bucket":{"description":"目的端桶的名称。","example":"dst_bucket","maxLength":1024,"minLength":0,"pattern":"^[^<>&\\\"'\\\\\\\\]*$","type":"string"},"region":{"description":"目的端桶所处的区域。\n\n请与Endpoint对应的区域保持一致。","example":"cn-north-1","maxLength":100,"minLength":0,"pattern":"^[^<>&\\\"'\\\\\\\\]*$","type":"string"},"save_prefix":{"description":"目的端桶内路径前缀(拼接在对象key前面,组成新的key,拼接后不能超过1024个字符)。","example":"1000-files","maxLength":1024,"minLength":0,"type":"string"},"security_token":{"description":"目的端的临时Token(最大长度16384个字符)。","example":"HtqVaHv2cBxxxxxxx","maxLength":16384,"minLength":0,"pattern":"^[^<>&\\\"'\\\\\\\\]*$","type":"string"},"sk":{"description":"目的端桶的SK(最大长度100个字符)。","example":"HTqVahv2cBXXXXXX...","maxLength":100,"minLength":0,"pattern":"^[^<>&\\\"'\\\\\\\\]*$","type":"string"}},"required":["ak","bucket","region","sk"]},"ErrorResp":{"description":"标准错误响应体。","properties":{"error_code":{"description":"错误码。","example":"OMS.0001","pattern":"^[^<>&\\\"'\\\\\\\\]*$","type":"string","x-annotations":""},"error_msg":{"description":"错误信息。","example":"Error message.","pattern":"^[^<>&\\\"'\\\\\\\\]*$","type":"string","x-annotations":""}},"x-annotations":"@com.fasterxml.jackson.annotation.JsonPropertyOrder({\"error_code\", \"error_msg\"})"},"ListFile":{"description":"列表文件配置。","properties":{"list_file_key":{"description":"对象列表文件或URL列表文件对象名。","example":"object_list_file.txt","maxLength":1024,"minLength":1,"type":"string"},"obs_bucket":{"description":"存放对象列表文件的OBS桶名。\n\n请确保与目的端桶处于同一区域,否则将导致任务创建失败。","example":"obs_bucket","maxLength":1024,"minLength":0,"pattern":"^[^<>&\\\"'\\\\\\\\]*$","type":"string"}},"required":["list_file_key","obs_bucket"]},"SmnConfig":{"description":"SMN消息通知配置。","properties":{"language":{"default":"en-us","description":"当前用户所使用的管理控制台的语言。\n\n可以选择zh-cn或者en-us。","enum":["zh-cn","en-us"],"example":"en-us","type":"string"},"topic_urn":{"description":"迁移任务所绑定的SMN消息主题的urn号。","example":"urn:smn:region:4cf2090802d94440b4cdd72ef26857b2:OMS","maxLength":1024,"minLength":0,"pattern":"^[^<>&\\\"'\\\\\\\\]*$","type":"string"},"trigger_conditions":{"description":"\t\nSMN消息的触发条件,取决于迁移任务状态。\n\n迁移任务状态的取值范围为SUCCESS或者FAILURE。\n\n- FAILURE表示任务失败后发送SMN消息。\n- SUCCESS表示任务成功后发送SMN消息。","example":"[\"SUCCESS\",\"FAIL\"]","items":{"description":"","pattern":"^(SUCCESS|FAILURE)$","type":"string"},"maxItems":2,"minItems":1,"type":"array","x-annotations":"@Size(min = 1, max = 2) @StringListValidation(pattern = \"^(SUCCESS|FAILURE)$\")"}},"required":["topic_urn","trigger_conditions"]},"SourceCdnReq":{"description":"源端CDN配置。","properties":{"authentication_key":{"description":"CDN鉴权秘钥,如果CDN需要进行鉴权,则此选项为必选。\n\n无需授权:无需配置此项。\nQiniu:无需配置此项。\nAliyun:根据authentication_type指定的鉴权方式配置此项。\nKingsoftCloud:无需配置此项。","example":"xxx","maxLength":255,"minLength":0,"pattern":"^[^<>&\\\"'\\\\\\\\]*$","type":"string"},"authentication_type":{"default":"NONE","description":"鉴权类型:\nNONE,\nQINIU_PRIVATE_AUTHENTICATION,\nALIYUN_OSS_A,\nALIYUN_OSS_B,\nALIYUN_OSS_C,\nKSYUN_PRIVATE_AUTHENTICATION,\nAZURE_SAS_TOKEN,\nTENCENT_COS_A,\nTENCENT_COS_B,\nTENCENT_COS_C,\nTENCENT_COS_D","enum":["NONE","QINIU_PRIVATE_AUTHENTICATION","ALIYUN_OSS_A","ALIYUN_OSS_B","ALIYUN_OSS_C","KSYUN_PRIVATE_AUTHENTICATION","TENCENT_COS_A","TENCENT_COS_B","TENCENT_COS_C","TENCENT_COS_D"],"example":"ALIYUN_OSS_A","type":"string"},"domain":{"description":"\t\n从指定域名获取对象。","example":"xxx.xxx.xxx","maxLength":1024,"minLength":0,"pattern":"^(?=^.{3,255}$)(?!^.*\\.myhuaweicloud.com$)(?!^.*\\.myhwclouds.com$)((?!^.*(\\d)+$)[a-zA-Z0-9][-a-zA-Z0-9]{0,62}(\\.[a-zA-Z0-9][-a-zA-Z0-9]{0,62})+$)","type":"string"},"protocol":{"description":"协议类型,支持http和https协议。","enum":["http","https"],"example":"https","type":"string"}},"required":["authentication_type","domain","protocol"]},"SrcNodeReq":{"description":"源端节点信息。","properties":{"ak":{"description":"源端桶的AK(最大长度100个字符),task_type为非url_list时,本参数为必选。","example":"src_ak","maxLength":100,"minLength":0,"pattern":"^[^<>&\\\"'\\\\\\\\]*$","type":"string"},"app_id":{"description":"当源端为腾讯云时,需要填写此参数。","example":"apptest123","maxLength":255,"minLength":0,"pattern":"^[^<>&\\\"'\\\\\\\\]*$","type":"string"},"bucket":{"description":"源端桶的名称,task_type为非url_list时,本参数为必选。","example":"src_bucket","maxLength":1024,"minLength":0,"pattern":"^[^<>&\\\"'\\\\\\\\]*$","type":"string"},"cloud_type":{"default":"Aliyun","description":"源端云服务提供商,task_type为非url_list时,本参数为URLSource且必选。\n\n可选值有AWS、Azure、Aliyun、Tencent、HuaweiCloud、QingCloud、KingsoftCloud、Baidu、Qiniu、URLSource或者UCloud。默认值为Aliyun。","example":"HuaweiCloud","pattern":"^(AWS|Azure|Aliyun|Tencent|HuaweiCloud|QingCloud|KingsoftCloud|Baidu|Qiniu|URLSource|UCloud)$","type":"string","x-annotations":""},"list_file":{"$ref":"#/definitions/ListFile","description":"列表文件配置,当task_type为list或url_list时,list_file为必选参数。"},"object_key":{"description":"任务类型为对象迁移任务时,表示待迁移对象名称(以“/”结尾的字符串代表待迁移的文件夹,非“/”结尾的字符串代表待迁移的文件。);\n任务类型为前缀迁移任务时,表示待迁移前缀。\n整桶迁移时,此参数设置为[\"\"]。","items":{"description":"","maxLength":1024,"minLength":0,"type":"string"},"maxItems":500,"minItems":0,"type":"array","x-annotations":"@Size(max = 500) @StringListValidation(minLength = 0, maxLength = 1024)"},"region":{"description":"源端桶所处的区域,task_type为非url_list时,本参数为必选。","example":"cn-north-1","maxLength":100,"minLength":0,"pattern":"^[^<>&\\\"'\\\\\\\\]*$","type":"string"},"security_token":{"description":"源端桶的临时Token(最大长度16384个字符)","example":"security_token","maxLength":16384,"minLength":0,"pattern":"^[^<>&\\\"'\\\\\\\\]*$","type":"string"},"sk":{"description":"源端桶的SK(最大长度100个字符),task_type为非url_list时,本参数为必选。","example":"src_sk","maxLength":100,"minLength":0,"pattern":"^[^<>&\\\"'\\\\\\\\]*$","type":"string"}}}},"description":null,"group_id":"46e3c0a88b3c4637acadda543a71d717","host":"oms.cn-north-4.myhuaweicloud.com","id":"250e4f52c4e54a53aca947a9a8b63a0e","info_version":"v2","method":"post","name":"CreateTask","parameters":{},"paths":{"/v2/{project_id}/tasks":{"post":{"deprecated":false,"description":"创建迁移任务,创建成功后,任务会被自动启动,不需要额外调用启动任务命令。","operationId":"CreateTask","parameters":[{"description":"项目ID。","in":"path","maxLength":1024,"minLength":1,"name":"project_id","required":true,"type":"string","x-example":"45ac6df9hjxxxx...","x-order":1},{"description":"IAM鉴权Token。","in":"header","maxLength":16384,"minLength":1,"name":"X-Auth-Token","required":true,"type":"string","x-example":"MIIPGwYJKoZIhvcN...","x-order":2},{"description":"This is a auto create Body Object","in":"body","name":"CreateTaskRequestBody","required":true,"schema":{"$ref":"#/definitions/CreateTaskReq"}}],"responses":{"200":{"description":"Created","examples":{"application/json":{"id":200429548242937,"task_name":"task_name"}},"schema":{"$ref":"#/definitions/CreateTaskResp"}},"400":{"description":"Bad Request","schema":{"$ref":"#/definitions/ErrorResp"}}},"summary":"创建迁移任务","tags":["迁移任务管理"],"x-constraint":"- 单个租户在过去24小时内最多可创建1500个迁移任务。\n- 单个租户名下处于“等待中”状态的迁移任务达到1500个时不可再创建任务。","x-iftype":"OpenAPI","x-is-registered":"Y","x-name":"创建迁移任务","x-open-region-cloud":"hc,hk","x-order":2,"x-request":"none","x-request-examples-1":{"bandwidth_policy":[{"end":"23:59","max_bandwidth":50000000,"start":"00:00"}],"description":"xxx","dst_node":{"ak":"dst_ak","bucket":"dst_bucket","region":"cn-north-1","sk":"dst_sk"},"enable_failed_object_recording":true,"enable_kms":false,"migrate_since":123456789,"smn_config":{"language":"en-us","topic_urn":"urn:smn:region:4cf2090802d94440b4cdd72ef26857b2:OMS","trigger_conditions":["SUCCESS","FAILURE"]},"source_cdn":{"authentication_key":"xxx","authentication_type":"ALIYUN_OSS_A","domain":"xxx.xxx.xxx","protocol":"https"},"src_node":{"ak":"src_ak","bucket":"src_bucket","cloud_type":"HuaweiCloud","list_file":{"list_file_key":"object_list_file.txt","obs_bucket":"list_file_bucket"},"region":"cn-north-1","sk":"src_sk"},"task_type":"list"},"x-request-examples-2":{"bandwidth_policy":[{"end":"23:59","max_bandwidth":50000000,"start":"00:00"}],"description":"xxx","dst_node":{"ak":"dst_ak","bucket":"dst_bucket","region":"cn-north-1","sk":"dst_sk"},"enable_failed_object_recording":true,"enable_kms":false,"migrate_since":123456789,"smn_config":{"language":"en-us","topic_urn":"urn:smn:region:4cf2090802d94440b4cdd72ef26857b2:OMS","trigger_conditions":["SUCCESS","FAILURE"]},"source_cdn":{"authentication_key":"xxx","authentication_type":"ALIYUN_OSS_A","domain":"xxx.xxx.xxx","protocol":"https"},"src_node":{"ak":"src_ak","bucket":"src_bucket","cloud_type":"HuaweiCloud","object_key":["file1.xxx","file2.xxx","path1/"],"region":"cn-north-1","sk":"src_sk"},"task_type":"object"},"x-request-examples-3":{"description":"xxx","dst_node":{"ak":"dst_ak","bucket":"dst_bucket","region":"cn-north-1","sk":"dst_sk"},"enable_failed_object_recording":true,"enable_kms":false,"src_node":{"cloud_type":"URLSource","list_file":{"list_file_key":"object_list_file.txt","obs_bucket":"list_file_bucket"}},"task_type":"url_list"},"x-request-examples-4":{"description":"xxx","dst_node":{"ak":"dst_ak","bucket":"dst_bucket","region":"cn-north-1","sk":"dst_sk"},"enable_failed_object_recording":true,"enable_kms":false,"src_node":{"ak":"src_ak","bucket":"src_bucket","cloud_type":"HuaweiCloud","object_key":["abc","123","prefix3","path/prefix4"],"region":"cn-north-1","sk":"src_sk"},"task_type":"prefix"},"x-request-examples-description-1":"使用阿里云A方式进行https CDN方式迁移,开启按时段限速,限速值为50MB/S,将对象列表object_list_file.txt中的对象列表执行迁移,并开启迁移结果通知。","x-request-examples-description-2":"使用阿里云A方式进行https CDN方式迁移,开启按时段限速,限速值为50MB/S,将对象文件/前缀[\"file1.xxx\", \"file2.xxx\", \"path1/\"]进行迁移,并开启迁移结果通知","x-request-examples-description-3":"创建URL列表迁移任务,将object_list_file.txt中的URL列表执行迁移。","x-request-examples-description-4":"创建前缀迁移任务,将[ \"abc\", \"123\", \"prefix3\", \"path/prefix4\" ]为前缀的对象文件进行迁移。","x-request-examples-text-1":{"bandwidth_policy":[{"end":"23:59","max_bandwidth":50000000,"start":"00:00"}],"description":"xxx","dst_node":{"ak":"dst_ak","bucket":"dst_bucket","region":"cn-north-1","sk":"dst_sk"},"enable_failed_object_recording":true,"enable_kms":false,"migrate_since":123456789,"smn_config":{"language":"en-us","topic_urn":"urn:smn:region:4cf2090802d94440b4cdd72ef26857b2:OMS","trigger_conditions":["SUCCESS","FAILURE"]},"source_cdn":{"authentication_key":"xxx","authentication_type":"ALIYUN_OSS_A","domain":"xxx.xxx.xxx","protocol":"https"},"src_node":{"ak":"src_ak","bucket":"src_bucket","cloud_type":"HuaweiCloud","list_file":{"list_file_key":"object_list_file.txt","obs_bucket":"list_file_bucket"},"region":"cn-north-1","sk":"src_sk"},"task_type":"list"},"x-request-examples-text-2":{"bandwidth_policy":[{"end":"23:59","max_bandwidth":50000000,"start":"00:00"}],"description":"xxx","dst_node":{"ak":"dst_ak","bucket":"dst_bucket","region":"cn-north-1","sk":"dst_sk"},"enable_failed_object_recording":true,"enable_kms":false,"migrate_since":123456789,"smn_config":{"language":"en-us","topic_urn":"urn:smn:region:4cf2090802d94440b4cdd72ef26857b2:OMS","trigger_conditions":["SUCCESS","FAILURE"]},"source_cdn":{"authentication_key":"xxx","authentication_type":"ALIYUN_OSS_A","domain":"xxx.xxx.xxx","protocol":"https"},"src_node":{"ak":"src_ak","bucket":"src_bucket","cloud_type":"HuaweiCloud","object_key":["file1.xxx","file2.xxx","path1/"],"region":"cn-north-1","sk":"src_sk"},"task_type":"object"},"x-request-examples-text-3":{"description":"xxx","dst_node":{"ak":"dst_ak","bucket":"dst_bucket","region":"cn-north-1","sk":"dst_sk"},"enable_failed_object_recording":true,"enable_kms":false,"src_node":{"cloud_type":"URLSource","list_file":{"list_file_key":"object_list_file.txt","obs_bucket":"list_file_bucket"}},"task_type":"url_list"},"x-request-examples-text-4":{"description":"xxx","dst_node":{"ak":"dst_ak","bucket":"dst_bucket","region":"cn-north-1","sk":"dst_sk"},"enable_failed_object_recording":true,"enable_kms":false,"src_node":{"ak":"src_ak","bucket":"src_bucket","cloud_type":"HuaweiCloud","object_key":["abc","123","prefix3","path/prefix4"],"region":"cn-north-1","sk":"src_sk"},"task_type":"prefix"},"x-request-examples-url-1":"POST https://{endpoint}/v2/{project_id}/tasks","x-request-examples-url-2":"POST https://{endpoint}/v2/{project_id}/tasks","x-request-examples-url-3":"POST https://{endpoint}/v2/{project_id}/tasks","x-request-examples-url-4":"POST https://{endpoint}/v2/{project_id}/tasks","x-response":"none","x-scope":"Commercial","x-support-sdk":"Y","x-version":"v2"}}},"product_short":"OMS","region_id":"cn-north-4","schemes":["HTTPS"],"security_definitions":null,"summary":"创建迁移任务","tags":"迁移任务管理","uri":null,"version":"2.0"}