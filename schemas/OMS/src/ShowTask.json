{"base_path":"/","components":null,"consumes":"[\"application/json;charset=UTF-8\"]","definitions":{"BandwidthPolicyDto":{"description":"带宽限速策略。","properties":{"end":{"description":"流量控制结束时间,格式为“hh:mm”。例如“12:03”表示12时03分。","example":"23:59","pattern":"^(20|21|22|23|[0-1]\\d):[0-5]\\d","type":"string"},"max_bandwidth":{"description":"时段内允许的最大流量带宽,单位Byte/s,取值范围为>= 1048576Byte/s(相当于1MB/s)且<=209715200Byte/s(相当于200MB/s)。","example":5242880,"format":"int64","maximum":209715200,"minimum":1048576,"type":"integer","x-annotations":""},"start":{"description":"流量控制开始时间,格式为“hh:mm”。例如“12:03”表示12时03分。","example":"00:00","pattern":"^(20|21|22|23|[0-1]\\d):[0-5]\\d","type":"string"}},"required":["end","max_bandwidth","start"],"type":"object"},"DstNodeResp":{"description":"","properties":{"bucket":{"description":"目的端桶的名称。","example":"dst_bucket","maxLength":1024,"pattern":"^[^<>&\\\"'\\\\\\\\]$","type":"string","x-annotations":""},"region":{"description":"目的端桶所处的区域。\n\n请与Endpoint对应的区域保持一致。","example":"cn-north-1","maxLength":100,"minLength":0,"pattern":"^[^<>&\\\"'\\\\\\\\]$","type":"string","x-annotations":""},"save_prefix":{"description":"目的端桶内路径前缀(拼接在对象key前面,组成新的key,拼接后不能超过1024个字符)。","example":"1000-files","maxLength":1024,"minLength":0,"type":"string"}}},"ErrorReasonResp":{"description":"迁移任务查询接口中返回的任务失败信息提示","properties":{"error_code":{"description":"迁移失败的错误码。","maxLength":10,"minLength":0,"type":"string","x-annotations":""},"error_msg":{"description":"迁移失败的原因。","maxLength":1024,"minLength":0,"type":"string","x-annotations":""}}},"ErrorResp":{"description":"标准错误响应体。","properties":{"error_code":{"description":"错误码。","example":"OMS.0001","pattern":"^[^<>&\\\"'\\\\\\\\]*$","type":"string","x-annotations":""},"error_msg":{"description":"错误信息。","example":"Error message.","pattern":"^[^<>&\\\"'\\\\\\\\]*$","type":"string","x-annotations":""}},"x-annotations":"@com.fasterxml.jackson.annotation.JsonPropertyOrder({\"error_code\", \"error_msg\"})"},"FailedObjectRecordDto":{"description":"","properties":{"error_code":{"description":"失败对象列表上传失败的错误码。","example":"S3M.0001","maxLength":10,"minLength":0,"type":"string"},"list_file_key":{"description":"失败对象列表文件路径。","example":"oms/failed_object_lists/hw-source-oms-test-01-20200808072749593_159_20200808072749593-0.failed_list.txt","maxLength":1024,"minLength":0,"type":"string"},"result":{"description":"是否支持失败对象重传。","example":true,"type":"boolean"}}},"ListFile":{"description":"列表文件配置。","properties":{"list_file_key":{"description":"对象列表文件或URL列表文件对象名。","example":"object_list_file.txt","maxLength":1024,"minLength":1,"type":"string"},"list_file_num":{"description":"存放对象列表文件的数量","example":10,"maxLength":65535,"minLength":0,"type":"string"},"obs_bucket":{"description":"存放对象列表文件的OBS桶名。\n\n请确保与目的端桶处于同一区域,否则将导致任务创建失败。","example":"obs_bucket","maxLength":1024,"minLength":0,"pattern":"^[^<>&\\\"'\\\\\\\\]*$","type":"string"}},"required":["list_file_key","obs_bucket"]},"SmnInfo":{"description":"smn 消息通知结果","properties":{"notify_error_message":{"description":"记录SMN消息发送失败原因的错误码(迁移任务成功时为空)。","example":"S3M.0001","maxLength":1024,"minLength":0,"type":"string"},"notify_result":{"description":"记录迁移任务执行完毕后SMN消息是否发送成功。","example":false,"type":"boolean"},"topic_name":{"description":"SMN Topic的名称(SMN消息发送成功时为空)。","example":"smn:xxxxxx","maxLength":5120,"minLength":0,"type":"string"}}},"SourceCdnResp":{"description":"源端CDN配置返回值。","properties":{"authentication_type":{"description":"鉴权类型:\nNONE:公开访问,无安全限制,\nQINIU_PRIVATE_AUTHENTICATION:七牛自定义URL签名,\nALIYUN_OSS_A:阿里云  URL携带签名,简单通用,\nALIYUN_OSS_B:阿里云  Header携带签名,用于API调用,\nALIYUN_OSS_C:阿里云  STS临时安全令牌,最安全,\nKSYUN_PRIVATE_AUTHENTICATION:金山云  金山云自定义URL签名,\nAZURE_SAS_TOKEN:微软Azure  灵活安全的共享访问签名,\nTENCENT_COS_A:腾讯云  多次有效签名(不推荐),\nTENCENT_COS_B:腾讯云  单次有效签名,安全性最高,\nTENCENT_COS_C:腾讯云  Header携带签名,用于API调用,\nTENCENT_COS_D:腾讯云  Header携带签名,用于API调用.","enum":["NONE","QINIU_PRIVATE_AUTHENTICATION","ALIYUN_OSS_A","ALIYUN_OSS_B","ALIYUN_OSS_C","KSYUN_PRIVATE_AUTHENTICATION","AZURE_SAS_TOKEN","TENCENT_COS_A","TENCENT_COS_B","TENCENT_COS_C","TENCENT_COS_D"],"type":"string"},"domain":{"description":"\t\n从指定域名获取对象。","example":"xxx.xxx.xxx","maxLength":1024,"minLength":0,"pattern":"^(?=^.{3,255}$)(?!^.*\\.myhuaweicloud.com$)(?!^.*\\.myhwclouds.com$)((?!^.*(\\d)+$)[a-zA-Z0-9][-a-zA-Z0-9]{0,62}(\\.[a-zA-Z0-9][-a-zA-Z0-9]{0,62})+$)","type":"string"},"protocol":{"description":"协议类型,支持http和https协议。","enum":["http","https"],"example":"https","type":"string"}},"required":["domain","protocol"]},"SrcNodeResp":{"description":"源端节点信息。","properties":{"app_id":{"description":"腾讯云APPID,当源端为腾讯云时,会返回此参数。","example":"apptest123","maxLength":255,"minLength":0,"pattern":"^[^<>&\\\"'\\\\\\\\]$","type":"string","x-annotations":""},"bucket":{"description":"源端桶的名称。","example":"src_bucket","maxLength":1024,"minLength":0,"pattern":"^[^<>&\\\"'\\\\\\\\]$","type":"string","x-annotations":""},"cloud_type":{"description":"源端云服务提供商。\n\n可选值有AWS、Azure、Aliyun、Tencent、HuaweiCloud、QingCloud、KingsoftCloud、Baidu、Google、Qiniu、URLSource或者UCloud。默认值为Aliyun。","enum":["AWS","Azure","Aliyun","Tencent","HuaweiCloud","QingCloud","KingsoftCloud","Baidu","Qiniu","URLSource","UCloud","Google"],"example":"HuaweiCloud","type":"string","x-annotations":""},"list_file":{"$ref":"#/definitions/ListFile","description":"列表文件配置,当task_type为list或url_list时,list_file为必选参数。"},"object_key":{"description":"任务类型为对象迁移任务时,表示待迁移对象名称;\n任务类型为前缀迁移任务时,表示待迁移前缀。","items":{"maxLength":1024,"minLength":0,"type":"string"},"maxItems":500,"minItems":0,"type":"array"},"region":{"description":"源端桶所处的区域。","example":"cn-north-1","maxLength":100,"minLength":0,"pattern":"^[^<>&\\\"'\\\\\\\\]$","type":"string","x-annotations":""}}},"TaskResp":{"properties":{"bandwidth_policy":{"description":"流量控制策略,每个任务最多可设置5条限速策略。","items":{"$ref":"#/definitions/BandwidthPolicyDto"},"maxItems":5,"minItems":0,"type":"array"},"complete_size":{"description":"任务迁移完成大小(Byte)。","example":9651103,"format":"int64","maximum":9223372036854775807,"minimum":0,"type":"integer"},"consistency_check":{"description":"一致性校验方式,用于迁移前/后校验对象是否一致,所有校验方式需满足源端/目的端对象的加密状态一致,具体校验方式和校验结果可通过对象列表查看。默认size_last_modified。\nsize_last_modified:默认配置。迁移前后,通过对比源端和目的端对象大小+最后修改时间,判断对象是否已存在或迁移后数据是否完整。源端与目的端同名对象大小相同,且目的端对象的最后修改时间不早于源端对象的最后修改时间,则代表该对象已存在/迁移成功。\ncrc64:目前仅支持华为/阿里/腾讯。迁移前后,通过对比源端和目的端对象元数据中CRC64值是否相同,判断对象是否已存在/迁移完成。如果源端与目的端对象元数据中不存在CRC64值,则系统会默认使用大小/最后修改时间校验方式来校验。\nno_check:目前仅支持HTTP/HTTPS数据源。当源端对象无法通过标准http协议中content-length字段获取数据大小时,默认数据下载成功即迁移成功,不对数据做额外校验,且迁移时源端对象默认覆盖目的端同名对象。当源端对象能正常通过标准http协议中content-length字段获取数据大小时,则采用大小/最后修改时间校验方式来校验。","enum":["size_last_modified","crc64","no_check"],"example":"size_last_modified","type":"string"},"description":{"description":"任务描述,没有设置时为空字符串。","example":"test log","maxLength":255,"minLength":0,"type":"string"},"dst_node":{"$ref":"#/definitions/DstNodeResp","description":"目的端节点信息"},"dst_storage_policy":{"default":"STANDARD","description":"目的端存储类型设置,当且仅当目的端为华为云OBS时需要,默认为标准存储\nSTANDARD:华为云OBS标准存储\nIA:华为云OBS低频存储\nARCHIVE:华为云OBS归档存储\nDEEP_ARCHIVE:华为云OBS深度归档存储\nSRC_STORAGE_MAPPING:保留源端存储类型,将源端存储类型映射为华为云OBS存储类型","enum":["STANDARD","IA","ARCHIVE","DEEP_ARCHIVE","SRC_STORAGE_MAPPING"],"example":"STANDARD","maxLength":128,"minLength":0,"type":"string"},"enable_failed_object_recording":{"description":"是否记录失败对象。开启后,如果有迁移失败对象,会在目的端存储失败对象信息。","example":true,"type":"boolean"},"enable_kms":{"description":"存储入OBS时是否使用KMS加密。","example":true,"type":"boolean"},"enable_metadata_migration":{"description":"是否启用元数据迁移,默认否。不启用时,为保证迁移任务正常运行,仍将为您迁移ContentType元数据。","example":false,"type":"boolean"},"enable_requester_pays":{"description":"是否开启请求者付款,在启用后,请求者支付请求和数据传输费用。","example":"true","type":"boolean"},"enable_restore":{"description":"是否自动解冻归档数据,(由于对象存储解冻需要源端存储等待一定时间,开启自动解冻会对迁移速度有较大影响,建议先完成归档存储数据解冻后再启动迁移)。\n开启后,如果遇到归档类型数据,会自动解冻再进行迁移;关闭后,如果遇到归档类型的对象直接跳过相应对象,系统默认对象迁移失败并记录相关信息到失败对象列表中。","type":"boolean"},"error_reason":{"$ref":"#/definitions/ErrorReasonResp","description":"任务失败原因,非失败状态时该字段为空字符串。","x-annotations":""},"failed_num":{"description":"迁移失败对象数量。","example":1024,"format":"int64","maximum":9223372036854775807,"minimum":0,"type":"integer"},"failed_object_record":{"$ref":"#/definitions/FailedObjectRecordDto","description":"失败对象列表记录结果,记录成功时提供失败对象列表存放链接,记录失败时显示失败原因。"},"group_id":{"description":"迁移任务组ID,当任务由迁移任务组创建时会包含迁移任务组的id信息。","example":"group_id","maxLength":36,"minLength":0,"type":"string"},"group_type":{"default":"NORMAL_TASK","description":"分组类型\nNORMAL_TASK:一般迁移任务\nSYNC_TASK:同步任务所属迁移任务\nGROUP_TASK:任务组所属迁移任务","enum":["NORMAL_TASK","SYNC_TASK","GROUP_TASK"],"example":"NORMAL_TASK","type":"string"},"id":{"description":"任务ID。","example":20200810368547,"format":"int64","maximum":999999999999999,"minimum":0,"type":"integer"},"is_query_over":{"description":"迁移任务是否完成源端对象统计数据扫描。","example":true,"type":"boolean"},"left_time":{"description":"任务剩余时间(毫秒)。","example":6854775807,"format":"int64","maximum":9223372036854775807,"minimum":0,"type":"integer"},"migrate_since":{"description":"迁移指定时间(时间戳,毫秒),表示仅迁移在指定时间之后修改的源端待迁移对象。默认为0,表示不设置迁移指定时间。","example":6854775807,"format":"int64","maximum":9223372036854775807,"minimum":0,"type":"integer"},"migrate_speed":{"description":"任务迁移速度(Byte/s)。","example":6854775807,"format":"int64","maximum":9223372036854775807,"minimum":0,"type":"integer"},"name":{"description":"任务名称。","example":"taskname","maxLength":10240,"minLength":0,"type":"string"},"object_overwrite_mode":{"description":"迁移前同名对象覆盖方式,用于迁移前判断源端与目的端有同名对象时,覆盖目的端或跳过迁移。默认SIZE_LAST_MODIFIED_COMPARISON_OVERWRITE。\nNO_OVERWRITE:不覆盖。迁移前源端对象与目的端对象同名时,不做对比直接跳过迁移。\nSIZE_LAST_MODIFIED_COMPARISON_OVERWRITE:大小/最后修改时间对比覆盖。默认配置。迁移前源端对象与目的端对象同名时,通过对比源端和目的端对象大小和最后修改时间,判断是否覆盖目的端,需满足源端/目的端对象的加密状态一致。源端与目的端同名对象大小不相同,或目的端对象的最后修改时间晚于源端对象的最后修改时间(源端较新),覆盖目的端。 \nCRC64_COMPARISON_OVERWRITE:CRC64对比覆盖。目前仅支持华为/阿里/腾讯。迁移前源端对象与目的端对象同名时,通过对比源端和目的端对象元数据中CRC64值是否相同,判断是否覆盖目的端,需满足源端/目的端对象的加密状态一致。如果源端与目的端对象元数据中不存在CRC64值,则系统会默认使用SIZE_LAST_MODIFIED_COMPARISON_OVERWRITE(大小/最后修改时间对比覆盖)来对比进行覆盖判断。\nFULL_OVERWRITE:全覆盖。迁移前源端对象与目的端对象同名时,不做对比覆盖目的端。","enum":["NO_OVERWRITE","SIZE_LAST_MODIFIED_COMPARISON_OVERWRITE","CRC64_COMPARISON_OVERWRITE","FULL_OVERWRITE"],"example":"SIZE_LAST_MODIFIED_COMPARISON_OVERWRITE","type":"string"},"progress":{"description":"任务进度,例如:0.522代表任务进度为52.2%,1代表任务进度为100%。","example":0.522,"format":"double","maximum":1,"minimum":0,"type":"number"},"real_size":{"description":"实际迁移对象总大小(Byte),忽略对象的大小不会统计在内。","example":6854775807,"format":"int64","maximum":9223372036854775807,"minimum":0,"type":"integer"},"skip_record_error_reason":{"description":"迁移忽略对象列表记录失败错误码,记录记录成功时为空。","example":"S3M.0311","maxLength":255,"minLength":0,"type":"string"},"skipped_num":{"description":"迁移忽略对象数(存在以下两种情况会自动跳过:1.源端对象最后修改时间在迁移指定时间前;2.目的端已有该对象。)","example":10240,"format":"int64","maximum":9223372036854775807,"minimum":0,"type":"integer"},"smn_info":{"$ref":"#/definitions/SmnInfo","description":"SMN消息通知结果"},"source_cdn":{"$ref":"#/definitions/SourceCdnResp","description":"指定是否启用CDN迁移支持。启用CDN迁移支持后,迁移时将从CDN域名获取源端对象。若包含此字段则为支持,否则为不支持。"},"src_node":{"$ref":"#/definitions/SrcNodeResp","description":"源端节点信息"},"start_time":{"description":"任务启动时间(Unix时间戳,毫秒)。","example":6854775807,"format":"int64","maximum":9223372036854775807,"minimum":0,"type":"integer"},"status":{"description":"任务状态。\n1:等待调度\n2:正在执行\n3:停止\n4:失败\n5:成功\n6:重试中\n7:暂停中","example":1,"format":"int32","maximum":7,"minimum":1,"type":"integer"},"success_record_error_reason":{"description":"迁移成功对象列表记录失败错误码,记录成功时为空","example":"S3M.0309","maxLength":255,"minLength":0,"type":"string"},"successful_num":{"description":"迁移成功对象数量。","example":409600,"format":"int64","maximum":9223372036854775807,"minimum":0,"type":"integer"},"task_priority":{"default":"MEDIUM","description":"HIGH:高优先级\nMEDIUM:中优先级\nLOW:低优先级","enum":["HIGH","MEDIUM","LOW"],"type":"string"},"task_type":{"default":"object","description":"任务类型,为空默认设置为object。\nlist:对象列表迁移\nobject:文件/文件夹迁移\nprefix:对象前缀迁移\nurl_list: url对象列表","enum":["list","object","prefix","url_list"],"example":"string","type":"string"},"total_num":{"description":"迁移任务对象总数量。","example":409600,"format":"int64","maximum":9223372036854775807,"minimum":0,"type":"integer"},"total_size":{"description":"任务迁移总大小(Byte)。","example":337203685,"format":"int64","maximum":9223372036854775807,"minimum":0,"type":"integer"},"total_time":{"description":"任务总耗时(毫秒)。","example":36854775807,"format":"int64","maximum":9223372036854775807,"minimum":0,"type":"integer"}},"type":"object"}},"description":null,"group_id":"46e3c0a88b3c4637acadda543a71d717","host":"oms.cn-north-4.myhuaweicloud.com","id":"2095c08b94db4bf0b2758b5a71582548","info_version":"v2","method":"get","name":"ShowTask","parameters":{},"paths":{"/v2/{project_id}/tasks/{task_id}":{"get":{"deprecated":false,"description":"查询指定ID的任务详情。","operationId":"ShowTask","parameters":[{"description":"项目ID","in":"path","maxLength":1024,"minLength":1,"name":"project_id","required":true,"type":"string","x-example":"45ac6df9hjxxxx...","x-order":1},{"description":"任务ID","format":"int64","in":"path","maximum":999999999999999,"minimum":0,"name":"task_id","required":true,"type":"integer","x-example":200844628315687,"x-order":2},{"description":"IAM 鉴权 Token","in":"header","maxLength":16384,"minLength":1,"name":"X-Auth-Token","required":true,"type":"string","x-annotations":"","x-example":"MIIDkgYJKoZIhvcNAQcCoIIDgzCCXXXXXX...","x-order":3}],"responses":{"200":{"description":"OK","examples":{"application/json":{"bandwidth_policy":[{"end":"23:59","max_bandwidth":0,"start":"00:00"}],"complete_size":0,"description":"test log","dst_node":{"bucket":"dst_bucket","region":"cn-north-1"},"enable_failed_object_recording":true,"enable_kms":true,"enable_restore":false,"error_reason":{"error_code":"string","error_msg":"string"},"failed_num":0,"failed_object_record":{"error_code":"string","list_file_key":"string","result":true},"group_id":"string","id":0,"is_query_over":true,"left_time":0,"migrate_since":0,"migrate_speed":0,"name":"string","progress":0,"real_size":0,"skipped_num":0,"smn_info":{"notify_error_message":"string","notify_result":true,"topic_name":"string"},"source_cdn":{"authentication_type":"string","domain":"xxx.xxx.xxx","protocol":"http"},"src_node":{"app_id":"string","bucket":"src_bucket","cloud_type":"AWS","list_file":{"list_file_key":"object_list_file.txt","obs_bucket":"obs_bucket"},"object_key":["string","string"],"region":"cn-north-1"},"start_time":0,"status":0,"successful_num":0,"task_type":"list","total_num":0,"total_size":0,"total_time":0}},"schema":{"$ref":"#/definitions/TaskResp"}},"404":{"description":"Not Found","schema":{"$ref":"#/definitions/ErrorResp"}}},"summary":"查询指定ID的任务详情","tags":["迁移任务管理"],"x-api-type":"open-api","x-constraint":"","x-iam-auth-meta-anno":{"abacAction":"oms:task:get","authContextInitializerName":"taskAuthContextInitializer","authLevel":"INSTANCE","model":"v5","needAbacCheck":true,"needAbacResourceCheck":false,"needApigwJwtAuthCheck":true,"needCbcCheck":true,"needRbacCheck":true,"needResourceTagCheck":false,"opType":"guessByHttpMethod","supportAllGrantedEps":false},"x-iftype":"OpenAPI","x-is-registered":"Y","x-name":"查询指定ID的任务详情","x-open-region-cloud":"hc,hk","x-order":1,"x-request":"none","x-request-examples-description-1":"查询2c0689c860ad4728a497c91ec0844383项目下的191297407830872任务的详情","x-request-examples-url-1":"GET https://{endpoint}/v2/2c0689c860ad4728a497c91ec0844383/tasks/191297407830872","x-response":"none","x-scope":"Commercial","x-support-sdk":"Y","x-version":"v2"}}},"product_short":"OMS","region_id":"cn-north-4","schemes":["HTTPS"],"security_definitions":null,"summary":"查询指定ID的任务详情","tags":"迁移任务管理","uri":null,"version":"2.0"}