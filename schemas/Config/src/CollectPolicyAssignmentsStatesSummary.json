{"base_path":null,"components":{"parameters":{"DomainId":{"description":"帐号ID","in":"path","name":"domain_id","required":true,"schema":{"maxLength":36,"pattern":"[\\w-]+","type":"string"}},"PolicyAssignmentId":{"description":"规则ID","in":"path","name":"policy_assignment_id","required":true,"schema":{"maxLength":36,"pattern":"[\\w-]+","type":"string"}},"ResourceNameQuery":{"description":"资源名称","in":"query","name":"resource_name","required":false,"schema":{"maxLength":256,"pattern":"[^']+","type":"string"}}},"schemas":{"CustomPolicy":{"description":"自定义合规规则","properties":{"auth_type":{"description":"自定义合规规则调用function方式","enum":["agency"],"type":"string"},"auth_value":{"additionalProperties":{"description":"规则参数值。","type":"object"},"description":"method参数值,method为agency时,为{\"agency_name\":rms_fg_agency}, rms_fg_agency为授权Config调用FunctionGraph接口的委托名称","type":"object"},"function_urn":{"description":"自定义函数的urn","maxLength":1024,"type":"string"}},"required":["function_urn","auth_type"],"type":"object"},"ErrorResp":{"description":"异常错误","properties":{"error_code":{"description":"错误码","type":"string"},"error_msg":{"description":"错误消息内容","type":"string"}},"type":"object"},"FilterTagDetail":{"description":"标签对象","properties":{"key":{"description":"标签key","type":"string"},"values":{"description":"标签值列表","items":{"description":"标签值","type":"string"},"type":"array"}},"type":"object"},"PolicyAssignment":{"description":"规则","properties":{"created":{"description":"规则创建时间","type":"string"},"created_by":{"description":"规则的创建者","type":"string"},"custom_policy":{"$ref":"#/components/schemas/CustomPolicy"},"description":{"description":"规则描述","type":"string"},"id":{"description":"规则ID","type":"string"},"name":{"description":"规则名字","type":"string"},"parameters":{"additionalProperties":{"$ref":"#/components/schemas/PolicyParameterValue"},"description":"规则参数","type":"object"},"period":{"description":"触发周期值,可选值:One_Hour, Three_Hours, Six_Hours, Twelve_Hours, TwentyFour_Hours","type":"string"},"policy_assignment_type":{"description":"规则类型,包括预定义合规规则(builtin)和用户自定义合规规则(custom)","enum":["builtin","custom"],"type":"string"},"policy_definition_id":{"description":"规则的策略ID","type":"string"},"policy_filter":{"$ref":"#/components/schemas/PolicyFilterDefinition"},"policy_filter_v2":{"$ref":"#/components/schemas/PolicyFilterDefinitionV2"},"state":{"description":"规则状态","type":"string"},"tags":{"items":{"$ref":"#/components/schemas/ResourceTag"},"type":"array"},"target_id":{"description":"修正执行的目标id。","type":"string"},"target_type":{"description":"合规规则修正方式。","type":"string"},"updated":{"description":"规则更新时间","type":"string"}},"type":"object"},"PolicyAssignmentComplianceSummary":{"description":"规则合规总结","properties":{"compliance_state":{"description":"规则合规状态","type":"string"},"policy_assignment":{"$ref":"#/components/schemas/PolicyAssignment"},"results":{"$ref":"#/components/schemas/PolicyComplianceSummaryResults"}},"type":"object"},"PolicyComplianceSummaryResults":{"description":"合规总结结果","properties":{"assignment_details":{"$ref":"#/components/schemas/PolicyComplianceSummaryUnit"},"resource_details":{"$ref":"#/components/schemas/PolicyComplianceSummaryUnit"}},"type":"object"},"PolicyComplianceSummaryUnit":{"description":"规则总结详情","properties":{"compliant_count":{"description":"合规数量","type":"integer"},"non_compliant_count":{"description":"不合规数量","type":"integer"}},"type":"object"},"PolicyFilterDefinition":{"description":"规则过滤器","properties":{"region_id":{"description":"区域ID","maxLength":128,"type":"string"},"resource_id":{"description":"资源ID","maxLength":512,"type":"string"},"resource_provider":{"description":"云服务名称","maxLength":128,"type":"string"},"resource_type":{"description":"资源类型","maxLength":128,"type":"string"},"tag_key":{"description":"标签键","maxLength":128,"type":"string"},"tag_value":{"description":"标签值","maxLength":256,"type":"string"}},"type":"object"},"PolicyFilterDefinitionV2":{"description":"规则过滤器","properties":{"exclude_tag_key_logic":{"default":"OR","description":"参数exclude_tags的取值逻辑,例如exclude_tags设置了a:a和b:b,当取值AND时,表示规则仅对同时绑定了a:a和b:b的资源生效;当取值为OR时,表示规则对任何绑定了a:a或b:b的资源生效。","enum":["AND","OR"],"type":"string"},"exclude_tags":{"description":"排除标签列表,排除标签列表比生效标签列表有更高的优先级","items":{"$ref":"#/components/schemas/FilterTagDetail"},"type":"array"},"region_ids":{"description":"区域ID列表","items":{"description":"区域ID","type":"string"},"type":"array"},"resource_ids":{"description":"资源ID列表","items":{"description":"资源ID","type":"string"},"type":"array"},"resource_types":{"description":"云服务列表","items":{"description":"云服务类型,例如iam.users","type":"string"},"type":"array"},"tag_key_logic":{"default":"OR","description":"参数tags的取值逻辑,例如tags设置了a:a和b:b,当取值AND时,表示规则仅对同时绑定了a:a和b:b的资源生效;当取值为OR时,表示规则对任何绑定了a:a或b:b的资源生效。","enum":["AND","OR"],"type":"string"},"tags":{"description":"生效标签列表","items":{"$ref":"#/components/schemas/FilterTagDetail"},"type":"array"}},"type":"object"},"PolicyParameterValue":{"description":"规则参数值","properties":{"value":{"description":"规则参数值","type":"object"}},"type":"object"},"ResourceTag":{"nullable":false,"properties":{"key":{"description":"键。最大长度128个unicode字符。 key符合3.1 KEY字符集规范。","maxLength":128,"minLength":1,"nullable":false,"pattern":"^((?!\\s)(?!_sys_)[\\p{L}\\p{Z}\\p{N}_.:=+\\-@]*)(?<!\\s)$","type":"string"},"value":{"description":"值。每个值最大长度255个unicode字符。value符合3.2 VALUE字符集规范。","maxLength":255,"minLength":0,"nullable":false,"pattern":"^([\\p{L}\\p{Z}\\p{N}_.:\\/=+\\-@]*)$","type":"string"}},"required":["key","value"],"type":"object"}}},"consumes":"","definitions":null,"description":null,"group_id":"cad6b80b035b41d09866cb93e54bff47","host":"rms.myhuaweicloud.com","id":"7d29e1a03f6e4f5d82746acde9717483","info_version":"v1","method":"get","name":"CollectPolicyAssignmentsStatesSummary","parameters":null,"paths":{"/v1/resource-manager/domains/{domain_id}/policy-assignments/{policy_assignment_id}/policy-states/summary":{"get":{"description":"根据规则ID查询此规则的合规总结","operationId":"CollectPolicyAssignmentsStatesSummary","parameters":[{"$ref":"#/components/parameters/DomainId"},{"$ref":"#/components/parameters/PolicyAssignmentId"},{"$ref":"#/components/parameters/ResourceNameQuery"}],"responses":{"200":{"content":{"application/json":{"example":{"compliance_state":"NonCompliant","policy_assignment":{"created":"2025-06-17T07:49:38.717Z","created_by":"ServiceLinkedAgencyForRMSConforms","custom_policy":null,"description":"配置变更:帐号下的所有CTS追踪器未追踪指定的OBS桶,视为“不合规”","id":"68511e12374e70675172b9c1","name":"cts-obs-bucket-track2-Q2E4Mw","parameters":{"trackBucket":{"value":"rms"}},"period":"TwentyFour_Hours","policy_assignment_type":"builtin","policy_definition_id":"77982d0e4e8954e37d0f6919","policy_filter":{"region_id":null,"resource_id":null,"resource_provider":null,"resource_type":null,"tag_key":null,"tag_value":null},"policy_filter_v2":null,"state":"Enabled","tags":[{"key":"AAA","value":"AAA"}],"target_id":null,"target_type":null,"updated":"2025-06-17T07:49:38.717Z"},"results":{"assignment_details":null,"resource_details":{"compliant_count":0,"non_compliant_count":1}}},"schema":{"$ref":"#/components/schemas/PolicyAssignmentComplianceSummary"}}},"description":"操作成功。"},"400":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorResp"}}},"description":"输入参数不合法。"},"403":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorResp"}}},"description":"用户认证失败或没有操作权限。"},"404":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorResp"}}},"description":"资源未找到。"},"500":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorResp"}}},"description":"服务器内部错误。"}},"security":[{"PkiTokenAuth":[]}],"summary":"查询规则的合规总结","tags":["Policy"],"x-is-registered":"Y","x-support-sdk":"Y"}}},"product_short":"Config","region_id":"cn-north-4","schemes":["HTTPS"],"security_definitions":null,"summary":"查询规则的合规总结","tags":"合规性","uri":null,"version":"3.0.0"}