{"base_path":null,"components":{"parameters":{"AuthToken":{"description":"用户Token。\n获取Token,请参考《统一身份认证服务API参考》的“获取用户Token”章节。请求响应成功后在响应消息头中包含的“X-Subject-Token”的值即为Token值。","in":"header","name":"X-Auth-Token","required":true,"schema":{"type":"string"}},"DomainId":{"description":"帐号ID","in":"path","name":"domain_id","required":true,"schema":{"maxLength":36,"pattern":"[\\w-]+","type":"string"}}},"schemas":{"ConformancePack":{"description":"合规规则包详情。","properties":{"agency_name":{"description":"委托名称","type":"string"},"created_at":{"description":"合规规则包创建时间。","type":"string"},"created_by":{"description":"创建者","type":"string"},"deployment_id":{"description":"部署ID。","type":"string"},"error_message":{"description":"部署或删除合规规则包错误时的错误信息","type":"string"},"id":{"description":"合规规则包ID。","type":"string"},"name":{"description":"合规规则包名称。","type":"string"},"stack_id":{"description":"资源栈(stack)的唯一ID。","maxLength":64,"minLength":1,"type":"string"},"stack_name":{"description":"资源栈(stack)的名称。","maxLength":256,"minLength":1,"pattern":"^(?!\\s)[\\u4e00-\\u9fa5\\u00C0-\\u00FFa-zA-Z0-9_\\- ]+(?<!\\s)$","type":"string"},"status":{"description":"合规规则包部署状态。","enum":["CREATE_SUCCESSFUL","CREATE_IN_PROGRESS","CREATE_FAILED","DELETE_IN_PROGRESS","DELETE_FAILED","ROLLBACK_SUCCESSFUL","ROLLBACK_IN_PROGRESS","ROLLBACK_FAILED","UPDATE_SUCCESSFUL","UPDATE_IN_PROGRESS","UPDATE_FAILED"],"type":"string"},"template_key":{"description":"预定义合规规则包模板名称。","type":"string"},"template_uri":{"description":"合规规则包模板OBS地址","type":"string"},"updated_at":{"description":"合规规则包更新时间。","type":"string"},"vars_structure":{"description":"合规规则包参数。","items":{"$ref":"#/components/schemas/VarsStructure"},"type":"array"}},"type":"object"},"ConformancePackRequestBody":{"description":"创建合规规则包的请求体。","properties":{"agency_name":{"description":"委托名称,该委托需要授权云服务ResourceFormation调用Config服务的合规规则的创建、更新、删除接口。","maxLength":64,"minLength":0,"type":"string"},"name":{"description":"合规规则包名称。","maxLength":256,"minLength":1,"pattern":"^(?!\\s)[\\u4e00-\\u9fa5\\u00C0-\\u00FFa-zA-Z0-9_\\- ]+(?<!\\s)$","type":"string"},"template_body":{"description":"自定义合规包内容。","maxLength":51200,"minLength":1,"type":"string"},"template_key":{"description":"预定义合规包模板名称。","maxLength":128,"pattern":"^[a-zA-Z0-9_.\\-]{0,128}","type":"string"},"template_uri":{"description":"合规包模板OBS地址。","maxLength":1024,"minLength":0,"type":"string"},"vars_structure":{"description":"合规规则包参数。","items":{"$ref":"#/components/schemas/VarsStructure"},"maxItems":50,"minItems":0,"type":"array"}},"required":["name"],"type":"object"},"ErrorResp":{"description":"异常错误","properties":{"error_code":{"description":"错误码","type":"string"},"error_msg":{"description":"错误消息内容","type":"string"}},"type":"object"},"VarsStructure":{"description":"合规包模版参数。","properties":{"var_key":{"description":"参数名称。","maxLength":64,"minLength":1,"pattern":"^[A-Za-z][\\w-]*$","type":"string"},"var_value":{"description":"参数的值。","type":"object"}},"type":"object"}}},"consumes":"","definitions":null,"description":null,"group_id":"cad6b80b035b41d09866cb93e54bff47","host":"rms.myhuaweicloud.com","id":"4238830fb551484ea13d3a4c13bbed99","info_version":"v1","method":"post","name":"CreateConformancePack","parameters":null,"paths":{"/v1/resource-manager/domains/{domain_id}/conformance-packs":{"post":{"description":"创建新的合规规则包。","operationId":"CreateConformancePack","parameters":[{"$ref":"#/components/parameters/AuthToken"},{"$ref":"#/components/parameters/DomainId"},{"description":"合规包信息语言,默认为\"en-us\"英文","in":"header","name":"X-Language","required":false,"schema":{"default":"en-us","enum":["zh-cn","en-us"],"type":"string"}}],"requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ConformancePackRequestBody"}}},"required":true},"responses":{"200":{"content":{"application/json":{"example":{"created_at":"2023-02-28T09:39:19Z","deployment_id":"deployment_id_1234","error_message":"policy assignments exceed quota","id":"a0123456789","name":"conformance_pack_name-e35r","stack_id":"stack-id-1234","stack_name":"stack-name-1234","status":"CREATE_FAILED","updated_at":"2023-02-28T09:39:19Z","vars_structure":[{"var_key":"test","var_value":"test"}]},"schema":{"$ref":"#/components/schemas/ConformancePack"}}},"description":"操作成功。"},"400":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorResp"}}},"description":"输入参数不合法。"},"403":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorResp"}}},"description":"用户身份认证失败。"},"500":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorResp"}}},"description":"服务器内部错误。"}},"summary":"创建合规规则包","tags":["ConformancePack"],"x-is-registered":"Y","x-request-examples-1":{"agency_name":"config_conformance_pack_template","name":"conformance_pack_name","template_body":null,"template_key":"example-001.yaml","template_uri":null,"vars_structure":[{"var_key":"test","var_value":"test"}]},"x-request-examples-description-1":"根据预定义模板创建一个合规规则包。","x-request-examples-url-1":"POST https://{endpoint}/v1/resource-manager/domains/{domain_id}/conformance-packs","x-support-sdk":"Y"}}},"product_short":"Config","region_id":"cn-north-4","schemes":["HTTPS"],"security_definitions":null,"summary":"创建合规规则包","tags":"合规规则包","uri":null,"version":"3.0.0"}