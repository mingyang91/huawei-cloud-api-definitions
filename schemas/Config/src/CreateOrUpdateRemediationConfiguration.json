{"base_path":null,"components":{"parameters":{"DomainId":{"description":"帐号ID","in":"path","name":"domain_id","required":true,"schema":{"maxLength":36,"pattern":"[\\w-]+","type":"string"}},"PolicyAssignmentId":{"description":"规则ID","in":"path","name":"policy_assignment_id","required":true,"schema":{"maxLength":36,"pattern":"[\\w-]+","type":"string"}}},"schemas":{"ErrorResp":{"description":"异常错误","properties":{"error_code":{"description":"错误码","type":"string"},"error_msg":{"description":"错误消息内容","type":"string"}},"type":"object"},"RemediationConfigurationRequestBody":{"description":"合规规则修正配置的请求体。","properties":{"auth_type":{"description":"合规规则修正配置的权限方式。","enum":["agency","trustAgency"],"type":"string"},"auth_value":{"description":"合规规则修正配置的权限信息。","maxLength":512,"type":"string"},"automatic":{"default":false,"description":"是否为自动修正。","type":"boolean"},"maximum_attempts":{"default":5,"description":"指定时间内修正的最大尝试次数。","maximum":25,"minimum":1,"type":"integer"},"resource_parameter":{"$ref":"#/components/schemas/RemediationResourceParameter"},"retry_attempt_seconds":{"default":3600,"description":"用于防止循环修正的时间窗口,如果在指定时间内进行了自动修正的最大尝试次数,则将资源添加至修正例外。","maximum":43200,"minimum":60,"type":"integer"},"static_parameter":{"description":"修正执行的静态参数。","items":{"$ref":"#/components/schemas/RemediationStaticParameter"},"maxItems":50,"minItems":0,"type":"array"},"target_id":{"description":"修正执行的目标ID。如果修正方式为fgs,则该值为函数工作流的函数urn;如果修正方式为rfs,则该值为资源编排服务的模板name与版本号,两者以/分割,如果没有指定默认V1。","maxLength":512,"type":"string"},"target_type":{"description":"合规规则修正执行的方式。","enum":["fgs","rfs"],"type":"string"}},"required":["target_type","target_id","resource_parameter"],"type":"object"},"RemediationConfigurationResponse":{"description":"合规规则修正配置详情。","properties":{"auth_type":{"description":"合规规则修正配置的权限方式。","type":"string"},"auth_value":{"description":"合规规则修正配置的权限信息。","maxLength":512,"type":"string"},"automatic":{"description":"是否为自动修正。","type":"boolean"},"created_at":{"description":"修正配置的创建时间。","type":"string"},"created_by":{"description":"创建者。","type":"string"},"maximum_attempts":{"default":5,"description":"指定时间内修正的最大尝试次数。","maximum":25,"minimum":1,"type":"integer"},"resource_parameter":{"$ref":"#/components/schemas/RemediationResourceParameter"},"retry_attempt_seconds":{"default":60,"description":"用于防止循环修正的时间窗口,如果在指定时间内进行了自动修正的最大尝试次数,则将资源添加至修正例外。","maximum":3600,"minimum":60,"type":"integer"},"static_parameter":{"description":"修正执行的参数。","items":{"$ref":"#/components/schemas/RemediationStaticParameter"},"maxItems":50,"minItems":0,"type":"array"},"target_id":{"description":"修正执行的目标ID。如果修正方式为fgs,则该值为函数工作流的函数urn;如果修正方式为rfs,则该值为资源编排服务的模板name与版本号,两者以/分割,如果没有指定默认V1。","maxLength":512,"type":"string"},"target_type":{"description":"合规规则修正执行的方式。","type":"string"},"updated_at":{"description":"修正配置的更新时间。","type":"string"}},"type":"object"},"RemediationResourceParameter":{"description":"合规规则修正执行的动态参数。","properties":{"resource_id":{"description":"传入resourceID的参数名称。","maxLength":64,"minLength":1,"pattern":"^[A-Za-z][\\w-]*$","type":"string"}},"required":["resource_id"],"type":"object"},"RemediationStaticParameter":{"description":"合规规则修正执行的静态参数。","properties":{"var_key":{"description":"参数名称。","maxLength":64,"minLength":1,"pattern":"^[A-Za-z][\\w-]*$","type":"string"},"var_value":{"description":"参数的值。","type":"object"}},"type":"object"}}},"consumes":"","definitions":null,"description":null,"group_id":"cad6b80b035b41d09866cb93e54bff47","host":"rms.myhuaweicloud.com","id":"2c38c0b3bc7c4b26b11bcb1a133e0f83","info_version":"v1","method":"put","name":"CreateOrUpdateRemediationConfiguration","parameters":null,"paths":{"/v1/resource-manager/domains/{domain_id}/policy-assignments/{policy_assignment_id}/remediation-configuration":{"put":{"description":"创建或更新合规规则修正配置。","operationId":"CreateOrUpdateRemediationConfiguration","parameters":[{"$ref":"#/components/parameters/DomainId"},{"$ref":"#/components/parameters/PolicyAssignmentId"}],"requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/RemediationConfigurationRequestBody"}}},"required":true},"responses":{"200":{"content":{"application/json":{"example":{"auth_type":"agency","auth_value":"agency_for_remediation","automatic":false,"created_at":"2024-01-17T09:39:19Z","created_by":"custom","maximum_attempts":5,"resource_parameter":[{"resource_id":"file_prefix"}],"retry_attempt_seconds":60,"static_parameter":[{"var_key":"kms_id","var_value":"kms12345678"}],"target_id":"urn:fss:region_id:project_id:function:default:function_name:latest","target_type":"fgs","updated_at":"2024-01-17T09:39:19Z"},"schema":{"$ref":"#/components/schemas/RemediationConfigurationResponse"}}},"description":"操作成功。"},"400":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorResp"}}},"description":"输入参数不合法。"},"403":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorResp"}}},"description":"用户身份认证失败。"},"404":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorResp"}}},"description":"资源未找到"},"500":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorResp"}}},"description":"服务器内部错误。"}},"summary":"创建或更新修正配置","tags":["Policy"],"x-is-registered":"Y","x-open-region-cloud":"hc,hk","x-request-examples-1":{"auth_type":"agency","auth_value":"agency_for_remediation","automatic":false,"maximum_attempts":5,"resource_parameter":[{"resource_id":"file_prefix"}],"retry_attempt_seconds":60,"static_parameter":[{"var_key":"kms_id","var_value":"kms12345678"}],"target_id":"urn:fss:region_id:project_id:function:default:function_name:latest","target_type":"fgs"},"x-request-examples-description-1":"创建合规规则修正配置","x-request-examples-url-1":"PUT https://{endpoint}/v1/resource-manager/domains/{domain_id}/policy-assignments/{policy_assignment_id}/remediation-configuration","x-support-sdk":"Y"}}},"product_short":"Config","region_id":"cn-north-4","schemes":["HTTPS"],"security_definitions":null,"summary":"创建或更新修正配置","tags":"合规性","uri":null,"version":"3.0.0"}