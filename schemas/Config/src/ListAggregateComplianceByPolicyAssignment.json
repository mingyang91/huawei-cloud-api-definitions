{"base_path":null,"components":{"parameters":{"AuthToken":{"description":"用户Token。\n获取Token,请参考《统一身份认证服务API参考》的“获取用户Token”章节。请求响应成功后在响应消息头中包含的“X-Subject-Token”的值即为Token值。","in":"header","name":"X-Auth-Token","required":true,"schema":{"type":"string"}},"DomainId":{"description":"帐号ID","in":"path","name":"domain_id","required":true,"schema":{"maxLength":36,"pattern":"[\\w-]+","type":"string"}},"Limit":{"description":"最大的返回数量","in":"query","name":"limit","required":false,"schema":{"default":200,"format":"int32","maximum":200,"minimum":1,"type":"integer"}},"Marker":{"description":"分页参数,通过上一个请求中返回的marker信息作为输入,获取当前页","in":"query","name":"marker","required":false,"schema":{"maxLength":400,"minLength":4,"pattern":"[A-Za-z0-9+/=%\\-_]+","type":"string"}}},"schemas":{"AggregatePolicyAssignments":{"description":"聚合合规规则。","properties":{"account_id":{"description":"源帐号ID。","type":"string"},"account_name":{"description":"帐户名称","type":"string"},"compliance":{"$ref":"#/components/schemas/Compliance"},"policy_assignment_id":{"description":"合规规则ID","type":"string"},"policy_assignment_name":{"description":"合规规则名称","type":"string"}},"type":"object"},"AggregatePolicyAssignmentsFilters":{"description":"聚合合规规则过滤器。","properties":{"account_id":{"description":"源帐号ID。","maxLength":36,"minLength":1,"pattern":"[\\w-]+","type":"string"},"compliance_state":{"description":"合规结果。","enum":["NonCompliant","Compliant","NotStarted"],"type":"string"},"policy_assignment_name":{"description":"合规规则名称","maxLength":64,"pattern":"^[\\u4e00-\\u9fa5a-zA-Z0-9_\\-]+","type":"string"}},"type":"object"},"AggregatePolicyAssignmentsRequest":{"description":"聚合合规规则请求体","properties":{"aggregator_id":{"description":"资源聚合器ID","maxLength":256,"minLength":1,"pattern":"[\\w-]+","type":"string"},"filter":{"$ref":"#/components/schemas/AggregatePolicyAssignmentsFilters"}},"required":["aggregator_id"],"type":"object"},"AggregatePolicyAssignmentsResp":{"description":"聚合合规规则","properties":{"aggregate_policy_assignments":{"description":"聚合合规规则的列表。","items":{"$ref":"#/components/schemas/AggregatePolicyAssignments"},"type":"array"},"page_info":{"$ref":"#/components/schemas/PageInfo"}},"type":"object"},"Compliance":{"description":"合规规则合规性","properties":{"compliance_state":{"description":"合规结果。","type":"string"},"resource_details":{"$ref":"#/components/schemas/PolicyComplianceSummaryUnit"}},"type":"object"},"ErrorResp":{"description":"异常错误","properties":{"error_code":{"description":"错误码","type":"string"},"error_msg":{"description":"错误消息内容","type":"string"}},"type":"object"},"PageInfo":{"description":"分页对象","properties":{"current_count":{"description":"当前页的资源数量","format":"int32","maximum":200,"minimum":0,"type":"integer"},"next_marker":{"description":"下一页的marker","type":"string"}},"type":"object"},"PolicyComplianceSummaryUnit":{"description":"规则总结详情","properties":{"compliant_count":{"description":"合规数量","type":"integer"},"non_compliant_count":{"description":"不合规数量","type":"integer"}},"type":"object"}}},"consumes":"","definitions":null,"description":null,"group_id":"cad6b80b035b41d09866cb93e54bff47","host":"rms.myhuaweicloud.com","id":"e98fd6824ad44c74b542575c6f6b479e","info_version":"v1","method":"post","name":"ListAggregateComplianceByPolicyAssignment","parameters":null,"paths":{"/v1/resource-manager/domains/{domain_id}/aggregators/aggregate-data/policy-assignments/compliance":{"post":{"description":"查询合规和不合规规则的列表,其中包含合规和不合规规则的资源数量。","operationId":"ListAggregateComplianceByPolicyAssignment","parameters":[{"$ref":"#/components/parameters/AuthToken"},{"$ref":"#/components/parameters/DomainId"},{"$ref":"#/components/parameters/Limit"},{"$ref":"#/components/parameters/Marker"}],"requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/AggregatePolicyAssignmentsRequest"}}},"description":"请求参数"},"responses":{"200":{"content":{"application/json":{"example":{"aggregate_policy_assignments":[{"account_id":"789d4ac10eda4d9b8e090f5c2b1e4459","account_name":"demo1","compliance":{"compliance_state":"Compliant","resource_details":{"compliant_count":18,"non_compliant_count":0}},"policy_assignment_id":"62bdbe5913c6836025b1e3af","policy_assignment_name":"volumes-encrypted-check"},{"account_id":"83240c3f2ec1465aaa0124c87810ce65","account_name":"demo1","compliance":{"compliance_state":"NonCompliant","resource_details":{"compliant_count":28,"non_compliant_count":2}},"policy_assignment_id":"631ea13f57e0427679a1794d","policy_assignment_name":"cts-lts-enable"}],"page_info":{"current_count":2,"next_marker":"CAESIDdjYTM0NDc4MzBiZDQ5YzliNjMwYTk5NjgwZWFmOTBmGgQ-0aw3"}},"schema":{"$ref":"#/components/schemas/AggregatePolicyAssignmentsResp"}}},"description":"操作成功。"},"400":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorResp"}}},"description":"输入参数不合法。"},"403":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorResp"}}},"description":"用户认证失败或无操作权限。"},"500":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorResp"}}},"description":"服务器内部错误。"}},"security":[{"AccessKeyAuth":[]}],"summary":"查询聚合合规规则列表","tags":["Aggregator"],"x-is-registered":"Y","x-open-region-cloud":"hws,hws_hk","x-order":16,"x-request-examples-1":{"aggregator_id":"7ca3447830bd49c9b630a99680eaf90f"},"x-request-examples-description-1":"查询聚合合规规则的列表","x-request-examples-url-1":"PUT https://{endpoint}/v1/resource-manager/domains/{domain_id}/aggregators/aggregate-data/policy-assignments/compliance","x-support-sdk":"Y"}}},"product_short":"Config","region_id":"cn-north-4","schemes":["HTTPS"],"security_definitions":null,"summary":"查询聚合合规规则列表","tags":"聚合器","uri":null,"version":"3.0.0"}