{"base_path":null,"components":{"parameters":{"DomainId":{"description":"帐号ID","in":"path","name":"domain_id","required":true,"schema":{"maxLength":36,"pattern":"[\\w-]+","type":"string"}},"Limit":{"description":"最大的返回数量","in":"query","name":"limit","required":false,"schema":{"default":200,"format":"int32","maximum":200,"minimum":1,"type":"integer"}},"Marker":{"description":"分页参数,通过上一个请求中返回的marker信息作为输入,获取当前页","in":"query","name":"marker","required":false,"schema":{"maxLength":400,"minLength":4,"pattern":"[A-Za-z0-9+/=%\\-_]+","type":"string"}},"ResourceIdQuery":{"description":"资源ID","in":"query","name":"resource_id","required":false,"schema":{"maxLength":512,"pattern":"[_.:\\w-]+","type":"string"}},"ResourceNameQuery":{"description":"资源名称","in":"query","name":"resource_name","required":false,"schema":{"maxLength":256,"pattern":"[^']+","type":"string"}}},"schemas":{"ErrorResp":{"description":"异常错误","properties":{"error_code":{"description":"错误码","type":"string"},"error_msg":{"description":"错误消息内容","type":"string"}},"type":"object"},"PageInfo":{"description":"分页对象","properties":{"current_count":{"description":"当前页的资源数量","format":"int32","maximum":200,"minimum":0,"type":"integer"},"next_marker":{"description":"下一页的marker","type":"string"}},"type":"object"},"PolicyComplianceSummaryResults":{"description":"合规总结结果","properties":{"assignment_details":{"$ref":"#/components/schemas/PolicyComplianceSummaryUnit"},"resource_details":{"$ref":"#/components/schemas/PolicyComplianceSummaryUnit"}},"type":"object"},"PolicyComplianceSummaryUnit":{"description":"规则总结详情","properties":{"compliant_count":{"description":"合规数量","type":"integer"},"non_compliant_count":{"description":"不合规数量","type":"integer"}},"type":"object"},"PolicyResource":{"description":"资源","properties":{"domain_id":{"description":"资源所属用户ID","type":"string"},"region_id":{"description":"区域id","type":"string"},"resource_id":{"description":"资源id","readOnly":true,"type":"string"},"resource_name":{"description":"资源名称","type":"string"},"resource_provider":{"description":"云服务名称","type":"string"},"resource_type":{"description":"资源类型","readOnly":true,"type":"string"}},"type":"object"},"PolicyResourceComplianceSummary":{"description":"资源合规总结","properties":{"compliance_state":{"description":"规则合规状态","type":"string"},"resource":{"$ref":"#/components/schemas/PolicyResource"},"results":{"$ref":"#/components/schemas/PolicyComplianceSummaryResults"}},"type":"object"},"PolicyResourcesComplianceSummary":{"description":"资源合规总结查询返回","properties":{"page_info":{"$ref":"#/components/schemas/PageInfo"},"value":{"description":"合规结果查询返回值","items":{"$ref":"#/components/schemas/PolicyResourceComplianceSummary"},"type":"array"}},"type":"object"}}},"consumes":"","definitions":null,"description":null,"group_id":"cad6b80b035b41d09866cb93e54bff47","host":"rms.myhuaweicloud.com","id":"2e297868533c4d3dba16d9be5b10ce80","info_version":"v1","method":"get","name":"CollectResourcesPolicyStatesSummary","parameters":null,"paths":{"/v1/resource-manager/domains/{domain_id}/resources/policy-states/summary":{"get":{"description":"查询用户资源的合规总结","operationId":"CollectResourcesPolicyStatesSummary","parameters":[{"$ref":"#/components/parameters/DomainId"},{"$ref":"#/components/parameters/ResourceIdQuery"},{"$ref":"#/components/parameters/ResourceNameQuery"},{"$ref":"#/components/parameters/Limit"},{"$ref":"#/components/parameters/Marker"}],"responses":{"200":{"content":{"application/json":{"example":{"page_info":{"current_count":1,"next_marker":null},"value":[{"compliance_state":"NonCompliant","resource":{"domain_id":"e74e043fab784a45ad88f5ef6a4bcffc","region_id":"global","resource_id":"011414082b134059b1c5eafe0697cd15","resource_name":"ServiceLinkedAgencyForSecMaster","resource_provider":"iam","resource_type":"agencies"},"results":{"assignment_details":{"compliant_count":null,"non_compliant_count":1},"resource_details":null}}]},"schema":{"$ref":"#/components/schemas/PolicyResourcesComplianceSummary"}}},"description":"操作成功。"},"400":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorResp"}}},"description":"输入参数不合法。"},"403":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorResp"}}},"description":"认证失败或没有操作权限。"},"404":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorResp"}}},"description":"资源未找到。"},"500":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorResp"}}},"description":"服务器内部错误。"}},"security":[{"PkiTokenAuth":[]}],"summary":"查询用户资源的合规总结","tags":["Policy"],"x-is-registered":"Y","x-support-sdk":"Y"}}},"product_short":"Config","region_id":"cn-north-4","schemes":["HTTPS"],"security_definitions":null,"summary":"查询用户资源的合规总结","tags":"合规性","uri":null,"version":"3.0.0"}