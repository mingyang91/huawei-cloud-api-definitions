{"base_path":null,"components":{"parameters":{"AuthToken":{"description":"用户Token。\n获取Token,请参考《统一身份认证服务API参考》的“获取用户Token”章节。请求响应成功后在响应消息头中包含的“X-Subject-Token”的值即为Token值。","in":"header","name":"X-Auth-Token","required":true,"schema":{"type":"string"}},"DomainId":{"description":"帐号ID","in":"path","name":"domain_id","required":true,"schema":{"maxLength":36,"pattern":"[\\w-]+","type":"string"}}},"schemas":{"ChannelConfigBody":{"description":"tracker通道配置","properties":{"obs":{"$ref":"#/components/schemas/TrackerOBSChannelConfigBody"},"smn":{"$ref":"#/components/schemas/TrackerSMNChannelConfigBody"}},"type":"object"},"ErrorResp":{"description":"异常错误","properties":{"error_code":{"description":"错误码","type":"string"},"error_msg":{"description":"错误消息内容","type":"string"}},"type":"object"},"FrozenStatus":{"description":"资源记录器冻结状态","properties":{"frozen_scene":{"description":"冻结场景","items":{"description":"冻结场景","type":"string"},"type":"array"},"is_frozen":{"description":"是否冻结","type":"boolean"}},"type":"object"},"SelectorConfigBody":{"description":"tracker选择器","properties":{"all_supported":{"description":"是否选择所有支持的资源","type":"boolean"},"resource_types":{"description":"资源类型列表","items":{"description":"资源类型","type":"string"},"type":"array"}},"required":["all_supported","resource_types"],"type":"object"},"TrackerConfigBody":{"description":"TrackerConfig对象","properties":{"agency_name":{"description":"IAM委托名称","type":"string"},"channel":{"$ref":"#/components/schemas/ChannelConfigBody"},"domain_id":{"description":"账号ID","type":"string"},"frozen_status":{"$ref":"#/components/schemas/FrozenStatus"},"retention_period_in_days":{"description":"存储历史信息的天数","type":"integer"},"selector":{"$ref":"#/components/schemas/SelectorConfigBody"}},"required":["channel","selector","agency_name"],"type":"object"},"TrackerOBSChannelConfigBody":{"description":"OBS设置对象。跨帐号授予OBS桶转储文件的权限请参考《用户指南- 资源记录器- 开启/配置/修改资源记录器》中的“跨帐号授权”内容。","properties":{"bucket_name":{"description":"OBS桶名称","maxLength":63,"pattern":"[a-z0-9\\-.]{3,63}","type":"string"},"bucket_prefix":{"description":"OBS桶前缀","maxLength":256,"pattern":"^[a-zA-Z0-9_]+(/([a-zA-Z0-9_]+))*$","type":"string"},"region_id":{"description":"区域id","type":"string"}},"required":["bucket_name","region_id"],"type":"object"},"TrackerSMNChannelConfigBody":{"description":"SMN通道设置对象。跨帐号授予SMN主题发送通知的权限请参考《用户指南- 资源记录器- 开启/配置/修改资源记录器》中的“跨帐号授权”内容。","properties":{"project_id":{"description":"创建或更新资源记录器用户的项目id","type":"string"},"region_id":{"description":"SMN主题的区域id","type":"string"},"topic_urn":{"description":"SMN主题urn","type":"string"}},"required":["region_id","project_id","topic_urn"],"type":"object"}}},"consumes":"","definitions":null,"description":null,"group_id":"cad6b80b035b41d09866cb93e54bff47","host":"rms.myhuaweicloud.com","id":"401637628cca45ec8e3e42a0214fb894","info_version":"v1","method":"put","name":"CreateTrackerConfig","parameters":null,"paths":{"/v1/resource-manager/domains/{domain_id}/tracker-config":{"put":{"description":"创建或更新资源记录器,只能存在一个资源记录器","operationId":"CreateTrackerConfig","parameters":[{"$ref":"#/components/parameters/AuthToken"},{"$ref":"#/components/parameters/DomainId"}],"requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/TrackerConfigBody"}}},"description":"Tracker对象"},"responses":{"200":{"description":"操作成功"},"400":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorResp"}}},"description":"输入参数不合法"},"403":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorResp"}}},"description":"用户认证失败,或没有操作权限"},"404":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorResp"}}},"description":"资源未找到"},"500":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorResp"}}},"description":"服务器内部错误"}},"security":[{"PkiTokenAuth":[]}],"summary":"创建或更新记录器","tags":["Tracker"],"x-is-registered":"Y","x-publishpath":"rms_04_0203","x-request-examples-1":{"agency_name":"rms_tracker_agency","channel":{"obs":{"bucket_name":"rms-snapshot","region_id":"cn-north-4"},"smn":{"project_id":"39c2af998c334ed6bcbb75b27318f7b5","region_id":"cn-north-4","topic_urn":"urn:smn:cn-north-4:39c2af998c334ed6bcbb75b27318f7b5:resource-manager-test"}},"selector":{"all_supported":true}},"x-request-examples-description-1":"创建资源记录器,并开启消息推送与转储","x-request-examples-url-1":"PUT /v1/resource-manager/domains/{domain_id}/tracker-config","x-support-sdk":"Y"}}},"product_short":"Config","region_id":"cn-north-4","schemes":["HTTPS"],"security_definitions":null,"summary":"创建或更新记录器","tags":"资源记录器","uri":null,"version":"3.0.0"}