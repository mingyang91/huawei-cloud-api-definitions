{"base_path":null,"components":{"parameters":{"AuthToken":{"description":"用户Token。\n获取Token,请参考《统一身份认证服务API参考》的“获取用户Token”章节。请求响应成功后在响应消息头中包含的“X-Subject-Token”的值即为Token值。","in":"header","name":"X-Auth-Token","required":true,"schema":{"type":"string"}},"DomainId":{"description":"帐号ID","in":"path","name":"domain_id","required":true,"schema":{"maxLength":36,"pattern":"[\\w-]+","type":"string"}},"Limit":{"description":"最大的返回数量","in":"query","name":"limit","required":false,"schema":{"default":200,"format":"int32","maximum":200,"minimum":1,"type":"integer"}},"Marker":{"description":"分页参数,通过上一个请求中返回的marker信息作为输入,获取当前页","in":"query","name":"marker","required":false,"schema":{"maxLength":400,"minLength":4,"pattern":"[A-Za-z0-9+/=%\\-_]+","type":"string"}}},"schemas":{"AggregateComplianceDetailRequest":{"description":"查询指定聚合合规规则评估结果详情请求体。","properties":{"account_id":{"description":"源帐号ID","maxLength":36,"minLength":1,"pattern":"[\\w-]+","type":"string"},"aggregator_id":{"description":"资源聚合器ID","maxLength":256,"minLength":1,"pattern":"[\\w-]+","type":"string"},"compliance_state":{"description":"合规结果。","enum":["NonCompliant","Compliant"],"type":"string"},"policy_assignment_name":{"description":"合规规则名称","maxLength":256,"pattern":"^(?!\\s)[\\u4e00-\\u9fa5\\u00C0-\\u00FFa-zA-Z0-9_\\- ]+(?<!\\s)$","type":"string"},"resource_id":{"description":"资源ID","maxLength":512,"minLength":1,"pattern":"[_.:\\w-]+","type":"string"},"resource_name":{"description":"资源名称","maxLength":256,"minLength":1,"pattern":"[^']+","type":"string"}},"required":["aggregator_id"],"type":"object"},"AggregatePolicyStatesQueryResults":{"description":"合规结果查询返回","properties":{"page_info":{"$ref":"#/components/schemas/PageInfo"},"policy_states":{"description":"合规结果查询返回值","items":{"$ref":"#/components/schemas/PolicyState"},"type":"array"}},"type":"object"},"ErrorResp":{"description":"异常错误","properties":{"error_code":{"description":"错误码","type":"string"},"error_msg":{"description":"错误消息内容","type":"string"}},"type":"object"},"PageInfo":{"description":"分页对象","properties":{"current_count":{"description":"当前页的资源数量","format":"int32","maximum":200,"minimum":0,"type":"integer"},"next_marker":{"description":"下一页的marker","type":"string"}},"type":"object"},"PolicyState":{"description":"合规状态","properties":{"compliance_state":{"description":"合规状态","type":"string"},"domain_id":{"description":"用户ID","type":"string"},"evaluation_time":{"description":"合规状态评估时间","type":"string"},"policy_assignment_id":{"description":"规则ID","type":"string"},"policy_assignment_name":{"description":"规则名称","type":"string"},"policy_definition_id":{"description":"策略ID","type":"string"},"region_id":{"description":"资源区域ID","type":"string"},"resource_id":{"description":"资源ID","type":"string"},"resource_name":{"description":"资源名称","type":"string"},"resource_provider":{"description":"云服务名称","type":"string"},"resource_type":{"description":"资源类型","type":"string"},"trigger_type":{"description":"触发器类型,可选值:resource, period","type":"string"}},"type":"object"}}},"consumes":"","definitions":null,"description":null,"group_id":"cad6b80b035b41d09866cb93e54bff47","host":"rms.myhuaweicloud.com","id":"eb121b32d7a34408952c4ad953f85b3a","info_version":"v1","method":"post","name":"ShowAggregateComplianceDetailsByPolicyAssignment","parameters":null,"paths":{"/v1/resource-manager/domains/{domain_id}/aggregators/aggregate-data/policy-states/compliance-details":{"post":{"description":"返回指定聚合合规规则的评估结果详情。包含评估了哪些资源,以及每个资源是否符合规则。","operationId":"ShowAggregateComplianceDetailsByPolicyAssignment","parameters":[{"$ref":"#/components/parameters/AuthToken"},{"$ref":"#/components/parameters/DomainId"},{"$ref":"#/components/parameters/Limit"},{"$ref":"#/components/parameters/Marker"}],"requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/AggregateComplianceDetailRequest"}}},"description":"请求参数"},"responses":{"200":{"content":{"application/json":{"example":{"page_info":{"current_count":2,"next_marker":"CAESIDdjYTM0NDc4MzBiZDQ5YzliNjMwYTk5NjgwZWFmOTBmGgQ-0aw3"},"policy_states":[{"compliance_state":"NonCompliant","domain_id":"39f4a9434e0c4bf3806e5aff54adea39","evaluation_time":1678790655196,"policy_assignment_id":"64104fff86952b3af614cabb","policy_assignment_name":"required-tag-check","policy_definition_id":"5fa9f89b6eed194ccb2c04db","region_id":"region1","resource_id":"04d5a1a31c314ebba8c73daa66c6cd12","resource_name":"group1","resource_provider":"iam","resource_type":"groups","trigger_type":"resource"},{"compliance_state":"NonCompliant","domain_id":"39f4a9434e0c4bf3806e5aff54adea39","evaluation_time":1678790655197,"policy_assignment_id":"64104fff86952b3af614cabb","policy_assignment_name":"required-tag-check","policy_definition_id":"5fa9f89b6eed194ccb2c04db","region_id":"global","resource_id":"06c113bd3edf40eabc552d29a775b9cf","resource_name":"group2","resource_provider":"iam","resource_type":"groups","trigger_type":"resource"}]},"schema":{"$ref":"#/components/schemas/AggregatePolicyStatesQueryResults"}}},"description":"操作成功。"},"400":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorResp"}}},"description":"输入参数不合法。"},"403":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorResp"}}},"description":"用户认证失败或无操作权限。"},"500":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorResp"}}},"description":"服务器内部错误。"}},"security":[{"AccessKeyAuth":[]}],"summary":"查询指定聚合合规规则的评估结果详情","tags":["Aggregator"],"x-is-registered":"Y","x-open-region-cloud":"hws,hws_hk","x-order":17,"x-request-examples-1":{"account_id":"39f4a9434e0c4bf3806e5aff54adea39","aggregator_id":"7ca3447830bd49c9b630a99680eaf90f","policy_assignment_name":"required-tag-check"},"x-request-examples-description-1":"查询指定合规规则的评估结果详情","x-request-examples-url-1":"PUT https://{endpoint}/v1/resource-manager/domains/{domain_id}/aggregators/aggregate-data/policy-states/compliance-details","x-support-sdk":"Y"}}},"product_short":"Config","region_id":"cn-north-4","schemes":["HTTPS"],"security_definitions":null,"summary":"查询指定聚合合规规则的评估结果详情","tags":"聚合器","uri":null,"version":"3.0.0"}