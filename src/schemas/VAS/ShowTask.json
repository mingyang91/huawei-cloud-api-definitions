{"base_path":"/v2","components":null,"consumes":"","definitions":{"ErrorResponseBody":{"properties":{"error_code":{"description":"服务内部错误码","example":"IVA.0004","pattern":"^IVA.\\d{4}$","type":"string"},"error_msg":{"description":"错误信息","example":"The request param is invalid.","maxLength":4096,"minLength":0,"type":"string"}},"required":["error_code","error_msg"],"type":"object"},"ShowTaskResponseBody":{"allOf":[{"$ref":"#/definitions/TaskDetails"},{"$ref":"#/definitions/TaskHostingResult"}]},"TaskDetails":{"properties":{"created_at":{"description":"作业创建的时间","example":"2020-01-01T08:00:00Z","format":"date-time","type":"string"},"creator":{"description":"作业创建者的用户名","example":"user_test","pattern":"^.{1,100}$","type":"string"},"description":{"description":"作业的描述","example":"hello world!","maxLength":500,"minLength":0,"type":"string"},"edge_pool_id":{"description":"仅边缘作业会出现,作业运行所在的边缘运行池ID","example":"6be5aaxxxxxxxxxxxxxxxxxxxxde56ac","pattern":"^[0-9a-f]{32}|edgestreampool\\w{8}$","type":"string"},"error":{"description":"作业运行失败时收集到的错误信息","properties":{"code":{"description":"算法服务定义的错误码","example":"ALG.002","type":"string"},"message":{"description":"算法服务反馈的错误信息","example":"test","type":"string"}},"required":["code","message"],"type":"object"},"id":{"description":"作业ID","example":"839ceexxxxxxxxxxxxxxxxxxxx7dbd4f","pattern":"^[0-9a-f]{32}|task\\w{8}$","type":"string"},"input":{"$ref":"#/definitions/TaskInput"},"name":{"description":"作业的名称","example":"task-test","pattern":"^[\\u4E00-\\u9FA5a-zA-Z0-9_-]{1,100}$","type":"string"},"output":{"$ref":"#/definitions/TaskOutputForDisplay"},"project_id":{"description":"作业创建者的项目ID","example":"8deadcxxxxxxxxxxxxxxxxxxxx4b7249","pattern":"^[a-zA-Z0-9-]{1,64}$","type":"string"},"resource_order_id":{"description":"作业指定的算法能力包包周期订单ID","example":"da64bexxxxxxxxxxxxxxxxxxxxeca64f","pattern":"^[0-9a-f]{32}$","type":"string"},"service_config":{"$ref":"#/definitions/TaskServiceConfig"},"service_name":{"description":"作业对应服务的名称","maxLength":100,"minLength":2,"pattern":"^[a-z][a-z-]{0,98}[a-z]$","type":"string"},"service_title":{"description":"作业对应服务的标题","properties":{"en":{"description":"作业对应服务的英文标题","example":"Face Recognition","pattern":"^[a-zA-Z\\d_-][a-zA-Z\\s\\d_-]{0,98}[a-zA-Z\\d_-]$","type":"string"},"zh":{"description":"作业对应服务的中文标题","example":"人脸识别","pattern":"^[a-zA-Z\\d一-龥_-][a-zA-Z\\s\\d一-龥_-]{0,98}[a-zA-Z\\d一-龥_-]$","type":"string"}},"type":"object"},"service_version":{"description":"作业对应服务的版本号","example":"1.0","pattern":"^\\d{1,3}\\.\\d{1,3}$","type":"string"},"state":{"description":"作业当前的状态,分别为PENDING(等待中),RECOVERING(恢复中),STARTING(启动中),UPGRADING(升级中),CREATE_FAILED(创建失败),START_FAILED(启动失败),RUNNING(运行中),STOPPING(停止中),STOPPED(已停止),ABNORMAL(异常),SUCCEEDED(运行成功),FAILED(运行失败),DELETING(删除中),FREEZING(冻结中),FROZEN(已冻结)","enum":["PENDING","RECOVERING","STARTING","UPGRADING","CREATE_FAILED","START_FAILED","RUNNING","STOPPING","STOPPED","ABNORMAL","SUCCEEDED","FAILED","DELETING","FREEZING","FROZEN"],"example":"RUNNING","type":"string"},"status":{"description":"作业状态的详情信息,仅部分状态会有详情信息","example":"Waiting for available computing resource.","maxLength":4096,"minLength":0,"type":"string"},"timing":{"$ref":"#/definitions/TaskTiming"},"timing_status":{"description":"计划任务的状态,分别为ACTIVATED(激活),INACTIVATED(未激活)","enum":["ACTIVATED","INACTIVATED"],"example":"INACTIVATED","type":"string"},"updated_at":{"description":"作业最近一次状态更新的时间","example":"2020-01-01T08:00:00Z","format":"date-time","type":"string"}},"required":["id","name","creator","project_id","service_name","service_version","service_title","created_at","updated_at","state","input","output"],"type":"object"},"TaskHostingResult":{"description":"输出为hosting时,hosting结果文件的相关信息","properties":{"hosting_result":{"description":"hosting结果文件的相关信息","properties":{"data":{"description":"结果文件result.json的具体内容","example":"{}","maxLength":9223372036854775807,"minLength":0,"type":"string"},"file_size":{"description":"结果文件result.json的大小","example":"1024 bytes","maxLength":25,"minLength":0,"pattern":"^\\d+ byte(s)?$","type":"string"},"overdue_date":{"description":"结果文件result.json的过期时间","example":"2020-01-01T08:00:00Z","format":"date-time","type":"string"},"status":{"description":"结果文件result.json的状态","enum":["NOT_GENERATED","AVAILABLE","EXCEED_IN_SIZE","OVERDUE","DELETED_MISTAKENLY"],"example":"AVAILABLE","type":"string"}},"type":"object"}},"type":"object"},"TaskInput":{"description":"作业的输入配置,必填。","properties":{"data":{"description":"作业的输入详情,必填。针对不同的输入类型有不同的配置。创建时允许填写多路输入,但更新时只允许填写一路输入。","items":{"$ref":"#/definitions/TaskInputData"},"maxItems":50,"minItems":1,"type":"array"},"type":{"description":"作业的输入类型,必填。可选类型有obs(对象存储服务存储的文件),vis(视频接入服务的视频流),url(指定的文件地址或取流地址),edgecamera(绑定在IEF的边缘摄像头),edgerestful(从自定义的流媒体服务器通过Restful接口获取取流地址),vcn(VCN设备)。","enum":["obs","vis","url","edgecamera","edgerestful","vcn"],"example":"obs","type":"string"},"vcn":{"$ref":"#/definitions/TaskInputVcn"}},"required":["type","data"],"type":"object"},"TaskInputData":{"description":"输入数据的配置信息","properties":{"bucket":{"description":"OBS桶名,当输入为obs类型时必填。","example":"obs-iva","maxLength":63,"pattern":"^[a-z0-9](?!.*[-.][-.].*)([a-z0-9-.]{1,61})[a-z0-9]$","type":"string"},"certificate_check":{"description":"是否需要对https请求进行证书校验,当输入为edgerestful类型时必填。取值为true或者false。","example":false,"type":"boolean"},"device_id":{"description":"VCN设备ID,当输入为vcn类型时必填。","example":"46459876132169871364#abb6541c6d546c65ffee16ebaf5ce9ca","pattern":"^([0-9]{20}[#]{1}[a-zA-Z0-9]{32})|([0-9]{20}[#]{1}[0-9]{1,10}[#]{1}[a-zA-Z0-9]{32})$","type":"string"},"headers":{"description":"获取视频流地址的restful请求携带的请求头,当输入为edgerestful类型时可选。整体呈json格式,以键值对的形式表示请求头和取值,最多允许10组。","example":{"Content-Type":"application/json"},"maxProperties":10,"minProperties":1,"type":"object"},"id":{"description":"IEF挂载的边缘设备的ID,当输入为edgecamera类型时必填。","example":"dd8xxxxx-xxxx-xxxx-xxxx-xxxxxx2f5bcb","maxLength":63,"pattern":"^[a-zA-Z0-9][a-zA-Z0-9_-]{0,63}$","type":"string"},"node_id":{"description":"IEF节点的ID,仅部分服务在输入类型为edgerestful或vcn时需填且必填。","example":"841xxxxx-xxxx-xxxx-xxxx-xxxxxxf714fb","format":"uuid","pattern":"^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$","type":"string"},"path":{"description":"OBS的路径,当输入为obs类型时必填。","example":"/input/test.mp4","maxLength":1023,"pattern":"^(?![/.\\s])(?!.*//.*)([^:*?\"<>|\\\\]{0,1023})(?<![.\\s])$","type":"string"},"rtsp_path_in_response":{"description":"restful请求返回的body中,视频流地址的路径,当输入为edgerestful类型时必填。长度不超过1024。","example":"data/url","maxLength":1024,"pattern":"^([-A-Za-z0-9+&?=~_][-A-Za-z0-9+&/?=~_]+[-A-Za-z0-9+&/?=~_]|[A-Za-z]+)$","type":"string"},"stream_name":{"description":"VIS的视频流名称,当输入为vis类型时必填。","example":"stream-test","pattern":"^[-A-Za-z0-9_]{1,80}$","type":"string"},"stream_type":{"description":"准备进行分析的码流,当输入为vcn类型时选填。取值范围为1~3,其中1代表主码流,2代表子码流1,3代表子码流2。","example":1,"format":"int32","maximum":3,"minimum":1,"type":"integer"},"url":{"description":"url输入源的地址或者获取视频流地址的restful请求地址,当输入为url类型或者edgerestful类型时必填。长度不超过1000。","example":"https://livestream.com/live/stream-test","format":"uri","maxLength":1000,"pattern":"^(https?|rtsp|rtmp|ftp|file):\\/\\/[-A-Za-z0-9+&@*#/%?=~_|!:,.;]+[-A-Za-z0-9+&@*#/%=~_|]$","type":"string"}},"type":"object"},"TaskInputVcn":{"description":"VCN服务器信息,仅输入类型为vcn时需填且必填。","properties":{"ip":{"description":"VCN服务器的IP地址,仅输入类型为vcn时需填且必填。","example":"10.10.10.10","format":"ipv4","type":"string"},"password":{"description":"VCN服务器的与账号对应的密码,仅输入类型为vcn时需填且必填。","example":"password@test","format":"password","pattern":"^.{1,1000}$","type":"string"},"port":{"description":"VCN服务器的端口号,仅输入类型为vcn时需填且必填。","example":60,"format":"int32","maximum":65535,"minimum":0,"type":"integer"},"username":{"description":"VCN服务器的账号名,仅输入类型为vcn时需填且必填。","example":"user_test","pattern":"^.{1,100}$","type":"string"}},"required":["ip","port","username","password"],"type":"object"},"TaskOutputDis":{"description":"输出为dis类型时的配置信息","properties":{"data_category":{"description":"作业输出数据类别的列表,选填,仅部分服务需要。当输出类型下有这个列表时,表示希望这个输出类型下存放dataCategory列表内的数据。","example":["FaceImage"],"items":{"type":"string"},"maxItems":10,"minItems":0,"type":"array","uniqueItems":true},"stream_name":{"description":"DIS流名称,选用dis类型输出时必填。","example":"dis-test","maxLength":64,"pattern":"^[-A-Za-z0-9_]{1,64}$","type":"string"}},"required":["stream_name"],"type":"object"},"TaskOutputForDisplay":{"description":"作业的输出配置展示","maxProperties":5,"minProperties":1,"properties":{"dis":{"$ref":"#/definitions/TaskOutputDis"},"hosting":{"$ref":"#/definitions/TaskOutputHostingForDisplay"},"localpath":{"$ref":"#/definitions/TaskOutputLocalpath"},"obs":{"$ref":"#/definitions/TaskOutputObs"},"webhook":{"$ref":"#/definitions/TaskOutputWebhook"}},"type":"object"},"TaskOutputHostingForDisplay":{"description":"输出为hosting类型时的配置和展示信息","properties":{"data_category":{"description":"作业输出数据类别的列表,当输出类型下有这个列表时,表示希望这个输出类型下存放dataCategory列表内的数据,部分服务需要","example":["FaceImage"],"items":{"type":"string"},"maxItems":10,"minItems":0,"type":"array","uniqueItems":true},"obs":{"description":"作业所有结果文件所在的OBS桶和路径","items":{"description":"单个结果文件result.json所在的OBS桶和路径","properties":{"bucket":{"description":"结果文件result.json所在的OBS桶","example":"video-analyze","maxLength":63,"pattern":"^[a-z0-9](?!.*[-.][-.].*)([a-z0-9-.]{1,61})[a-z0-9]$","type":"string"},"path":{"description":"结果文件result.json所在的路径","example":"hosting/f98acbxxxxxxxxxxxxxxxxxxxx011462/result.json","maxLength":1023,"pattern":"^(?![/.\\s])(?!.*//.*)([^:*?\"<>|\\\\]{0,1023})(?<![.\\s])$","type":"string"}},"type":"object"},"maxItems":50,"minItems":0,"type":"array"},"result_json_overdue_at":{"description":"作业结果文件的过期时间","example":1577836800000,"format":"int64","maximum":9223372036854775807,"minimum":0,"type":"integer"}},"type":"object"},"TaskOutputLocalpath":{"description":"输出为localpath类型时的配置信息","properties":{"data_category":{"description":"作业输出数据类别的列表,选填,仅部分服务需要。当输出类型下有这个列表时,表示希望这个输出类型下存放dataCategory列表内的数据。","example":["FaceImage"],"items":{"type":"string"},"maxItems":10,"minItems":0,"type":"array","uniqueItems":true},"mount_source_path":{"description":"挂载的源路径,存放作业运行结果的路径,选用localpath类型输出时必填。必须为linux路径,且为选用的边缘运行池挂载路径的子路径,长度不超过255。","example":"/usr/local/","maxLength":255,"pattern":"^(/[\\w-.]+)+/?$","type":"string"}},"required":["mount_source_path"],"type":"object"},"TaskOutputObs":{"description":"输出为obs类型时的配置信息","properties":{"bucket":{"description":"OBS桶名,选用obs类型输出时必填。","example":"obs-iva","maxLength":63,"pattern":"^[a-z0-9](?!.*[-.][-.].*)([a-z0-9-.]{1,61})[a-z0-9]$","type":"string"},"data_category":{"description":"作业输出数据类别的列表,选填,仅部分服务需要。当输出类型下有这个列表时,表示希望这个输出类型下存放dataCategory列表内的数据。","example":["FaceImage"],"items":{"type":"string"},"maxItems":10,"minItems":0,"type":"array","uniqueItems":true},"path":{"description":"OBS的路径,选用obs类型输出时必填。","example":"output/","maxLength":1023,"pattern":"^(?![/.\\s])(?!.*//.*)([^:*?\"<>|\\\\]{0,1023})(?<![.\\s])$","type":"string"}},"required":["bucket","path"],"type":"object"},"TaskOutputWebhook":{"description":"输出为webhook类型时的配置信息","properties":{"data_category":{"description":"作业输出数据类别的列表,选填,仅部分服务需要。当输出类型下有这个列表时,表示希望这个输出类型下存放dataCategory列表内的数据。","example":["FaceImage"],"items":{"type":"string"},"maxItems":10,"minItems":0,"type":"array","uniqueItems":true},"headers":{"description":"结果回调时需要携带的请求头,选用webhook类型输出时必填。整体呈json格式,以键值对的形式表示请求头和取值,至少1组,至多10组。","example":{"appId":"10000000","appKey":"24bnaxxxxxxxxxxxxxxxj9sdf"},"maxProperties":10,"minProperties":1,"type":"object"},"url":{"description":"结果回调地址,选用webhook类型输出时必填。","example":"https://api.huawei.com/v1/tasks","format":"uri","maxLength":1000,"pattern":"^(https?|rtsp|rtmp|ftp|file):\\/\\/[-A-Za-z0-9+&@*#/%?=~_|!:,.;]+[-A-Za-z0-9+&@*#/%=~_|]$","type":"string"}},"required":["url","headers"],"type":"object"},"TaskServiceConfig":{"description":"作业运行时指定的算法配置参数,部分服务需填且必填。","minProperties":1,"properties":{"common":{"description":"作业运行时指定的具体的算法配置项,部分服务需填且必填。整体呈json格式,具体配置项参见相应算法服务的说明。","example":{"stream_direct":"reverse"},"type":"object"}},"type":"object"},"TaskTiming":{"description":"计划任务的配置项,选填。计划任务不支持obs输入,对于url输入则仅支持rtmp和rtsp两种形式。","properties":{"date":{"description":"作业的执行日。当且仅当计划任务类型为once且为频率模式时,该字段需填且必填。格式形如yyyy-MM-dd。","example":"2020-01-01","pattern":"^[0-9]{4}-[0-9]{2}-[0-9]{2}$","type":"string"},"days_of_month":{"description":"作业会在一个月的哪几天执行,当且仅当计划任务类型为monthly时,该字段需填且必填。1~31分别指代一个月中的1日至31日。","example":[1],"items":{"example":1,"format":"int32","maximum":31,"minimum":1,"type":"integer"},"maxItems":31,"minItems":1,"type":"array","uniqueItems":true},"days_of_week":{"description":"作业会在一周的哪几天执行,当且仅当计划任务类型为weekly时,该字段需填且必填。1~7分别指代星期一至星期日。","example":[1,2,3,4,5],"items":{"example":1,"format":"int32","maximum":7,"minimum":1,"type":"integer"},"maxItems":7,"minItems":1,"type":"array","uniqueItems":true},"frequency":{"description":"频率模式配置。和periods字段二选一,不可共存。","properties":{"begin_at":{"description":"单日内执行的起始时间,选填。格式形如hh:mm:ss。","example":"08:00:00","pattern":"^[0-9]{2}:[0-9]{2}:[0-9]{2}$","type":"string"},"duration":{"description":"单次执行的运行时长,频率模式必填。取值范围在5~720之间,单位:分钟。","example":5,"format":"int32","maximum":720,"minimum":5,"type":"integer"},"end_at":{"description":"单日内执行的结束时间,选填。格式形如hh:mm:ss。","example":"20:00:00","pattern":"^[0-9]{2}:[0-9]{2}:[0-9]{2}$","type":"string"},"interval":{"description":"相邻两次执行之间的间隔,频率模式必填。取值范围在5~720之间,单位:分钟。","example":5,"format":"int32","maximum":720,"minimum":5,"type":"integer"}},"required":["interval","duration"],"type":"object"},"periods":{"description":"时间段模式配置。和frequency字段二选一,不可共存。时间段模式下,至少需指定一个时间段。","items":{"properties":{"begin_at":{"description":"单个时间段执行的起始时间,和end_at需成对出现。计划任务类型为once时,格式为yyyy-MM-ddThh:mm:ss,其余计划任务类型时,格式为hh:mm:ss。","example":"08:00:00","pattern":"^([0-9]{4}-[0-9]{2}-[0-9]{2}T)?[0-9]{2}:[0-9]{2}:[0-9]{2}$","type":"string"},"end_at":{"description":"单个时间段执行的结束时间,和begin_at需成对出现。计划任务类型为once时,格式为yyyy-MM-ddThh:mm:ss,其余计划任务类型时,格式为hh:mm:ss。","example":"12:00:00","pattern":"^([0-9]{4}-[0-9]{2}-[0-9]{2}T)?[0-9]{2}:[0-9]{2}:[0-9]{2}$","type":"string"}},"type":"object"},"maxItems":10,"minItems":1,"type":"array"},"timezone":{"description":"用户所处的时区,使用计划任务时必填。精确到分钟。","example":"+08:00","pattern":"^[+-][0-9]{2}:[0-9]{2}$","type":"string"},"type":{"description":"计划任务的类型,使用计划任务时必填。可选类型分别为once(仅执行一次),daily(每日执行),weekly(每周执行),monthly(每月执行)。","enum":["once","daily","weekly","monthly"],"example":"daily","type":"string"}},"required":["type","timezone"],"type":"object"}},"description":null,"group_id":"c9fd0884907a4a9f9dbcef57a0094d96","host":"iva.cn-north-4.myhuaweicloud.com","id":"19aaec845b124bb7b9c148edd3aa1071","info_version":"v2","method":"get","name":"ShowTask","parameters":{},"paths":{"/{project_id}/services/{service_name}/tasks/{task_id}":{"get":{"consumes":["application/json"],"description":"该接口用于查询服务作业","operationId":"ShowTask","parameters":[{"description":"用户项目ID","in":"path","name":"project_id","pattern":"^[a-zA-Z0-9-]{1,64}$","required":true,"type":"string"},{"description":"服务名称","in":"path","maxLength":100,"minLength":2,"name":"service_name","pattern":"^[a-z][a-z-]{0,98}[a-z]$","required":true,"type":"string"},{"description":"指定的服务作业ID","in":"path","name":"task_id","pattern":"^[0-9a-f]{32}|task\\w{8}$","required":true,"type":"string"}],"produces":["application/json"],"responses":{"200":{"description":"获取服务作业信息成功","examples":{"application/json":{"created_at":"2021-01-01T00:00:00Z","creator":"user_test","description":"hello world","edge_pool_id":"549cxxxxxxxxxxxxxxxxxxxxxx77a2a5","id":"53e4xxxxxxxxxxxxxxxxxxxxxxb55b3e","input":{"data":[{"id":"dd8xxxxx-xxxx-xxxx-xxxx-xxxxxx2f5bcb"}],"type":"edgecamera"},"name":"task-test","output":{"dis":{"stream_name":"dis-test"}},"project_id":"b722xxxxxxxxxxxxxxxxxxxxxxeb4674","service_config":{"common":{"image_compression_ratio":90,"render_result_sw":0,"video_sampling_interval":1}},"service_name":"face-detect","service_title":{"en":"Face Detect","zh":"人脸识别"},"service_version":"1.0","state":"RUNNING","updated_at":"2021-01-01T00:00:10Z"}},"schema":{"$ref":"#/definitions/ShowTaskResponseBody"}},"400":{"description":"请求不合法","examples":{"application/json":{"error_code":"IVA.0004","error_msg":"The request param is invalid. parameter [task_id] does not match ^[0-9a-f]{32}|task\\w{8}$."}},"schema":{"$ref":"#/definitions/ErrorResponseBody"}},"404":{"description":"指定的服务不存在","examples":{"application/json":{"error_code":"IVA.0005","error_msg":"The requested resource is NOT found. Service face-detect not found."}},"schema":{"$ref":"#/definitions/ErrorResponseBody"}}},"summary":"查询服务作业","tags":["服务作业管理"],"x-is-registered":"Y","x-request-examples-description-1":"获取指定服务下的指定作业","x-request-examples-url-1":"/v2/b722xxxxxxxxxxxxxxxxxxxxxxeb4674/services/face-detect/tasks/53e4xxxxxxxxxxxxxxxxxxxxxxb55b3e","x-support-sdk":"Y"}}},"product_short":"VAS","region_id":"cn-north-4","schemes":["HTTPS"],"security_definitions":null,"summary":"查询服务作业","tags":"服务作业管理","uri":null,"version":"2.0"}