{"base_path":null,"components":null,"consumes":"[\"application/json;charset=UTF-8\"]","definitions":{"CreateScalingPolicyOption":{"description":"创建伸缩策略","properties":{"alarm_id":{"description":"告警ID,即告警规则的ID,当scaling_policy_type为ALARM时该项必选,此时scheduled_policy不生效。创建告警策略成功后,会自动为该告警ID对应的告警规则的alarm_actions字段增加类型为autoscaling的告警触发动作。告警ID通过查询云监控告警规则列表获取,详见《云监控API参考》的“查询告警规则列表”。","type":"string"},"cool_down_time":{"description":"冷却时间,取值范围0-86400,默认为300,单位是秒。","maximum":86400,"type":"integer"},"scaling_group_id":{"description":"伸缩组ID,通过查询弹性伸缩组列表获取,详见查询弹性伸缩组列表。","pattern":"[0-9a-z]{8}-[0-9a-z]{4}-[0-9a-z]{4}-[0-9a-z]{4}-[0-9a-z]{12}","type":"string"},"scaling_policy_action":{"$ref":"#/definitions/ScalingPolicyActionV1","description":"策略执行具体动作"},"scaling_policy_name":{"description":"策略名称(1-64字符),可以用中文、字母、数字、下划线、中划线的组合。","maxLength":64,"minLength":1,"type":"string"},"scaling_policy_type":{"description":"策略类型。告警策略:ALARM(与alarm_id对应);定时策略:SCHEDULED(与scheduled_policy对应);周期策略:RECURRENCE(与scheduled_policy对应)","enum":["ALARM","SCHEDULED","RECURRENCE"],"type":"string"},"scheduled_policy":{"$ref":"#/definitions/ScheduledPolicy","description":"定时、周期任务策略,当scaling_policy_type为SCHEDULED或RECURRENCE时该项必选,此时alarm_id不生效。"}},"required":["scaling_group_id","scaling_policy_name","scaling_policy_type"]},"ScalingPolicyActionV1":{"description":"策略执行具体动作","properties":{"instance_number":{"description":"操作实例个数,默认为1。当配额为默认配额时,取值范围如下:\n\noperation为SET时,取值范围为:0~300。\noperation为ADD或REMOVE/REDUCE时,取值范围为:1~300。\n说明:\n配置参数时,instance_number和instance_percentage参数只能选其中一个进行配置。","example":1,"format":"int32","type":"integer"},"instance_percentage":{"description":"操作实例百分比,将伸缩组容量增加、减少或设置为伸缩组当前实例个数的百分比。操作为ADD或REMOVE/REDUCE时取值范围为1到20000的整数,操作为SET时取值范围为0到20000的整数。当instance_number和instance_percentage参数均无配置时,则操作实例个数为1。配置参数时,instance_number和instance_percentage参数只能选其中一个进行配置。","maximum":100,"minimum":0,"type":"integer"},"operation":{"description":"操作选项。ADD:添加实例。REMOVE/REDUCE:移除实例。SET:设置实例数为","enum":["ADD","REMOVE","REDUCE","SET"],"example":"ADD","type":"string"}}},"ScalingPolicyId":{"description":"创建伸缩策略","properties":{"scaling_policy_id":{"description":"伸缩策略ID。","example":"0h327883-324n-4dzd-9c61-68d03ee191dd","pattern":"[0-9a-z]{8}-[0-9a-z]{4}-[0-9a-z]{4}-[0-9a-z]{4}-[0-9a-z]{12}","type":"string"}}},"ScheduledPolicy":{"description":"定时、周期任务策略","properties":{"end_time":{"description":"周期策略重复执行结束时间,遵循UTC时间,scaling_policy_type为RECURRENCE时该项必选。当为周期类型策略时,不得早于当前时间和开始时间。格式为:YYYY-MM-DDThh:mmZ","type":"string"},"launch_time":{"description":"触发时间,遵循UTC时间。如果scaling_policy_type为SCHEDULED,则格式为:YYYY-MM-DDThh:mmZ。如果scaling_policy_type为RECURRENCE,则格式为:hh:mm。","type":"string"},"recurrence_type":{"description":"周期触发类型,scaling_policy_type为RECURRENCE时该项必选。Daily:每天执行一次。Weekly:每周指定天执行一次。Monthly:每月指定天执行一次。","enum":["Daily","Weekly","Monthly"],"type":"string"},"recurrence_value":{"description":"周期触发任务数值,scaling_policy_type为RECURRENCE时该项必选。类型为Daily时,该字段为null,表示每天执行类型为Weekly时,该字段取值范围为1-7,1表示星期日,以此类推,以”,”分割,例如:1,3,5。类型为Monthly时,该字段取值范围为1-31,分别表示每月的日期,以“,”分割,例如:1,10,13,28。说明:- 当recurrence_type类型为Daily时,recurrence_value参数不生效。","maxLength":64,"minLength":1,"type":"string"},"start_time":{"description":"周期策略重复执行开始时间,遵循UTC时间。默认为当前时间,格式为:YYYY-MM-DDThh:mZ","type":"string"}},"required":["launch_time"]}},"description":null,"group_id":"c14e7adea4354f78bb333ea8451df077","host":"as.cn-north-4.myhuaweicloud.com","id":"0e377f5ff26b43009e7956ad21efa2ee","info_version":"v1","method":"post","name":"CreateScalingPolicy","parameters":{},"paths":{"/autoscaling-api/v1/{project_id}/scaling_policy":{"post":{"description":"创建弹性伸缩策略。伸缩策略定义了伸缩组内实例的扩张和收缩操作。如果执行伸缩策略造成伸缩组期望实例数与伸缩组内实例数不符,弹性伸缩会自动调整实例资源,以匹配期望实例数。当前伸缩策略支持告警触发策略,周期触发策略,定时触发策略。在策略执行具体动作中,可设置实例变化的个数,或根据当前实例的百分比数进行伸缩。","operationId":"CreateScalingPolicy","parameters":[{"description":"租户标识","in":"path","name":"project_id","required":true,"type":"string","x-example":"0513757xxxxxd5eb2f08xxxb93ef4f0f","x-order":1},{"description":"Token认证","in":"header","name":"X-Auth-Token","required":true,"type":"string","x-example":"MIIDkgYJKoZIhvcNAQcCoIIDgzCCXXXXXX...","x-order":2},{"description":"BodyParameters","in":"body","name":"bodyparam","required":true,"schema":{"$ref":"#/definitions/CreateScalingPolicyOption"}}],"responses":{"200":{"description":"请求正常。","examples":{"application/json":{"scaling_policy_id":"0h327883-324n-4dzd-9c61-68d03ee191dd"}},"schema":{"$ref":"#/definitions/ScalingPolicyId"}},"400":{"description":"Bad Request 服务器未能处理请求。"},"401":{"description":"Unauthorized 被请求的页面需要用户名和密码。"},"403":{"description":"Forbidden 对被请求的页面访问禁止。"},"404":{"description":"Not Found 服务器无法找到被请求的页面。"},"405":{"description":"Method Not Allowed 请求中指定的方法不被允许。"},"406":{"description":"Not Acceptable 服务器生成的响应无法被客户端所接受。"},"407":{"description":"Proxy Authentication 用户必须首先使用代理服务器进行验证,这样请求才会被处理"},"408":{"description":"Request Timeout 请求超出了服务器的等待时间。"},"409":{"description":"Conflict 由于冲突,请求无法被完成。"},"500":{"description":"Internal Server Error 请求未完成。服务异常。"},"501":{"description":"Not Implemented 请求未完成。服务器不支持所请求的功能。"},"502":{"description":"Bad Gateway 请求未完成。服务器从上游服务器收到一个无效的响应。"},"503":{"description":"Service Unavailable 请求未完成。系统暂时异常。"},"504":{"description":"Gateway Timeout 网关超时。"}},"summary":"创建弹性伸缩策略","tags":["弹性伸缩策略管理"],"x-apiErrorCodes":"","x-apigateway-auth-type":"","x-apigateway-match-mode":"","x-apigateway-request-type":"","x-call_frequency":"","x-constraint":"","x-ctc":"Y","x-first_open_time":"2016-06-30","x-flow_control_group":"as","x-hc":"Y","x-hk":"Y","x-hybridcloud":"true","x-iftype":"公开接口","x-in_cli":"","x-is-registered":"Y","x-is_calling":"Y","x-multi_tenant_flow_time":"1","x-multi_tenant_flow_value":"520","x-name":"创建弹性伸缩策略","x-obc":"Y","x-order":1,"x-otc":"Y","x-request-examples-1":{"cool_down_time":900,"scaling_group_id":"5bc3aa02-b83e-454c-aba1-4d2095c68f8b","scaling_policy_action":{"instance_number":1,"operation":"ADD"},"scaling_policy_name":"as-policy-7a75","scaling_policy_type":"RECURRENCE","scheduled_policy":{"end_time":"2015-12-27T03:34Z","launch_time":"16:00","recurrence_type":"Daily","start_time":"2015-12-14T03:34Z"}},"x-request-examples-description-1":"本示例展示了创建一个名称为as-policy-7a75的周期策略,该策略的生效时间为2015-12-14T03:34Z到2015-12-27T03:34Z,每天16:00在ID为5bc3aa02-b83e-454c-aba1-4d2095c68f8b的伸缩组中增加一个实例。","x-request-examples-text-1":{"cool_down_time":900,"scaling_group_id":"5bc3aa02-b83e-454c-aba1-4d2095c68f8b","scaling_policy_action":{"instance_number":1,"operation":"ADD"},"scaling_policy_name":"as-policy-7a75","scaling_policy_type":"RECURRENCE","scheduled_policy":{"end_time":"2015-12-27T03:34Z","launch_time":"16:00","recurrence_type":"Daily","start_time":"2015-12-14T03:34Z"}},"x-request-examples-url-1":"POST https://{Endpoint}/autoscaling-api/v1/{project_id}/scaling_policy","x-scope":"Commercial","x-source":"SelfDeveloped","x-source_url":"","x-support-sdk":"Y","x-tenant_flow_time":"1","x-tenant_flow_value":"52","x-timeout":"10s","x-tlf":"Y","x-un_cli":"","x-version":"v1"}}},"product_short":"AS","region_id":"cn-north-4","schemes":["HTTPS"],"security_definitions":null,"summary":"创建弹性伸缩策略","tags":"弹性伸缩策略管理","uri":null,"version":"2.0"}