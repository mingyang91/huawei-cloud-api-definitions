{"base_path":"/","components":null,"consumes":"[\"application/json;charset=UTF-8\"]","definitions":{"ListResourceReq":{"properties":{"action":{"description":"操作标识(仅限于filter,count):filter(过滤),count(查询总条数)。\n\n如果是filter则为分页查询,如果是count会按照条件将总条数返回。","enum":["filter","count"],"type":"string"},"limit":{"description":"查询记录数(action为count时无此参数)如果action为filter默认为1000,limit最多为1000,不能为负数,最小值为1。","format":"int32","maximum":1000,"minimum":1,"type":"integer"},"matches":{"description":"搜索字段,key为要匹配的字段,如resource_name等。value为匹配的值。此字段为固定字典值。\n根据不同的字段确认是否需要模糊匹配,如resource_name默认为模糊搜索,如果value为空字符串精确匹配。","items":{"$ref":"#/definitions/Match"},"type":"array"},"not_tags":{"description":"返回结果不包含该参数中所有标签对应的资源,该参数最多包含10个key,每个key下面的value最多10个, 结构体不能缺失,key不能为空或者空字符串。Key不能重复,同一个key中values不能重复。","items":{"$ref":"#/definitions/TagWithMultiValue"},"type":"array"},"not_tags_any":{"description":"返回结果不包含该参数中任意一个标签对应的资源,该参数最多包含10个key,每个key下面的value最多10个,结构体不能缺失,key不能为空或者空字符串。Key不能重复,同一个key中values不能重复。","items":{"$ref":"#/definitions/TagWithMultiValue"},"type":"array"},"offset":{"description":"(索引位置),从offset指定的下一条数据开始查询。查询第一页数据时,不需要传入此参数,查询后续页码数据时,将查询前一页数据时响应体中的值带入此参数(action为count时无此参数)如果action为filter默认为0,必须为数字,不能为负数。","format":"int32","minimum":0,"type":"integer"},"tags":{"description":"返回结果包含该参数中所有标签对应的资源,该参数最多包含10个key,每个key下面的value最多10个,结构体不能缺失,key不能为空或者空字符串。","items":{"$ref":"#/definitions/TagWithMultiValue"},"type":"array"},"tags_any":{"description":"返回结果包含该参数中任意一个标签对应的资源,该参数最多包含10个key,每个key下面的value最多10个,结构体不能缺失,key不能为空或者空字符串。Key不能重复,同一个key中values不能重复。","items":{"$ref":"#/definitions/TagWithMultiValue"},"type":"array"}},"required":["action"],"type":"object"},"ListResourceResp":{"properties":{"resources":{"description":"资源列表","items":{"$ref":"#/definitions/MRSResource"},"type":"array"},"total_count":{"description":"资源总数","format":"int32","type":"integer"}},"type":"object"},"MRSResource":{"properties":{"resource_detail":{"description":"资源详情","type":"string"},"resource_id":{"description":"资源ID","type":"string"},"resource_name":{"description":"资源名称","type":"string"},"tags":{"description":"标签","items":{"$ref":"#/definitions/TagPlain"},"type":"array"}},"type":"object"},"Match":{"properties":{"key":{"description":"键。当前只有resource_name可用,表示集群的名称,后续扩展。","maxLength":64,"minLength":0,"type":"string"},"value":{"description":"值。每个值最大长度64个unicode字符。","maxLength":64,"minLength":0,"type":"string"}},"type":"object"},"TagPlain":{"properties":{"key":{"description":"键。标签的key值不能包含“=”,“*”,“<”,“>”,“\\”,“,”,“|”,“/”,且首尾字符不能为空格。","type":"string"},"value":{"description":"值。标签的value值不能包含“=”,“*”,“<”,“>”,“\\”,“,”,“|”,“/”,且首尾字符不能为空格。","type":"string"}},"type":"object"},"TagWithMultiValue":{"properties":{"key":{"description":"键。标签的key值不能包含“=”,“*”,“<”,“>”,“\\”,“,”,“|”,“/”,且首尾字符不能为空格。","type":"string"},"values":{"description":"值。标签的value值不能包含“=”,“*”,“<”,“>”,“\\”,“,”,“|”,“/”,且首尾字符不能为空格。","items":{"type":"string"},"type":"array"}},"required":["key"],"type":"object"}},"description":null,"group_id":"64579295290047fea862f501e033ff3f","host":"mrs.cn-north-4.myhuaweicloud.com","id":"0a459cf579b84bf8a259837da1cd5476","info_version":"v1","method":"post","name":"ListClustersByTags","parameters":{},"paths":{"/v1.1/{project_id}/clusters/resource_instances/action":{"post":{"consumes":["application/json"],"deprecated":false,"description":"使用标签过滤集群。\n\n集群默认按照创建时间倒序,集群tag也按照创建时间倒序。","operationId":"ListClustersByTags","parameters":[{"description":"项目编号。获取方法,请参见[获取项目ID](https://support.huaweicloud.com/api-mrs/mrs_02_0011.html)。","in":"path","name":"project_id","required":true,"type":"string","x-example":"2b31ed520xxxxxxebedb6e57xxxxxxxx"},{"description":"查询特定标签的请求体","in":"body","name":"listResourceReq","required":true,"schema":{"$ref":"#/definitions/ListResourceReq"}}],"produces":["application/json"],"responses":{"200":{"description":"操作成功。","examples":{"application/json-1":{"resources":[{"resource_detail":null,"resource_id":"cdfs_cefs_wesas_12_dsad","resource_name":"clusterA","tags":[{"key":"key1","value":"value1"},{"key":"key2","value":"value1"}]}],"total_count":"1000"},"application/json-2":{"total_count":"1000"}},"schema":{"$ref":"#/definitions/ListResourceResp"}}},"summary":"查询特定标签的集群列表","tags":["标签管理接口"],"x-apiexplorer-hide":"N","x-apigateway-auth-type":"IAM","x-apigateway-match-mode":"NORMAL","x-apigateway-request-type":"public","x-call_frequency":"high","x-constraint":"无","x-ctc":"N","x-hc":"Y","x-hk":"Y","x-hybridcloud":true,"x-is-registered":"Y","x-is_calling":"Y","x-is_registered":"Y","x-name":"查询特定标签的集群列表","x-obc":"N","x-order":7,"x-otc":"N","x-request-examples-1":{"action":"filter","limit":"100","matches":[{"key":"resource_name","value":"clusterA"}],"not_tags":[{"key":"key1","values":["value1","value2"]}],"not_tags_any":[{"key":"key1","values":["value1","value2"]}],"offset":"100","tags":[{"key":"key1","values":["value1","value2"]}],"tags_any":[{"key":"key1","values":["value1","value2"]}]},"x-request-examples-2":{"action":"count","matches":[{"key":"resource_name","value":"clusterA"}],"not_tags":[{"key":"key1","values":["value1","value2"]}],"not_tags_any":[{"key":"key1","values":["value1","value2"]}],"tags":[{"key":"key1","values":["value1","value2"]},{"key":"key2","values":["value1","value2"]}],"tags_any":[{"key":"key1","values":["value1","value2"]}]},"x-request-examples-description-1":"action为filter时请求样例","x-request-examples-description-2":"action为count时请求样例","x-request-examples-text-1":"{\n  \"offset\": \"100\",\n  \"limit\": \"100\",\n  \"action\": \"filter\",\n  \"matches\": [\n    {\n      \"key\": \"resource_name\",\n      \"value\": \"clusterA\"\n    }\n  ],\n  \"not_tags\": [\n    {\n      \"key\": \"key1\",\n      \"values\": [\n        \"value1\",\n        \"value2\"\n      ]\n    }\n  ],\n  \"tags\": [\n    {\n      \"key\": \"key1\",\n      \"values\": [\n        \"value1\",\n        \"value2\"\n      ]\n    }\n  ],\n  \"tags_any\": [\n    {\n      \"key\": \"key1\",\n      \"values\": [\n        \"value1\",\n        \"value2\"\n      ]\n    }\n  ],\n  \"not_tags_any\": [\n    {\n      \"key\": \"key1\",\n      \"values\": [\n        \"value1\",\n        \"value2\"\n      ]\n    }\n  ]\n}","x-request-examples-text-2":"{\n  \"action\": \"count\",\n  \"not_tags\": [\n    {\n      \"key\": \"key1\",\n      \"values\": [\n        \"value1\",\n        \"value2\"\n      ]\n    }\n  ],\n  \"tags\": [\n    {\n      \"key\": \"key1\",\n      \"values\": [\n        \"value1\",\n        \"value2\"\n      ]\n    },\n    {\n      \"key\": \"key2\",\n      \"values\": [\n        \"value1\",\n        \"value2\"\n      ]\n    }\n  ],\n  \"tags_any\": [\n    {\n      \"key\": \"key1\",\n      \"values\": [\n        \"value1\",\n        \"value2\"\n      ]\n    }\n  ],\n  \"not_tags_any\": [\n    {\n      \"key\": \"key1\",\n      \"values\": [\n        \"value1\",\n        \"value2\"\n      ]\n    }\n  ],\n  \"matches\": [\n    {\n      \"key\": \"resource_name\",\n      \"value\": \"clusterA\"\n    }\n  ]\n}","x-request-examples-url-1":"POST https://{endpoint}/v1.1/{project_id}/{resource_type}/resource_instances/action","x-request-examples-url-2":"POST https://{endpoint}/v1.1/{project_id}/{resource_type}/resource_instances/action","x-scope":"Commercial","x-support-sdk":"Y","x-tlf":"N","x-version":"v1.1"}}},"product_short":"MRS","region_id":"cn-north-4","schemes":["HTTPS"],"security_definitions":null,"summary":"查询特定标签的集群列表","tags":"标签管理接口","uri":null,"version":"2.0"}