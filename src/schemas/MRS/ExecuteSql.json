{"base_path":"/","components":null,"consumes":"[\"application/json;charset=UTF-8\"]","definitions":{"ErrorRsp":{"description":"失败时返回的错误对象","properties":{"error_code":{"description":"错误码","type":"string"},"error_msg":{"description":"错误描述","type":"string"}},"required":["error_code","error_msg"]},"SqlExecutionReq":{"properties":{"archive_path":{"description":"SQL执行结果的转储文件夹。\n说明:\n只有select语句才会转储查询的结果。当前仅支持转储到OBS中。","type":"string"},"database":{"description":"执行SQL所在的数据库,默认为default。","type":"string"},"sql_content":{"description":"待执行的SQL语句。\n说明:\n目前仅支持执行单条语句,语句中不包含“;”。","type":"string"},"sql_type":{"description":"SQL类型。目前仅支持“presto”类型的SQL。\n说明:\n- 只有包含Presto组件的集群才能提交执行presto类型的SQL。\n- 当前仅MRS 2.0.6版本的MRS 2.0.6.1补丁、MRS 2.1.0版本的MRS 2.1.0.7补丁、MRS 3.1.2及之后版本集群支持。","type":"string"}},"required":["sql_content","sql_type"],"type":"object"},"SqlExecutionResult":{"properties":{"content":{"description":"SQL的执行结果。 说明: 只有非select的语句才会在content中返回结果,如果SQL中没有结果,content为空。","items":{"description":"SQL的执行结果。","items":{"description":"SQL的执行结果。","type":"string"},"type":"array"},"type":"array"},"id":{"description":"SQL的执行id。执行select、show和desc语句时才会生成id,其他操作id为空","type":"string"},"message":{"description":"错误信息。","type":"string"},"result_location":{"description":"SQL查询语句的最终结果归档路径。\n说明:\n只有select的语句才会在将SQL的执行结果转储到result_location中。","type":"string"},"statement":{"description":"执行的SQL语句。","type":"string"},"status":{"description":"SQL的执行状态。\n- QUEUED\n- WAITING_FOR_RESOURCES\n- PLANNING\n- STARTING\n- RUNNING\n- FINISHING\n- FINISHED\n- FAILED","type":"string"}},"type":"object"}},"description":null,"group_id":"64579295290047fea862f501e033ff3f","host":"mrs.cn-north-4.myhuaweicloud.com","id":"37f4c194271342388cb725e704fb16dd","info_version":"v2","method":"post","name":"ExecuteSql","parameters":{},"paths":{"/v2/{project_id}/clusters/{cluster_id}/sql-execution":{"post":{"consumes":["application/json"],"deprecated":false,"description":"在MRS集群中提交并执行一条SQL语句。","operationId":"ExecuteSql","parameters":[{"description":"项目编号。获取方法,请参见[获取项目ID](https://support.huaweicloud.com/api-mrs/mrs_02_0011.html)。","in":"path","name":"project_id","required":true,"type":"string","x-example":"2b31ed520xxxxxxebedb6e57xxxxxxxx"},{"description":"集群ID。获取方法,请参见[获取集群ID](https://support.huaweicloud.com/api-mrs/mrs_02_9001.html)。","in":"path","name":"cluster_id","required":true,"type":"string","x-example":"431b135exxxxxxebedb6e57xxxxxxxx"},{"description":"请求参数","in":"body","name":"ExecuteSqlRequestBody","required":true,"schema":{"$ref":"#/definitions/SqlExecutionReq"}}],"produces":["application/json"],"responses":{"200":{"description":"提交SQL语句成功","examples":{"application/json":{"content":[["t1",null],[null,"t2"],[null,"t3"]],"id":"20190909_011820_00151_xxxxx","result_location":" obs://my_bucket/uuid_date/xxxx.csv","statement":"show tables","status":"FINISHED"}},"schema":{"$ref":"#/definitions/SqlExecutionResult"}},"400":{"description":"提交SQL语句失败","examples":{"application/json":{"error_code":"MRS.0011","message":"提交SQL到Executor上失败,集群ID为xxxx"}},"schema":{"$ref":"#/definitions/ErrorRsp"}}},"summary":"提交SQL语句","tags":["SQL接口"],"x-apiexplorer-hide":"N","x-apigateway-auth-type":"IAM","x-apigateway-match-mode":"NORMAL","x-apigateway-request-type":"public","x-call-frequency":"high","x-constraint":"无","x-ctc":"N","x-hc":"Y","x-hk":"Y","x-hybridcloud":true,"x-is-calling":"Y","x-is-registered":"Y","x-name":"提交SQL语句","x-obc":"N","x-otc":"N","x-request-examples-1":{"archive_path":"obs://my-bucket/path","database":"default","sql_content":"show tables","sql_type":"presto"},"x-request-examples-description-1":"提交SQL语句请求示例","x-request-examples-text-1":"{\n  \"sql_type\": \"presto\",\n  \"sql_content\": \"show tables\",\n  \"database\": \"default\",\n  \"archive_path\": \"obs://my-bucket/path\"\n}","x-request-examples-url-1":"POST https://{endpoint}/v2/{project_id}/clusters/{cluster_id}/sql-execution","x-scope":"Commercial","x-support-sdk":"Y","x-tlf":"N","x-version":"v2"}}},"product_short":"MRS","region_id":"cn-north-4","schemes":["HTTPS"],"security_definitions":null,"summary":"提交SQL语句","tags":"SQL接口","uri":null,"version":"2.0"}