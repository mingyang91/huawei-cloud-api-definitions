{"base_path":"/v1.0","components":null,"consumes":"[\"application/json;charset=UTF-8\"]","definitions":{"ThrottleReq":{"properties":{"api_call_limits":{"description":"API流量限制是指时长内一个API能够被访问的次数上限。该值不超过系统默认配额限制,系统默认配额为200tps,用户可根据实际情况修改该系统默认配额。输入的值不超过2147483647。正整数。","example":800,"type":"integer"},"app_call_limits":{"description":"APP流量限制是指一个API在时长之内被每个APP访问的次数上限,该数值不超过用户流量限制值。输入的值不超过2147483647。正整数。","example":300,"type":"integer"},"enable_adaptive_control":{"description":"是否开启动态流控::\n- TRUE\n- FALSE\n\n暂不支持","example":1,"type":"string"},"ip_call_limits":{"description":"源IP流量限制是指一个API在时长之内被每个IP访问的次数上限,该数值不超过API流量限制值。输入的值不超过2147483647。正整数。","example":600,"type":"integer"},"name":{"description":"流控策略名称。支持汉字,英文,数字,下划线,且只能以英文和汉字开头,3 ~ 64字符。\n> 中文字符必须为UTF-8或者unicode编码。","example":"每秒1000次","type":"string"},"remark":{"description":"流控策略描述字符长度不超过255。\n> 中文字符必须为UTF-8或者unicode编码。","example":"API每秒800次,用户500次,APP300次,IP600次","type":"string"},"time_interval":{"description":"流量控制的时长单位。与“流量限制次数”配合使用,表示单位时间内的API请求次数上限。输入的值不超过2147483647。正整数。","example":1,"type":"integer"},"time_unit":{"description":"流控的时间单位:\n- SECOND\n- MINUTE\n- HOUR\n- DAY","example":"MINUTE","type":"string"},"type":{"description":"流控策略的类型,取值如下:\n- 1:独享,表示绑定到流控策略的单个API流控时间内能够被调用多少次。\n- 2:共享,表示绑定到流控策略的所有API流控时间内能够被调用多少次。","example":1,"type":"integer"},"user_call_limits":{"description":"用户流量限制是指一个API在时长之内每一个用户能访问的次数上限,该数值不超过API流量限制值。输入的值不超过2147483647。正整数。","example":500,"type":"integer"}},"required":["name","api_call_limits","time_interval","time_unit"]},"ThrottleResp":{"properties":{"api_call_limits":{"description":"单个API流控时间内能够被访问的次数限制","type":"integer"},"app_call_limits":{"description":"单个APP流控时间内能够访问API的次数限制","type":"integer"},"bind_num":{"description":"流控绑定的API数量","type":"integer"},"create_time":{"description":"创建时间","type":"string"},"enable_adaptive_control":{"description":"是否开启动态流控:\n- TRUE\n- FALSE\n\n暂不支持","type":"string"},"id":{"description":"流控策略的ID","type":"string"},"ip_call_limits":{"description":"单个IP流控时间内能够访问API的次数限制","type":"integer"},"is_include_special_throttle":{"description":"是否包含特殊流控配置:\n- 1:包含\n- 2:不包含","type":"integer"},"name":{"description":"流控策略的名称","type":"string"},"remark":{"description":"描述","type":"string"},"time_interval":{"description":"流控的时长","type":"integer"},"time_unit":{"description":"流控的时间单位","type":"string"},"type":{"description":"流控策略的类型,取值如下:\n- 1:独享\n- 2:共享","type":"integer"},"user_call_limits":{"description":"单个用户流控时间内能够访问API的次数限制","type":"integer"}}}},"description":null,"group_id":"d0b771ab4a6d46a895580726f0d5479b","host":"apig.cn-north-4.myhuaweicloud.com","id":"5f1684a1290b4b89b62be92abec3bba5","info_version":"v1","method":"post","name":"CreateRequestThrottlingPolicy","parameters":{},"paths":{"/apigw/throttles":{"post":{"description":"当API上线后,系统会默认给每个API提供一个流控策略,API提供者可以根据自身API的服务能力及负载情况变更这个流控策略。 流控策略即限制API在一定长度的时间内,能够允许被访问的最大次数。","operationId":"CreateRequestThrottlingPolicy","parameters":[{"description":"用户Token。通过调用IAM服务获取用户Token接口获取(响应消息头中X-Subject-Token的值)。","in":"header","name":"X-Auth-Token","required":true,"type":"string","x-example":"MIIDkgYJKoZIhvcNAQcCoIIDgzCCXXXXXX..."},{"description":"创建流控策略的请求体","in":"body","name":"CreateRequestThrottlingPolicyRequestBody","required":true,"schema":{"$ref":"#/definitions/ThrottleReq"}}],"responses":{"201":{"description":"Created","examples":{"application/json":{"api_call_limits":800,"app_call_limits":300,"bind_num":0,"create_time":"2017-12-29T01:55:59.9904225Z","enable_adaptive_control":"FALSE","id":"0325b671-2d50-4614-9868-22102262695d","ip_call_limits":600,"is_inclu_special_throttle":2,"name":"每秒800次","remark":"API每秒800次,用户500次,APP300次,IP600次","time_interval":1,"time_unit":"SECOND","type":1,"user_call_limits":500}},"schema":{"$ref":"#/definitions/ThrottleResp"}},"400":{"description":"Bad Request"},"401":{"description":"Unauthorized"},"500":{"description":"Internal Server Error"}},"schemes":["https"],"summary":"创建流控策略","tags":["共享版-流控策略管理"],"x-is-registered":"Y","x-support-sdk":"N"}}},"product_short":"APIG","region_id":"cn-north-4","schemes":["HTTPS"],"security_definitions":null,"summary":"创建流控策略","tags":"共享版-流控策略管理","uri":null,"version":"2.0"}