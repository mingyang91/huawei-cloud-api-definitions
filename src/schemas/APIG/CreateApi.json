{"base_path":"/v1.0","components":null,"consumes":"[\"application/json;charset=UTF-8\"]","definitions":{"ApiBackendFuncReq":{"properties":{"function_urn":{"description":"函数URN","example":"urn:fss:cn-north-7:73d69ae0cfcf460190522d06b60f05ad:function:default:auto_testfunc00000","type":"string"},"invocation_type":{"description":"调用类型:async|sync (异步|同步)","enum":["async","sync"],"example":"async","type":"string"},"remark":{"description":"描述信息。长度不超过255个字符\n> 中文字符必须为UTF-8或者unicode编码。","example":"描述信息","type":"string"},"timeout":{"description":"API网关请求函数服务的超时时间,最大60000,最小为1。单位:毫秒。默认值:45000,请求参数值不在合法范围内时将使用默认值","example":3000,"type":"integer"},"version":{"description":"版本。字符长度不超过64","example":"v1","type":"string"}},"required":["function_urn","invocation_type","timeout"]},"ApiBackendFuncResp":{"properties":{"function_urn":{"description":"函数URN","type":"string"},"id":{"description":"编号","type":"string"},"invocation_type":{"description":"调用类型:async|sync","type":"string"},"register_time":{"description":"注册时间","type":"string"},"remark":{"description":"描述","type":"string"},"status":{"description":"状态","type":"integer"},"timeout":{"description":"超时时间,单位:毫秒","type":"integer"},"update_time":{"description":"修改时间","type":"string"},"version":{"description":"版本","type":"string"}}},"ApiBackendHttpReq":{"properties":{"authorizer_id":{"description":"后端自定义认证对象的ID","example":"7f9dab147a414f35a19d158da62e5264","type":"string"},"remark":{"description":"描述。字符长度不超过255\n> 中文字符必须为UTF-8或者unicode编码。","example":"描述","type":"string"},"req_method":{"description":"请求方式:GET、POST、PUT、DELETE、HEAD、PATCH、OPTIONS、ANY","enum":["GET","POST","PUT","DELETE","HEAD","PATCH","OPTIONS","ANY"],"example":"GET","type":"string"},"req_protocol":{"description":"请求协议:HTTP、HTTPS","enum":["HTTP","HTTPS"],"example":"HTTP","type":"string"},"req_uri":{"description":"请求地址。总长度不超过512,且满足URI规范。支持环境变量,使用环境变量时,每个变量名的长度为3 ~ 32位的字符串,字符串由英文字母、数字、中划线、下划线组成,且只能以英文开头。\n> 需要服从URI规范。","example":"/bechmark","type":"string"},"timeout":{"description":"API网关请求后端服务的超时时间,最大60000,最小为1。单位:毫秒。默认值:45000,请求参数值不在合法范围内时将使用默认值","example":3000,"type":"integer"},"url_domain":{"description":"后端服务的地址。\n\n由域名(或IP地址)和端口号组成,总长度不超过255。格式为域名:端口(如:apig.example.com:7443)。如果不写端口,则HTTPS默认端口号为443,HTTP默认端口号为80。\n\n支持环境变量,使用环境变量时,每个变量名的长度为3 ~ 32位的字符串,字符串由英文字母、数字、下划线、中划线组成,且只能以英文开头。","example":"apig.example.com:7443","type":"string"},"version":{"description":"web后端版本,字符长度不超过16","example":"v1","type":"string"},"vpc_info":{"$ref":"#/definitions/ApiBackendVpcReq","description":"VPC通道详情。如果vpc_status=1,则这个object类型为必填信息"},"vpc_status":{"description":"是否使用VPC通道\n- 1 : 使用VPC通道\n- 2 : 不使用VPC通道","enum":[1,2],"example":1,"type":"integer"}},"required":["req_protocol","req_method","req_uri","timeout"]},"ApiBackendHttpResp":{"properties":{"id":{"description":"编号","type":"string"},"register_time":{"description":"注册时间","type":"string"},"remark":{"description":"描述","type":"string"},"req_method":{"description":"请求方式","type":"string"},"req_protocol":{"description":"请求协议","type":"string"},"req_uri":{"description":"请求地址","type":"string"},"status":{"description":"状态","type":"integer"},"timeout":{"description":"访问超时时间,单位:毫秒","type":"integer"},"update_time":{"description":"修改时间","type":"string"},"url_domain":{"description":"后端endpoint","type":"string"},"version":{"description":"版本","type":"string"},"vpc_info":{"description":"VPC通道信息","type":"string"},"vpc_status":{"description":"是否使用VPC通道","type":"integer"}}},"ApiBackendMockReq":{"properties":{"remark":{"description":"描述信息。长度不超过255个字符\n> 中文字符必须为UTF-8或者unicode编码。","example":"描述信息","type":"string"},"result_content":{"description":"返回结果","example":"返回结果成功","type":"string"},"version":{"description":"版本。字符长度不超过64","example":"v1","type":"string"}}},"ApiBackendMockResp":{"properties":{"id":{"description":"编号","type":"string"},"register_time":{"description":"注册时间","type":"string"},"remark":{"description":"描述信息。长度不超过255个字符","type":"string"},"result_content":{"description":"返回结果","type":"string"},"status":{"description":"状态","type":"integer"},"update_time":{"description":"修改时间","type":"string"},"version":{"description":"版本。字符长度不超过64","type":"string"}}},"ApiBackendParamReq":{"properties":{"location":{"description":"参数位置:PATH、QUERY、HEADER","enum":["PATH","QUERY","HEADER"],"example":"QUERY","type":"string"},"name":{"description":"参数名称。\n长度为1 ~ 32位的字符串,字符串由英文字母、数字、中划线、下划线、英文句号组成,且只能以英文开头。","example":"backParamName","type":"string"},"origin":{"description":"参数类别:REQUEST、CONSTANT、SYSTEM","enum":["REQUEST","CONSTANT","SYSTEM"],"example":"REQUEST","type":"string"},"remark":{"description":"描述。字符长度不超过255\n> 中文字符必须为UTF-8或者unicode编码。","example":"后端参数描述","type":"string"},"value":{"description":"参数值。字符长度不超过255,类别为REQUEST时,值为req_params中的参数名称;类别为CONSTANT时,值为参数真正的值;类别为SYSTEM时,值为网关参数名称","example":"paramName","type":"string"}},"required":["name","location","origin","value"]},"ApiBackendParamResp":{"properties":{"id":{"description":"参数编号","type":"string"},"location":{"description":"参数位置","type":"string"},"name":{"description":"参数名称","type":"string"},"origin":{"description":"参数类别","type":"string"},"remark":{"description":"描述","type":"string"},"req_param_id":{"description":"对应的请求参数编号","type":"string"},"value":{"description":"参数值","type":"string"}}},"ApiBackendVpcReq":{"properties":{"vpc_id":{"description":"VPC通道编号","example":"7efb2b91155a4f6a9f45c5c95a6e4950","type":"string"},"vpc_proxy_host":{"description":"代理主机","example":"www.example.com","type":"string"}},"required":["vpc_id"]},"ApiCoditionReq":{"properties":{"condition_origin":{"description":"策略类型\n- param:参数\n- source:源IP","enum":["param","source"],"type":"string"},"condition_type":{"description":"策略条件\n- exact:绝对匹配\n- enum:枚举\n- pattern:正则\n策略类型为param时必选","enum":["exact","enum","pattern"],"type":"string"},"condition_value":{"description":"策略值","type":"string"},"req_param_name":{"description":"关联的请求参数对象名称。策略类型为param时必选","type":"string"}},"required":["condition_value","condition_origin"]},"ApiCoditionResp":{"properties":{"condition_origin":{"description":"策略类型","type":"string"},"condition_type":{"description":"策略条件","type":"string"},"condition_value":{"description":"策略值","type":"string"},"id":{"description":"编号","type":"string"},"req_param_id":{"description":"关联的请求参数对象编号","type":"string"},"req_param_location":{"description":"关联的请求参数对象位置","type":"string"},"req_param_name":{"description":"关联的请求参数对象名称","type":"string"}}},"ApiPolicyFuncReq":{"properties":{"backend_params":{"description":"后端参数列表","items":{"$ref":"#/definitions/ApiBackendParamReq"},"type":"array"},"conditions":{"description":"策略条件列表","items":{"$ref":"#/definitions/ApiCoditionReq"},"type":"array"},"effect_mode":{"description":"关联的策略组合模式ALL、ANY","enum":["ALL","ANY"],"example":"ALL","type":"string"},"function_urn":{"description":"函数URN","example":"urn:fss:cn-north-7:73d69ae0cfcf460190522d06b60f05ad:function:default:auto_testfunc00000","type":"string"},"invocation_type":{"description":"调用类型:async|sync (异步|同步)","enum":["async","sync"],"example":"async","type":"string"},"name":{"description":"策略后端名称。长度为3 ~ 64位的字符串,字符串由中文、英文字母、数字、下划线组成,且只能以中文或英文开头。","type":"string"},"timeout":{"description":"API网关请求函数服务的超时时间,最大60000,最小为1。单位:毫秒。默认值:45000,请求参数值不在合法范围内时将使用默认值","example":3000,"type":"integer"},"version":{"description":"版本。字符长度不超过64","example":"v1","type":"string"}},"required":["name","function_urn","invocation_type","effect_mode","conditions"]},"ApiPolicyFuncResp":{"properties":{"backend_params":{"description":"后端参数列表","items":{"$ref":"#/definitions/ApiBackendParamResp"},"type":"array"},"conditions":{"description":"策略条件列表","items":{"$ref":"#/definitions/ApiCoditionResp"},"type":"array"},"effect_mode":{"description":"关联的策略组合模式ALL、ANY","type":"string"},"function_urn":{"description":"函数URN","type":"string"},"id":{"description":"编号","type":"string"},"invocation_type":{"description":"调用类型:async|sync","type":"string"},"name":{"description":"策略后端名称","type":"string"},"timeout":{"description":"超时时间,单位:毫秒","type":"integer"},"version":{"description":"版本","type":"string"}}},"ApiPolicyHttpReq":{"properties":{"backend_params":{"description":"后端参数列表","items":{"$ref":"#/definitions/ApiBackendParamReq"},"type":"array"},"conditions":{"description":"策略条件列表","items":{"$ref":"#/definitions/ApiCoditionReq"},"type":"array"},"effect_mode":{"description":"关联的策略组合模式ALL、ANY","enum":["ALL","ANY"],"example":"ALL","type":"string"},"name":{"description":"策略后端名称。\n长度为3 ~ 64位的字符串,字符串由中文、英文字母、数字、下划线组成,且只能以中文或英文开头。","example":"policyHttpBackName","type":"string"},"req_method":{"description":"请求方式:GET、POST、PUT、DELETE、HEAD、PATCH、OPTIONS、ANY","enum":["GET","POST","PUT","DELETE","HEAD","PATCH","OPTIONS","ANY"],"example":"GET","type":"string"},"req_protocol":{"description":"请求协议:HTTP、HTTPS","enum":["HTTP","HTTPS"],"example":"HTTP","type":"string"},"req_uri":{"description":"请求地址。总长度不超过512,且满足URI规范。支持环境变量,使用环境变量时,每个变量名的长度为3 ~ 32位的字符串,字符串由英文字母、数字、中划线、下划线组成,且只能以英文开头。\n> 需要服从URI规范。","example":"/test","type":"string"},"timeout":{"description":"API网关请求后端服务的超时时间,最大60000,最小为1。单位:毫秒。默认值:45000,请求参数值不在合法范围内时将使用默认值","example":3000,"type":"integer"},"url_domain":{"description":"策略后端的Endpoint。\n由域名(或IP地址)和端口号组成,总长度不超过255。格式为域名:端口(如:apig.example.com:7443)。如果不写端口,则HTTPS默认端口号为443, HTTP默认端口号为80。\n支持环境变量,使用环境变量时,每个变量名的长度为3 ~ 32位的字符串,字符串由英文字母、数字、“_”、“-”组成,且只能以英文开头。","example":"apig.example.com:7443","type":"string"},"vpc_info":{"$ref":"#/definitions/ApiBackendVpcReq","description":"VPC通道详情。如果vpc_status=1,则这个object类型为必填信息"},"vpc_status":{"description":"是否使用VPC通道\n- 1 : 使用VPC通道\n- 2 : 不使用VPC通道","enum":[1,2],"example":1,"type":"integer"}},"required":["name","req_protocol","req_method","req_uri","effect_mode","conditions"]},"ApiPolicyHttpResp":{"properties":{"backend_params":{"description":"后端参数列表","items":{"$ref":"#/definitions/ApiBackendParamResp"},"type":"array"},"conditions":{"description":"策略条件列表","items":{"$ref":"#/definitions/ApiCoditionResp"},"type":"array"},"effect_mode":{"description":"关联的策略组合模式","type":"string"},"id":{"description":"参数编号","type":"string"},"name":{"description":"策略后端名称","type":"string"},"req_method":{"description":"请求方式","type":"string"},"req_protocol":{"description":"请求协议","type":"string"},"req_uri":{"description":"请求地址","type":"string"},"timeout":{"description":"访问超时时间,单位:毫秒","type":"integer"},"url_domain":{"description":"后端服务的地址","type":"string"},"vpc_info":{"description":"VPC通道信息","type":"string"},"vpc_status":{"description":"是否使用VPC通道","type":"integer"}}},"ApiPolicyMockReq":{"properties":{"backend_params":{"description":"后端参数列表","items":{"$ref":"#/definitions/ApiBackendParamReq"},"type":"array"},"conditions":{"description":"策略条件列表","items":{"$ref":"#/definitions/ApiCoditionReq"},"type":"array"},"effect_mode":{"description":"关联的策略组合模式ALL、ANY","enum":["ALL","ANY"],"example":"ALL","type":"string"},"name":{"description":"策略后端名称。长度为3 ~ 64位的字符串,字符串由中文、英文字母、数字、下划线组成,且只能以中文或英文开头。","type":"string"},"result_content":{"description":"返回结果","example":"返回结果成功","type":"string"}},"required":["name","effect_mode","conditions"]},"ApiPolicyMockResp":{"properties":{"backend_params":{"description":"后端参数列表","items":{"$ref":"#/definitions/ApiBackendParamResp"},"type":"array"},"conditions":{"description":"策略条件列表","items":{"$ref":"#/definitions/ApiCoditionResp"},"type":"array"},"effect_mode":{"description":"关联的策略组合模式","type":"string"},"id":{"description":"编号","type":"string"},"name":{"description":"策略后端名称","type":"string"},"result_content":{"description":"返回结果","type":"string"}}},"ApiReq":{"properties":{"auth_opt":{"$ref":"#/definitions/AuthOptReq","description":"认证方式参数"},"auth_type":{"description":"API的认证方式\n- NONE:无认证\n- APP:APP认证\n- IAM:IAM认证\n- AUTHORIZER:自定义认证","enum":["NONE","APP","IAM","AUTHORIZER"],"example":"IAM","type":"string"},"authorizer_id":{"description":"前端自定义认证对象的ID","type":"string"},"backend_api":{"$ref":"#/definitions/ApiBackendHttpReq","description":"web后端详情"},"backend_params":{"description":"API的后端参数列表","items":{"$ref":"#/definitions/ApiBackendParamReq"},"type":"array"},"backend_type":{"description":"后端类型\n- HTTP:web后端\n- FUNCTION:函数工作流\n- MOCK:模拟的后端","enum":["HTTP","FUNCTION","MOCK"],"example":"HTTP","type":"string"},"body_remark":{"description":"API请求体描述,可以是请求体示例、媒体类型、参数等信息。字符长度不超过20480\n> 中文字符必须为UTF-8或者unicode编码。","example":"API请求体描述","type":"string"},"cors":{"description":"是否支持跨域\n- TRUE:支持\n- FALSE:不支持\n默认:FALSE","enum":[false,true],"example":false,"type":"boolean"},"func_info":{"$ref":"#/definitions/ApiBackendFuncReq"},"group_id":{"description":"API所属的分组编号","example":"b9be707660c5406394f8973e087bae20","type":"string"},"match_mode":{"description":"API的匹配方式\n- SWA:前缀匹配\n- NORMAL:正常匹配(绝对匹配)\n默认:NORMAL","enum":["SWA","NORMAL"],"example":"NORMAL","type":"string"},"mock_info":{"$ref":"#/definitions/ApiBackendMockReq","description":"mock后端详情"},"name":{"description":"API名称长度。\n为3 ~ 64位的字符串,字符串由中文、英文字母、数字、下划线组成,且只能以英文或中文开头。\n> 中文字符必须为UTF-8或者unicode编码。","example":"api_name","type":"string"},"policy_functions":{"description":"函数工作流策略后端列表","items":{"$ref":"#/definitions/ApiPolicyFuncReq"},"type":"array"},"policy_https":{"description":"web策略后端列表","items":{"$ref":"#/definitions/ApiPolicyHttpReq"},"type":"array"},"policy_mocks":{"description":"mock策略后端列表","items":{"$ref":"#/definitions/ApiPolicyMockReq"},"type":"array"},"remark":{"description":"API描述。字符长度不超过255\n> 中文字符必须为UTF-8或者unicode编码。","example":"API描述","type":"string"},"req_method":{"description":"API的请求方式:GET、POST、PUT、DELETE、HEAD、PATCH、OPTIONS、ANY","enum":["GET","POST","PUT","DELETE","HEAD","PATCH","OPTIONS","ANY"],"example":"GET","type":"string"},"req_params":{"description":"API的请求参数列表","items":{"$ref":"#/definitions/ApiReqParamReq"},"type":"array"},"req_protocol":{"description":"API的请求协议\n- HTTP\n- HTTPS\n- BOTH:同时支持HTTP和HTTPS\n默认:HTTPS","enum":["HTTP","HTTPS","BOTH"],"example":"HTTP","type":"string"},"req_uri":{"description":"API的访问地址\n> 需要服从URI规范。","example":"/test","type":"string"},"response_id":{"description":"分组自定义响应ID","type":"string"},"result_failure_sample":{"description":"失败返回示例,描述API的异常返回信息。字符长度不超过20480\n> 中文字符必须为UTF-8或者unicode编码。","example":"失败返回示例","type":"string"},"result_normal_sample":{"description":"正常响应示例,描述API的正常返回信息。字符长度不超过20480\n> 中文字符必须为UTF-8或者unicode编码。","example":"正常响应示例","type":"string"},"tags":{"description":"标签。\n包含一个服务名称标签和若干其它标签\n服务名称标签非必填,必须以APIG-SN-开头\n其它标签非必填,且不能以APIG-SN-开头","example":["tag"],"items":{"type":"string"},"type":"array"},"type":{"description":"API类型\n- 1:公有API\n- 2:私有API","enum":[1,2],"example":1,"type":"integer"},"version":{"description":"API的版本。字符长度不超过16","example":"v1","type":"string"}},"required":["group_id","name","type","req_protocol","req_method","req_uri","auth_type","backend_type"]},"ApiReqParamReq":{"properties":{"default_value":{"description":"参数默认值","example":"参数默认值","type":"string"},"enumerations":{"description":"参数枚举值","type":"string"},"json_schema":{"description":"JSON校验规则(暂不支持)","type":"string"},"location":{"description":"参数位置:PATH、QUERY、HEADER","enum":["PATH","QUERY","HEADER"],"example":"QUERY","type":"string"},"max_num":{"description":"参数最大值(参数类型为NUMBER时有效)","type":"integer"},"max_size":{"description":"参数最大长度","type":"integer"},"min_num":{"description":"参数最小值(参数类型为NUMBER时有效)","type":"integer"},"min_size":{"description":"参数最小长度","type":"integer"},"name":{"description":"参数名称。\n长度为1 ~ 32位的字符串,字符串由英文字母、数字、中划线、下划线、英文句号组成,且只能以英文开头。","example":"paramName","type":"string"},"regular":{"description":"正则校验规则(暂不支持)","type":"string"},"remark":{"description":"描述信息。长度不超过255个字符\n> 中文字符必须为UTF-8或者unicode编码。","example":"描述信息","type":"string"},"required":{"description":"是否必须\n- 1:是\n- 2:否\nlocation为PATH时,required默认为1,其他场景required默认为2","enum":[1,2],"example":1,"type":"integer"},"sample_value":{"description":"参数示例值","example":"参数示例值","type":"string"},"type":{"description":"参数类型:STRING、NUMBER","enum":["STRING","NUMBER"],"example":"STRING","type":"string"},"valid_enable":{"description":"是否开启校验\n- 1:开启校验\n- 2:不开启校验\n默认为2","enum":[1,2],"example":1,"type":"integer"}},"required":["name","type","location"]},"ApiReqParamResp":{"properties":{"default_value":{"description":"参数默认值","type":"string"},"enumerations":{"description":"参数枚举值","type":"string"},"id":{"description":"参数编号","type":"string"},"json_schema":{"description":"JSON校验规则(暂不支持)","type":"string"},"location":{"description":"参数位置","type":"string"},"max_num":{"description":"参数最大值(参数类型为NUMBER时有效)","type":"integer"},"max_size":{"description":"参数最大长度","type":"integer"},"min_num":{"description":"参数最小值(参数类型为NUMBER时有效)","type":"integer"},"min_size":{"description":"参数最小长度","type":"integer"},"name":{"description":"参数名称","type":"string"},"regular":{"description":"正则校验规则(暂不支持)","type":"string"},"remark":{"description":"描述","type":"string"},"required":{"description":"是否必须","type":"integer"},"sample_value":{"description":"参数示例值","type":"string"},"type":{"description":"参数类型","type":"string"},"valid_enable":{"description":"是否开启校验","type":"integer"}}},"ApiResp":{"properties":{"arrange_necessary":{"description":"是否需要编排","type":"integer"},"auth_opt":{"description":"API认证方式参数","items":{"$ref":"#/definitions/AuthOptResp"},"type":"string"},"auth_type":{"description":"API的认证方式","type":"string"},"backend_api":{"$ref":"#/definitions/ApiBackendHttpResp","description":"web后端详情"},"backend_params":{"description":"API的后端参数列表","items":{"$ref":"#/definitions/ApiBackendParamResp"},"type":"array"},"backend_type":{"description":"后端类型","type":"string"},"body_remark":{"description":"API请求体描述,可以是请求体示例、媒体类型、参数等信息","type":"string"},"cors":{"description":"是否支持跨域","type":"boolean"},"func_info":{"$ref":"#/definitions/ApiBackendFuncResp","description":"函数工作流后端详情"},"group_id":{"description":"API所属的分组编号","type":"string"},"group_name":{"description":"API所属分组的名称","type":"string"},"id":{"description":"API编号","type":"string"},"match_mode":{"description":"API的匹配方式","type":"string"},"mock_info":{"$ref":"#/definitions/ApiBackendMockResp","description":"mock后端详情"},"name":{"description":"API名称","type":"string"},"policy_functions":{"description":"函数工作流策略后端列表","items":{"$ref":"#/definitions/ApiPolicyFuncResp"},"type":"array"},"policy_https":{"description":"web策略后端列表","items":{"$ref":"#/definitions/ApiPolicyHttpResp"},"type":"array"},"policy_mocks":{"description":"mock策略后端列表","items":{"$ref":"#/definitions/ApiPolicyMockResp"},"type":"array"},"register_time":{"description":"API注册时间","type":"string"},"remark":{"description":"API描述","type":"string"},"req_method":{"description":"API的请求方式","type":"string"},"req_params":{"description":"API的请求参数列表","items":{"$ref":"#/definitions/ApiReqParamResp"},"type":"array"},"req_protocol":{"description":"API的请求协议","type":"string"},"req_uri":{"description":"API的访问地址","type":"string"},"response_id":{"description":"分组自定义响应ID","type":"string"},"result_failure_sample":{"description":"失败返回示例,描述API的异常返回信息","type":"string"},"result_normal_sample":{"description":"正常响应示例,描述API的正常返回信息","type":"string"},"status":{"description":"API的状态","type":"integer"},"tags":{"description":"标签","type":"string"},"type":{"description":"API类型","type":"integer"},"update_time":{"description":"API修改时间","type":"string"},"version":{"description":"API的版本","type":"string"}}},"AuthOptReq":{"properties":{"app_code_auth_type":{"description":"AppCode简易认证类型,仅在auth_type为APP时生效,默认为DISABLE:\n- DISABLE:不开启简易认证\n- HEADER:开启简易认证且AppCode位置在HEADER","example":"DISABLE","type":"string"}}},"AuthOptResp":{"properties":{"app_code_auth_type":{"description":"AppCode简易认证类型,仅在auth_type为APP时生效,默认为DISABLE:\n- DISABLE:不开启简易认证\n- HEADER:开启简易认证且AppCode位置在HEADER","type":"string"}}}},"description":null,"group_id":"d0b771ab4a6d46a895580726f0d5479b","host":"apig.cn-north-4.myhuaweicloud.com","id":"12e2b7942aac4377a0b944db07fa1fc0","info_version":"v1","method":"post","name":"CreateApi","parameters":{},"paths":{"/apigw/apis":{"post":{"description":"添加一个API,API即一个服务接口,具体的服务能力。API分为两部分,第一部分为面向API使用者的API接口,定义了使用者如何调用这个API。第二部分面向API提供者,由API提供者定义这个API的真实的后端情况,定义了API网关如何去访问真实的后端服务。API的真实后端服务目前支持三种类型:传统的HTTP/HTTPS形式的web后端、函数工作流、MOCK。","operationId":"CreateApi","parameters":[{"description":"用户Token。通过调用IAM服务获取用户Token接口获取(响应消息头中X-Subject-Token的值)。","in":"header","name":"X-Auth-Token","required":true,"type":"string","x-example":"MIIDkgYJKoZIhvcNAQcCoIIDgzCCXXXXXX..."},{"description":"注册API的请求体","in":"body","name":"CreateApiRequestBody","required":true,"schema":{"$ref":"#/definitions/ApiReq"}}],"responses":{"201":{"description":"Created","examples":{"application/json":{"arrange_necessary":2,"auth_opt":{"app_code_auth_type":"DISABLE"},"auth_type":"AUTHORIZER","authorizer_id":"7f9dab147a414f35a19d158da62e5264","backend_api":{"id":"4d476cef173141dda906cc403d38b69e","register_time":"2020-06-01T06:24:22.216852274Z","req_method":"GET","req_protocol":"HTTPS","req_uri":"/benchmark","status":1,"timeout":5000,"update_time":"2020-06-01T06:24:22.216852456Z","url_domain":"1.0.2.0:8086","vpc_status":2},"backend_params":[{"id":"6a2120394ce64072884de8927048f874","location":"HEADER","name":"backHeader","origin":"REQUEST","req_param_id":"4745504c444e44859e20eebf7b5b156d","value":"header-demo"},{"id":"ffca0e79583c48c083dcd4e2bf727ed9","location":"QUERY","name":"backQuery","origin":"REQUEST","req_param_id":"6e936a3e99424847af219c1130795168","value":"query_demo"},{"id":"5585d84f578445d78d3837cf7d5bc96e","location":"HEADER","name":"X-CONSTANT-HEADER","origin":"CONSTANT","remark":"constant_demo","value":"demo"},{"id":"7df5d3cc7de547ba873edd59e73a1adc","location":"HEADER","name":"app-id","origin":"SYSTEM","remark":"调用者的应用id","value":"$context.appId"}],"backend_type":"HTTP","cors":false,"group_id":"e49c87dd8a59496e8671fb0c5bad1114","group_name":"APIGroup_demo","id":"85dbde70780943768a2fb113a89df2c8","match_mode":"NORMAL","name":"api_name","register_time":"2020-06-01T06:24:22.215840334Z","remark":"API描述","req_method":"GET","req_params":[{"id":"6e936a3e99424847af219c1130795168","location":"QUERY","name":"query_demo","required":1,"type":"STRING","valid_enable":2},{"id":"4745504c444e44859e20eebf7b5b156d","location":"HEADER","name":"header-demo","remark":"header remark","required":2,"type":"STRING","valid_enable":2}],"req_protocol":"HTTPS","req_uri":"/test","response_id":"981e6c8f847f47199a9faf4409b751a5","result_failure_sample":"失败返回示例","result_normal_sample":"正常响应示例","status":1,"tags":["webApi"],"type":1,"update_time":"2020-06-01T06:24:22.215840563Z","version":"V0.0.1"},"application/json-1":{"arrange_necessary":2,"auth_opt":{"auth_code_auth_type":"DISABLE"},"auth_type":"APP","backend_type":"FUNCTION","cors":false,"func_info":{"authorizer_id":"0482914abaaa42c4ab064b822b015c10","function_urn":"urn:fss:cn-north-7:73d69ae0cfcf460190522d06b60f05ad:function:default:function_demo","id":"13464a94eab04f84932637a63be8ee41","invocation_type":"sync","register_time":"2020-06-01T08:44:27.315465242Z","status":1,"timeout":5000,"update_time":"2020-06-01T08:44:27.315465428Z","version":"latest"},"group_id":"e49c87dd8a59496e8671fb0c5bad1114","group_name":"APIGroup_demo","id":"9ef294ac3e8944cc9717d6e15594807a","match_mode":"NORMAL","name":"function_api","register_time":"2020-06-01T08:44:27.314853393Z","remark":"function api","req_method":"GET","req_protocol":"HTTPS","req_uri":"/function/test","response_id":"981e6c8f847f47199a9faf4409b751a5","result_failure_sample":"失败返回示例","result_normal_sample":"正常响应示例","status":1,"tags":["functionApi"],"type":1,"update_time":"2020-06-01T08:44:27.314853618Z"},"application/json-2":{"auth_opt":{"auth_code_auth_type":"DISABLE"},"auth_type":"IAM","backend_type":"MOCK","cors":false,"group_id":"e49c87dd8a59496e8671fb0c5bad1114","group_name":"APIGroup_demo","id":"070775f36cbf4ab7a88fc0601105230f","match_mode":"SWA","mock_info":{"id":"a27a60bf2bbe4eacb53bf707bb61add1","register_time":"2020-06-01T09:02:08.594236759Z","result_content":"mock success","update_time":"2020-06-01T09:02:08.594237034Z"},"name":"mock_api","policy_mocks":[{"conditions":[{"condition_origin":"source","condition_value":"1.0.1.0","id":"cee90d4052f6481f91739923708938e2"}],"effect_mode":"ANY","id":"964fba3d40c54b17bb07f30f0ef9fcc6","name":"后端zx7s","result_content":"mock policy success"}],"register_time":"2020-06-01T09:02:08.593036161Z","remark":"mock api","req_method":"GET","req_protocol":"HTTPS","req_uri":"/mock/test","response_id":"981e6c8f847f47199a9faf4409b751a5","result_failure_sample":"失败返回示例","result_normal_sample":"正常响应示例","status":1,"tags":["mockApi"],"type":1,"update_time":"2020-06-01T09:02:08.59303637Z"}},"schema":{"$ref":"#/definitions/ApiResp"}},"400":{"description":"Bad Request"},"401":{"description":"Unauthorized"},"403":{"description":"Forbidden"},"404":{"description":"Not Found"},"500":{"description":"Internal Server Error"}},"schemes":["https"],"summary":"注册API","tags":["共享版-API管理"],"x-is-registered":"Y","x-request-examples-1":{"auth_opt":{"auth_code_auth_type":"DISABLE"},"auth_type":"AUTHORIZER","authorizer_id":"7f9dab147a414f35a19d158da62e5264","backend_api":{"req_method":"GET","req_protocol":"HTTPS","req_uri":"/benchmark","timeout":5000,"url_domain":"1.0.2.0:8086","vpc_status":2},"backend_params":[{"location":"HEADER","name":"backHeader","origin":"REQUEST","value":"header-demo"},{"location":"QUERY","name":"backQuery","origin":"REQUEST","value":"query_demo"},{"location":"HEADER","name":"X-CONSTANT-HEADER","origin":"CONSTANT","remark":"constant_demo","value":"demo"},{"location":"HEADER","name":"app-id","origin":"SYSTEM","remark":"调用者的应用id","value":"$context.appId"}],"backend_type":"HTTP","cors":false,"group_id":"e49c87dd8a59496e8671fb0c5bad1114","match_mode":"NORMAL","name":"api_name","remark":"API描述","req_method":"GET","req_params":[{"location":"QUERY","name":"query_demo","required":1,"type":"STRING","valid_enable":2},{"location":"HEADER","name":"header-demo","remark":"header remark","required":2,"type":"STRING","valid_enable":2}],"req_protocol":"HTTPS","req_uri":"/test","response_id":"981e6c8f847f47199a9faf4409b751a5","result_failure_sample":"失败返回示例","result_normal_sample":"正常响应示例","tags":["webApi"],"type":1},"x-request-examples-2":{"auth_opt":{"auth_code_auth_type":"DISABLE"},"auth_type":"APP","backend_type":"FUNCTION","cors":false,"func_info":{"authorizer_id":"0482914abaaa42c4ab064b822b015c10","function_urn":"urn:fss:cn-north-7:73d69ae0cfcf460190522d06b60f05ad:function:default:function_demo","invocation_type":"sync","timeout":5000,"version":"latest"},"group_id":"e49c87dd8a59496e8671fb0c5bad1114","match_mode":"NORMAL","name":"function_api","remark":"function api","req_method":"GET","req_protocol":"HTTPS","req_uri":"/function/test","response_id":"981e6c8f847f47199a9faf4409b751a5","result_failure_sample":"失败返回示例","result_normal_sample":"正常响应示例","tags":["functionApi"],"type":1},"x-request-examples-3":{"auth_opt":{"auth_code_auth_type":"DISABLE"},"auth_type":"IAM","backend_type":"MOCK","cors":false,"group_id":"e49c87dd8a59496e8671fb0c5bad1114","match_mode":"swa","mock_info":{"result_content":"mock success"},"name":"mock_api","policy_mocks":[{"conditions":[{"condition_origin":"source","condition_value":"1.0.1.0"}],"effect_mode":"ANY","name":"后端zx7s","result_content":"mock policy success"}],"remark":"mock api","req_method":"GET","req_protocol":"HTTPS","req_uri":"/mock/test","response_id":"981e6c8f847f47199a9faf4409b751a5","result_failure_sample":"失败返回示例","result_normal_sample":"正常响应示例","tags":["mockApi"],"type":1},"x-request-examples-description-1":"创建Web后端API","x-request-examples-description-2":"创建函数工作流后端API","x-request-examples-description-3":"创建模拟后端API","x-support-sdk":"N"}}},"product_short":"APIG","region_id":"cn-north-4","schemes":["HTTPS"],"security_definitions":null,"summary":"注册API","tags":"共享版-API管理","uri":null,"version":"2.0"}