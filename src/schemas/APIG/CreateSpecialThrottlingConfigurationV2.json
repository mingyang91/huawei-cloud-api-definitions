{"base_path":"/v2","components":null,"consumes":"[\"application/json;charset=UTF-8\"]","definitions":{"ErrorMsg":{"properties":{"error_code":{"description":"错误码","type":"string"},"error_msg":{"description":"错误描述","type":"string"}},"required":["error_code","error_msg"]},"ThrottleSpecialBase":{"properties":{"app_id":{"description":"作用的APP编号","type":"string"},"app_name":{"description":"作用的APP名称","type":"string"},"apply_time":{"description":"设置时间","format":"date-time","type":"string"},"call_limits":{"description":"特殊对象在流控时间内能够访问API的最大次数限制","format":"int32","type":"integer"},"id":{"description":"特殊配置的编号","type":"string"}}},"ThrottleSpecialCreate":{"properties":{"call_limits":{"description":"流控时间内特殊对象能够访问API的最大次数限制","example":150,"format":"int32","type":"integer"},"object_id":{"description":"特殊APP的编号或特殊租户的账号ID","example":"98efd77d10b54eca8170ed30a4a286a4","type":"string"},"object_type":{"description":"特殊对象类型","enum":["APP","USER"],"example":"APP","type":"string"}},"required":["call_limits","object_id","object_type"]},"ThrottleSpecialInfo":{"allOf":[{"$ref":"#/definitions/ThrottleSpecialBase"},{"properties":{"object_id":{"description":"特殊对象的身份标识","type":"string"},"object_name":{"description":"作用的APP或租户的名称","type":"string"},"object_type":{"description":"特殊对象类型:APP、USER","type":"string"},"throttle_id":{"description":"流控策略编号","type":"string"}},"type":"object"}]}},"description":null,"group_id":"d0b771ab4a6d46a895580726f0d5479b","host":"apig.cn-north-4.myhuaweicloud.com","id":"25bbdbdf38b645ca87f4fc12c78eeb38","info_version":"v2","method":"post","name":"CreateSpecialThrottlingConfigurationV2","parameters":{"apic_instance_id":{"description":"实例ID,在API网关控制台的“实例信息”中获取。","in":"path","name":"instance_id","required":true,"type":"string","x-example":"f0fa1789-3b76-433b-a787-9892951c620e"},"apic_project_id":{"description":"项目ID,获取方式请参见[获取项目ID](apig-api-180713009.xml)。","in":"path","name":"project_id","required":true,"type":"string","x-example":"73d69ae0cfcf460190522d06b60f05ad"},"apic_throttle_id":{"description":"流控策略的编号","in":"path","name":"throttle_id","required":true,"type":"string","x-example":"3437448ad06f4e0c91a224183116e965"},"apic_x_auth_token":{"description":"用户Token。通过调用IAM服务获取用户Token接口获取(响应消息头中X-Subject-Token的值)。","in":"header","name":"X-Auth-Token","required":true,"type":"string","x-example":"MIIDkgYJKoZIhvcNAQcCoIIDgzCCXXXXXX..."}},"paths":{"/{project_id}/apigw/instances/{instance_id}/throttles/{throttle_id}/throttle-specials":{"post":{"description":"流控策略可以限制一段时间内可以访问API的最大次数,也可以限制一段时间内单个租户和单个APP可以访问API的最大次数。\n\n如果想要对某个特定的APP进行特殊设置,例如设置所有APP每分钟的访问次数为500次,但想设置APP1每分钟的访问次数为800次,可以通过在流控策略中设置特殊APP来实现该功能。\n\n为流控策略添加一个特殊设置的对象,可以是APP,也可以是租户。","operationId":"CreateSpecialThrottlingConfigurationV2","parameters":[{"$ref":"#/parameters/apic_x_auth_token"},{"$ref":"#/parameters/apic_project_id"},{"$ref":"#/parameters/apic_instance_id"},{"$ref":"#/parameters/apic_throttle_id"},{"description":"创建特殊设置的请求体","in":"body","name":"CreateSpecialThrottlingConfigurationV2RequestBody","required":true,"schema":{"$ref":"#/definitions/ThrottleSpecialCreate"}}],"responses":{"201":{"description":"Created","examples":{"application/json":{"app_id":"356de8eb7a8742168586e5daf5339965","app_name":"app_demo","apply_time":"2020-08-04T02:40:56.717710961Z","call_limits":150,"id":"a3e9ff8db55544ed9db91d8b048770c0","object_id":"356de8eb7a8742168586e5daf5339965","object_name":"app_demo","object_type":"APP","throttle_id":"3437448ad06f4e0c91a224183116e965"}},"schema":{"$ref":"#/definitions/ThrottleSpecialInfo"}},"400":{"description":"Bad Request","examples":{"application/json":{"error_code":"APIG.2003","error_msg":"The parameter value is too large,parameterName:call_limits. Please refer to the support documentation"}},"schema":{"$ref":"#/definitions/ErrorMsg"}},"401":{"description":"Unauthorized","examples":{"application/json":{"error_code":"APIG.1002","error_msg":"Incorrect token or token resolution failed"}},"schema":{"$ref":"#/definitions/ErrorMsg"}},"403":{"description":"Forbidden","examples":{"application/json":{"error_code":"APIG.1005","error_msg":"No permissions to request this method"}},"schema":{"$ref":"#/definitions/ErrorMsg"}},"404":{"description":"Not Found","examples":{"application/json":{"error_code":"APIG.3004","error_msg":"App 356de8eb7a8742168586e5daf5339965 does not exist"}},"schema":{"$ref":"#/definitions/ErrorMsg"}},"500":{"description":"Internal Server Error","examples":{"application/json":{"error_code":"APIG.9999","error_msg":"System error"}},"schema":{"$ref":"#/definitions/ErrorMsg"}}},"schemes":["https"],"summary":"创建特殊设置","tags":["专享版-设置特殊流控"],"x-api-framework":"RestfulAPI","x-api-position":"管理面","x-api-type":"open-api","x-api-user":"IAM普通租户","x-apigateway-request-type":"public","x-is-registered":"Y","x-open-region-cloud":"hws,hws_hk,cmcc,ctc,dt,g42,hk_g42,hk_sbc,hk_tm,hws_eu,hws_ocb,ocb,sbc,tm","x-order":1,"x-produc-type":"apig","x-request-examples-1":{"call_limits":150,"object_id":"356de8eb7a8742168586e5daf5339965","object_type":"APP"},"x-request-examples-description-1":"设置特殊流控,在流控策略中添加特殊应用,阈值为150","x-support-sdk":"Y"}}},"product_short":"APIG","region_id":"cn-north-4","schemes":["HTTPS"],"security_definitions":null,"summary":"创建特殊设置","tags":"专享版-设置特殊流控","uri":null,"version":"2.0"}