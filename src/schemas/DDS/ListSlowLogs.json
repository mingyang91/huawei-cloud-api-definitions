{"base_path":"/","components":null,"consumes":"[\"application/json\"]","definitions":{"ErrorResponse":{"properties":{"error_code":{"description":"错误码。","example":"DBS.200001","type":"string"},"error_msg":{"description":"错误消息。","example":"参数错误。","type":"string"}},"required":["error_code","error_msg"]},"ListSlowlogsResponseBody":{"properties":{"slow_log_list":{"description":"具体信息。","items":{"$ref":"#/definitions/SlowlogResult"},"type":"array"},"total_record":{"description":"数据库版本总记录数。","type":"integer"}},"required":["slow_log_list","total_record"]},"SlowlogResult":{"properties":{"database":{"description":"所属数据库。","example":"geography","type":"string"},"lock_time":{"description":"等待锁时间。","example":"10 us","type":"string"},"node_name":{"description":"节点名称。","example":"Test_replica_node_2","type":"string"},"query_sample":{"description":"执行语法。","example":"testDb","type":"string"},"rows_examined":{"description":"扫描的行数量。","example":"0","type":"string"},"rows_sent":{"description":"角色所在数据库名称。","example":"testDb","type":"string"},"start_time":{"description":"发生时间,UTC时间。","example":"2020-11-15T22:49:38.643000Z","type":"string"},"time":{"description":"执行时间。","example":"101 ms","type":"string"},"type":{"description":"语句类型。","example":"REMOVE","type":"string"}},"required":["node_name","query_sample","type","time","lock_time","rows_sent","rows_examined","database","start_time"]}},"description":null,"group_id":"a2654930c2d440c78366c9c164a23e86","host":"dds.cn-north-4.myhuaweicloud.com","id":"956d67d1349a479092b0d830e1164359","info_version":"v3","method":"get","name":"ListSlowLogs","parameters":{},"paths":{"/v3/{project_id}/instances/{instance_id}/slowlog":{"get":{"description":"查询数据库慢日志信息。","operationId":"ListSlowLogs","parameters":[{"description":"用户Token。","in":"header","name":"x-auth-token","required":true,"type":"string","x-example":"******"},{"description":"租户在某一region下的project ID。","in":"path","name":"project_id","required":true,"type":"string","x-example":"619d3e78f61b4be68bc5aa0b59edcf7b"},{"description":"实例ID,可以调用“查询实例列表和详情”接口获取。如果未申请实例,可以调用“创建实例”接口创建。","in":"path","name":"instance_id","required":true,"type":"string","x-example":"91f020b75c1c4bdd8d83933033ff9308in02"},{"description":"开始时间,格式为“yyyy-mm-ddThh:mm:ssZ”。\n其中,T指某个时间的开始;Z指时区偏移量,例如北京时间偏移显示为+0800。","in":"query","name":"start_date","required":true,"type":"string","x-example":"2020-11-14T16:00:00+0800"},{"description":"结束时间,格式为“yyyy-mm-ddThh:mm:ssZ”。\n其中,T指某个时间的开始;Z指时区偏移量,例如北京时间偏移显示为+0800。只能查询当前时间前一个月内的慢日志。注:结束时间不能晚于当前时间。","in":"query","name":"end_date","required":true,"type":"string","x-example":"2020-11-20T16:00:00+0800"},{"description":"节点ID,取空值,表示查询实例下所有允许查询的节点。\n使用请参考《DDS API参考》的“查询实例列表和详情”响应消息表“nodes 数据结构说明”的“id”。允许查询的节点如下:\n- 集群实例下面的 shard节点\n- 副本集、单节点实例下面的所有节点","in":"query","name":"node_id","type":"string","x-example":"fea413b892214c53a58e5a529096ed75no02"},{"description":"语句类型,取空值,表示查询所有语句类型,也可指定如下日志类型:\n- INSERT\n- QUERY\n- UPDATE\n- REMOVE\n- GETMORE\n- COMMAND\n- KILLCURSORS","enum":["INSERT","QUERY","UPDATE","REMOVE","GETMORE","COMMAND","KILLCURSORS"],"in":"query","name":"type","type":"string","x-example":"INSERT"},{"description":"索引位置,偏移量。取值范围为 [0, 1999]。\n从第一条数据偏移offset条数据后开始查询,默认为0(偏移0条数据,表示从第一条数据开始查询),必须为数字,不能为负数。","in":"query","maximum":1999,"minimum":0,"name":"offset","type":"integer","x-example":0},{"description":"查询记录数。取值范围[1, 100],默认10 (表示默认返回10条数据)。\n注意: limit 与 offset 的和需要满足 <= 2000的条件。","in":"query","maximum":100,"minimum":1,"name":"limit","type":"integer","x-example":10}],"responses":{"200":{"description":"Success.","examples":{"application/json":{"slow_log_list":[{"database":"geography","lock_time":"10 us","node_name":"Test_replica_node_2","query_sample":"{\"responseLength\": 230, \"ts\": {\"$date\": 1605480486800}, \"ninserted\": 1, \"locks\": {\"oplog\": {\"acquireCount\": {\"w\": 1}}, \"Global\": {\"acquireCount\": {\"r\": 3, \"w\": 2}}, \"Collection\": {\"acquireCount\": {\"w\": 2}}, \"Database\": {\"acquireCount\": {\"w\": 3}}}, \"numYield\": 0, \"ns\": \"geographySpace.tiles\"}","rows_examined":"0","rows_sent":"0","start_time":"2020-11-15T22:49:38.643000Z","time":"101 ms","type":"REMOVE"}],"total_record":1}},"schema":{"$ref":"#/definitions/ListSlowlogsResponseBody"}},"default":{"description":"Client or server error.","schema":{"$ref":"#/definitions/ErrorResponse"}}},"summary":"查询数据库慢日志","tags":["获取日志信息"],"x-constraint":"- 在入参start_date和end_date的时间段内最多查询到2000条数据。","x-is-registered":"N","x-request-examples-description-1":"","x-request-examples-url-1":"GET https://{endpoint}/v3/0483b6b16e954cb88930a360d2c4e663/instances/6ade8143870047b8999aba8f1891b48ein02/slowlog?start_date=2018-08-06T10:41:14+0800&end_date=2018-08-07T10:41:14+0800","x-support-sdk":"Y"}}},"product_short":"DDS","region_id":"cn-north-4","schemes":["HTTPS"],"security_definitions":null,"summary":"查询数据库慢日志","tags":"获取日志信息","uri":null,"version":"2.0"}