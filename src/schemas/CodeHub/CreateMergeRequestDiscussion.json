{"base_path":"/","components":null,"consumes":"","definitions":{"CreateMergeRequestDiscussionBodyDto":{"properties":{"assignee_id":{"description":"指派人id","type":"string"},"body":{"description":"检视意见内容","type":"string"},"position":{"$ref":"#/definitions/PositionDto","description":"代码位置信息"},"proposer_id":{"description":"提出人id","type":"string"},"review_categories":{"description":"检视意见分类","type":"string"},"review_modules":{"description":"检视意见模块","type":"string"},"severity":{"description":"严重程度","type":"string"}},"required":["body"],"type":"object"},"CreateMergeRequestDiscussionResult":{"properties":{"error":{"$ref":"#/definitions/Error","description":"响应错误"},"result":{"$ref":"#/definitions/MergeRequestDiscussionDto","description":"响应结果"},"status":{"description":"响应状态","type":"string"}},"type":"object"},"Error":{"properties":{"code":{"description":"错误码","type":"string"},"message":{"description":"错误信息","type":"string"}},"title":"Error","type":"object"},"MergeRequestBasicDiscussionDto":{"properties":{"a_mode":{"description":"变更前文件模式","type":"string"},"archived":{"description":"检视意见是否存档","type":"boolean"},"assignee":{"$ref":"#/definitions/UserBasicDto","description":"指派人"},"b_mode":{"description":"变更后文件模式","type":"string"},"commit_id":{"description":"关联的提交id","type":"string"},"deleted_file":{"description":"此次变更是否删除文件","type":"boolean"},"id":{"description":"评论id","type":"string"},"individual_note":{"description":"individual_note","type":"boolean"},"merge_request_version_params":{"$ref":"#/definitions/MergeRequestVersionParamsDto","description":"MR版本信息"},"new_file":{"description":"此次变更是否新增文件","type":"boolean"},"noteable_type":{"description":"目标类型","type":"string"},"notes":{"description":"主评和回复列表","items":{"$ref":"#/definitions/NoteDto"},"maxItems":1,"minItems":0,"type":"array"},"project_full_path":{"description":"仓库路径","type":"string"},"project_id":{"description":"仓库id","format":"int32","maximum":2147483647,"minimum":1,"type":"integer"},"proposer":{"$ref":"#/definitions/UserBasicDto","description":"提出人"},"resolved":{"description":"检视意见是否解决","type":"boolean"},"review_categories":{"description":"检视意见分类","type":"string"},"review_categories_cn":{"description":"检视意见分类中文名","type":"string"},"review_categories_en":{"description":"检视意见分类英文名","type":"string"},"review_modules":{"description":"检视意见模块","type":"string"},"severity":{"description":"严重程度","type":"string"},"severity_cn":{"description":"严重程度中文名","type":"string"},"severity_en":{"description":"严重程度英文名","type":"string"}},"type":"object"},"MergeRequestDiscussionDto":{"allOf":[{"$ref":"#/definitions/MergeRequestBasicDiscussionDto"},{"properties":{"added_lines":{"description":"新增行数","maximum":2147483647,"minimum":1,"type":"integer"},"diff_file":{"description":"变更文件","type":"string"},"removed_lines":{"description":"删除行数","maximum":2147483647,"minimum":1,"type":"integer"}}}],"type":"object"},"MergeRequestVersionParamsDto":{"properties":{"commit_id":{"description":"源分支最新提交","type":"string"},"diff_id":{"description":"MR最新变更id","format":"int32","maximum":2147483647,"minimum":1,"type":"integer"},"start_sha":{"description":"目标分支最新提交","type":"string"}},"type":"object"},"NoteDto":{"properties":{"archived":{"description":"是否存档","type":"boolean"},"assignee":{"$ref":"#/definitions/UserBasicDto","description":"指派人"},"attachment":{"description":"附件","type":"string"},"author":{"$ref":"#/definitions/UserBasicDto","description":"作者"},"body":{"description":"检视意见内容","type":"string"},"commit_id":{"description":"关联的提交id","type":"string"},"created_at":{"description":"创建时间","type":"string"},"diff":{"description":"变更内容","type":"string"},"diff_file":{"description":"变更文件","type":"string"},"discussion_id":{"description":"讨论id","type":"string"},"file_path":{"description":"文件路径","type":"string"},"id":{"description":"note id","format":"int32","maximum":2147483647,"minimum":1,"type":"integer"},"is_outdated":{"description":"是否过时","type":"boolean"},"is_reply":{"description":"是否是回复","type":"boolean"},"line":{"description":"行号","type":"string"},"noteable_id":{"description":"目标id","format":"int32","maximum":2147483647,"minimum":1,"type":"integer"},"noteable_iid":{"description":"目标iid","format":"int32","maximum":2147483647,"minimum":1,"type":"integer"},"noteable_type":{"description":"目标类型","type":"string"},"position":{"$ref":"#/definitions/PositionDto","description":"关联的代码位置"},"project":{"description":"所属项目","type":"string"},"proposer":{"$ref":"#/definitions/UserBasicDto","description":"提出人"},"resolvable":{"description":"是否可解决","type":"boolean"},"resolved":{"description":"是否解决","type":"boolean"},"resolved_by":{"$ref":"#/definitions/UserBasicDto","description":"解决人"},"review_categories":{"description":"检视意见分类","type":"string"},"review_categories_cn":{"description":"检视意见分类中文名","type":"string"},"review_categories_en":{"description":"检视意见分类英文名","type":"string"},"review_modules":{"description":"检视意见模块","type":"string"},"severity":{"description":"严重程度","type":"string"},"severity_cn":{"description":"严重程度中文名","type":"string"},"severity_en":{"description":"严重程度英文名","type":"string"},"system":{"description":"是否是系统生成的日志","type":"boolean"},"type":{"description":"note类型","type":"string"},"updated_at":{"description":"更新时间","type":"string"}},"type":"object"},"PositionDto":{"properties":{"base_sha":{"description":"源分支base提交节点","type":"string"},"head_sha":{"description":"源分支最新提交节点","type":"string"},"new_line":{"description":"修改后行号","format":"int32","type":"integer"},"new_path":{"description":"修改后文件路径","type":"string"},"old_line":{"description":"修改前行号","format":"int32","type":"integer"},"old_path":{"description":"修改前文件路径","type":"string"},"position_type":{"description":"变更类型","type":"string"},"start_sha":{"description":"目标分支最新提交节点","type":"string"}},"type":"object"},"UserBasicDto":{"allOf":[{"$ref":"#/definitions/UserSafeDto"},{"properties":{"avatar_path":{"description":"头像路径","type":"string"},"avatar_url":{"description":"头像url","type":"string"},"email":{"description":"邮箱","type":"string"},"name_cn":{"description":"中文名","type":"string"},"nick_name":{"description":"昵称","type":"string"},"state":{"description":"状态","type":"string"},"tenant_name":{"description":"租户名称","type":"string"},"web_url":{"description":"主页","type":"string"}}}],"type":"object"},"UserSafeDto":{"properties":{"id":{"description":"用户id","format":"int32","maximum":2147483647,"minimum":1,"type":"integer"},"name":{"description":"姓名","type":"string"},"username":{"description":"用户名","type":"string"}},"type":"object"}},"description":null,"group_id":"183513bb7aa84dab9d17c9bc8a4a9fab","host":"codehub-ext.cn-north-4.myhuaweicloud.com","id":"02c7dbcafe544fff8d472d0dec2c2552","info_version":"v3","method":"post","name":"CreateMergeRequestDiscussion","parameters":{},"paths":{"/v2/repositories/{repository_id}/merge_requests/{merge_request_iid}/discussions":{"post":{"deprecated":false,"description":"创建MR检视意见","operationId":"CreateMergeRequestDiscussion","parameters":[{"description":"用户Token。\n\n通过调用IAM服务获取用户Token接口获取(响应消息头中X-Subject-Token的值)。","in":"header","name":"X-Auth-Token","required":true,"type":"string","x-example":"MIIDkgYJKoZIhvIIDgzCCXXXXXX..."},{"description":"仓库短id","format":"int32","in":"path","maximum":2147483647,"minimum":1,"name":"repository_id","required":true,"type":"integer","x-example":907199},{"description":"合并请求iid","in":"path","maximum":2147483647,"minimum":1,"name":"merge_request_iid","required":true,"type":"integer","x-example":6},{"description":"检视意见内容","in":"body","name":"CreateMergeRequestDiscussionRequestBody","required":true,"schema":{"$ref":"#/definitions/CreateMergeRequestDiscussionBodyDto"}}],"produces":["application/json"],"responses":{"200":{"description":"OK","examples":{"application/json":{"result":{"a_mode":"0","added_lines":1,"archived":false,"assignee":{"id":1234,"name":"beta","name_cn":"beta","state":"active","username":"c369c68f1ff84679b5a8ed904d8bff1c"},"b_mode":"100644","deleted_file":false,"diff_file":"@@ -0,0 +1,0 @@\n+7\n","id":"b7d95c35c08e0b328bfbafd45408bd2ac28b73f9","individual_note":false,"new_file":true,"noteable_type":"MergeRequest","notes":[{"archived":false,"assignee":{"id":1234,"name":"beta","name_cn":"beta","state":"active","username":"c369c68f1ff84679b5a8ed904d8bff1c"},"author":{"id":1234,"name":"beta","name_cn":"beta","state":"active","username":"c369c68f1ff84679b5a8ed904d8bff1c"},"body":"检视意见内容","created_at":"2023-06-01T17:05:12.000+08:00","diff":"@@ -0,0 +1,0 @@\n+7\n","diff_file":"7","discussion_id":"8bbe6d4e797169c4c1ce56507fdf1abc11f95601","id":2111886200,"is_outdated":false,"is_reply":true,"noteable_id":19387,"noteable_iid":2,"noteable_type":"MergeRequest","position":{"base_sha":"973bcc0211c32dbaa8473561c6767f74e1a81471","head_sha":"f5bf0230f9b996ed6c0d64d2b2fef789d91b164c","new_line":1,"new_path":"7","old_path":"7","position_type":"text","start_sha":"973bcc0211c32dbaa8473561c6767f74e1a81471"},"project":"DevOpsqlcylxm00004/project-test","proposer":{"id":1234,"name":"beta","name_cn":"beta","state":"active","username":"c369c68f1ff84679b5a8ed904d8bff1c"},"resolvable":true,"resolved":false,"review_categories":"regulations","review_categories_cn":"编程军规问题","review_categories_en":"Regulations","review_modules":"aaa,bbb","severity":"suggestion","system":false,"type":"DiffNote","updated_at":"2023-06-01T17:05:12.000+08:00"}],"project_full_path":"DevOpsqlcylxm00004/project-test","project_id":2111699786,"proposer":{"id":1234,"name":"beta","name_cn":"beta","state":"active","username":"c369c68f1ff84679b5a8ed904d8bff1c"},"removed_lines":0,"resolved":false,"review_categories":"regulations","review_categories_cn":"编程军规问题","review_categories_en":"Regulations","review_modules":"aaa,bbb","severity":"suggestion","severity_cn":"建议","severity_en":"Suggestion"},"status":"success"}},"schema":{"$ref":"#/definitions/CreateMergeRequestDiscussionResult"}}},"security":[{"apig-auth-iam":[]}],"summary":"创建MR检视意见","tags":["Discussion"],"x-apigateway-backend":{"httpEndpoints":{"address":"#codehubAddress#","description":"","method":"POST","path":"/v2/repositories/{repository_id}/merge_requests/{merge_request_iid}/discussions","scheme":"https","timeout":60000},"type":"HTTP"},"x-is-registered":"Y","x-name":"创建MR检视意见","x-request-examples-1":{"body":"检视意见内容","position":{"new_line":1,"new_path":"a.txt","old_line":-1,"old_path":"a.txt"},"severity":"suggestion"},"x-request-examples-description-1":"","x-request-examples-text-1":"{\r\n  \"body\": \"检视意见内容\",\r\n  \"position\": {\r\n    \"new_path\": \"a.txt\",\r\n    \"old_path\": \"a.txt\",\r\n    \"new_line\": 1,\r\n    \"old_line\": -1\r\n  },\r\n  \"severity\": \"suggestion\"\r\n}","x-request-examples-url-1":"POST https://{endpoint}/v2/repositories/{repository_id}/merge_requests/{merge_request_iid}/discussions","x-support-sdk":"Y","x-version":"v1"}}},"product_short":"CodeHub","region_id":"cn-north-4","schemes":["HTTPS"],"security_definitions":{"apig-auth-app":{"in":"header","name":"Authorization","type":"apiKey","x-apigateway-auth-type":"AppSigv1"},"apig-auth-iam":{"in":"header","name":"unused","type":"apiKey","x-apigateway-auth-type":"IAM"},"apig-auth-iam-none":{"in":"header","name":"unused","type":"apiKey","x-apigateway-auth-type":"IAM_NONE"}},"summary":"创建MR检视意见","tags":"Discussion","uri":null,"version":"2.0"}