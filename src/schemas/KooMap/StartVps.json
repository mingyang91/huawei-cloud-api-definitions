{"base_path":"/","components":null,"consumes":"","definitions":{"VPSServiceResp":{"properties":{"VpsCode":{"description":"状态码。","example":0,"format":"int32","type":"integer"},"cacheData":{"description":"缓存数据。","example":"","type":"string"},"couplingTime":{"description":"根据云端负载建议端侧重定位时间(单位ms),int类型默认值15000。","example":15000,"format":"int32","type":"integer"},"isCalibrationSucc":{"description":"是否启用在线云标定。\n-  false:否\n-  true:是","example":true,"type":"boolean"},"pose":{"description":"位姿信息。","properties":{"K":{"description":"在线云标定默认内参。","example":[424.80377197265625,424.80377197265625,320,240],"items":{"format":"float","type":"number"},"type":"array"},"confidence":{"description":"VPS结果置信度。","example":1.0,"format":"double","type":"number"},"r":{"description":"VPS姿态矩阵,按照左上到右下排列。","example":[0.001271471388950618,-0.839397573472261,0.5435164183439053,0.0633623414488142,0.5424923314377308,0.837667764699931,-0.9979897780271252,0.033373402285880926,0.05387595913980364],"items":{"format":"float","type":"number"},"type":"array"},"t":{"description":"VPS位置,分别为XYZ值。","example":[366683.8829337482,3457912.687476058,43.3518069547492],"items":{"format":"float","type":"number"},"type":"array"}},"type":"object"},"processMode":{"description":"云端处理模式。\n- gvps:高精视觉定位\n- lodvps:模型视觉定位","example":"GVPS","type":"string"},"requestId":{"description":"请求id。","example":"fb98ec111bce7e8af285e3ddda182457","type":"string"},"retry":{"description":"限制端侧手动单击的时间间隔(单位ms),默认值3000。","example":3000,"format":"int32","type":"integer"},"status":{"description":"请求结果是否成功。\n- succeeded:成功\n- failed:失败","example":"succeeded","type":"string"},"utmcode":{"description":"地区UTM编码。","example":"51N","type":"string"},"vpsFloor":{"description":"楼层信息。","example":9,"format":"int32","type":"integer"},"vpsMode":{"description":"建议预检测模式。\n- 0:gvps\n- 1:lod","example":0,"format":"int32","type":"integer"}},"type":"object"},"VpsServiceReq":{"properties":{"payload":{"description":"请求体。","properties":{"camera":{"description":"相机内参。","properties":{"cx":{"description":"相机内参,相机光心坐标cx。","example":320,"format":"int32","type":"integer"},"cy":{"description":"相机内参,相机光心坐标cy。","example":240,"format":"int32","type":"integer"},"fx":{"description":"相机内参,焦距fx。","example":488.98218,"format":"float","type":"number"},"fy":{"description":"相机内参,焦距fy。","example":488.98218,"format":"float","type":"number"}},"required":["cx","cy","fx","fy"],"type":"object"},"gps":{"description":"gps相关信息。","items":{"properties":{"accuracy":{"description":"误差值。","example":330.0,"format":"float","type":"number"},"latitude":{"description":"纬度。","example":31.24792009533886,"format":"double","type":"number"},"longitude":{"description":"经度。","example":121.60036508716064,"format":"double","type":"number"}},"required":["accuracy","latitude","longitude"],"type":"object"},"type":"array"},"imu":{"description":"imu内参。","items":{"properties":{"accuracy":{"description":"误差值。","example":0.0,"format":"double","type":"number"},"azimuth":{"description":"欧拉角参数。","example":1.0,"format":"double","type":"number"},"pitch":{"description":"欧拉角参数。","example":3.0,"format":"double","type":"number"},"qw":{"description":"旋转向量qw。","example":0.6881211679439231,"format":"double","type":"number"},"qx":{"description":"旋转向量qx。","example":0.725345792681343,"format":"double","type":"number"},"qy":{"description":"旋转向量qy。","example":0.006287566677248894,"format":"double","type":"number"},"qz":{"description":"旋转向量qz。","example":-0.01797792458112125,"format":"double","type":"number"},"roll":{"description":"欧拉角参数。","example":92.0,"format":"double","type":"number"}},"required":["accuracy","azimuth","pitch","qw","qx","qy","qz","roll"],"type":"object"},"type":"array"},"slam":{"description":"slam相关信息。","items":{"properties":{"qw":{"description":"旋转向量qw。","example":-0.6814298249999999,"format":"double","type":"number"},"qx":{"description":"旋转向量qx。","example":0.08979502499999997,"format":"double","type":"number"},"qy":{"description":"旋转向量qy。","example":-0.06832012500000001,"format":"double","type":"number"},"qz":{"description":"旋转向量qz。","example":0.7231338949999999,"format":"double","type":"number"},"x":{"description":"坐标参数x。","example":0.0,"format":"double","type":"number"},"y":{"description":"坐标参数y。","example":0.0,"format":"double","type":"number"},"z":{"description":"坐标参数z。","example":0.0,"format":"double","type":"number"}},"required":["qw","qx","qy","qz","x","y","z"],"type":"object"},"type":"array"},"user":{"description":"用户相关信息。","properties":{"image":{"description":"base64编码的图片信息。","example":"","type":"string"},"requestType":{"description":"请求的设备类型。\n- 0:安卓手机\n- 1:IOS手机\n- 2:安卓web端\n- 3:IOS web端\n- 4:AR眼镜","example":2,"format":"int32","type":"integer"},"vpsMode":{"description":"vps的运行模式,目前支持FullMode。","example":"","type":"string"},"vpsType":{"description":"vps的定位方法,目前支持GVPS。","example":"","type":"string"}},"required":["image"],"type":"object"}},"required":["camera","gps","imu","slam","user"],"type":"object"}},"required":["payload"],"type":"object"}},"description":null,"group_id":"c6d55a9633064ef89f03a6779af07821","host":"koomap.cn-north-4.myhuaweicloud.com","id":"38095048961b41ebb72c7622dcc6c3b8","info_version":"v1","method":"post","name":"StartVps","parameters":{},"paths":{"/v1/algo/vps":{"post":{"consumes":["application/json"],"description":"视觉定位是根据图像耦合GPS数据确定设备的位置的一项技术。首先通过拍摄一系列具有已知位置的图像并分析它们的关键视觉特征(例如建筑物或桥梁的轮廓)来创建地图,以创建这些视觉特征的大规模且可快速搜索的索引。将设备图像中的特征与索引中的特征进行比较,可获得目标设备的位姿。","operationId":"StartVps","parameters":[{"description":"空间定位服务请求体。","in":"body","name":"request_body","required":true,"schema":{"$ref":"#/definitions/VpsServiceReq"}},{"description":"追踪请求ID。","in":"header","name":"X-Trace-Id","required":false,"type":"string"},{"description":"可选项,场景模板分配的app_id;若无,置空。","in":"header","name":"App-Id","required":false,"type":"string"},{"description":"设备或者用户唯一标识。","in":"header","name":"Uuid","required":true,"type":"string"},{"description":"IAM Token,和Authorization二选一必传。","in":"header","name":"X-Auth-Token","required":false,"type":"string"},{"description":"AK/SK签名结果,和X-Auth-Token二选一必传。","in":"header","name":"Authorization","required":false,"type":"string"}],"produces":["application/json"],"responses":{"200":{"description":"请求成功。","headers":{"X-Trace-Id":{"description":"跟踪请求ID。","type":"string"}},"schema":{"$ref":"#/definitions/VPSServiceResp"}}},"summary":"视觉定位","tags":["空间定位"],"x-apiErrorCodes":[{"errorCode":"GATEWAY.00000003","errorMessage":"服务未开通/冻结","httpStatus":"400"},{"errorCode":"GATEWAY.00000006","errorMessage":"触发网关限流","httpStatus":"400"},{"errorCode":"OPEN.00000002","errorMessage":"网关下游返回未处理的400错误","httpStatus":"400"},{"errorCode":"VPS.0000003","errorMessage":"空间定位算法服务请求参数不正确","httpStatus":"400"},{"errorCode":"VPS.0000004","errorMessage":"空间定位算法服务参数不正确,位置不在你的服务区","httpStatus":"400"},{"errorCode":"GATEWAY.00000002","errorMessage":"鉴权header未携带","httpStatus":"403"},{"errorCode":"GATEWAY.00000005","errorMessage":"IAM鉴权失败,没有action的访问权限","httpStatus":"403"},{"errorCode":"GATEWAY.00000001","errorMessage":"网关内部错误","httpStatus":"500"},{"errorCode":"OPEN.00000001","errorMessage":"网关下游返回未处理的500错误","httpStatus":"500"},{"errorCode":"VPS.0000001","errorMessage":"空间定位算法服务错误","httpStatus":"500"},{"errorCode":"VPS.0000002","errorMessage":"空间定位算法服务定位错误","httpStatus":"500"}],"x-is-registered":"Y","x-order":0,"x-request-examples-1":{"payload":{"camera":{"cx":720,"cy":540,"fx":1120,"fy":1120},"gps":[{"accuracy":"12","latitude":"xxx","longitude":"xxx"}],"imu":[{"accuracy":"0","azimuth":"38.6508926149583","pitch":"-3.3327073554530315","qw":"0.6951532824524337","qx":"0.6383440820986672","qy":"-0.25189259238432615","qz":"-0.21407681135529025","roll":"85.58219500612942"}],"slam":[{"index":"4","mode":"0","qw":"0.30000227171514465","qx":"-0.6027525895972902","qy":"0.6696625505117437","qz":"-0.31343264698264584","x":"3457914.888789408","y":"43.618999587185016","z":"-366678.1012069998"}],"user":{"image":"xxx","requestType":3,"vpsMode":"FullMode","vpsType":"GVPS"}}},"x-request-examples-description-1":"vps请求体示例,image信息xxx需改为图片base64编码。","x-request-examples-text-1":{"payload":{"camera":{"cx":720,"cy":540,"fx":1120,"fy":1120},"gps":[{"accuracy":"12","latitude":"xxx","longitude":"xxx"}],"imu":[{"accuracy":"0","azimuth":"38.6508926149583","pitch":"-3.3327073554530315","qw":"0.6951532824524337","qx":"0.6383440820986672","qy":"-0.25189259238432615","qz":"-0.21407681135529025","roll":"85.58219500612942"}],"slam":[{"index":"4","mode":"0","qw":"0.30000227171514465","qx":"-0.6027525895972902","qy":"0.6696625505117437","qz":"-0.31343264698264584","x":"3457914.888789408","y":"43.618999587185016","z":"-366678.1012069998"}],"user":{"image":"xxx","requestType":3,"vpsMode":"FullMode","vpsType":"GVPS"}}},"x-request-examples-url-1":"POST https://{Endpoint}.com/v1/algo/vps","x-support-sdk":"Y"}}},"product_short":"KooMap","region_id":"cn-north-4","schemes":["HTTPS"],"security_definitions":{"apig-auth-app":{"in":"header","name":"Authorization","type":"apiKey","x-apigateway-auth-type":"AppSigv1"},"apig-auth-app-optional":{"in":"header","name":"Authorization","type":"apiKey","x-apigateway-auth-opt":{"access-auth-type":"optional"},"x-apigateway-auth-type":"AppSigv1"},"apig-auth-iam":{"in":"header","name":"unused","type":"apiKey","x-apigateway-auth-type":"IAM"},"apig-auth-iam-none":{"in":"header","name":"unused","type":"apiKey","x-apigateway-auth-type":"IAM_NONE"}},"summary":"视觉定位","tags":"空间定位","uri":null,"version":"2.0"}