{"base_path":null,"components":null,"consumes":"","definitions":{"AggregateMetricsRequest":{"description":"查询经过聚合计算的序列值定义","properties":{"interval":{"description":"聚合时间间隔,正则:\"^[1-9][0-9]*[dhms]$\",示例:\"1d|1h|10m|10s\"","maxLength":32,"minLength":1,"pattern":"^[1-9][0-9]*[dhms]$","type":"string"},"limit":{"default":2000,"description":"返回值个数限制,最多2000个","maximum":2000,"type":"integer"},"metrics":{"description":"聚合查询指标列表,对资产属性进行聚合查询得到指标","items":{"$ref":"#/definitions/DTAggregateMetrics"},"maxItems":20,"minItems":1,"type":"array"},"offset":{"description":"聚合时间偏移量,需要小于interval,正则: \"^[1-9][0-9]*[hms]$\",示例: \"1h|10m|10s\"","maxLength":32,"minLength":1,"pattern":"^[1-9][0-9]*[hms]$","type":"string"},"property_filter":{"description":"属性过滤器,最多5个","items":{"$ref":"#/definitions/PropertyFilter"},"maxItems":5,"type":"array"},"tags":{"$ref":"#/definitions/TagFilterDT"},"time_span":{"$ref":"#/definitions/TimeSpanDT"}},"required":["interval","metrics"],"type":"object","x-java-class":"com.huawei.iot.dtvision.api.model.AggregateMetricsRequest"},"DTAggregateMetrics":{"description":"聚合指标列表","properties":{"expression":{"description":"指标表达式,最多64个字符","type":"string","x-maxLength":64,"x-minLength":1},"inputs":{"description":"定义指标计算查询的输入资产属性列表","items":{"$ref":"#/definitions/MetricInput"},"maxItems":1,"minItems":1,"type":"array"},"metric_name":{"description":"指标名,指标计算查询的输出指标名称","pattern":"^[a-zA-Z0-9_]{1,64}$","type":"string","x-maxLength":64,"x-minLength":1}},"required":["inputs","expression","metric_name"],"type":"object","x-java-class":"com.huawei.iot.dtvision.api.model.DTAggregateMetrics"},"DTTransformMetrics":{"description":"转换指标列表","properties":{"expression":{"description":"指标表达式,最多64个字符","type":"string","x-maxLength":64,"x-minLength":1},"inputs":{"description":"定义指标计算查询的输入资产属性列表","items":{"$ref":"#/definitions/MetricInput"},"maxItems":3,"minItems":1,"type":"array"},"metric_name":{"description":"指标名,指标计算查询的输出指标名称","pattern":"^[a-zA-Z0-9_]{1,64}$","type":"string","x-maxLength":64,"x-minLength":1}},"required":["inputs","expression","metric_name"],"type":"object","x-java-class":"com.huawei.iot.dtvision.api.model.DTTransformMetrics"},"GetMetricsValue":{"example":{"aggregate":{"interval":"1d|1h|10m|10s","limit":2000,"metrics":[{"expression":"log(10,a)+1","inputs":[{"name":"string","property_name":"string"}],"metric_name":"string"}],"offset":"1h|10m|10s","property_filter":[{"operator":"=","property_name":"string","value":1}],"tags":{"tagPropertyA":"IA2006300"},"time_span":{"from":"2021-02-01T00:00:00.123Z","to":"2021-02-05T20:00:00.100Z"}},"transform":{"limit":2000,"metrics":[{"expression":"floor(pp6)+pp7","inputs":[{"name":"string","property_name":"string"}],"metric_name":"string"}],"property_filter":[{"operator":"=","property_name":"string","value":1}],"tags":{"tagPropertyA":"IA2006300"},"time_span":{"from":"2021-02-01T00:00:00.123Z","to":"2021-02-05T20:00:00.100Z"}},"type":"transform|aggregate"},"properties":{"aggregate":{"$ref":"#/definitions/AggregateMetricsRequest"},"transform":{"$ref":"#/definitions/TransformMetricsRequest"},"type":{"description":"查询类型,经过转换计算的序列值(transform)、经过聚合计算的序列值(aggregate)","pattern":"transform|aggregate","type":"string"}},"required":["type"],"type":"object","x-java-class":"com.huawei.iot.dtvision.api.model.GetMetricsValue"},"MetricInput":{"description":"定义指标计算查询的输入资产属性","properties":{"name":{"description":"指标计算表达式的入参名称","pattern":"^[a-zA-Z][a-zA-Z0-9_]{0,31}$","type":"string","x-maxLength":32,"x-minLength":1},"property_name":{"description":"入参所对应的资产属性名称","pattern":"^[a-zA-Z0-9_]{1,64}$","type":"string","x-maxLength":64,"x-minLength":1}},"required":["name","property_name"],"type":"object","x-java-class":"com.huawei.iot.dtvision.api.model.MetricInput"},"MetricValue":{"properties":{"metric_name":{"description":"指标名称","type":"string"},"values":{"description":"计算结果,示例:[1,2]","items":{"type":"object"},"maxItems":2000,"minItems":0,"type":"array"}},"type":"object","x-java-class":"com.huawei.iot.dtvision.api.model.MetricValue"},"MetricsResponse":{"description":"属性的聚合与转换查询结果","properties":{"metrics":{"description":"指标计算结果列表","items":{"$ref":"#/definitions/MetricValue"},"maxItems":20,"minItems":1,"type":"array"},"timestamps":{"description":"时间序列,使用UTC时间,格式:yyyy-MM-dd'T'HH:mm:ss.SSS'Z',示例:2021-02-01T00:00:00.123Z","items":{"type":"string"},"maxItems":2000,"minItems":0,"type":"array"}},"type":"object","x-java-class":"com.huawei.iot.dtvision.api.model.MetricsResponse"},"PropertyFilter":{"description":"属性过滤器","properties":{"operator":{"description":"过滤操作方式,当前仅支持“=”","pattern":"=","type":"string","x-maxLength":64,"x-minLength":1},"property_name":{"description":"过滤属性名称,正则:\"^[a-zA-Z0-9_]{1,64}$\"","pattern":"^[a-zA-Z0-9_]{1,64}$","type":"string","x-maxLength":64,"x-minLength":1},"value":{"description":"过滤属性值","type":"object"}},"required":["property_name","operator","value"],"type":"object","x-java-class":"com.huawei.iot.dtvision.api.model.PropertyFilter"},"TagFilterDT":{"additionalProperties":{"description":"标签过滤","type":"object"},"description":"对property按指定tags标签进行过滤查询,填入资产标签属性的属性名与属性值,不可为空,例如 {\"tagPropertyA\": \"id0001\"};注意,标签过滤只对打上标签时刻之后的数据生效,打标签之前的数据不能通过标签过滤","type":"object"},"TimeSpanDT":{"description":"起止时间","properties":{"from":{"description":"起始时间, 使用UTC时间,格式:yyyy-MM-dd'T'HH:mm:ss.SSS'Z',示例:2021-02-01T00:00:00.123Z","type":"string","x-maxLength":64},"to":{"description":"结束时间,使用UTC时间,格式:yyyy-MM-dd'T'HH:mm:ss.SSS'Z',示例:2021-02-01T00:00:00.123Z","type":"string","x-maxLength":64}},"type":"object","x-java-class":"com.huawei.iot.dtvision.api.model.TimeSpan"},"TransformMetricsRequest":{"description":"查询经过转换计算的序列值定义","properties":{"limit":{"default":2000,"description":"返回值个数限制,最多2000个","maximum":2000,"type":"integer"},"metrics":{"description":"转换查询指标列表,对资产属性进行转换查询得到指标","items":{"$ref":"#/definitions/DTTransformMetrics"},"maxItems":20,"minItems":1,"type":"array"},"property_filter":{"description":"属性过滤器,最多5个","items":{"$ref":"#/definitions/PropertyFilter"},"maxItems":5,"type":"array"},"tags":{"$ref":"#/definitions/TagFilterDT"},"time_span":{"$ref":"#/definitions/TimeSpanDT"}},"required":["metrics"],"type":"object","x-java-class":"com.huawei.iot.dtvision.api.model.TransformMetricsRequest"}},"description":null,"group_id":"cfd5b7ef8cbe41c8b49ff6f50523b75d","host":"iota.cn-north-4.myhuaweicloud.com","id":"ad97e2e1fb614ca99757b7bbf23309c7","info_version":"v1","method":"post","name":"ShowMetricValue","parameters":{},"paths":{"/v1/{project_id}/assets/{asset_id}/metrics/query":{"post":{"description":"获取资产属性聚合值","operationId":"ShowMetricValue","parameters":[{"description":"项目ID","in":"path","name":"project_id","required":true,"type":"string","x-maxLength":128},{"description":"资产ID","in":"path","name":"asset_id","required":true,"type":"string","x-maxLength":256},{"in":"body","name":"request","required":true,"schema":{"$ref":"#/definitions/GetMetricsValue"}},{"description":"租户Token","in":"header","name":"X-Auth-Token","required":true,"type":"string","x-maxLength":65535}],"produces":["application/json"],"responses":{"200":{"description":"OK","examples":{"example":{"metrics":[{"metric_name":"string","values":[1,2]}],"timestamps":["string"]}},"schema":{"$ref":"#/definitions/MetricsResponse"}},"400":{"description":"Bad Request","x-Error":["IoTA.99000010","IoTA.01010307"]},"401":{"description":"Unauthorized","x-Error":["IoTA.99000003"]},"403":{"description":"Forbidden","x-Error":["IoTA.99000007","IoTA.99000008","IoTA.99000009","IoTA.99000012"]},"404":{"description":"Not Found","x-Error":["IoTA.01010202","IoTA.01010309"]},"409":{"description":"Conflict","x-Error":["IoTA.99000011"]},"500":{"description":"Internal Server Error","x-Error":["IoTA.99999999"]}},"summary":"获取资产属性聚合值","tags":["AssetProperty"],"x-externalAPI":"YES","x-iftype":"OpenAPI","x-imports":["org.springframework.http.ResponseEntity"],"x-open-for-CLOUD":"Y","x-open-for-HCS":"Y","x-returnType":"ResponseEntity<MetricsResponse>","x-support-sdk":"Y"}}},"product_short":"IoTAnalytics","region_id":"cn-north-4","schemes":["HTTPS"],"security_definitions":null,"summary":"获取资产属性聚合值","tags":"资产属性","uri":null,"version":"2.0"}