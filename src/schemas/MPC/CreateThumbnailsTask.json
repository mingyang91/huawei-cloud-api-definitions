{"base_path":"/","components":null,"consumes":"[\"application/json\",\"application/json; charset=UTF-8\"]","definitions":{"CreateThumbReq":{"properties":{"input":{"$ref":"#/definitions/ObsObjInfo","description":"源文件地址。"},"original_dir":{"default":0,"description":"是否使用原始输出目录。\n\n取值如下:\n- 0:不使用原始输出目录,下发的输出目录后面追加随机目录,防止截图文件outputUri相同被覆盖。\n- 1:使用原始输出目录。\n默认值:0","format":"int32","maximum":1,"minimum":0,"type":"integer","x-inner-field":true},"output":{"$ref":"#/definitions/ObsObjInfo","description":"输出地址。"},"sync":{"default":0,"description":"是否同步处理,同步处理是指不下载全部文件,快速定位到截图位置进行截图。\n\n取值如下:\n- 0:排队处理。\n- 1:同步处理,暂只支持按时间点截单张图。\n默认值:0","format":"int32","maximum":1,"minimum":0,"type":"integer"},"tar":{"default":1,"description":"是否压缩抽帧图片生成tar包。\n\n取值如下:\n- 0:压缩。\n- 1:不压缩\n默认值:1","format":"int32","maximum":1,"minimum":0,"type":"integer"},"thumbnail_para":{"$ref":"#/definitions/ThumbnailPara","description":"截图参数"},"user_data":{"description":"用户自定义数据。","maxLength":65535,"minLength":0,"type":"string"}},"required":["input","output","thumbnail_para"],"type":"object","x-modifier-memo":"add","x-since":"1.0.0"},"CreateThumbnailsTaskRsp":{"properties":{"create_time":{"description":"任务创建时间","maxLength":32,"minLength":0,"type":"string"},"description":{"description":"截图任务描述,当截图出现异常时,此字段为异常的原因","maxLength":256,"minLength":0,"type":"string"},"output":{"$ref":"#/definitions/ObsObjInfo","description":"输出文件信息"},"output_file_name":{"description":"截图文件名称","maxLength":2147483647,"minLength":0,"type":"string"},"status":{"description":"任务状态","maxLength":64,"minLength":0,"type":"string"},"task_id":{"description":"任务ID。","maxLength":16,"minLength":0,"type":"string"},"thumbnail_time":{"description":"指定的截图时间点","maxLength":256,"minLength":0,"type":"string"}},"type":"object"},"ErrorResponse":{"properties":{"error_code":{"description":"错误码。","maxLength":16,"minLength":0,"type":"string"},"error_msg":{"description":"错误描述。","maxLength":256,"minLength":0,"type":"string"}},"type":"object"},"ObsObjInfo":{"properties":{"bucket":{"description":"OBS的bucket名称。","maxLength":64,"minLength":0,"type":"string"},"file_name":{"description":"文件名,仅用于转封装指定输出名称。\n\n- 当指定了此参数时,输出的对象名为object/file_name 。\n- 当不指定此参数时,输出的对象名为object/xxx,其中xxx由MPC指定。","maxLength":2147483647,"minLength":0,"type":"string"},"location":{"description":"OBS桶所在的区域,且必须与使用的MPC区域保持一致。","maxLength":64,"minLength":0,"type":"string"},"object":{"description":"OBS对象路径,遵守OSS Object定义。\n\n- 当用于指示input时,需要指定到具体对象。\n- 当用于指示output时, 只需指定到转码结果期望存放的路径。","maxLength":2147483647,"minLength":0,"type":"string"}},"required":["bucket","location","object"],"type":"object","x-modifier-memo":"add","x-since":"1.0.0"},"ThumbnailPara":{"properties":{"dots":{"description":"指定时间截图时的时间点数组,最多支持10个。","items":{"type":"integer"},"maxItems":50000,"minItems":0,"type":"array"},"dots_ms":{"description":"同步截图下,指定时间截图的时间点数组,单位毫秒\n\n例如输入[1000],截取视频第1000毫秒位置的图像帧,仅支持一个时间点","items":{"maximum":2147483647,"minimum":0,"type":"integer"},"maxItems":50000,"minItems":0,"type":"array"},"duration":{"description":"采样类型为“TIME”模式的持续时间,和“time”、“start_time”配合使用,表示从视频文件的第“start_time”开始,持续时间为“duration”,每间隔“time”生成一张截图。\n取值范围:[数字,ToEND]。“ToEND”表示持续到视频结束。\n\n默认值: ToEND。\n\n单位:秒。\n> “duration”必须大于等0,若设置为0,则截图持续时间从“start_time”到视频结束。","format":"int32","maximum":2147483647,"minimum":0,"type":"integer"},"format":{"default":1,"description":"截图文件格式。\n\n取值如下:\n\n1:表示jpg格式","format":"int32","maximum":100,"minimum":0,"type":"integer"},"height":{"description":"图片高度\n\n取值范围:(96,2160]\n\n单位:px","maximum":2160,"minimum":0,"type":"integer"},"max_length":{"default":480,"description":"截图最长边的尺寸。宽边尺寸按照该尺寸与原始视频像素等比缩放计算。\n\n\n取值范围:[240,3840]\n\n默认值:480\n\n单位:像素\n\n>\n该参数和width/height选择使用,以width/height优先,若width/height都不等于0,则图片尺寸按width/height得出;反之,则图片尺寸按\nmax_length 得出。\n\n> 若该参数和width/height都未选择,则按源片源宽高输出截图","format":"int32","maximum":3840,"minimum":0,"type":"integer","x-annotations":null},"output_filename":{"description":"截图输出文件名。\n\n- 如果只抽一张图(即:按DOTS方式,指定1个时间点)则按该指定文件名输出图片。\n\n- 如果抽多张图(即:按DOTS方式指定多个时间点或按TIME间隔截图)则输出图片名在该指定文件名基础上在增加时间点(示例:output_filename_10.jpg)。\n\n- 如果指定了压缩抽帧图片生成tar包,则tar包按该指定文件名输出。","maxLength":256,"minLength":0,"type":"string"},"start_time":{"default":0,"description":"采样类型为“TIME”模式的开始时间,和“time”配合使用。\n\n默认值:0。\n\n单位:秒。","format":"int32","maximum":2147483647,"minimum":0,"type":"integer","x-annotations":null},"time":{"default":12,"description":"采样截图的时间间隔值。\n\n默认值:12。\n\n单位:秒","format":"int32","maximum":100,"minimum":1,"type":"integer"},"type":{"default":"TIME","description":"采样类型。\n\n取值如下:\n- \"TIME\":根据时间间隔采样截图。\n- \"DOTS\":指定时间点截图。选择同步截图时,需指定此类型。\n- \"DOTS_MS\":同步截图指定时间点毫秒值。\n\n默认值:\"TIME\"","enum":["TIME","DOTS","DOTS_MS"],"type":"string"},"width":{"description":"图片宽度\n\n取值范围:(96,3840]\n\n单位:px","maximum":3840,"minimum":0,"type":"integer"}},"type":"object","x-imports":"org.hibernate.validator.constraints.Range;"}},"description":null,"group_id":"d6d1df67040449a19b5f12e3ad9ad999","host":"mpc.cn-north-4.myhuaweicloud.com","id":"fe0322fa1f2e4eadbde65f35106b232c","info_version":"v1","method":"post","name":"CreateThumbnailsTask","parameters":{"authorization":{"description":"使用AK/SK方式认证时必选,携带的鉴权信息。","in":"header","maxLength":256,"minLength":1,"name":"Authorization","required":false,"type":"string","x-example":"SDK-HMAC-SHA256 Access=xxx, SignedHeaders=content-type;host;x-sdk-date, Signature=xxx"},"xAuthToken":{"description":"用户Token。\n\n通过调用IAM服务获取用户Token接口获取(响应消息头中X-Subject-Token的值)。","in":"header","maxLength":16384,"minLength":0,"name":"X-Auth-Token","required":false,"type":"string"},"xProjectId":{"description":"使用AK/SK方式认证时必选,携带项目ID信息, 与路径参数中的项目ID相同。","in":"header","maxLength":64,"minLength":1,"name":"X-Project_Id","required":false,"type":"string"},"xSdkDate":{"description":"使用AK/SK方式认证时必选,请求的发生时间。","in":"header","maxLength":256,"minLength":1,"name":"X-Sdk-Date","required":false,"type":"string","x-example":"20191115T033655Z"}},"paths":{"/v1/{project_id}/thumbnails":{"post":{"description":"新建截图任务,视频截图将从首帧开始,按设置的时间间隔截图,最后截取末帧。\n待截图的视频文件需要存储在与媒体处理服务同区域的OBS桶中,且该OBS桶已授权。\n\n约束:\n  暂只支持生成JPG格式的图片文件。","operationId":"CreateThumbnailsTask","parameters":[{"$ref":"#/parameters/xAuthToken"},{"$ref":"#/parameters/authorization"},{"$ref":"#/parameters/xProjectId"},{"$ref":"#/parameters/xSdkDate"},{"description":"项目ID,获取方法请参考[获取项目ID](mpc_04_0064.xml)","in":"path","maxLength":64,"minLength":0,"name":"project_id","required":true,"type":"string"},{"description":"VOD调用MPC携带的客户projectId","in":"header","maxLength":64,"minLength":0,"name":"x-vod-projectId","required":false,"type":"string","x-inner-field":true,"x-is_inner_param":"true"},{"description":"创建截图任务请求体","in":"body","name":"CreateThumbnailsTaskRequestBody","required":true,"schema":{"$ref":"#/definitions/CreateThumbReq"}}],"responses":{"202":{"description":"新建截图任务成功。","examples":{"application/json":{"task_id":100211}},"schema":{"$ref":"#/definitions/CreateThumbnailsTaskRsp"}},"400":{"description":"新建截图任务失败。","examples":{"application/json":{"error_code":"MPC.10202","error_msg":"Invalid request parameter"}},"schema":{"$ref":"#/definitions/ErrorResponse"}}},"summary":"新建截图任务","tags":["ThumbnailsTask"],"x-apiexplorer-hide":"N","x-external-api":true,"x-is-registered":"Y","x-modifier-memo":"版本 | 修改日期 | 修改说明 | 修改者\n------------ | ------------- | ------------- | -------------\n1.0.0 | 2018/3/28 |新增此接口。 | 吴晓瑜\n","x-navigation-title":"抽帧截图接口","x-open-region-cloud":"hcso,hc,hk,g42","x-publishpath":"mpc_04_0034","x-request-examples-1":"POST https://{endpoint}/v1/{project_id}/thumbnails\n {\n    \"input\": {\n               \"bucket\": \"example-bucket\",\n               \"location\": \"region1\",\n               \"object\": \"/VOD/input/sample.MP4\"\n    },\n    \"output\": {\n               \"bucket\": \"example-bucket\",\n               \"location\": \"region1\",\n               \"object\": \"/VOD/output/\"\n    },\n\n    \"tar\" : 1,\n    \"thumbnail_para\": {\n        \"time\":2,\n        \"format\":1,\n        \"max_length\":480\n    }\n    }\n\n  }\n","x-response-example":"{\n     \"task_id\": 100211\n}\n","x-since":"1.0.0","x-since-memo":"1.0.0 initial","x-support-sdk":"Y"}}},"product_short":"MPC","region_id":"cn-north-4","schemes":["HTTPS"],"security_definitions":null,"summary":"新建截图任务","tags":"抽帧截图接口","uri":null,"version":"2.0"}