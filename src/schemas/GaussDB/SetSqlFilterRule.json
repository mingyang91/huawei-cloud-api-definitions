{"base_path":"/","components":null,"consumes":"[\"application/json;charset=UTF-8\"]","definitions":{"MysqlErrorResponse":{"properties":{"error_code":{"description":"错误码。","example":"DBS.200022","type":"string"},"error_msg":{"description":"错误消息。","example":"实例不存在","type":"string"}},"required":["error_code","error_msg"]},"NodeSqlFilterRule":{"description":"SQL限流规则。","properties":{"patterns":{"description":"SQL限流具体规则。","items":{"$ref":"#/definitions/NodeSqlFilterRulePattern"},"type":"array"},"sql_type":{"description":"Sql限流类型。\n\n取值范围:\n- SELECT\n- UPDATE\n- DELETE","example":"SELECT","type":"string"}},"required":["sql_type","patterns"]},"NodeSqlFilterRuleInfo":{"description":"节点级别的SQL限流规则。","properties":{"node_id":{"description":"节点ID","example":"c01a5645eb2c4fb6a9373542f5366e50no07","type":"string"},"rules":{"description":"SQL限流规则。集合的sql_type值不能重复。","items":{"$ref":"#/definitions/NodeSqlFilterRule"},"type":"array"}},"required":["node_id","rules"]},"NodeSqlFilterRulePattern":{"description":"SQL限流规则和最大并发数","properties":{"max_concurrency":{"description":"最大并发数。取值范围:非负整数。","format":"int32","type":"integer"},"pattern":{"description":"SQL限流规则,由一个或多个关键字(最多为128个关键字)组成,关键字之间通过\"~\"分隔符分开,如select~from~t1。规则中不能包含‘\\’、中英文逗号、‘~~’,不能以‘~’结尾。","type":"string"}},"required":["pattern","max_concurrency"]},"OperateSqlFilterRuleReq":{"description":"- 开启/关闭sql限流参数体。","properties":{"sql_filter_rules":{"items":{"$ref":"#/definitions/NodeSqlFilterRuleInfo"},"type":"array"}},"required":["sql_filter_rules"]},"OperateSqlFilterRuleRsp":{"description":"设置SQL限流规则任务ID","properties":{"job_id":{"description":"设置SQL限流规则任务ID。","example":"aef6a470-fb63-4d5b-b644-12ead7e019b3","type":"string"}},"required":["job_id"]}},"description":null,"group_id":"1bf15763f8164608918d180a9b1aa137","host":"gaussdb.cn-north-4.myhuaweicloud.com","id":"75c8e2508d8442328e7e6366ae90e5ac","info_version":"v3","method":"put","name":"SetSqlFilterRule","parameters":{},"paths":{"/v3/{project_id}/instances/{instance_id}/sql-filter/rules":{"put":{"description":"设置SQL限流规则。","operationId":"SetSqlFilterRule","parameters":[{"description":"用户Token。","in":"header","name":"X-Auth-Token","required":true,"type":"string","x-example":"******"},{"description":"语言。","in":"header","name":"X-Language","required":false,"type":"string","x-example":"zh-cn"},{"description":"租户在某一region下的project ID。\n\n获取方法请参见[获取项目ID](https://support.huaweicloud.com/api-gaussdbformysql/gaussdbformysql_10_0004.html)。\n","in":"path","name":"project_id","required":true,"type":"string","x-example":"619d3e78f61b4be68bc5aa0b59edcf7b"},{"description":"实例ID。","in":"path","name":"instance_id","required":true,"type":"string","x-example":"af315b8e6aaa41799bd9a31f2de15abcin07"},{"description":"请求体","in":"body","name":"OperateSqlFilterRuleReq","required":true,"schema":{"$ref":"#/definitions/OperateSqlFilterRuleReq"}}],"responses":{"200":{"description":"Success.","examples":{"application/json":{"job_id":"aef6a470-fb63-4d5b-b644-12ead7e019b3"}},"schema":{"$ref":"#/definitions/OperateSqlFilterRuleRsp"}},"400":{"description":"Client error.","schema":{"$ref":"#/definitions/MysqlErrorResponse"}},"500":{"description":"Server error.","schema":{"$ref":"#/definitions/MysqlErrorResponse"}}},"summary":"设置SQL限流规则","tags":["SQL限流"],"x-is-registered":"N","x-request-examples-1":{"sql_filter_rules":[{"node_id":"c01a5645eb2c4fb6a9373542f5366e50no07","rules":[{"patterns":[{"max_concurrency":0,"pattern":"select~from~t1"},{"max_concurrency":10,"pattern":"select~from~t3~where~id"}],"sql_type":"SELECT"},{"patterns":[{"max_concurrency":10,"pattern":"update~t3~where~id"}],"sql_type":"UPDATE"}]},{"node_id":"b234a5645eb2c4ji3b9372342f5362397no07","rules":[{"patterns":[{"max_concurrency":10,"pattern":"select~from~t3~where~id"}],"sql_type":"SELECT"},{"patterns":[{"max_concurrency":10,"pattern":"delete~t3~where~id"}],"sql_type":"DELETE"}]}]},"x-request-examples-description-1":"设置SQL限流规则,限流类型为SELECT、UPDATE、DELETE。","x-request-examples-url-1":"PUT https://{endpoint}/v3/054e292c9880d4992f02c0196d3ea468/instances/af315b8e6aaa41799bd9a31f2de15abcin07/sql-filter/rules","x-support-sdk":"Y"}}},"product_short":"GaussDB","region_id":"cn-north-4","schemes":["HTTPS"],"security_definitions":null,"summary":"设置SQL限流规则","tags":"SQL限流","uri":null,"version":"2.0"}