{"base_path":"/","components":null,"consumes":"[\"application/json\"]","definitions":{"CandidateIntention":{"description":"","properties":{"candidate_confidence":{"description":"候选意图置信度。","format":"double","type":"number"},"candidate_intention":{"description":"候选意图。","type":"string"}},"required":["candidate_confidence","candidate_intention"]},"ChatAnswers":{"description":"","properties":{"answer":{"description":"答案。","type":"string"},"score":{"description":"闲聊的置信度,范围:0.0~1.0  0.0表示兜底回复","format":"float","type":"number"}},"required":["answer"]},"CurrentSlot":{"description":"","properties":{"slot_id":{"description":"槽位ID。","type":"string"},"slot_identification":{"description":"槽位标识。","type":"string"},"slot_name":{"description":"槽位名称。","type":"string"},"slot_values":{"description":"槽位值。","items":{"$ref":"#/definitions/SlotValue","description":""},"type":"array"}},"required":["slot_id","slot_name","slot_values"]},"DocBotAnswers":{"description":"","properties":{"answer":{"description":"答案。","type":"string"},"answer_detail":{"$ref":"#/definitions/DocQueryAnswerDetail","description":"答案详情"},"details":{"description":"候选答案列表","items":{"$ref":"#/definitions/DocQueryAnswerDetail","description":""},"type":"array"},"question":{"description":"问题。","type":"string"},"score":{"description":"置信度。","format":"double","type":"number"}},"required":["answer","question","score"]},"DocQueryAnswerDetail":{"description":"","properties":{"answer":{"description":"答案。","type":"string"},"doc_id":{"description":"文档ID。","type":"string"},"end_index":{"description":"答案结束下标。","format":"int32","type":"integer"},"paragraph_number":{"description":"段落在文档中的编号。","format":"int32","type":"integer"},"paragraph_score":{"description":"段落评分。","format":"double","type":"number"},"paragraph_text":{"description":"段落文字。","type":"string"},"phrase_score":{"description":"文档问答阅读理解评分。","format":"double","type":"number"},"start_index":{"description":"答案开始下标。","format":"int32","type":"integer"},"total_score":{"description":"文档问答总评分。","format":"double","type":"number"}},"required":["answer","doc_id","end_index","paragraph_number","paragraph_score","paragraph_text","phrase_score","start_index","total_score"]},"ErrorResp":{"description":"Bad Request","properties":{"error_code":{"description":"调用失败时的错误码。\n调用成功时无此字段。","type":"string"},"error_msg":{"description":"调用失败时的错误信息。\n调用成功时无此字段。","type":"string"}},"required":["error_code","error_msg"]},"Extends":{"description":"","properties":{"domain_ids":{"description":"领域列表,多个领域用分号隔开。如果设置了领域且领域不为空,就从这些领域中匹配答案,否则就从该用户的全部知识库匹配答案。\n\n当前最多支持10个领域。\n","items":{"description":"","type":"string"},"maxItems":10,"type":"array"},"return_all_answers":{"description":"是否返回所有类型的回答","type":"boolean"},"source":{"description":"问题来源\n其他支持用户自定义,最终体现在问答日志里","type":"string"},"tag_ids":{"$ref":"#/definitions/Tag","description":"待匹配的答案标签id列表"}}},"Frame":{"description":"","properties":{"candidate_words":{"description":"候选词。","items":{"description":"","type":"string"},"type":"array"},"confidence":{"description":"命中意图置信度。","format":"double","type":"number"},"current_slots":{"description":"当前槽位列表。","items":{"$ref":"#/definitions/CurrentSlot","description":""},"type":"array"},"flow_complete":{"description":"对话流程是否完成。","type":"boolean"},"history_slots":{"description":"历史槽位列表。","items":{"$ref":"#/definitions/HistorySlot","description":""},"type":"array"},"intention":{"description":"意图","type":"string"},"intention_alias":{"description":"意图名称","type":"string"},"reply":{"description":"机器人回复。","type":"string"},"task_complete":{"description":"任务是否完成。","type":"boolean"}},"required":["confidence","current_slots","flow_complete","history_slots","intention","intention_alias","reply","task_complete"]},"HistorySlot":{"description":"","properties":{"slot_identification":{"description":"用户设置的槽位标识。","type":"string"},"slot_name":{"description":"槽位名称。","type":"string"},"slot_values":{"description":"槽信息。","items":{"$ref":"#/definitions/HistorySlotWord","description":""},"type":"array"}},"required":["slot_identification","slot_name"]},"HistorySlotWord":{"description":"","properties":{"norm_word":{"description":"归一化后的词","type":"string"},"word":{"description":"词","type":"string"}},"required":["norm_word","word"]},"KbqaAnswers":{"description":"","properties":{"answer":{"description":"答案。","type":"string"},"score":{"description":"答案评分。","format":"double","type":"number"}},"required":["answer","score"]},"PostQaChatResp":{"description":"","properties":{"chat_answers":{"$ref":"#/definitions/ChatAnswers","description":"闲聊型机器人回复。"},"docqa_answers":{"$ref":"#/definitions/DocBotAnswers","description":"文档问答返回结果。"},"kbqa_answers":{"$ref":"#/definitions/KbqaAnswers","description":"图谱问答的回复结果。当机器人回复类型是3的时候,该字段必填。"},"qabot_answers":{"$ref":"#/definitions/QaBotAnswersNew","description":"问答型机器人回复。"},"reply_type":{"description":"回复类型:\n0   问答型机器人回复。\n1   任务型机器人回复。\n2   闲聊回复。\n3   图谱问答回复。\n4   文档问答回复。\n5   表格问答回复。","format":"int32","type":"integer"},"request_id":{"description":"请求ID。用来标记调用失败时,用来标记本次问答。","type":"string"},"session_id":{"description":"会话ID,在下一次请求中传入改id表示继续会话。","type":"string"},"tableqa_answers":{"$ref":"#/definitions/TableQaAnswers","description":"表格问答返回结果。"},"taskbot_answers":{"$ref":"#/definitions/TaskBotAnswers","description":"任务型机器人回复。"}},"required":["reply_type","request_id","session_id"]},"PostRequestsReq":{"description":"","properties":{"chat_enable":{"default":false,"description":"默认false\ntrue:使用内部闲聊语料进行兜底\nfalse:不使用闲聊兜底","type":"boolean"},"extends":{"$ref":"#/definitions/Extends","description":"扩展参数。"},"query_types":{"description":"指定发送的机器人类型集合。\n\n0 知识库问答。\n\n1 技能问答。\n\n2 闲聊问答。\n\n3 图谱问答。\n\n4 文档问答。\n\n5 表格问答。\n\n非必填字段。如果不填,会使用默认的机器人融合策略。","items":{"description":"","format":"int32","type":"integer"},"type":"array"},"question":{"description":"用户输入","type":"string"},"session_id":{"description":"会话标识符,UUID格式。如:c04e6f7b-61d7-4a2d-a0c8-f9ecd2f62359。\n\n每次对话开启,机器人创建会话id,下次请求中传入该id表示继续该轮对话,每轮会话有效时间为2分钟。\n若传入的会话id已过期或者为空,则机器人会重新创建新的会话id(重新创建会话id会消耗一定时间)。","type":"string"},"user_id":{"description":"用户id,在日志中用于标识不通用户,可以为任意String","type":"string"}},"required":["question"]},"QaBotAnswer":{"description":"","properties":{"answer":{"description":"知识库答案,包含该字段的回答为直接回答,未包含该字段的是推荐回答。","type":"string"},"domain":{"description":"所属领域。","type":"string"},"qa_pair_id":{"description":"问答对ID。","type":"string"},"score":{"description":"相似度得分,精确到小数点后3位。","format":"double","type":"number"},"st_question":{"description":"标准问题。","type":"string"},"top_score_question":{"description":"最高评分的扩展问或标准问,当关闭内部阈值处理时返回。","type":"string"}}},"QaBotAnswersNew":{"description":"","properties":{"answers":{"description":"问答机器人回复。","items":{"$ref":"#/definitions/QaBotAnswer","description":""},"type":"array"},"recommend_answers":{"description":"问答机器人推荐问题","items":{"$ref":"#/definitions/RecomendAnswer","description":""},"type":"array"}}},"RecomendAnswer":{"description":"","properties":{"domain":{"description":"所属领域。","type":"string"},"qa_pair_id":{"description":"问答对ID。","type":"string"},"score":{"description":"相似度得分,精确到小数点后3位。","format":"double","type":"number"},"st_question":{"description":"标准问题。","type":"string"},"top_score_question":{"description":"最高评分的扩展问或标准问。","type":"string"}}},"RelatedIntention":{"description":"","properties":{"confidence":{"description":"意图置信度。","format":"double","type":"number"},"intention":{"description":"意图名称。","type":"string"}},"required":["intention"]},"SkillResponse":{"description":"","properties":{"candidate":{"$ref":"#/definitions/CandidateIntention","description":"候选意图。"},"frame":{"$ref":"#/definitions/Frame","description":"命中意图回复"},"locked":{"description":"技能是否锁定。","type":"boolean"},"related_intenions":{"description":"相关意图信息。","items":{"$ref":"#/definitions/RelatedIntention","description":""},"type":"array"},"skill_id":{"description":"技能ID。","type":"string"},"skill_version":{"description":"技能模型版本。","type":"string"}},"required":["candidate","frame","locked","related_intenions","skill_id","skill_version"]},"SlotValue":{"description":"","properties":{"begin_position":{"description":"词的起始位置。","format":"int32","type":"integer"},"end_position":{"description":"词的结束位置。","format":"int32","type":"integer"},"norm_word":{"description":"归一化后的标准词。","type":"string"},"word":{"description":"词。","type":"string"}},"required":["begin_position","end_position","norm_word","word"]},"TableQaAnswers":{"description":"","properties":{"answer":{"description":"表格问答答案。","type":"string"},"score":{"description":"评分。","format":"double","type":"number"},"table_id":{"description":"表格ID。","type":"string"}},"required":["answer","score","table_id"]},"Tag":{"description":"","properties":{"should":{"description":"必须要包含其中之一的答案标签id列表","items":{"description":"","type":"string"},"type":"array"}}},"TaskBotAnswers":{"description":"","properties":{"answer":{"description":"答案。","type":"string"},"skill_id":{"description":"技能ID。","type":"string"},"skill_responses":{"description":"技能回复信息。","items":{"$ref":"#/definitions/SkillResponse","description":""},"type":"array"}},"required":["answer","skill_id","skill_responses"]}},"description":null,"group_id":"afdd5824ea9744af89d9deb2587e3541","host":"cbs-ext.cn-north-4.myhuaweicloud.com","id":"88f26caae9404e9aa355c71851d26b37","info_version":"v1","method":"post","name":"ExecuteQaChat","parameters":{},"paths":{"/v1/{project_id}/qabots/{qabot_id}/chat":{"post":{"consumes":[],"deprecated":false,"description":"用户调用该接口和机器人进行聊天。","operationId":"ExecuteQaChat","parameters":[{"description":"项目ID,用于资源隔离。","in":"path","name":"project_id","required":true,"type":"string","x-order":1},{"description":"机器人标识符,qabot编号,UUID格式。","in":"path","name":"qabot_id","required":true,"type":"string","x-order":2},{"description":"用户Token。\n\n通过调用IAM服务获取用户Token接口获取(响应消息头中X-Subject-Token的值)。","in":"header","name":"X-Auth-Token","required":true,"type":"string","x-order":3},{"description":"请求体","in":"body","name":"body","required":true,"schema":{"$ref":"#/definitions/PostRequestsReq"},"x-order":4}],"produces":[],"responses":{"200":{"description":"OK","examples":{"application/json":{"qabot_answers":{"answers":[{"answer":"桌面云打不开了","domain":"桌面云","qa_pair_id":"305cd440-ab4f-4704-9b30-ffa4e82a5606","score":1,"st_question":"桌面云打不开"}]},"reply_type":0}},"schema":{"$ref":"#/definitions/PostQaChatResp"}},"400":{"description":"Bad Request","examples":{"application/json":{"error_code":"CBS.0011","error_msg":"auth failed"}},"schema":{"$ref":"#/definitions/ErrorResp"}}},"summary":"问答机器人会话","tags":["问答机器人"],"x-apiexplorer-hide":"N","x-constraint":"","x-is-registered":"Y","x-name":"问答机器人会话","x-open-region-cloud":"hc","x-order":1,"x-publishpath":"","x-request-examples-1":{"question":"桌面云打不开了"},"x-request-examples-description-1":"","x-request-examples-text-1":"{\n    \"question\": \"桌面云打不开了\"\n}","x-request-examples-url-1":"https://{endpoint}/v1/{project_id}/qabots/{qabot_id}/chat","x-scope":"Commercial","x-support-sdk":"Y"}}},"product_short":"CBS","region_id":"cn-north-4","schemes":["HTTPS"],"security_definitions":null,"summary":"问答机器人会话","tags":"问答机器人","uri":null,"version":"2.0"}