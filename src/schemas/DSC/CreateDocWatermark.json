{"base_path":"/","components":null,"consumes":"","definitions":{"ErrorReturnInfo":{"properties":{"error_code":{"description":"错误码","type":"string"},"error_msg":{"description":"错误信息","type":"string"}},"required":["error_code","error_msg"]}},"description":null,"group_id":"e84d6351acc84ee2b87eb78df3141f45","host":"sdg.cn-north-4.myhuaweicloud.com","id":"abf57ae7535045bda4cda5fa2d47db29","info_version":"v1","method":"post","name":"CreateDocWatermark","parameters":{},"paths":{"/v1/{project_id}/sdg/doc/watermark/embed":{"post":{"consumes":["multipart/form-data"],"description":"对WORD(.docx),PPT(.pptx),EXCEL(.xlsx),PDF(.pdf) 类型的文件嵌入文字暗水印、文字明水印或者图片明水印,用户以formData的格式传入待加水印的文件和水印相关信息,DSC服务给文件加完水印后返回给用户已嵌入水印的文件的二进制流。","operationId":"CreateDocWatermark","parameters":[{"description":"要嵌入水印的文档类型","enum":["WORD","EXCEL","PDF","PPT"],"in":"formData","name":"doc_type","required":true,"type":"string","x-example":"EXCEL"},{"description":"输入文件有密码时,读取文件的密码, 最大支持长度256。如果Office文档有读密码或域控的权限密码,请输入读密码,或者有读权限的域控密码。","in":"formData","maxLength":256,"minLength":0,"name":"file_password","required":false,"type":"string","x-example":"password"},{"description":"添加水印后给文件设置密码, 最大支持长度256。默认不加文档密码。","in":"formData","name":"marked_file_password","required":false,"type":"string"},{"description":"添加水印后给文件设置只读密码, 最大支持长度256。默认不加只读密码。","in":"formData","name":"readonly_password","required":false,"type":"string"},{"description":"明水印内容,与“blind_watermark”字段至少有一个不为空","in":"formData","maxLength":256,"minLength":0,"name":"visible_watermark","required":false,"type":"string","x-example":"watermark"},{"description":"明水印字体大小,取值为[1,100],默认值50","in":"formData","maxLength":100,"minLength":1,"name":"font_size","required":false,"type":"string","x-example":"50"},{"description":"明水印旋转角度,逆时针方向,取值为[0,90],默认值45","in":"formData","maxLength":90,"minLength":0,"name":"rotation","required":false,"type":"string","x-example":"45"},{"description":"明水印的透明度,取值[0,1],默认值为0.3;","in":"formData","maxLength":8,"minLength":0,"name":"opacity","required":false,"type":"string","x-example":"0.3"},{"description":"暗水印内容,与“visible_watermark”字段至少有一个不为空","in":"formData","maxLength":256,"minLength":0,"name":"blind_watermark","required":false,"type":"string","x-example":"blind watermark"},{"description":"项目ID","in":"path","maxLength":32,"minLength":32,"name":"project_id","required":true,"type":"string","x-example":"05c214d53400d5c52fe7c00b83c93dsc"},{"description":"要添加水印的文档","in":"formData","name":"file","required":true,"type":"file","x-example":"file"},{"description":"用户Token。通过调用IAM服务“获取用户Token接口”获取(响应消息头中X-Subject-Token的值)","in":"header","name":"X-Auth-Token","required":true,"type":"string"},{"description":"图形水印的字节流。图形文件的格式必须为“png”或“jpg”,否则返回参数错误;图像文件大小不超过1MB;在分段的请求体“Content-Disposition”部分,参数“name”的值必须为“image_mark”。","in":"formData","name":"image_mark","required":false,"type":"file"},{"description":"该字段为空时,默认为**TEXT**类型。\n\n当该字段为**IMAGE**时:\n- 请求的表单中必须包含名为“image”的图像文件,图像格式必须为“png”或“jpg”,否则返回参数错误;\n- 图像文件大小不超过1MB;\n- “visible_watermark”,“font_size”,“rotation”和“opacity”字段无效。","enum":["TEXT","IMAGE"],"in":"formData","name":"visible_type","required":false,"type":"string"}],"produces":["*/*"],"responses":{"200":{"description":"请求成功","examples":{"application/octet-stream":"{\"Watermarked document\"}"},"schema":{"format":"binary","type":"string"}},"400":{"description":"无效请求","examples":{"application/json":{"error_code":"DSC.00000007 ","error_msg":"File format error"}},"schema":{"$ref":"#/definitions/ErrorReturnInfo"}}},"summary":"文档嵌入水印","tags":["文档水印"],"x-apiErrorCodes":"[]","x-hybridcloud":"true","x-is-registered":"Y","x-request-examples-1":{"blind_watermark":"blind_watermark","doc_type":"WORD","file":"test.doc","font_size":"30","opacity":"0.1","rotation":"45","visible_watermark":"visible_watermark"},"x-request-examples-description-1":"> 通过form表单提交请求,其中file是具体文件。","x-request-examples-text-1":{"blind_watermark":"blind_watermark","doc_type":"WORD","file":"test.doc","font_size":"30","opacity":"0.1","rotation":"45","visible_watermark":"visible_watermark"},"x-request-examples-url-1":"POST /v1/{project_id}/sdg/doc/watermark/embed","x-support-sdk":"Y"}}},"product_short":"DSC","region_id":"cn-north-4","schemes":["HTTPS"],"security_definitions":null,"summary":"文档嵌入水印","tags":"文档水印","uri":null,"version":"2.0"}