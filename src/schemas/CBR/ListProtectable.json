{"base_path":"/","components":null,"consumes":"[\"application/json;charset=UTF-8\"]","definitions":{"Billing":{"properties":{"allocated":{"description":"已分配容量,单位GB","format":"int32","type":"integer"},"charging_mode":{"description":"创建模式","enum":["pre_paid","post_paid"],"type":"string"},"cloud_type":{"description":"云平台","enum":["public","hybrid"],"type":"string","x-huawei-extraAnnotation":""},"consistent_level":{"description":"崩溃一致性(crash_consistent)或应用一致性(app_consistent)","enum":["app_consistent","crash_consistent"],"type":"string"},"frozen_scene":{"description":"冻结场景","type":"string","x-huawei-extraAnnotation":""},"is_multi_az":{"default":false,"description":"存储库多az属性","type":"boolean","x-open-region-cloud":"hc,hk,tlf","x-support-field-sdk":false},"object_type":{"description":"对象类型:云服务器(server),云硬盘(disk),文件系统(turbo),云桌面(workspace),VMware(vmware),关系型数据库(rds),文件(file)。","enum":["server","disk","workspace","vmware","rds","file"],"type":"string"},"order_id":{"description":"订单ID","type":"string"},"product_id":{"description":"产品ID","type":"string"},"protect_type":{"description":"保护类型","enum":["backup","replication","hybrid"],"type":"string"},"size":{"description":"容量,单位GB","format":"int32","maximum":10485760,"minimum":1,"type":"integer"},"spec_code":{"description":"规格编码: 云服务备份存储库:vault.backup.server.normal;云硬盘备份存储库:vault.backup.volume.normal;文件备份存储库:vault.backup.turbo.normal;数据库备份存储库:vault.backup.database.normal;混合云备份存储库:vault.hybrid.server.normal;复制备份存储库:vault.replication.server.normal","enum":["vault.backup.server.normal","vault.backup.volume.normal"],"type":"string","x-huawei-extraAnnotation":""},"status":{"description":"存储库状态","enum":["available","lock","frozen","deleting","error"],"type":"string"},"storage_unit":{"description":"存储库桶名","type":"string"},"used":{"description":"已使用容量,单位MB","format":"int32","type":"integer"}},"required":["allocated","charging_mode","consistent_level","protect_type","size","spec_code","status","used"]},"BindRulesTags":{"description":"自动绑定规则标签","properties":{"key":{"description":"key不能包含非打印字符ASCII(0-31),“=”,“*”,“<”,“>”,“\\\\”,“,”,“|”,“/”。\nkey只能由中文,字母,数字,“-”,“_”组成。","type":"string","x-open-region-cloud":"hc,hk,otc,tlf,ctc,hcso,sbc,hcso_dt"},"value":{"description":"value不能包含非打印字符ASCII(0-31),“=”,“*”,“<”,“>”,“\\”,“,”,“|”,“/”。\n\nvalue只能由中文,字母,数字,“-”,“_”,“.”组成。","type":"string","x-open-region-cloud":"hc,hk,otc,tlf,ctc,hcso,sbc,hcso_dt"}},"required":["key","value"]},"ProtectableResult":{"properties":{"code":{"description":"不支持备份的错误码","type":"string"},"message":{"description":"资源不可备份的原因信息,当资源可保护性检验失败时才有该字段。","type":"string","x-open-region-cloud":"hc,hk"},"reason":{"description":"不支持备份的原因","type":"string"},"result":{"description":"是否可备份","type":"boolean"},"vault":{"$ref":"#/definitions/VaultGet","description":"绑定的存储库"}},"required":["result"]},"ProtectablesListResp":{"description":"查询可保护性能力返回体","properties":{"instances":{"description":"可保护性查询实例","items":{"$ref":"#/definitions/ProtectablesResp"},"type":"array","x-huawei-extraAnnotation":""}},"required":["instances"]},"ProtectablesResp":{"properties":{"children":{"description":"子资源","items":{"type":"object"},"type":"array"},"detail":{"description":"资源详情","type":"object"},"id":{"description":"id","type":"string"},"name":{"description":"名称","type":"string"},"protectable":{"$ref":"#/definitions/ProtectableResult","description":"是否可备份"},"size":{"description":"大小,单位GB","format":"int32","type":"integer","x-huawei-extraAnnotation":""},"status":{"description":"资源状态","enum":["active","deleted","error"],"type":"string","x-huawei-extraAnnotation":""},"type":{"description":"待备份资源的类型, 云服务器: OS::Nova::Server, 云硬盘: OS::Cinder::Volume, 裸金属服务器: OS::Ironic::BareMetalServer, 线下本地服务器: OS::Native::Server, 弹性文件系统: OS::Sfs::Turbo, 云桌面:OS::Workspace::DesktopV2","type":"string","x-huawei-extraAnnotation":""}},"required":["children","id","name","protectable","type"]},"ResourceExtraInfo":{"properties":{"exclude_volumes":{"description":"需要排除备份的卷id。仅在多系统盘备份特性中有效,排除不需要备份的磁盘。当虚拟机新绑定磁盘时,也能继续排除之前设置不用备份的卷。","items":{"description":"","type":"string"},"type":"array","x-open-region-cloud":"hc,hk,otc,ocb,hcso,sbc,g42,hcso_dt"}}},"ResourceExtraInfoIncludeVolumes":{"description":"","properties":{"id":{"description":"卷ID,仅支持uuid","type":"string","x-open-region-cloud":"hc,hk"},"os_version":{"description":"操作系统类型","type":"string","x-open-region-cloud":"hc,hk"}},"required":["id"]},"ResourceResp":{"description":"资源详情","properties":{"backup_count":{"description":"副本数量","format":"int32","type":"integer","x-huawei-extraAnnotation":""},"backup_size":{"description":"副本大小","format":"int32","type":"integer","x-huawei-extraAnnotation":""},"extra_info":{"$ref":"#/definitions/ResourceExtraInfo","description":"资源附加信息","x-open-region-cloud":"hc,hk"},"id":{"description":"待备份资源id","type":"string"},"name":{"description":"待备份资源名称","maxLength":255,"minLength":0,"type":"string"},"protect_status":{"description":"保护状态","enum":["available","error","protecting","restoring","removing"],"type":"string","x-huawei-extraAnnotation":""},"size":{"description":"资源已分配容量,单位为GB","format":"int32","type":"integer","x-huawei-extraAnnotation":""},"type":{"description":"待备份资源的类型, 云服务器: OS::Nova::Server, 云硬盘: OS::Cinder::Volume, 裸金属服务器: OS::Ironic::BareMetalServer, 线下本地服务器: OS::Native::Server, 弹性文件系统: OS::Sfs::Turbo, 云桌面:OS::Workspace::DesktopV2","type":"string"}},"required":["id","name","type"]},"Tag":{"description":"","properties":{"key":{"description":"键。\nkey最大长度为36个字符。\nkey不能为空字符串。\nkey前后空格会被丢弃。\nkey不能包含非打印字符ASCII(0-31),“=”,“*”,“<”,“>”,“\\”,“,”,“|”,“/”。\nkey只能由中文,字母,数字,“-”,“_”组成。","type":"string","x-huawei-extraAnnotation":"","x-obc":"Y","x-open-region-cloud":"hc,hk,otc,tlf,ctc,hcso,sbc"},"value":{"description":"值。\n\n添加标签时value值必选,删除标签时value值可选。\n\nvalue最大长度为43个字符。\n\nvalue可以为空字符串。\n\nvalue前后的空格会被丢弃。\n\nvalue不能包含非打印字符ASCII(0-31),“=”,“*”,“<”,“>”,“\\”,“,”,“|”,“/”。\nvalue只能由中文,字母,数字,“-”,“_”,“.”组成。","type":"string","x-huawei-extraAnnotation":"","x-obc":"Y","x-open-region-cloud":"hc,hk,otc,tlf,ctc,hcso,sbc"}},"required":["key","value"]},"Vault":{"properties":{"auto_bind":{"description":"是否自动绑定,默认为false,不支持。","type":"boolean"},"auto_expand":{"description":"是否开启存储库自动扩容能力(只支持按需存储库)。","type":"boolean","x-huawei-extraAnnotation":""},"billing":{"$ref":"#/definitions/Billing","description":"运营信息"},"bind_rules":{"$ref":"#/definitions/VaultBindRules","description":"绑定规则","x-huawei-extraAnnotation":""},"created_at":{"description":"创建时间,例如:\"2020-02-05T10:38:34.209782\"","type":"string","x-huawei-extraAnnotation":""},"description":{"description":"存储库自定义描述信息。","maxLength":255,"minLength":0,"pattern":"^[^<>]*$","type":"string","x-huawei-extraAnnotation":""},"enterprise_project_id":{"description":"企业项目id,默认为‘0’。","type":"string","x-open-region-cloud":"hc,hk,hcso,tm"},"id":{"description":"存储库ID","type":"string"},"name":{"description":"存储库名称","maxLength":64,"minLength":1,"pattern":"^[\\u4E00-\\u9FA5\\uf900-\\ufa2da-zA-Z0-9_\\-]*$","type":"string"},"project_id":{"description":"项目ID","type":"string"},"provider_id":{"description":"存储库资源类型id","type":"string"},"resources":{"description":"存储库资源","items":{"$ref":"#/definitions/ResourceResp"},"type":"array"},"smn_notify":{"default":true,"description":"存储库smn消息通知开关","type":"boolean","x-open-region-cloud":"hc,hk"},"tags":{"description":"存储库标签","items":{"$ref":"#/definitions/Tag","description":""},"type":"array"},"threshold":{"default":80,"description":"存储库容量阈值,已用容量占总容量达到此百分比即发送相关通知","format":"int32","maximum":100,"minimum":1,"type":"integer","x-open-region-cloud":"hc,hk"},"user_id":{"description":"用户id","type":"string","x-huawei-extraAnnotation":""}},"required":["billing","id","name","project_id","provider_id","resources"]},"VaultBindRules":{"properties":{"tags":{"description":"按tags过滤自动绑定的资源\n\n最小长度:1\n\n最大长度:5","items":{"$ref":"#/definitions/BindRulesTags","description":""},"type":"array"}}},"VaultGet":{"allOf":[{"$ref":"#/definitions/Vault"},{"properties":{"resources":{"description":"资源","items":{"$ref":"#/definitions/ResourceResp","description":""},"type":"array","x-huawei-extraAnnotation":""},"updated_at":{"description":"更新时间,例如:\"2020-02-05T10:38:34.209782\"","type":"string","x-huawei-extraAnnotation":""},"version":{"description":"版本","type":"string","x-huawei-extraAnnotation":""}},"required":["resources","updated_at"]}]}},"description":null,"group_id":"11b1e4b30d524dacb6891902e04115dd","host":"cbr.cn-north-4.myhuaweicloud.com","id":"3b91f1b52fd64dbfbb65fa70efcf6a5d","info_version":"v1","method":"get","name":"ListProtectable","parameters":{},"paths":{"/v3/{project_id}/protectables/{protectable_type}/instances":{"get":{"consumes":[],"deprecated":false,"description":"查询可保护性资源列表","operationId":"ListProtectable","parameters":[{"description":"每页显示的条目数量,每页最多支持50条","format":"int32","in":"query","name":"limit","required":false,"type":"integer","x-admin":"","x-order":1},{"description":"上一次查询最后一条的ID","in":"query","name":"marker","required":false,"type":"string","x-order":2},{"description":"按名称过滤","in":"query","name":"name","required":false,"type":"string","x-order":3},{"description":"偏移值","format":"int32","in":"query","name":"offset","required":false,"type":"integer","x-order":4},{"description":"项目ID","in":"path","name":"project_id","required":true,"type":"string","x-order":5},{"description":"对象类型","enum":["server","disk"],"in":"path","name":"protectable_type","required":true,"type":"string","x-order":6},{"description":"资源的状态,如available,error 等","in":"query","name":"status","required":false,"type":"string","x-order":7},{"description":"根据资源id过滤","in":"query","name":"id","required":false,"type":"string","x-order":8},{"description":"根据该id过滤属于该服务器的所有磁盘,支持企业多项目的用户才能传入此参数","in":"query","name":"server_id","required":false,"type":"string","x-order":9}],"produces":[],"responses":{"200":{"description":"OK","examples":{"application/json":{"instances":[{"children":[{"children":[],"detail":{"attachments":[{"attached_at":"2019-05-08T06:55:26.563986","attachment_id":"e16631fa-0522-4ac8-8f78-19db435caf68","device":"/dev/vda","host_name":null,"id":"13eb535f-8635-4faf-9f08-584d21e78f0a","server_id":"55ecd8b8-1457-4a2a-a9df-53756a690082","volume_id":"13eb535f-8635-4faf-9f08-584d21e78f0a"}],"availability_zone":"cn-cmcc1a-01","bootable":"true","consistencygroup_id":null,"created_at":"2019-05-08T06:54:58.477749","description":null,"encrypted":false,"id":"13eb535f-8635-4faf-9f08-584d21e78f0a","links":[{"href":"https://volume.region.cn-cmcc1.internal.cmclouds.com/v2/3aec9116a6a5487ca14987121d2818fe/volumes/13eb535f-8635-4faf-9f08-584d21e78f0a","rel":"self"},{"href":"https://volume.region.cn-cmcc1.internal.cmclouds.com/3aec9116a6a5487ca14987121d2818fe/volumes/13eb535f-8635-4faf-9f08-584d21e78f0a","rel":"bookmark"}],"metadata":{"attached_mode":"rw","policy":"2ecbcffd-08ba-43f7-bf8d-95daba753464","readonly":"False"},"multiattach":false,"name":"no_delete_for_cbr_interface-volume-0000","os-vol-host-attr:host":"cn-cmcc1a-03.cn-cmcc1#kvm_fusionstorage","os-vol-mig-status-attr:migstat":null,"os-vol-mig-status-attr:name_id":null,"os-vol-tenant-attr:tenant_id":"3aec9116a6a5487ca14987121d2818fe","replication_status":"disabled","shareable":false,"size":40,"snapshot_id":null,"source_volid":null,"status":"in-use","updated_at":"2019-05-08T08:33:07.855484","user_id":"3204777a731c4ebea330350c04f41b92","volume_image_metadata":{"__account_code":"","__backup_id":"","__data_origin":"file,jingxiang:CentOS-7.2-64bit.zvhd2","__description":"","__image_location":"172.100.45.130:443:pcsimsf8bd00bf6c304d2e8cf4e2beb0aed702:703eb90a-a65f-4c72-b4c1-f070a55d068b","__image_size":"3295645696","__image_source_type":"uds","__imagetype":"gold","__isregistered":"true","__originalimagename":"703eb90a-a65f-4c72-b4c1-f070a55d068b","__os_bit":"64","__os_type":"Linux","__os_version":"CentOS 7.2 64bit","__platform":"CentOS","__productcode":"","__quick_start":"true","__root_origin":"file","__support_diskintensive":"true","__support_kvm":"true","__support_xen":"true","checksum":"99914b932bd37a50b983c5e7c90ae93b","container_format":"bare","disk_format":"vhd","image_id":"703eb90a-a65f-4c72-b4c1-f070a55d068b","image_name":"CentOS7.2-cloudinit","min_disk":"40","min_ram":"0","size":"2","virtual_env_type":"FusionCompute"},"volume_type":"SATA"},"id":"13eb535f-8635-4faf-9f08-584d21e78f0a","name":"no_delete_for_cbr_interface-volume-0000","size":40,"status":"in-use","type":"OS::Cinder::Volume"},{"children":[],"detail":{"attachments":[{"attached_at":"2019-05-08T06:56:25.891730","attachment_id":"3b32cb75-bd96-493b-8fb2-13f063c876d5","device":"/dev/vdb","host_name":null,"id":"8d3d519f-d409-4be3-8a1f-9f7a5ecb7a99","server_id":"55ecd8b8-1457-4a2a-a9df-53756a690082","volume_id":"8d3d519f-d409-4be3-8a1f-9f7a5ecb7a99"}],"availability_zone":"cn-cmcc1a-01","bootable":"false","consistencygroup_id":null,"created_at":"2019-03-26T09:30:46.783578","description":null,"encrypted":false,"id":"8d3d519f-d409-4be3-8a1f-9f7a5ecb7a99","links":[{"href":"https://volume.region.cn-cmcc1.internal.cmclouds.com/v2/3aec9116a6a5487ca14987121d2818fe/volumes/8d3d519f-d409-4be3-8a1f-9f7a5ecb7a99","rel":"self"},{"href":"https://volume.region.cn-cmcc1.internal.cmclouds.com/3aec9116a6a5487ca14987121d2818fe/volumes/8d3d519f-d409-4be3-8a1f-9f7a5ecb7a99","rel":"bookmark"}],"metadata":{"attached_mode":"rw","hw:passthrough":"false","policy":"cf3274fc-d23e-4c12-8be7-1e41b3c2faea","readonly":"False"},"multiattach":false,"name":"volume-f926-0001","os-vol-host-attr:host":"cn-cmcc1a-01.cn-cmcc1#FusionStorage","os-vol-mig-status-attr:migstat":null,"os-vol-mig-status-attr:name_id":null,"os-vol-tenant-attr:tenant_id":"3aec9116a6a5487ca14987121d2818fe","replication_status":"disabled","shareable":false,"size":10,"snapshot_id":null,"source_volid":null,"status":"in-use","updated_at":"2019-05-08T06:56:26.207240","user_id":"f3d66502790d4ddaadef5056059ed8f4","volume_type":"SATA"},"id":"8d3d519f-d409-4be3-8a1f-9f7a5ecb7a99","name":"volume-f926-0001","size":10,"status":"in-use","type":"OS::Cinder::Volume"}],"detail":{"OS-DCF:diskConfig":"MANUAL","OS-EXT-AZ:availability_zone":"cn-cmcc1a-01","OS-EXT-SRV-ATTR:host":"cn-cmcc1a-03.cn-cmcc1","OS-EXT-SRV-ATTR:hostname":"no-delete-for-cbr-interface","OS-EXT-SRV-ATTR:hypervisor_hostname":"nova003@36","OS-EXT-SRV-ATTR:instance_name":"instance-0004456e","OS-EXT-SRV-ATTR:kernel_id":"","OS-EXT-SRV-ATTR:launch_index":0,"OS-EXT-SRV-ATTR:ramdisk_id":"","OS-EXT-SRV-ATTR:reservation_id":"r-kpb5xckf","OS-EXT-SRV-ATTR:root_device_name":"/dev/vda","OS-EXT-SRV-ATTR:user_data":"IyEvYmluL2Jhc2gKZWNobyAncm9vdDokNiQ5c1FaeXIkdnk5N1pGYXg5WUpRTUpPRElGdGdjYnovTUdEZ1dad3E4VTM1dWE4MjQxTmtDTG1GRjJUUm1BdnZSQnNCLy93VER0aFVRNUt0Z1p6dUlrenp2NmQwYTAnIHwgY2hwYXNzd2QgLWU7","OS-EXT-STS:power_state":1,"OS-EXT-STS:task_state":null,"OS-EXT-STS:vm_state":"active","OS-SRV-USG:launched_at":"2019-05-08T06:55:38.000000","OS-SRV-USG:terminated_at":null,"accessIPv4":"","accessIPv6":"","addresses":{"94b88790-c906-4450-b7c2-1c2b1ea639bf":[{"OS-EXT-IPS-MAC:mac_addr":"fa:16:3e:9b:9d:af","OS-EXT-IPS:port_id":"f22f531a-d38a-480b-b59e-f7e5db0dcdcc","OS-EXT-IPS:type":"fixed","addr":"192.168.1.44","version":4},{"OS-EXT-IPS-MAC:mac_addr":"fa:16:3e:9b:9d:af","OS-EXT-IPS:port_id":"f22f531a-d38a-480b-b59e-f7e5db0dcdcc","OS-EXT-IPS:type":"floating","addr":"100.78.0.199","version":4}]},"config_drive":"","created":"2019-05-08T06:55:22Z","description":"","enterprise_project_id":"0","flavor":{"disk":"0","id":"s3.small.1","name":"s3.small.1","ram":"1024","vcpus":"1"},"hostId":"179f22cafe6b951921bd6deb3b13a978df620427fb37bbb7c619de98","host_status":"UP","id":"55ecd8b8-1457-4a2a-a9df-53756a690082","image":"","key_name":null,"locked":false,"metadata":{"cascaded.instance_extrainfo":"","charging_mode":"0","image_name":"CentOS7.2-cloudinit","metering.cloudServiceType":"sys.service.type.ec2","metering.image_id":"703eb90a-a65f-4c72-b4c1-f070a55d068b","metering.imagetype":"gold","metering.resourcespeccode":"s3.small.1.linux","metering.resourcetype":"1","os_bit":"64","os_type":"Linux","virtual_env_type":"FusionCompute","vpc_id":"94b88790-c906-4450-b7c2-1c2b1ea639bf"},"name":"no_delete_for_cbr_interface","os-extended-volumes:volumes_attached":[{"bootIndex":0,"delete_on_termination":false,"device":"/dev/vda","id":"13eb535f-8635-4faf-9f08-584d21e78f0a"},{"bootIndex":null,"delete_on_termination":false,"device":"/dev/vdb","id":"8d3d519f-d409-4be3-8a1f-9f7a5ecb7a99"}],"os:scheduler_hints":{},"progress":0,"security_groups":[{"name":"default"}],"status":"ACTIVE","sys_tags":[{"key":"_sys_enterprise_project_id","value":"0"}],"tags":[],"tenant_id":"3aec9116a6a5487ca14987121d2818fe","updated":"2019-05-08T06:57:02Z","user_id":"f3d66502790d4ddaadef5056059ed8f4"},"id":"55ecd8b8-1457-4a2a-a9df-53756a690082","name":"no_delete_for_cbr_interface","protectable":{"code":"","reason":"","result":true,"vault":null},"size":50,"status":"ACTIVE","type":"OS::Nova::Server"}]}},"schema":{"$ref":"#/definitions/ProtectablesListResp"}}},"summary":"查询可保护资源","tags":["可保护性"],"x-apiexplorer-hide":"false","x-constraint":"","x-first-open-time":"","x-hybridcloud":"","x-is-registered":"Y","x-name":"查询可保护资源","x-open-region-cloud":"hc,hk,obc","x-order":52,"x-publishpath":"","x-request-examples-1":"","x-request-examples-description-1":"","x-request-examples-text-1":"","x-request-examples-url-1":"GET  https://{endpoint}/v3/{project_id}/protectables/{protectable_type}/instances","x-scope":"Commercial","x-source":"","x-support-sdk":"Y"}}},"product_short":"CBR","region_id":"cn-north-4","schemes":["HTTPS"],"security_definitions":null,"summary":"查询可保护资源","tags":"可保护性","uri":null,"version":"2.0"}