{"base_path":"/","components":null,"consumes":"[\"application/json;charset=UTF-8\"]","definitions":{"BillingCreate":{"description":"创建参数","properties":{"charging_mode":{"default":"post_paid","description":"创建模式,按需:post_paid,包周期:pre_paid,默认为post_paid","enum":["post_paid","pre_paid"],"type":"string"},"cloud_type":{"description":"云平台,公有云或者混合云","enum":["public","hybrid"],"type":"string"},"consistent_level":{"description":"规格,崩溃一致性(crash_consistent)或应用一致性(app_consistent)","enum":["app_consistent","crash_consistent"],"type":"string","x-huawei-extraAnnotation":""},"console_url":{"description":"跳转URL","maxLength":255,"minLength":1,"type":"string"},"is_auto_pay":{"default":false,"description":"是否自动付费,默认为不自动付费","type":"boolean"},"is_auto_renew":{"default":false,"description":"到期后是否自动续期,默认不续期","type":"boolean"},"is_multi_az":{"default":false,"description":"存储库多az属性,默认为false","type":"boolean","x-open-region-cloud":"hc,hk"},"object_type":{"description":"对象类型:云服务器(server),云硬盘(disk),文件系统(turbo),云桌面(workspace),VMware(vmware),关系型数据库(rds),文件(file)。","enum":["server","disk","turbo","workspace","vmware","rds","file"],"type":"string","x-huawei-extraAnnotation":""},"period_num":{"description":"创建类型的数量,charging_mode为pre_paid必填","format":"int32","type":"integer","x-open-region-cloud":"hc,hk"},"period_type":{"description":"创建类型,charging_mode为pre_paid必填,按年(year)或者按月(month)","enum":["year","month"],"type":"string","x-open-region-cloud":"hk,hc"},"protect_type":{"description":"保护类型:备份(backup)、复制(replication)","enum":["backup","replication"],"type":"string","x-huawei-extraAnnotation":""},"size":{"description":"容量,单位GB","format":"int32","maximum":10485760,"minimum":10,"type":"integer"}},"required":["consistent_level","object_type","protect_type","size"]},"BindRulesTags":{"description":"自动绑定规则标签","properties":{"key":{"description":"key不能包含非打印字符ASCII(0-31),“=”,“*”,“<”,“>”,“\\\\”,“,”,“|”,“/”。\nkey只能由中文,字母,数字,“-”,“_”组成。","type":"string","x-open-region-cloud":"hc,hk,otc,tlf,ctc,hcso,sbc,hcso_dt"},"value":{"description":"value不能包含非打印字符ASCII(0-31),“=”,“*”,“<”,“>”,“\\”,“,”,“|”,“/”。\n\nvalue只能由中文,字母,数字,“-”,“_”,“.”组成。","type":"string","x-open-region-cloud":"hc,hk,otc,tlf,ctc,hcso,sbc,hcso_dt"}},"required":["key","value"]},"CbcOrderResult":{"properties":{"cloudServiceId":{"description":"云服务ID","type":"string"},"orderId":{"description":"订单ID","type":"string"},"resourceId":{"description":"包周期资源预生成资源id。","type":"string"},"subscribeResult":{"description":"订购结果,1:成功;0:失败","format":"int32","type":"integer"}},"required":["orderId","subscribeResult"]},"CombinedOrder":{"description":"组合订单","properties":{"combined_order_ecs_num":{"description":"组合订单中 ECS 服务器数量,当前批量最大为 500。\n\n最小值:1\n\n最大值:1000","format":"int32","maximum":1000,"minimum":1,"type":"integer"},"combined_order_id":{"description":"组合订单 ID","type":"string"},"combined_order_num":{"description":"组合订单数量。\n\n最小值:1\n\n最大值:1000","format":"int32","maximum":1000,"minimum":1,"type":"integer"}}},"ErrorResponse":{"description":"","properties":{"error_code":{"description":"请参见[错误码](ErrorCode.xml)。","type":"string","x-huawei-extraAnnotation":""},"error_msg":{"description":"错误信息","type":"string"}},"required":["error_code","error_msg"]},"ResourceCreate":{"properties":{"extra_info":{"$ref":"#/definitions/ResourceExtraInfo","description":"资源附加信息","x-open-region-cloud":"hc,hk"},"id":{"description":"待备份资源id","type":"string","x-huawei-extraAnnotation":""},"name":{"description":"名称","maxLength":255,"minLength":0,"type":"string","x-huawei-extraAnnotation":""},"type":{"description":"待备份资源的类型, 云服务器: OS::Nova::Server, 云硬盘: OS::Cinder::Volume, 裸金属服务器: OS::Ironic::BareMetalServer, 线下本地服务器: OS::Native::Server, 弹性文件系统: OS::Sfs::Turbo, 云桌面:OS::Workspace::DesktopV2","type":"string","x-huawei-extraAnnotation":""}},"required":["id","type"]},"ResourceExtraInfo":{"properties":{"exclude_volumes":{"description":"需要排除备份的卷id。仅在多系统盘备份特性中有效,排除不需要备份的磁盘。当虚拟机新绑定磁盘时,也能继续排除之前设置不用备份的卷。","items":{"description":"","type":"string"},"type":"array","x-open-region-cloud":"hc,hk,otc,ocb,hcso,sbc,g42,hcso_dt"}}},"ResourceExtraInfoIncludeVolumes":{"description":"","properties":{"id":{"description":"卷ID,仅支持uuid","type":"string","x-open-region-cloud":"hc,hk"},"os_version":{"description":"操作系统类型","type":"string","x-open-region-cloud":"hc,hk"}},"required":["id"]},"Tag":{"description":"","properties":{"key":{"description":"键。\nkey最大长度为36个字符。\nkey不能为空字符串。\nkey前后空格会被丢弃。\nkey不能包含非打印字符ASCII(0-31),“=”,“*”,“<”,“>”,“\\”,“,”,“|”,“/”。\nkey只能由中文,字母,数字,“-”,“_”组成。","type":"string","x-huawei-extraAnnotation":"","x-obc":"Y","x-open-region-cloud":"hc,hk,otc,tlf,ctc,hcso,sbc"},"value":{"description":"值。\n\n添加标签时value值必选,删除标签时value值可选。\n\nvalue最大长度为43个字符。\n\nvalue可以为空字符串。\n\nvalue前后的空格会被丢弃。\n\nvalue不能包含非打印字符ASCII(0-31),“=”,“*”,“<”,“>”,“\\”,“,”,“|”,“/”。\nvalue只能由中文,字母,数字,“-”,“_”,“.”组成。","type":"string","x-huawei-extraAnnotation":"","x-obc":"Y","x-open-region-cloud":"hc,hk,otc,tlf,ctc,hcso,sbc"}},"required":["key","value"]},"VaultBindRules":{"properties":{"tags":{"description":"按tags过滤自动绑定的资源\n\n最小长度:1\n\n最大长度:5","items":{"$ref":"#/definitions/BindRulesTags","description":""},"type":"array"}}},"VaultCreateParameters":{"description":"存储库创建参数","properties":{"combined_order":{"$ref":"#/definitions/CombinedOrder","description":"组合订单。"}}},"VaultOrder":{"description":"存储库订单","properties":{"auto_bind":{"description":"是否支持自动挂载。","type":"boolean"},"auto_expand":{"description":"是否开启存储库自动扩容能力(只支持按需存储库)。","type":"boolean"},"backup_policy_id":{"description":"备份策略ID,不设置时为null,不自动备份。","type":"string"},"billing":{"$ref":"#/definitions/BillingCreate","description":"创建参数信息"},"bind_rules":{"$ref":"#/definitions/VaultBindRules","description":"自动挂载的规则"},"description":{"description":"描述\n\n最小长度:0\n\n最大长度:255","maxLength":255,"minLength":0,"type":"string"},"enterprise_project_id":{"description":"企业项目ID,默认为‘0’。","type":"string"},"name":{"description":"存储库名称\n\n最小长度:1\n\n最大长度:64","maxLength":64,"minLength":1,"type":"string"},"parameters":{"$ref":"#/definitions/VaultCreateParameters","description":"存储库订单联合参数"},"resources":{"description":"绑定的备份资源,未在创建时绑定资源填[]","items":{"$ref":"#/definitions/ResourceCreate","description":""},"maxItems":256,"minItems":0,"type":"array"},"smn_notify":{"description":"当容量到达阈值,是否启用通知","type":"boolean"},"tags":{"description":"标签列表 tags不允许为空列表。 tags中最多包含10个key。 tags中key不允许重复。","items":{"$ref":"#/definitions/Tag","description":""},"maxItems":10,"minItems":1,"type":"array"},"threshold":{"description":"存储库阈值,百分比。\n\n最小值:1\n\n最大值:100","format":"int32","type":"integer"}},"required":["billing","resources"]},"VaultOrderCreateReqs":{"description":"创建包周期存储库请求体","properties":{"vault":{"$ref":"#/definitions/VaultOrder","description":"存储库"}},"required":["vault"]},"VaultOrderCreateRes":{"description":"创建包周期存储库返回体","properties":{"errText":{"description":"创建结果信息","type":"string"},"error_code":{"description":"操作错误码\n0:无错误","type":"string"},"orders":{"description":"订单详情","items":{"$ref":"#/definitions/CbcOrderResult","description":""},"type":"array"},"retCode":{"description":"创建结果代码\n0:成功","format":"int32","type":"integer"}}}},"description":null,"group_id":"11b1e4b30d524dacb6891902e04115dd","host":"cbr.cn-north-4.myhuaweicloud.com","id":"d6da4134bf9e4c8ab3a911d3dabc26c5","info_version":"v1","method":"post","name":"CreatePostPaidVault","parameters":{},"paths":{"/v3/{project_id}/vaults/order":{"post":{"consumes":[],"deprecated":false,"description":"创建包周期存储库","operationId":"CreatePostPaidVault","parameters":[{"description":"项目ID","in":"path","name":"project_id","required":true,"type":"string","x-open-region-cloud":"","x-order":1},{"description":"用户Token。\n通过调用IAM服务获取用户Token接口获取(响应消息头中X-Subject-Token的值)。","in":"header","name":"X-Auth-Token","required":true,"type":"string","x-example":"MIIDkgYJKoZIhvcNAQcCoIIDgzCCXXXXX...","x-open-region-cloud":"","x-order":2},{"description":"请求体","in":"body","name":"CreatePostPaidVaultRequestBody","required":true,"schema":{"$ref":"#/definitions/VaultOrderCreateReqs"},"x-open-region-cloud":"","x-order":3}],"produces":[],"responses":{"200":{"description":"OK","examples":{"application/json":{"errText":"success","error_code":"0","orders":[{"cloudServiceId":"cbr","orderId":"CS2303030941NJJIW","resourceId":"ef3bf6bb-1ffb-46c0-8b23-f935ded5024a","subscribeResult":1}],"retCode":0}},"schema":{"$ref":"#/definitions/VaultOrderCreateRes"}},"400":{"description":"Bad Request","schema":{"$ref":"#/definitions/ErrorResponse"}}},"summary":"创建包周期存储库","tags":["存储库"],"x-apiexplorer-hide":"false","x-constraint":"","x-first-open-time":"","x-hybridcloud":"","x-is-registered":"Y","x-name":"创建包周期存储库","x-open-region-cloud":"hc,hk,otc","x-order":73,"x-publishpath":"","x-request-examples-1":{"vault":{"billing":{"charging_mode":"pre_paid","consistent_level":"app_consistent","object_type":"server","period_num":1,"period_type":"month","protect_type":"backup","size":80},"name":"vault_name","resources":[]}},"x-request-examples-2":{"vault":{"auto_bind":false,"backup_policy_id":"70e9c916-7109-472d-94e7-120900e4ba61","billing":{"charging_mode":"pre_paid","cloud_type":"public","consistent_level":"app_consistent","console_url":"https://www.com","is_auto_pay":false,"is_auto_renew":false,"is_multi_az":false,"object_type":"server","period_num":1,"period_type":"month","protect_type":"backup","size":80},"bind_rules":{"tags":[{"key":"bind_rules_key","value":"bind_rules_value"}]},"description":"description","name":"123","parameters":{"combined_order":{"combined_order_ecs_num":5,"combined_order_id":"CS2303030959MR1IT","combined_order_num":5}},"resources":[{"extra_info":{"exclude_volumes":["1855eb9a-2b5e-4938-a9f0-aea08b6f9243"]},"id":"8ef08ba1-81f7-4e41-ae49-d3e2fb0ba388","name":"server_name","type":"OS::Nova::Server"}],"smn_notify":true,"tags":[{"key":"key","value":"value"}],"threshold":80}},"x-request-examples-description-1":"创建一个月包周期云服务器备份存储库,只包含必备参数","x-request-examples-description-2":"添加所有参数,创建包周期存储库","x-request-examples-text-1":"{\n    \"vault\": {\n        \"name\": \"vault_name\",\n        \"billing\": {\n            \"consistent_level\": \"app_consistent\",\n            \"object_type\": \"server\",\n            \"protect_type\": \"backup\",\n            \"size\": 80,\n            \"charging_mode\":\"pre_paid\",\n            \"period_type\":\"month\",\n            \"period_num\": 1\n        },\n        \"resources\":[]\n    }\n}","x-request-examples-text-2":"{\n    \"vault\": {\n        \"name\": \"123\",\n        \"description\": \"description\",\n        \"backup_policy_id\": \"70e9c916-7109-472d-94e7-120900e4ba61\",\n        \"tags\": [\n            {\n                \"key\": \"key\",\n                \"value\": \"value\"\n            }\n        ],\n        \"auto_bind\": false,\n        \"threshold\": 80,\n        \"smn_notify\": true,\n        \"parameters\": {\n            \"combined_order\": {\n                \"combined_order_id\": \"CS2303030959MR1IT\",\n                \"combined_order_ecs_num\": 5,\n                \"combined_order_num\": 5\n            }\n        },\n        \"bind_rules\": {\n            \"tags\": [\n                {\n                    \"key\": \"bind_rules_key\",\n                    \"value\": \"bind_rules_value\"\n                }\n            ]\n        },\n        \"billing\": {\n            \"cloud_type\":\"public\",\n            \"is_auto_renew\":false,\n            \"is_auto_pay\":false,\n            \"console_url\":\"https://www.com\",\n            \"is_multi_az\":false,\n            \"consistent_level\": \"app_consistent\",\n            \"object_type\": \"server\",\n            \"protect_type\": \"backup\",\n            \"size\": 80,\n            \"charging_mode\": \"pre_paid\",\n            \"period_type\": \"month\",\n            \"period_num\": 1\n        },\n        \"resources\": [{\n            \"id\":\"8ef08ba1-81f7-4e41-ae49-d3e2fb0ba388\",\n            \"type\":\"OS::Nova::Server\",\n            \"name\":\"server_name\",\n            \"extra_info\":{\n                \"exclude_volumes\":[\n                    \"1855eb9a-2b5e-4938-a9f0-aea08b6f9243\"\n                ]\n            }\n        }]\n    }\n}","x-request-examples-url-1":"POST https://{endpoint}/v3/f841e01fd2b14e7fa41b6ae7aa6b0594/vaults/order","x-request-examples-url-2":"POST https://{endpoint}/v3/f841e01fd2b14e7fa41b6ae7aa6b0594/vaults/order","x-scope":"Commercial","x-source":"","x-support-sdk":"Y"}}},"product_short":"CBR","region_id":"cn-north-4","schemes":["HTTPS"],"security_definitions":null,"summary":"创建包周期存储库","tags":"存储库","uri":null,"version":"2.0"}