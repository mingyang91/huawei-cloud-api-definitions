{"base_path":"/v1","components":null,"consumes":"","definitions":{"ApproveInfo":{"description":"审批信息","properties":{"need_approve":{"description":"是否审核,默认是不审核,true,false。","example":true,"type":"boolean"},"smn_urn_list":{"description":"审批主题urn集合。","maxLength":2048,"minLength":1,"type":"string"},"topic_selected":{"description":"审批人主题选择。","maxLength":2048,"minLength":1,"type":"string"}},"type":"object"},"ErrorResult":{"description":"错误查询返回结果","properties":{"error_code":{"description":"响应码。","example":"AOM.0403","maxLength":32,"minLength":1,"type":"string"},"error_msg":{"description":"调用失败响应信息描述。","example":"Forbidden","maxLength":1024,"minLength":1,"type":"string"},"http_code":{"description":"Http返回码","example":"","format":"int32","maximum":999,"minimum":1,"type":"integer"}},"required":["error_code","error_msg","http_code"],"type":"object"},"Job":{"description":"作业id","properties":{"approve_info":{"$ref":"#/definitions/ApproveInfo","description":"审批详情。"},"create_by":{"description":"创建人。","maxLength":64,"minLength":1,"type":"string"},"create_time":{"description":"实体的创建时间戳。","format":"int64","maximum":9999999999999,"minimum":0,"type":"integer"},"description":{"description":"作业描述,最大长度为1000。","maxLength":1000,"minLength":1,"type":"string"},"enterprise_project_id":{"description":"企业项目id。","maxLength":64,"minLength":1,"type":"string"},"id":{"description":"作业id。","maxLength":64,"minLength":1,"type":"string"},"is_latest_version":{"description":"是否为最新版本的作业","example":true,"type":"boolean"},"name":{"description":"作业名称。","maxLength":64,"minLength":1,"type":"string"},"parameters":{"description":"全局参数。","items":{"$ref":"#/definitions/Parameter"},"maxItems":20,"minItems":0,"type":"array"},"project_id":{"description":"租户从IAM申请到的projectid,一般为32位字符串。","maxLength":32,"minLength":32,"type":"string"},"rate_control":{"$ref":"#/definitions/RateControl","description":"执行策略。"},"steps":{"description":"作业步骤。","items":{"$ref":"#/definitions/Step"},"maxItems":10,"minItems":1,"type":"array"},"update_by":{"description":"修改人。","maxLength":64,"minLength":1,"type":"string"},"update_time":{"description":"实体的最后更新时间戳。 注意:执行创建/修改/删除操作时,update_time将更新。","format":"int64","maximum":9999999999999,"minimum":0,"type":"integer"},"version_number":{"description":"版本号","format":"int32","maximum":100,"minimum":1,"type":"integer"}},"required":["name","enterprise_project_id","project_id","steps","parameters","rate_control","approve_info"],"type":"object"},"JobPageResult":{"description":"分页查询作业列表集合","properties":{"elements":{"description":"查询作业信息集合。","items":{"$ref":"#/definitions/Job"},"maxItems":9999999,"minItems":0,"type":"array"},"total_elements":{"description":"总数。","format":"int64","maximum":9999999,"minimum":0,"type":"integer"}},"required":["total_elements"],"type":"object"},"Parameter":{"allOf":[{"$ref":"#/definitions/TaskParam"},{"properties":{"description":{"description":"参数描述。","maxLength":1000,"minLength":1,"type":"string"},"encryption":{"description":"是否加密。","example":true,"type":"boolean"},"hint":{"description":"参数提示。","maxLength":1000,"minLength":1,"type":"string"},"id":{"description":"参数id。","maxLength":64,"minLength":1,"type":"string"},"quote_param":{"description":"是否从参数库选择。","example":true,"type":"boolean"},"required":{"description":"是否为必填参数。","example":true,"type":"boolean"}},"required":["encryption","quote_param","required"],"type":"object"}],"description":"全局参数"},"RateControl":{"properties":{"have_rate_control":{"description":"是否分批发布,默认值是false。","example":true,"type":"boolean"},"max":{"description":"每批支持的最大实例数。","format":"int32","maximum":100,"minimum":0,"type":"integer"},"time_delay":{"description":"每批间隔。","format":"int32","maximum":60,"minimum":1,"type":"integer"}},"type":"object"},"SearchJobsRequestBody":{"description":"分页查询作业列表请求参数","properties":{"enterprise_project_id":{"description":"企业项目id","maxLength":64,"minLength":0,"type":"string"},"name":{"description":"name为作业名称。","maxLength":64,"minLength":1,"type":"string"},"order_by_column":{"description":"需要排序的字段(默认为更新时间),支持字段有name,create_time,update_time。","maxLength":32,"minLength":1,"type":"string"},"page_num":{"description":"当前页,查询的当前页,page_num为正整数,不能是0和负数,当输入参数为负数,0和大于1000,自动修正参数为1,默认值是1(用户不传,值是1)。","format":"int32","maximum":1000,"minimum":1,"type":"integer"},"page_size":{"description":"每页显示的条数,每页查询的总条数,page_size为正整数,不能是0和负数,当输入参数为负数,0和大于101,自动修正参数为10,默认值是10(用户不传时,值是10)。","format":"int32","maximum":100,"minimum":1,"type":"integer"},"sort_order":{"description":"排序规则(默认降序) 传入升序或降序,升序:ASC,降序:DESC。","maxLength":32,"minLength":1,"type":"string"}},"required":["order_by_column","sort_order"],"type":"object"},"Step":{"description":"创建作业时的步骤参数","properties":{"description":{"description":"步骤说明。","maxLength":1000,"minLength":1,"type":"string"},"id":{"description":"步骤id。","maxLength":64,"minLength":1,"type":"string"},"ignore_error":{"description":"是否自动忽略错误。","example":true,"type":"boolean"},"input":{"additionalProperties":{"maxLength":9999999999999,"minLength":1,"type":"string"},"description":"步骤参数。","type":"object"},"name":{"description":"步骤名称。","maxLength":32,"minLength":1,"type":"string"},"type":{"description":"步骤类型。","example":"script,package,stop","maxLength":16,"minLength":1,"type":"string"}},"required":["ignore_error"],"type":"object"},"TaskParam":{"description":"任务参数对象。","properties":{"default_value":{"description":"参数初始值。","maxLength":40960,"minLength":1,"type":"string"},"param_group":{"description":"参数分组。","example":"ecs_instance","maxLength":32,"minLength":1,"type":"string"},"param_name":{"description":"参数名称。","example":"get_instances","pattern":"[^\\>+<;#\";&?%=']{1,64}","type":"string"},"param_type":{"description":"参数类型。","example":"STRING,LIST,HOST","maxLength":16,"minLength":1,"type":"string"}},"required":["param_name"],"type":"object"}},"description":null,"group_id":"ac32153cf89a435d96dd423fdce82920","host":"aom.cn-north-4.myhuaweicloud.com","id":"6d39ec9d037c409ea8f8ec30a9ff8e88","info_version":"v1","method":"post","name":"ListAllJobByName","parameters":{},"paths":{"/{project_id}/cms/job/list":{"post":{"consumes":["application/json"],"description":"该接口可查询已创建的作业,可指定作业名称和作业创建人去精确查询,返回作业列表信息。(注:接口目前开放的region为:华北-北京四,华东-上海一,华东-上海二,华南-广州)。","operationId":"ListAllJobByName","parameters":[{"description":"租户从IAM申请到的projectid,一般为32位字符串。","in":"path","maxLength":32,"minLength":32,"name":"project_id","pattern":"^[\\w-]{0,64}$","required":true,"type":"string"},{"description":"作业管理请求体。","in":"body","name":"ListAllJobByNameRequestBody","required":true,"schema":{"$ref":"#/definitions/SearchJobsRequestBody"}},{"description":"从IAM服务获取的用户Token。","in":"header","maxLength":40960,"minLength":1,"name":"X-Auth-Token","required":true,"type":"string"},{"description":"指定类型为application/json。","in":"header","maxLength":32,"minLength":1,"name":"Content-Type","required":true,"type":"string"}],"produces":["application/json"],"responses":{"200":{"description":"响应成功,返回作业列表。","examples":{"application/json":{"elements":[{"approve_info":{"need_approve":false},"create_by":"xxxxxx","create_time":1600015045074,"description":"","enterprise_project_id":"0","id":"xxxxxx","is_latest_version":true,"name":"xxxxxx","parameters":[{"default_value":"xxxxx","description":"","encryption":false,"hint":"","id":"xxxxxxx","param_group":"","param_name":"xxxxx","param_type":"STRING","quote_param":false,"required":true},{"default_value":"xxxx","description":"","encryption":false,"hint":"","id":"xxxxxxxx","param_group":"","param_name":"xxxxx","param_type":"STRING","quote_param":false,"required":true},{"default_value":"{xxxxxxx}","description":"","encryption":false,"hint":"","id":"xxxxxxxxxx","param_group":"ecs_instance","param_name":"xxxxx","param_type":"HOST","quote_param":false,"required":true}],"project_id":"xxxxxxxxx","rate_control":{"have_rate_control":false,"max":0,"time_delay":0},"steps":[{"description":"","id":"xxxxxxxxxxx","ignore_error":false,"input":{"get_instances":"{xxxxxxx}","script_param":"{xxxxxxx}"},"name":"xxx","type":"script"},{"description":"","id":"xxxxxxxxxxxx","ignore_error":false,"input":{"get_instances":"{xxxx}","package":"{xxxx}"},"name":"file1","type":"package"}],"update_by":"xxxx","update_time":1600015045074,"version_number":1}],"total_elements":1}},"schema":{"$ref":"#/definitions/JobPageResult"}},"400":{"description":"BadRequest。非法请求。建议直接修改该请求,不要重试该请求。","examples":{"application/json":{"error_code":"AOM.31003202","error_msg":"job parameter invalid.","http_code":400}},"schema":{"$ref":"#/definitions/ErrorResult"}},"401":{"description":"Unauthorized。在客户端提供认证信息后,返回该状态码,表明服务端指出客户端所提供的认证信息不正确或非法。","examples":{"application/json":{"error_code":"AOM.31009019","error_message":"auth failed.","http_code":"401"}},"schema":{"$ref":"#/definitions/ErrorResult"}}},"summary":"作业管理主页模糊查询","tags":["自动化运维"],"x-is-registered":"Y","x-open-region-cloud":"hws","x-order":8,"x-request-examples-1":{"enterprise_project_id":"","name":"xxx","order_by_column":"create_time","page_num":1,"page_size":10,"sort_order":"DESC"},"x-request-examples-description-1":"查询name为\"xxx\"、排序规则\"order_by_column\"为\"create_time\"的作业列表。","x-request-examples-text-1":{"enterprise_project_id":"","name":"xxx","order_by_column":"create_time","page_num":1,"page_size":10,"sort_order":"DESC"},"x-request-examples-url-1":"POST  https://{Endpoint}/v1/{project_id}/cms/job/list","x-support-sdk":"Y"}}},"product_short":"AOM","region_id":"cn-north-4","schemes":["HTTPS"],"security_definitions":null,"summary":"作业管理主页模糊查询","tags":"自动化运维","uri":null,"version":"2.0"}