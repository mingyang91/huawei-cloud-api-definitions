{"base_path":"/","components":null,"consumes":"","definitions":{"ErrorMessage":{"properties":{"errorCode":{"description":"响应码。","type":"string"},"errorMessage":{"description":"响应信息描述。","type":"string"}}},"QueryBodyParam":{"properties":{"category":{"description":"取值范围 app_log,node _log,custom_log 日志类型字段:app_log:应用日志 node_log:主机日志 custom_log:自定义配置路径日志。","type":"string"},"endTime":{"description":"搜索结束时间(UTC时间,毫秒级)。","format":"int64","type":"integer"},"hideSyslog":{"description":"取值范围 0、1 。搜索时是否隐藏系统日志,默认0为隐藏1为显示。","format":"int32","type":"integer"},"isDesc":{"description":"标识按照lineNum升序查询还是降序查询。\n\ntrue:降序(lineNum由大到小:时间从新到老)。\n\nfalse:升序(lineNum由小到大:即时间从老到新)。","type":"boolean"},"keyWord":{"description":"1.支持关键词精确搜索。关键词指相邻两个分词符之间的单词。\n2.支持关键词模糊匹配搜索,例如输入“RROR”或“ERRO?”或“*ROR*”或“ERR*”或“ER*OR”。\n3.支持短语精确搜索,例如输入“Start to refresh alm Statistic”。\n4.支持关键词的“与”、“或”组合搜索。格式为“query&&logs”或“query||logs”。\n说明:\n当前默认分词符有\n\n, '\";=()[]{}@&<>/:\\n\\t\\r","type":"string"},"lineNum":{"description":"日志单行序列号第一次查询时不需要此参数,后续分页查询时需要使用可从上次查询的返回信息中获取.","type":"string"},"pageSize/size":{"description":"表示每次查询的日志条数不填时默认为5000,建议您设置为100。\n第一次查询时使用pageSize 后续分页查询时使用size。","type":"string"},"searchKey":{"$ref":"#/definitions/SearchKey"},"startTime":{"description":"搜索起始时间(UTC时间,毫秒级)。","format":"int64","type":"integer"},"type":{"description":"表示此次查询为分页查询,第一次查询时不需要此参数,后续分页查询时需要使用。","type":"string"}},"required":["category","endTime","searchKey","startTime"]},"ResponseInfo":{"properties":{"errorCode":{"description":"响应码,SVCSTG_AMS_2000000代表正常返回。","type":"string"},"errorMessage":{"description":"响应信息描述。","type":"string"},"result":{"description":"查询结果元数据信息,包括返回总数及结果。","type":"string"}}},"SearchKey":{"description":"日志过滤条件集合,不同日志来源所需字段不同。","properties":{"appName":{"description":"应用名称。","type":"string"},"clusterId":{"description":"CCE集群ID。","type":"string"},"hostIP":{"description":"日志所在虚拟机IP。","type":"string"},"nameSpace":{"description":"CCE容器集群的命名空间。","type":"string"},"pathFile":{"description":"日志文件名称。","type":"string"},"podName":{"description":"容器实例名称。","type":"string"}},"required":["clusterId"]}},"description":null,"group_id":"ac32153cf89a435d96dd423fdce82920","host":"aom.cn-north-4.myhuaweicloud.com","id":"a7c38f276dca476f83f02f16be907083","info_version":"v2","method":"post","name":"ListLogItems","parameters":{},"paths":{"/v1/{project_id}/als/action":{"post":{"description":"该接口用于查询不同维度(例如集群、IP、应用等)下的日志内容,支持分页查询。","operationId":"ListLogItems","parameters":[{"description":"租户从IAM申请到的projectid,一般为32位字符串。","in":"path","name":"project_id","required":true,"type":"string"},{"description":"从IAM服务获取的用户Token。","in":"header","name":"X-Auth-Token","required":true,"type":"string"},{"description":"指定类型为application/json。","enum":["application/json"],"in":"header","name":"Content-Type","required":true,"type":"string"},{"description":"查询不同维度日志请求体。","in":"body","name":"ListLogItemsRequestBody","required":true,"schema":{"$ref":"#/definitions/QueryBodyParam"}},{"description":"日志接口调用方式,当值为\"querylogs\"时接口功能为查询日志内容。","in":"query","name":"type","required":true,"type":"string"}],"produces":["application/json"],"responses":{"200":{"description":"OK 请求响应成功。","examples":{"application/json":{"errorCode":"SVCSTG.ALS.200.200","errorMessage":"Query data success","result":[{"data":[{"appName":"axxs0712","category":"apx","clusterId":"c6xxxx7c-54cd-11e8-8055-025xxx1e40","collectTime":153900000983,"containerName":"contsssner-0","hostIP":"1xx.xxx.0.1xxx","hostId":"c11xxxxx11-0000b-4925-bef4-d0xxxx9b0","hostName":"1x2.168.0.xxx","lineNum":"1xxx23xxxxxx2VW5xxxxxx0ZWdlcg==","logContent":"warn:2018/10/09 06:57:01 helloworld.go:108: the main processis running now.","logContentSize":null,"loghash":"4xxxxx0d40a83c17f262540xxxxxxxxfeaa30eb","nameSpace":"default","pathFile":"/xxx/xxx/xxx/xxx/xxx/xxx.trxe","podName":"axxx12-7xxf884-qxxwp","serviceID":""}],"total":5000}]}},"schema":{"$ref":"#/definitions/ResponseInfo"}},"400":{"description":"BadRequest 非法请求。建议直接修改该请求,不要重试该请求。","schema":{"$ref":"#/definitions/ErrorMessage"}},"401":{"description":"Unauthorized  在客户端提供认证信息后,返回该状态码,表明服务端指出客户端所提供的认证信息不正确或非法。","schema":{"$ref":"#/definitions/ErrorMessage"}},"403":{"description":"Forbidden 请求被拒绝访问。返回该状态码,表明请求能够到达服务端,且服务端能够理解用户请求,但是拒绝做更多的事情,因为该请求被设置为拒绝访问,建议直接修改该请求,不要重试该请求。","schema":{"$ref":"#/definitions/ErrorMessage"}},"500":{"description":"InternalServerError 表明服务端能被请求访问到,但是不能理解用户的请求。","schema":{"$ref":"#/definitions/ErrorMessage"}},"503":{"description":"ServiceUnavailable 被请求的服务无效。建议直接修改该请求,不要重试该请求。","schema":{"$ref":"#/definitions/ErrorMessage"}}},"summary":"查询日志","tags":["日志"],"x-is-registered":"Y","x-request-examples-1":{"category":"app_log","endTime":15389000003,"hideSyslog":0,"keyWord":"","searchKey":{"clusterId":"c69xxxc-5xxx-1xxx-8xxx5-02xxxxx40"},"startTime":15389000003},"x-request-examples-2":{"category":"app_log","endTime":15694600008895,"hideSyslog":0,"keyWord":"","lineNum":"1569463900000047","searchKey":{"clusterId":"874xxx9a2-xxxf-xxx-8xxe-02xxxxx3"},"size":100,"startTime":156946300095,"type":"next"},"x-request-examples-description-1":"查询集群“c69xxxc-5xxx-1xxx-8xxx5-02xxxxx40”下的应用日志","x-request-examples-description-2":"示例2(分页查询)\n说明:\n1.分页查询时需要增加三个参数:lineNum(上一次查询出的内容中最后一条日志的序列号)、type(取值\"next\")和size。\n2.category、searchKey、keyWord、startTime、endTime等条件需要保持和第一次查询时相同。\n3.如果需要继续分页查询,则修改请求参数中的lineNum为上次查询结果中最后一条日志的lineNum的值即可,以此类推。","x-request-examples-text-1":{"category":"app_log","endTime":15389000003,"hideSyslog":0,"keyWord":"","searchKey":{"clusterId":"c69xxxc-5xxx-1xxx-8xxx5-02xxxxx40"},"startTime":15389000003},"x-request-examples-text-2":{"category":"app_log","endTime":15694600008895,"hideSyslog":0,"keyWord":"","lineNum":"1569463900000047","searchKey":{"clusterId":"874xxx9a2-xxxf-xxx-8xxe-02xxxxx3"},"size":100,"startTime":156946300095,"type":"next"},"x-request-examples-url-1":"\"POST https://{endpoint}/v1/{project_id}/als/action?type=querylogs\"","x-request-examples-url-2":"/v1/{project_id}/als/action?type=querylogs","x-support-sdk":"Y"}}},"product_short":"AOM","region_id":"cn-north-4","schemes":["HTTPS"],"security_definitions":null,"summary":"查询日志","tags":"日志","uri":null,"version":"2.0"}