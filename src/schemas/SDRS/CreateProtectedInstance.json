{"base_path":"/","components":null,"consumes":"[\"application/json;charset=UTF-8\"]","definitions":{"CreateProtectedInstanceRequestBody":{"description":"创建保护实例请求体","properties":{"protected_instance":{"$ref":"#/definitions/CreateProtectedInstanceRequestParams","description":"保护实例的信息。"}},"required":["protected_instance"]},"CreateProtectedInstanceRequestParams":{"description":"创建保护实例数据结构","properties":{"cluster_id":{"description":"专属分布式存储池ID。\n当容灾站点磁盘选择专属分布式存储时指定该字段。","type":"string"},"dedicated_host_id":{"description":"专属主机id,此属性仅在tenancy值为dedicated时有效。\n若不指定此属性,系统将自动分配租户可以自动放置弹性云服务器的专属主机。","type":"string"},"description":{"description":"指定保护实例的描述,最大支持长度为64个字节。不能包含左尖括号(<)或右尖括号(>)。","maxLength":64,"minLength":1,"type":"string"},"flavorRef":{"description":"指定的容灾站点云服务器的flavor ID。\n查询flavor列表,请参见查询云服务器规格变更支持列表。\n 说明:不指定此参数时,容灾站点云服务器的flavor ID默认和生产站点云服务器保持一致。\n不同规格的云服务器在性能上存在差异,可能会对云服务器上运行的应用产生影响。为保证切换/故障切换后云服务器的性能,建议容灾站点服务器的规格(CPU、内存)不低于生产站点云服务器的规格(CPU、内存)。\n生产站点云服务器和容灾站点云服务器的flavor存在匹配关系,可以通过上述接口使用生产站点云服务器过滤出满足要求的容灾站点云服务器flavor。","type":"string"},"name":{"description":"指定保护实例的名称,最大支持长度为64个字节。只包含中文字符、英文字母(a~z、A~Z)、数字(0~9)、小数点(.)、下划线(_)、中划线(-)。","maxLength":64,"minLength":1,"type":"string"},"primary_ip_address":{"description":"容灾站点云服务器主网卡IP地址。此参数仅在传入primary_subnet_id时有效。指定primary_subnet_id时,如果不指定该参数,将自动分配容灾站点云服务器主网卡IP地址。","type":"string"},"primary_subnet_id":{"description":"容灾站点云服务器主网卡所在的子网subnetID,与neutron_network_id字段值一致。","type":"string"},"server_group_id":{"description":"需要加入的保护组ID。","type":"string"},"server_id":{"description":"指定的生产站点云服务器ID。","type":"string"},"tags":{"description":"标签列表。","items":{"$ref":"#/definitions/ResourceTag"},"type":"array"},"tenancy":{"default":"shared","description":"在专属主机或共享池中创建容灾站点云服务器,默认为在共享池中创建。\n值为:shared或dedicated。shared:表示共享池。\ndedicated:表示专属主机。","enum":["shared","dedicated"],"type":"string"}},"required":["name","server_group_id","server_id"]},"ErrorInfo":{"description":"失败返回信息","properties":{"code":{"description":"错误码","type":"string"},"message":{"description":"错误信息","type":"string"}},"required":["code","message"]},"JobFailResponse":{"description":"Job失败返回","properties":{"error":{"$ref":"#/definitions/ErrorInfo","description":"失败返回结构"}}},"JobSuccessResponse":{"description":"Job成功返回","properties":{"job_id":{"description":"成功返回jobId信息","type":"string"}},"required":["job_id"]},"ResourceTag":{"description":"单个标签资源结构","properties":{"key":{"description":"键。同一资源的key值不能重复。最大长度为36个UNICODE字符。key不能为空,不允许为空字符串。不能包含以下字符:非打印字符ASCII(0-31)特殊字符“*”,“<”,“>”,“\\”,“=”,“,”,“|”,“/”键。不能为空。对于同一资源键值唯一。","type":"string"},"value":{"description":"值。最大长度为43个UNICODE字符。value不能为空,可以为空字符串。不能包含以下字符:非打印字符ASCII(0-31)特殊字符“*”,“<”,“>”,“\\”,“=”,“,”,“|”,“/”。长度不超过43个字符。","type":"string"}},"required":["key","value"]}},"description":null,"group_id":"10d28b86a3b24bb2a48fbb2befd68709","host":"sdrs.cn-north-4.myhuaweicloud.com","id":"83feaf292084479ca9f6a53e2289aaf4","info_version":"v1","method":"post","name":"CreateProtectedInstance","parameters":{},"paths":{"/v1/{project_id}/protected-instances":{"post":{"consumes":[],"deprecated":false,"description":"创建保护实例。保护实例创建完成后,系统默认容灾站点云服务器名称与生产站点云服务器名称相同,但ID不同。如果需要修改云服务器名称,请在保护实例详情页面单击云服务器名称,进入云服务器详情页面进行修改","operationId":"CreateProtectedInstance","parameters":[{"description":"项目ID。","in":"path","name":"project_id","required":true,"type":"string","x-order":1},{"description":"用户Token。通过调用IAM服务获取用户Token接口获取(响应消息头中X-Subject-Token的值)","in":"header","name":"X-Auth-Token","required":true,"type":"string","x-order":2},{"description":"创建保护实例请求体","in":"body","name":"CreateProtectedInstanceRequestBody","required":true,"schema":{"$ref":"#/definitions/CreateProtectedInstanceRequestBody"},"x-order":3}],"produces":[],"responses":{"200":{"description":"OK","examples":{"application/json":{"job_id":"0000000062db92d70162db9d200f00bb"}},"schema":{"$ref":"#/definitions/JobSuccessResponse"}},"400":{"description":"Bad Request","schema":{"$ref":"#/definitions/JobFailResponse"}},"401":{"description":"Unauthorized","schema":{"$ref":"#/definitions/JobFailResponse"}},"403":{"description":"Forbidden","schema":{"$ref":"#/definitions/JobFailResponse"}},"404":{"description":"Not Found","schema":{"$ref":"#/definitions/JobFailResponse"}},"405":{"description":"Method Not Allowed","schema":{"$ref":"#/definitions/JobFailResponse"}},"406":{"description":"Not Acceptable","schema":{"$ref":"#/definitions/JobFailResponse"}},"407":{"description":"Proxy Authentication Required","schema":{"$ref":"#/definitions/JobFailResponse"}},"408":{"description":"Request Timeout","schema":{"$ref":"#/definitions/JobFailResponse"}},"409":{"description":"Conflict","schema":{"$ref":"#/definitions/JobFailResponse"}},"500":{"description":"Internal Server Error","schema":{"$ref":"#/definitions/JobFailResponse"}},"501":{"description":"Not Implemented","schema":{"$ref":"#/definitions/JobFailResponse"}},"502":{"description":"Bad Gateway","schema":{"$ref":"#/definitions/JobFailResponse"}},"503":{"description":"Service Unavailable","schema":{"$ref":"#/definitions/JobFailResponse"}},"504":{"description":"Gateway Timeout","schema":{"$ref":"#/definitions/JobFailResponse"}}},"summary":"创建保护实例","tags":["保护实例"],"x-apiexplorer-hide":"","x-apigateway-auth-type":"","x-apigateway-match-mode":"","x-apigateway-request-type":"","x-call_frequency":"","x-constraint":"保护组的状态为available或者protected。\n云服务器不能挂载共享云硬盘。\n云服务器不能已经被创建保护实例。\n云服务器必须与保护组在同一个VPC。\n由弹性伸缩组伸缩时所创建的云服务器,在对该云服务器做容灾保护后,当弹性伸缩组缩容时,不支持对该云服务器执行删除操作。\n创建保护实例时,如果生产站点服务器为Windows云服务器且设置为密钥方式登录,请确保生产站点服务器使用的密钥对存在,否则可能导致云平台无法创建容灾站点云服务器,从而导致创建保护实例失败。 \n说明:如果生产站点云服务器对应的密钥对已被删除,请重新创建相同名称的密钥对。\n创建保护实例时,选择的生产站点云服务器如果加入了企业项目,保护实例创建成功后,容灾站点云服务器不会自动加入企业项目,如有需要请手动将容灾站点云服务器加入到企业项目。\n创建保护实例完成并对生产站点的云服务器做容灾保护后,生产站点云服务器中的“主机名”、“云服务器名称”、“安全组”、“委托”、“云服务器组”、“标签”和“自动恢复”配置项修改不会再自动同步到容灾站点的云服务器上。您可以在控制台页面上手动将这些配置项的修改添加到容灾站点的云服务器上。\n创建保护实例时,如果生产站点云服务器已经被添加到云服务器组中,则不支持指定专属主机创建容灾站点云服务器。","x-ctc":"N","x-first_open_time":"2018-05-30","x-flow_control_group":"CreateProtectedInstance","x-hc":"Y","x-hk":"Y","x-hybridcloud":false,"x-in_cli":"","x-is_calling":"Y","x-is_registered":"Y","x-multi_tenant_flow_time":1,"x-multi_tenant_flow_value":600,"x-name":"创建保护实例","x-obc":"Y","x-order":16,"x-otc":"Y","x-publishpath":"","x-request-examples-1":{"protected_instance":{"description":"my description","name":"test_protected_instance_name","primary_ip_address":"192.168.0.5","primary_subnet_id":"a32217fh-3413-c313-6342-3124d3491502","server_group_id":"523ab8ad-3759-4933-9436-4cf4ebb20867","server_id":"403b603d-1d91-42cc-a357-81f3c2daf43f","tags":[{"key":"key1","value":"value1"},{"key":"key","value":"value3"}]}},"x-request-examples-description-1":"","x-request-examples-text-1":"{\n\t\"protected_instance\": {\n\t\t\"server_group_id\": \"523ab8ad-3759-4933-9436-4cf4ebb20867\",\n\t\t\"server_id\": \"403b603d-1d91-42cc-a357-81f3c2daf43f\",\n\t\t\"name\": \"test_protected_instance_name\",\n\t\t\"description\": \"my description\",\n\t\t\"primary_subnet_id\": \"a32217fh-3413-c313-6342-3124d3491502\",\n\t\t\"primary_ip_address\": \"192.168.0.5\",\n\t\t\"tags\": [{\n\t\t\t\"key\": \"key1\",\n\t\t\t\"value\": \"value1\"\n\t\t}, {\n\t\t\t\"key\": \"key\",\n\t\t\t\"value\": \"value3\"\n\t\t}]\n\t}\n}","x-request-examples-url-1":"POST https://{Endpoint}/v1/{project_id}/protected-instances","x-scope":"Commercial","x-source":"SelfDeveloped","x-source_url":"","x-support-sdk":"Y","x-tenant_flow_time":1,"x-tenant_flow_value":300,"x-timeout":"200s","x-tlf":"N","x-un_cli":"","x-version":"v1"}}},"product_short":"SDRS","region_id":"cn-north-4","schemes":["HTTPS"],"security_definitions":null,"summary":"创建保护实例","tags":"保护实例","uri":null,"version":"2.0"}