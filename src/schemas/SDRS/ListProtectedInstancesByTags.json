{"base_path":"/","components":null,"consumes":"[\"application/json;charset=UTF-8\"]","definitions":{"ErrorInfo":{"description":"失败返回信息","properties":{"code":{"description":"错误码","type":"string"},"message":{"description":"错误信息","type":"string"}},"required":["code","message"]},"JobFailResponse":{"description":"Job失败返回","properties":{"error":{"$ref":"#/definitions/ErrorInfo","description":"失败返回结构"}}},"ListProtectedInstancesByTagsRequestBody":{"description":"通过标签查询保护实例请求体","properties":{"action":{"description":"操作标识(仅限于filter,count):filter(过滤),count(查询总条数)。如果是filter就按照过滤条件查询,如果是count,只需要返回总条数,禁止返回其他字段。","enum":["filter","count"],"type":"string"},"limit":{"description":"查询记录数(action为count时无此参数)如果action为filter默认为1000,limit最多为1000,不能为负数,最小值为1。","type":"string"},"matches":{"description":"搜索字段,key为要匹配的字段,如resource_name等。value为匹配的值。key为固定字典值,不能包含重复的key或不支持的key。根据key的值确认是否需要模糊匹配,如resource_name默认为模糊搜索(不区分大小写),如果value为空字符串精确匹配。目前只有resource_name,后续再扩展。","items":{"$ref":"#/definitions/MatchParams"},"type":"array"},"not_tags":{"description":"不包含标签,最多包含10个key,每个key下面的value最多10个, 每个key对应的value可以为空数组但结构体不能缺失。Key不能重复,同一个key中values不能重复。结果返回不包含标签的资源列表,key之间是与的关系,key-value结构中value是或的关系。无过滤条件时返回全量数据。","items":{"$ref":"#/definitions/TagParams"},"type":"array"},"not_tags_any":{"description":"不包含任意标签,最多包含10个key,每个key下面的value最多10个, 每个key对应的value可以为空数组但结构体不能缺失。Key不能重复,同一个key中values不能重复。结果返回不包含标签的资源列表,key之间是或的关系,key-value结构中value是或的关系。无过滤条件时返回全量数据。","items":{"$ref":"#/definitions/TagParams"},"type":"array"},"offset":{"description":"索引位置,偏移量(action为count时无此参数)从第一条数据偏移offset条数据后开始查询,如果action为filter默认为0(偏移0条数据,表示从第一条数据开始查询),必须为数字,不能为负数。","type":"string"},"tags":{"description":"包含标签,最多包含10个key,每个key下面的value最多10个,每个key对应的value可以为空数组但结构体不能缺失。Key不能重复,同一个key中values不能重复。结果返回包含所有标签的资源列表,key之间是与的关系,key-value结构中value是或的关系。无tag过滤条件时返回全量数据。","items":{"$ref":"#/definitions/TagParams"},"type":"array"},"tags_any":{"description":"包含任意标签,最多包含10个key,每个key下面的value最多10个, 每个key对应的value可以为空数组但结构体不能缺失。Key不能重复,同一个key中values不能重复。结果返回包含标签的资源列表,key之间是或的关系,key-value结构中value是或的关系。无过滤条件时返回全量数据。","items":{"$ref":"#/definitions/TagParams"},"type":"array"}},"required":["action"]},"ListProtectedInstancesByTagsResponseBody":{"description":"通过标签查询保护实例响应体","properties":{"resources":{"description":"返回的保护实例列表。","items":{"$ref":"#/definitions/ResourceParams"},"type":"array"},"total_count":{"description":"总记录数。该值不受过滤条件的影响。","format":"int32","type":"integer"}},"required":["resources","total_count"]},"MatchParams":{"description":"match数据结构","properties":{"key":{"description":"键。目前限定为resource_name,后续扩展。","type":"string"},"value":{"description":"值。每个值最大长度255个unicode字符。","type":"string"}},"required":["key","value"]},"MetadataParams":{"description":"保护实例元数据数据结构","properties":{"__system__frozen":{"description":"保护实例元数据中资源冻结的字段。\ntrue:表示资源被冻结。\n空:表示资源没有被冻结。","type":"string"}},"required":["__system__frozen"]},"ProtectedInstanceAttachment":{"description":"保护实例挂载信息结构","properties":{"device":{"description":"挂载点。","type":"string"},"replication":{"description":"复制对ID。","type":"string"}},"required":["device","replication"]},"ResourceParams":{"description":"资源参数数据结构","properties":{"resource_detail":{"$ref":"#/definitions/ShowProtectedInstanceParams","description":"保护实例详情。"},"resource_id":{"description":"保护实例ID。","type":"string"},"resource_name":{"description":"保护实例名称,没有名称时默认为空字符串。","type":"string"},"tags":{"description":"标签列表,没有标签默认为空数组。","items":{"$ref":"#/definitions/ResourceTag"},"type":"array"}},"required":["resource_detail","resource_id","tags"]},"ResourceTag":{"description":"单个标签资源结构","properties":{"key":{"description":"键。同一资源的key值不能重复。最大长度为36个UNICODE字符。key不能为空,不允许为空字符串。不能包含以下字符:非打印字符ASCII(0-31)特殊字符“*”,“<”,“>”,“\\”,“=”,“,”,“|”,“/”键。不能为空。对于同一资源键值唯一。","type":"string"},"value":{"description":"值。最大长度为43个UNICODE字符。value不能为空,可以为空字符串。不能包含以下字符:非打印字符ASCII(0-31)特殊字符“*”,“<”,“>”,“\\”,“=”,“,”,“|”,“/”。长度不超过43个字符。","type":"string"}},"required":["key","value"]},"ShowProtectedInstanceParams":{"description":"查询保护实例数据结构","properties":{"attachment":{"description":"挂载的复制对列表。","items":{"$ref":"#/definitions/ProtectedInstanceAttachment"},"type":"array"},"created_at":{"description":"创建时间。默认格式为:\"yyyy-MM-dd HH:mm:ss.SSS\",例:\"2019-04-01 12:00:00.000\"。","type":"string","x-huawei-extraAnnotation":""},"description":{"description":"保护实例的描述。","type":"string"},"id":{"description":"保护实例的ID。","type":"string"},"metadata":{"$ref":"#/definitions/MetadataParams","description":"保护实例元数据信息。"},"name":{"description":"保护实例的名称。","type":"string"},"priority_station":{"description":"标识保护实例所在保护组的当前生产站点可用区。source:表示当前生产站点可用区为保护组source_availability_zone的值。target:表示当前生产站点可用区为保护组的target_availability_zone的值。","type":"string"},"progress":{"description":"保护实例的同步进度。单位:百分比(%)。","format":"int32","type":"integer"},"server_group_id":{"description":"保护组的ID。","type":"string"},"source_server":{"description":"生产站点云服务器ID。","type":"string"},"status":{"description":"保护实例的状态。","type":"string"},"tags":{"description":"标签列表。","items":{"$ref":"#/definitions/ResourceTag"},"type":"array"},"target_server":{"description":"容灾站点云服务器ID。","type":"string"},"updated_at":{"description":"更新时间。默认格式为:\"yyyy-MM-dd HH:mm:ss.SSS\",例:\"2019-04-01 12:00:00.000\"。","type":"string","x-huawei-extraAnnotation":""}},"required":["attachment","created_at","description","id","metadata","name","priority_station","progress","server_group_id","source_server","status","target_server","updated_at"]},"TagParams":{"description":"值为列表的tag结构","properties":{"key":{"description":"键。最大长度127个unicode字符。 key不能为空。key不能为空或者空字符串,不能为空格,使用之前先trim 前后半角空格。","type":"string"},"values":{"description":"值列表。每个值最大长度255个unicode字符,使用之前先trim 前后半角空格。\\*为系统保留字符,如果value是以\\*开头表示按照\\*后面的值全模糊匹配。不能只传入“\\*”。如果values为空列表,则表示any_value(查询任意value)。value之间为或的关系。","items":{"type":"string"},"type":"array"}},"required":["key","values"]}},"description":null,"group_id":"10d28b86a3b24bb2a48fbb2befd68709","host":"sdrs.cn-north-4.myhuaweicloud.com","id":"0d011f55120845fe9c39fe2f8ad6cea2","info_version":"v1","method":"post","name":"ListProtectedInstancesByTags","parameters":{},"paths":{"/v1/{project_id}/protected-instances/resource_instances/action":{"post":{"consumes":[],"deprecated":false,"description":"使用标签过滤保护实例","operationId":"ListProtectedInstancesByTags","parameters":[{"description":"项目ID。","in":"path","name":"project_id","required":true,"type":"string","x-order":1},{"description":"用户Token。通过调用IAM服务获取用户Token接口获取(响应消息头中X-Subject-Token的值)","in":"header","name":"X-Auth-Token","required":true,"type":"string","x-order":2},{"description":"通过标签查询保护实例请求体","in":"body","name":"ListProtectedInstancesByTagsRequestBody","required":true,"schema":{"$ref":"#/definitions/ListProtectedInstancesByTagsRequestBody"},"x-order":3}],"produces":[],"responses":{"200":{"description":"OK","examples":{"application/json":{"resources":[{"resource_detail":{"attachment":[{"device":"/dev/vda","replication":"42e2016e-b96e-4f75-aa57-1377a9cb45e4"}],"created_at":"2019-05-28 08:17:50.066","description":null,"id":"d5a00c87-6b82-414a-a09e-59c37fff44d0","metadata":{},"name":"Protected-Instance-c801","priority_station":"source","progress":100,"server_group_id":"525fbd01-d4d1-44fc-b341-6d734bcce245","source_server":"73aff1d7-48d2-494e-a9f1-a7d3ffad31ff","status":"protected","tags":[{"key":"GH1111113fffffKdddddd","value":"aaappppppppddddddd"}],"target_server":"0f6bc56b-a3bb-4707-a4fb-ccd4db5fac59","updated_at":"2019-05-30 01:40:00.74"},"resource_id":"d5a00c87-6b82-414a-a09e-59c37fff44d0","resource_name":"Protected-Instance-c801","tags":[{"key":"GH1111113fffffKdddddd","value":"aaappppppppddddddd"}]}],"total_count":1}},"schema":{"$ref":"#/definitions/ListProtectedInstancesByTagsResponseBody"}},"400":{"description":"Bad Request","schema":{"$ref":"#/definitions/JobFailResponse"}},"401":{"description":"Unauthorized","schema":{"$ref":"#/definitions/JobFailResponse"}},"403":{"description":"Forbidden","schema":{"$ref":"#/definitions/JobFailResponse"}},"404":{"description":"Not Found","schema":{"$ref":"#/definitions/JobFailResponse"}},"500":{"description":"Internal Server Error","schema":{"$ref":"#/definitions/JobFailResponse"}}},"summary":"通过标签查询保护实例","tags":["标签管理"],"x-apiexplorer-hide":"","x-apigateway-auth-type":"","x-apigateway-match-mode":"","x-apigateway-request-type":"","x-call_frequency":"","x-constraint":"无","x-ctc":"N","x-first_open_time":"2019-01-30","x-flow_control_group":"QueryProtectedInstancesByTags","x-hc":"Y","x-hk":"Y","x-hybridcloud":false,"x-in_cli":"","x-is_calling":"Y","x-is_registered":"Y","x-multi_tenant_flow_time":1,"x-multi_tenant_flow_value":600,"x-name":"通过标签查询保护实例","x-obc":"Y","x-order":37,"x-otc":"Y","x-publishpath":"","x-request-examples-1":{"action":"filter","limit":"100","matches":[{"key":"resource_name","value":"resource1"}],"not_tags":[{"key":"key1","values":["*value1","value2"]}],"not_tags_any":[{"key":"key1","values":["value1","value2"]}],"offset":"100","tags":[{"key":"key1","values":["*value1","value2"]}],"tags_any":[{"key":"key1","values":["value1","value2"]}]},"x-request-examples-description-1":"","x-request-examples-text-1":"{\n\t\"offset\": \"100\",\n\t\"limit\": \"100\",\n\t\"action\": \"filter\",\n\t\"matches\": [{\n\t\t\"key\": \"resource_name\",\n\t\t\"value\": \"resource1\"\n\t}],\n\t\"not_tags\": [{\n\t\t\"key\": \"key1\",\n\t\t\"values\": [\"*value1\", \"value2\"]\n\t}],\n\t\"tags\": [{\n\t\t\"key\": \"key1\",\n\t\t\"values\": [\"*value1\", \"value2\"]\n\t}],\n\t\"tags_any\": [{\n\t\t\"key\": \"key1\",\n\t\t\"values\": [\"value1\", \"value2\"]\n\t}],\n\t\"not_tags_any\": [{\n\t\t\"key\": \"key1\",\n\t\t\"values\": [\"value1\", \"value2\"]\n\t}]\n}","x-request-examples-url-1":"POST https://{Endpoint}/v1/{project_id}/protected-instances/resource_instances/action","x-scope":"Commercial","x-source":"SelfDeveloped","x-source_url":"","x-support-sdk":"Y","x-tenant_flow_time":1,"x-tenant_flow_value":300,"x-timeout":"200s","x-tlf":"N","x-un_cli":"","x-version":"v1"}}},"product_short":"SDRS","region_id":"cn-north-4","schemes":["HTTPS"],"security_definitions":null,"summary":"通过标签查询保护实例","tags":"标签管理","uri":null,"version":"2.0"}