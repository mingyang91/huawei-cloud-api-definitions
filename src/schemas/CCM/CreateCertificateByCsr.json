{"base_path":"/","components":null,"consumes":"","definitions":{"CreateCertificateByCsrRequestBody":{"properties":{"csr":{"description":"证书签名请求。请使用“\\r\\n”或“\\n”替代证书签名请求中的换行符,若通过console端请求此接口,则无需做符号转换。","maxLength":5120,"type":"string"},"enterprise_project_id":{"description":"企业多项目ID。用户未开通企业多项目时,不需要输入该字段。 用户开通企业多项目时,查询资源可以输入该字段。 若用户不输入该字段,默认查询租户所有有权限的企业多项目下的资源。 此时“enterprise_project_id”取值为“all”。 若用户输入该字段,取值满足以下任一条件.\n  取值为“all”\n  取值为“0”\n  满足正则匹配:“^[0-9a-z]{8}-[0-9a-z]{4}-[0-9a-z]{4}-[0-9a-z]{4}-[0-9a-z]{12}$”","type":"string"},"issuer_id":{"description":"父CA证书ID。","maxLength":36,"minLength":36,"type":"string"},"path_length":{"description":"路径长度,仅当签发从属CA时有效。","format":"int32","maximum":6,"minimum":0,"type":"integer"},"subject_alternative_names":{"description":"主体备用名称(本接口预留参数,当前在后端被忽略),详情请参见**SubjectAlternativeName**字段数据结构说明。","items":{"$ref":"#/definitions/SubjectAlternativeName"},"maxItems":20,"minItems":0,"type":"array"},"type":{"description":"证书类型,用于区分从属CA与私有证书。\n  - **ENTITY_CERT** : 签发私有证书,为缺省值;\n  - **INTERMEDIATE_CA** : 签发从属CA。","type":"string"},"validity":{"$ref":"#/definitions/Validity","description":"证书有效期,详情请参见**Validity**字段数据结构说明。"}},"required":["csr","issuer_id","validity"],"title":"CreateCertificateByCsrRequestBody","type":"object"},"CreateCertificateResponseBody":{"properties":{"certificate_id":{"description":"当前签发的证书ID。","maxLength":36,"minLength":36,"type":"string"}},"required":["certificate_id"],"title":"CreateCertificateResponseBody"},"Error":{"properties":{"error_code":{"description":"错误请求返回的错误码。","maxLength":36,"minLength":3,"type":"string"},"error_msg":{"description":"错误请求返回的错误信息。","maxLength":1024,"minLength":0,"type":"string"}},"required":["error_code","error_msg"],"title":"Error","type":"object"},"SubjectAlternativeName":{"properties":{"type":{"description":"备用名称类型,当前仅支持DNS、IP、EMAIL、URI。\n- **DNS**\n- **IP**\n- **EMAIL**\n- **URI**","type":"string"},"value":{"description":"对应备用名称类型的值。\n  - DNS类型,长度为不超过253;\n  - IP类型,长度不超过39,支持IPV4、IPV6;\n  - EMAIL类型,长度不超过256;\n  - URI类型,长度不超过253。","type":"string"}},"required":["type","value"],"title":"SubjectAlternativeName","type":"object"},"Validity":{"properties":{"start_from":{"description":"起始时间,为可选值:\n  - 格式为时间戳(毫秒级),如1645146939688代表2022-02-18 09:15:39;\n  - 不早于当前时间5分钟,即start_from > (current_time - 5min)。","format":"int32","type":"integer"},"type":{"description":"有效期类型,为必填值:\n  - **YEAR** : 年(12个月)\n  - **MONTH** : 月(统一按31天)\n  - **DAY** : 日\n  - **HOUR** : 小时","type":"string"},"value":{"description":"证书有效期值,与type对应的类型值,换算成年需满足以下规则:\n  - 根CA,有效期小于等于30年;\n  - 从属CA与私有证书,有效期小于等于20年。","format":"int32","type":"integer"}},"required":["type","value"],"title":"Validity","type":"object"}},"description":null,"group_id":"eeb1572024bc43b3a048b9c50f8e189d","host":"ccm.cn-north-4.myhuaweicloud.com","id":"997c931e591a4c9599f07962216df82a","info_version":"v1","method":"post","name":"CreateCertificateByCsr","parameters":{},"paths":{"/v1/private-certificates/csr":{"post":{"consumes":["application/json"],"deprecated":false,"description":"通过CSR签发证书。功能约束如下:\n- 1、当前默认参数如下:\n  - CA 默认参数:\n      - **keyUsage**: digitalSignature, keyCertSign, cRLSign,优先采用CSR中的参数;\n      - **SignatureHashAlgorithm**: SHA384;\n      - **PathLength**:0 (可自定义)。\n  - 私有证书:\n      - **keyUsage**: digitalSignature keyAgreement,优先采用CSR中的参数;\n      - **SignatureHashAlgorithm**: SHA384;\n- 2、当传入的type为**INTERMEDIATE_CA**时,创建出的从属CA证书,有以下限制:\n  - 不占用CA配额。在查询CA列表时,不会返回该证书;\n  - 只支持通过以下两个接口获取其信息:\n      - GET /v1/private-certificate-authorities/{ca_id} 获取证书详情\n      - POST /v1/private-certificate-authorities/{ca_id}/export 导出证书\n  - 本接口返回的**certificate_id**即代表从属CA的**ca_id**;\n  - 无法用于签发证书,密钥在用户侧。\n- 3、当type为**ENTITY_CERT**时,创建出的私有证书,有以下特点:\n  - 占用私有证书配额。在查询私有证书列表时,会返回该证书;\n  - 除了导出时不包含密钥信息(密钥在用户端),其余用法与其它私有证书一致。\n> 注:需要使用“\\r\\n”或“\\n”代替换行符,将CSR转换成一串字符,可参考示例请求。注:目前,证书的组织信息、公钥算法以及公钥内容等均来自CSR文件,暂不支持API传入。","operationId":"CreateCertificateByCsr","parameters":[{"description":"用户token,参见:[IAM token获取方法](https://support.huaweicloud.com/api-iam/iam_30_0001.html)。","in":"header","name":"X-Auth-Token","required":true,"type":"string","x-example":"MIIePgYJKoZIhvcNAQcCoIIeLzCCHisCAQExDTALBglghkgBZQMEAgEwghxOBgkqhkiG9w0BBwGgghw..."},{"description":"CreateCertificateByCsrRequestBody","in":"body","name":"CreateCertificateByCsrRequestBody","required":true,"schema":{"$ref":"#/definitions/CreateCertificateByCsrRequestBody"}}],"produces":["application/json"],"responses":{"200":{"description":"请求已成功","examples":{"application/json":{"certificate_id":"e3e10fc6-5dff-4a70-9cb5-320d258a6215"}},"schema":{"$ref":"#/definitions/CreateCertificateResponseBody"}},"400":{"description":"请求参数有误。","examples":{"application/json":{"error_code":"PCA.XXX","error_msg":"XXX"}},"schema":{"$ref":"#/definitions/Error"}},"401":{"description":"被请求的页面需要鉴权。","examples":{"application/json":{"error_code":"PCA.XXX","error_msg":"XXX"}},"schema":{"$ref":"#/definitions/Error"}},"403":{"description":"认证失败。","examples":{"application/json":{"error_code":"PCA.XXX","error_msg":"XXX"}},"schema":{"$ref":"#/definitions/Error"}},"404":{"description":"资源不存在或资源未找到。","examples":{"application/json":{"error_code":"PCA.XXX","error_msg":"XXX"}},"schema":{"$ref":"#/definitions/Error"}},"500":{"description":"服务内部错误。","examples":{"application/json":{"error_code":"PCA.XXX","error_msg":"XXX"}},"schema":{"$ref":"#/definitions/Error"}}},"summary":"通过CSR签发证书","tags":["私有证书管理"],"x-is-registered":"Y","x-request-examples-1":{"csr":"-----BEGIN CERTIFICATE REQUEST-----\\nMIICyTCCAbECAQAwXjELMAkGA1UEBhMCQ04xEDAOBgNVBAgTB3NpY2hhdW4xEDAO\\nBgNVBAcTB2NoZW5nZHUxCzAJBgNVBAoTAkhXMQswCQYDVQQLEwJJVDERMA8GA1UE\\nAxMIdGVzdC5jb20wggEiMA0GCSqGSIb3DQEBAQUAA4IBDwAwggEKAoIBAQCZ4q5z\\nxqK/L/FC9x2jESeUW5GB6zS5rVxT0WLTCTv9d1LtWBLsRIinATYTYiP1pNo4/pBq\\nHlM3IiUDkc896CJerYlNzOIjTaV4GjCZvPrxSHU5toJvIDflBsY+gnzbT1ol/y0r\\n3yb9dx7eeF5rPR+U8RTw+Ov/ZNRb+0CY30hrXMdrWjp5dtLGTlr5EFYxlKNOPCkR\\n+6BGyJnC9PWSuqwsykFbgMRkcBaNAxa59dRhMF50pvx2Vs929vFrMi+ofDELUOqz\\n1vyjaEA3pn3AGJGXZgrGNbSfz12ixgGLes4cQD21GCIAWgnBQ7b1ru2V8ImUfyh0\\nyvTEyHJTuFbQ+257AgMBAAGgJjAkBgkqhkiG9w0BCQ4xFzAVMBMGA1UdEQQMMAqC\\nCHRlc3QuY29tMA0GCSqGSIb3DQEBCwUAA4IBAQBKfjZuYsz4s0wb1POIWn41eiAB\\np53qb63QKWILN9z8dLktcdSl3lPfcfPZpXv++QPtn3LR9rJKBawusk6SPXbvOGgS\\n5J+6eM8kVW2O3gHFgoaMcPYVtiO7ekG6o25qx6+Rj84wbFdmpOiCc8AwrLEBwzYV\\np1zaprWQu6PxBulkYPa3FLcntDdi7B67r0YTpxVvo1K7vHYFboDvPz7xG57QIFIM\\nwGd1OegariMT3N8gBOzLZc+jqLpxgo4xoNqBHMo6DEmKLdWdzU4ljpuGK9had99k\\nvQ5vft/Qra3v1uq2lOm/G92b0uA9Y1t2bMHobtAnuXL0HmY9XcLdzpC3f8h8\\n-----END CERTIFICATE REQUEST-----","issuer_id":"2cb2878b-6cd1-460d-bd25-afe655159bdc","validity":{"type":"YEAR","value":3}},"x-request-examples-description-1":"通过CSR签发证书,请求头中的**X-Auth-Token**字段需要填写token,且该token需要具有本API的访问权限。","x-request-examples-url-1":"POST https://ccm.cn-north-4.myhuaweicloud.com/v1/private-certificates/csr","x-support-sdk":"Y"}}},"product_short":"CCM","region_id":"cn-north-4","schemes":["HTTPS"],"security_definitions":null,"summary":"通过CSR签发证书","tags":"私有证书管理","uri":null,"version":"2.0"}