{"base_path":"/","components":null,"consumes":"[\"application/json\"]","definitions":{"CreateClusterBackupStrategyBody":{"description":"开启自动创建快照策略。\n\n当backupStrategy参数配置不为空时,才会开启自动创建快照策略。","properties":{"agency":{"description":"委托名称,委托给CSS,允许CSS调用您的其他云服务。\n\n\n>如果bucket、basePath和agency三个参数同时为空,则系统会自动创建OBS桶和IAM代理(若创建失败,则需要手工配置正确的参数)。","type":"string"},"basePath":{"description":"快照在OBS桶中的存放路径。","type":"string"},"bucket":{"description":"备份使用的OBS桶名称。","type":"string"},"keepday":{"description":"自动创建快照的保留天数。取值范围:1-90。","example":7,"format":"int32","type":"integer"},"period":{"description":"每天自动创建快照的时间点。只支持整点,后面需加上时区,格式为“HH:mm z”,“HH:mm”表示整点时间,“z”表示时区。比如“00:00 GMT+08:00”、“01:00 GMT+08:00”等。","example":"16:00 GMT+08:00","type":"string"},"prefix":{"description":"自动创建的快照的前缀,需要用户自己手动输入。只能包含1~32位小写字母、数字、中划线或者下划线,并且以小写字母开头。","example":"snapshot","type":"string"}},"required":["period","prefix","keepday"]},"CreateClusterBody":{"description":"集群对象。","properties":{"adminPwd":{"description":"安全模式下集群管理员admin的密码,只有在创建集群时authorityEnable设置为true时需要设置此参数。\n\n- 参数范围:8~32个字符。\n\n- 参数要求:密码至少包含大写字母,小写字母,数字、特殊字符四类中的三类,其中可输入的特殊字符为:~!@#$%&*()-_=|[{}];:,<.>/?","type":"string"},"authorityEnable":{"description":"是否开启认证,取值范围为true或false。默认关闭认证功能。\n\n- true:表示集群开启认证。\n- false:表示集群不开启认证。\n\n>此参数只有6.5.4及之后版本支持。","type":"boolean"},"availability_zone":{"description":"可用区。","example":"cn-north-4b","type":"string"},"backupStrategy":{"$ref":"#/definitions/CreateClusterBackupStrategyBody"},"datastore":{"$ref":"#/definitions/CreateClusterDatastoreBody"},"enterprise_project_id":{"description":"企业项目ID。创建集群时,给集群绑定企业项目ID。最大长度36个字符,带\"-\"连字符的UUID格式,或者是字符串\"0\"。\"0\"表示默认企业项目。","example":"3e1c74a0-86a0-40e9-bdc9-c6b9e46cf81b","type":"string"},"httpsEnable":{"description":"设置是否进行通信加密。取值范围为true或false。默认关闭通信加密功能。当httpsEnable设置为true时,authorityEnable字段需要设置为true。\n- true:表示集群进行通信加密。\n- false:表示集群不进行通信加密。\n\n>此参数只有6.5.4及之后版本支持。","type":"boolean"},"loadBalance":{"$ref":"#/definitions/CreateClusterLoadBalance"},"name":{"description":"集群名称。4~32个字符,只能包含数字、字母、中划线和下划线,且必须以字母开头。","example":"ES-Test","pattern":"[a-zA-Z][a-zA-Z0-9-_]+","type":"string"},"nics":{"$ref":"#/definitions/CreateClusterInstanceNicsBody"},"payInfo":{"$ref":"#/definitions/PayInfoBody","description":"包周期集群相关参数订购包周期集群时使用。"},"publicIPReq":{"$ref":"#/definitions/CreateClusterPublicIpReq"},"publicKibanaReq":{"$ref":"#/definitions/CreateClusterPublicKibanaReq"},"roles":{"items":{"$ref":"#/definitions/CreateClusterRolesBody"},"type":"array"},"tags":{"description":"集群标签。","example":[{"key":"k1","value":"v1"},{"key":"k2","value":"v2"}],"items":{"$ref":"#/definitions/CreateClusterTagsBody"},"type":"array"}},"required":["name","roles","nics","datastore"]},"CreateClusterDatastoreBody":{"description":"引擎类型,目前只支持elasticsearch。","properties":{"type":{"description":"引擎类型,支持elasticsearch。","example":"elasticsearch","type":"string"},"version":{"description":"CSS集群引擎版本号。详细请参考CSS[支持的集群版本](css_03_0056.xml)。","example":"7.6.2","type":"string"}},"required":["version","type"]},"CreateClusterElbWhiteList":{"description":"弹性IP白名单。","properties":{"enableWhiteList":{"description":"是否开启公网访问控制。","example":true,"type":"boolean"},"whiteList":{"description":"公网访问控制白名单。需要添加白名单的网段或ip,以逗号隔开,不可重复。","example":"10.0.0.47","type":"string"}},"required":["enableWhiteList","whileList"]},"CreateClusterInstanceNicsBody":{"description":"子网信息。","properties":{"netId":{"description":"子网ID(网络ID)。","example":"af1c65ae-c494-4e24-acd8-81d6b355c9f1","type":"string"},"securityGroupId":{"description":"安全组ID。","example":"7e3fed21-1a44-4101-ab29-34e57124f614","type":"string"},"vpcId":{"description":"指定虚拟私有云ID,用于集群网络配置。","example":"fccd753c-91c3-40e2-852f-5ddf76d1a1b2","type":"string"}},"required":["vpcId","netId","securityGroupId"]},"CreateClusterInstanceVolumeBody":{"description":"volume信息。当flavorRef选择的是本地盘规格时不需要填写,本地盘规格可以通过[获取实例规格列表](ListFlavors.xml)中diskrange属性获得。目前支持的本地盘规格有:\n\n- ess.spec-i3small\n\n- ess.spec-i3medium\n\n- ess.spec-i3.8xlarge.8\n\n- ess.spec-ds.xlarge.8\n\n- ess.spec-ds.2xlarge.8\n\n- ess.spec-ds.4xlarge.8","properties":{"size":{"description":"卷大小,必须为大于0且为4和10的公倍数,磁盘规格大小可以通过[获取实例规格列表](ListFlavors.xml)中diskrange属性获得。 单位:GB。\n\n>ess-master节点和ess-client节点默认大小为40G,且不可更改。","example":100,"format":"int32","type":"integer"},"volume_type":{"description":"卷类型。\n\n- COMMON:普通I/O。\n- HIGH:高I/O。\n- ULTRAHIGH:超高I/O。","example":"COMMON","type":"string"}},"required":["volume_type","size"]},"CreateClusterLoadBalance":{"description":"终端节点服务信息。","properties":{"endpointWithDnsName":{"description":"是否开启内网域名。\n- true: 开启内网域名。\n- false: 关闭内网域名。","example":true,"type":"boolean"},"vpcPermissions":{"description":"访问控制。","example":["dffef70c1db243cbb373e45791165281"],"items":{"type":"string"},"type":"array"}},"required":["endpointWithDnsName"]},"CreateClusterPublicEip":{"description":"公网带宽信息。","properties":{"bandWidth":{"$ref":"#/definitions/CreateClusterPublicEipSize"}},"required":["bandWidth"]},"CreateClusterPublicEipSize":{"description":"设置公网带宽大小。","properties":{"size":{"description":"带宽大小。","example":1,"type":"integer"}},"required":["size"]},"CreateClusterPublicIpReq":{"description":"公网访问信息。只有在httpsEnable设置为true时该参数配置生效。","properties":{"eip":{"$ref":"#/definitions/CreateClusterPublicEip"},"eipId":{"description":"弹性公网IP的ID。","type":"string"},"elbWhiteListReq":{"$ref":"#/definitions/CreateClusterElbWhiteList"},"publicBindType":{"description":"是否自动绑定弹性公网IP。当前仅支持auto_assign为自动分配参数。","example":"auto_assign","type":"string"}},"required":["eip","elbWhiteListReq","publicBindType"]},"CreateClusterPublicKibanaElbWhiteList":{"description":"kibana白名单信息。","properties":{"enableWhiteList":{"description":"是否开启kibana访问控制。","example":true,"type":"boolean"},"whiteList":{"description":"白名单。需要添加白名单的网段或ip,以逗号隔开,不可重复。","example":"10.0.0.47","type":"string"}},"required":["whiteList","enableWhiteList"]},"CreateClusterPublicKibanaReq":{"description":"Kibana公网访问信息。只有在authorityEnable设置为true时该参数配置生效。","properties":{"eipSize":{"description":"带宽大小。","example":1,"type":"integer"},"elbWhiteList":{"$ref":"#/definitions/CreateClusterPublicKibanaElbWhiteList"}},"required":["eipSize","elbWhiteList"]},"CreateClusterReq":{"properties":{"cluster":{"$ref":"#/definitions/CreateClusterBody"}},"required":["cluster"]},"CreateClusterResp":{"description":"集群对象。若创建的是按需集群,则只返回cluster参数。","properties":{"id":{"description":"集群ID。","example":"ef683016-871e-48bc-bf93-74a29d60d214","type":"string"},"name":{"description":"集群名称。","example":"ES-Test","type":"string"}}},"CreateClusterResponseBody":{"properties":{"cluster":{"$ref":"#/definitions/CreateClusterResp"},"orderId":{"description":"订单号。若创建的是包周期集群,则只返回ordeld参数。","example":"CS22081714511ZXQ2","type":"string"}}},"CreateClusterRolesBody":{"description":"集群信息。","properties":{"flavorRef":{"description":"实例规格名称。可以使用[获取实例规格列表](ListFlavors.xml)的name属性确认当前拥有的规格信息。","example":"ess.spec-4u16g","type":"string"},"instanceNum":{"description":"实例个数。\n- ess节点,选择范围:1~32个节点数量。\n  - 若同时选择ess和ess-master时,可以选择1~200个节点数量。\n\n  - 若同时选择ess和ess-client时,可以选择1~32个节点数量。\n\n  - 若同时选择ess和ess-cold时,可以选择1~32个节点数量。\n- ess-master节点,选择范围:3~10内的奇数个节点数量。\n- ess-client节点,选择范围:1~32个节点数量。\n- ess-cold节点,选择范围:1~32个节点数量。","example":3,"type":"integer"},"type":{"description":"实例类型(选择实例类型时应至少选择一个ess类型)。例如,\n\n- ess-master对应Master节点。\n- ess-client对应clinet节点。\n- ess-cold对应冷数据节点。\n- ess对应数据节点。","example":"ess","type":"string"},"volume":{"$ref":"#/definitions/CreateClusterInstanceVolumeBody"}},"required":["flavorRef","type","instanceNum","volume"]},"CreateClusterTagsBody":{"description":"集群标签。\n\n关于标签特性的详细信息,请参见[《标签管理服务介绍》](https://support.huaweicloud.com/productdesc-tms/zh-cn_topic_0071335169.html)。","properties":{"key":{"description":"集群标签的key值。可输入的字符串长度为1~36个字符。只能包含数字、字母、中划线\"-\"和下划线\"_\"。","type":"string"},"value":{"description":"集群标签的value值。可输入的字符串长度为0~43个字符。只能包含数字、字母、中划线\"-\"和下划线\"_\"。","type":"string"}},"required":["key","value"]},"PayInfoBody":{"properties":{"isAutoPay":{"description":"是否自动支付。下单订购后,是否自动从客户的华为云账户中支付,而不需要客户手动去进行支付。该参数适用于包周期集群。\n- 1:是(会自动选择折扣和优惠券进行优惠,然后自动从客户华为云账户中支付),自动支付失败后会生成订单成功(该订单应付金额是优惠后金额)、但订单状态为“待支付”,等待客户手动支付(手动支付时,客户还可以修改系统自动选择的折扣和优惠券)。\n- 0: 否(需要客户手动去支付,客户可以选择折扣和优惠券)。默认值为“0”。","example":1,"type":"integer"},"isAutoRenew":{"description":"是否自动续订,为空时表示不自动续订。\n- 1: 自动续订。\n- 0:不自动续订(默认)。","example":1,"type":"integer"},"payModel":{"description":"订购周期类型。\n- 2: 包月。\n- 3: 包年。","example":2,"type":"integer"},"period":{"description":"订购周期数。\n- 若payModel为2,则有效值为1-9。\n- 若payModel为3,则有效值为1-3。","example":1,"type":"integer"}},"required":["payModel","period"]}},"description":null,"group_id":"c917c7a19aa04328b7e47a1def0e0acd","host":"css.cn-north-4.myhuaweicloud.com","id":"412af788c96042469a798e6907715afc","info_version":"v2","method":"post","name":"CreateCluster","parameters":{},"paths":{"/v2.0/{project_id}/clusters":{"post":{"description":"该接口用于创建拥有多种不同节点类型(ess,ess-cold,ess-client,ess-master)组合的集群。","operationId":"CreateCluster","parameters":[{"description":"项目ID。获取方法请参见[获取项目ID和名称](css_03_0071.xml)。","in":"path","name":"project_id","required":true,"type":"string","x-example":"6204a5bd270343b5885144cf9c8c158d"},{"in":"body","name":"CreateClusterReq","required":true,"schema":{"$ref":"#/definitions/CreateClusterReq"}}],"responses":{"200":{"description":"请求已成功","schema":{"$ref":"#/definitions/CreateClusterResponseBody"},"x-response-examples-1":{"application/json":{"cluster":{"id":"ef683016-871e-48bc-bf93-74a29d60d214","name":"ES-Test"}}},"x-response-examples-2":{"application/json":{"orderId":"CS2208241141LY94J"}},"x-response-examples-description-1":"创建按需期集群响应示例。","x-response-examples-description-2":"创建包周期集群响应示例。"},"400":{"description":"非法请求。\n\n建议直接修改该请求,不要重试该请求。"},"409":{"description":"服务器在完成请求时发生冲突。\n\n返回该状态码,表明客户端尝试创建的资源已经存在,或者由于冲突请求的更新操作不能被完成。"},"412":{"description":"未满足前提条件,服务器未满足请求者在请求中设置的其中一个前提条件。"}},"summary":"创建集群V2","tags":["集群管理接口"],"x-apiexplorer-hide":"N","x-is-registered":"Y","x-publishpath":"","x-request-examples-description-1":"创建包周期集群请求示例。若需要创建按需集群,删掉请求体中的payInfo字段即可。","x-request-examples-text-1":{"cluster":{"adminPwd":"{password}","authorityEnable":true,"availability_zone":"{Az code}","backupStrategy":{"agency":"css_obs_agency","basePath":"css_repository/obs-path","bucket":"OBS-obsName","keepday":7,"period":"16:00 GMT+08:00","prefix":"snapshot"},"datastore":{"type":"elasticsearch","version":"{cluster-version}"},"enterprise_project_id":0,"httpsEnable":true,"loadBalance":{"endpointWithDnsName":false,"vpcPermissions":["{Account ID}"]},"name":"css-cluster","nics":{"netId":"{NET ID}","securityGroupId":"{Security group ID}","vpcId":"{VPC ID}"},"payInfo":{"isAutoPay":1,"isAutoRenew":1,"payModel":2,"period":1},"publicIPReq":{"eip":{"bandWidth":{"size":5}},"eipId":null,"elbWhiteListReq":{"enableWhiteList":true,"whiteList":"127.0.0.1"},"publicBindType":"auto_assign"},"publicKibanaReq":{"eipSize":5,"elbWhiteList":{"enableWhiteList":true,"whiteList":"127.0.0.1"}},"roles":[{"flavorRef":"ess.spec-4u8g","instanceNum":1,"type":"ess","volume":{"size":100,"volume_type":"COMMON"}}],"tags":[{"key":"k1","value":"v1"},{"key":"k2","value":"v2"}]}},"x-request-examples-url-1":"POST /v2.0/6204a5bd270343b5885144cf9c8c158d/clusters","x-support-sdk":"Y"}}},"product_short":"CSS","region_id":"cn-north-4","schemes":["HTTPS"],"security_definitions":null,"summary":"创建集群V2","tags":"集群管理接口","uri":null,"version":"2.0"}