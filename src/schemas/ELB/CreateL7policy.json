{"base_path":"/","components":null,"consumes":"[\"application/json\"]","definitions":{"CreateL7policyReq":{"description":"转发策略对象","properties":{"action":{"description":"转发策略的转发动作;取值:REDIRECT_TO_POOL:转发到后端云服务器组;REDIRECT_TO_LISTENER:重定向到监听器","enum":["REDIRECT_TO_POOL","REDIRECT_TO_LISTENER"],"type":"string"},"admin_state_up":{"description":"转发策略的管理状态;该字段为预留字段,暂未启用。默认为true。","type":"boolean"},"description":{"description":"转发策略额描述信息","maxLength":255,"minLength":1,"type":"string"},"listener_id":{"description":"转发策略对应的监听器ID。当action为REDIRECT_TO_POOL时,只支持创建在PROTOCOL为HTTP或TERMINATED_HTTPS的listener上。 当action为REDIRECT_TO_LISTENER时,只支持创建在PROTOCOL为HTTP的listener上。","type":"string"},"name":{"description":"转发策略名称","maxLength":255,"minLength":0,"type":"string"},"position":{"description":"转发策略的优先级,从1递增,最高100。该字段为预留字段,暂未启用。","format":"int32","type":"integer"},"redirect_listener_id":{"description":"转发到的listener的ID,当action为REDIRECT_TO_LISTENER时生效。当action为REDIRECT_TO_LISTENER时必选","type":"string"},"redirect_pool_id":{"description":"转发到pool的ID。转发到pool的ID。当action为REDIRECT_TO_POOL时生效。当action为REDIRECT_TO_POOL时必选","type":"string"},"redirect_url":{"description":"转发到的url。该字段未启用。","maxLength":255,"minLength":1,"type":"string"},"rules":{"description":"指定L7rule的参数,可以在创建L7policy的同时创建L7rule","items":{"$ref":"#/definitions/CreateL7ruleReqInPolicy"},"type":"array"},"tenant_id":{"description":"转发策略所在的项目ID。","maxLength":255,"minLength":1,"type":"string"}},"required":["action","listener_id"]},"CreateL7policyRequestBody":{"description":"This is a auto create Body Object","properties":{"l7policy":{"$ref":"#/definitions/CreateL7policyReq","description":"转发策略对象"}},"required":["l7policy"]},"CreateL7policyResponseBody":{"description":"This is a auto create Response Object","properties":{"l7policy":{"$ref":"#/definitions/L7policyResp","description":"转发策略对象"}},"required":["l7policy"]},"CreateL7ruleReqInPolicy":{"description":"创建转发规则的请求体","properties":{"admin_state_up":{"description":"转发规则的管理状态;该字段为预留字段,暂未启用。默认为true。","type":"boolean"},"compare_type":{"description":"转发规则的匹配方式。type为HOST_NAME时可以为EQUAL_TO。type为PATH时可以为REGEX, STARTS_WITH,EQUAL_TO。","type":"string"},"invert":{"description":"是否反向匹配;取值范围:true/false。默认值:false;该字段为预留字段,暂未启用。","type":"boolean"},"key":{"description":"匹配内容的键值。目前匹配内容为HOST_NAME和PATH时,该字段不生效。该字段能更新但不会生效。","maxLength":255,"minLength":1,"type":"string"},"type":{"description":"转发规则的匹配内容","enum":["HOST_NAME","PATH"],"type":"string"},"value":{"description":"匹配内容的值。其值不能包含空格。使用说明:当type为HOST_NAME时,取值范围:String(100),字符串只能包含英文字母、数字、“-”或“.”,且必须以字母或数字开头。当type为PATH时,取值范围:String(128)。当转发规则的compare_type为STARTS_WITH,EQUAL_TO时,字符串只能包含英文字母、数字、_~';@^-%#&$.*+?,=!:| \\/()[]{},且必须以\"/\"开头。","maxLength":128,"minLength":1,"type":"string"}},"required":["compare_type","type","value"]},"ElbError":{"description":"错误信息响应体","properties":{"error":{"description":"错误信息","type":"string"}},"required":["error"]},"L7policyResp":{"description":"转发策略对象","properties":{"action":{"description":"转发策略的转发动作;取值:REDIRECT_TO_POOL:转发到后端云服务器组;REDIRECT_TO_LISTENER:重定向到监听器","enum":["REDIRECT_TO_POOL","REDIRECT_TO_LISTENER"],"type":"string"},"admin_state_up":{"description":"转发策略的管理状态;该字段为预留字段,暂未启用。默认为true。","type":"boolean"},"description":{"description":"转发策略额描述信息","maxLength":255,"minLength":1,"type":"string"},"id":{"description":"转发策略ID","type":"string"},"listener_id":{"description":"转发策略对应的监听器ID","type":"string"},"name":{"description":"转发策略名称","maxLength":255,"minLength":0,"type":"string"},"position":{"description":"转发策略的优先级,从1递增,最高100。该字段为预留字段,暂未启用。","format":"int32","maximum":100,"minimum":1,"type":"integer"},"project_id":{"description":"转发策略所在的项目ID。","maxLength":255,"minLength":1,"type":"string"},"provisioning_status":{"description":"健康检查的配置状态;该字段为预留字段,暂未启用。默认为ACTIVE。","type":"string"},"redirect_listener_id":{"description":"转发到的listener的ID,当action为REDIRECT_TO_LISTENER时生效。","type":"string"},"redirect_pool_id":{"description":"转发到pool的ID。转发到pool的ID。当action为REDIRECT_TO_POOL时生效。","type":"string"},"redirect_url":{"description":"转发到的url。该字段未启用。","maxLength":255,"minLength":1,"type":"string"},"rules":{"description":"转发策略关联的转发规则列表","items":{"$ref":"#/definitions/ResourceList","description":""},"type":"array"},"tenant_id":{"description":"转发策略所在的项目ID。","maxLength":255,"minLength":1,"type":"string"}},"required":["action","admin_state_up","description","id","listener_id","name","position","project_id","provisioning_status","redirect_listener_id","redirect_pool_id","redirect_url","rules","tenant_id"]},"ResourceList":{"description":"资源对象id列表。","properties":{"id":{"description":"资源ID","type":"string"}},"required":["id"]}},"description":null,"group_id":"dbd0be272eaa427280cd04f618f990db","host":"elb.cn-north-4.myhuaweicloud.com","id":"f39e81ed602d416094c05f082b31ba0a","info_version":"v2","method":"post","name":"CreateL7policy","parameters":{},"paths":{"/v2/{project_id}/elb/l7policies":{"post":{"consumes":[],"deprecated":false,"description":"创建listener关联的转发策略","operationId":"CreateL7policy","parameters":[{"description":"This is a auto create Body Object","in":"body","name":"CreateL7policyRequestBody","required":true,"schema":{"$ref":"#/definitions/CreateL7policyRequestBody"}},{"description":"用户token","in":"header","name":"X-Auth-Token","required":true,"type":"string","x-order":2},{"description":"项目id","in":"path","name":"project_id","required":true,"type":"string","x-order":1}],"produces":[],"responses":{"201":{"description":"Created","examples":{"application/json":{"l7policy":{"action":"REDIRECT_TO_LISTENER","admin_state_up":true,"description":"","id":"98da7cdb-64a8-40d8-bd1f-c5b1f48dbf07","listener_id":"369f1208-ff1d-4f5a-a5e2-f1dc9c567a84","name":"","position":100,"project_id":"601240b9c5c94059b63d484c92cfe308","provisioning_status":"ACTIVE","redirect_listener_id":"6edb5797-3615-4950-95eb-b60a8b1253a5","redirect_pool_id":null,"redirect_url":null,"rules":[],"tenant_id":"601240b9c5c94059b63d484c92cfe308"}}},"schema":{"$ref":"#/definitions/CreateL7policyResponseBody"}},"400":{"description":"Bad Request","schema":{"$ref":"#/definitions/ElbError"}},"401":{"description":"Unauthorized","schema":{"$ref":"#/definitions/ElbError"}},"403":{"description":"Forbidden","schema":{"$ref":"#/definitions/ElbError"}},"404":{"description":"Not Found","schema":{"$ref":"#/definitions/ElbError"}},"409":{"description":"Conflict","schema":{"$ref":"#/definitions/ElbError"}}},"summary":"创建转发策略","tags":["转发策略"],"x-constraint":"","x-first-open-time":"2017-03-30","x-hybridcloud":"true","x-is-registered":"Y","x-name":"创建转发策略","x-open-region-cloud":"hc,hk,otc,ctc","x-order":53,"x-publishpath":"","x-request-examples-1":"POST https://{ELB_Endpoint}/v2/7f38b160526648ee837ca4bdc05f4d09/elb/l7policies\n{\n    \"l7policy\": {\n        \"action\": \"REDIRECT_TO_LISTENER\",\n        \"listener_id\": \"369f1208-ff1d-4f5a-a5e2-f1dc9c567a84\",\n        \"redirect_listener_id\": \"6edb5797-3615-4950-95eb-b60a8b1253a5\"\n    }\n}","x-request-examples-description-1":"","x-request-examples-text-1":"POST https://{ELB_Endpoint}/v2/7f38b160526648ee837ca4bdc05f4d09/elb/l7policies\n{\n    \"l7policy\": {\n        \"action\": \"REDIRECT_TO_LISTENER\",\n        \"listener_id\": \"369f1208-ff1d-4f5a-a5e2-f1dc9c567a84\",\n        \"redirect_listener_id\": \"6edb5797-3615-4950-95eb-b60a8b1253a5\"\n    }\n}","x-request-examples-url-1":"","x-scope":"Commercial","x-source":"Native","x-support-sdk":"Y","x-version":"v2"}}},"product_short":"ELB","region_id":"cn-north-4","schemes":["HTTPS"],"security_definitions":null,"summary":"创建转发策略","tags":"转发策略","uri":null,"version":"2.0"}