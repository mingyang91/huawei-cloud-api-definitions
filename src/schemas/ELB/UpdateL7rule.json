{"base_path":"/","components":null,"consumes":"[\"application/json;charset=UTF-8\"]","definitions":{"L7Rule":{"description":"L7转发规则","properties":{"admin_state_up":{"description":"转发规则的管理状,默认为true。\n\n不支持该字段,请勿使用。","type":"boolean"},"compare_type":{"description":"转发规则的匹配方式。type为HOST_NAME时可以为EQUAL_TO。type为PATH时可以为REGEX,\nSTARTS_WITH,EQUAL_TO。","type":"string"},"conditions":{"description":"转发规则的匹配条件。当监听器的高级转发策略功能(enhance_l7policy_enable)开启后才会生效。\n若转发规则配置了conditions,字段key、字段value的值无意义。\n同一个rule内的conditions列表中所有key必须相同,value不允许重复。","items":{"$ref":"#/definitions/RuleCondition"},"type":"array"},"created_at":{"description":"创建时间。格式:yyyy-MM-dd'T'HH:mm:ss'Z',UTC时区。\n\n注意:独享型实例的历史数据以及共享型实例下的资源,不返回该字段。","type":"string"},"id":{"description":"规则ID。","type":"string"},"invert":{"description":"是否反向匹配。\n使用说明:固定为false。该字段能更新但不会生效。","type":"boolean"},"key":{"description":"匹配内容的键值。type为HOST_NAME和PATH时,该字段不生效。","maxLength":255,"minLength":1,"type":"string"},"project_id":{"description":"转发规则所在的项目ID。","type":"string"},"provisioning_status":{"description":"provisioning状态,可以为ACTIVE、PENDING_CREATE 或者ERROR。\n说明:该字段无实际含义,默认为ACTIVE。","type":"string"},"type":{"description":"转发规则类别。\n\n取值:\n- HOST_NAME:匹配域名。\n- PATH:匹配请求路径。\n- METHOD:匹配请求方法。\n- HEADER:匹配请求头。\n- QUERY_STRING:匹配请求查询参数。\n- SOURCE_IP:匹配请求源IP地址。\n\n使用说明:\n- 一个l7policy下创建的l7rule的HOST_NAME,PATH,METHOD,SOURCE_IP不能重复。\nHEADER、QUERY_STRING支持重复的rule配置。","enum":["HOST_NAME","PATH","METHOD","HEADER","QUERY_STRING","SOURCE_IP"],"type":"string"},"updated_at":{"description":"更新时间。格式:yyyy-MM-dd'T'HH:mm:ss'Z',UTC时区。\n\n注意:独享型实例的历史数据以及共享型实例下的资源,不返回该字段。","type":"string"},"value":{"description":"匹配内容的值。仅当conditions空时该字段生效。\n\n当type为HOST_NAME时,字符串只能包含英文字母、数字、-.*,必须以字母、数字或*开头。\n\n若域名中包含*,则*只能出现在开头且必须以*.开始。当*开头时表示通配0~任一个字符。\n\n当type为PATH时,当转发规则的compare_type为STARTS_WITH、EQUAL_TO时,\n字符串只能包含英文字母、数字、_~';@^-%#&$.*+?,=!:|\\\\/()\\[\\]{},且必须以/开头。\n\n当type为METHOD、SOURCE_IP、HEADER,\n\nQUERY_STRING时,该字段无意义,使用condition_pair来指定key,value。","maxLength":128,"minLength":1,"type":"string"}},"required":["admin_state_up","compare_type","key","project_id","type","value","provisioning_status","invert","id","conditions"]},"RuleCondition":{"description":"","properties":{"key":{"description":"匹配项的名称。\n\n当转发规则类别type为HOST_NAME、PATH、METHOD、SOURCE_IP时,该字段固定为空字符串。\n\n当转发规则类别type为HEADER时,key表示请求头参数的名称,value表示请求头参数的值。\nkey的长度限制1-40字符,只允许包含字母、数字和-_。\n\n当转发规则类别type为QUERY_STRING时,key表示查询参数的名称,value表示查询参数的值。\nkey的长度限制为1-128字符,不支持空格,中括号,大括号,尖括号,反斜杠,双引号,\n'#','&','|',‘%’,‘~’,字母区分大小写。\n\n同一个rule内的conditions列表中所有key必须相同。","maxLength":128,"minLength":1,"type":"string"},"value":{"description":"匹配项的值。\n\n当转发规则类别type为HOST_NAME时,key固定为空字符串,value表示域名的值。\nvalue长度1-128字符,字符串只能包含英文字母、数字、-.\\*,\n必须以字母、数字或\\*开头,\\*只能出现在开头且必须以\\*.开始。\n\n当转发规则类别type为PATH时,key固定为空字符串,value表示请求路径的值。\nvalue长度1-128字符。当转发规则的compare_type为STARTS_WITH、EQUAL_TO时,\n字符串只能包含英文字母、数字、_~';@^-%#&$.*+?,=!:|\\\\/()\\[\\]{},且必须以\"/\"开头。\n\n当转发规则类别type为HEADER时,key表示请求头参数的名称,value表示请求头参数的值。\nvalue长度限制1-128字符,不支持空格,\n双引号,支持以下通配符:*(匹配0个或更多字符)和?(正好匹配1个字符)。\n\n当转发规则类别type为QUERY_STRING时,key表示查询参数的名称,value表示查询参数的值。\nvalue长度限制为1-128字符,不支持空格,中括号,大括号,尖括号,反斜杠,双引号,\n'#','&','|',‘%’,‘~’,字母区分大小写,支持通配符:*(匹配0个或更多字符)和?(正好匹配1个字符)\n\n当转发规则类别type为METHOD时,key固定为空字符串,value表示请求方式。value取值范围为:GET, PUT,\nPOST,DELETE, PATCH, HEAD, OPTIONS。\n\n当转发规则类别type为SOURCE_IP时,key固定为空字符串,value表示请求源地址。\nvalue为CIDR格式,支持ipv4,ipv6。例如192.168.0.2/32,2049::49/64。\n\n\n同一个rule内的conditions列表中所有value不允许重复。","maxLength":128,"minLength":1,"type":"string"}},"required":["key","value"]},"UpdateL7RuleOption":{"description":"更新七层转发规则的请求参数。","properties":{"admin_state_up":{"description":"转发规则的管理状态,默认为true。\n\n不支持该字段,请勿使用。","type":"boolean"},"compare_type":{"description":"转发匹配方式。\n\n取值:\n- EQUAL_TO 表示精确匹配。\n- REGEX 表示正则匹配。\n- STARTS_WITH 表示前缀匹配。\n\n使用说明:\n- type为HOST_NAME时仅支持EQUAL_TO,支持通配符*。\n- type为PATH时可以为REGEX,STARTS_WITH,EQUAL_TO。\n- type为METHOD、SOURCE_IP时,仅支持EQUAL_TO。\n- type为HEADER、QUERY_STRING,仅支持EQUAL_TO,支持通配符*、?。","type":"string"},"conditions":{"description":"转发规则的匹配条件。当监听器的高级转发策略功能(enhance_l7policy_enable)开启后才会生效。\n若转发规则配置了conditions,字段key、字段value的值无意义。\n同一个rule内的conditions列表中所有key必须相同,value不允许重复。","items":{"$ref":"#/definitions/UpdateRuleCondition"},"type":"array"},"invert":{"description":"是否反向匹配。\n\n取值:true、false。\n\n不支持该字段,请勿使用。","type":"boolean"},"key":{"description":"匹配项的名称,比如转发规则匹配类型是请求头匹配,则key表示请求头参数的名称。\n\n不支持该字段,请勿使用。","maxLength":255,"minLength":0,"type":"string"},"value":{"description":"匹配项的值。比如转发规则匹配类型是域名匹配,则value表示域名的值。仅当conditions空时该字段生效。\n\n当转发规则类别type为HOST_NAME时,字符串只能包含英文字母、数字、-.\\*,必须以字母、数字或\\*开头。\n若域名中包含\\*,则\\*只能出现在开头且必须以\\*.开始。当\\*开头时表示通配0~任一个字符。\n\n当转发规则类别type为PATH时,当转发规则的compare_type为STARTS_WITH、EQUAL_TO时,\n字符串只能包含英文字母、数字、_~';@^-%#&$.*+?,=!:|\\\\/()\\[\\]{},且必须以/开头。\n\n当转发规则类别type为METHOD、SOURCE_IP、HEADER,QUERY_STRING时,\n该字段无意义,使用conditions来指定key/value。","maxLength":128,"minLength":1,"type":"string"}}},"UpdateL7RuleRequestBody":{"description":"This is a auto create Body Object","properties":{"rule":{"$ref":"#/definitions/UpdateL7RuleOption","description":"规则对象。"}},"required":["rule"]},"UpdateL7RuleResponseBody":{"description":"This is a auto create Response Object","properties":{"request_id":{"description":"请求ID。\n\n注:自动生成 。","type":"string"},"rule":{"$ref":"#/definitions/L7Rule","description":"规则对象。"}},"required":["request_id","rule"]},"UpdateRuleCondition":{"description":"","properties":{"key":{"description":"匹配项的名称。\n\n当转发规则类别type为HOST_NAME、PATH、METHOD、SOURCE_IP时,该字段固定为空字符串。\n\n当转发规则类别type为HEADER时,key表示请求头参数的名称,value表示请求头参数的值。\nkey的长度限制1-40字符,只允许包含字母、数字和-_。\n\n当转发规则类别type为QUERY_STRING时,key表示查询参数的名称,value表示查询参数的值。\nkey的长度限制为1-128字符,不支持空格,中括号,大括号,尖括号,反斜杠,双引号,\n'#','&','|',‘%’,‘~’,字母区分大小写。\n\n同一个rule内的conditions列表中所有key必须相同。","maxLength":128,"minLength":1,"type":"string"},"value":{"description":"匹配项的值。\n\n当转发规则类别type为HOST_NAME时,key固定为空字符串,value表示域名的值。\nvalue长度1-128字符,字符串只能包含英文字母、数字、-.\\*,\n必须以字母、数字或\\*开头,\\*只能出现在开头且必须以\\*.开始。\n\n当转发规则类别type为PATH时,key固定为空字符串,value表示请求路径的值。\nvalue长度1-128字符。当转发规则的compare_type为STARTS_WITH、EQUAL_TO时,\n字符串只能包含英文字母、数字、_~';@^-%#&$.*+?,=!:|\\\\/()\\[\\]{},且必须以/开头。\n\n当转发规则类别type为HEADER时,key表示请求头参数的名称,value表示请求头参数的值。\nvalue长度限制1-128字符,不支持空格,\n双引号,支持以下通配符:*(匹配0个或更多字符)和?(正好匹配1个字符)。\n\n当转发规则类别type为QUERY_STRING时,key表示查询参数的名称,value表示查询参数的值。\nvalue长度限制为1-128字符,不支持空格,中括号,大括号,尖括号,反斜杠,双引号,\n'#','&','|',‘%’,‘~’,字母区分大小写,支持通配符:*(匹配0个或更多字符)和?(正好匹配1个字符)\n\n当转发规则类别type为METHOD时,key固定为空字符串,value表示请求方式。value取值范围为:GET, PUT,\nPOST,DELETE, PATCH, HEAD, OPTIONS。\n\n当转发规则类别type为SOURCE_IP时,key固定为空字符串,value表示请求源地址。\nvalue为CIDR格式,支持ipv4,ipv6。例如192.168.0.2/32,2049::49/64。\n\n\n同一个rule内的conditions列表中所有value不允许重复。","maxLength":128,"minLength":1,"type":"string"}}}},"description":null,"group_id":"dbd0be272eaa427280cd04f618f990db","host":"elb.cn-north-4.myhuaweicloud.com","id":"99b4e4787c9949d7b95458575795462f","info_version":"v3","method":"put","name":"UpdateL7Rule","parameters":{},"paths":{"/v3/{project_id}/elb/l7policies/{l7policy_id}/rules/{l7rule_id}":{"put":{"deprecated":false,"description":"更新七层转发规则。","operationId":"UpdateL7Rule","parameters":[{"description":"This is a auto create Body Object","in":"body","name":"UpdateL7RuleRequestBody","required":true,"schema":{"$ref":"#/definitions/UpdateL7RuleRequestBody"}},{"description":"IAM鉴权Token。","in":"header","name":"X-Auth-Token","required":true,"type":"string","x-order":1},{"description":"策略ID。","in":"path","name":"l7policy_id","required":true,"type":"string","x-order":3},{"description":"规则ID。","in":"path","name":"l7rule_id","required":true,"type":"string","x-order":4},{"description":"项目ID。","in":"path","name":"project_id","required":true,"type":"string","x-order":2}],"responses":{"200":{"description":"操作正常返回。","examples":{"application/json":{"request_id":"133096f9-e754-430d-a2c2-e61fe1190aa8","rule":{"admin_state_up":true,"compare_type":"STARTS_WITH","id":"84f4fcae-9c15-4e19-a99f-72c0b08fd3d7","invert":false,"key":null,"project_id":"99a3fff0d03c428eac3678da6a7d0f24","provisioning_status":"ACTIVE","type":"PATH","value":"/ccc.html"}}},"schema":{"$ref":"#/definitions/UpdateL7RuleResponseBody"}}},"summary":"更新转发规则","tags":["转发规则"],"x-apiexplorer-hide":"false","x-constraint":"","x-first-open-time":"2019-04-30","x-hybridcloud":"","x-is-registered":"Y","x-name":"更新转发规则","x-open-region-cloud":"hc,hk,hws_eu,otc,ocb,tlf,ctc,hcso,sbc,g42,tm,cmcc,hk_g42,dt_test,hcso_dt,mix,hk_sbc,hws_ocb,fcs,fcs_dt,dt","x-order":4,"x-publishpath":"","x-request-examples-1":{"rule":{"compare_type":"STARTS_WITH","value":"/ccc.html"}},"x-request-examples-description-1":"更新转发规则","x-request-examples-text-1":{"rule":{"compare_type":"STARTS_WITH","value":"/ccc.html"}},"x-request-examples-url-1":"PUT https://{ELB_Endpoint}/v3/{99a3fff0d03c428eac3678da6a7d0f24}/elb/l7policies/cf4360fd-8631-41ff-a6f5-b72c35da74be/rules/84f4fcae-9c15-4e19-a99f-72c0b08fd3d7","x-scope":"Commercial","x-source":"SelfDeveloped","x-support-sdk":"Y","x-version":"v3"}}},"product_short":"ELB","region_id":"cn-north-4","schemes":["HTTPS"],"security_definitions":null,"summary":"更新转发规则","tags":"转发规则","uri":null,"version":"2.0"}