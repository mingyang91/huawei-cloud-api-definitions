{"base_path":"/","components":null,"consumes":"[\"application/json;charset=UTF-8\"]","definitions":{"Error":{"properties":{"error":{"description":"错误信息返回体。","items":{"$ref":"#/definitions/ErrorDetail"}}}},"ErrorDetail":{"properties":{"error_code":{"description":"错误请求返回的错误码。","maxLength":36,"minLength":3,"type":"string"},"error_msg":{"description":"错误请求返回的错误信息。","maxLength":1024,"minLength":0,"type":"string"}}},"ResourceInstanceResponse":{"properties":{"resources":{"description":"资源实例列表","items":{"properties":{"resource_detail":{"description":"资源详情。 资源对象,用于扩展。默认为空","example":null,"type":"object"},"resource_id":{"description":"资源ID","example":"cdfs_cefs_wesas_12_dsad","type":"string"},"resource_name":{"description":"资源名称,资源没有名称时默认为空字符串,eip返回ip地址","example":"resouece1","type":"string"},"sys_tags":{"description":"仅op_service权限才可以可以获取此字段:\n目前只包含一个resource_tag 结构体\nkey:_sys_enterprise_project_id\nvalue:企业项目id,0表示默认企业项目\n非op_service场景不能返回此字段","items":{"properties":{"key":{"description":"键","example":"_sys_enterprise_project_id","type":"string"},"value":{"description":"值","example":"5aa119a8-d25b-45a7-8d1b-88e127885635","type":"string"}}},"type":"array"},"tags":{"description":"标签列表,没有标签默认为空数组","items":{"properties":{"key":{"description":"键","example":"key1","type":"string"},"value":{"description":"值","example":"value1","type":"string"}}},"type":"array"}},"required":["resource_detail","resource_id","resource_name","tags"]},"type":"array"},"total_count":{"description":"总记录数","example":1000,"format":"int32","type":"integer"}},"required":["resources","total_count"],"type":"object"},"ResourceInstanceTagRequest":{"properties":{"matches":{"description":"搜索字段,key为要匹配的字段,如resource_name等。value为匹配的值。key为固定字典值,不能包含重复的key或不支持的key。 根据key的值确认是否需要模糊匹配,如resource_name默认为模糊搜索(不区分大小写),如果value为空字符串精确匹配(多数服务不存在资源名称为空的情况,因此此类情况返回空列表)。resource_id为精确匹配。第一期只做resource_name,后续再扩展。","items":{"properties":{"key":{"description":"键","example":"resource_name","type":"string"},"value":{"description":"值","example":"resource1","type":"string"}}},"type":"array"},"not_tags":{"description":"不包含标签,最多包含50个key,每个key下面的value最多10个, 每个key对应的value可以为空数组但结构体不能缺失。Key不能重复,同一个key中values不能重复。结果返回不包含标签的资源列表,key之间是与的关系,key-value结构中value是或的关系。无过滤条件时返回全量数据","items":{"$ref":"#/definitions/TagKeyValuesBean"},"type":"array"},"not_tags_any":{"description":"不包含任意标签,最多包含50个key,每个key下面的value最多10个, 每个key对应的value可以为空数组但结构体不能缺失。Key不能重复,同一个key中values不能重复。结果返回不包含标签的资源列表,key之间是或的关系,key-value结构中value是或的关系。无过滤条件时返回全量数据","items":{"$ref":"#/definitions/TagKeyValuesBean"},"type":"array"},"sys_tags":{"$ref":"#/definitions/TagKeyValuesBean","description":"仅op_service权限可以使用此字段做资源实例过滤条件。\n目前TMS调用时只包含一个tag结构体。\nkey:_sys_enterprise_project_id\nvalue:企业项目id列表\n目前TMS调用时,key下面只包含一个value。0表示默认企业项目\nsys_tags和租户标签过滤条件(without_any_tag 、tags、tags_any、not_tags、not_tags_any)不能同时使用\n无sys_tags时按照tag接口处理,无tag过滤条件时返回全量数据"},"tags":{"description":"包含标签,最多包含50个key,每个key下面的value最多10个,每个key对应的value可以为空数组但结构体不能缺失。Key不能重复,同一个key中values不能重复。结果返回包含所有标签的资源列表,key之间是与的关系,key-value结构中value是或的关系。无tag过滤条件时返回全量数据","items":{"$ref":"#/definitions/TagKeyValuesBean"},"type":"array"},"tags_any":{"description":"包含任意标签,最多包含50个key,每个key下面的value最多10个, 每个key对应的value可以为空数组但结构体不能缺失。Key不能重复,同一个key中values不能重复。结果返回包含标签的资源列表,key之间是或的关系,key-value结构中value是或的关系。无过滤条件时返回全量数据","items":{"$ref":"#/definitions/TagKeyValuesBean"},"type":"array"},"without_any_tag":{"description":"不包含任意一个标签,该字段为true时查询所有不带标签的资源,此时忽略 “tags”、“tags_any”、“not_tags”、“not_tags_any”字段","type":"boolean"}},"type":"object"},"TagKeyValuesBean":{"properties":{"key":{"description":"键。最大长度128个unicode字符。 key不能为空。(搜索时不对此参数做字符集校验),key不能为空或者空字符串,不能为空格,校验和使用之前先trim 前后半角空格","example":"key1","type":"string"},"values":{"description":"值列表。每个值最大长度255个unicode字符,校验和使用之前先trim 前后半角空格。\nvalue可为空数组但不可缺省。\n如果values为空列表,则表示any_value(查询任意value)。value之间为或的关系","example":["*value1","value2"],"items":{"type":"string"},"type":"array"}},"required":["key","values"],"type":"object"}},"description":null,"group_id":"0ba875db15a142babc14f069c8b7c4f6","host":"dbss.cn-north-4.myhuaweicloud.com","id":"4d1e1a2cd2b344b3ae92ffa66b154e18","info_version":"v1","method":"post","name":"ListResourceInstanceByTag","parameters":{},"paths":{"/v1/{project_id}/{resource_type}/resource-instances/filter":{"post":{"description":"根据标签查询资源实例列表","operationId":"ListResourceInstanceByTag","parameters":[{"description":"项目ID","in":"path","name":"project_id","required":true,"type":"string"},{"description":"资源类型。审计:auditInstance","in":"path","name":"resource_type","required":true,"type":"string"},{"description":"用户Token","in":"header","name":"X-Auth-Token","required":true,"type":"string"},{"description":"查询记录数(action为count时无此参数)如果action为filter默认为1000,limit最多为1000,不能为负数,最小值为1","in":"query","name":"limit","required":false,"type":"string"},{"description":"索引位置,偏移量(action为count时无此参数)从第一条数据偏移offset条数据后开始查询,如果action为filter默认为0(偏移0条数据,表示从第一条数据开始查询),必须为数字,不能为负数","in":"query","name":"offset","required":false,"type":"string"},{"description":"Tag请求Body体","in":"body","name":"ListResourceInstanceByTagRequestBody","required":true,"schema":{"$ref":"#/definitions/ResourceInstanceTagRequest"}}],"produces":["application/json"],"responses":{"200":{"description":"成功","examples":{"application/json":{"resources":[{"resource_detail":null,"resource_id":"cdfs_cefs_wesas_12_dsad","resource_name":"resouece1","sys_tags":[{"key":"_sys_enterprise_project_id","value":"5aa119a8-d25b-45a7-8d1b-88e127885635"}],"tags":[{"key":"key1","value":"value1"},{"key":"key2","value":"value1"}]}],"total_count":1000}},"schema":{"$ref":"#/definitions/ResourceInstanceResponse"}},"400":{"description":"失败","examples":{"application/json":{"error":{"error_code":"DBSS.XXXX","error_msg":"XXX"}}},"schema":{"$ref":"#/definitions/Error"}},"403":{"description":"认证失败","schema":{"$ref":"#/definitions/Error"}},"500":{"description":"服务端错误","schema":{"$ref":"#/definitions/Error"}}},"summary":"根据标签查询资源实例列表","tags":["标签相关接口"],"x-hc":"Y","x-hcso":"Y","x-hk":"Y","x-is-registered":"Y","x-open-region-cloud":"hc,hk,hcso,sbc","x-order":16,"x-request-examples-1":{"matches":[{"key":"resource_name","value":"resource1"}],"not_tags":[{"key":"key1","values":["*value1","value2"]}],"not_tags_any":[{"key":"key1","values":["value1","value2"]}],"sys_tags":[{"key":"_sys_enterprise_project_id","values":["5aa119a8-d25b-45a7-8d1b-88e127885635"]}],"tags":[{"key":"key1","values":["*value1","value2"]}],"tags_any":[{"key":"key1","values":["value1","value2"]}]},"x-request-examples-text-1":{"matches":[{"key":"resource_name","value":"resource1"}],"not_tags":[{"key":"key1","values":["*value1","value2"]}],"not_tags_any":[{"key":"key1","values":["value1","value2"]}],"sys_tags":[{"key":"_sys_enterprise_project_id","values":["5aa119a8-d25b-45a7-8d1b-88e127885635"]}],"tags":[{"key":"key1","values":["*value1","value2"]}],"tags_any":[{"key":"key1","values":["value1","value2"]}]},"x-request-examples-url-1":"/v1/{project_id}/{resource_type}/resource-instances/filter","x-sbc":"Y","x-support-sdk":"Y"}}},"product_short":"DBSS","region_id":"cn-north-4","schemes":["HTTPS"],"security_definitions":null,"summary":"根据标签查询资源实例列表","tags":"标签相关接口","uri":null,"version":"2.0"}