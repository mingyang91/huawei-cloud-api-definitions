{"base_path":"/","components":null,"consumes":"[\"application/json\"]","definitions":{"FieldSelector":{"description":"“字段选择器(Field selectors)”允许你根据一个或多个资源字段的值筛选 Kubernetes 对象","properties":{"key":{"description":"Key值","type":"string"},"operator":{"description":"操作符,仅支持取值\"In\"","type":"string"},"values":{"description":"Value值","items":{"type":"string"},"type":"array"}},"type":"object"},"InjectionConfig":{"description":"集群注入信息","properties":{"namespaces":{"$ref":"#/definitions/Selector","description":"需要注入的命名空间"}},"type":"object"},"InstallationConfig":{"properties":{"nodes":{"$ref":"#/definitions/Selector","description":"安装网格组件的节点"}},"type":"object"},"Mesh":{"properties":{"apiVersion":{"default":"v1","description":"API版本,固定值“v1”,该值不可修改","type":"string"},"kind":{"default":"Mesh","description":"API类型,固定值“Mesh”或“mesh”,该值不可修改","type":"string"},"metadata":{"$ref":"#/definitions/MeshMetadata","description":"网格的基本信息,为集合类的元素类型,包含一组由不同名称定义的属性"},"spec":{"$ref":"#/definitions/MeshSpec","description":"集合类的元素类型,您对需要管理的网格对象进行详细描述的主体部分都在spec中给出。ASM通过spec的描述来创建或更新对象"},"status":{"$ref":"#/definitions/MeshStatus","description":"集合类的元素类型,用于记录对象在系统中的当前状态信息。\n该对象为系统自动生成,不需要用户填写"}},"required":["apiVersion","kind","metadata","spec"],"type":"object"},"MeshCluster":{"properties":{"clusterID":{"description":"集群ID,资源唯一标识,通过该ID查询需要添加的集群","type":"string"},"injection":{"$ref":"#/definitions/InjectionConfig","description":"Sidecar注入配置"},"installation":{"$ref":"#/definitions/InstallationConfig","description":"网格组件安装配置"},"projectID":{"description":"集群所属的projectID","type":"string"}},"required":["clusterID","projectID","installation"],"type":"object"},"MeshExtendParams":{"properties":{"clusters":{"description":"网格内集群信息","items":{"$ref":"#/definitions/MeshCluster"},"type":"array"}},"type":"object"},"MeshMetadata":{"properties":{"annotations":{"additionalProperties":{"type":"string"},"description":"网格注解,由key/value组成:\n```\n\"annotations\": {\n   \"key1\" : \"value1\",\n   \"key2\" : \"value2\"\n}\n```","type":"object"},"creationTimestamp":{"description":"网格创建时间","format":"date-time","type":"string"},"labels":{"additionalProperties":{"type":"string"},"description":"网格标签,由key/value组成:\n\n\n```\n\n\"labels\": {\n   \"key1\" : \"value1\",\n   \"key2\" : \"value2\"\n}\n\n```","type":"object"},"name":{"description":"网格名称。\n命名规则:以小写字母开头,由小写字母、数字、中划线(-)组成,长度范围4-64位,且不能以中划线(-)结尾","type":"string"},"uid":{"description":"网格ID,资源唯一标识,创建成功后自动生成,填写无效","type":"string"}},"required":["name"],"type":"object"},"MeshSpec":{"description":"网格参数定义","properties":{"extendParams":{"$ref":"#/definitions/MeshExtendParams","description":"网格扩展信息","x-mesh-type":"基础版网格"},"tags":{"description":"网格资源标签","items":{"$ref":"#/definitions/MeshTags"},"type":"array","x-mesh-type":"基础版网格"},"type":{"description":"网格类型:\nInCluster: 集群内控制平面形态,基础版网格取值为InCluster","enum":["InCluster"],"type":"string"},"version":{"description":"网格版本","type":"string"}},"required":["region","type","version"],"type":"object"},"MeshStatus":{"properties":{"phase":{"description":"网格状态,取值如下\n- Running:运行中,表示网格处于正常运行状态\n- Creating:创建中,表示网格正处于创建过程中\n- CreateFailed:创建失败\n- Deleting:删除中,表示网格正处于删除过程中\n- DeleteFailed:删除失败\n- Upgrading:升级中,表示网格正处于升级过程中\n- UpgradeFailed:升级失败\n- RollingBack:回滚中,表示网格正处于回滚过程中\n- RollbackFailed:回滚失败","type":"string"}},"type":"object"},"MeshTags":{"description":"网格标签集合","properties":{"key":{"description":"Key值。\n\n不能为空,最多支持128个字符\n\n可用UTF-8格式表示的汉字、字母、数字和空格\n\n支持部分特殊字符:_.:/=+-@\n\n不能以\"_sys_\"开头","type":"string"},"value":{"description":"Value值。\n\n可以为空但不能缺省,最多支持255个字符\n\n可用UTF-8格式表示的汉字、字母、数字和空格\n\n支持部分特殊字符:_.:/=+-@","type":"string"}},"type":"object"},"Selector":{"description":"选择器","properties":{"fieldSelector":{"$ref":"#/definitions/FieldSelector","description":"字段选择器"}},"type":"object"}},"description":null,"group_id":"89ef1f81e9a8463a8105e2907d4f1754","host":"asm.cn-north-4.myhuaweicloud.com","id":"864572cc8f7e464893f19c2abf77253c","info_version":"v1","method":"post","name":"CreateMesh","parameters":{},"paths":{"/v1/meshes":{"post":{"description":"该API用于创建一个网格","operationId":"CreateMesh","parameters":[{"description":"网格创建请求体","in":"body","name":"MeshRequestBody","required":true,"schema":{"$ref":"#/definitions/Mesh"}},{"description":"消息体的类型(格式)","in":"header","name":"Content-Type","required":true,"type":"string"},{"description":"调用接口的认证方式分为Token和AK/SK两种,如果您使用的Token方式,此参数为必填,请填写Token的值","in":"header","name":"X-Auth-Token","required":true,"type":"string"},{"description":"网格所属ProjectID","in":"header","name":"X-Apply-ProjectID","required":false,"type":"string"}],"produces":["application/json"],"responses":{"201":{"description":"表示创建网格任务下发成功,开始创建网格","examples":{"application/json":{"apiVersion":"v1","kind":"Mesh","metadata":{"creationTimestamp":"2023-11-08T09:42:39Z","name":"mesh-test-api","uid":"2789682f-7e1b-11ee-9662-0255ac10080a"},"spec":{"extendParams":{"clusters":[{"clusterID":"8fd24567-6bc1-xxxx-xxxx-0255ac1001bf","installation":{"nodes":{"fieldSelector":{"key":"UID","operator":"In","values":["4c4b6ed1-6bf0-xxxx-xxxx-0255ac100b00"]}}},"projectID":"719217bc273743ea8d7ac1aexxxxxxxx"}]},"type":"InCluster","version":"1.15.7-r1"},"status":{"phase":"Creating"}}},"schema":{"$ref":"#/definitions/Mesh"}},"400":{"description":"用户提供的网格创建参数有问题,未通过校验"},"409":{"description":"需要创建的网格与现有网格冲突"},"500":{"description":"创建过程中出现问题"}},"summary":"创建网格","tags":["网格接口"],"x-api-type":"open-api","x-apiexplorer-hide":"false","x-constraint":"","x-is-registered":"Y","x-name":"创建网格","x-order":0,"x-request-examples-1":{"apiVersion":"v1","kind":"Mesh","metadata":{"name":"mesh-test-api"},"spec":{"extendParams":{"clusters":[{"clusterID":"8fd24567-6bc1-xxxx-xxxx-0255ac1001bf","installation":{"nodes":{"fieldSelector":{"key":"UID","operator":"In","values":["4c4b6ed1-6bf0-xxxx-xxxx-0255ac100b00"]}}},"projectID":"719217bc273743ea8d7ac1aexxxxxxxx"}]},"type":"InCluster","version":"1.15.7-r1"}},"x-request-examples-description-1":"创建网格","x-request-examples-text-1":{"apiVersion":"v1","kind":"Mesh","metadata":{"name":"mesh-test-api"},"spec":{"extendParams":{"clusters":[{"clusterID":"8fd24567-6bc1-xxxx-xxxx-0255ac1001bf","installation":{"nodes":{"fieldSelector":{"key":"UID","operator":"In","values":["4c4b6ed1-6bf0-xxxx-xxxx-0255ac100b00"]}}},"projectID":"719217bc273743ea8d7ac1aexxxxxxxx"}]},"type":"InCluster","version":"1.15.7-r1"}},"x-request-examples-url-1":"POST /v1/meshes","x-scope":"Commercial","x-support-sdk":"Y"}}},"product_short":"ASM","region_id":"cn-north-4","schemes":["HTTPS"],"security_definitions":null,"summary":"创建网格","tags":"网格接口","uri":null,"version":"2.0"}