{"base_path":"/","components":null,"consumes":"[\"application/json\"]","definitions":{"AccessConfig":{"description":"访问配置,与access_protocol直接关联","properties":{"auth_type":{"$ref":"#/definitions/ValueInAttributes","description":"OPC-UA协议下访问认证类型,value值字段可选为0、1、2、3"},"baud_rate":{"$ref":"#/definitions/ValueInAttributes","description":"RTU传输模式下波特率配置,value值字段可选50、75、110、150、200、300、1200、1800、2400、9600、19200、38400、57600、115200"},"certificate":{"$ref":"#/definitions/ValueInAttributes","description":"OPC-UA协议下,采用证书认证时证书字段,value字段为base64格式"},"data_bits":{"$ref":"#/definitions/ValueInAttributes","description":"RTU传输模式下数据位配置,value值字段包括5、6、7、8"},"ip":{"$ref":"#/definitions/ValueInAttributes","description":"TCP传输模式下访问ip地址(标准ipv4地址)"},"parity_bits":{"$ref":"#/definitions/ValueInAttributes","description":"RTU传输模式下校验位配置,value值字段可选为none、odd、even"},"password":{"$ref":"#/definitions/ValueInAttributes","description":"OPC-UA协议下,采用密码认证时密码字段"},"port":{"$ref":"#/definitions/ValueInAttributes","description":"TCP传输模式下访问端口(0-65535)"},"private_key":{"$ref":"#/definitions/ValueInAttributes","description":"OPC-UA协议下,采用证书认证时私钥字段,value字段为base64格式"},"protocol_name":{"$ref":"#/definitions/ValueInAttributes","description":"设备访问名称"},"protocol_type":{"$ref":"#/definitions/ValueInAttributes","description":"设备访问类型,包含:\n- userdefine:自定义访问协议\n- TCP:modbus访问协议中的一种访问形式\n- RTU:modbus访问协议中的一种访问形式\n- opc-ua:opc-ua访问协议"},"sec_mode":{"$ref":"#/definitions/ValueInAttributes","description":"OPC-UA协议下访问安全模式"},"sec_policy":{"$ref":"#/definitions/ValueInAttributes","description":"OPC-UA协议下访问安全策略"},"serial_port":{"$ref":"#/definitions/ValueInAttributes","description":"RTU传输模式下串口配置"},"slave_id":{"$ref":"#/definitions/ValueInAttributes","description":"Modbus设备访问id(0-255)"},"stop_bits":{"$ref":"#/definitions/ValueInAttributes","description":"RTU传输模式下停止位配置,value值字段包含1、2"},"timeout":{"$ref":"#/definitions/ValueInAttributes","description":"OPC-UA协议下访问超时配置,默认为5s"},"url":{"$ref":"#/definitions/ValueInAttributes","description":"OPC-UA协议下访问url地址"},"username":{"$ref":"#/definitions/ValueInAttributes","description":"OPC-UA协议下,采用密码认证时用户名字段"}},"required":["protocol_type"]},"CreateDevicesResp":{"description":"终端设备属性","properties":{"device":{"$ref":"#/definitions/Device"}},"required":["device"]},"Device":{"description":"终端设备属性","properties":{"access_config":{"$ref":"#/definitions/AccessConfig"},"access_protocol":{"description":"访问协议,有如下选项:\n- userdefine:自定义协议\n- modbus:modbus协议\n- opc-ua:opc-ua协议\n默认为userdefine","type":"string"},"attributes":{"additionalProperties":{"$ref":"#/definitions/ValueInAttributes"},"description":"终端设备静态属性信息","type":"object"},"connection_type":{"description":"连接类型,默认为edge","type":"string"},"created_at":{"description":"创建时间","type":"string"},"description":{"description":"终端设备描述,最大长度255,不允许^ ~ # $ % & * < > ( ) [ ] { } ' \" \\","type":"string"},"id":{"description":"终端设备ID,只允许英文字母、数字、下划线、中划线,必须以英文字母和数字开头,长度限制为24~64之间","type":"string"},"name":{"description":"终端设备名称,只允许中文字符、英文字母、数字、下划线、中划线,长度限制为1~64","type":"string"},"project_id":{"description":"项目ID","type":"string"},"property_visitors":{"additionalProperties":{"$ref":"#/definitions/ValueInPropertyVisitors"},"description":"孪生属性配置","type":"object"},"twin":{"additionalProperties":{"$ref":"#/definitions/ValueInTwinResponse"},"description":"终端设备孪生属性信息","type":"object"},"updated_at":{"description":"更新时间","type":"string"}},"required":["id","name","access_protocol","description","project_id","created_at","updated_at","attributes","connection_type","twin","access_config","property_visitors"]},"EdgemgrDevices":{"description":"终端设备属性","properties":{"device":{"$ref":"#/definitions/EdgemgrDevicesDetail"}},"required":["device"]},"EdgemgrDevicesDetail":{"description":"终端设备属性","properties":{"access_config":{"$ref":"#/definitions/AccessConfig","description":"访问配置,与access_protocol直接关联"},"access_protocol":{"description":"访问协议,有如下选项:\n- userdefine:自定义协议\n- modbus:modbus协议\n- opc-ua:opc-ua协议\n默认为userdefine","type":"string"},"attributes":{"additionalProperties":{"$ref":"#/definitions/ValueInAttributes"},"description":"终端设备静态属性","type":"object"},"connection_type":{"description":"连接类型,默认为edge","type":"string"},"description":{"description":"终端设备描述,最大长度255,不允许^ ~ # $ % & * < > ( ) [ ] { } ' \" \\","type":"string"},"id":{"description":"终端设备ID,只允许英文字母、数字、下划线、中划线,必须以英文字母和数字开头,长度限制为24~64之间","type":"string"},"name":{"description":"终端设备名称,只允许中文字符、英文字母、数字、下划线、中划线,长度限制为1~64","type":"string"},"property_visitors":{"additionalProperties":{"$ref":"#/definitions/ValueInPropertyVisitors"},"description":"孪生属性配置","type":"object"},"twin":{"additionalProperties":{"$ref":"#/definitions/ValueInTwin"},"description":"终端设备动态属性","type":"object"}},"required":["name"],"type":"object"},"Excepted":{"description":"动态属性的期望信息","properties":{"metadata":{"description":"期望值设置的时间信息","properties":{"type":{"description":"属性类型标识,string|int|float|boolean(boolean类型为true或false),默认为string","type":"string"}}},"value":{"description":"动态属性的初始值,最大长度512,value允许英文字母、数字、下划线、中划线、点、逗号、冒号、/、@、+、?、^、=、%、&、~、#、!、*","type":"string"}},"type":"object"},"ExceptedActual":{"description":"动态属性","properties":{"value":{"description":"动态属性的初始值,最大长度512,value允许英文字母、数字、下划线、中划线、点、逗号、冒号、/、@、+、?、^、=、%、&、~、#、!、*","type":"string"}}},"Metadata":{"description":"静态属性的元数据信息,默认为{\"type\": \"string\"}","properties":{"type":{"description":"属性类型标识,string|int|float|boolean(boolean类型为true或false),默认为string","type":"string"}},"type":"object"},"ValueInAttributes":{"description":"静态属性","properties":{"metadata":{"$ref":"#/definitions/Metadata","description":"静态属性的元数据信息,默认为{\"type\": \"string\"}"},"optional":{"description":"标识属性是否可选,默认为true","type":"boolean"},"value":{"description":"value 最大长度512,value允许英文字母、数字、下划线、中划线、点、逗号、冒号、/、@、+、?、^、=、%、&、~、#、!、*","type":"string"}},"required":["value"]},"ValueInPropertyVisitors":{"description":"孪生属性配置,与access_protocol关联。","properties":{"access_mode":{"$ref":"#/definitions/ValueInAttributes","description":"访问模式,value值字段可选为r和r/w"},"browse_name":{"$ref":"#/definitions/ValueInAttributes","description":"节点名称"},"data_max":{"$ref":"#/definitions/ValueInAttributes","description":"原始数据值区间最大值,与原始数据类型关联"},"data_min":{"$ref":"#/definitions/ValueInAttributes","description":"原始数据值区间最小值,与原始数据类型关联"},"expected_datatype":{"$ref":"#/definitions/ValueInAttributes","description":"期望数据类型"},"is_registerswap":{"$ref":"#/definitions/ValueInAttributes","description":"是否交换寄存器顺序"},"is_swap":{"$ref":"#/definitions/ValueInAttributes","description":"是否交换高低字节"},"node_id":{"$ref":"#/definitions/ValueInAttributes","description":"节点id"},"original_datatype":{"$ref":"#/definitions/ValueInAttributes","description":"原始数据类型"},"register_index":{"$ref":"#/definitions/ValueInAttributes","description":"寄存器偏移地址,value值字段取值范围0-65535"},"register_num":{"$ref":"#/definitions/ValueInAttributes","description":"寄存器个数"},"register_type":{"$ref":"#/definitions/ValueInAttributes","description":"寄存器类型,value值字段可选为CoilsRegisters、HoldingRegisters、DiscreteInputsRegisters、InputRegisters"},"sample_interval":{"$ref":"#/definitions/ValueInAttributes","description":"数据采集间隔,取值范围为1-3600"},"scale_index":{"$ref":"#/definitions/ValueInAttributes","description":"缩放因子"}}},"ValueInTwin":{"description":"终端设备动态属性","properties":{"excepted":{"$ref":"#/definitions/Excepted","description":"动态属性的期望信息"},"metadata":{"$ref":"#/definitions/metadata","description":"动态属性的元数据信息"},"optional":{"description":"动态属性的实际信息","type":"boolean"}},"type":"object"},"ValueInTwinResponse":{"description":"终端设备静态属性信息","properties":{"actual":{"$ref":"#/definitions/ExceptedActual","description":"动态属性的实际信息"},"excepted":{"$ref":"#/definitions/ExceptedActual","description":"动态属性的期望信息"},"metadata":{"$ref":"#/definitions/Metadata","description":"动态属性的元数据信息"},"optional":{"description":"标识属性是否可选,默认为true,继承模板的属性默认为false","type":"boolean"}}},"metadata":{"properties":{"type":{"description":"属性类型标识,string|int|float|boolean(boolean类型为true或false),默认为string","type":"string"}},"type":"object"}},"description":null,"group_id":"cdaa2d3f4fbb4dc38b6a6c55f9222ed9","host":"ief.cn-north-4.myhuaweicloud.com","id":"f5ecae6928ca4bdaae90c92d2284005d","info_version":"v1","method":"post","name":"CreateDevice","parameters":{"Content-Type":{"description":"消息体的类型(格式),默认取值为“application/json”","in":"header","name":"Content-Type","required":true,"type":"string"},"IEF-Instance-Id":{"description":"铂金版实例ID,专业版实例为空值","in":"header","name":"ief-instance-id","required":false,"type":"string"},"X-Auth-Token":{"description":"用户Token。\n通过调用IAM服务获取用户Token接口获取(响应消息头中X-Subject-Token的值)。","in":"header","name":"X-Auth-Token","required":true,"type":"string","x-example":"MIIDkgYJKoZIhvcNAQcCoIIDgzCCXXXXXX..."}},"paths":{"/v2/{project_id}/edgemgr/devices":{"post":{"consumes":["application/json"],"description":"注册终端设备。","operationId":"CreateDevice","parameters":[{"$ref":"#/parameters/Content-Type"},{"$ref":"#/parameters/X-Auth-Token"},{"$ref":"#/parameters/IEF-Instance-Id"},{"description":"项目ID","in":"path","name":"project_id","required":true,"type":"string"},{"description":"终端设备信息","in":"body","name":"CreateDevice","required":true,"schema":{"$ref":"#/definitions/EdgemgrDevices"}}],"produces":["application/json"],"responses":{"201":{"description":"ok","examples":{"application/json":{"device":{"access_config":{},"access_protocol":"","connection_type":"edge","created_at":"2020-09-23T02:00:22.858736Z","description":"","id":"1398f13d-f24d-4de4-8cd3-5905db1d6d9f","name":"device","project_id":"05e1aef9040010e22fccc009adecb056","updated_at":""}}},"schema":{"$ref":"#/definitions/CreateDevicesResp"}}},"summary":"注册终端设备","tags":["终端设备管理"],"x-is-registered":"Y","x-publishpath":"ief_02_0027","x-request-examples-1":{"device":{"access_protocol":"userdefine","connection_type":"edge","description":"","name":"device"}},"x-request-examples-description-1":"注册终端设备,自定义访问协议,连接类型为“edge”。","x-request-examples-text-1":{"device":{"access_protocol":"userdefine","connection_type":"edge","description":"","name":"device"}},"x-support-sdk":"Y"}}},"product_short":"IEF","region_id":"cn-north-4","schemes":["HTTPS"],"security_definitions":null,"summary":"注册终端设备","tags":"终端设备管理","uri":null,"version":"2.0"}