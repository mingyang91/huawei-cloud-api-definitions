{"base_path":"/","components":null,"consumes":"[\"application/json\"]","definitions":{"AppConfigs":{"description":"应用模板网络参数配置","properties":{"dns_policy":{"description":"应用实例DNS策略,可选值Default、ClusterFirst、ClusterFirstWithHostNet,默认为Default。应用实例启用主机网络时只能选填Default、ClusterFirstWithHostNet,不启用主机网络时只能选填Default、ClusterFirst","type":"string"},"host_network":{"description":"默认为true,其中true表示主机网络,而false表示端口映射","type":"boolean"},"host_pid":{"description":"应用实例是否与主机共PID命名空间,默认值false","type":"boolean"},"ports":{"description":"容器端口映射值","items":{"$ref":"#/definitions/Ports"},"type":"array"},"privileged":{"description":"默认为false,表示是否开启特权模式","type":"boolean"},"restart_policy":{"description":"应用实例重启模式:\n- Always:当容器终止退出后,总是重启容器\n- Onfailure:容器异常退出(退出码非0)时才重启容器\n- Never:容器终止退出后,不重启容器","type":"string"},"run_as_user":{"description":"容器运行用户ID,输入范围为0~65534的整数","type":"integer"}},"type":"object"},"AppVersionDetail":{"description":"app详情","properties":{"arch":{"description":"架构","type":"string"},"args":{"description":"参数","items":{"type":"string"},"type":"array"},"command":{"description":"启动命令","items":{"type":"string"},"type":"array"},"configs":{"$ref":"#/definitions/AppConfigs","description":"容器特殊参数"},"created_at":{"description":"创建时间","type":"string"},"envs":{"description":"环境变量","items":{"$ref":"#/definitions/Env"},"type":"array"},"id":{"description":"应用版本ID","type":"string"},"image_url":{"description":"镜像存储地址","type":"string"},"liveness_probe":{"$ref":"#/definitions/ProbeDetail","description":"工作负载存活探针"},"npu_type":{"description":"NPU芯片类型,可填:D310,D910","type":"string"},"project_id":{"description":"项目ID","type":"string"},"readiness_probe":{"$ref":"#/definitions/ProbeDetail","description":"工作负载业务探针"},"resources":{"$ref":"#/definitions/Resources"},"updated_at":{"description":"更新时间\n只有更新后才会出现该字段","type":"string"},"version":{"description":"应用版本号","type":"string"},"volumes":{"description":"卷配置","items":{"$ref":"#/definitions/Volumes"},"type":"array"}},"required":["envs","volumes"],"type":"object"},"ConfigsMap":{"description":"环境变量引用配置项时使用。","properties":{"key":{"description":"配置项的属性名","type":"string"},"name":{"description":"配置项的名称","type":"string"}},"required":["name","key"]},"Env":{"description":"环境变量","properties":{"field_path":{"description":"该参数目前只支持赋值\"status.hostIP\",即引用边缘节点的IP地址作为环境变量。","type":"string"},"name":{"description":"环境变量的key,由大小写字母或下划线开头,由数字、大小写字母、下划线组成,最大长度2048个字符,不允许重复","type":"string"},"value":{"description":"环境变量的value,最大长度20480个字符。value、value_from和field_path必须三选一使用。","type":"string"},"value_from":{"$ref":"#/definitions/ValueFrom","description":"环境变量可使用配置项和密钥导入"}},"required":["name"]},"HttpGetDetail":{"description":"执行http探测","properties":{"host":{"description":"请求的主机地址,默认为容器IP","type":"string"},"path":{"description":"必须要以/开头,构造结果为:协议类型://主机地址:端口路径","type":"string"},"port":{"description":"探测的http端口,1到65535之间的整数","format":"int32","type":"integer"},"scheme":{"description":"协议类型,HTTP或HTTPS,默认HTTP","type":"string"}},"required":["path","port"]},"LimitsRequests":{"description":"资源配置限制","properties":{"cpu":{"description":"cpu核数,大于等于0.01,最大1000;请求不需要带单位","format":"float","type":"number"},"gpu":{"description":"Gpu显存大小,单位兆,大于等于0.01,最大1024000;请求不需要带单位","format":"float","type":"number"},"memory":{"description":"内存大小,单位兆,大于等于0.01,最大1024000。注意:内存的limits值最小为4;请求不需要带单位","format":"float","type":"number"},"npu":{"description":"Npu个数,大于0,最大1000;请求不需要带单位","type":"integer"}}},"Ports":{"description":"容器端口映射值","properties":{"container_port":{"description":"构成一堆映射的容器端口","format":"int32","type":"integer"},"host_ip":{"description":"对应网卡地址","type":"string"},"host_port":{"description":"构成一对映射的物理机对应网卡端口","format":"int32","type":"integer"}}},"ProbeDetail":{"description":"探针配置","properties":{"exec_command":{"description":"执行探测的命令行命令,长度1-10240内的字符串","type":"string"},"http_get":{"$ref":"#/definitions/HttpGetDetail","description":"执行http探测"},"initial_delay_seconds":{"description":"表示从工作负载启动后从多久开始探测,大于0且不大于3600的整数,默认为10","format":"int32","type":"integer"},"timeout_seconds":{"description":"表示探测超时时间,大于0且不大于3600的整数,默认为1","format":"int32","type":"integer"}}},"Resources":{"description":"容器使用的资源","properties":{"limits":{"$ref":"#/definitions/LimitsRequests","description":"允许容器使用的最大资源"},"requests":{"$ref":"#/definitions/LimitsRequests","description":"容器需要使用的最小资源"}}},"Secrets":{"description":"环境变量引用密钥时使用。使用ValueFrom时,secret与configmap必须二选一。","properties":{"key":{"description":"密钥的属性名","type":"string"},"name":{"description":"密钥的名称","type":"string"}},"required":["name","key"]},"ValueFrom":{"properties":{"configmap":{"$ref":"#/definitions/ConfigsMap"},"secret":{"$ref":"#/definitions/Secrets"}}},"Version":{"description":"应用模板版本","properties":{"version":{"$ref":"#/definitions/VersionDetail"}},"required":["version"]},"VersionDetail":{"description":"应用模板版本配置","properties":{"arch":{"description":"架构","type":"string"},"args":{"description":"参数","items":{"type":"string"},"type":"array"},"command":{"description":"启动命令","items":{"type":"string"},"type":"array"},"configs":{"$ref":"#/definitions/AppConfigs","description":"容器特殊参数"},"envs":{"description":"环境变量","items":{"$ref":"#/definitions/Env"},"type":"array"},"image_url":{"description":"镜像存储地址","type":"string"},"liveness_probe":{"$ref":"#/definitions/ProbeDetail","description":"工作负载存活探针"},"npu_type":{"description":"NPU类型,支持D310类型和D910类型。\n- D310表示D310类型。\n- D910表示D910类型。\n- 不填表示为D310类型。","type":"string"},"readiness_probe":{"$ref":"#/definitions/ProbeDetail","description":"工作负载业务探针"},"resources":{"$ref":"#/definitions/Resources","description":"资源配额"},"version":{"description":"应用版本号","type":"string"},"volumes":{"description":"卷配置","items":{"$ref":"#/definitions/Volumes"},"type":"array"}},"required":["version","image_url"]},"VersionResp":{"description":"应用模板版本","properties":{"version":{"$ref":"#/definitions/AppVersionDetail"}},"required":["version"]},"Volumes":{"description":"卷配置","properties":{"destination":{"description":"卷挂载路径,必须是合法的路径","type":"string"},"name":{"description":"卷名称,小写字母或数字,最长63个字符","type":"string"},"read_only":{"description":"读写权限,configMap和secret类型只支持读权限","type":"boolean"},"source":{"description":"卷来源,type为hostPath时输入路径,要求以/开头,后面可包含中划线,反斜杠,下划线,点号,字母,数字; secret时输入secret名称,configMap时输入configMap名称,emptyDir时输入disk或memory","type":"string"},"type":{"description":"卷的类型,支持configMap,secret,emptyDir,hostPath","type":"string"}},"required":["name","type","source","destination"],"type":"object"}},"description":null,"group_id":"cdaa2d3f4fbb4dc38b6a6c55f9222ed9","host":"ief.cn-north-4.myhuaweicloud.com","id":"8d600f92a79b45b9b7212328de9f1a25","info_version":"v1","method":"post","name":"CreateAppVersions","parameters":{"Content-Type":{"description":"消息体的类型(格式),默认取值为“application/json”","in":"header","name":"Content-Type","required":true,"type":"string"},"IEF-Instance-Id":{"description":"铂金版实例ID,专业版实例为空值","in":"header","name":"ief-instance-id","required":false,"type":"string"},"X-Auth-Token":{"description":"用户Token。\n通过调用IAM服务获取用户Token接口获取(响应消息头中X-Subject-Token的值)。","in":"header","name":"X-Auth-Token","required":true,"type":"string","x-example":"MIIDkgYJKoZIhvcNAQcCoIIDgzCCXXXXXX..."}},"paths":{"/v2/{project_id}/edgemgr/apps/{app_id}/versions":{"post":{"consumes":["application/json"],"description":"创建一个应用模板版本","operationId":"CreateAppVersions","parameters":[{"$ref":"#/parameters/Content-Type"},{"$ref":"#/parameters/X-Auth-Token"},{"$ref":"#/parameters/IEF-Instance-Id"},{"description":"项目ID","in":"path","name":"project_id","required":true,"type":"string"},{"description":"应用模板ID","in":"path","name":"app_id","required":true,"type":"string"},{"description":"应用模板版本","in":"body","name":"version","required":true,"schema":{"$ref":"#/definitions/Version"}}],"produces":["application/json"],"responses":{"201":{"description":"ok","examples":{"application/json":{"version":{"configs":{"host_network":true,"privileged":true,"restart_policy":"Always"},"created_at":"2018-07-16T14:16:28","envs":[{"name":"key","value":"name"}],"id":"9537b861-f4e0-40e5-8b79-da842e0d3ea2","image_url":"edge-demo-app:latest","npu_type":"","project_id":"{project_id}","resources":{"limits":{"cpu":0.1,"gpu":3.9,"memory":1024},"requests":{"cpu":0.1,"gpu":3.9,"memory":1024}},"updated_at":null,"version":"v2","volumes":[{"destination":"/tmp0","name":"test","read_only":true,"source":"/tmp","type":"hostPath"}]}}},"schema":{"$ref":"#/definitions/VersionResp"}}},"summary":"创建应用模板版本","tags":["应用模板管理"],"x-is-registered":"Y","x-publishpath":"ief_02_0048","x-request-examples-1":{"version":{"configs":{"host_network":true,"privileged":true,"restart_policy":"Always"},"envs":[{"name":"key","value":"name"}],"image_url":"edge-demo-app:latest","resources":{"limits":{"cpu":0.1,"gpu":3.9,"memory":1024},"requests":{"cpu":0.1,"gpu":3.9,"memory":1024}},"version":"v2","volumes":[{"destination":"/tmp0","name":"test","read_only":true,"source":"/tmp","type":"hostPath"}]}},"x-request-examples-description-1":"创建一个应用模板版本,版本号为v2,镜像地址为“edge-demo-app:latest”,存储卷类型为hostPath,容器网络为主机网络。","x-request-examples-text-1":{"version":{"configs":{"host_network":true,"privileged":true,"restart_policy":"Always"},"envs":[{"name":"key","value":"name"}],"image_url":"edge-demo-app:latest","resources":{"limits":{"cpu":0.1,"gpu":3.9,"memory":1024},"requests":{"cpu":0.1,"gpu":3.9,"memory":1024}},"version":"v2","volumes":[{"destination":"/tmp0","name":"test","read_only":true,"source":"/tmp","type":"hostPath"}]}},"x-support-sdk":"Y"}}},"product_short":"IEF","region_id":"cn-north-4","schemes":["HTTPS"],"security_definitions":null,"summary":"创建应用模板版本","tags":"应用模板管理","uri":null,"version":"2.0"}