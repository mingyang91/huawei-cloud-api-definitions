{"base_path":"/","components":null,"consumes":"[\"application/json;charset=UTF-8\"]","definitions":{"ErrorMessageInfo":{"description":"错误信息","properties":{"code":{"description":"错误码","type":"string"},"message":{"description":"错误信息","type":"string"}},"required":["code","message"]},"FailResponseBody":{"description":"请求失败响应体","properties":{"error":{"$ref":"#/definitions/ErrorMessageInfo","description":"请求失败响应体","example":"{ \"error\": {\"message\": \"string.\", \"code\": \"string\" } }"}},"required":["error"]},"JobResultBody":{"description":"异步任务响应体","properties":{"job_id":{"description":"异步任务ID。","example":"4010a32b5f909853015f90aaa24b0015","type":"string"}},"required":["job_id"]},"RegisterImageRequestBody":{"description":"镜像上传请求体","properties":{"image_url":{"description":"源镜像的URL,格式:<bucket>:<file>\nimage_url对应的镜像桶中的文件,镜像文件格式的取值范围为:ZVHD、QCOW2、VHD、RAW、VHDX、QED、VDI、QCOW、ZVHD2、VMDK。","type":"string"}},"required":["image_url"]}},"description":null,"group_id":"15afdecd4f8c4fd88190ef8e57094cd5","host":"ims.cn-north-4.myhuaweicloud.com","id":"87e95077517145d1a988cdca31b64926","info_version":"v2","method":"put","name":"RegisterImage","parameters":{},"paths":{"/v1/cloudimages/{image_id}/upload":{"put":{"consumes":[],"deprecated":false,"description":"该接口用于将镜像文件注册为云平台未初始化的私有镜像。\n使用该接口注册镜像的具体步骤如下:\n将镜像文件上传到OBS个人桶中。具体操作请参见《对象存储服务客户端指南(OBS Browser)》或《对象存储服务API参考》。\n使用创建镜像元数据接口创建镜像元数据。调用成功后,保存该镜像的ID。创建镜像元数据请参考创建镜像元数据(OpenStack原生)。\n根据2得到的镜像ID,使用注册镜像接口注册OBS桶中的镜像文件。\n注册镜像接口作为异步接口,调用成功后,说明后台收到了注册请求。需要根据镜像ID查询该镜像状态验证镜像注册是否成功。当镜像状态变为“active”时,表示镜像注册成功。\n如何查询异步任务,请参见异步任务查询。","operationId":"RegisterImage","parameters":[{"description":"用户Token,使用Token认证时该字段必选。","in":"header","name":"X-Auth-Token","required":false,"type":"string","x-order":1},{"description":"请求参数","in":"body","name":"bodyparam","required":true,"schema":{"$ref":"#/definitions/RegisterImageRequestBody"},"x-order":2},{"description":"镜像ID。\nimage_id为用户调用创建镜像元数据接口所创建出来镜像的id,使用其他方式创建的镜像id会导致注册失败。\n注册接口调用成功后,请根据镜像id查询镜像的状态。镜像状态变为active表示镜像注册成功,详情请参见查询镜像详情(OpenStack原生)。","in":"path","name":"image_id","required":true,"type":"string","x-order":3}],"produces":[],"responses":{"200":{"description":"正常","examples":{"application/json":{"job_id":" b912fb4a4c464b568ecfca1071b21b10"}},"schema":{"$ref":"#/definitions/JobResultBody"}},"400":{"description":"Bad Request  请求错误。","schema":{"$ref":"#/definitions/FailResponseBody"}},"401":{"description":"Unauthorized  鉴权失败。","schema":{"$ref":"#/definitions/FailResponseBody"}},"403":{"description":"Forbidden  没有操作权限。","schema":{"$ref":"#/definitions/FailResponseBody"}},"404":{"description":"Not Found  找不到资源。","schema":{"$ref":"#/definitions/FailResponseBody"}}},"summary":"注册镜像","tags":["镜像"],"x-apiexplorer-hide":"","x-apigateway-auth-type":"IAM","x-apigateway-match-mode":"NORMAL","x-apigateway-request-type":"public","x-call_frequency":"medium","x-constraint":"","x-ctc":"Y","x-first_open_time":"2016-09-30","x-flow_control_group":"glance21","x-hc":"Y","x-hcso":"","x-hk":"Y","x-hybridcloud":true,"x-in_cli":"","x-is_calling":"Y","x-is_registered":"Y","x-multi_tenant_flow_time":5,"x-multi_tenant_flow_value":40,"x-name":"注册镜像","x-obc":"Y","x-open-region-cloud":"hc,hk","x-order":7,"x-otc":"Y","x-publishpath":"","x-request-examples-1":{"image_url":"bucketname:Centos6.5-disk1.vmdk"},"x-request-examples-description-1":"","x-request-examples-text-1":"{\n   \"image_url\": \"bucketname:Centos6.5-disk1.vmdk\" \n}\n","x-request-examples-url-1":"PUT https://{Endpoint}/v1/cloudimages/4ca46bf1-5c61-48ff-b4f3-0ad4e5e3ba86/upload","x-sbc":"","x-scope":"Commercial","x-source":"SelfDeveloped","x-source_url":"","x-support-sdk":"Y","x-tenant_flow_time":5,"x-tenant_flow_value":15,"x-timeout":"200s","x-tlf":"Y","x-un_cli":"","x-version":"v1"}}},"product_short":"IMS","region_id":"cn-north-4","schemes":["HTTPS"],"security_definitions":null,"summary":"注册镜像","tags":"镜像","uri":null,"version":"2.0"}