{"base_path":"/","components":null,"consumes":"[\"application/json;charset=UTF-8\"]","definitions":{"CreateWholeImageRequestBody":{"properties":{"backup_id":{"description":"使用云服务器备份创建整机镜像使用此参数且必填。\n如果使用ECS创建整机镜像,则该参数应传为instance_id。\n非必填的原因是需要兼容“使用备份创建整机镜像”和“使用弹性云服务器制作整机镜像”两种场景的body体。","type":"string"},"description":{"description":"镜像描述信息。\n支持字母、数字、中文等,不支持回车、<、 >,长度不能超过1024个字符。","example":"弹性云服务器制作镜像","maxLength":1024,"minLength":0,"type":"string"},"enterprise_project_id":{"default":"0","description":"表示当前镜像所属的企业项目。取值为0或无该值,表示属于default企业项目。取值为UUID,表示属于该UUID对应的企业项目。关于企业项目ID的获取及企业项目特性的详细信息,请参考《企业管理用户指南》。","type":"string"},"image_tags":{"description":"新规范的镜像标签列表。默认为空。tags和image_tags只能使用一个。","items":{"$ref":"#/definitions/TagKeyValue"},"type":"array"},"instance_id":{"description":"弹性云服务器ID。使用弹性云服务器制作整机镜像时使用此参数且必填。\n如果使用备份创建整机镜像,该参数应换成backup_id。\n非必填的原因是需要兼容“使用备份创建整机镜像”和“使用弹性云服务器制作整机镜像”两种场景的body体。","type":"string"},"max_ram":{"description":"表示镜像支持的最大内存,单位为MB,默认不设置。","format":"int32","type":"integer"},"min_ram":{"default":0,"description":"表示镜像支持的最小内存,单位为MB,默认为0。","format":"int32","type":"integer"},"name":{"description":"镜像名称。\n名称的首尾字母不能为空格。\n名称的长度至为1~128位。\n名称包含以下4种字符:\n大写字母\n小写字母\n数字\n特殊字符包含-、.、_、空格和中文。","example":"instance_whole_image","maxLength":128,"minLength":1,"type":"string"},"tags":{"description":"镜像标签列表。tags和image_tags只能使用一个。","items":{"type":"string"},"type":"array"},"vault_id":{"description":"表示云服务器待加入的或已加入的存储库的ID。\n使用云服务器创建整机镜像的过程为:先创建一个备份,再将备份创建为整机镜像。如果这个备份为CBR,vault_id为必填项;如果备份为CSBS,vault_id参数可不填。","type":"string"},"whole_image_type":{"description":"使用备份创建整机镜像时,该字段区分是CBR服务的备份还是CSBS服务的备份,取值为:CBR/CSBS。\n使用ECS创建整机镜像时,该字段不填","type":"string"}},"required":["name"]},"ErrorMessageInfo":{"description":"错误信息","properties":{"code":{"description":"错误码","type":"string"},"message":{"description":"错误信息","type":"string"}},"required":["code","message"]},"FailResponseBody":{"description":"请求失败响应体","properties":{"error":{"$ref":"#/definitions/ErrorMessageInfo","description":"请求失败响应体","example":"{ \"error\": {\"message\": \"string.\", \"code\": \"string\" } }"}},"required":["error"]},"JobResultBody":{"description":"异步任务响应体","properties":{"job_id":{"description":"异步任务ID。","example":"4010a32b5f909853015f90aaa24b0015","type":"string"}},"required":["job_id"]},"TagKeyValue":{"description":"镜像标签","properties":{"key":{"description":"标签的键","example":"key1","type":"string"},"value":{"description":"标签的值","example":"value","type":"string"}},"required":["key","value"]}},"description":null,"group_id":"15afdecd4f8c4fd88190ef8e57094cd5","host":"ims.cn-north-4.myhuaweicloud.com","id":"ab427dff2ab94f138dedd7e49936e05f","info_version":"v2","method":"post","name":"CreateWholeImage","parameters":{},"paths":{"/v1/cloudimages/wholeimages/action":{"post":{"consumes":[],"deprecated":false,"description":"使用云服务器或者云服务器备份制作整机镜像。作为异步接口,调用成功,只是说明后台收到了制作整机镜像的请求,镜像是否制作成功需要通过异步任务查询接口查询该任务的执行状态,具体请参考异步任务查询。","operationId":"CreateWholeImage","parameters":[{"description":"请求参数","in":"body","name":"ECSmakewholeimagebody","required":true,"schema":{"$ref":"#/definitions/CreateWholeImageRequestBody"},"x-order":1},{"description":"用户Token,使用Token认证时该字段必选。","in":"header","name":"X-Auth-Token","required":false,"type":"string","x-order":2}],"produces":[],"responses":{"200":{"description":"正常","examples":{"application/json":{"job_id":"4010a32b5f909853015f90aaa24b0015"}},"schema":{"$ref":"#/definitions/JobResultBody"}},"400":{"description":"Bad Request  请求错误。","schema":{"$ref":"#/definitions/FailResponseBody"}},"401":{"description":"Unauthorized  鉴权失败。","schema":{"$ref":"#/definitions/FailResponseBody"}},"403":{"description":"Forbidden  没有操作权限。","schema":{"$ref":"#/definitions/FailResponseBody"}},"404":{"description":"Not Found  找不到资源。","schema":{"$ref":"#/definitions/FailResponseBody"}},"500":{"description":"Internal Server Error  服务内部错误。","schema":{"$ref":"#/definitions/FailResponseBody"}},"503":{"description":"Service Unavailable  服务不可用。","schema":{"$ref":"#/definitions/FailResponseBody"}}},"summary":"制作整机镜像","tags":["镜像"],"x-apiexplorer-hide":"","x-apigateway-auth-type":"IAM","x-apigateway-match-mode":"NORMAL","x-apigateway-request-type":"public","x-call_frequency":"medium","x-constraint":"**使用云服务器制作整机镜像**\n创建整机镜像时,请根据提示优化云服务器,否则可能导致整机镜像创建云服务器失败。\n使用云服务器制作整机镜像时,云服务器应处于开机或者关机状态。\n使用Windows操作系统云服务器制作整机镜像时,不允许云服务器存在跨区卷,否则制作的整机镜像创建云服务器时可能会导致数据丢失。\n使用Linux操作系统云服务器制作整机镜像时,不允许云服务器存在由多个物理卷组成的卷组、或由多个物理卷组成的逻辑卷,否则制作的整机镜像创建云服务器时可能会造成数据丢失。\n使用云服务器创建整机镜像的时候不能卸载系统卷。\n整机镜像不能发布为市场镜像。\n整机镜像不允许导出。\n整机镜像仅支持跨区域复制。\n使用Windows操作系统云服务器制作整机镜像时,需修改云服务器SAN策略为OnlineAll类型。否则可能导致使用镜像创建云服务器时,云服务器磁盘处于脱机状态。\nWindows操作系统SAN策略分为三种类型:OnlineAll,OfflineShared,OfflineInternal\n**使用云备份制作整机镜像**\n创建整机镜像前,请确保创建该云备份的弹性云服务器已完成优化,否则可能导致整机镜像创建云服务器失败。\n使用云服务器备份创建整机镜像时,不允许云服务器备份存在共享卷。\n每个云备份只能创建一个整机镜像。\n仅通过云备份创建的整机镜像才能共享给其他租户。\n整机镜像不能发布为市场镜像。\n整机镜像不允许导出。\n整机镜像仅支持跨区域复制。\n**使用云服务器备份制作整机镜像**\n创建整机镜像时,请确保创建该云服务器备份的弹性云服务器已完成优化,否则可能导致整机镜像创建云服务器失败。\n使用云服务器备份创建整机镜像时,不允许云服务器备份存在共享卷。\n使用云服务器备份创建整机镜像时,云服务器备份必须是可用状态,且每个云服务器备份只能创建一个整机镜像。\n整机镜像不能发布为市场镜像。\n整机镜像不允许导出。\n整机镜像仅支持跨区域复制。","x-ctc":"Y","x-first_open_time":"2017-09-30","x-flow_control_group":"glance35","x-hc":"Y","x-hcso":"","x-hk":"Y","x-hybridcloud":true,"x-in_cli":"","x-is_calling":"Y","x-is_registered":"Y","x-multi_tenant_flow_time":5,"x-multi_tenant_flow_value":1000,"x-name":"制作整机镜像","x-obc":"Y","x-open-region-cloud":"hc,hk","x-order":9,"x-otc":"Y","x-publishpath":"","x-request-examples-1":{"backup_id":"877a2cda-ba63-4e1e-b95f-e67e48b6129a","description":"云服务器备份制作镜像","enterprise_project_id":"string","image_tags":["string"],"name":"instance_whole_image","tags":["string"],"whole_image_type":"CBR"},"x-request-examples-2":{"description":"云服务器制作镜像","instance_id":"877a2cda-ba63-4e1e-b95f-e67e48b6129a","name":"instance_whole_image","tags":["aaa.111","bbb.333","ccc.444"],"vault_id":"de9fcf45-11b2-432c-8562-5c5428574600"},"x-request-examples-3":{"description":"云服务器制作镜像","instance_id":"877a2cda-ba63-4e1e-b95f-e67e48b6129a","name":"instance_whole_image","tags":["aaa.111","bbb.333","ccc.444"],"vault_id":"de9fcf45-11b2-432c-8562-5c5428574600"},"x-request-examples-4":{"backup_id":"877a2cda-ba63-4e1e-b95f-e67e48b6129a","description":"云服务器备份制作镜像","enterprise_project_id":"string","image_tags":["string"],"name":"instance_whole_image","tags":["string"],"whole_image_type":"CBR"},"x-request-examples-description-1":"使用云服务器备份或云备份和image_tags制作整机镜像","x-request-examples-description-2":"使用云服务器和tag制作整机镜像","x-request-examples-description-3":"使用云服务器和image_tags制作整机镜像","x-request-examples-description-4":"使用云服务器备份或云备份和tag制作整机镜像","x-request-examples-text-1":"{\n  \"description\": \"云服务器备份制作镜像\",\n  \"enterprise_project_id\": \"string\",\n  \"image_tags\": [\n    \"string\"\n  ],\n  \"backup_id\": \"877a2cda-ba63-4e1e-b95f-e67e48b6129a\",\n  \"name\": \"instance_whole_image\",\n  \"whole_image_type\":\"CBR\",\n  \"tags\": [\n    \"string\"\n  ]\n}","x-request-examples-text-2":"{\n       \"name\": \"instance_whole_image\",\n       \"description\": \"云服务器制作镜像\",\n       \"instance_id\": \"877a2cda-ba63-4e1e-b95f-e67e48b6129a\",\n       \"vault_id\": \"de9fcf45-11b2-432c-8562-5c5428574600\",\n       \"tags\": [\n           \"aaa.111\",\n           \"bbb.333\",\n           \"ccc.444\"\n       ]\n}\n","x-request-examples-text-3":"{\n       \"name\": \"instance_whole_image\",\n       \"description\": \"云服务器制作镜像\",\n       \"instance_id\": \"877a2cda-ba63-4e1e-b95f-e67e48b6129a\",\n       \"vault_id\": \"de9fcf45-11b2-432c-8562-5c5428574600\",\n       \"tags\": [\n           \"aaa.111\",\n           \"bbb.333\",\n           \"ccc.444\"\n       ]\n}\n","x-request-examples-text-4":"{\n  \"description\": \"云服务器备份制作镜像\",\n  \"enterprise_project_id\": \"string\",\n  \"image_tags\": [\n    \"string\"\n  ],\n  \"backup_id\": \"877a2cda-ba63-4e1e-b95f-e67e48b6129a\",\n  \"name\": \"instance_whole_image\",\n  \"whole_image_type\":\"CBR\",\n  \"tags\": [\n    \"string\"\n  ]\n}","x-request-examples-url-1":"POST https://{Endpoint}/v1/cloudimages/wholeimages/action","x-request-examples-url-2":"POST https://{Endpoint}/v1/cloudimages/wholeimages/action","x-request-examples-url-3":"POST https://{Endpoint}/v1/cloudimages/wholeimages/action","x-request-examples-url-4":"POST https://{Endpoint}/v1/cloudimages/wholeimages/action","x-sbc":"","x-scope":"Commercial","x-source":"SelfDeveloped","x-source_url":"","x-support-sdk":"Y","x-tenant_flow_time":2,"x-tenant_flow_value":20,"x-timeout":"200s","x-tlf":"Y","x-un_cli":"","x-version":"v1"}}},"product_short":"IMS","region_id":"cn-north-4","schemes":["HTTPS"],"security_definitions":null,"summary":"制作整机镜像","tags":"镜像","uri":null,"version":"2.0"}