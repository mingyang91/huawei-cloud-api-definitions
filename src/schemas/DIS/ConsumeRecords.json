{"base_path":"/","components":null,"consumes":"[\"application/json;charset=UTF-8\"]","definitions":{"GetRecordsResult":{"properties":{"next_partition_cursor":{"description":"下一个迭代器。\n\n说明:\n\n数据游标有效期为5分钟。","type":"string"},"records":{"description":"下载的记录列表。","items":{"$ref":"#/definitions/Record","type":"object"},"type":"array"}},"type":"object","xml":{"name":"GetRecordsResult"}},"Record":{"properties":{"data":{"description":"下载的数据。\n\n下载的数据为序列化之后的二进制数据(Base64编码后的字符串)。\n\n比如下载数据接口返回的数据是“ZGF0YQ==”,“ZGF0YQ==”经过Base64解码之后是“data”。","type":"string"},"partition_key":{"description":"用户上传数据时设置的partition_key。\n\n说明:\n\n上传数据时,如果传了partition_key参数,则下载数据时可返回此参数。如果上传数据时,未传partition_key参数,而是传入partition_id,则不返回partition_key。","type":"string"},"sequence_number":{"description":"该条数据的序列号。","type":"string"},"timestamp":{"description":"记录写入DIS的时间戳。","format":"int64","type":"integer"},"timestamp_type":{"default":"CreateTime","description":"时间戳类型。\n\n- CreateTime:创建时间。","format":"int64","type":"string"}},"xml":{"name":"Record"}}},"description":null,"group_id":"367dcf62e4d848d7920b0d0fb440978c","host":"dis.cn-north-4.myhuaweicloud.com","id":"8c3794e5d4d04e669c9da92a8add60d9","info_version":"v2","method":"get","name":"ConsumeRecords","parameters":{},"paths":{"/v2/{project_id}/records":{"get":{"consumes":["application/json"],"description":"本接口用于从DIS通道中下载数据。","operationId":"ConsumeRecords","parameters":[{"description":"项目ID。","in":"path","name":"project_id","required":true,"type":"string","x-example":"2b31ed520xxxxxxebedb6e57xxxxxxxx","x-order":2},{"description":"用户Token。\n\n通过调用IAM服务获取用户Token接口获取(响应消息头中X-Subject-Token的值)。","in":"header","name":"X-Auth-Token","required":true,"type":"string","x-example":"MIIDkgYJKoZIhvcNAQcCoIIDgzCCXXXXX...","x-order":1},{"description":"数据游标,需要先通过获取数据游标的接口获取。\n\n取值范围:1~512个字符。\n\n说明:\n\n数据游标有效期为5分钟。","in":"query","name":"partition-cursor","required":true,"type":"string"},{"description":"每个请求获取记录的最大字节数。\n\n注意:\n\n该值如果小于分区中单条记录的大小,会导致一直无法获取到记录。","in":"query","name":"max_fetch_bytes","required":false,"type":"integer","x-example":1048576}],"produces":["application/json;charset=UTF-8"],"responses":{"200":{"description":"正常返回","examples":{"application/json":{"next_partition_cursor":"eyJpdGVyR2VuVGltZSI6MTQ5MDk1MDE1Nzc0NywiU3RyZWFtTmFtZSI6IjY2MCIsIlNoYXJkSWQiOiIwIiwiU2hhcmRJdGVyYXRvclR5cGUiOiJBVF9TRVFVRU5DRV9OVU1CRVIiLCJTdGFydGluZ1NlcXVlbmNlTnVtYmVyIjoiMjIiLCJUaW1lU3RhbXAiOjB9","records":[{"data":"MTExMTExMTExMTExMTExMTExMTExMTExMTExMTExMTEx","partition_key":"0","sequence_number":"485","timestamp":1527577402541,"timestamp_type":"CreateTime"}]}},"schema":{"$ref":"#/definitions/GetRecordsResult"}}},"security":[{"aksk":[]}],"summary":"下载数据","tags":["数据管理"],"x-publishpath":"dis_02_0019","x-request-examples-1":"","x-request-examples-description-1":"下载数据","x-request-examples-url-1":"GET https://{Endpoint}/v2/{project_id}/records","x-scope":"Commercial","x-source":"SelfDeveloped","x-support-sdk":"Y","x-timeout":"60s","x-version":"v2"}}},"product_short":"DIS","region_id":"cn-north-4","schemes":["HTTPS"],"security_definitions":{"aksk":{"type":"basic"},"petstore_auth":{"authorizationUrl":"http://petstore.swagger.io/oauth/dialog","flow":"implicit","scopes":{"read:pets":"read your pets","write:pets":"modify pets in your account"},"type":"oauth2"},"token":{"in":"header","name":"X-Auth-Token","type":"apiKey"}},"summary":"下载数据","tags":"数据管理","uri":null,"version":"2.0"}