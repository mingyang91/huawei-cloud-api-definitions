{"base_path":null,"components":null,"consumes":"","definitions":{"DiscardInfo":{"description":"丢弃的信息。","properties":{"count":{"description":"数量。","format":"int32","type":"integer"},"totalTime":{"description":"总时间。","format":"int64","type":"integer"},"type":{"description":"类型。","type":"string"}},"type":"object"},"SpanEventInfo":{"description":"event信息的简要信息。","properties":{"app_id":{"description":"组件id。","format":"int64","type":"integer"},"app_name":{"description":"组件名称。","type":"string"},"argument":{"description":"界面展示的参数,每个类型的event自己来实现。","type":"string"},"attachment":{"additionalProperties":{"type":"string"},"description":"注册信息里面的attachment。","type":"object"},"biz_code":{"description":"业务状态码的采集。","type":"string"},"biz_id":{"description":"应用id。","format":"int64","type":"integer"},"children_event_count":{"description":"子event的个数。","format":"int32","type":"integer"},"class_name":{"description":"类名。","type":"string"},"code":{"description":"状态码,针对http的调用有效。","format":"int32","type":"integer"},"discard":{"description":"丢弃的子event个数,key是类型。","items":{"$ref":"#/definitions/DiscardInfo"},"type":"array"},"domain_id":{"description":"租户id。","format":"int32","type":"integer"},"env_id":{"description":"环境id。","format":"int64","type":"integer"},"env_name":{"description":"环境名称。","type":"string"},"error_reasons":{"description":"错误原因。","type":"string"},"event_id":{"description":"event的ID,在一个具体的span下面event的编号,一般是1-1-2这种格式。","type":"string"},"global_path":{"description":"虚拟traceId经过的path路径。","type":"string"},"global_trace_id":{"description":"vTraceId,虚拟traceId。","type":"string"},"has_error":{"description":"是否有错误,主要用在span的场景。","type":"boolean"},"host_name":{"description":"主机名称。","type":"string"},"http_method":{"description":"这里的method实际上是tags里面的http_method,只有url监控项才有。","type":"string"},"id":{"description":"spanId。","type":"string"},"indent":{"description":"缩进。","format":"int32","type":"integer"},"instance_id":{"description":"实例id。","format":"int64","type":"integer"},"instance_name":{"description":"实例名称。","type":"string"},"ip_address":{"description":"ip地址。","type":"string"},"is_async":{"description":"是否异步的event。","type":"boolean"},"method":{"description":"方法名。","type":"string"},"next_spanId":{"description":"产生下一个span的源的eventId。","type":"string"},"real_source":{"description":"根event的时候存在,实际调用的url。","type":"string"},"region":{"description":"区域。","type":"string"},"source":{"description":"只有是根event也就是span的时候有值。","type":"string"},"source_event_id":{"description":"调用方的eventid。","type":"string"},"span_id":{"description":"span id。","type":"string"},"start_time":{"description":"开始时间。","format":"int64","type":"integer"},"tags":{"additionalProperties":{"type":"string"},"description":"包含用户自定义参数,header或body体里的内容,httpMethod, bizCode,以及后续可能新增参数。","type":"object"},"time_used":{"description":"耗时。","format":"int64","type":"integer"},"trace_id":{"description":"traceId。","type":"string"},"type":{"description":"类型,mysql,kafka等。","type":"string"}},"type":"object"},"TraceEventListResult":{"description":"查询调用链信息返回结果。","properties":{"span_event_list":{"description":"span event信息列表。","items":{"$ref":"#/definitions/SpanEventInfo"},"type":"array"}},"type":"object"}},"description":null,"group_id":"948fcecbff6f450fbe29bcc3e90c3eca","host":"apm2.cn-north-4.myhuaweicloud.com","id":"ad4fcf5391b34fe28ae4a1f4cf5dd9c8","info_version":"v1","method":"get","name":"ShowTraceEvents","parameters":{},"paths":{"/v1/apm2/openapi/view/trace/get-trace-events":{"get":{"description":"获取一个trace的所有调用链数据。","operationId":"ShowTraceEvents","parameters":[{"description":"调用链ID。","in":"query","name":"trace_id","required":true,"type":"string"},{"description":"从IAM服务获取的用户Token。","in":"header","name":"X-Auth-Token","required":true,"type":"string"}],"produces":["application/json"],"responses":{"200":{"description":"OK,请求响应成功。","examples":{"application/json":{"span_event_list":[{"app_id":11,"app_name":"apm-pu-task","argument":"(GET)(/apm2/health/v1/health-check)(200)","async":false,"attachment":null,"biz_code":null,"biz_id":162,"children_event_count":0,"class_name":"org/apache/catalina/core/StandardHostValve","code":200,"discard":[],"domain_id":1,"env_id":11,"env_name":"suzhou-roma-2","error_reasons":null,"estimated_end_time":null,"estimated_start_time":null,"event_id":"1","global_path":null,"global_trace_id":"16-1666684411910-1326","has_error":false,"host_name":"apm2-apm-pu-task-6b5bbfc84d-gtrrs","http_method":"GET","id":"1+1","indent":0,"instance_id":16,"instance_name":"default","ip_address":"172.16.3.7","is_async":false,"method":"invoke","next_spanId":null,"real_source":"/apm2/health/v1/health-check","region":"suzhou-roma-2","source":"/apm2/health/v1/health-check","source_event_id":null,"span_id":"1","start_time":1666684411910,"tags":{},"time_used":1,"trace_id":"16-1666684411910-1326","type":"Tomcat"}]}},"schema":{"$ref":"#/definitions/TraceEventListResult"}},"401":{"description":"Unauthorized,没有权限。","schema":{"type":"string"}},"403":{"description":"Forbidden,禁止访问。","schema":{"type":"string"}},"404":{"description":"Not Found,没有找到要请求的资源。","schema":{"type":"string"}}},"summary":"获取一个trace的所有调用链数据","tags":["VIEW"],"x-hybridcloud":true,"x-is-registered":"Y","x-request-examples-description-1":"入参为调用链trace_id。","x-request-examples-url-1":"/v1/apm2/openapi/view/trace/get-trace-events?trace_id=16-1666684411910-1326","x-support-sdk":"Y"}}},"product_short":"APM","region_id":"cn-north-4","schemes":["HTTPS"],"security_definitions":{"apig-auth-app":{"in":"header","name":"Authorization","type":"apiKey","x-apigateway-auth-type":"AppSigv1"},"apig-auth-app-optional":{"in":"header","name":"Authorization","type":"apiKey","x-apigateway-auth-opt":{"access-auth-type":"optional"},"x-apigateway-auth-type":"AppSigv1"},"apig-auth-iam":{"in":"header","name":"unused","type":"apiKey","x-apigateway-auth-type":"IAM"},"apig-auth-iam-none":{"in":"header","name":"unused","type":"apiKey","x-apigateway-auth-type":"IAM_NONE"}},"summary":"获取一个trace的所有调用链数据","tags":"VIEW","uri":null,"version":"2.0"}