{"base_path":null,"components":null,"consumes":"","definitions":{"AgentSearchParam":{"description":"agent搜索参数。","properties":{"business_id":{"description":"应用id。","format":"int64","type":"integer"},"env_id":{"description":"环境id","format":"int64","type":"integer"},"keyword":{"description":"关键字。","type":"string"},"order_by_status":{"description":"是否按照采集状态排序,默认不填则不按状态排序,填y则按照状态排序。","type":"string"},"page":{"description":"需要查询的页码,最小数为1。","format":"int32","type":"integer"},"page_size":{"description":"查询结果每页最多显示的条数。","format":"int32","type":"integer"},"region":{"description":"region英文名称。","type":"string"},"status":{"description":"探针状态。","enum":["online","disable","offline"],"example":"online","type":"string"}},"required":["business_id","region","page","page_size"],"type":"object"},"AgentSearchResult":{"description":"agent进行搜索的结果返回","properties":{"agent_info_list":{"description":"agent地址列表。","items":{"$ref":"#/definitions/InstanceInfo"},"type":"array"},"disable_count":{"description":"被关闭的个数。","format":"int32","type":"integer"},"offline_count":{"description":"心跳异常个数。","format":"int32","type":"integer"},"online_count":{"description":"正常个数。","format":"int32","type":"integer"},"total_count":{"description":"总个数。","format":"int32","type":"integer"},"total_page":{"description":"总页数。","format":"int32","type":"integer"}},"type":"object"},"InstanceInfo":{"description":"实例信息。","properties":{"agent_version":{"description":"Javaagent版本。","type":"string"},"app_name":{"description":"组件名称。","type":"string"},"business_id":{"description":"应用id。","format":"int64","type":"integer"},"business_name":{"description":"应用名称。","type":"string"},"env_id":{"description":"环境ID。","format":"int64","type":"integer"},"host_name":{"description":"主机名称。","type":"string"},"instance_id":{"description":"实例id。","format":"int64","type":"integer"},"instance_name":{"description":"实例名称。","type":"string"},"instance_status":{"description":"实例状态。","format":"int32","type":"integer"},"ip_address":{"description":"主机ip地址。","type":"string"},"last_heartbeat":{"description":"最后心跳时间。","format":"int64","type":"integer"},"last_modify_time":{"description":"最后修改时间。","format":"int64","type":"integer"},"last_modify_user_id":{"description":"最后修改用户id。","type":"string"},"last_modify_user_name":{"description":"最后修改用户名称。","type":"string"},"register_time":{"description":"注册时间。","format":"int64","type":"integer"}},"type":"object"}},"description":null,"group_id":"948fcecbff6f450fbe29bcc3e90c3eca","host":"apm2.cn-north-4.myhuaweicloud.com","id":"a542267892464d99977f3c068b599723","info_version":"v1","method":"post","name":"SearchAgent","parameters":{},"paths":{"/v1/apm2/openapi/apm-service/agent-mgr/search":{"post":{"description":"该接口用于搜索应用下所有探针情况。","operationId":"SearchAgent","parameters":[{"description":"从IAM服务获取的用户Token。","in":"header","name":"X-Auth-Token","required":true,"type":"string"},{"description":"应用id。","format":"int64","in":"header","name":"x-business-id","required":true,"type":"integer"},{"description":"agent搜索参数。","in":"body","name":"AgentSearchParam","required":false,"schema":{"$ref":"#/definitions/AgentSearchParam"}}],"produces":["application/json"],"responses":{"200":{"description":"OK,请求响应成功。","examples":{"application/json":{"agent_info_list":[{"agent_version":"2.1.16","app_name":"apm-data-deliver/cn-east-204","business_id":null,"business_name":"LubanApm","env_id":1105,"host_name":"szv*******1","instance_id":5298,"instance_name":"default","instance_status":0,"ip_address":"*.*.*.*","last_heartbeat":1669684246000,"last_modify_time":1667839085000,"last_modify_user_id":"70iWY********VHVd","last_modify_user_name":"yWX","register_time":1657762671000}],"disable_count":0,"offline_count":0,"online_count":1,"total_count":1,"total_page":1}},"schema":{"$ref":"#/definitions/AgentSearchResult"}},"401":{"description":"Unauthorized,没有权限。","schema":{"type":"string"}},"403":{"description":"Forbidden,禁止访问。","schema":{"type":"string"}},"404":{"description":"Not Found,没有找到要请求的资源","schema":{"type":"string"}}},"summary":"查询应用下所有探针","tags":["APM"],"x-hybridcloud":true,"x-is-registered":"Y","x-request-examples-1":{"business_id":6,"page":1,"page_size":10,"region":"cn-east-204"},"x-request-examples-description-1":"入参为region英文名称,分页情况和应用id。","x-request-examples-text-1":{"business_id":6,"page":1,"page_size":10,"region":"cn-east-204"},"x-request-examples-url-1":"/v1/apm2/openapi/apm-service/agent-mgr/search","x-support-sdk":"Y"}}},"product_short":"APM","region_id":"cn-north-4","schemes":["HTTPS"],"security_definitions":{"apig-auth-app":{"in":"header","name":"Authorization","type":"apiKey","x-apigateway-auth-type":"AppSigv1"},"apig-auth-app-optional":{"in":"header","name":"Authorization","type":"apiKey","x-apigateway-auth-opt":{"access-auth-type":"optional"},"x-apigateway-auth-type":"AppSigv1"},"apig-auth-iam":{"in":"header","name":"unused","type":"apiKey","x-apigateway-auth-type":"IAM"},"apig-auth-iam-none":{"in":"header","name":"unused","type":"apiKey","x-apigateway-auth-type":"IAM_NONE"}},"summary":"查询应用下所有探针","tags":"APM","uri":null,"version":"2.0"}