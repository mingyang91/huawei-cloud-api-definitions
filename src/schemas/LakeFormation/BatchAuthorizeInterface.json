{"base_path":null,"components":null,"consumes":"","definitions":{"AccessPolicyInput":{"description":"access policy input body","properties":{"conditions":{"description":"条件","example":"ip=127.0.0.1","minLength":1,"type":"string"},"data_filter":{"description":"行过滤","example":"c1 < 0","minLength":1,"type":"string"},"data_mask":{"description":"列掩码","example":"Include:c1,c2:mask","minLength":1,"type":"string"},"effect":{"default":true,"description":"拒绝/允许","type":"boolean","x-annotations":["@UsNoConstraint(reason = \"Boolean类型无需校验\")"],"x-imports":["com.huawei.us.validator.annotation.UsNoConstraint;"]},"grant_able_permissions":{"description":"可传递的权限列表","example":"ALTER,DROP","items":{"enum":["ALL","CREATE","ALTER","DROP","DESCRIBE","EXEC","CREATE_DATABASE","LIST_DATABASE","CREATE_TABLE","LIST_TABLE","CREATE_FUNC","LIST_FUNC","REGISTER_MODEL","LIST_MODEL","INSERT","UPDATE","DELETE","SELECT","READ","WRITE","OPERATE"],"example":"ALTER","type":"string"},"type":"array"},"permissions":{"description":"权限列表","example":"ALTER,DROP","items":{"enum":["ALL","CREATE","ALTER","DROP","DESCRIBE","EXEC","CREATE_DATABASE","LIST_DATABASE","CREATE_TABLE","LIST_TABLE","CREATE_FUNC","LIST_FUNC","REGISTER_MODEL","LIST_MODEL","INSERT","UPDATE","DELETE","SELECT","READ","WRITE","OPERATE"],"example":"ALTER","type":"string"},"type":"array"},"principal_list":{"description":"主体信息","items":{"$ref":"#/definitions/Principal"},"maxItems":20,"type":"array"},"resource":{"$ref":"#/definitions/ResourceInfo","description":"资源信息"}},"required":["effect","permissions","principal_list","resource"],"title":"AccessPolicyInput","type":"object"},"CatalogInfo":{"description":"catalog input when grant policy","properties":{"databases":{"description":"子数据库信息","items":{"$ref":"#/definitions/DatabaseInfo"},"maxItems":10,"type":"array"},"name":{"description":"catalog名","example":"catalog1","type":"string"}},"required":["name"],"title":"CatalogInfo","type":"object"},"ColumnInfo":{"description":"column input when grant policy","properties":{"column_name":{"description":"列名","example":"c1,c2","items":{"pattern":"^[a-zA-Z0-9_\\-\\+*\\\\(), \\u4e00-\\u9fa5]+$","type":"string"},"type":"array"},"filter":{"description":"是否排除:Include包含,Exclude排除","enum":["Include","Exclude"],"example":"Include","type":"string"}},"required":["column_name","filter"],"title":"ColumnInfo","type":"object"},"DatabaseInfo":{"description":"database input when grant policy","properties":{"functions":{"description":"子方法信息","items":{"$ref":"#/definitions/FunctionInfo"},"maxItems":10,"type":"array"},"name":{"description":"数据库名","example":"db1","pattern":"^[a-zA-Z0-9\\u4e00-\\u9fa5_*]*$","type":"string"},"tables":{"description":"子表信息","items":{"$ref":"#/definitions/TableInfo"},"maxItems":10,"type":"array"}},"required":["name"],"title":"DatabaseInfo","type":"object"},"ErrorMessage":{"description":"失败时返回的错误对象","properties":{"common_error_code":{"description":"CBC公共错误码","example":"CMM.1008","maxLength":36,"minLength":1,"type":"string"},"error_code":{"description":"错误码","example":"lakeformation.00010003","maxLength":36,"minLength":8,"type":"string"},"error_msg":{"description":"错误描述","example":"failed","maxLength":4096,"minLength":2,"type":"string"},"solution_msg":{"description":"解决方案描述","example":"Please use correct instance id.","maxLength":4096,"minLength":2,"type":"string"}},"required":["error_code","error_msg"],"type":"object"},"FunctionInfo":{"description":"function input when grant policy","properties":{"name":{"description":"function name","type":"string"}},"required":["name"],"title":"FunctionInfo","type":"object"},"LakeFormationPolicy":{"description":"LakeFormationPolicy","properties":{"authorization_paths":{"description":"授权路径列表","items":{"description":"路径地址","example":"obs://location/uri/","maxLength":4000,"pattern":"^(obs|har)://.+/.+$","type":"string"},"maxItems":1000,"type":"array"},"condition":{"description":"条件信息","example":"ip=127.0.0.1","type":"string"},"created_time":{"description":"创建时间","format":"int64","type":"integer"},"grant_able_permissions":{"description":"可以传递的权限列表","items":{"enum":["ALL","CREATE","ALTER","DROP","DESCRIBE","EXEC","CREATE_DATABASE","LIST_DATABASE","CREATE_TABLE","LIST_TABLE","CREATE_FUNC","LIST_FUNC","REGISTER_MODEL","LIST_MODEL","INSERT","UPDATE","DELETE","SELECT","READ","WRITE","OPERATE"],"example":"ALTER","type":"string"},"type":"array"},"instance_id":{"description":"实例id","type":"string"},"obligation":{"description":"obligation,义务,当前包含data filter和data mask","example":"DATAFILTER:c1<10;DATAMASK:INCLUDE:c1","type":"string"},"permissions":{"description":"权限列表","example":"DROP,ALTER","items":{"enum":["ALL","CREATE","ALTER","DROP","DESCRIBE","EXEC","CREATE_DATABASE","LIST_DATABASE","CREATE_TABLE","LIST_TABLE","CREATE_FUNC","LIST_FUNC","REGISTER_MODEL","LIST_MODEL","INSERT","UPDATE","DELETE","SELECT","READ","WRITE","OPERATE"],"example":"ALTER","type":"string"},"type":"array"},"principal_name":{"description":"主体名","example":"user1","type":"string"},"principal_source":{"description":"主体来源,IAM-云,SAML-联邦,LDAP-权限策略,LOCAL-本地,OTHER-其它","enum":["IAM","SAML","LDAP","LOCAL","OTHER"],"example":"IAM","type":"string"},"principal_type":{"description":"主体类型,USER-用户,GROUP-组,ROLE-角色,SHARE-共享,OTHER-其它","enum":["USER","GROUP","ROLE","SHARE","OTHER"],"example":"USER","type":"string"},"project_id":{"description":"项目id","maxLength":64,"minLength":1,"pattern":"^[a-z0-9]+$","type":"string"},"resource":{"$ref":"#/definitions/ResourceInfo","description":"资源信息"},"resource_name":{"description":"要求用点分格式进行分割","type":"string"}},"required":["created_time","permissions","principal_name","principal_source","principal_type","project_id","resource_name"],"title":"Policy","type":"object"},"PagedInfo":{"description":"分页返回信息","properties":{"current_count":{"description":"本次返回的对象个数","format":"int32","maximum":2000,"minimum":0,"type":"integer"},"next_marker":{"description":"下一页查询地址","example":"006f492b-xxxx","maxLength":32,"type":"string"},"previous_marker":{"description":"上一页查询地址","example":"003e6eba-xxxx","maxLength":32,"type":"string"}},"required":["current_count","next_marker","previous_marker"],"type":"object"},"PagedListPolicies":{"properties":{"page_info":{"$ref":"#/definitions/PagedInfo","description":"分页信息"},"policies":{"description":"lakecat策略信息","items":{"$ref":"#/definitions/LakeFormationPolicy"},"type":"array"}},"title":"PagedListPolicy"},"Principal":{"properties":{"principal_name":{"description":"主体名","example":"user1","maxLength":49,"minLength":1,"pattern":"^[A-Za-z0-9_]+$","type":"string"},"principal_source":{"description":"主体来源\nIAM云用户\nSAML联邦\nLDAP ld用户\nLOCAL 本地用户","enum":["IAM","SAML","LDAP","LOCAL"],"example":"IAM","type":"string"},"principal_type":{"description":"主体类型\nUSER用户\nGROUP组\nROLE角色\nSHARE共享\nOTHER其它","enum":["USER","GROUP","ROLE","SHARE","OTHER"],"example":"USER","type":"string"}},"required":["principal_name","principal_source","principal_type"],"title":"Principal","type":"object"},"ResourceInfo":{"description":"catalog input when grant policy","properties":{"catalogs":{"description":"catalog info","items":{"$ref":"#/definitions/CatalogInfo"},"maxItems":10,"minItems":0,"type":"array"},"type":{"description":"resource type","enum":["CATALOG","DATABASE","TABLE","COLUMN","FUNC","MODEL","URI"],"example":"CATALOG","type":"string"},"uris":{"description":"uri","items":{"description":"路径地址","maxLength":4000,"pattern":"^(obs|har)://.+/.+$","type":"string"},"maxItems":10,"type":"array"}},"required":["type"],"title":"ResourceInfo","type":"object"},"TableInfo":{"description":"table input when grant policy","properties":{"columns":{"$ref":"#/definitions/ColumnInfo","description":"sub columns info"},"name":{"description":"table name","example":"tb1","pattern":"^[a-zA-Z0-9\\u4e00-\\u9fa5_*]*$","type":"string"}},"required":["name"],"title":"TableInfo","type":"object"}},"description":null,"group_id":"bf0ce8340d8b4439b53683607ef0d87f","host":"lakeformation.cn-north-4.myhuaweicloud.com","id":"f8027e5ce0de40d78206c119bdcefc2b","info_version":"v1","method":"post","name":"BatchAuthorizeInterface","parameters":{},"paths":{"/v1/{project_id}/instances/{instance_id}/policies/grant":{"post":{"consumes":["application/json"],"deprecated":false,"description":"批量授权接口","operationId":"BatchAuthorizeInterface","parameters":[{"description":"租户token","in":"header","items":{"type":"string"},"name":"X-Auth-Token","required":true,"type":"array"},{"description":"项目id","in":"path","maxLength":64,"minLength":1,"name":"project_id","pattern":"^[a-z0-9]+$","required":true,"type":"string"},{"description":"instance id","in":"path","minLength":1,"name":"instance_id","pattern":"^[a-zA-Z0-9-]{36}$","required":true,"type":"string"},{"description":"policy input body","in":"body","name":"policy_input","required":true,"schema":{"$ref":"#/definitions/AccessPolicyInput"}}],"produces":["application/json;charset=UTF-8"],"responses":{"200":{"description":"OK","examples":{"application/json":{"page_info":{"current_count":1},"policies":[{"condition":"","grant_able_permissions":[],"instance_id":"ef5966a9-ff02-4121-bf3b-b51347844ca1","obligation":"","permissions":["ALTER"],"principal_name":"test","principal_source":"IAM","principal_type":"GROUP","projectId":"aa2d97d7e62c4b7da3ffdfc11551f878","resource":{"catalogs":[{"databases":[{"name":"db1"}],"name":"hive"}],"type":"DATABASE","uris":[]},"resource_name":"hive.db1"}]}},"schema":{"$ref":"#/definitions/PagedListPolicies"}},"201":{"description":"Created"},"400":{"description":"Bad Request","examples":{"application/json":{"error_code":"common.01000001","error_msg":"failed to read http request, please check your input, code: 400, reason: Type mismatch., cause: TypeMismatchException"}},"schema":{"$ref":"#/definitions/ErrorMessage"}},"401":{"description":"Unauthorized","examples":{"application/json":"{\n  \"error_code\": 'APIG.1002',\n  \"error_msg\": 'Incorrect token or token resolution failed'\n}"}},"403":{"description":"Forbidden","examples":{"application/json":{"error":{"code":"403","message":"X-Auth-Token is invalid in the request","title":"Forbidden"},"error_code":"403","error_msg":"X-Auth-Token is invalid in the request","title":"Forbidden"}}},"404":{"description":"Not Found","examples":{"application/json":{"error_code":"common.01000001","error_msg":"response status exception, code: 404"}},"schema":{"$ref":"#/definitions/ErrorMessage"}},"408":{"description":"Request Timeout","examples":{"application/json":{"error_code":"common.00000408","error_msg":"timeout exception occurred"}}},"500":{"description":"Internal Server Error","examples":{"application/json":{"error_code":"common.00000500","error_msg":"internal error"}},"schema":{"$ref":"#/definitions/ErrorMessage"}}},"summary":"批量授权","tags":["Access"],"x-apiexplorer-hide":"N","x-cts-meta-anno":{"isAsyncApi":"false","resourceType":"Access","traceName":"grantAccess"},"x-is-registered":"Y","x-request-examples-url-1":"/v1/{project_id}/instances/{instance_id}/policies/grant","x-support-sdk":"Y"}}},"product_short":"LakeFormation","region_id":"cn-north-4","schemes":["HTTPS"],"security_definitions":null,"summary":"批量授权","tags":"接入管理","uri":null,"version":"2.0"}