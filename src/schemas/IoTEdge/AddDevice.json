{"base_path":"/v2","components":null,"consumes":"[\"application/json;charset=UTF-8\"]","definitions":{"AddDeviceRequestBody":{"description":"添加设备结构体。","properties":{"auth_info":{"$ref":"#/definitions/EdgeDeviceAuthInfo","description":"设备的接入认证信息。"},"config":{"description":"设备初始配置。用户使用该字段可以为设备指定初始配置,指定后将会根据service_id和desired设置的属性值与产品中对应属性的默认值比对,如果不同,则将以设置的属性值为准写入到设备配置中。例如连接MQTT设备,配置接入平台密码,携带该参数{\\\"password\":\\\"xxxxxxxx\"}","example":{"password":"xxxxxx"},"type":"object"},"description":{"description":"设备的描述信息。","example":"watermeter device","maxLength":2048,"pattern":"^[\\u4e00-\\u9fa5a-zA-Z0-9_? '#()\\.,&%@!-]*$","type":"string"},"device_name":{"description":"设备名称。","example":"dianadevice","maxLength":256,"minLength":1,"pattern":"^[\\u4e00-\\u9fa5a-zA-Z0-9_?'#()\\.,&%@!-]*$","type":"string"},"extension_info":{"description":"设备扩展信息。用户可以自定义任何想要的扩展信息,如果在创建设备时为子设备指定该字段,将会通过MQTT接口“平台通知网关子设备新增“将该信息通知给网关。字段值大小上限为1K。 追加:如果通过EdgeHub, EdgeAccess进行设备接入,不需要携带extension_info;如果通过用户自定义的应用进行边缘设备接入,则携带模块id参数作为extension_info, 例如:{\\\"module_id\":\\\"user_xxx\"}","example":{"aaa":"xxx","bbb":0},"type":"object"},"gateway_id":{"description":"父设备ID,用于标识设备所属的父设备。携带该参数时,表示在该父设备下创建一个子设备,这个子设备不与平台直连,此时必须保证这个父设备在平台已存在,创建成功后子设备的gateway_id等于该参数值;不携带该参数时,表示创建一个和平台直连的设备,创建成功后设备的device_id和gateway_id一致。","example":"d4922d8a-6c8e-4396-852c-164aefa6638f","pattern":"^[a-zA-Z0-9_-]{1,128}$","type":"string"},"node_id":{"description":"设备标识码,通常使用IMEI、MAC地址或Serial No作为node_id。(注意:NB设备由于模组烧录信息后无法配置,所以NB设备会校验node_id全局唯一。)","example":"ABC123456789","maxLength":64,"minLength":1,"pattern":"^[a-zA-Z0-9_-]*$","type":"string"},"product_id":{"description":"设备关联的产品ID,用于唯一标识一个产品模型,在管理门户导入产品模型后由平台分配获得。","example":"b640f4c203b7910fc3cbd446ed437cbd","maxLength":36,"minLength":1,"pattern":"^[a-f0-9-]*$","type":"string"},"space_id":{"description":"资源空间Id。此参数为非必选参数,用于兼容平台老用户存在多应用的场景。存在多应用的用户需要使用该接口时,必须携带该参数指定注册的设备归属到哪个应用下,否则接口会提示错误。如果用户存在多应用,同时又不想携带该参数,可以联系华为技术支持对用户数据做应用合并。","example":"jeQDJQZltU8iKgFFoW060F5SGZka","pattern":"^[a-zA-Z0-9_-]{1,36}$","type":"string"}},"required":["node_id","product_id"],"title":"添加设备结构体","type":"object","x-imports":"javax.validation.constraints.Size;javax.validation.constraints.NotNull;javax.validation.constraints.Pattern;javax.validation.Valid;"},"AddDeviceRespDto":{"properties":{"device_id":{"description":"设备ID","maxLength":256,"minLength":1,"pattern":"^[a-zA-Z0-9_-]*$","type":"string"},"password":{"description":"设备密钥,认证类型使用密钥认证接入(SECRET)可填写该字段。注意:NB设备密钥由于协议特殊性,只支持十六进制密钥接入;修改设备、查询设备及查询设备列表接口不返回该参数。","maxLength":256,"minLength":1,"type":"string"}},"title":"添加设备响应体","type":"object"},"EdgeDeviceAuthInfo":{"description":"设备接入类型(已废弃)","properties":{"auth_type":{"description":"鉴权类型。支持密钥认证接入(SECRET)和证书认证接入(CERTIFICATES)两种方式。使用密钥认证接入方式(SECRET)填写secret字段,使用证书认证接入方式(CERTIFICATES)填写fingerprint字段,不填写auth_type默认为密钥认证接入方式(SECRET)","example":"SECRET","pattern":"(SECRET|CERTIFICATES)","type":"string","x-annotations":null},"fingerprint":{"description":"证书指纹,认证类型使用证书认证接入(CERTIFICATES)可填写该字段,注册设备时不填写该字段则取第一次设备接入时的证书指纹。注意:指纹只能为40位十六进制字符串或者64位十六进制字符串;修改设备、查询设备及查询设备列表接口不返回该参数。","example":"dc0f1016f495157344ac5f1296335cff725ef22f","pattern":"^[a-fA-F0-9]{40}$|^[a-fA-F0-9]{64}$","type":"string","x-annotations":null},"secret":{"description":"设备密钥,认证类型使用密钥认证接入(SECRET)可填写该字段。注意:NB设备密钥由于协议特殊性,只支持十六进制密钥接入;修改设备、查询设备及查询设备列表接口不返回该参数。","example":"3b935a250c50dc2c6d481d048cefdc3c","maxLength":32,"minLength":8,"pattern":"^[a-zA-Z0-9_-]*$","type":"string","x-annotations":null},"secure_access":{"default":true,"description":"指设备是否通过安全协议方式接入,默认值为true。\n- true:通过安全协议方式接入。\n- false:通过非安全协议方式接入。","example":true,"type":"boolean"},"timeout":{"default":0,"description":"设备验证码的有效时间,单位:秒,默认值:0\n若设备在有效时间内未接入物联网平台并激活,则平台会删除该设备的注册信息。若设置为“0”,则表示设备验证码不会失效(建议填写为“0”)。注意:只有注册设备接口或者修改设备接口修改timeout时返回该参数。","example":300,"format":"int32","maximum":2147483647,"minimum":0,"type":"integer"}},"title":"设备接入类型(已废弃)","type":"object","x-imports":"javax.validation.constraints.Size;javax.validation.constraints.NotNull;javax.validation.constraints.Pattern;javax.validation.Valid;"}},"description":null,"group_id":"754c02d86d9b4c75b894729259232632","host":"iotedge-api.cn-north-4.myhuaweicloud.com","id":"30867b58ff00474bacc36feaf0158041","info_version":"v2","method":"post","name":"AddDevice","parameters":{"X-Auth-Token":{"description":"用户Token。通过调用IAM服务 [获取IAM用户Token](https://support.huaweicloud.com/api-iam/iam_30_0001.html)接口获取,接口返回的响应消息头中“X-Subject-Token”就是需要获取的用户Token。简要的获取方法样例请参见 [Token认证](https://support.huaweicloud.com/api-iothub/iot_06_v5_0091.html#section0)。","in":"header","maxLength":20000,"minLength":0,"name":"X-Auth-Token","required":true,"type":"string","x-example":"MIIDkgYJKoZIhvcNAQcCoIIDgzCCXXXXX..."},"edge_node_id":{"description":"边缘节点ID","in":"path","maxLength":64,"minLength":1,"name":"edge_node_id","pattern":"^[a-zA-Z0-9_-]*$","required":true,"type":"string","x-example":"446007715895193600"},"project_id":{"description":"项目ID。获取方法请参见 [获取项目ID](x-wc://file=zh-cn_topic_0225049489.xml)。","in":"path","maxLength":64,"minLength":1,"name":"project_id","pattern":"^[a-fA-F0-9]{1,32}$","required":true,"type":"string","x-example":"04ed32dc1b0025b52fe3c01a27c2b0a8"}},"paths":{"/{project_id}/edge-nodes/{edge_node_id}/devices":{"post":{"description":"添加设备","operationId":"AddDevice","parameters":[{"$ref":"#/parameters/project_id"},{"$ref":"#/parameters/X-Auth-Token"},{"$ref":"#/parameters/edge_node_id"},{"description":"添加设备请求结构体","in":"body","name":"AddDeviceRequestBody","required":true,"schema":{"$ref":"#/definitions/AddDeviceRequestBody"}}],"produces":["application/json"],"responses":{"200":{"description":"OK","examples":{"application/json":{"device_id":"string","password":"string"}},"schema":{"$ref":"#/definitions/AddDeviceRespDto"},"x-SuccessCode":true},"400":{"description":"Bad Request"}},"summary":"添加设备","tags":["DeviceManager"],"x-classAnnotation":"@RestSchema(schemaId = \"DeviceManagerController\")","x-externalAPI":true,"x-imports":"org.springframework.http.ResponseEntity;org.apache.servicecomb.provider.rest.common.RestSchema","x-is-registered":"Y","x-request-examples-1":{"auth_info":{"auth_type":"SECRET","fingerprint":"dc0f1016f495157344ac5f1296335cff725ef22f","secret":"3b935a250c50dc2c6d481d048cefdc3c","secure_access":true,"timeout":300},"config":{"ip":"127.0.0.1"},"description":"watermeter device","device_name":"dianadevice","extension_info":{"aaa":"xxx","bbb":0},"gateway_id":"d4922d8a-6c8e-4396-852c-164aefa6638f","node_id":"ABC123456789","product_id":"b640f4c203b7910fc3cbd446ed437cbd","space_id":"jeQDJQZltU8iKgFFoW060F5SGZka"},"x-request-examples-url-1":"POST https://{endpoint}/v2/{project_id}/edge-nodes/{edge_node_id}/devices","x-returnType":"ResponseEntity<AddDeviceRespDto>","x-support-sdk":"Y"}}},"product_short":"IoTEdge","region_id":"cn-north-4","schemes":["HTTPS"],"security_definitions":null,"summary":"添加设备","tags":"设备管理","uri":null,"version":"2.0"}