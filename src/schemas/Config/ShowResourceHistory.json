{"base_path":null,"components":{"parameters":{"AuthToken":{"description":"用户Token。\n获取Token,请参考《统一身份认证服务API参考》的“获取用户Token”章节。请求响应成功后在响应消息头中包含的“X-Subject-Token”的值即为Token值。","in":"header","name":"X-Auth-Token","required":true,"schema":{"type":"string"}},"DomainId":{"description":"帐号ID","in":"path","name":"domain_id","required":true,"schema":{"maxLength":36,"pattern":"[\\w-]+","type":"string"}},"Limit":{"description":"最大的返回数量","in":"query","name":"limit","required":false,"schema":{"default":200,"format":"int32","maximum":200,"minimum":1,"type":"integer"}},"Marker":{"description":"分页参数,通过上一个请求中返回的marker信息作为输入,获取当前页","in":"query","name":"marker","required":false,"schema":{"maxLength":400,"minLength":4,"pattern":"[A-Za-z0-9+/=%\\-_]+","type":"string"}},"ResourceId":{"description":"资源ID","in":"path","name":"resource_id","required":true,"schema":{"maxLength":512,"pattern":"[_.:\\w-]+","type":"string"}}},"schemas":{"ErrorResp":{"description":"异常错误","properties":{"error_code":{"description":"错误码","type":"string"},"error_msg":{"description":"错误消息内容","type":"string"}},"type":"object"},"HistoryItem":{"description":"资源历史","properties":{"capture_time":{"description":"该资源在Config系统捕获时间","type":"string"},"domain_id":{"description":"用户id","type":"string"},"relations":{"description":"资源关系列表","items":{"$ref":"#/components/schemas/ResourceRelation"},"type":"array"},"resource":{"$ref":"#/components/schemas/ResourceEntity"},"resource_id":{"description":"资源id","type":"string"},"resource_type":{"description":"资源类型","type":"string"},"status":{"description":"资源状态","type":"string"}},"type":"object"},"PageInfo":{"description":"分页对象","properties":{"current_count":{"description":"当前页的资源数量","format":"int32","maximum":200,"minimum":0,"type":"integer"},"next_marker":{"description":"下一页的marker","type":"string"}},"type":"object"},"ResourceEntity":{"description":"资源对象","properties":{"checksum":{"description":"资源详情校验码","type":"string"},"created":{"description":"资源创建时间","type":"string"},"ep_id":{"description":"企业项目id","type":"string"},"ep_name":{"description":"企业项目名称","type":"string"},"id":{"description":"资源id","readOnly":true,"type":"string"},"name":{"description":"资源名称","type":"string"},"project_id":{"description":"Openstack中的项目id","type":"string"},"project_name":{"description":"Openstack中的项目名称","type":"string"},"properties":{"additionalProperties":{"description":"资源详细属性","type":"object"},"description":"资源详细属性","type":"object"},"provider":{"description":"云服务名称","type":"string"},"provisioning_state":{"description":"资源操作状态","type":"string"},"region_id":{"description":"区域id","type":"string"},"tags":{"additionalProperties":{"type":"string"},"description":"资源Tag","type":"object"},"type":{"description":"资源类型","readOnly":true,"type":"string"},"updated":{"description":"资源更新时间","type":"string"}},"type":"object"},"ResourceHistoryResponse":{"description":"资源历史对象","properties":{"items":{"description":"资源历史列表","items":{"$ref":"#/components/schemas/HistoryItem"},"type":"array"},"page_info":{"$ref":"#/components/schemas/PageInfo"}},"type":"object"},"ResourceRelation":{"properties":{"from_resource_id":{"description":"源资源ID","type":"string"},"from_resource_type":{"description":"源资源类型","type":"string"},"relation_type":{"description":"关系类型","type":"string"},"to_resource_id":{"description":"目的资源ID","type":"string"},"to_resource_type":{"description":"目的资源类型","type":"string"}},"type":"object"}}},"consumes":"","definitions":null,"description":null,"group_id":"cad6b80b035b41d09866cb93e54bff47","host":"rms.myhuaweicloud.com","id":"5c7f1348500b4b009f9ae012cb18b44f","info_version":"v1","method":"get","name":"ShowResourceHistory","parameters":null,"paths":{"/v1/resource-manager/domains/{domain_id}/resources/{resource_id}/history":{"get":{"description":"查询资源与资源关系的变更历史","operationId":"ShowResourceHistory","parameters":[{"$ref":"#/components/parameters/AuthToken"},{"$ref":"#/components/parameters/DomainId"},{"$ref":"#/components/parameters/ResourceId"},{"$ref":"#/components/parameters/Marker"},{"$ref":"#/components/parameters/Limit"},{"description":"指定查询范围的起始时间点,如果不设置此参数,默认为最早的时间","in":"query","name":"earlier_time","schema":{"format":"int64","type":"integer"}},{"description":"指定查询范围的结束时间点,如果不设置此参数,默认为当前时间","in":"query","name":"later_time","schema":{"format":"int64","type":"integer"}},{"description":"指定返回数据的时间顺序,默认为倒序","in":"query","name":"chronological_order","schema":{"enum":["Forward","Reverse"],"type":"string"}}],"responses":{"200":{"content":{"application/json":{"example":{"items":[{"capture_time":"2020-10-12T07:44:40.167Z","domain_id":"9548dff51b6849fab3d7353d631158ee","relations":[{"from_resource_id":"6af96128-d58d-426c-91e0-b38144c0f112","from_resource_type":"ecs.cloudservers","relation_type":"contains","to_resource_id":"3813d6d3-ef88-47b1-b343-cdf6390c6dcb","to_resource_type":"vpc.publicips"},{"from_resource_id":"6af96128-d58d-426c-91e0-b38144c0f112","from_resource_type":"ecs.cloudservers","relation_type":"isAttachedTo","to_resource_id":"0075ed19-59dd-49be-961d-117bb6fbfd3e","to_resource_type":"evs.volumes"},{"from_resource_id":"6af96128-d58d-426c-91e0-b38144c0f112","from_resource_type":"ecs.cloudservers","relation_type":"isAssociatedWith","to_resource_id":"8cca3002-00af-4812-a853-b7a6fbee06a4","to_resource_type":"vpc.securityGroups"},{"from_resource_id":"6af96128-d58d-426c-91e0-b38144c0f112","from_resource_type":"ecs.cloudservers","relation_type":"isAttachedTo","to_resource_id":"f4a107eb-4c6d-4dc8-88d8-de337923956f","to_resource_type":"evs.volumes"},{"from_resource_id":"6af96128-d58d-426c-91e0-b38144c0f112","from_resource_type":"ecs.cloudservers","relation_type":"isContainedIn","to_resource_id":"ff13d70d-17e5-4ec8-945a-c874e0db99d3","to_resource_type":"vpc.vpcs"}],"resource":{"checksum":"30482e7e4f2fc6e9842689c5d498cd13862def3c7369e9216af87c2198557b28","created":"2020-10-12T07:44:10Z","ep_id":"0","ep_name":"default","id":"6af96128-d58d-426c-91e0-b38144c0f112","name":"david-test-cce-49831-bh9ax","project_id":"15caceb7599f4ee3a770dbb70ad69b2b","project_name":"cn-north-6","properties":{"ExtVolumesAttached":[{"bootIndex":"0","device":"/dev/vda","id":"f4a107eb-4c6d-4dc8-88d8-de337923956f"},{"bootIndex":"-1","device":"/dev/vdb","id":"0075ed19-59dd-49be-961d-117bb6fbfd3e"}],"OS-EXT-SRV-ATTR":{"host":"cn-north-6a-pod01.cn-north-6","hostName":"david-test-cce-49831-bh9ax","hypervisorHostName":"nova001@83","instanceName":"instance-000b2c2d","kernelId":"","launchIndex":0,"ramdiskId":"","reservationId":"r-l8y8evjo","rootDeviceName":"/dev/vda"},"OsDcfDiskConfig":"MANUAL","OsExtAz":"cn-north-6a","OsExtStsPowerState":1,"OsExtStsVmState":"active","OsSrvUsgLaunchedAt":"2020-10-12T07:44:23.000000","accessIpv4":"","accessIpv6":"","addresses":[{"OsExtIpsMacAddr":"fa:16:3e:99:ec:b1","OsExtIpsPortId":"a7bfdd6f-3a56-4bbb-b37e-1b9ccac1ac96","OsExtIpsType":"fixed","addr":"192.168.238.230","version":4}],"configDrive":"","flavor":{"disk":"0","id":"Si3.large.2","name":"Si3.large.2","ram":"4096","vcpus":"2"},"hostId":"7f007da24f79bc37782d3440e3d4faa374c0eb555c1dfc98b687c996","hostName":"david-test-cce-49831-bh9ax","hostStatus":"UP","locked":false,"metadata":{"chargingMode":"0","imageName":"CCE_images_EulerOS-Node-CCE20.7.1.B003-v1.17.9-r0-amd64-f8389e5c3d65dc7b5bf8f10924d2fc16e35588fc-20200808144721","meteringImageId":"e8b32b27-a103-4a1f-b955-5d6be46ae9da","meteringImageType":"gold","meteringResourcesPerCode":"si3.large.2.linux","osBit":"64","vpcId":"ff13d70d-17e5-4ec8-945a-c874e0db99d3"},"progress":0,"securityGroup":[{"id":"8cca3002-00af-4812-a853-b7a6fbee06a4","name":"david-test-cce-cce-node-8x31o"}],"status":"ACTIVE","userId":"07729a673f8026624f3ec006f3b3cda9"},"provider":"ecs","provisioning_state":"Succeeded","region_id":"cn-north-6","tags":{"CCE-Dynamic-Provisioning-Node":"80fbd7d5-0c5e-11eb-bc0e-0255ac101e85"},"type":"cloudservers","updated":"2020-10-12T07:44:38Z"},"resource_id":"6af96128-d58d-426c-91e0-b38144c0f112","resource_type":"ecs.cloudservers","status":"ResourceChanged.UPDATE"}],"page_info":{"current_count":1,"next_marker":"CAESJjE2MDI0ODg2Nzc1NDYtNWY4NDA5NjU4YmI5MDUxZDBhMWEzMmJjGgQCXWaw"}},"schema":{"$ref":"#/components/schemas/ResourceHistoryResponse"}}},"description":"操作成功"},"400":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorResp"}}},"description":"输入参数不合法"},"403":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorResp"}}},"description":"用户认证失败"},"500":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorResp"}}},"description":"服务器内部错误"}},"security":[{"PkiTokenAuth":[]}],"summary":"查询资源历史","tags":["History"],"x-is-registered":"Y","x-publishpath":"rms_04_0401","x-request-examples-description-1":"","x-request-examples-url-1":"GET /v1/resource-manager/domains/{domain_id}/resources/{resource_id}/history?earlier_time=1595865600000&later_time=1603875761000&limit=10","x-support-sdk":"Y"}}},"product_short":"Config","region_id":"cn-north-4","schemes":["HTTPS"],"security_definitions":null,"summary":"查询资源历史","tags":"资源历史","uri":null,"version":"3.0.0"}