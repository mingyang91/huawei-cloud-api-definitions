{"base_path":null,"components":{"parameters":{"AuthToken":{"description":"用户Token。\n获取Token,请参考《统一身份认证服务API参考》的“获取用户Token”章节。请求响应成功后在响应消息头中包含的“X-Subject-Token”的值即为Token值。","in":"header","name":"X-Auth-Token","required":true,"schema":{"type":"string"}},"OrganizationIdPath":{"description":"组织ID。","in":"path","name":"organization_id","required":true,"schema":{"maxLength":34,"pattern":"^o-[0-9a-z]{10,32}$","type":"string"}}},"schemas":{"ErrorResp":{"description":"异常错误","properties":{"error_code":{"description":"错误码","type":"string"},"error_msg":{"description":"错误消息内容","type":"string"}},"type":"object"},"ManagedPolicyAssignmentMetadata":{"description":"托管规则元数据。","properties":{"description":{"description":"规则描述。","maxLength":512,"pattern":"[^']+","type":"string"},"parameters":{"additionalProperties":{"$ref":"#/components/schemas/PolicyParameterValue"},"description":"输入参数。","type":"object"},"period":{"description":"触发周期。","enum":["One_Hour","Three_Hours","Six_Hours","Twelve_Hours","TwentyFour_Hours"],"type":"string"},"policy_definition_id":{"description":"预定义策略标识符。","maxLength":36,"pattern":"[\\w-]+","type":"string"},"policy_filter":{"$ref":"#/components/schemas/PolicyFilterDefinition"}},"required":["policy_definition_id"],"type":"object"},"OrganizationPolicyAssignmentRequest":{"description":"组织合规规则请求体。","properties":{"excluded_accounts":{"description":"需要排除配置规则的帐号。","items":{"maxLength":32,"pattern":"^[a-zA-Z\\d]+","type":"string"},"maxItems":1000,"type":"array"},"managed_policy_assignment_metadata":{"$ref":"#/components/schemas/ManagedPolicyAssignmentMetadata"},"organization_policy_assignment_name":{"description":"组织合规规则名称。","maxLength":60,"pattern":"^[a-zA-Z0-9_\\-]+","type":"string"}},"required":["organization_policy_assignment_name"],"type":"object"},"OrganizationPolicyAssignmentResponse":{"description":"组织合规规则部署返回。","properties":{"created_at":{"description":"创建时间。","type":"string"},"description":{"description":"描述信息。","type":"string"},"organization_id":{"description":"组织ID。","type":"string"},"organization_policy_assignment_id":{"description":"组织合规规则ID。","type":"string"},"organization_policy_assignment_name":{"description":"组织合规规则名称。","type":"string"},"organization_policy_assignment_urn":{"description":"组织合规规则资源唯一标识。","type":"string"},"owner_id":{"description":"组织合规规则创建者。","type":"string"},"parameters":{"additionalProperties":{"$ref":"#/components/schemas/PolicyParameterValue"},"description":"规则参数。","type":"object"},"period":{"description":"触发周期。","type":"string"},"policy_definition_id":{"description":"策略ID。","type":"string"},"policy_filter":{"$ref":"#/components/schemas/PolicyFilterDefinition"},"updated_at":{"description":"更新时间。","type":"string"}},"type":"object"},"PolicyFilterDefinition":{"description":"规则过滤器","properties":{"region_id":{"description":"区域ID","maxLength":128,"type":"string"},"resource_id":{"description":"资源ID","maxLength":512,"type":"string"},"resource_provider":{"description":"云服务名称","maxLength":128,"type":"string"},"resource_type":{"description":"资源类型","maxLength":128,"type":"string"},"tag_key":{"description":"标签键","maxLength":128,"type":"string"},"tag_value":{"description":"标签值","maxLength":256,"type":"string"}},"type":"object"},"PolicyParameterValue":{"description":"规则参数值","properties":{"value":{"description":"规则参数值","type":"object"}},"type":"object"}}},"consumes":"","definitions":null,"description":null,"group_id":"71684d03de7545d7bdc1ae5caf95614f","host":"rms.myhuaweicloud.com","id":"5145cf9f324f46c3bae85a9638f9f880","info_version":"v1","method":"put","name":"CreateOrganizationPolicyAssignment","parameters":null,"paths":{"/v1/resource-manager/organizations/{organization_id}/policy-assignments":{"put":{"description":"创建或更新组织合规规则,如果规则名称已存在,则为更新操作。","operationId":"CreateOrganizationPolicyAssignment","parameters":[{"$ref":"#/components/parameters/AuthToken"},{"$ref":"#/components/parameters/OrganizationIdPath"}],"requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/OrganizationPolicyAssignmentRequest"}}},"description":"组织规则定义对象。"},"responses":{"200":{"content":{"application/json":{"example":{"created_at":1642487874432,"description":"The ECS resource is non-compliant if the image it used is not in the allowed list.","organization_id":"o-doxbpkzqsdd51ti1k27w2y8fitakrknp","organization_policy_assignment_id":"d02b7fa9d5a74e638c1402d0868f71fd","organization_policy_assignment_name":"allowed-images-by-id","organization_policy_assignment_urn":"rms::e74e043fab784a45ad88f5ef6a4bcffc:organizationPolicyAssignment:o-doxbpkzqsdd51ti1k27w2y8fitakrknp/d02b7fa9d5a74e638c1402d0868f71fd","owner_id":"e74e043fab784a45ad88f5ef6a4bcffc","parameters":{},"period":null,"policy_definition_id":"5fa265c0aa1e6afc05a0ff07","policy_filter":{"region_id":null,"resource_id":null,"resource_provider":"evs","resource_type":"volumes","tag_key":null,"tag_value":null},"updated_at":1642487874432},"schema":{"$ref":"#/components/schemas/OrganizationPolicyAssignmentResponse"}}},"description":"操作成功。"},"400":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorResp"}}},"description":"输入参数不合法。"},"403":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorResp"}}},"description":"用户认证失败或无操作权限。"},"500":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorResp"}}},"description":"服务器内部错误。"}},"security":[{"AccessKeyAuth":[]}],"summary":"创建或更新组织合规规则","tags":["Policy"],"x-is-registered":"Y","x-open-region-cloud":"hc,hk","x-publishpath":"rms_04_0515","x-request-examples-1":{"managed_policy_assignment_metadata":{"description":"The ECS resource is non-compliant if the image it used is not in the allowed list.","parameters":{"listOfAllowedImages":{"value":["ea0d6e0e-99c3-406d-a873-3bb45462b624"]}},"policy_definition_id":"5fa265c0aa1e6afc05a0ff07","policy_filter":{"resource_provider":"ecs","resource_type":"cloudservers"}},"organization_policy_assignment_name":"allowed-images-by-id"},"x-request-examples-description-1":"创建或更新组织合规规则。","x-request-examples-url-1":"PUT https://{endpoint}/v1/resource-manager/organizations/{organization_id}/policy-assignments","x-support-sdk":"Y"}}},"product_short":"RMS","region_id":"cn-north-4","schemes":["HTTPS"],"security_definitions":null,"summary":"创建或更新组织合规规则","tags":"合规性","uri":null,"version":"3.0.0"}