{"base_path":"/","components":null,"consumes":"","definitions":{"DbObjectSpaceInfo":{"description":"数据库对象空间信息,数据来源于information_schema.tables系统表。已用空间包含数据空间、索引空间和碎片空间。","properties":{"data_size":{"description":"数据空间,以字节为单位","format":"int64","type":"integer"},"estimated_rows":{"description":"估算值行数,以字节为单位","format":"int64","type":"integer"},"index_size":{"description":"索引空间,以字节为单位","format":"int64","type":"integer"},"object_id":{"description":"对象ID","type":"string"},"object_name":{"description":"对象名称","type":"string"},"object_type":{"description":"对象类型,如果是table,同时需要传database_id","enum":["database","table"],"type":"string"},"used_size":{"description":"已使用空间,以字节为单位","format":"int64","type":"integer"}},"required":["object_type","object_name"]},"ErrorResp":{"description":"失败时返回的错误对象","properties":{"error_code":{"description":"错误码","maxLength":36,"minLength":8,"type":"string"},"error_msg":{"description":"错误描述","maxLength":512,"minLength":2,"type":"string"}},"required":["error_code","error_msg"]},"InstanceSpaceInfo":{"description":"实例空间信息。数据来源于文件系统。已用空间包含数据空间、日志空间和其他空间,其他空间包括引擎产生的临时文件等。","properties":{"avg_daily_growth":{"description":"近七日的数据平均日增长量,以字节为单位","format":"int64","type":"integer"},"data_size":{"description":"数据空间,以字节为单位","format":"int64","type":"integer"},"last_result_time":{"description":"最后一次分析的结果时间,毫秒单位时间戳","format":"int64","type":"integer"},"log_size":{"description":"日志空间,以字节为单位","format":"int64","type":"integer"},"total_size":{"description":"实例总空间,以字节为单位。GaussDB(for MySQL)不会返回总空间","format":"int64","type":"integer"},"used_size":{"description":"已使用空间,以字节为单位","format":"int64","type":"integer"}}},"ListSpaceAnalysisResp":{"description":"空间分析结果","properties":{"db_objects":{"description":"数据库对象列表","items":{"$ref":"#/definitions/DbObjectSpaceInfo"},"type":"array"},"instance_info":{"$ref":"#/definitions/InstanceSpaceInfo"},"total":{"description":"记录总数","format":"int64","type":"integer"}},"required":["total","db_objects"]}},"description":null,"group_id":"7f831fc0dd494cfe86eff0b79e4f207d","host":"das.cn-north-4.myhuaweicloud.com","id":"faee7a4c45d142a29ecb0f987d4b102b","info_version":"v3","method":"get","name":"ListSpaceAnalysis","parameters":{},"paths":{"/v3/{project_id}/instances/{instance_id}/space-analysis":{"get":{"description":"获取空间分析数据列表。实例级别数据来源于文件系统,库级别和表级别数据来源于information_schema.tables表。空间&元数据分析最多分析10000张表,若缺少库表空间数据,可能是因为数据库实例表个数过多或者账号未保存密码。如果为保存密码,请使用用户管理接口或页面录入数据库账号。支持MySQL和GaussDB(for MySQL)引擎","operationId":"ListSpaceAnalysis","parameters":[{"description":"项目ID","in":"path","name":"project_id","required":true,"type":"string"},{"description":"实例ID","in":"path","name":"instance_id","required":true,"type":"string"},{"description":"用户token","in":"header","name":"X-Auth-Token","required":true,"type":"string"},{"description":"语言","in":"header","name":"X-Language","required":false,"type":"string"},{"default":"database","description":"对象类型","enum":["database","table"],"in":"query","name":"object_type","required":true,"type":"string"},{"description":"数据库ID","in":"query","name":"database_id","required":false,"type":"string"},{"default":"0","description":"偏移量。从第一条数据偏移offset条数据后开始查询,默认为0(偏移0条数据,表示从第一条数据开始查询),必须为数字,不能为负数。offset必须是limit的整数倍。","in":"query","name":"offset","required":false,"type":"string"},{"default":"100","description":"查询记录数。默认为100,不能为负数,最小值为1,最大值为100。","in":"query","name":"limit","required":false,"type":"string"},{"default":"true","description":"是否返回实例级别数据,取值:true或者false","in":"query","name":"show_instance_info","required":false,"type":"string"},{"description":"引擎类型","enum":["MySQL","GaussDB(for MySQL)"],"in":"query","name":"datastore_type","required":true,"type":"string"}],"responses":{"200":{"description":"Success.","examples":{"application/json":{"db_objects":[{"data_size":129646592,"index_size":38895616,"object_id":"24937","object_name":"db_01","object_type":"database","used_size":171687936},{"data_size":41484288,"index_size":38895616,"object_id":"24936","object_name":"test_db","object_type":"database","used_size":84574208}],"instance_info":{"avg_daily_growth":86016,"data_size":256262144,"last_result_time":1615323657065,"log_size":2100001252,"total_size":42949672960,"used_size":2635862016},"total":2}},"schema":{"$ref":"#/definitions/ListSpaceAnalysisResp"}},"400":{"description":"Client error.","schema":{"$ref":"#/definitions/ErrorResp"}},"500":{"description":"Server error.","schema":{"$ref":"#/definitions/ErrorResp"}}},"summary":"获取空间分析数据列表","tags":["云DBA"],"x-das-is-publish":"#ListSpaceAnalysis_Placeholder#","x-is-registered":"Y","x-order":11,"x-request-examples-description-1":"获取数据库列表","x-request-examples-description-2":"获取表列表","x-request-examples-url-1":"GET https://das.cn-north-1.myhuaweicloud.com/v3/054e292c9880d4992f02c0196d3ea468/instances/fa7d0b6e40704cd48facf9889d6e745bin01/space-analysis?datastore_type=MySQL&object_type=database&show_instance_info=true&offset=0&limit=100","x-request-examples-url-2":"GET https://das.cn-north-1.myhuaweicloud.com/v3/054e292c9880d4992f02c0196d3ea468/instances/fa7d0b6e40704cd48facf9889d6e745bin01/space-analysis?datastore_type=MySQL&object_type=table&database_id=24937&show_instance_info=false&offset=0&limit=100","x-support-sdk":"Y"}}},"product_short":"DAS","region_id":"cn-north-4","schemes":["HTTPS"],"security_definitions":null,"summary":"获取空间分析数据列表","tags":"云DBA","uri":null,"version":"2.0"}