{"base_path":"/","components":null,"consumes":"","definitions":{"ErrorResp":{"description":"失败时返回的错误对象","properties":{"error_code":{"description":"错误码","maxLength":36,"minLength":8,"type":"string"},"error_msg":{"description":"错误描述","maxLength":512,"minLength":2,"type":"string"}},"required":["error_code","error_msg"]},"ExportSlowLogsResp":{"properties":{"next_marker":{"description":"获取下一页所需的标识符。marker仅在3分钟内有效。","type":"string"},"slow_logs":{"description":"慢SQL集合。当集合为空时,说明慢SQL已全部导出。","items":{"$ref":"#/definitions/SlowLog"},"type":"array"}},"required":["slow_logs","next_marker"]},"SlowLog":{"properties":{"client":{"description":"客户端。","type":"string"},"database":{"description":"数据库名。","type":"string"},"execute_at":{"description":"执行开始时间(Unix timestamp),单位:毫秒。","format":"int64","type":"integer"},"lock_time":{"description":"锁等待耗时(秒)。","format":"double","type":"number"},"query_time":{"description":"执行耗时(秒)。","format":"double","type":"number"},"rows_examined":{"description":"扫描行数。","format":"int64","type":"integer"},"rows_sent":{"description":"返回行数。","format":"int64","type":"integer"},"sql":{"description":"SQL语句。","type":"string"},"user":{"description":"用户。","type":"string"}},"required":["sql","database","client","user","execute_at","query_time","lock_time","rows_examined","rows_sent"]}},"description":null,"group_id":"7f831fc0dd494cfe86eff0b79e4f207d","host":"das.cn-north-4.myhuaweicloud.com","id":"af3f66a8e31c477ab3f841bf58259df4","info_version":"v3","method":"get","name":"ExportSlowQueryLogs","parameters":{},"paths":{"/v3/{project_id}/instances/{instance_id}/slow-query-logs":{"get":{"description":"DAS收集慢SQL开关打开后,一次性导出指定时间范围内的慢SQL数据,支持分页滚动获取。该功能仅支持付费实例。","operationId":"ExportSlowQueryLogs","parameters":[{"description":"项目ID。","in":"path","name":"project_id","required":true,"type":"string"},{"description":"实例ID。","in":"path","name":"instance_id","required":true,"type":"string"},{"description":"数据库类型。支持MySQL、GaussDB(for MySQL)、PostgreSQL。","in":"query","name":"datastore_type","required":true,"type":"string"},{"description":"开始时间(Unix timestamp),单位:毫秒。","format":"int64","in":"query","name":"start_at","required":true,"type":"integer"},{"description":"结束时间(Unix timestamp),单位:毫秒。","format":"int64","in":"query","name":"end_at","required":true,"type":"integer"},{"description":"每页记录数。最大为2000。","format":"int32","in":"query","name":"limit","required":true,"type":"integer"},{"description":"指定一个标识符。获取第一页时不用赋值,获取下一页时取上页查询结果的返回值。","in":"query","name":"marker","required":false,"type":"string"},{"description":"用户Token。","in":"header","name":"X-Auth-Token","required":true,"type":"string"},{"description":"请求语言类型。","enum":["en-us","zh-cn"],"in":"header","name":"X-Language","required":false,"type":"string"}],"responses":{"200":{"description":"Success.","examples":{"application/json":{"next_marker":"DXF1ZXJ5QW5kRmV0Y2gBAAAAAAAJr48WZERxYkx5Q2VRQS1LSXRrRWt0VEN1QQ==","slow_logs":[{"client":"[100.79.0.248]","database":"123","execute_at":1612343898000,"lock_time":0,"query_time":10.000158309936523,"rows_examined":0,"rows_sent":1,"sql":"SELECT sleep(10)\nLIMIT 0, 50;","user":"root[root]"}]}},"schema":{"$ref":"#/definitions/ExportSlowLogsResp"}},"400":{"description":"Client error.","schema":{"$ref":"#/definitions/ErrorResp"}},"500":{"description":"Server error.","schema":{"$ref":"#/definitions/ErrorResp"}}},"summary":"导出慢SQL数据","tags":["云DBA"],"x-das-is-publish":"#ExportSlowQueryLogs_Placeholder#","x-is-registered":"Y","x-order":15,"x-request-examples-url-1":"GET https://das.cn-north-1.myhuaweicloud.com/v3/054e292c9880d4992f02c0196d3ea468/instances/da304cd5bbb944de828759bc7be3d3fein01/slow-query-logs?start_at=1611975464337&end_at=1611979064337&limit=10&marker=DXF1ZXJ5QW5kRmV0Y2gBAAAAAAAQH8YWSEFfM3FyOXZRNzJQOTVLNHNBOTQ2UQ==&datastore_type=MySQL","x-support-sdk":"Y"}}},"product_short":"DAS","region_id":"cn-north-4","schemes":["HTTPS"],"security_definitions":null,"summary":"导出慢SQL数据","tags":"云DBA","uri":null,"version":"2.0"}