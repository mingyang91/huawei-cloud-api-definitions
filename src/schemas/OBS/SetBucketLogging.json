{"base_path":"/","components":null,"consumes":"[\"application/xml;charset=UTF-8\"]","definitions":{"Error":{"description":"错误响应消息体\n","properties":{"Code":{"description":"错误响应消息体XML中错误响应对应的HTTP消息返回码,具体的错误码请参见[错误码-表2](https://support.huaweicloud.com/api-obs/obs_04_0115.html#obs_04_0115__d0e843)。\n","type":"string"},"HostId":{"description":"返回该消息的服务端ID。\n","type":"string"},"Message":{"description":"错误响应消息体XML中具体错误更全面、详细的英文解释,具体的错误消息请参见[错误码-表2](https://support.huaweicloud.com/api-obs/obs_04_0115.html#obs_04_0115__d0e843)。\n","type":"string"},"RequestId":{"description":"本次错误请求的请求ID,用于错误定位。\n","type":"string"},"Resource":{"description":"该错误相关的桶或对象资源。\n","type":"string"}}},"LoggingEnabled":{"description":"该元素起到对日志配置管理的使能作用(呈现此元素则打开日志配置,否则关闭配置)。在此元素下,可加入具体的日志配置信息。\n设置logging时必选。关闭logging时勿选。\n","properties":{"TargetBucket":{"description":"在生成日志时,配置日志桶的所有者可以指定一个桶用于存放产生的日志文件。需要保证配置日志文件的桶owner对存放日志文件的桶有FULL_CONTROL权限。支持多个桶生成的日志放在同一个目标桶中,如果这样做,就需要指定不同的TargetPrefix以达到为来自不同源桶的日志分类的目的。\n设置logging时必选。关闭logging时勿选。\n","type":"string"},"TargetGrants":{"description":"授权信息的容器。\n","items":{"$ref":"#/definitions/TargetGrantsGrant"},"type":"array"},"TargetPrefix":{"description":"通过该元素指定一个前缀,所有生成的日志对象的对象名都以此元素的内容为前缀。\n设置logging时必选。关闭logging时勿选。\n","type":"string"}}},"SetBucketLoggingRequestBody":{"description":"日志状态信息的容器。\n","properties":{"Agency":{"description":"目标桶Owner通过统一身份认证服务创建的对OBS服务的委托的名称。\n设置logging时必选。关闭logging时勿选。\n","type":"string"},"LoggingEnabled":{"$ref":"#/definitions/LoggingEnabled"}},"xml":{"name":"BucketLoggingStatus"}},"TargetGrantsGrant":{"description":"是被授权者及其权限的容器。用于描述谁有什么权限来访问产生的日志文件。\n","properties":{"Grantee":{"$ref":"#/definitions/TargetGrantsGrantGrantee"},"Permission":{"description":"产生的日志文件对被授权者的具体权限。\n\n- FULL_CONTROL 完全控制权限。\n- READ 读权限。\n- WRITE 写权限。\n","enum":["FULL_CONTROL","READ","WRITE"],"type":"string"}}},"TargetGrantsGrantGrantee":{"description":"作为被授权logging权限用户的容器。\n","properties":{"ID":{"description":"被授权者的租户ID,全局唯一标识\n","type":"string"}}}},"description":null,"group_id":"7d10a01d10854bd59cf6189eebfb9c7d","host":"obs.cn-north-4.myhuaweicloud.com","id":"0e6aaf570f6e439cb2ff31440d2a3ff5","info_version":"v1","method":"put","name":"SetBucketLogging","parameters":{},"paths":{"/":{"put":{"consumes":["application/xml"],"description":"创建桶时,默认是不生成桶的日志的,如果需要生成桶的日志,该桶需要打开日志配置管理的开关。桶日志功能开启后,桶的每次操作将会产生一条日志,并将多条日志打包成一个日志文件。日志文件存放位置需要在开启桶日志功能时指定,可以存放到开启日志功能的桶中,也可以存放到其他你有权限的桶中,但需要和开启日志功能的桶在同一个region中。\n\n由于日志文件是OBS产生,并且由OBS上传到存放日志的桶中,因此OBS需要获得委托授权,用于上传生成的日志文件,所以在配置桶日志管理前,需要先到统一身份认证服务生成一个对OBS服务的委托,并将委托名作为参数配置到桶上,并且在xml文件中<LoggingEnabled>标签下配置相应的日志管理功能。在为委托配置权限时只需设置目标桶的上传对象权限。\n#### 委托权限示例 ####\n```\n{\n    \"Version\": \"1.1\",\n    \"Statement\": [\n        {\n            \"Action\": [\n                \"obs:object:PutObject\"\n            ],\n            \"Resource\": [\n                \"OBS:*:*:object:mybucketlogs/*\"\n            ],\n            \"Effect\": \"Allow\"\n        }\n    ]\n}\n```\n关闭桶日志功能的方法是上传一个带有空的BucketLoggingStatus标签的logging文件。\n默认存储类别为低频访问存储或归档存储的桶不能作为存放日志文件的桶。日志文件存放到桶中后,这些日志文件会占用空间,并按照用户存放数据同样的计费策略进行计费。\n","operationId":"SetBucketLogging","parameters":[{"description":"请求消息中可带的签名信息。\n","in":"header","name":"Authorization","required":true,"type":"string"},{"description":"请求发起端的日期和时间,例如:Wed, 27 Jun 2018 13:39:15 +0000。\n默认值:无。\n条件:如果消息头中带了x-obs-date字段,则可以不带该字段,其他情况下必选。\n","in":"header","name":"Date","required":false,"type":"string","x-apiexplorer-format":"date-gmt"},{"description":"请求的桶名称。\n","in":"query","maxLength":63,"minLength":3,"name":"bucket_name","required":true,"type":"string","x-location-cname":true},{"allowEmptyValue":true,"description":"logging表示请求桶日志管理配置API。\n","in":"query","maxLength":0,"minLength":0,"name":"logging","required":true,"type":"string"},{"description":"按SHA安全加密标准计算出消息体的SHA256摘要字符串,即消息体256-bit SHA256值经过base64编码后得到的字符串\n","in":"header","name":"Content-HmacSHA256","required":false,"type":"string"},{"description":"日志状态信息的容器。\n","in":"body","name":"SetBucketLoggingRequestBody","required":true,"schema":{"$ref":"#/definitions/SetBucketLoggingRequestBody"}}],"produces":["application/xml"],"responses":{"200":{"description":"请求成功响应消息。\n","headers":{"Connection":{"description":"指明与服务器的连接是长连接还是短连接。\n","type":"string"},"Content-Length":{"description":"响应消息体的字节长度。\n","type":"string"},"Date":{"description":"OBS系统响应的时间。\n","type":"string"},"ETag":{"description":"对象的base64编码的128位MD5摘要。ETag是对象内容的唯一标识,可以通过该值识别对象内容是否有变化。比如上传对象时ETag为A,下载对象时ETag为B,则说明对象内容发生了变化。实际的ETag是对象的哈希值。ETag只反映变化的内容,而不是其元数据。上传的对象或拷贝操作创建的对象,通过MD5加密后都有唯一的ETag。如果通过多段上传对象,则无论加密方法如何,MD5会拆分ETag,此类情况ETag就不是MD5的摘要。\n","type":"string"},"x-obs-id-2":{"description":"帮助定位问题的特殊符号。\n","type":"string"},"x-obs-request-id":{"description":"由OBS创建来唯一确定本次请求的值,可以通过该值来定位问题。\n","type":"string"}}},"400":{"description":"请求失败响应消息。\n","schema":{"$ref":"#/definitions/Error"}}},"summary":"设置桶日志管理配置","tags":["桶的高级配置"],"x-is-registered":"Y","x-request-examples-1":"PUT /?logging HTTP/1.1 \nHost: bucketname.obs.cn-north-4.myhuaweicloud.com \nDate: date\nAuthorization: signatureValue\n<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<BucketLoggingStatus>\n  <Agency>agency-name</Agency>\n  <LoggingEnabled>\n    <TargetBucket>mybucketlogs</TargetBucket>\n    <TargetPrefix>mybucket-access_log-/</TargetPrefix>\n    <TargetGrants>\n      <Grant>\n        <Grantee>\n          <ID>domainID</ID>\n        </Grantee>\n        <Permission>READ</Permission>\n      </Grant>\n    </TargetGrants>\n  </LoggingEnabled>\n</BucketLoggingStatus>","x-request-examples-url-1":"/?logging","x-support-sdk":"N"}}},"product_short":"OBS","region_id":"cn-north-4","schemes":["HTTPS"],"security_definitions":null,"summary":"设置桶日志管理配置","tags":"桶的高级配置","uri":null,"version":"2.0"}