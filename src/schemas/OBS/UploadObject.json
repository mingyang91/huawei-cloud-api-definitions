{"base_path":"/","components":null,"consumes":"[\"application/xml;charset=UTF-8\"]","definitions":{"Error":{"description":"错误响应消息体\n","properties":{"Code":{"description":"错误响应消息体XML中错误响应对应的HTTP消息返回码,具体的错误码请参见[错误码-表2](https://support.huaweicloud.com/api-obs/obs_04_0115.html#obs_04_0115__d0e843)。\n","type":"string"},"HostId":{"description":"返回该消息的服务端ID。\n","type":"string"},"Message":{"description":"错误响应消息体XML中具体错误更全面、详细的英文解释,具体的错误消息请参见[错误码-表2](https://support.huaweicloud.com/api-obs/obs_04_0115.html#obs_04_0115__d0e843)。\n","type":"string"},"RequestId":{"description":"本次错误请求的请求ID,用于错误定位。\n","type":"string"},"Resource":{"description":"该错误相关的桶或对象资源。\n","type":"string"}}}},"description":null,"group_id":"7d10a01d10854bd59cf6189eebfb9c7d","host":"obs.cn-north-4.myhuaweicloud.com","id":"ae9f45aa385c461986d03ec13535e745","info_version":"v1","method":"post","name":"UploadObject","parameters":{},"paths":{"/":{"post":{"consumes":["multipart/form-data"],"description":"上传对象操作是指在指定的桶内增加一个对象,执行该操作需要用户拥有桶的写权限。\n\n说明:\n同一个桶中存储的对象名是唯一的。\n\n在桶未开启多版本的情况下,如果在指定的桶内已经有相同的对象键值的对象,用户上传的新对象会覆盖原来的对象;为了确保数据在传输过程中没有遭到破坏,用户可以在表单域中加入Content-MD5参数。在这种情况下,OBS收到上传的对象后,会对对象进行MD5校验,如果不一致则返回出错信息。用户还可以在上传对象时指定x-obs-acl参数,设置对象的权限控制策略。\n\n用户除了可以用PUT直接上传对象外,还可以使用POST上传对象。\n\n单次上传对象大小范围是[0, 5GB],如果需要上传超过5GB的大文件,需要通过多段操作来分段上传。\n\n该操作支持服务端加密功能。\n\n#### 与PUT上传的区别 ####\nPUT上传中参数通过请求头域传递;POST上传则作为消息体中的表单域传递。\n\nPUT上传需在URL中指定对象名;POST上传提交的URL为桶域名,无需指定对象名。两者的请求行分别为:\n\nPUT /ObjectName HTTP/1.1\n\nPOST / HTTP/1.1\n\n关于PUT上传的更多详细信息,请参考PUT上传。\n\n#### 多版本 ####\n如果桶的多版本状态是开启的,系统会自动为对象生成一个唯一的版本号;如果桶的多版本状态是暂停的,则系统生成的对象版本号为null,并由响应报头x-obs-version-id返回该版本号。关于桶的多版本状态,参见设置桶的多版本状态。","operationId":"UploadObject","parameters":[{"description":"桶名称\n","in":"query","maxLength":63,"minLength":3,"name":"bucket_name","required":true,"type":"string","x-location-cname":true},{"description":"上传的对象的内容。\n","in":"formData","name":"file","required":true,"type":"file"},{"description":"通过此请求创建的对象名称。\n","in":"formData","maxLength":1024,"minLength":1,"name":"key","required":true,"type":"string"},{"description":"请求消息中可带的签名信息。\n","in":"header","name":"Authorization","required":true,"type":"string"},{"description":"请求发起端的日期和时间,例如:Wed, 27 Jun 2018 13:39:15 +0000。\n默认值:无。\n条件:如果消息头中带了x-obs-date字段,则可以不带该字段,其他情况下必选。","in":"header","name":"Date","required":false,"type":"string","x-apiexplorer-format":"date-gmt"},{"description":"预请求指定的跨域请求Origin(通常为域名)。\n","in":"header","name":"Origin","required":true,"type":"string"},{"description":"实际请求可以带的HTTP头域,可以带多个头域。\n","in":"header","name":"Access-Control-Request-Headers","required":false,"type":"string"},{"description":"用来指明请求发起者的Access Key。\n约束条件:如果该请求包括安全策略参数policy或signature时,则必须包括此参数。","in":"formData","name":"AccessKeyId","required":false,"type":"string"},{"description":"该请求的安全策略描述。\n限制:当Bucket提供了AccessKeyId(或signature)表单域时,则必须包括此参数。","in":"formData","name":"policy","required":false,"type":"string"},{"description":"根据StringToSign计算出的签名字符串。\n限制:当Bucket提供了AccessKeyId(或policy)表单域时,则必须包括此参数。","in":"formData","name":"signature","required":false,"type":"string"},{"description":"用来统一指明请求发起者的AccessKey,请求签名和请求的安全策略。 token的优先级高于单独指定的AccessKey,请求签名和请求的安全策略。 示例: HTML中:\\<input type=\"text\" name=\"token\" value=\"ak:signature:policy\" />","in":"formData","name":"token","required":false,"type":"string"},{"description":"创建对象时,可以加上此消息头设置对象的权限控制策略,使用的策略为预定义的常用策略,包括:private;public-read;public-read-write;bucket-owner-full-control(各策略详细说明见ACL章节的“使用头域设置ACL”)。 示例: POLICY中:{\"acl\": \"public-read\" }, HTML中:\\<input type=\"text\" name=\"acl\" value=\"public-read\" />","enum":["private","public-read","public-read-write","bucket-owner-full-control"],"in":"formData","name":"x-obs-acl","required":false,"type":"string"},{"description":"创建对象时,使用此头域授权domain下所有用户有读对象和获取对象元数据的权限。\n\n示例:\nPOLICY中:{\"grant-read\": \"id=domainId1\" },\nHTML中:\\<input type=\"text\" name=\"grant-read\" value=\"id=domainId1\" />","in":"formData","name":"x-obs-grant-read","required":false,"type":"string"},{"description":"创建对象时,使用此头域授权domain下所有用户有获取对象ACL的权限。\n\n示例:\nPOLICY中:{\"grant-read-acp\": \"id=domainId1\" },\nHTML中:\\<input type=\"text\" name=\"grant-read-acp\" value=\"id=domainId1\" />","in":"formData","name":"x-obs-grant-read-acp","required":false,"type":"string"},{"description":"创建对象时,使用此头域授权domain下所有用户有写对象ACL的权限。\n\n示例:\nPOLICY中:{\"grant-write-acp\": \"id=domainId1\" },\nHTML中:\\<input type=\"text\" name=\"grant-write-acp\" value=\"id=domainId1\" />","in":"formData","name":"x-obs-grant-write-acp","required":false,"type":"string"},{"description":"创建对象时,使用此头域授权domain下所有用户有读对象、获取对象元数据、获取对象ACL、写对象ACL的权限。\n\n示例:\nPOLICY中:{\"grant-full-control\": \"id=domainId1\" },\nHTML中:\\<input type=\"text\" name=\"grant-full-control\" value=\"id=domainId1\" />","in":"formData","name":"x-obs-grant-full-control","required":false,"type":"string"},{"description":"创建对象时,可以加上此头域设置对象的存储类型。如果未设置此头域,则以桶的默认存储类型作为对象的存储类型。\n\n示例:\nPOLICY中:{\"storage-class\": \"STANDARD\" },\nHTML中:\\<input type=\"text\" name=\"x-obs-storage-class\" value=\"STANDARD\" />","enum":["STANDARD","WARM","COLD"],"in":"formData","name":"x-obs-storage-class","required":false,"type":"string"},{"description":"此参数的值是一个URL,用于指定当此次请求操作成功响应后的重定向的地址。\n\n如果此参数值有效且操作成功,响应码为303,Location头域由此参数以及桶名、对象名、对象的ETag组成。\n如果此参数值无效,则OBS忽略此参数的作用,响应码为204,Location头域为对象地址。\n\n示例:\nPOLICY中:{\"success_action_redirect\": \"http://123458.com\"},\nHTML中:\\<input type=\"text\" name=\"success_action_redirect\" value=\"http://123458.com\" />","in":"formData","name":"success_action_redirect","required":false,"type":"string"},{"description":"创建对象时,可以在HTTP请求中加入“x-obs-meta-”消息头或以“x-obs-meta-”开头的消息头,用来加入自定义的元数据,以便对对象进行自定义管理。当用户获取此对象或查询此对象元数据时,加入的自定义元数据将会在返回消息的消息头中出现。更多说明详见对象自定义元数据介绍。\n\n示例:\nPOLICY中:{\" x-obs-meta-test \": \" test metadata \" },\nHTML中:\\<input type=\"text\" name=\" x-obs-meta-test \" value=\" test metadata \" />","in":"formData","name":"x-obs-meta-xxx","required":false,"type":"string"},{"description":"创建对象时,可以在HTTP请求中加入“x-obs-persistent-headers”消息头,用来加入一个或多个自定义的响应头,当用户获取此对象或查询此对象元数据时,加入的自定义响应头将会在返回消息的头域中出现。\n\n示例:\nPOLICY中:{\"x-obs-persistent-headers\": \"key1:dmFsdWUx,key2:dmFsdWUy\" },\nHTML中:\\<input type=\"text\" name=\"x-obs-persistent-headers\" value=\"key1:dmFsdWUx,key2:dmFsdWUy\" />\n下载此对象或获取此对象元数据时:返回两个头域分别为“key1:value1”与“key2:value2”\n\n约束:\n\n1. 通过该方式指定的自定义响应头不能以“x-obs-”为前缀,比如可以指定“key1”,但是不能指定“x-obs-key1”\n\n2. 不能指定http标准头,例如host/content-md5/origin/range/Content-Disposition等\n\n3. 此头域和自定义元数据总长度不能超过8KB\n\n4. 如果传入相同key,将value以“,”拼接后放入同一个key中返回","in":"formData","name":"x-obs-persistent-headers","required":false,"type":"string"},{"description":"这个参数指定成功响应的状态码,允许设定的值为200,201,204。\n\n如果此参数值被设定为200或204,OBS响应消息中body为空。\n如果此参数值被设定为201,则OBS响应消息中包含一个XML文档描述此次请求的响应。\n当请求不协带此参数或参数无效时,OBS响应码为204。\n类型:字符串。\n\n示例:\nPOLICY中:[\"starts-with\", \"$success_action_status\", \"\"],\nHTML中:\\<input type=\"text\" name=\"success_action_status\" value=\"200\" />","in":"formData","name":"success_action_status","required":false,"type":"string"},{"description":"当桶设置了Website配置,可以将获取这个对象的请求重定向到桶内另一个对象或一个外部的URL,OBS将这个值从头域中取出,保存在对象的元数据中。\n\n约束:必须以“/”、“http://”或“https://”开头,长度不超过2K。","in":"formData","name":"x-obs-website-redirect-location","required":false,"type":"string"},{"description":"使用该头域表示服务端加密是SSE-KMS方式。\n\n示例:x-obs-server-side-encryption:kms","in":"formData","name":"x-obs-server-side-encryption","required":false,"type":"string"},{"description":"SSE-KMS方式下使用该头域,该头域表示主密钥,如果用户没有提供该头域,那么默认的主密钥将会被使用。\n\n支持两种格式的描述方式:\n\n1、regionID:domainID(租户ID):key/key_id\n或者\n2、key_id\n\n其中regionID是使用密钥所属region的ID;domainID是使用密钥所属租户的租户ID;key_id是从数据加密服务创建的密钥ID。\n\n示例:\n1、x-obs-server-side-encryption-kms-key-id:cn-north-4:domainiddomainiddomainiddoma0001:key/4f1cd4de-ab64-4807-920a-47fc42e7f0d0 \n或者\n2、x-obs-server-side-encryption-kms-key-id:4f1cd4de-ab64-4807-920a-47fc42e7f0d0","in":"formData","name":"x-obs-server-side-encryption-kms-key-id","required":false,"type":"string"},{"description":"SSE-C方式下使用该头域,该头域表示加密使用的算法。\n\n示例:x-obs-server-side-encryption-customer-algorithm:AES256\n\n约束:需要和x-obs-server-side-encryption-customer-key, x-obs-server-side-encryption-customer-key-MD5一起使用。","in":"formData","name":"x-obs-server-side-encryption-customer-algorithm","required":false,"type":"string"},{"description":"SSE-C方式下使用该头域,该头域表示加密使用的密钥。该密钥用于加密对象。\n\n示例:x-obs-server-side-encryption-customer-key:K7QkYpBkM5+hcs27fsNkUnNVaobncnLht/rCB2o/9Cw=\n\n约束:该头域由256-bit的密钥经过base64-encoded得到,需要和x-obs-server-side-encryption-customer-algorithm,x-obs-server-side-encryption-customer-key-MD5一起使用。","in":"formData","name":"x-obs-server-side-encryption-customer-key","required":false,"type":"string"},{"description":"SSE-C方式下使用该头域,该头域表示加密使用的密钥的MD5值。MD5值用于验证密钥传输过程中没有出错。\n\n示例:x-obs-server-side-encryption-customer-key-MD5:4XvB3tbNTN+tIEVa0/fGaQ==\n\n约束: 该头域由密钥的128-bit MD5值经过base64-encoded得到,需要和x-obs-server-side-encryption-customer-algorithm,x-obs-server-side-encryption-customer-key一起使用。","in":"formData","name":"x-obs-server-side-encryption-customer-key-MD5","required":false,"type":"string"},{"description":"表示对象的过期时间,单位是天。过期之后对象会被自动删除。(从对象最后修改时间开始计算)\n\n示例:x-obs-expires:3","format":"int32","in":"formData","name":"x-obs-expires","required":false,"type":"integer"}],"produces":["application/xml"],"responses":{"200":{"description":"服务器成功返回用户请求的数据。\n","headers":{"Access-Control-Allow-Headers":{"description":"当桶设置了CORS配置,如果请求的headers满足服务端的CORS配置,则在响应中包含这个headers\n","type":"string"},"Access-Control-Allow-Methods":{"description":"当桶设置了CORS配置,如果请求的Access-Control-Request-Method满足服务端的CORS配置,则在响应中包含这条rule中的Methods。\n","type":"string"},"Access-Control-Allow-Origin":{"description":"当桶设置了CORS配置,如果请求的Origin满足服务端的CORS配置,则在响应中包含这个Origin。\n","type":"string"},"Access-Control-Expose-Headers":{"description":"当桶设置了CORS配置,服务端CORS配置中的ExposeHeader。\n","type":"string"},"Access-Control-Max-Age":{"description":"当桶设置了CORS配置,服务端CORS配置中的MaxAgeSeconds。\n","format":"int32","type":"integer"},"Connection":{"description":"指明与服务器的连接是长连接还是短连接。\n","type":"string"},"Content-Length":{"description":"响应消息体的字节长度。\n","type":"string"},"Date":{"description":"OBS系统响应的时间。\n","type":"string"},"ETag":{"description":"对象的base64编码的128位MD5摘要。ETag是对象内容的唯一标识,可以通过该值识别对象内容是否有变化。比如上传对象时ETag为A,下载对象时ETag为B,则说明对象内容发生了变化。实际的ETag是对象的哈希值。ETag只反映变化的内容,而不是其元数据。上传的对象或拷贝操作创建的对象,通过MD5加密后都有唯一的ETag。如果通过多段上传对象,则无论加密方法如何,MD5会拆分ETag,此类情况ETag就不是MD5的摘要。\n","type":"string"},"x-obs-id-2":{"description":"帮助定位问题的特殊符号。\n","type":"string"},"x-obs-request-id":{"description":"由OBS创建来唯一确定本次请求的值,可以通过该值来定位问题。\n","type":"string"},"x-obs-server-side-encryption":{"description":"如果服务端加密是SSE-KMS方式,响应包含该头域。\n","type":"string"},"x-obs-server-side-encryption-customer-algorithm":{"description":"如果服务端加密是SSE-C方式,响应包含该头域,该头域表示加密使用的算法。\n","type":"string"},"x-obs-server-side-encryption-customer-key-MD5":{"description":"如果服务端加密是SSE-C方式,响应包含该头域,该头域表示加密使用的密钥的MD5值。\n","type":"string"},"x-obs-server-side-encryption-kms-key-id":{"description":"如果服务端加密是SSE-KMS方式,响应包含该头域,该头域表示主密钥。\n格式为: regionID:domainID(租户ID):key/key_id\n其中regionID是使用密钥所属region的ID;domainID是使用密钥所属租户的租户ID;key_id是本次加密使用的密钥ID。\n","type":"string"},"x-obs-version-id":{"description":"对象的版本号。如果桶的多版本状态为开启,则会返回对象的版本号。如果桶的多版本状态为暂停,则会返回null。\n","type":"string"}}},"400":{"description":"请求失败响应消息。\n","schema":{"$ref":"#/definitions/Error"}}},"summary":"POST上传对象","tags":["对象操作"],"x-apigateway-request-type":"Public","x-is-registered":"Y","x-support-sdk":"N"}}},"product_short":"OBS","region_id":"cn-north-4","schemes":["HTTPS"],"security_definitions":null,"summary":"POST上传对象","tags":"对象操作","uri":null,"version":"2.0"}