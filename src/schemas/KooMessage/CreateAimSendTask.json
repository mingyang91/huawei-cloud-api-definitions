{"base_path":null,"components":null,"consumes":"","definitions":{"AIMResolveTask":{"description":"生成发送任务短链配置信息","properties":{"aim_code_type":{"description":"智能信息编码类型。\n- group:群发\n- individual:个性化\n\n> 智能信息编码类型选择群发时,所有发送使用同一个短链,无法获取到单个手机号码的解析情况。\n","example":"group","type":"string"},"domain":{"description":"自定义短链域名,由大小写字母和数字组成的二级域名。\n\n > 自定义短码即generation_type为2时,此参数为必填。域名需要提前报备,请联系KooMessage运营人员进行域名报备,域名区分生成短码方式,如报备的是标准生成短码方式,则在自定义生成短码时不能使用此域名。\n","example":"km2n.cn","maxLength":100,"pattern":"[a-zA-Z0-9][-a-zA-Z0-9]{0,62}(\\.[a-zA-Z0-9][-a-zA-Z0-9]{0,62})+\\.?","type":"string"},"expiration_time":{"description":"失效时间(天)。aim_code_type为group时,取值范围为1~180;aim_code_type为individual个性化时,取值范围为1~7。\n\n> 失效时间精确到秒,例如参数设置为1,创建时间为2022-07-22 21:10:12,过期时间为2022-07-23 21:10:12。\n","example":7,"type":"integer"},"generation_type":{"description":"生成短码方式。\n\n- 1:标准\n- 2:自定义\n\n> 默认1,即标准生成短码。\n","type":"string"},"params":{"description":"短链解析详情列表。一次请求最多100个短链。\n\n> OPPO模板一次最多申请10个短链。\n","items":{"$ref":"#/definitions/CreateResolveTaskParam"},"maxItems":100,"type":"array"},"resolve_times":{"description":"短链的最大解析次数。\n\n> 个性化短链只支持最大解析数为1,设置其他值无效\n","example":10000,"maximum":10000000,"minimum":1,"type":"integer"},"tpl_id":{"description":"智能信息模板ID,由9位数字组成。","example":"600000000","maxLength":9,"minLength":1,"type":"string"}},"required":["aim_code_type","expiration_time","params","resolve_times","tpl_id"]},"AIMResolveTaskRequestMode":{"description":"短链配置","properties":{"aim_code_type":{"description":"智能信息编码类型。\n- group:群发\n- individual:个性化\n","example":"group","type":"string"},"domain":{"description":"自定义短链域名,由大小写字母和数字组成的二级域名。\n\n> 当生成类型为自定义生成短码时必填\n","example":"km2n.cn","maxLength":100,"pattern":"[a-zA-Z0-9][-a-zA-Z0-9]{0,62}(\\.[a-zA-Z0-9][-a-zA-Z0-9]{0,62})+\\.?","type":"string"},"expiration_time":{"description":"失效时间(天)。","example":7,"type":"integer"},"generation_type":{"description":"生成短码方式。\n\n- 1:标准\n- 2:自定义\n","type":"string"},"params":{"description":"短链解析详情列表。一次请求最多100个短链。","items":{"$ref":"#/definitions/CreateResolveTaskParam"},"maxItems":100,"type":"array"},"resolve_times":{"description":"短链的最大解析次数。\n","example":10000,"type":"integer"},"tpl_id":{"description":"智能信息模板ID,由9位数字组成。","example":"600000000","type":"string"}}},"AIMSendTaskRequestMode":{"description":"发送智能信息响应。","properties":{"resolve_task":{"$ref":"#/definitions/AIMResolveTaskRequestMode","description":"短链生成配置。\n"},"sms_channel":{"$ref":"#/definitions/SmsChannel"},"task_name":{"description":"智能信息发送任务名称。","example":"短信发送","type":"string"}}},"AimErrorMsg":{"description":"错误模型。","properties":{"error_code":{"description":"结果状态码。","type":"string"},"error_message":{"description":"结果详情。\n\n> 该字段在以后可能会废弃,建议使用error_msg字段对接。\n"},"error_msg":{"description":"结果详情。","type":"string"}}},"CreateAIMSendTaskRsp":{"allOf":[{"$ref":"#/definitions/AIMSendTaskRequestMode"},{"properties":{"creation_time":{"description":"创建时间。样例:2019-10-12T07:20:50.522Z。","format":"date-time","type":"string"},"failed_short_chains":{"description":"短链生成失败列表。\n","items":{"$ref":"#/definitions/CreateResolveTaskParamMode"},"type":"array"},"resolve_count":{"description":"智能信息解析成功的手机号码总数。\n","type":"integer"},"send_count":{"description":"发送数量。","type":"integer"},"submission_count":{"description":"提交的手机号码总数。","type":"integer"},"support_resolve_count":{"description":"支持智能信息解析的手机号码总数。\n\n>通过API发送的智能信息任务不做解析能力判断,返回-1作为标识。\n","type":"integer"},"task_id":{"description":"任务ID。","type":"string"},"task_state":{"description":"任务状态。\n\n- Success:发送成功\n- Failed:发送失败\n\n> 此状态仅代表任务提交状态,不代表智能信息发送结果。用户手机接收智能信息结果请以收到的回执结果为准,也可通过查询智能信息发送明细API获取或登录KooMessage控制台查看。\n","type":"string"}}}],"description":"智能信息发送任务。"},"CreateAimSendTaskRequestBody":{"description":"发送AIM消息体。","properties":{"resolve_task":{"$ref":"#/definitions/AIMResolveTask","description":"短链生成配置。\n"},"sms_channel":{"$ref":"#/definitions/SmsChannel"},"task_name":{"description":"智能信息发送任务名称。\n\n> 不能为空白字符串。\n","example":"短信发送","type":"string"}},"required":["resolve_task","sms_channel","task_name"]},"CreateResolveTaskParam":{"description":"生成短链的参数对象。","properties":{"cust_flag":{"description":"创建解析任务时填写用户唯一标识,手机号码或者任何的唯一标识,唯一标识不超过64个字符。 发送智能信息时则必须填客户的手机号码。样例为:130****0001。","example":"130****0001","maxLength":64,"type":"string"},"custom_short_code":{"description":"自定义短码,支持长度为3到10位的数字或大小写字母。样例为:aDC123。\n> 自定义短码时即generation_type为2时,此参数为必填。","example":"abc12","maxLength":10,"minLength":3,"type":"string"},"custom_url":{"description":"自定义跳转地址。长度要求不超过2048。\n> - 未填时,终端用户点击短信原文中的短链后,跳转智能信息模板H5页\n> - 已填时,终端用户点击短信原文中的短链后,跳转该字段对应的页面,填写时必须为http或https作为前缀\n> - 使用自定义跳转链接功能请联系KooMessage运营人员进行域名备案\n> - 自定义短码时即generation_type为2时不支持自定义跳转链接功能,传入的参数值无效\n","example":"https://www.xxxx.com","pattern":"^http[s]{0,1}://([\\w-]+\\.)+[\\w-]+(/[\\w-./?%&=]*)?$","type":"string"},"dync_params":{"additionalProperties":{"example":"param","type":"string"},"description":"动态参数。\n\n> 使用动态参数模板时,aim_code_type字段只能为individual。\n","type":"object"},"sms_params":{"description":"短信模板参数。\n- 短信模板中的变量类型可以是:短链、电话号码、其他号码(验证码、订单号、密码等)、日期时间、金额、其他(名称、账号、地址等)。\n- 字符串数组,最多19个。\n- 数组中参数按短信模板中除了短链类型参数外的变量的顺序进行匹配,比如短信模板内容中按顺序有3个变量:${1}、${2}、${3},其中${1}表示手机号码,${2}表示短链,${3}表示日期,则sms_params传的是:[手机号码, 日期]。\n- 如果短信模板只包含短链1个参数,则sms_params传空数组。\n- 电话号码长度限制1-15个字符,可以传入手机号、座机号、95或400、800电话等。\n- 其他号码长度限制1-20个字符,不允许出现手机号、QQ号、微信号、URL等联系方式,仅支持大小写字母和数字组合。\n- 时间长度限制1-20个字符,日期格式:yyyyMMdd、yyyy-MM-dd、yyyy/MM/dd、yyyy年mm月dd日,时间格式:HH:mm:ss、HH:mm、HH点mm分、HH点mm。如果需要同时指定日期和时间,请在模板中填充两个变量,一个变量传入日期,另一个变量传入时间。\n- 金额长度限制1-20个字符,仅支持传入能够正常表达金额的数字、小数点或中文,例如壹、贰、叁、肆等,支持传入IP地址,例如:10.1.1.10。¥$等货币符号需要放在模板中,不支持变量传入。\n- 其他长度限制1-20个字符,可以设置为公司/产品/地址/姓名/内容/账号/会员名等。不允许出现QQ号/微信号(公众号)/手机号/网址/座机号等联系方式。如果确有需要,请将联系方式放入模板中,不允许在传入值中携带“.”、“。”、“'”、“<”、“>”、“{”或“}”。否则,可能导致模板变量解析异常。不允许在传入值中携带“.”,即不支持传入IP地址,如变量取值为IP地址,请申请模板时选择变量属性为“金额”。\n","items":{"description":"短信模板参数。","example":"参数1","type":"string"},"type":"array"}},"required":["cust_flag"],"type":"object"},"CreateResolveTaskParamMode":{"description":"生成短链的响应参数对象。","properties":{"aim_code":{"description":"智能信息编码,样例:PDiWqc。","example":"asides","type":"string"},"aim_url":{"description":"完整的短链连接地址,通过自己的短信渠道发送时,需要把该短链添加到短信模板中,并确保发送短信时的签名与创建短链时的签名保持一致。样例:km2g.cn/PDiWqc。","example":"aim6.cn/asides","type":"string"},"cust_flag":{"description":"创建解析任务时填写用户唯一标识,手机号码或者任何的唯一标识,唯一标识不超过64个字符。 发送智能信息时则必须填客户的手机号码。样例为:130****0001。","example":"130****0001","type":"string"},"cust_id":{"description":"租户ID。","example":"231724915a62455ca356e10a085c0000","type":"string"},"custom_short_code":{"description":"自定义短码,支持长度为3到10位的数字或大小写字母。样例为:aDC123。","type":"string"},"custom_url":{"description":"自定义跳转地址。\n> - 未填时,终端用户点击访问短信原文中的短链,跳转智能信息H5页\n> - 已填时,终端用户点击访问短信原文中的短链,跳转客户填写的链接落地页,填写时必须为http或https作为前缀\n","type":"string"},"dync_params":{"additionalProperties":{"type":"string"},"description":"动态参数。","type":"object"},"error_message":{"description":"短链申请结果错误描述。\n","example":"成功","type":"string"},"expire_date":{"description":"短链到期时间。样例为:2019-10-12T07:20:50Z。","example":"2019-10-12T07:20:50","type":"string"},"ext_data":{"description":"自定义扩展参数。\n\n>预留字段。\n","type":"string"},"generate_date":{"description":"短链生成时间。样例为:2019-10-12T07:20:50Z。","example":"2019-10-12T07:20:50","type":"string"},"resolved_date":{"description":"解析时间。样例为:2019-10-12T07:20:50Z。\n\n>预留字段。\n","example":"2019-10-12T07:20:50","type":"string"},"resolved_times":{"description":"短链实际解析次数。\n\n>预留字段。\n","example":1,"type":"integer"},"result_code":{"description":"短链申请结果返回码。\n- 0:成功\n- 非0:失败,具体请参见错误码\n","example":"0","type":"string"}},"type":"object"},"SmsChannel":{"description":"短信发送通道参数。","properties":{"channel_number":{"description":"短信通道号。\n\n> 必须与另外三个字段sms_tpl_id、sms_sign、sms_app_name相匹配,这些字段信息可以从“云消息服务KooMessage-管理控制台-短信配置-短信签名管理-通道号”中获取。\n","example":"600000000","type":"string"},"sms_app_name":{"description":"短信应用名称。\n\n> 必须与另外三个字段channel_number、sms_sign、sms_tpl_id相匹配,这些字段信息可以从“云消息服务KooMessage-管理控制台-短信配置-短信模板管理-所属应用”中获取。\n","example":"APaas","type":"string"},"sms_sign":{"description":"短信签名。\n\n> 必须与另外三个字段channel_number、sms_tpl_id、sms_app_name相匹配,这些字段信息可以从“云消息服务KooMessage-管理控制台-短信配置-短信模板管理-所属签名”中获取。\n","example":"华为云","type":"string"},"sms_tpl_id":{"description":"短信模板ID。\n\n> 必须与另外三个字段channel_number、sms_sign、sms_app_name相匹配,这些字段信息可以从“云消息服务KooMessage-管理控制台-短信配置-短信模板管理-模板ID”中获取。\n","example":"6000002","type":"string"}},"required":["channel_number","sms_app_name","sms_sign","sms_tpl_id"]}},"description":null,"group_id":"57a445a5fb5d4ba5b80445bd4c5ec9b3","host":"koomessage.myhuaweicloud.cn","id":"d141bf51b8074006936dded35559221e","info_version":"v1","method":"post","name":"CreateAimSendTask","parameters":{},"paths":{"/v1/aim/send-tasks":{"post":{"consumes":["application/json"],"deprecated":false,"description":"根据客户的参数发送任务名称、智能信息模板ID等进行智能信息发送。一次最多发送100个智能信息。","operationId":"CreateAimSendTask","parameters":[{"description":"用户Token。通过调用IAM服务获取用户Token接口获取(响应消息头中X-Subject-Token的值)。","in":"header","name":"X-Auth-Token","required":true,"type":"string"},{"description":"请求体参数类型,该字段必须设置为:application/json。","in":"header","name":"Content-Type","required":true,"type":"string"},{"description":"消息发送请求体。","in":"body","name":"CreateAimSendTaskRequestBody","required":true,"schema":{"$ref":"#/definitions/CreateAimSendTaskRequestBody"}}],"produces":["application/json"],"responses":{"200":{"description":"返回200状态码仅代表接口请求成功,任务提交结果由task_state字段来区分,此结果仅代表任务提交结果,并非智能信息发送结果。用户手机接收智能信息结果请以收到的回执结果为准,也可通过查询智能信息发送明细API获取或登录KooMessage控制台查看。","examples":{"application/json":{"creation_time":"2022-07-19T14:37:34.00Z","failed_short_chains":[],"resolve_count":0,"resolve_task":{"aim_code_type":"individual","expiration_time":7,"generation_type":"1","params":[{"cust_flag":"131****0000","custom_short_code":null,"custom_url":"https://www.xxxx.com"}],"resolve_times":1,"tpl_id":"600000001"},"send_count":1,"sms_channel":{"channel_number":"8822053111111","sms_app_name":"KooMessage","sms_sign":"华为云KooMessage","sms_tpl_id":15010661},"submission_count":1,"task_id":"c3d7659d-06b0-4fa0-9eed-9225389ecccc","task_name":"智能信息发送","task_state":"Success"}},"schema":{"$ref":"#/definitions/CreateAIMSendTaskRsp"}},"400":{"description":"非法参数。","schema":{"$ref":"#/definitions/AimErrorMsg"}},"500":{"description":"内部错误。","schema":{"$ref":"#/definitions/AimErrorMsg"}}},"summary":"发送智能信息","tags":["AIMSendTask"],"x-apigateway-request-type":"Public","x-is-registered":"Y","x-opseverity":"Info","x-request-examples-1":{"resolve_task":{"aim_code_type":"individual","expiration_time":7,"params":[{"cust_flag":"131****0000","custom_url":"https://www.xxxx.com"}],"resolve_times":1,"tpl_id":"600000001"},"sms_channel":{"channel_number":"8822053111111","sms_app_name":"KooMessage","sms_sign":"华为云KooMessage","sms_tpl_id":15010661},"task_name":"智能信息发送"},"x-request-examples-2":{"resolve_task":{"aim_code_type":"individual","expiration_time":7,"params":[{"cust_flag":"131****0000","custom_url":"https://www.xxxx.com","dync_params":{"param1":"参数1","param2":"参数2","param3":"参数3","param4":"参数4"}},{"cust_flag":"131****0001","custom_url":"https://www.xxxx.com","dync_params":{"param1":"参数1","param2":"参数2","param3":"参数3","param4":"参数4"}}],"resolve_times":1,"tpl_id":"600000002"},"sms_channel":{"channel_number":"8822053111111","sms_app_name":"KooMessage","sms_sign":"华为云KooMessage","sms_tpl_id":15010661},"task_name":"智能信息发送-动态参数"},"x-request-examples-description-1":"发送智能信息。模板ID为\"600000001\",短链最大解析次数为1次,过期时间为7天,发送手机号码如\"131****0000\";通道号为\"8822053111111\",短信模板ID为\"15010661\"。","x-request-examples-description-2":"发送智能信息-动态参数。模板ID为\"600000002\",短链最大解析次数为1次,过期时间为7天,发送手机号码如\"131****0000\",分别设置动态参数;通道号为\"8822053111111\",短信模板ID为\"15010661\"。","x-request-examples-url-1":"https://koomessage.myhuaweicloud.cn/v1/aim/send-tasks","x-request-examples-url-2":"https://koomessage.myhuaweicloud.cn/v1/aim/send-tasks","x-support-sdk":"Y"}}},"product_short":"KooMessage","region_id":"cn-north-4","schemes":["HTTPS"],"security_definitions":{"apig-auth-app":{"in":"header","name":"Authorization","type":"apiKey","x-apigateway-auth-type":"AppSigv1"},"apig-auth-app-optional":{"in":"header","name":"Authorization","type":"apiKey","x-apigateway-auth-opt":{"access-auth-type":"optional"},"x-apigateway-auth-type":"AppSigv1"},"apig-auth-iam":{"in":"header","name":"unused","type":"apiKey","x-apigateway-auth-type":"IAM"},"apig-auth-iam-none":{"in":"header","name":"unused","type":"apiKey","x-apigateway-auth-type":"IAM_NONE"}},"summary":"发送智能信息","tags":"智能信息发送","uri":null,"version":"2.0"}