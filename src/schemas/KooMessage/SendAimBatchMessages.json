{"base_path":null,"components":null,"consumes":"","definitions":{"SmsDetailResponse":{"properties":{"channel_num":{"description":"短信发送方的号码。","maxLength":21,"minLength":1,"type":"string"},"create_time":{"description":"短信资源的创建时间。\n\n即短信平台接收到用户发送短信请求的时间,为UTC时间。\n格式为:yyyy-MM-dd'T'HH:mm:ss'Z'。","maxLength":20,"minLength":1,"type":"string"},"msg_id":{"description":"短信的唯一标识。","maxLength":50,"minLength":1,"type":"string"},"send_status":{"description":"短信状态码。\n\n以下举例状态码及其说明,具体处理建议请参考[API错误码](https://support.huaweicloud.com/api-msgsms/sms_05_0050.html)。\n\n- 000000:短信平台处理请求成功\n- E200015:待发送短信数量太大\n- E200028:模板变量校验失败\n- E200029:模板类型校验失败\n- E200030:模板未激活\n- E200031:协议校验失败\n- E200033:模板类型不正确\n- E200041:同一短信内容接收号码重复","maxLength":7,"minLength":1,"type":"string"},"to":{"description":"短信接收方的号码。","maxLength":21,"minLength":1,"type":"string"}},"required":["to","channel_num","msg_id","send_status","create_time"],"type":"object"},"SmsErrorMsg":{"description":"错误模型。","properties":{"error_code":{"description":"结果状态码。","maxLength":32,"minLength":0,"type":"string"},"error_msg":{"description":"结果详情。","maxLength":32,"minLength":0,"type":"string"}},"type":"object"},"SmsTask":{"description":"消息发送任务返回体。","properties":{"result":{"description":"短信ID列表,当目标号码存在多个时,每个号码都会返回一个SmsID。\n\n当返回异常响应时不携带此字段。","items":{"$ref":"#/definitions/SmsDetailResponse"},"type":"array"},"status":{"description":"任务状态。\n\n- Success:发送成功\n- Failed:发送失败\n\n> 此状态仅代表任务提交状态,不代表智能信息发送结果。用户手机接收智能信息结果请以收到的回执结果为准,也可通过查询智能信息发送明细API获取或登录KooMessage控制台查看。","maxLength":20,"minLength":1,"type":"string"},"task_id":{"description":"任务ID。","maxLength":50,"minLength":1,"type":"string"}},"required":["task_id","status","result"],"type":"object"},"SmsTaskReq":{"properties":{"channel_num":{"description":"短信通道号。\n\n> 模板所属签名的通道号,可以从“云消息服务KooMessage-管理控制台-短消息配置(国内)-短消息签名管理-通道号”中获取。未填写时默认取模板所属签名通道号。","example":8823041831682,"maxLength":21,"minLength":1,"type":"string"},"extend":{"description":"扩展参数。\n\n在状态报告中会原样返回。\n\n不允许赋空值,不允许携带以下字符:“{”,“}”(即大括号)。","maxLength":128,"minLength":0,"type":"string"},"signature":{"description":"短信签名名称(暂不支持)。\n\n> 签名名称,必须是已审核通过的,与模板类型一致的签名名称。\n仅在template_id指定的模板类型为通用模板时生效且必填,用于指定在通用模板短信内容前面补充的签名。","example":"华为云","maxLength":32,"minLength":0,"type":"string"},"task_name":{"description":"发送任务名称。\n\n> 不能为空白字符串,允许重复,为空时默认为Task_拼接当前时间值。","example":"618大促","maxLength":30,"minLength":1,"type":"string"},"template_id":{"description":"短信模板ID。\n\n> 可以从“云消息服务KooMessage-管理控制台-短消息配置(国内)-短消息模板管理-模板ID”中获取。","example":"15172421","maxLength":32,"minLength":1,"type":"string"},"template_params":{"description":"短信模板参数,字符串数组,最多20个。\n\n短信模板中的变量类型可以是:短链、电话号码、其他号码(验证码、订单号、密码等)、日期时间、金额、其他(名称、账号、地址等)。\n\n\n数组中参数按短信模板中的变量顺序进行匹配,比如短信模板内容中按顺序有3个变量:${1}、${2}、${3},其中${1}表示手机号码,${2}表示短链,${3}表示日期,则sms_params传的是:[手机号码, 短链, 日期]。\n\n- 电话号码:长度限制1-15个字符,可以传入手机号、座机号、95或400、800电话等。\n- 其他号码:长度限制1-20个字符,不允许出现手机号、QQ号、微信号、URL等联系方式,仅支持大小写字母和数字组合。\n- 时间:长度限制1-20个字符,日期格式:yyyyMMdd、yyyy-MM-dd、yyyy/MM/dd、yyyy年mm月dd日,时间格式:HH:mm:ss、HH:mm、HH点mm分、HH点mm。如果需要同时指定日期和时间,请在模板中填充两个变量,一个变量传入日期,另一个变量传入时间。\n- 金额:长度限制1-20个字符,仅支持传入能够正常表达金额的数字、小数点或中文,例如壹、贰、叁、肆等,支持传入IP地址,例如:10.1.1.10。¥$等货币符号需要放在模板中,不支持变量传入。\n- 其他:长度限制1-20个字符,可以设置为公司/产品/地址/姓名/内容/账号/会员名等。不允许出现QQ号/微信号(公众号)/手机号/网址/座机号等联系方式。如果确有需要,请将联系方式放入模板中,不允许在传入值中携带“.”(短链参数除外)、“。”、“'”、“<”、“>”、“{”或“}”。否则,可能导致模板变量解析异常。不允许在传入值中携带“.”,即不支持传入IP地址,如变量取值为IP地址,请申请模板时选择变量属性为“金额”。","example":["123","abc","ak2m.cn/YeYrjsGm"],"items":{"type":"string"},"type":"array"},"to":{"description":"短信接收方的号码。\n\n所填号码可以不带+86,系统默认添加+86,最多允许携带500个号码。\n\n示例:131****5678,+86155****6666。","example":["18956435251","137101325470"],"items":{"type":"string"},"maxItems":500,"minItems":1,"type":"array"}},"required":["template_id","to","template_params"],"type":"object"}},"description":null,"group_id":"57a445a5fb5d4ba5b80445bd4c5ec9b3","host":"koomessage.myhuaweicloud.cn","id":"1d0bbff0560246cdb8f97f40cb7e0c74","info_version":"v1","method":"post","name":"SendAimBatchMessages","parameters":{},"paths":{"/v1/aim/sms/messages":{"post":{"consumes":["application/json"],"description":"向单个或多个用户发送相同内容的短信。\n\n- 前提条件\n\n1. 已创建短信应用。\n2. 已申请短信签名,获取签名通道号。\n3. 已申请短信模板,获取模板ID。\n\n- 注意事项\n\n最多允许携带500个号码,每个号码最大长度为21位。","operationId":"SendAimBatchMessages","parameters":[{"description":"短信发送请求体。","in":"body","name":"SendAimBatchMessagesRequestBody","required":true,"schema":{"$ref":"#/definitions/SmsTaskReq"}},{"description":"用户Token。通过调用IAM服务获取用户Token接口获取(响应消息头中X-Subject-Token的值)。","in":"header","name":"X-Auth-Token","required":true,"type":"string"}],"produces":["application/json"],"responses":{"200":{"description":"发送短信响应体。","examples":{"application/json":{"result":[{"channel_num":"8823060****9","create_time":"2023-08-11T12:11:24","msg_id":"b24f1f03-556e-468e-9fe1-23729b9414d7_72****6","send_status":"000000","to":"+86139274****8"},{"channel_num":"8823060806439","create_time":"2023-08-11T12:11:24","msg_id":"b24f1f03-556e-468e-9fe1-23729b9414d7_****407","send_status":"000000","to":"+861552****978"}],"status":"Success","task_id":"a914ca57-09cf-4899-af62-f9a****06c3c"}},"schema":{"$ref":"#/definitions/SmsTask"}},"400":{"description":"非法参数。","schema":{"$ref":"#/definitions/SmsErrorMsg"}},"500":{"description":"内部错误。","schema":{"$ref":"#/definitions/SmsErrorMsg"}}},"schemes":["https"],"security":[{"apig-auth-iam":[]}],"summary":"发送短信","tags":["AimSmsSend"],"x-api-type":"open-api","x-apigateway-backend":{"httpVpcEndpoints":{"description":"","method":"POST","name":"lb-km-aim","path":"/v1/aim/sms/messages","scheme":"https","timeout":30000},"type":"HTTP-VPC"},"x-apigateway-cors":false,"x-apigateway-match-mode":"NORMAL","x-apigateway-query-string-encode":"ENABLE","x-apigateway-request-type":"public","x-is-registered":"Y","x-request-examples-1":{"app_name":"OPACCOUNT688","channel_num":"8823060****39","signature":"测试签名","task_name":"测试发送","template_id":"1512****","template_params":["kXfvIwzs"],"to":["139274****98","15527****78"]},"x-request-examples-description-1":"向用户发送短信,短信通道号为8823060****39,模板ID为1512****。\n","x-request-examples-text-1":{"app_name":"OPACCOUNT688","channel_num":"8823060****39","signature":"测试签名","task_name":"测试发送","template_id":"1512****","template_params":["kXfvIwzs"],"to":["139274****98","15527****78"]},"x-request-examples-url-1":"https://koomessage.myhuaweicloud.cn/v1/aim/sms/messages","x-support-sdk":"Y"}}},"product_short":"KooMessage","region_id":"cn-north-4","schemes":["HTTPS"],"security_definitions":{"apig-auth-app":{"in":"header","name":"Authorization","type":"apiKey","x-apigateway-auth-type":"AppSigv1"},"apig-auth-app-optional":{"in":"header","name":"Authorization","type":"apiKey","x-apigateway-auth-opt":{"access-auth-type":"optional"},"x-apigateway-auth-type":"AppSigv1"},"apig-auth-iam":{"in":"header","name":"unused","type":"apiKey","x-apigateway-auth-type":"IAM"},"apig-auth-iam-none":{"in":"header","name":"unused","type":"apiKey","x-apigateway-auth-type":"IAM_NONE"}},"summary":"发送短信","tags":"短信发送","uri":null,"version":"2.0"}