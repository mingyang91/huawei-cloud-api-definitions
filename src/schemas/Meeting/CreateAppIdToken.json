{"base_path":"/","components":null,"consumes":"","definitions":{"AppAuthInfoV2":{"properties":{"appId":{"description":"App ID。如何获取App ID请参考[App ID的申请](https://support.huaweicloud.com/devg-meeting/meeting_20_0011.html#section1) 。","maxLength":64,"minLength":1,"type":"string","x-example":"d5e1785afbe44c2588b642446652489e"},"clientType":{"description":"登录客户端类型。\n* 72:API调用类型","maximum":255,"minimum":0,"type":"integer","x-example":72},"corpId":{"description":"企业ID。\n> * 当SP应用场景携带,如果corpId和userId字段未携带或值为空字符串时,当作SP默认管理员登录。\n> * 仅在SP模式下需要填写,单企业模式不要填写,否则会鉴权失败。","maxLength":32,"minLength":0,"type":"string","x-annotations":["@OpLogProperty(value = \"I18n.OpLog.Dcs.Corp.CorpId\")"],"x-example":"807074304"},"deptCode":{"description":"部门编码。通过[查询部门及其一级子部门列表](https://support.huaweicloud.com/api-meeting/meeting_21_0064.html) 接口获取。","maxLength":32,"minLength":0,"pattern":"[0-9A-Za-z_-]*","type":"string","x-annotations":["@OpLogProperty(value = \"I18n.OpLog.Dcs.Dept.Code\")"]},"expireTime":{"description":"应用鉴权信息过期时间戳,单位秒。\n> * 当收到App ID鉴权请求时服务端的Unix时间戳大于expireTime时,本次鉴权失败。\n> * 样例:如果要求App ID鉴权信息10分钟后过期,expireTime = 当前Unix时间戳 + 60*10。\n> * 如果要求应用鉴权信息始终不过期,expireTime = 0。","format":"int64","type":"integer","x-example":1597824907},"nonce":{"description":"随机字符串,用于计算应用鉴权信息。","maxLength":64,"minLength":32,"type":"string","x-example":"EycLQsHwxhzK9OW8UEKWNfH2I3CGR2nINuU1EBpQ"},"userEmail":{"description":"邮箱地址。","maxLength":255,"minLength":0,"type":"string","x-annotations":["@Pattern(regexp = ValidateConstants.EMAIL_PATTERN)","@OpLogProperty(value = \"I18n.OpLog.Dcs.User.Email\",maskType = MaskerTypeEnum.EMAIL)"],"x-example":"alice@huawei.com"},"userId":{"description":"第三方用户ID。\n> 当userId字段未携带或值为空字符串时,当作企业默认管理员登录。","maxLength":64,"minLength":0,"type":"string","x-annotations":["@OpLogProperty(value = \"I18n.OpLog.Dcs.User.Account\")"],"x-example":"alice@ent01"},"userName":{"description":"用户名称。","maxLength":64,"minLength":0,"type":"string","x-annotations":["@OpLogProperty(value = \"I18n.OpLog.Dcs.User.Name\")"],"x-example":"alice"},"userPhone":{"description":"手机号。","maxLength":32,"minLength":0,"type":"string","x-annotations":["@Pattern(regexp = ValidateConstants.PHONE_PATTERN)","@OpLogProperty(value = \"I18n.OpLog.Dcs.User.Phone\", maskType = MaskerTypeEnum.PHONE_NUMBER)"],"x-example":"173****9092"}},"required":["appId","expireTime","nonce","clientType"],"x-imports":"com.huawei.usg.oms.model.kafka.annotation.*;com.huawei.usg.oms.model.kafka.constants.oplog.*;com.huawei.springframework.utils.ValidateConstants;","x-subPackage":"dto"},"ProxyTokenDTO":{"description":"代理鉴权信息。","properties":{"accessToken":{"description":"代理鉴权服务器的短token字符串。","type":"string"},"enableRerouting":{"description":"是否开启二次路由。","type":"boolean"},"longAccessToken":{"description":"代理鉴权服务器的长token字符串。","type":"string"},"middleEndInnerUrl":{"description":"中台内网地址。","type":"string"},"middleEndUrl":{"description":"中台地址。","type":"string"},"validPeriod":{"description":"Token有效时长,单位:秒。","format":"int64","type":"integer"}},"required":["accessToken"],"x-subPackage":"dto"},"ReturnCodeDTO":{"description":"错误码。","properties":{"error_code":{"description":"错误码。","example":"USG.206010000","type":"string"},"error_msg":{"description":"错误描述。","example":"User name or password is incorrect","type":"string"},"request_id":{"description":"请求唯一标识。","example":"9655664f10724b398187598a1d5097c3","type":"string"}},"required":["error_code","error_msg"],"x-subPackage":"discard"},"TokenDTO":{"description":"鉴权请求信息。","properties":{"accessToken":{"description":"Access Token字符串。","example":"stb8cyTJFlVdaeCIWXXXX....","type":"string"},"clientType":{"description":"登录帐号类型。\n* 72:API调用类型","example":72,"type":"integer"},"createTime":{"description":"Access Token的创建时间戳,单位:毫秒。","format":"int64","type":"integer"},"daysPwdAvailable":{"description":"密码有效天数。","example":-18171,"type":"integer"},"delayDelete":{"default":false,"description":"是否延时删除状态。","type":"boolean"},"expireTime":{"description":"Access Token的失效时间戳,单位:秒。","example":1577858014,"format":"int64","type":"integer"},"firstLogin":{"default":false,"description":"是否首次登录。\n> 首次登录表示尚未修改过密码。首次登录时,系统会提醒用户需要修改密码。\n默认值:false。","example":true,"type":"boolean"},"forceLoginInd":{"description":"抢占登录标识。\n* 0: 非抢占\n* 1: 抢占","example":null,"type":"integer"},"proxyToken":{"$ref":"#/definitions/ProxyTokenDTO"},"pwdExpired":{"default":false,"description":"密码是否过期,默认值:false。","example":false,"type":"boolean"},"refreshCreateTime":{"description":"Refresh Token的创建时间戳,单位:毫秒。","format":"int64","type":"integer"},"refreshExpireTime":{"description":"Refresh Token的失效时间戳,单位:秒。","format":"int64","type":"integer"},"refreshToken":{"description":"Refresh Token字符串。","type":"string"},"refreshValidPeriod":{"description":"Refresh Token有效时长,单位:秒。","format":"int64","type":"integer"},"tokenIp":{"description":"用户IP。","example":"10.8.0.90","type":"string"},"tokenType":{"description":"Token类型。\n* 0:用户Access Token\n* 1:会控TOKEN\n* 2:一次性TOKEN","type":"integer"},"user":{"$ref":"#/definitions/UserInfo"},"validPeriod":{"description":"Access Token有效时长,单位:秒。","example":82188,"format":"int64","type":"integer"}},"required":["user","accessToken","validPeriod","expireTime","tokenIp","clientType"],"x-subPackage":"dto"},"UserInfo":{"description":"用户鉴权信息。","properties":{"adminType":{"description":"管理员类型。\n* 0:默认管理员\n* 1:普通管理员\n* 2:非管理员,即普通企业成员,userType为2时有效","example":2,"type":"integer"},"alias1":{"description":"用户别名。","example":null,"type":"string"},"appId":{"description":"应用ID。","type":"string"},"cloudUserId":{"description":"华为云帐号ID。","type":"string"},"companyDomain":{"description":"企业域名。","example":null,"type":"string"},"companyId":{"description":"用户归属的企业ID。","example":"c71e568704104ceb89717789692372fa","type":"string"},"corpType":{"description":"企业类型。\n* 0:旗舰版\n* 5:免费版\n* 6:标准版","type":"integer"},"freeUser":{"description":"标识是否是免费试用用户。","type":"boolean"},"grayUser":{"description":"标识是否是灰度用户。","type":"boolean"},"headPictureUrl":{"description":"头像链接。","maxLength":255,"minLength":0,"type":"string"},"isBindPhone":{"description":"标识是否绑定手机。","type":"boolean"},"name":{"description":"用户名称。","example":"张三","type":"string"},"nameEn":{"description":"用户英文名称。","example":"zhangsan","type":"string"},"numberHA1":{"description":"号码对应的HA1。","example":"1ead5e5ce44849bc2718d5cb479c890f","type":"string"},"paidAccount":{"description":"付费用户机机帐号,用于智慧屏登录。","maxLength":255,"minLength":0,"type":"string"},"paidPassword":{"description":"付费用户机机密码,用于智慧屏登录。","maxLength":255,"minLength":0,"type":"string"},"password":{"description":"机机密码,用于智慧屏登录。","maxLength":255,"minLength":0,"type":"string"},"realm":{"description":"本地鉴权。","example":"huawei.com","type":"string","x-annotations":["@JsonIgnore"]},"serviceAccount":{"description":"用户关联的SIP号码。","example":"sip:+99111210334849378@huaweicloud.com","type":"string"},"spId":{"description":"用户所在企业归属的SP ID。","example":"acf9324477ef47a79bb691ee57496513","type":"string"},"status":{"description":"用户状态。\n* 0:正常\n* 1:停用","maximum":7,"minimum":0,"type":"integer"},"thirdAccount":{"description":"第三方的用户帐号。","maxLength":255,"minLength":0,"type":"string"},"tr069Account":{"description":"tr069帐号。","type":"string"},"ucloginAccount":{"description":"华为云会议帐号。","example":"p-53df7b90d6a3410fa75f82e08bfd9181","type":"string"},"userId":{"description":"用户UUID。","example":"689ead28d0a2409985b8f85a167b78fc","type":"string"},"userType":{"description":"用户类型。\n* 1:SP管理用户\n* 2:企业用户\n* 3:免费注册用户\n* 10:企业设备用户\n* 11:匿名用户\n* 12:智慧屏用户\n* 13:IdeaHub用户\n* 14:电子白板(SmartRooms)用户","example":2,"type":"integer"},"visionAccount":{"description":"智慧屏设备ID。","maxLength":255,"minLength":0,"type":"string"},"weLinkUser":{"description":"标识是否是WeLink用户。","type":"boolean"}},"required":["ucloginAccount"],"x-imports":"com.fasterxml.jackson.annotation.JsonIgnore","x-subPackage":"dto"}},"description":null,"group_id":"ad8a7fcbd9b44cae85e4fdbe7e9dda22","host":"api.meeting.huaweicloud.com","id":"3d62056473ff4995a68133ed43c3b895","info_version":"v1","method":"post","name":"CreateAppIdToken","parameters":{},"paths":{"/v2/usg/acs/auth/appauth":{"post":{"consumes":["application/json"],"description":"该接口使用App ID方式进行鉴权,鉴权通过后生成一个Access Token。App ID鉴权的原理介绍,请参考[App ID鉴权介绍](https://support.huaweicloud.com/devg-meeting/meeting_20_0011.html) 。\n> * 当clientType取值为72时,同一个account,同时最多能创建64个Token。比如已经创建了64个Token,并且Token都在有效期内,再用同一个account创建一个Token,前64个Token中最早创建的Token将失效。\n> * 当clientType取值为非72时,同一个account,同时最多能创建1个Token。\n> * Token有效期是12~24小时。","operationId":"CreateAppIdToken","parameters":[{"description":"携带应用鉴权信息。\n* 规则:HMAC-SHA256 signature=HexEncode(HMAC256((appId + \":\" + userId + \":\" + expireTime + \":\" + nonce), appKey))\n* 样例:HMAC-SHA256 signature=07f31aa9eafb06652c6899248b145c1a3264242e2ccf4c81b1b6eb99bb5c\n> 如携带了userId信息,则Body中,也需填写对应的userId信息。","format":"password","in":"header","name":"Authorization","required":true,"type":"string","x-example":"HMAC-SHA256 signature=198c3046dbdafa9d89ce917c5613c29fda855da2aa79f8f51f2871e88fdba91c","x-notgenerate":true},{"description":"Body的媒体格式。\n* 样例:application/json; charset=UTF-8","in":"header","name":"Content-Type","required":true,"type":"string","x-example":"application/json;charset=utf-8","x-notgenerate":true},{"description":"请求requestId,用来标识一路请求,用于问题跟踪定位,建议使用UUID,若不携带,则后台自动生成。","in":"header","name":"X-Request-ID","required":false,"type":"string","x-example":"flg10o4u9136p5jc2bj00k25a3n7nolt","x-notgenerate":true},{"description":"语言参数,默认为中文zh-CN,英文为en-US。","in":"header","name":"Accept-Language","required":false,"type":"string","x-example":"zh-CN","x-notgenerate":true},{"description":"App ID鉴权信息。","in":"body","name":"appAuthInfoV2","required":true,"schema":{"$ref":"#/definitions/AppAuthInfoV2"}}],"produces":["application/json"],"responses":{"200":{"description":"操作成功。","examples":{"application/json":{"accessToken":"stbc3SRoXXZhsuw4XXXXX.....","clientType":72,"createTime":1597824908000,"daysPwdAvailable":-18172,"delayDelete":false,"expireTime":1597900508,"firstLogin":true,"forceLoginInd":null,"proxyToken":null,"pwdExpired":false,"refreshCreateTime":1597824908000,"refreshExpireTime":"1600416,908","refreshToken":"stbDaza5VVRr3IGuLSa6ZvF0lMHHvGO0tS0A","refreshValidPeriod":2592000,"tokenIp":"10.8.0.90","tokenType":0,"user":{"adminType":2,"alias1":null,"appId":"d5e1785afbe44c2588b642446652489e","cloudUserId":"76aaaba8a12f4c0a8a43192...","companyDomain":null,"companyId":"f5968fc4f9c14d50905e8e66672dabc6","corpType":0,"freeUser":false,"grayUser":false,"headPictureUrl":null,"isBindPhone":null,"name":"张三","nameEn":null,"numberHA1":"1ead5e5ce44849bc2718d5c....","paidAccount":null,"paidPassword":null,"password":null,"realm":"huaweicloud.com","serviceAccount":"sip:+99111210335819378@huaweicloud.com","spId":"666bd8558e4646e1a7e1a0c99cf898e8","status":0,"thirdAccount":"zhangsan@yourcorp.com","tr069Account":"","ucloginAccount":"p-53df7b9046ae41efa75e82e08bfe9181","userId":"0d5202707123429d876....","userType":2,"visionAccount":null,"weLinkUser":false},"validPeriod":84616}},"schema":{"$ref":"#/definitions/TokenDTO"}},"400":{"description":"参数异常。","schema":{"$ref":"#/definitions/ReturnCodeDTO"}},"401":{"description":"未鉴权或鉴权失败。","schema":{"$ref":"#/definitions/ReturnCodeDTO"}},"403":{"description":"权限受限。","schema":{"$ref":"#/definitions/ReturnCodeDTO"}},"412":{"description":"帐号被停用。","schema":{"$ref":"#/definitions/ReturnCodeDTO"}},"423":{"description":"帐号已被锁定。","schema":{"$ref":"#/definitions/ReturnCodeDTO"}},"500":{"description":"服务端异常。","schema":{"$ref":"#/definitions/ReturnCodeDTO"}}},"summary":"执行App ID鉴权","tags":["登录鉴权"],"x-apiexplorer-auth":false,"x-classAnnotation":"@HttpStatusController","x-externalAPI":true,"x-imports":"com.huawei.springframework.response.dto.ResultDTO;com.huawei.usg.cloudsso.model.dto.TokenDTO;com.huawei.usg.oms.model.kafka.annotation.*;com.huawei.usg.oms.model.kafka.constants.oplog.*;com.huawei.springframework.om.trace.masker.annotation.*;com.huawei.springframework.om.trace.masker.base.*;com.huawei.springframework.business.advice.HttpStatusController;","x-interfaceFrequency":"HIGH","x-interfaceRist":"HIGH","x-is-registered":"Y","x-methodAnnotations":["@RequestMaskRule(type = Type.JSON, rules = {@Rule(path = \"userEmail\", masker = EmailMasker.class), @Rule(path = \"userPhone\", masker = PhoneNumberMasker.class)})","@ResponseMaskRule(type = Type.JSON, rules = {@Rule(path = \"tokenIp\", masker = IpMasker.class), @Rule(path = \"accessToken\", masker = TokenMasker.class), @Rule(path = \"refreshToken\", masker = TokenMasker.class), @Rule(path = \"user.numberHA1\", masker = PasswordMasker.class)})"],"x-order":1,"x-request-examples-1":{"appId":"d5e1785afbe44c2588b642446652489e","clientType":72,"expireTime":1597824907,"nonce":"EycLQsHwxhzK9OW8UEKWNfH2I3CGR2nINuU1EBpQ","userEmail":"zhangsan@yourcorp.com","userId":"zhangsan@yourcorp.com","userName":"张三","userPhone":"173****9092"},"x-request-examples-url-1":"POST https://{endpoint}/v2/usg/acs/auth/appauth","x-returnType":"TokenDTO","x-support-sdk":"N"}}},"product_short":"Meeting","region_id":"cn-north-4","schemes":["HTTPS"],"security_definitions":null,"summary":"执行App ID鉴权","tags":"登录鉴权","uri":null,"version":"2.0"}