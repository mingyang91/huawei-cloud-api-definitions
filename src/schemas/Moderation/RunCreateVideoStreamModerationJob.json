{"base_path":"/","components":null,"consumes":"","definitions":{"ErrorRsp":{"description":"失败时返回的错误对象","properties":{"error_code":{"description":"调用失败时的错误码,具体请参见错误码。\n\n调用成功时无此字段。","maxLength":36,"minLength":8,"type":"string"},"error_msg":{"description":"调用失败时的错误信息。\n\n调用成功时无此字段。","maxLength":512,"minLength":2,"type":"string"}},"required":["error_code","error_msg"],"type":"object"},"VideoStreamCreateRequest":{"properties":{"audio_categories":{"description":"视频流中音频需要检测的风险类型,不传或为空时表示不审核音频维度。\nporn:涉黄检测\npolitics: 涉政检测\nabuse: 辱骂检测\nad: 广告检测\nmoan: 娇喘检测","example":["porn","ad","politics","moan","abuse"],"items":{"enum":["porn","ad","politics","moan","abuse"],"type":"string"},"type":"array"},"callback":{"description":"回调http接口,回调内容如下:\n```{\n    \"job_id\":\"xxxxxx\",\n    \"status\":\"running\", //running - 审核中,succeeded - 审核完成,failed - 审核失败\n    \"request_id\":\"2419446b1fe14203f64e4018d12db3dd\",\n    \"craete_time\":\"2022-07-30T08:57:11.011Z\",\n    \"update_time\":\"2022-07-30T08:57:14.014Z\",\n    \"result\":{\n        \"suggestion\":\"block\",\n        \"audio_detail\":[\n            {\n                \"suggestion\":\"block\",\n                \"label\":\"politics\",\n                \"audio_text\":\"xxxx\",\n                \"detail\":[\n                    {\n                        \"confidence\":1,\n                        \"suggestion\":\"block\",\n                        \"label\":\"politics\",\n                        \"segments\":[\n                            {\n                                \"segment\":\"xxx\"\n                            },\n                            {\n                                \"segment\":\"xxx\"\n                            },\n                            {\n                                \"segment\":\"xxx\"\n                            }\n                        ]\n                    }\n                ]\n            }\n        ],\n        \"image_detail\":[\n            {\n                \"suggestion\":\"block\",\n                \"category\":\"xxx\",\n                \"time\":\"xxx\", // 视频流截帧图片发生的绝对时间\n                \"detail\":[\n                    {\n                        \"face_location\":{\n                            \"bottom_right_x\":247,\n                            \"bottom_right_y\":191,\n                            \"top_left_y\":79,\n                            \"top_left_x\":160\n                        },\n                        \"confidence\":1,\n                        \"suggestion\":\"block\",\n                        \"label\":\"xxx\",\n                        \"category\":\"xxx\"\n                    },\n                    {\n                        \"qr_content\":\"xxx\",\n                        \"confidence\":\"xxx\",\n                        \"suggestion\":\"xxx\",\n                        \"label\":\"xxx\",\n                        \"category\":\"xxx\",\n                        \"qr_location\":{\n                            \"bottom_right_x\":554,\n                            \"bottom_right_y\":842,\n                            \"top_left_y\":426,\n                            \"top_left_x\":140\n                        }\n                    },\n                    {\n                        \"confidence\":1,\n                        \"suggestion\":\"block\",\n                        \"label\":\"politics\",\n                        \"category\":\"image_text\",\n                        \"segments\":[\n                            {\n                                \"segment\":\"x\"\n                            },\n                            {\n                                \"segment\":\"xxx\"\n                            },\n                            {\n                                \"segment\":\"xx\"\n                            },\n                            {\n                                \"segment\":\"x\"\n                            },\n                            {\n                                \"segment\":\"xxxx\"\n                            }\n                        ]\n                    }\n                ]\n            }\n        ]\n    },\n    \"request_params\":{\n        \"data\":{\n            \"url\":\"rtmp://xxxx\",\n            \"frame_interval\":3\n        },\n        \"event_type\":\"default\",\n        \"image_categories\":[\n            \"politics\",\n            \"porn\",\n            \"image_text\",\n            \"terrorism\"\n        ],\n        \"audio_categories\":[\n            \"porn\",\n            \"ad\",\n            \"politics\",\n            \"moan\",\n            \"abuse\"\n        ],\n        \"callback\":\"http://xxx/callback\"\n    }\n}","example":"http://xxxx","type":"string"},"data":{"description":"视频流数据输入","properties":{"frame_interval":{"description":"截帧频率间隔,单位为秒,取值范围为1~60s;若不传递默认5s截帧一次","format":"int32","type":"integer"},"url":{"description":"视频流url,支持rtmp、rtmps、hls、http、https等主流协议。","type":"string"}},"required":["url"]},"event_type":{"description":"事件类型,可选值如下:\ndefault:默认事件","enum":["default"],"example":"default","type":"string"},"image_categories":{"description":"视频流中画面需要检测的风险类型,列表不能为空。\nporn:鉴黄内容的检测\nterrorism:涉政暴恐内容的检测\npolitics:政治敏感人物内容的检测\nimage_text:图文违规内容的检测(检测图片中出现的广告、色情、暴恐、涉政的文字违规内容以及二维码内容)","example":"[\"porn\",\"politics\",\"terrorism\",\"image_text\"]","items":{"enum":["porn","politics","terrorism","image_text"],"type":"string"},"type":"array"}},"required":["data","event_type","image_categories","callback"],"type":"object"},"VideoStreamCreateResponse":{"properties":{"job_id":{"description":"作业唯一标识。","type":"string"},"request_id":{"description":"本次请求的唯一标识,用于问题排查,建议保存。","type":"string"}},"type":"object"}},"description":null,"group_id":"bf0f60d381894fc78dd6cd0757fc8dcb","host":"moderation.cn-north-4.myhuaweicloud.com","id":"ff0bb9425e374c65964226610dfa7e33","info_version":"v3","method":"post","name":"RunCreateVideoStreamModerationJob","parameters":{},"paths":{"/v3/{project_id}/moderation/video-stream/jobs":{"post":{"description":"创建视频流内容审核作业,创建成功会将作业ID返回给用户","operationId":"RunCreateVideoStreamModerationJob","parameters":[{"description":"用户的project_id 登陆华为云 -> 用户中心 -> 我的凭证 -> api凭证,即可查看对应区域的项目ID。","in":"path","name":"project_id","required":true,"type":"string"},{"description":"创建视频流内容审核作业请求体","in":"body","name":"RunCreateVideoStreamModerationJobRequestBody","required":true,"schema":{"$ref":"#/definitions/VideoStreamCreateRequest"}},{"description":"用户Token。 通过调用IAM服务获取用户Token接口获取(响应消息头中X-Subject-Token的值)。","in":"header","name":"X-Auth-Token","required":true,"type":"string"}],"produces":["application/json"],"responses":{"200":{"description":"创建视频流内容审核作业响应体","examples":{"application/json":{"job_id":"01661356800_7c0fe871f80543358917e4faebca4a48","request_id":"07490f57ac5e034c077ab25b5f9e1da5"}},"schema":{"$ref":"#/definitions/VideoStreamCreateResponse"}},"400":{"description":"返回失败响应体","examples":{"application/json":{"error_code":"AIS.0401","error_msg":"The input parameter event_type is incorrect."}},"schema":{"$ref":"#/definitions/ErrorRsp"}}},"summary":"创建视频流内容审核作业","tags":["视频流内容审核"],"x-apiexplorer-hide":"N","x-is-registered":"Y","x-open-region-cloud":"hc","x-request-examples-1":{"audio_categories":["porn","ad","politics","moan","abuse"],"callback":"xxx","data":{"frame_interval":3,"url":"xxx"},"event_type":"default","image_categories":["politics","porn","image_text","terrorism"]},"x-request-examples-description-1":"创建视频流内容审核作业","x-request-examples-text-1":{"audio_categories":["porn","ad","politics","moan","abuse"],"callback":"xxx","data":{"frame_interval":3,"url":"xxx"},"event_type":"default","image_categories":["politics","porn","image_text","terrorism"]},"x-request-examples-url-1":"POST https://{endpoint}/v3/{project_id}/moderation/video-stream/jobs","x-support-sdk":"Y"}}},"product_short":"Moderation","region_id":"cn-north-4","schemes":["HTTPS"],"security_definitions":null,"summary":"创建视频流内容审核作业","tags":"视频流内容审核","uri":null,"version":"2.0"}