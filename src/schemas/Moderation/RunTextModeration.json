{"base_path":"/","components":null,"consumes":"","definitions":{"ErrorRsp":{"description":"失败时返回的错误对象","properties":{"error_code":{"description":"调用失败时的错误码,具体请参见错误码。\n\n调用成功时无此字段。","maxLength":36,"minLength":8,"type":"string"},"error_msg":{"description":"调用失败时的错误信息。\n\n调用成功时无此字段。","maxLength":512,"minLength":2,"type":"string"}},"required":["error_code","error_msg"],"type":"object"},"SegmentResult":{"properties":{"glossary_name":{"description":"命中的自定义词库名称。\n\n命中自定义词库时,才会返回当前字段。","example":"zzz","type":"string"},"position":{"description":"命中的风险片段在文本中的位置,起始位置从0开始","example":[3,4,5],"items":{"format":"int32","type":"integer"},"type":"array"},"segment":{"description":"命中的风险片段。","example":"xxx","type":"string"}}},"TextDetectionDataReq":{"properties":{"language":{"description":"支持检测的文本语言","enum":["zh"],"example":"zh","type":"string"},"text":{"description":"待检测文本,编码格式为“utf-8”,限定2000个字符以内,文本长度超过1500个字符时,只检测前1500个字符。","example":"asdfasdfasdf","maxLength":1500,"minLength":1,"type":"string"}},"required":["text"],"type":"object"},"TextDetectionReq":{"description":"文本内容审核请求体","properties":{"biz_type":{"description":"自定义审核策略名称,可在控制台配置;如果请求参数中传了biz_type则优先使用biz_type,如果用户没传biz_type则event_type必须传。","example":"my_custom_type","type":"string","x-open-region-cloud":"hc"},"categories":{"description":"文本审核场景,可选值如下:\nterrorism: 暴恐\nporn: 色情\nban: 违禁\nabuse: 辱骂\nad: 广告\n当categories缺省或为空时,默认审核terrorism、porn、ban、abuse、ad。","example":["porn","ad"],"items":{"type":"string"},"type":"array"},"data":{"$ref":"#/definitions/TextDetectionDataReq"},"event_type":{"description":"事件类型。\n\n可选值如下:\n\nnickname: 昵称\n\ntitle: 标题\n\narticle: 帖子\n\ncomment: 评论\n\nbarrage: 弹幕\n\nsearch: 搜索栏\n\nprofile: 个人简介","example":"comment","type":"string"},"glossary_names":{"description":"检测时使用的自定义黑名单词库列表。自定义黑词库的创建和使用请参见[配置定义黑名单词库](https://support.huaweicloud.com/api-moderation/moderation_03_0027.html#moderation_03_0027__section12400140132318)。","example":["custom_xxx"],"items":{"type":"string"},"type":"array","x-open-region-cloud":"hc"},"white_glossary_names":{"description":"检测时使用的自定义白名单词库列表。自定义白词库的创建和使用请参见[配置定义白名单词库](https://support.huaweicloud.com/api-moderation/moderation_03_0027.html#moderation_03_0027__section178844141394)。","example":["custom_xxx"],"items":{"type":"string"},"type":"array","x-open-region-cloud":"hc"}},"required":["data"]},"TextDetectionResponse":{"properties":{"request_id":{"description":"本次请求的唯一标识,用于问题排查,建议保存","example":"58e7d9c7-3456-4ba1-80df-6f25506bc4df","maxLength":64,"minLength":2,"type":"string"},"result":{"$ref":"#/definitions/TextDetectionResult","description":"调用成功时表示调用结果。\n\n调用失败时无此字段。"}}},"TextDetectionResult":{"properties":{"details":{"description":"检测详情","items":{"$ref":"#/definitions/TextDetectionResultDetail"},"type":"array"},"label":{"description":"检测结果的标签。\n\n支持label列表如下:\n\npolitics: 涉政\n\nterrorism: 暴恐\n\nporn: 色情\n\nban: 违禁\n\nabuse: 辱骂\n\nad: 广告\n\nad_law: 广告法\n\nmeaningless: 无意义\n\ncustomized:自定义(命中自定义词库中的关键词)","example":"customized","type":"string"},"suggestion":{"description":"审核结果是否通过。\n\nblock:包含敏感信息,不通过\n\npass:不包含敏感信息,通过\n\nreview:需要人工复检","example":"block","type":"string"}}},"TextDetectionResultDetail":{"properties":{"confidence":{"description":"置信度,取值范围 0-1,值越大,可信度越高。","example":1,"format":"float","type":"number"},"label":{"description":"检测结果的标签。\n\n支持label列表如下:\n\npolitics: 涉政\n\nterrorism: 暴恐\n\nporn: 色情\n\nban: 违禁\n\nabuse: 辱骂\n\nad: 广告\n\nad_law: 广告法\n\ncustomized:自定义(命中自定义词库中的关键词)","example":"customized","type":"string"},"segments":{"description":"命中的风险片段信息,如果命中了语义算法模型,则会返回一个空的列表。","items":{"$ref":"#/definitions/SegmentResult"},"type":"array"},"suggestion":{"description":"审核结果是否通过。\n\nblock:包含敏感信息,不通过\n\npass:不包含敏感信息,通过\n\nreview:需要人工复检","example":"block","type":"string"}}}},"description":null,"group_id":"bf0f60d381894fc78dd6cd0757fc8dcb","host":"moderation.cn-north-4.myhuaweicloud.com","id":"5e196f9db85948479644a66ae0cf062d","info_version":"v3","method":"post","name":"RunTextModeration","parameters":{},"paths":{"/v3/{project_id}/moderation/text":{"post":{"description":"分析并识别用户上传的文本内容是否有敏感内容(如色情、政治等),并将识别结果返回给用户","operationId":"RunTextModeration","parameters":[{"description":"用户的project_id 登陆华为云 -> 用户中心 -> 我的凭证 -> api凭证 即可查看对应区域的项目ID。","in":"path","name":"project_id","required":true,"type":"string"},{"description":"文本内容审核请求体","in":"body","name":"RunTextModerationRequestBody","required":true,"schema":{"$ref":"#/definitions/TextDetectionReq"}},{"description":"用户Token。 通过调用IAM服务获取用户Token接口获取(响应消息头中X-Subject-Token的值)。","in":"header","name":"X-Auth-Token","required":true,"type":"string"}],"produces":["application/json"],"responses":{"200":{"description":"成功响应体","examples":{"application/json":{"request_id":"58e7d9c7-3456-4ba1-80df-6f25506bc4df","result":{"details":[{"confidence":1,"label":"customized","segments":[{"glossary_name":"zzz","segment":"xxx"}],"suggestion":"block"}],"label":"customized","suggestion":"block"}}},"schema":{"$ref":"#/definitions/TextDetectionResponse"}},"400":{"description":"失败响应体","examples":{"application/json":{"error_code":"AIS.0011","error_msg":"Lack the request parameter, or the request parameter is empty."}},"schema":{"$ref":"#/definitions/ErrorRsp"}}},"summary":"文本内容审核","tags":["文本内容审核"],"x-apiexplorer-hide":"N","x-is-registered":"Y","x-request-examples-1":{"data":{"text":"asdfasdfasdf"},"event_type":"comment","glossary_names":["custom_xxx"],"white_glossary_names":["custom_xxx"]},"x-request-examples-2":{"biz_type":"my_custom_type","data":{"text":"asdfasdfasdf"}},"x-request-examples-description-2":"使用biz_type调用","x-request-examples-text-1":{"data":{"text":"asdfasdfasdf"},"event_type":"comment","glossary_names":["custom_xxx"],"white_glossary_names":["custom_xxx"]},"x-request-examples-text-2":{"biz_type":"my_custom_type","data":{"text":"asdfasdfasdf"}},"x-request-examples-url-1":"POST https://{endpoint}/v3/{project_id}/moderation/text","x-request-examples-url-2":"POST https://{endpoint}/v3/{project_id}/moderation/text","x-support-sdk":"Y"}}},"product_short":"Moderation","region_id":"cn-north-4","schemes":["HTTPS"],"security_definitions":null,"summary":"文本内容审核","tags":"文本内容审核","uri":null,"version":"2.0"}