{"base_path":"/","components":null,"consumes":"","definitions":{"DeadLetterQueue":{"description":"订阅的死信参数列表","properties":{"connection_id":{"description":"目标连接id","example":"8516d278-268a-4a8b-8766-9bf9b3302f43","maxLength":128,"minLength":1,"type":"string"},"instance_id":{"description":"实例id","example":"ff0e3f10-fcab-4c3a-84bb-cf5a8b6f7722","maxLength":128,"minLength":1,"type":"string"},"topic":{"description":"主题","example":"topic","maxLength":128,"minLength":1,"type":"string"},"type":{"description":"队列类型","enum":["KAFKA"],"example":"KAFKA","type":"string"}},"required":["type","instance_id","connection_id","topic"],"type":"object"},"KafkaTargetDetail":{"description":"订阅的kafka事件目标参数列表,该字段序列化后总长度不超过1024字节","properties":{"keyTransform":{"description":"键值规则","properties":{"template":{"description":"键值规则模板,键值规则为VARIABLE时必填","type":"string"},"type":{"description":"键值规则类型","enum":["NONE","VARIABLE","CONSTANT"],"type":"string"},"value":{"description":"键值规则,键值规则为VARIABLE,CONSTANT时必填","type":"string"}},"type":"object"},"topic":{"description":"主题","example":"8516d278-268a-4a8b-8766-9bf9b3302f43","type":"string"}},"required":["topic"],"type":"object"},"SmnTargetDetail":{"description":"订阅的SMN事件目标参数列表,该字段序列化后总长度不超过1024字节","properties":{"agency_name":{"description":"委托名称","example":"EG_SMN_PUBLISHER_AGENCY","type":"string"},"subject_transform":{"description":"标题规则","properties":{"template":{"description":"标题规则模板,键值规则为VARIABLE时必填","type":"string"},"type":{"description":"标题规则类型","enum":["VARIABLE","CONSTANT"],"type":"string"},"value":{"description":"标题规则","type":"string"}},"required":["type","value"],"type":"object"},"urn":{"description":"主题urn","example":"urn:smn:cn-north-7:bac852160cc743158936edaab6dda813:122","type":"string"}},"required":["urn","agency_name"],"type":"object"},"SubscriptionTarget":{"properties":{"connection_id":{"description":"订阅的事件目标使用的目标链接ID","example":"456eekj3-778u-4tyu-dfrt-er55e37f667t","maxLength":64,"type":"string"},"dead_letter_queue":{"$ref":"#/definitions/DeadLetterQueue"},"detail":{"description":"订阅的事件目标参数列表,该字段序列化后总长度不超过1024字节,函数、函数流、webhook订阅目标必填,其中函数、函数流委托名称必填","example":{"agency_name":"EG_TARGET_AGENCY","url":"http://10.213.96.90:8080/t/nodeapp/trigger-hello-nodejs"},"type":"object"},"id":{"description":"订阅目标ID,需保证全局唯一,由小写字母、数字、中划线组成,必须字母或数字开头。 更新订阅场景时,指定ID的订阅目标存在时则进行更新,否则进行创建; 创建订阅目标场景时,指定ID作为待创建的订阅目标对象ID,未指定时由系统自动生成。 更新订阅目标时,此字段忽略;","example":"3a0eeff2-78a4-4122-dfge-7ty5e37f64er","maxLength":64,"minLength":32,"type":"string"},"kafka_detail":{"$ref":"#/definitions/KafkaTargetDetail","description":"订阅的事件kafka目标参数列表,该字段序列化后总长度不超过1024字节,kafka订阅目标必填"},"name":{"description":"订阅的事件目标名称","example":"WEBHOOK","maxLength":128,"type":"string"},"provider_type":{"description":"订阅的事件目标的提供方类型","enum":["CUSTOM","OFFICIAL"],"example":"CUSTOM","type":"string"},"smn_detail":{"$ref":"#/definitions/SmnTargetDetail","description":"订阅的事件smn目标参数列表,该字段序列化后总长度不超过1024字节,smn订阅目标必填"},"transform":{"$ref":"#/definitions/TransForm"}},"required":["name","provider_type","transform"],"type":"object"},"SubscriptionTargetInfo":{"properties":{"connection_id":{"description":"订阅的事件目标使用的目标链接ID","example":"456eekj3-778u-4tyu-dfrt-er55e37f667t","maxLength":64,"type":"string"},"created_time":{"description":"创建时间","example":"2021-12-09 09:00:00","type":"string"},"dead_letter_queue":{"$ref":"#/definitions/DeadLetterQueue"},"detail":{"description":"订阅的事件目标参数列表","example":{"url":"http://10.213.96.90:8080/t/nodeapp/trigger-hello-nodejs"},"type":"object"},"id":{"description":"订阅目标ID","example":"3a0eeff2-78a4-4122-dfge-7ty5e37f64er","type":"string"},"name":{"description":"订阅的事件目标名称","example":"WEBHOOK","type":"string"},"provider_type":{"description":"订阅的事件目标的提供方类型","example":"CUSTOM","type":"string"},"transform":{"$ref":"#/definitions/TransForm"},"updated_time":{"description":"更新时间","example":"2021-12-09 09:00:00","type":"string"}},"type":"object"},"TransForm":{"description":"订阅的事件目标转换规则","properties":{"template":{"description":"变量类型规则时,规则内容的模板定义,支持对已定义变量的引用。","example":"{\"contant_boolean\": ${contant_boolean},\"contant_string\": \"${contant_string!\\\"default\\\"}\",\"varaible_string\": \"${contant_boolean}\",\"varaible_json_object\": ${varaible_json_object!\"null\"}}","maxLength":2048,"type":"string"},"type":{"description":"转换规则类型","enum":["ORIGINAL","CONSTANT","VARIABLE"],"example":"VARIABLE","type":"string"},"value":{"description":"常量类型规则时,字段为常量内容定义;\n变量类型规则时,为变量定义,内容必须为JsonObject字符串。\n变量最多支持100个,且不支持嵌套结构定义;\n变量名由字母、数字、点、下划线和中划线组成,必须字母或数字开头不能以HC.开头,长度不超过64个字符;\n变量值表达式支持常量或JsonPath表达式,字符串长度不超过1024个字符。","example":"{\"contant_boolean\": true,\"contant_string\": \"constant\",\"varaible_string\": \"$.data.string\",\"varaible_json_object\": \"$.data.object\"}","maxLength":1024,"type":"string"}},"required":["type"],"type":"object"}},"description":null,"group_id":"dbc8d90200f14ed9a1cfd69008aa0f08","host":"eg.cn-north-4.myhuaweicloud.com","id":"888e5437afcf46429f39bbfe586752f6","info_version":"v1","method":"post","name":"CreateSubscriptionTarget","parameters":{"IamToken":{"description":"用户Token。通过调用IAM服务获取用户Token接口获取(响应消息头中X-Subject-Token的值)。","in":"header","maxLength":16384,"minLength":1,"name":"X-Auth-Token","required":true,"type":"string","x-example":"MIIDkgYJKoZIhvcNAQcCoIIDgzCCXXXXXX..."},"ProjectId":{"description":"租户项目ID","in":"path","name":"project_id","required":true,"type":"string","x-example":"73d69ae0cfcf460190522d06b60f05ad"},"SubscriptionId":{"description":"事件订阅ID","in":"path","name":"subscription_id","required":true,"type":"string","x-example":"8d742b607c3a4e31dcd0eb7ef9c9ba7e"}},"paths":{"/v1/{project_id}/subscriptions/{subscription_id}/targets":{"post":{"description":"创建单个事件订阅目标。","operationId":"CreateSubscriptionTarget","parameters":[{"$ref":"#/parameters/IamToken"},{"$ref":"#/parameters/ProjectId"},{"$ref":"#/parameters/SubscriptionId"},{"description":"create subscription target request","in":"body","name":"CreateSubscriptionTargetRequestBody","required":true,"schema":{"$ref":"#/definitions/SubscriptionTarget"}}],"produces":["application/json"],"responses":{"200":{"description":"Information","headers":{"X-Request-Id":{"description":"This field is the request ID number for task tracking. Format is request_uuid-timestamp-hostname.","type":"string"}},"schema":{"$ref":"#/definitions/SubscriptionTargetInfo"}},"400":{"$ref":"#/responses/ServerBadRequest"},"401":{"$ref":"#/responses/ServerUnauthorized"},"403":{"$ref":"#/responses/ServerForbidden"},"404":{"$ref":"#/responses/ServerNotFound"},"500":{"$ref":"#/responses/ServerInternalServerError"}},"summary":"创建事件订阅目标","tags":["事件订阅管理"],"x-is-registered":"Y","x-support-sdk":"Y"}}},"product_short":"EG","region_id":"cn-north-4","schemes":["HTTPS"],"security_definitions":null,"summary":"创建事件订阅目标","tags":"事件订阅管理","uri":null,"version":"2.0"}