{"base_path":"/","components":null,"consumes":"[\"application/json;charset=UTF-8\"]","definitions":{"HotkeyHistoryDetailResponse":{"description":"查询热key分析记录详情返回体","properties":{"created_at":{"description":"分析任务创建时间,格式为:\"2020-06-15T02:21:18.669Z\"","example":"2020-06-15T02:21:18.669Z","type":"string"},"finished_at":{"description":"分析任务结束时间,格式为:\"2020-06-15T02:21:18.669Z\"","example":"2020-06-15T02:21:25.588Z","type":"string"},"id":{"description":"热key分析记录ID","example":"0ccb25d5-27cf-4188-b5ea-987730a85371","type":"string"},"instance_id":{"description":"实例ID","example":"4cd5dbb8-aacd-4603-b817-3e97d48c7a20","type":"string"},"keys":{"description":"热key记录","items":{"$ref":"#/definitions/HotkeysBody"},"type":"array"},"num":{"description":"热key的数量","example":10,"type":"integer"},"scan_type":{"description":"分析方式","enum":["manual","auto"],"example":"manual","type":"string"},"started_at":{"description":"分析任务开始时间,格式为:\"2020-06-15T02:21:18.669Z\"","example":"2020-06-15T02:21:23.534Z","type":"string"},"status":{"description":"分析任务状态","enum":["waiting","running","success","failed"],"example":"success","type":"string"}}},"HotkeysBody":{"description":"热key记录结构体","properties":{"db":{"description":"热key所在的db","example":0,"format":"int32","type":"integer"},"freq":{"description":"表示某个key在一段时间的访问频度,会随着访问的频率而变化。\n\n该值并不是简单的访问频率值,而是一个基于概率的对数计数器结果,最大为255(可表示100万次访问),超过255后如果继续频繁访问该值并不会继续增大,同时默认如果每过一分钟没有访问,该值会衰减1。","example":4,"type":"integer"},"name":{"description":"key名称","example":"dcs-hotkey-test","type":"string"},"shard":{"description":"热key所在的分片,仅在实例类型为集群时支持,格式为ip:port","example":"192.168.1.134:6379","type":"string"},"size":{"description":"key的value大小。","example":3000,"format":"int64","type":"integer"},"type":{"description":"key类型","enum":["string","list","set","zset","hash"],"example":"string","type":"string"},"unit":{"description":"key大小的单位。type为string时,单位是:byte;type为list/set/zset/hash时,单位是:count","example":"byte","type":"string"}}}},"description":null,"group_id":"6d1f519281c6497eba6cbfcc3b6d06e5","host":"dcs.cn-north-4.myhuaweicloud.com","id":"357eff8f623545a98cf0ff85a4f1eb2e","info_version":"v2","method":"post","name":"CreateHotkeyScanTask","parameters":{},"paths":{"/v2/{project_id}/instances/{instance_id}/hotkey-task":{"post":{"description":"创建热key分析任务,Redis 3.0 不支持热key分析。\n\n热key分析需要将缓存实例配置参数maxmemory-policy设置为allkeys-lfu或volatile-lfu。","operationId":"CreateHotkeyScanTask","parameters":[{"description":"项目ID。","in":"path","name":"project_id","required":true,"type":"string","x-example":"a4d31cb6-3d72-4fdc-8ec9-6e3a41e47f71"},{"description":"实例ID。","in":"path","name":"instance_id","required":true,"type":"string","x-example":"5560df16-cebf-4473-95c4-d1b573c16e79"}],"responses":{"200":{"description":"创建热key分析任务成功。","examples":{"application/json":{"created_at":"2020-06-15T02:21:18.669Z","finished_at":null,"id":"aa735b6f-3d70-44e3-9771-66c6fae7459a","instance_id":"5560df16-cebf-4473-95c4-d1b573c16e79","keys":null,"num":0,"scan_type":"manual","started_at":null,"status":"waiting"}},"schema":{"$ref":"#/definitions/HotkeyHistoryDetailResponse"}},"400":{"description":"非法请求。","examples":{"application/json":{"error_code":"DCS.4922","error_msg":"Does not support hotkey analyze."}}},"401":{"description":"认证信息非法。"},"403":{"description":"请求被拒绝访问。"},"404":{"description":"所请求的资源不存在。"},"500":{"description":"内部服务错误。"}},"summary":"创建热key分析任务","tags":["缓存分析"],"x-constraint":"","x-is-registered":"Y","x-name":"创建大key分析任务","x-produc-type":"dcs","x-request-examples-url-1":"POST https://dcs.cn-south-1.myhuaweicloud.com/v2/a4d31cb6-3d72-4fdc-8ec9-6e3a41e47f71/instances/5560df16-cebf-4473-95c4-d1b573c16e79/hotkey-task","x-scope":"","x-support-sdk":"Y"}}},"product_short":"DCS","region_id":"cn-north-4","schemes":["HTTPS"],"security_definitions":null,"summary":"创建热key分析任务","tags":"缓存分析","uri":null,"version":"2.0"}