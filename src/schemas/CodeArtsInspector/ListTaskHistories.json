{"base_path":"/v3","components":null,"consumes":"[\"application/json; charset=UTF-8\"]","definitions":{"ErrorResponseBody":{"properties":{"error_code":{"description":"错误码","example":"VSS.00006016","maxLength":50,"minLength":0,"type":"string"},"error_msg":{"description":"错误描述","example":"Invalid domain parameter.","maxLength":256,"minLength":0,"type":"string"}}},"ListTaskHistoriesResponseBody":{"properties":{"data":{"description":"网站历史扫描任务列表","items":{"$ref":"#/definitions/ShowTasksResponseBody"},"maxItems":100000,"minItems":0,"type":"array"},"total":{"description":"网站历史扫描任务总数","format":"int32","maximum":100000,"minimum":0,"type":"integer"}}},"ShowTasksResponseBody":{"allOf":[{"$ref":"#/definitions/TaskInfos"},{"properties":{"create_time":{"description":"创建任务的时间","example":"2021-09-18 16:26:24","maxLength":19,"minLength":0,"type":"string"},"domain_name":{"description":"网站域名","example":"127.0.0.1:8080","maxLength":256,"minLength":1,"type":"string"},"end_time":{"description":"任务结束的时间","example":"2021-09-18 17:00:00","maxLength":19,"minLength":0,"type":"string"},"pack_num":{"description":"包总数","format":"int64","maximum":100000,"minimum":0,"type":"integer"},"progress":{"description":"任务进度","format":"int32","maximum":100,"minimum":0,"type":"integer"},"reason":{"description":"任务状态描述","example":"Wait for the result.","maxLength":128,"minLength":0,"type":"string"},"safe_level":{"description":"安全等级:\n  * safety - 安全\n  * average - 中风险\n  * highrisk - 高风险\n","enum":["safety","average","highrisk"],"type":"string"},"schedule_status":{"description":"监测任务状态:\n  * running - 正在运行\n  * waiting - 正在等待\n  * finished - 已完成\n","enum":["running","waiting","finished"],"type":"string"},"score":{"description":"安全分数","format":"int32","maximum":100,"minimum":0,"type":"integer"},"start_time":{"description":"任务启动的时间","example":"2021-09-18 16:26:24","maxLength":19,"minLength":0,"type":"string"},"statistics":{"$ref":"#/definitions/VulnsLevel","description":"漏洞风险等级统计"},"task_id":{"description":"任务ID","example":"017281b97c9845b08174895992ba179643028","maxLength":50,"minLength":32,"type":"string"},"task_settings":{"$ref":"#/definitions/TaskSettings","description":"扫描任务设置"},"task_status":{"description":"任务状态:\n  * running - 正在运行\n  * success - 成功\n  * canceled - 已取消\n  * waiting - 正在等待\n  * ready - 已就绪,排队中\n  * failure - 失败\n","enum":["running","success","canceled","waiting","ready","failure"],"example":"waiting","type":"string"}},"type":"object"}]},"TaskInfos":{"properties":{"task_name":{"description":"任务名称","example":"测试任务1","maxLength":16,"minLength":1,"type":"string"},"task_type":{"default":"normal","description":"扫描任务类型:\n  * normal - 普通任务\n  * monitor - 监测任务\n","enum":["normal","monitor"],"type":"string"},"url":{"description":"待扫描的目标网址","example":"https://127.0.0.1:8080","maxLength":256,"minLength":1,"type":"string"}},"required":["task_name","url"]},"TaskSettings":{"properties":{"task_config":{"description":"扫描任务配置","properties":{"cve_check":{"default":true,"description":"是否进行CVE漏洞扫描","type":"boolean"},"malicious_code":{"default":false,"description":"是否进行网站挂马检测","type":"boolean"},"malicious_link":{"default":false,"description":"是否进行链接健康检测(死链、暗链、恶意外链)","type":"boolean"},"picture_check":{"default":false,"description":"是否进行网站内容合规图片检测","type":"boolean"},"port_scan":{"default":true,"description":"是否进行端口扫描","type":"boolean"},"scan_mode":{"default":"normal","description":"扫描模式:\n  * fast - 快速扫描\n  * normal - 标准扫描\n  * deep - 深度扫描\n","enum":["fast","normal","deep"],"type":"string"},"text_check":{"default":true,"description":"是否进行网站内容合规文字检测","type":"boolean"},"weak_pwd_scan":{"default":true,"description":"是否进行弱密码扫描","type":"boolean"}},"type":"object"},"task_period":{"description":"监测任务的定时触发周期:\n  * everyday - 每日\n  * threedays - 每三天\n  * everyweek - 每星期\n  * everymonth - 每月\n","enum":["everyday","threedays","everyweek","everymonth"],"type":"string"},"timer":{"description":"普通任务的定时启动时间","example":"2021-09-18 16:26:24","maxLength":19,"minLength":0,"type":"string"},"trigger_time":{"description":"监测任务的定时触发时间","example":"2021-09-18 16:26:24","maxLength":19,"minLength":0,"type":"string"}}},"VulnsLevel":{"properties":{"high":{"description":"高危漏洞数","format":"int32","maximum":1000,"minimum":0,"type":"integer"},"hint":{"description":"提示危漏洞数","format":"int32","maximum":1000,"minimum":0,"type":"integer"},"low":{"description":"低危漏洞数","format":"int32","maximum":1000,"minimum":0,"type":"integer"},"middle":{"description":"中危漏洞数","format":"int32","maximum":1000,"minimum":0,"type":"integer"}}}},"description":null,"group_id":"8f2854999e424ea3a8f2be6bd7e13cab","host":"vss.myhuaweicloud.com","id":"b71071d2a2d14b9284a025cefe188e19","info_version":"v3","method":"get","name":"ListTaskHistories","parameters":{},"paths":{"/{project_id}/webscan/tasks/histories":{"get":{"description":"获取网站漏洞扫描的历史扫描任务","operationId":"ListTaskHistories","parameters":[{"description":"用户Token,通过调用IAM服务获取用户Token接口获取(响应消息头中X-Subject-Token的值)。","in":"header","maxLength":102400,"minLength":1,"name":"X-Auth-Token","required":true,"type":"string"},{"description":"用户的project_id,获取方法请参见[获取项目ID](https://support.huaweicloud.com/api-vss/vss_api_04_019.html)。","in":"path","maxLength":32,"minLength":32,"name":"project_id","required":true,"type":"string"},{"description":"网站域名ID","in":"query","maxLength":32,"minLength":32,"name":"domain_id","required":true,"type":"string","x-example":"2ec0993b8572455aacf14b6f9288b167"},{"default":0,"description":"分页查询,偏移量,表示从此偏移量开始查询","format":"int32","in":"query","maximum":10000,"minimum":0,"name":"offset","required":false,"type":"integer","x-example":0},{"default":5,"description":"分页查询,每页显示的条目数量","format":"int32","in":"query","maximum":10000,"minimum":1,"name":"limit","required":false,"type":"integer","x-example":10}],"responses":{"200":{"description":"OK","examples":{"application/json":{"data":[{"create_time":"2021-09-18 16:26:24","domain_name":"127.0.0.1:8080","end_time":"2021-09-18 17:00:00","pack_num":5,"progress":100,"reason":"Successful. Your website is very safe!","safe_level":"safety","score":100,"start_time":"2021-09-18 16:26:24","statistics":{"high":0,"hint":0,"low":0,"middle":0},"task_id":"017281b97c9845b08174895992ba179643028","task_name":"测试任务1","task_settings":{"task_config":{"cve_check":false,"malicious_code":false,"malicious_link":false,"picture_check":false,"port_scan":false,"scan_mode":"normal","text_check":false,"weak_pwd_scan":false}},"task_status":"success","task_type":"normal","url":"https://127.0.0.1:8080"}],"total":1}},"schema":{"$ref":"#/definitions/ListTaskHistoriesResponseBody"}},"400":{"description":"Bad Request","schema":{"$ref":"#/definitions/ErrorResponseBody"}},"401":{"description":"Unauthorized","schema":{"$ref":"#/definitions/ErrorResponseBody"}},"418":{"description":"I'm a teapot","schema":{"$ref":"#/definitions/ErrorResponseBody"}}},"summary":"获取网站的历史扫描任务","tags":["web_tasks"],"x-apiexplorer-hide":"N","x-is-registered":"Y","x-request-examples-url-1":"GET https://{endpoint}/v3/{project_id}/webscan/tasks/histories?domain_id=2ec0993b8572455aacf14b6f9288b167","x-support-sdk":"Y"}}},"product_short":"CodeArtsInspector","region_id":"cn-north-4","schemes":["HTTPS"],"security_definitions":null,"summary":"获取网站的历史扫描任务","tags":"网站任务管理","uri":null,"version":"2.0"}