{"base_path":"/","components":null,"consumes":"[\"application/json;charset=UTF-8\"]","definitions":{"GetStreamAddressResponseBody":{"properties":{"hls_pull_flow_address":{"description":"HLS(HTTP Live Streaming)拉流地址,视频编码格式为H265和H264均会返回HLS拉流地址。","example":"rtmp://10.104.11.66:64/vis/RTMP******","type":"string"},"pull_flow_address":{"description":"拉流地址,视频流编码格式为H264和H265均会返回该字段。如果视频流的共享类型为PRIVATE(非共享),拉流时必须在请求头中添加X-Auth-Token,值为创建视频流的用户的token。","example":"http://cecb3f14149**********e92f26ca72c.apigw.com/live/work001?app=vis&stream=RTMP******","type":"string"},"push_flow_address":{"description":"只有RTMP类型的流,该字段才有实际参考意义,代表推流地址。","example":"","type":"string"},"push_flow_protocol":{"description":"只有RTMP类型的流,该字段才有实际参考意义,代表推流协议。","example":"RTMP","type":"string"}}}},"description":null,"group_id":"5346b7c1dc284228a28795d5bcbd550d","host":"vis.cn-north-4.myhuaweicloud.com","id":"dfe13c984b514615a375cdda75a10ec7","info_version":"v1","method":"get","name":"ListStreamsAddresses","parameters":{"Authorization":{"description":"使用AK/SK方式认证时必选,携带的鉴权信息。","in":"header","maxLength":256,"minLength":1,"name":"Authorization","required":false,"type":"string","x-example":"SDK-HMAC-SHA256 Access=xxx, SignedHeaders=content-type;host;x-sdk-date, Signature=xxx"},"X-Auth-Token":{"description":"普通租户的token。","in":"header","maxLength":10240,"minLength":1,"name":"X-Auth-Token","required":true,"type":"string"},"X-Project-Id":{"description":"使用AK/SK方式认证时必选,携带项目ID信息。","in":"header","maxLength":64,"minLength":1,"name":"X-Project-Id","required":false,"type":"string","x-example":"70b76xxxxxx34253880af501cdxxxxxx"},"X-Sdk-Date":{"description":"使用AK/SK方式认证时必选,请求的发生时间。","in":"header","maxLength":256,"minLength":1,"name":"X-Sdk-Date","required":false,"type":"string","x-example":"20191115T033655Z"},"project_id":{"description":"项目ID,获取方法请参考[获取项目ID](https://support.huaweicloud.com/api-vis/vis_03_0005.html)","in":"path","maxLength":32,"minLength":32,"name":"project_id","required":true,"type":"string"}},"paths":{"/v1/{project_id}/streams/{stream_name}/endpoint":{"get":{"consumes":[],"deprecated":false,"description":"此接口用于获取指定视频流的地址。该地址用于进行视频流推流或者拉流。\n- 实时视频流,可以通过该接口返回的pull_flow_address参数值获取视频流地址。\n- 如果编码格式是H264、H265,均可通过该接口返回的hls_pull_flow_address和pull_flow_address获取视频流地址。\n- 对于RTMP类型的视频流,该接口可以获取到推流地址(对应push_flow_address参数值),通过该地址,可以将视频流推到VIS中。\n\n当因网络或其它原因,导致视频流中断后自动恢复时,推流地址或拉流地址可能发生变化。请重新调用该接口,并尝试使用新的推流地址再次进行推流。在灾备场景下,拉流地址可能会发生变化,导致已获取的相应地址无效,请重新调用该接口获取新的地址。\n\n为防止接入视频被泄露和盗链,获取的拉流地址中包含防盗链,防盗链的有效期默认为24小时(后续将支持自定义防盗链有效期)。为避免因防盗链超过有效期导致接入视频无法播放,请您在有效期内重新调用该接口获取新的防盗链地址。","operationId":"ListStreamsAddresses","parameters":[{"$ref":"#/parameters/project_id"},{"$ref":"#/parameters/X-Auth-Token"},{"$ref":"#/parameters/Authorization"},{"$ref":"#/parameters/X-Sdk-Date"},{"$ref":"#/parameters/X-Project-Id"},{"description":"视频流名称","in":"path","name":"stream_name","required":true,"type":"string","x-example":"RTMP******"},{"description":"获取的视频流拉流地址的有效时间,设置范围为[600,604800],单位:秒。建议设置为8小时以内。\n\n默认值24小时。","in":"query","name":"expire_time","required":false,"type":"integer","x-example":86400}],"produces":[],"responses":{"200":{"description":"正常","examples":{"application/json":{"hls_pull_flow_address":"https://vps-cn-north-7-cloud.hwcloudvis.com/mss-stable-work001/hls/xxxxn.m3u8?project_id=aecdc9b7********9fbc5b04f1d9b525&key=8930f********15cd409b1b8fbe9b8cb&t=1629790048","pull_flow_address":"https://vps-cn-north-7-cloud.hwcloudvis.com/mss-stable-work001/live?app=vis&stream=xxxxn&project_id=aecdc9b7********9fbc5b04f1d9b525&key=8930f********15cd409b1b8fbe9b8cb&t=1629790048","push_flow_address":"100.95.***.222","push_flow_protocol":"HTTP-FLV"},"application/json-1":{"hls_pull_flow_address":"https://vps-cn-north-7-cloud.hwcloudvis.com/mss-stable-work002/hls/channel_06640495271320000********.m3u8?project_id=aecdc9b7********9fbc5b04f1d9b525&key=6eeea********db10dcf3fa30c20d249&t=1629789339","pull_flow_address":"https://vps-cn-north-7-cloud.hwcloudvis.com/mss-stable-work002/live?app=vis&stream=channel_06640495271320000********&project_id=aecdc9b7********9fbc5b04f1d9b525&key=6eeea********db10dcf3fa30c20d249&t=1629789339","push_flow_address":"100.95.***.93","push_flow_protocol":"GB/T28181"}},"schema":{"$ref":"#/definitions/GetStreamAddressResponseBody"}},"400":{"description":"请求错误","examples":{"application/json":{"error_code":"VIS.0204","error_msg":"Stream is not activated successfully, please retry. Can not get endpoint."}}}},"summary":"获取视频流地址","tags":["视频流管理"],"x-apiexplorer-hide":"N","x-is-registered":"Y","x-name":"获取视频流地址","x-request-examples-url-1":"GET /v1/aecdc9b7********9fbc5b04f1d9b525/streams/channel_06640495271320000********/endpoint","x-support-sdk":"Y"}}},"product_short":"VIS","region_id":"cn-north-4","schemes":["HTTPS"],"security_definitions":null,"summary":"获取视频流地址","tags":"视频流管理","uri":null,"version":"2.0"}