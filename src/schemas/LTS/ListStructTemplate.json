{"base_path":"/","components":null,"consumes":"[\"application/json;charset=UTF-8\"]","definitions":{"DemoField":{"description":"示例字段对象","properties":{"content":{"description":"字段示例内容","example":"2021-12-13","maxLength":5000,"minLength":1,"type":"string"},"field_name":{"description":"字段名称","example":"date","maxLength":64,"minLength":1,"type":"string"},"index":{"description":"手动正则及分隔符方式中字段序号","example":1,"format":"int32","maximum":200,"minimum":0,"type":"integer"},"is_analysis":{"description":"是否开启快速分析","example":true,"type":"boolean"},"relation":{"description":"描叙多层级json中字段间的层级关系","maxLength":1000,"minLength":0,"type":"string"},"type":{"description":"字段数据类型。\n可选范围:string、long、float","enum":["string","long","float"],"example":"string","type":"string"},"user_defined_name":{"description":"json及nginx方式中字段自定义别名","maxLength":64,"minLength":1,"type":"string"}},"required":["field_name","type"]},"ErrorUpResultInfo":{"description":"调用失败时的返回值。","properties":{"error_code":{"description":"错误码。","enum":["LTS.2001","LTS.2002","LTS.2003","LTS.2004","LTS.2005","LTS.2006","LTS.2007","LTS.2008","LTS.2009","LTS.2010","LTS.2011","LTS.2012","LTS.2013","LTS.0301"],"type":"string"},"error_msg":{"description":"调用失败响应信息描述。","example":"Invalid projectId","type":"string"}},"type":"object"},"ListStructTemplateRspBody":{"description":"查询结构化模板返回体","properties":{"results":{"description":"查询的自定义结构化模板数组","items":{"$ref":"#/definitions/StructTemplateModel"},"maxItems":50,"minItems":0,"type":"array"}},"required":["results"]},"StructTemplate":{"description":"结构化模板实体","properties":{"create_time":{"description":"创建时间","example":1639640050964,"format":"int64","maximum":20000000000000,"minimum":0,"type":"integer"},"demo_fields":{"description":"示例字段数组","items":{"$ref":"#/definitions/DemoField"},"maxItems":200,"minItems":0,"type":"array"},"demo_label":{"description":"示例日志标签","example":"{}","maxLength":5000,"minLength":0,"type":"string"},"demo_log":{"description":"示例日志","example":"2021-12-13 14:15:30.395 (7041)[D]   logcollect_base.go:199 cursor occur.%!(EXTRA int64=44893, int64=44893)","maxLength":5000,"minLength":1,"type":"string"},"project_id":{"description":"项目id","example":"2a473356cca5487f8373be89xxxxxxxx","maxLength":32,"minLength":32,"type":"string"},"rule":{"$ref":"#/definitions/TemplateRule","description":"结构化规则对象"},"tag_fields":{"description":"Tag字段数组","items":{"$ref":"#/definitions/TagFieldNew"},"maxItems":200,"minItems":0,"type":"array"},"template_name":{"description":"模板名称","example":"ysySplit","maxLength":64,"minLength":1,"type":"string"},"template_type":{"description":"模板类型,regex,json,split,nginx","enum":["regex","json","split","nginx"],"example":"split","type":"string"}},"required":["project_id","template_name","template_type","demo_log","demo_fields","tag_fields","rule"]},"StructTemplateModel":{"allOf":[{"$ref":"#/definitions/StructTemplate"},{"properties":{"id":{"description":"模板id","example":"3927291c-6fef-4fa6-9515-xxxxxxxxxxxx","maxLength":36,"minLength":36,"type":"string"}},"type":"object"}],"description":"更新或者查询结构化模板对象"},"TagFieldNew":{"description":"Tag字段对象","properties":{"content":{"description":"字段示例内容","example":"192.168.2.134","maxLength":5000,"minLength":0,"type":"string"},"field_name":{"description":"字段名称","example":"hostIP","maxLength":64,"minLength":1,"type":"string"},"index":{"description":"序号,从0开始","format":"int32","maximum":200,"minimum":0,"type":"integer"},"is_analysis":{"description":"是否开启快速分析","example":true,"type":"boolean"},"type":{"description":"字段数据类型。\n可选范围:string、long、float","enum":["string","long","float"],"example":"string","type":"string"}},"required":["field_name","type"]},"TemplateRule":{"description":"结构化模板规则对象","properties":{"param":{"description":"具体结构化规则,每种结构化类型都有自己独有的结构,具体结构如下:\n手动正则为json字符串,包含keyObject对象和regex_rules对象,keyObject内为键值对,键为demo_fields数组中元素的index,值为field_name,regex_rules对象为正则表达式字符串,整体例子为{\\\"keyObject\\\":{\\\"1\\\":\\\"date\\\",\\\"2\\\":\\\"num\\\"},\\\"regex_rules\\\":\\\"^(?<date>[^/]+)(?:[^ ]* ){8}(?<num>\\\\\\\\d+)\\\"};\njson方式时param为一个json字符串,包含keyObject对象和layers对象,keyObject内为键值对,键为demo_fields数组中元素的field_name,值为user_defined_name,layers为最大解析层数,当前最大值为4,整体例子为{\\\"keyObject\\\":{\\\"metadata.dimention\\\":\\\"dimention\\\",\\\"metadata.value\\\":\\\"\\\",\\\"metadata.unit\\\":\\\"\\\",\\\"collectionTime\\\":\\\"\\\"},\\\"layers\\\":3};\n分隔符方式时为json字符串,包含keyObject对象和tokenizer对象,keyObject内为键值对,键为demo_fields数组中元素的index,值为field_name,tokenizer对象为所用分隔符,整体例子为{\\\"keyObject\\\":{\\\"0\\\":\\\"field1\\\",\\\"1\\\":\\\"field2\\\",\\\"2\\\":\\\"field3\\\",\\\"3\\\":\\\"field4\\\",\\\"4\\\":\\\"field5\\\",\\\"5\\\":\\\"field6\\\",\\\"6\\\":\\\"field7\\\",\\\"7\\\":\\\"field8\\\",\\\"8\\\":\\\"field9\\\"},\\\"tokenizer\\\":\\\" \\\"};\nnginx方式时为json字符串,包含keyObject对象,regex对象,field_names对象及log_format对象,keyObject内为键值对,键为demo_fields数组中元素的field_name,值为user_defined_name,regex为正则表达式字符串,field_names对象为demo_fields数组中各元素的field_name的拼接字符串,每个field_name以','分隔,log_format对象为nginx日志格式化方式,具体方式参考https://support.huaweicloud.com/usermanual-lts/lts_0820.html#lts_0820__section1151119552549进行配置,整体例子为\"{\\\"keyObject\\\":{\\\"http_host\\\":\\\"host\\\",\\\"remote_addr\\\":\\\"\\\",\\\"request_method\\\":\\\"\\\",\\\"request_uri\\\":\\\"\\\",\\\"time_local\\\":\\\"\\\"},\\\"regex\\\":\\\"(\\\\\\\\d+/\\\\\\\\S+/\\\\\\\\d+:\\\\\\\\d+:\\\\\\\\d+:\\\\\\\\d+)\\\\\\\\s+\\\\\\\\S+\\\\\\\\s+(\\\\\\\\S*)\\\\\\\\s+(\\\\\\\\S*)\\\\\\\\s+(\\\\\\\\S*)\\\\\\\\s+\\\\\\\"([^\\\\\\\"]*)\\\\\\\".*\\\",\\\"fieldNames\\\":\\\"time_local,remote_addr,request_method,http_host,request_uri\\\",\\\"log_format\\\":\\\"log_format upstreaminfo '$time_local $remote_addr  $request_method $http_host \\\\\\\"$request_uri\\\\\\\"';\\\"}\"","example":"{\"keyObject\":{\"demoLog\":\"\",\"demoFields\":\"\",\"tagFields\":\"\",\"rule.param\":\"\",\"rule.type\":\"\",\"logGroupId\":\"\",\"logStreamId\":\"\",\"projectId\":\"\",\"epsId\":\"\",\"demoLabel\":\"\"},\"layers\":3}","maxLength":5000,"minLength":1,"type":"string"},"type":{"description":"结构化类型,只支持custom_regex,json,split,nginx","enum":["custom_regex","json","split","nginx"],"example":"json","type":"string"}},"required":["type","param"]}},"description":null,"group_id":"8f58e31c452f407885dec582b8542111","host":"lts.cn-north-4.myhuaweicloud.com","id":"846f60db2cc2458384b906b5923c845c","info_version":"v2","method":"get","name":"ListStructTemplate","parameters":{},"paths":{"/v3/{project_id}/lts/struct/customtemplate":{"get":{"description":"该接口用于查询结构化模板。","operationId":"ListStructTemplate","parameters":[{"description":"项目ID,获取方式请参见:获取账号ID、项目ID、日志组ID、日志流ID(https://support.huaweicloud.com/api-lts/lts_api_0006.html)。","in":"path","maxLength":32,"minLength":32,"name":"project_id","required":true,"type":"string"},{"description":"从IAM服务获取的用户Token,获取方式请参见:获取用户Token(https://support.huaweicloud.com/api-iam/iam_30_0001.html)","in":"header","maxLength":2000,"minLength":1000,"name":"X-Auth-Token","pattern":"X-Auth-Token","required":true,"type":"string"},{"default":"application/json;charset=UTF-8","description":"该字段填为:application/json;charset=UTF-8。","in":"header","maxLength":30,"minLength":30,"name":"Content-Type","required":true,"type":"string"},{"description":"待查询模板id,非必填,不传时返回项目下所有自定义结构化模板","in":"query","maxLength":36,"minLength":36,"name":"id","required":false,"type":"string"}],"produces":["application/json"],"responses":{"200":{"description":"请求响应成功。","examples":{"application/json":{"results":[{"create_time":1641258099551,"demo_fields":[{"content":"2022-01-03/14:52:28","field_name":"field1","index":0,"is_analysis":true,"type":"string"},{"content":"this","field_name":"field2","index":1,"is_analysis":true,"type":"string"},{"content":"log","field_name":"field3","index":2,"is_analysis":false,"type":"string"},{"content":"is","field_name":"field4","index":3,"is_analysis":false,"type":"string"},{"content":"Error","field_name":"field5","index":4,"is_analysis":false,"type":"string"},{"content":"NO","field_name":"field6","index":5,"is_analysis":false,"type":"string"},{"content":"13测试","field_name":"field7","index":6,"is_analysis":false,"type":"string"},{"content":"286","field_name":"field8","index":7,"is_analysis":false,"type":"long"}],"demo_label":"{}","demo_log":"2022-01-03/14:52:28 this log is Error NO 13测试 286","id":"43a8cc7b-b632-4c36-a65d-8150e98219f1","project_id":"2a473356cca5487f8373be89xxxxxxxx","rule":{"param":"{\"keyObject\":{\"0\":\"field1\",\"1\":\"field2\",\"2\":\"field3\",\"3\":\"field4\",\"4\":\"field5\",\"5\":\"field6\",\"6\":\"field7\",\"7\":\"field8\"},\"tokenizer\":\" \"}","type":"split"},"tag_fields":[{"content":"172.16.10.69","field_name":"hostIP","index":0,"is_analysis":true,"type":"string"}],"template_name":"testSplit13","template_type":"split"}]}},"schema":{"$ref":"#/definitions/ListStructTemplateRspBody"}},"500":{"description":"表明服务端能被请求访问到,但是服务内部出错。","examples":{"application/json":{"error_code":"LTS.2017","error_msg":"Find struct template failed."}},"schema":{"$ref":"#/definitions/ErrorUpResultInfo"}}},"summary":"查询结构化模板","tags":["结构化配置"],"x-is-registered":"Y","x-request-examples-1":"/v3/{project_id}/lts/struct/customtemplate?id=bc8e3f2c-87fe-4acd-8439-69cdf29251c1","x-request-examples-text-1":"/v3/{project_id}/lts/struct/customtemplate?id=bc8e3f2c-87fe-4acd-8439-69cdf29251c1","x-request-examples-url-1":"GET https://{endpoint}/v3/{project_id}/lts/struct/customtemplate?id=bc8e3f2c-87fe-4acd-8439-69cdf29251c1","x-support-sdk":"Y"}}},"product_short":"LTS","region_id":"cn-north-4","schemes":["HTTPS"],"security_definitions":null,"summary":"查询结构化模板","tags":"结构化配置","uri":null,"version":"2.0"}