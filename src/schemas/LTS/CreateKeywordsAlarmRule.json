{"base_path":"/","components":null,"consumes":"[\"application/json;charset=UTF-8\"]","definitions":{"CreateKeywordsAlarmRuleRequestBody":{"properties":{"alarm_action_rule_name":{"description":"告警行动规则名称\n>alarm_action_rule_name和notification_save_rule可以选填一个,如果都填,优先选择alarm_action_rule_name","type":"string"},"domain_id":{"description":"domainId","maxLength":32,"minLength":32,"type":"string"},"frequency":{"$ref":"#/definitions/Frequency","description":"告警统计周期"},"keywords_alarm_level":{"description":"告警级别","enum":["Info","Minor","Major","Critical"],"type":"string"},"keywords_alarm_rule_description":{"description":"关键词告警信息描述","maxLength":64,"minLength":0,"type":"string"},"keywords_alarm_rule_name":{"description":"关键词告警名称\n\n>不能以点和下划线开头或以点结尾。","maxLength":64,"minLength":1,"pattern":"^((?![\\>+<;#\";&?%=']).)*$","type":"string"},"keywords_alarm_send":{"description":"是否发送","type":"boolean"},"keywords_requests":{"description":"关键词详细信息","items":{"$ref":"#/definitions/KeywordsRequest"},"type":"array"},"notification_frequency":{"description":"通知频率,单位(分钟)","enum":[0,5,10,15,30,60,180,360],"format":"int32","type":"integer"},"notification_save_rule":{"$ref":"#/definitions/SqlNotificationSaveRule","description":"通知主题"},"recovery_policy":{"description":"恢复策略周期;默认为3","format":"int32","type":"integer"},"trigger_condition_count":{"description":"触发条件:触发次数;默认为1","format":"int32","type":"integer"},"trigger_condition_frequency":{"description":"触发条件:触发周期;默认为1","format":"int32","type":"integer"},"whether_recovery_policy":{"description":"是否打开恢复通知;默认false","type":"boolean"}},"required":["keywords_alarm_rule_name","keywords_requests","frequency","keywords_alarm_level","keywords_alarm_send","domain_id","notification_frequency"],"title":"CreateKeywordsAlarmRuleRequestBody","type":"object"},"CreateKeywordsAlarmRuleRespBody":{"description":"创建sql告警规则成功","properties":{"keywords_alarm_rule_id":{"description":"告警规则id","maxLength":36,"minLength":36,"type":"string"}},"type":"object"},"ErrorUpResultInfo":{"description":"调用失败时的返回值。","properties":{"error_code":{"description":"错误码。","enum":["LTS.2001","LTS.2002","LTS.2003","LTS.2004","LTS.2005","LTS.2006","LTS.2007","LTS.2008","LTS.2009","LTS.2010","LTS.2011","LTS.2012","LTS.2013","LTS.0301"],"type":"string"},"error_msg":{"description":"调用失败响应信息描述。","example":"Invalid projectId","type":"string"}},"type":"object"},"Frequency":{"properties":{"cron_expr":{"description":"当字段type为\"CRON\"时取该字段","maxLength":1024,"minLength":1,"type":"string"},"day_of_week":{"description":"当字段type为\"WEEKLY\"时取该字段(周日~周六)","format":"int32","maximum":7,"minimum":1,"type":"integer"},"fixed_rate":{"description":"当字段type为\"FIXED_RATE\"时取该字段(当fixed_rate_unit单位为minute,最大值60;当fixed_rate_unit单位为hour,最大值24)","format":"int32","maximum":60,"minimum":1,"type":"integer"},"fixed_rate_unit":{"description":"时间单位","enum":["minute","hour"],"type":"string"},"hour_of_day":{"description":"当字段type为\"DAILY\"或者\"WEEKLY\"时取该字段","format":"int32","maximum":24,"minimum":0,"type":"integer"},"type":{"description":"时间类型","enum":["CRON","HOURLY","DAILY","WEEKLY","FIXED_RATE"],"type":"string"}},"required":["type"],"title":"Frequency","type":"object"},"KeywordsRequest":{"properties":{"condition":{"description":"条件","enum":[">=","<=","<",">"],"type":"string"},"keywords":{"description":"关键词","maxLength":1024,"minLength":1,"type":"string"},"log_group_id":{"description":"日志组id","maxLength":36,"minLength":36,"type":"string"},"log_group_name":{"description":"日志组名称","maxLength":64,"minLength":1,"pattern":"^(?!\\.)[\\u4e00-\\u9fa5a-zA-Z0-9_.-]+(?<!\\.)$","type":"string"},"log_stream_id":{"description":"日志流id","maxLength":36,"minLength":36,"type":"string"},"log_stream_name":{"description":"日志流名称","maxLength":64,"minLength":1,"pattern":"^(?!\\.)[\\u4e00-\\u9fa5a-zA-Z0-9_.-]+(?<!\\.)$","type":"string"},"number":{"description":"行数","format":"int32","maximum":2147483647,"minimum":1,"pattern":"-?[0-9]+(\\.[0-9]+)?","type":"integer"},"search_time_range":{"description":"查询执行任务时最近数据的时间范围,最大值为60","format":"int32","maximum":60,"minimum":1,"type":"integer"},"search_time_range_unit":{"description":"查询时间单位","enum":["minute"],"type":"string"}},"required":["log_stream_id","log_group_id","keywords","condition","number","search_time_range","search_time_range_unit"],"title":"KeywordsRequest","type":"object"},"SqlNotificationSaveRule":{"properties":{"language":{"description":"首选项对应的语言","enum":["zh-cn","en-us"],"maxLength":10,"minLength":0,"type":"string"},"template_name":{"description":"消息模板名称","type":"string"},"timezone":{"description":"首选项对应的时区信息","maxLength":1024,"minLength":0,"type":"string"},"topics":{"description":"主题信息","items":{"$ref":"#/definitions/Topics"},"type":"array"},"user_name":{"description":"用户名","maxLength":1024,"minLength":1,"type":"string"}},"required":["language","user_name","topics","template_name"],"type":"object"},"Topics":{"properties":{"display_name":{"description":"Topic的显示名,推送邮件消息时,作为邮件发件人显示","maxLength":1024,"minLength":1,"type":"string"},"name":{"description":"主题名称","maxLength":1024,"minLength":1,"type":"string"},"push_policy":{"description":"消息推送的策略","format":"int32","maximum":13,"minimum":0,"type":"integer"},"topic_urn":{"description":"Topic的唯一的资源标识。","maxLength":1024,"minLength":1,"type":"string"}},"required":["topic_urn","name"],"title":"TopicsParam","type":"object"}},"description":null,"group_id":"8f58e31c452f407885dec582b8542111","host":"lts.cn-north-4.myhuaweicloud.com","id":"2c6e1fab14f14c76b7592582764ac6f9","info_version":"v2","method":"post","name":"CreateKeywordsAlarmRule","parameters":{},"paths":{"/v2/{project_id}/lts/alarms/keywords-alarm-rule":{"post":{"description":"该接口用于创建关键词告警,目前每个帐户最多可以创建共200个关键词告警与SQL告警。","operationId":"CreateKeywordsAlarmRule","parameters":[{"default":"None","description":"项目ID,获取方式请参见:获取账号ID、项目ID、日志组ID、日志流ID(https://support.huaweicloud.com/api-lts/lts_api_0006.html)。","in":"path","maxLength":32,"minLength":32,"name":"project_id","required":true,"type":"string"},{"default":"None","description":"从IAM服务获取的用户Token,获取方式请参见:获取用户Token(https://support.huaweicloud.com/api-iam/iam_30_0001.html)","in":"header","maxLength":2000,"minLength":1000,"name":"X-Auth-Token","pattern":"X-Auth-Token","required":true,"type":"string"},{"default":"application/json;charset=UTF-8","description":"该字段填为:application/json;charset=UTF-8。","in":"header","maxLength":30,"minLength":30,"name":"Content-Type","required":true,"type":"string"},{"description":"创建关键字告警的请求体","in":"body","name":"CreateKeywordsAlarmRuleRequestBody","required":true,"schema":{"$ref":"#/definitions/CreateKeywordsAlarmRuleRequestBody"}}],"produces":["application/json"],"responses":{"200":{"description":"请求响应成功。","schema":{"$ref":"#/definitions/CreateKeywordsAlarmRuleRespBody"}},"400":{"description":"BadRequest 非法请求 建议根据error_msg直接修改该请求。","examples":{"application/json":{"error_code":"LTS.2005","error_msg":"Alarm rule params validator error."}},"schema":{"$ref":"#/definitions/ErrorUpResultInfo"}},"500":{"description":"表明服务端能被请求访问到,但是服务内部出错。","examples":{"application/json":{"error_code":"LTS.2001","error_msg":"Failed to create alarm rule."}},"schema":{"$ref":"#/definitions/ErrorUpResultInfo"}}},"summary":"创建关键词告警规则","tags":["关键词告警规则"],"x-is-registered":"Y","x-publishpath":"lts_api_0081","x-request-examples-text-1":"/v2/{project_id}/lts/alarms/keywords-alarm-rule\n{\n  \"keywords_alarm_rule_name\": \"huawei\",\n  \"keywords_alarm_rule_description\": \"huawei\",\n  \"keywords_requests\": [\n     {\n       \"eps_id\":\"1\",\n       \"eps_name\":\"huawei\",\n       \"log_stream_id\":\"1\",\n       \"log_group_id\":\"1\",\n       \"keywords\":\"huawei\",\n       \"condition\":\">\",\n       \"number\":\"100\",\n       \"search_time_range\": 10,\n       \"search_time_range_unit\":\"minute\"\n     }\n  ],\n  \"frequency\": {\n    \"type\": \"FIXED_RATE\",\n    \"cron_expr\": \"\",\n    \"hour_of_day\": 0,\n    \"day_of_week\": 0,\n    \"fixed_rate\": 10,\n    \"fixed_rate_unit\": \"minute\"\n  },\n  \"keywords_alarm_level\": \"Critical\",\n  \"keywords_alarm_send\": false,\n  \"domain_id\": \"\",\n  \"notification_save_rule\":{\n        \"language\":\"zh-cn\",\n        \"timezone\":\"Asia/Shanghai\",\n        \"user_name\":\"huawei\",\n        \"topics\":[\n            {\n                \"name\":\"huawei\",\n                \"topic_urn\":\"urn:smn:cn-north-7:1b06fc5dc0814a4da1594a9ade9cb93c:huawei\",\n                \"display_name\":\"\",\n                \"push_policy\":0\n            }\n        ]\n  },\n  \"language\":\"zh-cn\"\n}","x-request-examples-url-1":"POST https://{endpoint}/v2/{project_id}/lts/alarms/keywords-alarm-rule","x-support-sdk":"Y"}}},"product_short":"LTS","region_id":"cn-north-4","schemes":["HTTPS"],"security_definitions":null,"summary":"创建关键词告警规则","tags":"关键词告警规则","uri":null,"version":"2.0"}