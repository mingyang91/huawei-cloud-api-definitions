{"base_path":"/","components":null,"consumes":"[\"application/json;charset=UTF-8\"]","definitions":{"ErrorResultInfo":{"description":"调用失败时的返回值。","properties":{"error_code":{"description":"错误码。","enum":["LTS.0403"],"type":"string"},"error_msg":{"description":"调用失败响应信息描述。","enum":["Invalid projectId"],"type":"string"}},"type":"object"},"LtsStructTemplateInfo":{"properties":{"content":{"description":"示例日志","maxLength":10000,"minLength":1,"type":"string"},"demo_fields":{"description":"结构化字段","items":{"$ref":"#/definitions/StructFieldInfo"},"maxItems":200,"minItems":1,"type":"array"},"layers":{"description":"parse_type为json类型时必填,解析层数,目前固定是3","format":"int32","maxLength":1,"minLength":0,"type":"integer"},"log_format":{"description":"parse_type为nginx类型时必填,nginx日志格式模板","maxLength":1000,"minLength":0,"type":"string"},"log_group_id":{"description":"日志组ID","maxLength":36,"minLength":36,"type":"string"},"log_stream_id":{"description":"日志流ID","maxLength":36,"minLength":36,"type":"string"},"parse_type":{"description":"结构化方式","enum":["built_in","json","custom_regex","split","nginx"],"maxLength":12,"minLength":4,"type":"string"},"project_id":{"description":"项目ID","maxLength":32,"minLength":32,"type":"string"},"regex_rules":{"description":"parse_type为custom_regex类型时必填,regex提取规则","maxLength":5000,"minLength":0,"type":"string"},"rule":{"$ref":"#/definitions/rule","description":"结构化方式"},"tag_fields":{"description":"tag字段列表(使用tag字段解析时需要,其中系统模板不支持使用tag字段)。","items":{"$ref":"#/definitions/TagField"},"maxItems":200,"type":"array"},"tokenizer":{"description":"parse_type为split类型时必填,分隔符,分词符号","maxLength":10,"minLength":0,"type":"string"}},"required":["demo_fields","content","parse_type","log_group_id","log_stream_id","project_id","tag_fields"],"title":"LtsStructTemplateInfo","type":"object"},"StructFieldInfo":{"properties":{"content":{"description":"字段内容","maxLength":10000,"minLength":0,"type":"string"},"fieldName":{"description":"字段名称","maxLength":50,"minLength":0,"type":"string"},"index":{"description":"序号","format":"int32","type":"integer"},"isAnalysis":{"description":"结构化方式","type":"boolean"},"type":{"description":"字段数据类型,例:string,long,float","maxLength":10,"minLength":1,"type":"string"},"userDefinedName":{"description":"自定义别名(json方式中按需添加)","maxLength":64,"minLength":1,"type":"string"}},"required":["type"],"title":"StructFieldInfo","type":"object"},"TagField":{"description":"tag信息。","properties":{"content":{"description":"内容","type":"string"},"fieldName":{"description":"字段名称","maxLength":64,"minLength":1,"type":"string"},"isAnalysis":{"description":"是否开启快速分析","type":"boolean"},"type":{"description":"字段数据类型,例:string,long,float","type":"string"}},"required":["fieldName","type"],"title":"TagField","type":"object"},"rule":{"properties":{"param":{"description":"系统iton模板名称。","type":"string"},"type":{"description":"内置系统模板类型。","type":"string"}},"required":["type","param"],"type":"object"}},"description":null,"group_id":"8f58e31c452f407885dec582b8542111","host":"lts.cn-north-4.myhuaweicloud.com","id":"5f7724a87ea14780b2c164a74d3399bc","info_version":"v2","method":"put","name":"UpdateStructTemplate","parameters":{},"paths":{"/v2/{project_id}/lts/struct/template":{"put":{"consumes":["application/json"],"description":"该接口用于修改指定日志流下的结构化配置。","operationId":"UpdateStructTemplate","parameters":[{"description":"更新结构化配置参数","in":"body","name":"UpdateStructTemplateRequestBody","required":true,"schema":{"$ref":"#/definitions/LtsStructTemplateInfo"}},{"default":"None","description":"项目ID","in":"path","maxLength":32,"minLength":32,"name":"project_id","pattern":"project_id","required":true,"type":"string","x-example":"2b31ed520xxxxxxebedb6e57xxxxxxxx"}],"produces":["application/json"],"responses":{"200":{"description":"请求响应成功。","schema":{"type":"string"}},"400":{"description":"BadRequest。非法请求。 建议根据error_msg直接修改该请求,不要重试该请求。","examples":{"applications/json":{"error_code":"SVCSTG.ALS.200203","error_msg":"add or update exception"}},"schema":{"$ref":"#/definitions/ErrorResultInfo"}},"401":{"description":"AuthFailed。鉴权失败, 请确认token后再次请求 。","examples":{"applications/json":{"error_code":"LTS.0414","error_msg":"Invalid token"}},"schema":{"$ref":"#/definitions/ErrorResultInfo"}},"403":{"description":"Forbidden。\n请求被拒绝访问。\n返回该状态码,表明请求能够到达服务端,且服务端能够理解用户请求,但是拒绝做更多的事情,因为该请求被设置为拒绝访问,建议直接修改该请求,不要重试该请求。","examples":{"applications/json":{"error_code":"LTS.0003","error_msg":"parse_token_failed"}},"schema":{"$ref":"#/definitions/ErrorResultInfo"}},"500":{"description":"InternalServerError。\n表明服务端能被请求访问到,但是服务内部出错。","examples":{"applications/json":{"error_code":"LTS.0202","error_msg":"Failed to query lts struct log"}},"schema":{"$ref":"#/definitions/ErrorResultInfo"}},"503":{"description":"ServiceUnavailable。\n被请求的服务无效,  服务不可用。","schema":{"type":"string"}}},"summary":"修改结构化配置","tags":["结构化配置"],"x-is-registered":"Y","x-publishpath":"lts_api_0043","x-request-examples-text-1":"/v2/{project_id}/lts/struct/template\n{\n  \"content\": \"2021-07-20/10:26:46 this log is Error NO  329247\\n\",\n  \"demo_fields\": [\n  {\n    \"type\": \"string\",\n    \"isAnalysis\": false\n  },\n  {\n    \"type\": \"long\",\n    \"isAnalysis\": false\n  },\n  {\n    \"type\": \"string\",\n    \"isAnalysis\": false\n  }\n  ],\n  \"regex_rules\": \"^(?:[^ ]* ){2}(?<timee>[^ ]+)(?:[^\\\\[]*\\\\[){1}(?<num>\\\\d+)(?:[^ ]* ){5}(?<user>\\\\w+)\",\n  \"parse_type\": \"custom_regex\",\n  \"log_group_id\": \"8a75b77d-7d72-4d7e-8c50-a24562cf8b0b\",\n  \"log_stream_id\": \"fd5e1a7c-7412-475d-a013-8891d539574e\",\n  \"project_id\": \"2a473356cca5487f8373be891bffc1cf\"\n}","x-request-examples-url-1":"PUT https://{endpoint}/v2/{project_id}/lts/struct/template","x-support-sdk":"Y"}}},"product_short":"LTS","region_id":"cn-north-4","schemes":["HTTPS"],"security_definitions":null,"summary":"修改结构化配置","tags":"结构化配置","uri":null,"version":"2.0"}