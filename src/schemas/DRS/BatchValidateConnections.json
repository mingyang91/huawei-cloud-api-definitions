{"base_path":"/","components":null,"consumes":"[\"application/json\"]","definitions":{"BatchTestConnectionJobResp":{"description":"批量测试连接响应体","properties":{"count":{"description":"总记录数。","format":"int32","type":"integer"},"results":{"description":"批量测试连接响应体集合。","items":{"$ref":"#/definitions/CheckJobResp","description":"测试连接响应体"},"type":"array"}},"required":["count","results"]},"BatchTestConnectionReq":{"description":"批量测试连接任务请求体","properties":{"jobs":{"description":"批量测试连接请求列表。","items":{"$ref":"#/definitions/TestEndPoint","description":"测试连接请求体"},"type":"array"}},"required":["jobs"]},"CheckJobResp":{"description":"响应体","properties":{"error_code":{"description":"错误码。","type":"string"},"error_msg":{"description":"错误信息。","type":"string"},"id":{"description":"任务id。","type":"string"},"status":{"description":"测试结果。\n- true:成功\n- false:失败","enum":["true","false"],"type":"string"},"success":{"description":"是否成功","type":"boolean"}},"required":["id","status"],"type":"object"},"KafkaSecurity":{"description":"Kafka安全认证相关参数","properties":{"trust_store_key":{"description":"安全证书base64转码后的值,使用安全认证时必填。","type":"string"},"trust_store_key_name":{"description":"证书名称,使用安全认证时必填。","type":"string"},"trust_store_password":{"description":"证书密码,使用安全认证时必填。","type":"string"},"type":{"description":"认证类型,PLAINTEXT为无认证,,使用安全认证时必填。","enum":["PLAINTEXT","SASL_SSL"],"type":"string"}}},"TestEndPoint":{"description":"测试连接信息体","properties":{"db_name":{"description":"数据库用户名,DDS的账号认证数据库,Oracle的serviceName。","type":"string"},"db_password":{"description":"数据库密码。","type":"string"},"db_port":{"description":"数据库端口,Mongo、DDS必填为0。","format":"int32","type":"integer"},"db_type":{"description":"数据库类型","enum":["mysql","mongodb","gaussdbv5","postgresql","kafka","gaussdbv5ha","taurus"],"type":"string"},"db_user":{"description":"数据库帐号。","type":"string"},"end_point_type":{"description":"源库:so,目标库:ta","enum":["so","ta"],"example":"so","type":"string"},"id":{"description":"任务ID","type":"string"},"inst_id":{"description":"RDS实例id,RDS实例必填。","type":"string"},"ip":{"description":"数据库IP","type":"string"},"kafka_security_config":{"$ref":"#/definitions/KafkaSecurity","description":"Kafka安全认证相关,非安全认证不需要此参数。"},"net_type":{"description":"网络类型","enum":["vpn","vpc","eip"],"type":"string"},"project_id":{"description":"用户所处region的projectId。","type":"string"},"region":{"description":"rds实例region,数据库为RDS时必填。","type":"string"},"ssl_cert_check_sum":{"description":"SSL证书内容checksum值,证书经过sha256加密后的值,后端校验,源库安全连接必选。","type":"string"},"ssl_cert_key":{"description":"SSL证书内容,base64加密后的值,源库安全连接必选。","type":"string"},"ssl_cert_name":{"description":"SSL证书名字,源库安全连接必选。","type":"string"},"ssl_cert_password":{"description":"SSL证书密码,证书文件后缀为.p12,需要密码。","type":"string"},"ssl_link":{"description":"是否SSL安全连接。","type":"boolean"},"subnet_id":{"description":"subnetid,数据库为RDS必选。","type":"string"},"vpc_id":{"description":"vpcid,数据库为RDS时必选。","type":"string"}},"required":["id","net_type","db_type","ip","db_user","db_password","end_point_type"],"type":"object"}},"description":null,"group_id":"506538835790436b8e209e5a6684d485","host":"drs.cn-north-4.myhuaweicloud.com","id":"337329e035c84b65b0b76247eab7d147","info_version":"v3","method":"post","name":"BatchValidateConnections","parameters":{},"paths":{"/v3/{project_id}/jobs/batch-connection":{"post":{"description":"批量测试连接。","operationId":"BatchValidateConnections","parameters":[{"description":"租户在某一region下的project ID。","in":"path","name":"project_id","required":true,"type":"string","x-order":1},{"description":"从IAM服务获取的用户Token","in":"header","name":"X-Auth-Token","required":true,"type":"string","x-order":2},{"default":"en-us","description":"请求语言类型","enum":["en-us","zh-cn"],"in":"header","name":"X-Language","required":false,"type":"string","x-example":"en-us","x-order":3},{"default":"application/json","description":"指定类型为application/json。","in":"header","name":"Content-Type","required":true,"type":"string","x-example":"application/json","x-order":4},{"description":"批量测试连接任务请求体","in":"body","name":"requestBody","required":true,"schema":{"$ref":"#/definitions/BatchTestConnectionReq"},"x-order":5}],"responses":{"200":{"description":"OK","examples":{"application/json":{"count":1,"results":[{"id":"140b5236-88ad-43c8-811c-1268453jb101","status":"success","success":true}]}},"schema":{"$ref":"#/definitions/BatchTestConnectionJobResp"}},"400":{"description":"Bad Request"}},"summary":"批量测试连接","tags":["公共接口管理"],"x-constraint":"- 任务创建成功之后,任务状态为CONFIGURATION才能进行测试连接。\n- 双主灾备时,需要正向任务状态为INCRE_TRANSFER_STARTED时,反向任务才能执行该操作,父任务不支持调用。","x-is-registered":"Y","x-name":"批量测试连接","x-order":3,"x-publishpath":"BatchValidateConnections","x-request-examples-1":{"jobs":[{"db_password":"******","db_port":3306,"db_type":"mysql","db_user":"root","end_point_type":"so","id":"140b5236-88ad-43c8-811c-1268453jb101","ip":"192.168.0.27","net_type":"eip","ssl_link":false}]},"x-request-examples-2":{"jobs":[{"db_password":"******","db_port":0,"db_type":"mongodb","db_user":"root","end_point_type":"ta","id":"140b5236-88ad-43c8-811c-1268453jb101","inst_id":"3cadd5a0ef724f55ac7fa5bcb5f4fc5fin02","ip":"192.168.4.66:8635,192.168.4.83:8635","net_type":"eip","project_id":"0549a6a31000d4e82fd1c00c3d6f2d76","region":"cn-xianhz-1"}]},"x-request-examples-3":{"jobs":[{"db_password":"******","db_port":3306,"db_type":"mysql","db_user":"root","end_point_type":"ta","id":"140b5236-88ad-43c8-811c-1268453jb101","inst_id":"e05a3679efe241d8b5dee80b17c1a863in01","ip":"192.168.0.131","net_type":"eip","project_id":"054ba152d480d55b2f5dc0069e7ddef0","region":"cn-xianhz-1"}]},"x-request-examples-description-1":"实时迁移MySQL测试连接-非RDS","x-request-examples-description-2":"实时迁移DDS测试连接-RDS","x-request-examples-description-3":"实时迁移MySQL测试连接-RDS","x-request-examples-text-1":{"jobs":[{"db_password":"******","db_port":3306,"db_type":"mysql","db_user":"root","end_point_type":"so","id":"140b5236-88ad-43c8-811c-1268453jb101","ip":"192.168.0.27","net_type":"eip","ssl_link":false}]},"x-request-examples-text-2":{"jobs":[{"db_password":"******","db_port":0,"db_type":"mongodb","db_user":"root","end_point_type":"ta","id":"140b5236-88ad-43c8-811c-1268453jb101","inst_id":"3cadd5a0ef724f55ac7fa5bcb5f4fc5fin02","ip":"192.168.4.66:8635,192.168.4.83:8635","net_type":"eip","project_id":"0549a6a31000d4e82fd1c00c3d6f2d76","region":"cn-xianhz-1"}]},"x-request-examples-text-3":{"jobs":[{"db_password":"******","db_port":3306,"db_type":"mysql","db_user":"root","end_point_type":"ta","id":"140b5236-88ad-43c8-811c-1268453jb101","inst_id":"e05a3679efe241d8b5dee80b17c1a863in01","ip":"192.168.0.131","net_type":"eip","project_id":"054ba152d480d55b2f5dc0069e7ddef0","region":"cn-xianhz-1"}]},"x-request-examples-url-1":"https://{Endpoint}/v3/054ba152d480d55b2f5dc0069e7ddef0/jobs/batch-connection","x-request-examples-url-2":"https://{EndPoint}/v3/054ba152d480d55b2f5dc0069e7ddef0/jobs/batch-connection","x-request-examples-url-3":"https://{EndPoint}/v3/054ba152d480d55b2f5dc0069e7ddef0/jobs/batch-connection","x-scope":"Commercial","x-support-sdk":"Y","x-version":"v3"}}},"product_short":"DRS","region_id":"cn-north-4","schemes":["HTTPS"],"security_definitions":null,"summary":"批量测试连接","tags":"公共接口管理","uri":null,"version":"2.0"}