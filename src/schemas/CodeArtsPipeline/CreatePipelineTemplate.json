{"base_path":"/","components":null,"consumes":"[\"application/json;charset=UTF-8\"]","definitions":{"CustomVariable":{"properties":{"description":{"description":"自定义参数描述","type":"string"},"is_reset":{"description":"是否重置","type":"boolean"},"is_runtime":{"description":"是否运行时设置","type":"boolean"},"is_secret":{"description":"是否私密参数","type":"boolean"},"latest_value":{"description":"最近一次参数值","type":"string"},"limits":{"description":"参数限制","items":{"type":"object"},"type":"array"},"name":{"description":"自定义参数名称","type":"string"},"pipeline_id":{"description":"流水线ID","type":"string"},"runtime_value":{"description":"运行时传入值","type":"string"},"sequence":{"description":"自定义参数顺序","format":"int32","type":"integer"},"type":{"description":"自定义参数类型","type":"string"},"value":{"description":"自定义参数默认值","type":"string"}},"type":"object"},"ErrorResponse":{"example":{"error_code":"DEVCP.00000001","error_msg":"The format of message is error"},"properties":{"error_code":{"description":"错误码","type":"string"},"error_msg":{"description":"错误信息","type":"string"}},"type":"object"},"PipelineTemplateDTO":{"properties":{"definition":{"description":"模板编排json,包含stages","example":{"stages":[{"depends_on":[],"identifier":"0","jobs":[{"depends_on":[],"exec_type":"OCTOPUS_JOB","identifier":"166860727889079917574-5000-49bf-bf32-6ebe3ab1a18c","name":"流水线模板构建插件测试版","sequence":0,"stage_id":1668607272883,"steps":[{"business_type":"Build","identifier":"16686072762781248b5d3-ff81-4f94-a2de-779834047365","inputs":[{"encrypt":false,"key":"orgName","value":"org"},{"encrypt":false,"key":"pipelineNumber","value":"v1.0.0"},{"encrypt":false,"key":"imageName","value":"demo"},{"encrypt":false,"key":"is_build_in","value":"system"},{"encrypt":false,"key":"module_or_template_id","value":"00055"}],"multi_step_editable":1,"name":"流水线模板构建插件测试版","runtime_attribution":"agent","sequence":0,"task":"test_build_template@0.0.2"}],"timeout":"","timeout_unit":""}],"name":"阶段_1","post":null,"pre":[{"task":"official_devcloud_autoTrigger@0.0.1"}],"run_always":false,"sequence":"0"}]},"type":"string"},"description":{"description":"模板描述","example":"","type":"string"},"domain_id":{"description":"所属租户ID","example":"string","type":"string"},"is_show_source":{"description":"是否显示流水线源","example":true,"type":"boolean"},"is_system":{"description":"是否系统模板","example":false,"type":"boolean"},"language":{"description":"模板语言","example":"","type":"string"},"name":{"description":"模板名称","example":"新建流水线模板-2022111622112","type":"string"},"variables":{"$ref":"#/definitions/CustomVariable","description":"自定义参数"}},"required":["name","language","definition","is_system","domain_id","is_show_source"],"type":"object"},"TemplateIdVO":{"properties":{"templateId":{"type":"string"}},"type":"object"}},"description":null,"group_id":"030b4771a0bd4a949ed5e26f50da9017","host":"cloudpipeline-ext.cn-north-4.myhuaweicloud.com","id":"9b4437010ebd44ffaad7a02ac68e7b41","info_version":"v2","method":"post","name":"CreatePipelineTemplate","parameters":{"X-Auth-Token":{"description":"用户Token。\n\n通过调用IAM服务获取用户Token接口获取(响应消息头中X-Subject-Token的值)。","in":"header","name":"X-Auth-Token","required":true,"type":"string","x-example":"MIIDkgYJKoZIhvcNAQcCoIIDgzCCXXXXXX..."}},"paths":{"/v5/{tenant_id}/api/pipeline-templates":{"post":{"description":"创建流水线模板","operationId":"CreatePipelineTemplate","parameters":[{"description":"租户ID","in":"path","name":"tenant_id","required":true,"type":"string"},{"description":"创建模板请求体","in":"body","name":"body","required":true,"schema":{"$ref":"#/definitions/PipelineTemplateDTO"}},{"$ref":"#/parameters/X-Auth-Token"}],"responses":{"200":{"description":"模板ID","examples":{"application/json":{"templateId":"ad8a26f8b19a4b83a8d92eb733b65476"}},"schema":{"$ref":"#/definitions/TemplateIdVO"}},"400":{"description":"Bad request","schema":{"$ref":"#/definitions/ErrorResponse"}},"401":{"description":"Unauthorized"},"403":{"description":"Forbidden"},"404":{"description":"Not Found"}},"summary":"创建流水线模板","tags":["流水线模板管理--新"],"x-api-type":"open-api","x-is-registered":"Y","x-request-examples-1":{"definition":"{\"stages\":[{\"name\":\"阶段_1\",\"sequence\":\"0\",\"jobs\":[],\"identifier\":\"1699952768554b9c60b26-4da6-448d-9635-97643215b18e\",\"pre\":[{\"task\":\"official_devcloud_autoTrigger\",\"sequence\":0}],\"post\":null,\"depends_on\":[],\"run_always\":false}]}","description":"","domain_id":"ce8df55870164338a72d7e828a966a2a","is_show_source":true,"is_system":false,"language":"none","name":"新建流水线模板-20231023215133","variables":[]},"x-request-examples-text-1":{"definition":"{\"stages\":[{\"name\":\"阶段_1\",\"sequence\":\"0\",\"jobs\":[],\"identifier\":\"1699952768554b9c60b26-4da6-448d-9635-97643215b18e\",\"pre\":[{\"task\":\"official_devcloud_autoTrigger\",\"sequence\":0}],\"post\":null,\"depends_on\":[],\"run_always\":false}]}","description":"","domain_id":"ce8df55870164338a72d7e828a966a2a","is_show_source":true,"is_system":false,"language":"none","name":"新建流水线模板-20231023215133","variables":[]},"x-request-examples-url-1":"POST https://{endpoint}/v5/ce8df55870164338a72d7e828a966a2a/api/pipeline-templates","x-support-sdk":"Y"}}},"product_short":"CodeArtsPipeline","region_id":"cn-north-4","schemes":["HTTPS"],"security_definitions":{"apig-auth-app":{"in":"header","name":"Authorization","type":"apiKey","x-apigateway-auth-type":"AppSigv1"},"apig-auth-iam":{"in":"header","name":"unused","type":"apiKey","x-apigateway-auth-type":"IAM"},"apig-auth-iam-none":{"in":"header","name":"unused","type":"apiKey","x-apigateway-auth-type":"IAM_NONE"}},"summary":"创建流水线模板","tags":"流水线模板管理--新","uri":null,"version":"2.0"}