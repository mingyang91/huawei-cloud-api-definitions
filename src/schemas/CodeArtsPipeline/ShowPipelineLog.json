{"base_path":"/","components":null,"consumes":"[\"application/json;charset=UTF-8\"]","definitions":{"LogQuery":{"description":"流水线日志查询请求体\nstartOffset 和 endOffset 均设置为 0,则代表查询全量日志。","properties":{"end_offset":{"description":"日志结束偏移","example":0,"format":"int64","type":"integer"},"limit":{"description":"最大日志行数","example":0,"format":"int64","type":"integer"},"sort":{"description":"排序规则[\"asc\",\"desc\"]","example":"","type":"string"},"start_offset":{"description":"日志起始偏移","example":0,"format":"int64","type":"integer"}},"required":["startOffset","endOffset","limit","sort"],"type":"object"},"LogResult":{"properties":{"end_offset":{"description":"查询日志结束偏移","example":0,"type":"string"},"has_more":{"description":"是否有更多日志","example":false,"type":"boolean"},"location":{"description":"日志存储位置","example":"","type":"string"},"log":{"description":"日志内容","example":"","type":"string"},"start_offset":{"description":"查询日志起始偏移","example":0,"type":"string"},"step_run_id":{"description":"所属步骤ID","example":"","type":"string"}},"type":"object"}},"description":null,"group_id":"030b4771a0bd4a949ed5e26f50da9017","host":"cloudpipeline-ext.cn-north-4.myhuaweicloud.com","id":"1e7c7a7da7e441d0b136ec15eca04566","info_version":"v2","method":"post","name":"ShowPipelineLog","parameters":{"Path-Pipeline-Id":{"description":"流水线ID","in":"path","maxLength":32,"minLength":32,"name":"pipeline_id","required":true,"type":"string","x-example":"8025ba36a87a4dd5af496708c2961817"},"Path-Pipeline-Run-Id":{"description":"流水线运行实例ID","in":"path","maxLength":32,"minLength":32,"name":"pipeline_run_id","required":true,"type":"string"},"Path-Project-Id":{"description":"项目ID","in":"path","maxLength":32,"minLength":32,"name":"project_id","required":true,"type":"string"}},"paths":{"/v5/{project_id}/api/pipelines/{pipeline_id}/pipeline-runs/{pipeline_run_id}/jobs/{job_run_id}/steps/{step_run_id}/logs":{"post":{"description":"查询流水线日志","operationId":"ShowPipelineLog","parameters":[{"$ref":"#/parameters/Path-Project-Id"},{"$ref":"#/parameters/Path-Pipeline-Id"},{"$ref":"#/parameters/Path-Pipeline-Run-Id"},{"description":"流水线任务ID","in":"path","name":"job_run_id","required":true,"type":"string"},{"description":"流水线步骤ID","in":"path","name":"step_run_id","required":true,"type":"string"},{"description":"查询日志请求体","in":"body","name":"body","required":true,"schema":{"$ref":"#/definitions/LogQuery"}}],"responses":{"200":{"description":"查询日志响应体","examples":{"application/json":{"end_offset":"25705","has_more":false,"location":"jenkins","log":"[2023/11/24 21:49:32.198 GMT+08:00] [INFO] [real_stage:执行Shell] : 该步骤开始执行。\n[2023/11/24 21:49:32.201 GMT+08:00] [INFO] [real_stage:执行Shell] : ================== start to do VmExecutionStep ==================\n[2023/11/24 21:49:32.207 GMT+08:00] [INFO] [real_stage:执行Shell] : [frame] start to send status data to service.\n[2023/11/24 21:49:32.225 GMT+08:00] [INFO] [real_stage:执行Shell] : [frame] finish to save status data to service.\n[2023/11/24 21:49:32.777 GMT+08:00] [INFO] [real_stage:执行Shell] : slave arch: amd64\n[2023/11/24 21:49:33.330 GMT+08:00] [INFO] [real_stage:执行Shell] : download file result: SUCCESS\n[2023/11/24 21:49:36.547 GMT+08:00] [2023-11-24 21:49:36] [INFO] =========== flow agent launched in [octopus_container] ===========\n[2023/11/24 21:49:36.548 GMT+08:00] [2023-11-24 21:49:36] [INFO] =========== use env job loader ===========\n[2023/11/24 21:49:36.548 GMT+08:00] [2023-11-24 21:49:36] [INFO] start to do status callback\n[2023/11/24 21:49:36.548 GMT+08:00] [2023-11-24 21:49:36] [INFO] successfully callback to flow service\n[2023/11/24 21:49:36.548 GMT+08:00] [2023-11-24 21:49:36] [INFO] step begin: [1/1]-[执行Shell]\n[2023/11/24 21:49:36.548 GMT+08:00] [2023-11-24 21:49:36] [INFO] start to use official executor [official_shell_plugin]\n[2023/11/24 21:49:36.548 GMT+08:00] [2023-11-24 21:49:36] [INFO] ###############################@@@ 【step start】 @@@###############################\n[2023/11/24 21:49:36.548 GMT+08:00] [2023-11-24 21:49:36] [INFO] =========== start to use script executor ===========\n[2023/11/24 21:49:36.548 GMT+08:00] [2023-11-24 21:49:36] [INFO] =========== start to execute shell pre function [make temp dir] ===========\n[2023/11/24 21:49:36.548 GMT+08:00] [2023-11-24 21:49:36] [INFO] =========== shell pre function [make temp dir] current temp dir:[/data/workspace/6ce8600f396c4d5ba5290201ba9fd762/7a1a7bb1b5e74d1c944d8b8971621033] ===========\n[2023/11/24 21:49:36.548 GMT+08:00] [2023-11-24 21:49:36] [INFO] =========== end to execute shell pre function [make temp dir] successfully ===========\n[2023/11/24 21:49:36.548 GMT+08:00] [2023-11-24 21:49:36] [INFO] =========== start to execute custom shell ===========\n[2023/11/24 21:49:36.548 GMT+08:00] [2023-11-24 21:49:36] [INFO] 1\n[2023/11/24 21:49:36.548 GMT+08:00] [2023-11-24 21:49:36] [INFO] =========== finish to use script executor with status success ===========\n[2023/11/24 21:49:36.548 GMT+08:00] [2023-11-24 21:49:36] [INFO] ################################@@@ 【step end】 @@@################################\n[2023/11/24 21:49:36.548 GMT+08:00] [2023-11-24 21:49:36] [INFO] finish to use official executor\n[2023/11/24 21:49:36.548 GMT+08:00] [2023-11-24 21:49:36] [INFO] step 执行Shell succeed. \n[2023/11/24 21:49:36.548 GMT+08:00] [2023-11-24 21:49:36] [INFO] start to do data callback with context:[{1eaa92ecea2a42cab78e5269963a48c1 6ce8600f396c4d5ba5290201ba9fd762 7a1a7bb1b5e74d1c944d8b8971621033      0}]\n[2023/11/24 21:49:36.548 GMT+08:00] [2023-11-24 21:49:36] [INFO] successfully callback to flow service\n[2023/11/24 21:49:36.548 GMT+08:00] [2023-11-24 21:49:36] [INFO] current step, duration time: [0.030766842]\n[2023/11/24 21:49:36.548 GMT+08:00] [2023-11-24 21:49:36] [INFO] start to do status callback\n[2023/11/24 21:49:36.548 GMT+08:00] [2023-11-24 21:49:36] [INFO] successfully callback to flow service\n[2023/11/24 21:49:36.548 GMT+08:00] [2023-11-24 21:49:36] [INFO] =========== flow agent end ===========\n[2023/11/24 21:49:36.563 GMT+08:00] [INFO] [real_stage:执行Shell] : [frame] start to send status data to service.\n[2023/11/24 21:49:36.563 GMT+08:00] [INFO] [real_stage:执行Shell] : 该步骤执行完成。\n","start_offset":"6132","step_run_id":"7a1a7bb1b5e74d1c944d8b8971621033"}},"schema":{"$ref":"#/definitions/LogResult"}}},"summary":"查询流水线日志","tags":["流水线管理--新"],"x-api-type":"open-api","x-is-registered":"Y","x-request-examples-1":{"end_offset":0,"limit":500,"sort":"asc","start_offset":0},"x-request-examples-text-1":{"end_offset":0,"limit":500,"sort":"asc","start_offset":0},"x-request-examples-url-1":"https://{endpoint}/v5/d80a8a6530324b7bac972cbb8a9f28ec/pipelines/e2bcbd561fbc4fd89577fb27c80b09a6/pipeline-runs/9e91b1fd7ce743b7a1b7a2458bcf76c7/jobs/6ce8600f396c4d5ba5290201ba9fd762/steps/7a1a7bb1b5e74d1c944d8b8971621033/logs","x-support-sdk":"Y"}}},"product_short":"CodeArtsPipeline","region_id":"cn-north-4","schemes":["HTTPS"],"security_definitions":{"apig-auth-app":{"in":"header","name":"Authorization","type":"apiKey","x-apigateway-auth-type":"AppSigv1"},"apig-auth-iam":{"in":"header","name":"unused","type":"apiKey","x-apigateway-auth-type":"IAM"},"apig-auth-iam-none":{"in":"header","name":"unused","type":"apiKey","x-apigateway-auth-type":"IAM_NONE"}},"summary":"查询流水线日志","tags":"流水线管理--新","uri":null,"version":"2.0"}