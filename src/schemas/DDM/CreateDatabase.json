{"base_path":"/","components":null,"consumes":"[\"application/json;charset=UTF-8\"]","definitions":{"CreateDatabaseDetail":{"description":"databases参数说明","properties":{"name":{"description":"逻辑库名称,需要满足以下条件:\n\n- 长度为2-48个字符。\n- 必须以小写字母开头。\n- 可以包含小写字母、数字、下划线,不能包含大写字母和其它特殊字符。\n- 禁用关键字:\n \"information_schema\"、\"mysql\"、\"performance_schema\"、\"sys\"。","example":"mytestdb","maxLength":48,"minLength":2,"pattern":"^[a-zA-Z][a-zA-Z0-9_]*$","type":"string"},"shard_mode":{"description":"逻辑库的拆分模式。\n- cluster表示逻辑库是拆分模式。\n- single表示逻辑库是非拆分模式。","enum":["cluster","single"],"example":"cluster","type":"string"},"shard_number":{"description":"同一种工作模式下逻辑库分片的数量。\n- shard_unit不为空, shard_unit与关联rds数量的乘积\n- shard_unit为空,大于关联的RDS数量,小于等于关联rds数量*64。","example":8,"type":"integer"},"shard_unit":{"description":"单个RDS上的逻辑库分片数。非必选\n\n- 非拆分逻辑库,固定为1。\n- 拆分逻辑库,大于等于1,小于等于64。","example":8,"maximum":64,"minimum":1,"type":"integer"},"used_rds":{"description":"逻辑库关联的RDS。","items":{"$ref":"#/definitions/DatabaseInstabcesParam"},"type":"array"}},"required":["name","shard_mode","shard_number","used_rds"]},"CreateDatabaseDetailResponses":{"description":"This is a auto create Response Object","properties":{"name":{"description":"逻辑库名称。","example":"mytestdb","type":"string"}},"required":["name"]},"CreateDatabaseReq":{"description":"This is a auto create Body Object","properties":{"databases":{"description":"逻辑库相关信息的集合","items":{"$ref":"#/definitions/CreateDatabaseDetail"},"type":"array"}},"required":["databases"]},"CreateDatabaseResponses":{"description":"This is a auto create Response Object","properties":{"databases":{"description":"逻辑库相关信息的集合。","items":{"$ref":"#/definitions/CreateDatabaseDetailResponses"},"type":"array"}},"required":["databases"]},"DatabaseInstabcesParam":{"description":"used_rds参数说明","properties":{"adminPassword":{"description":"关联RDS实例的密码。","example":"PassWord_234","type":"string"},"adminUser":{"description":"关联RDS实例的用户。","example":"root","type":"string"},"id":{"description":"逻辑库关联的RDS的id","example":"f296c394f13f48449d715bf99af07e59in01","type":"string"}},"required":["id","adminUser","adminPassword"]},"ExceptionResponses":{"description":"异常对象","properties":{"errCode":{"description":"业务错误码","example":"DBS.280001","type":"string"},"externalMessage":{"description":"错误信息","example":"Parameter error.","type":"string"}},"required":["errCode","externalMessage"],"type":"object"}},"description":null,"group_id":"284d208eec4f4c37806d199f52a9958b","host":"ddm.cn-north-4.myhuaweicloud.com","id":"b77127aec6564b669388087257b0107c","info_version":"v1","method":"post","name":"CreateDatabase","parameters":{},"paths":{"/v1/{project_id}/instances/{instance_id}/databases":{"post":{"consumes":[],"deprecated":false,"description":"创建DDM逻辑库。","operationId":"CreateDatabase","parameters":[{"description":"租户在某一region下的project ID。","in":"path","name":"project_id","required":true,"type":"string","x-example":"2b31ed520xxxxxxebedb6e57xxxxxxxx","x-order":2},{"description":"DDM实例ID","in":"path","name":"instance_id","required":true,"type":"string","x-example":"441d5677-b76a-4dd4-a97a-ef7fd6336666","x-order":3},{"description":"用户Token。\n\n通过调用IAM服务获取用户Token接口获取(响应消息头中X-Subject-Token的值)。","in":"header","name":"X-Auth-Token","required":true,"type":"string","x-example":"MIIDkgYJKoZIhvcNAQcCoIIDgzCCXXXXX...","x-order":1},{"description":"This is a auto create Body Object","in":"body","name":"CreateDatabaseReq","required":true,"schema":{"$ref":"#/definitions/CreateDatabaseReq"}}],"produces":[],"responses":{"200":{"description":"OK","examples":{"application/json":{"databases":[{"name":"mytestdb"}]}},"schema":{"$ref":"#/definitions/CreateDatabaseResponses"}},"400":{"description":"bad request","examples":{"application/json":{"errCode":"DBS.280001","externalMessage":"Parameter error."}},"schema":{"$ref":"#/definitions/ExceptionResponses"}},"500":{"description":"server error","examples":{"application/json":{"errCode":"DBS.200412","externalMessage":"Server failure."}},"schema":{"$ref":"#/definitions/ExceptionResponses"}}},"summary":"创建DDM逻辑库","tags":["DDM逻辑库管理"],"x-constraint":"创建前需确保已导入RDS实例,RDS实例状态正常且没有被其他DDM实例关联使用。","x-name":"创建DDM逻辑库","x-order":8,"x-request-examples-1":{"databases":{"name":"mytestdb","shard_mode":"cluster","shard_number":8,"shard_unit":8,"used_rds":[{"id":"f296c394f13f48449d715bf99af07e59in01"},{"adminUser":"root"},{"adminPassword":"PassWord_234"}]}},"x-request-examples-description-1":"创建逻辑库时不新建DDM帐号,关联已有帐号。","x-request-examples-text-1":"{\n \"databases\": [\n {\n \"name\": \"mytestdb\",\n \"shard_mode\": \"cluster\",\n \"shard_number\": 8,\n \"shard_unit\": 8,\n \"used_rds\": [\n {\n \"id\": \"f296c394f13f48449d715bf99af07e59in01\",\n \"adminUser\": \"root\",\n \"adminPassword\": \"PassWord_234\"\n }\n ]\n }\n ]\n}","x-request-examples-url-1":"POST https://{endpoint}/v1/{project_id}/instances/{instance_id}/databases","x-scope":"Commercial","x-support-sdk":"Y","x-version":"v1"}}},"product_short":"DDM","region_id":"cn-north-4","schemes":["HTTPS"],"security_definitions":null,"summary":"创建DDM逻辑库","tags":"DDM逻辑库管理","uri":null,"version":"2.0"}