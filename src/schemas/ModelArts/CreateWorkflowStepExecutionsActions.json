{"base_path":"/","components":null,"consumes":"[\"application/json;charset=UTF-8\",\"application/json\"]","definitions":{"Constraint":{"description":"条件","properties":{"attribute":{"description":"属性,参数的某个字段值。","type":"string"},"operator":{"description":"操作,当前只支持equal操作。","type":"string"},"value":{"description":"取值。","type":"object"}},"type":"object"},"DataRequirement":{"description":"工作流需要的数据","properties":{"conditions":{"description":"数据约束条件","items":{"$ref":"#/definitions/Constraint"},"type":"array"},"delay":{"description":"延时参数标记","type":"boolean"},"name":{"description":"数据的名称。填写1-64位,仅包含英文、数字、下划线(_)和中划线(-),并且以英文开头的名称。","example":"eval_dataset","type":"string"},"type":{"description":"类型。枚举值如下:\n- dataset:数据集\n- obs:OBS\n- swr:SWR\n- model_list:AI应用列表\n- label_task:标注任务\n- service:在线服务","enum":["dataset:数据集","obs:OBS文件"],"example":"dataset","type":"string"},"used_steps":{"description":"使用了这条数据的工作流节点","example":["MyStep"],"items":{"type":"string"},"type":"array"},"value":{"additionalProperties":{"type":"object"},"description":"数据的值","example":{"dataset_id":"0id4B4KncfMOALhLk9y","version_id":"fjnFcNxLkZzocqW8VlK"},"type":"object"}},"required":["name","type"],"type":"object"},"JobInput":{"description":"作业输入","properties":{"data":{"description":"输入项数据","example":{"dataset_id":"0id4B4KncfMOALhLk9y","version_id":"fjnFcNxLkZzocqW8VlK"},"type":"object"},"name":{"description":"输入项名称,支持1到64位只包含英文、数字、下划线(_)和中划线(-)的字符。","example":"training_set","type":"string"},"type":{"description":"输入项类型。枚举值如下:\n- dataset:数据集\n- obs:OBS\n- data_selector:数据选择","enum":["dataset:数据集。","obs:OBS文件。"],"type":"string"},"value":{"description":"输入项的值","type":"object"}},"type":"object"},"JobOutput":{"description":"作业输出","properties":{"config":{"additionalProperties":{"type":"object"},"description":"输出配置","type":"object"},"name":{"description":"输出项名称","example":"processed_dataset","type":"string"},"type":{"description":"输出项类型。枚举值如下:\n- obs:OBS\n- model:AI应用元模型","enum":["dataset:数据集。","obs:OBS文件"],"example":"obs","type":"string"}},"type":"object"},"StepCondition":{"description":"条件节点执行条件。","properties":{"left":{"description":"取true时的分支","type":"object"},"right":{"description":"取false时的分支","type":"object"},"type":{"description":"判断类型,例如==(等于)、!=(不等于)、>(大于)、>=(大于等于)、<(小于)、<=(小于等于)、in(包含)、or(或)。","type":"string"}},"type":"object"},"StepExecution":{"description":"单节点执行状态","properties":{"conditions":{"items":{"$ref":"#/definitions/StepCondition"},"type":"array"},"conditions_execution":{"$ref":"#/definitions/WorkflowConditionExecution","description":"条件执行"},"created_at":{"description":"创建时间","example":"2020-12-28T14:43:01.118131+08:00","readOnly":true,"type":"string"},"duration":{"description":"运行时长","example":1000,"type":"integer"},"error_info":{"$ref":"#/definitions/WorkflowErrorInfo","description":"错误信息"},"events":{"description":"节点发生的事件","items":{"type":"string"},"type":"array"},"inputs":{"description":"节点的输入项","items":{"$ref":"#/definitions/JobInput"},"type":"array"},"instance_id":{"description":"实例ID","type":"string"},"outputs":{"description":"节点的输出项","items":{"$ref":"#/definitions/JobOutput"},"type":"array"},"policy":{"$ref":"#/definitions/WorkflowStepExecutionPolicy","description":"节点的执行策略"},"properties":{"additionalProperties":{"type":"object"},"description":"节点的属性","type":"object"},"status":{"description":"节点的状态。枚举如下:","enum":["init:初始化","wait_inputs:等待输入","pending:等待","creating:创建中","created:创建成功","create_failed:创建失败","running:运行中","stopping:停止中","stopped:停止","timeout:超时","completed:完成","failed:失败"],"type":"string"},"step_name":{"description":"节点的名称,在一个DAG中唯一,1到64位只包含中英文,数字,空格,下划线(_)和中划线(-),并且以中英文开头。","example":"MyStep","maxLength":64,"minLength":1,"type":"string"},"step_title":{"description":"节点标题","type":"string"},"step_uuid":{"description":"节点的UUID,唯一性标识","type":"string"},"type":{"description":"节点的类型","enum":["traning_job"],"example":"training_job","type":"string"},"uuid":{"description":"唯一标识uuid。创建节点执行时,后台自动生成。","example":"c5cbaab2-c54b-453d-a898-5583eda0a8e5","readOnly":true,"type":"string"}},"type":"object"},"StepExecutionAction":{"properties":{"action_name":{"description":"操作名称,枚举如下:\n - retry 重试\n - stop 停止\n - continue 继续","enum":["retry:重试","stop:停止","continue:停止"],"type":"string"},"data_requirements":{"items":{"$ref":"#/definitions/DataRequirement"},"type":"array"},"parameters":{"items":{"$ref":"#/definitions/WorkflowParameter"},"type":"array"}},"required":["action_name"],"type":"object"},"WorkflowConditionExecution":{"description":"workflow condition execution","properties":{"metric_list":{"description":"工作流度量信息列表","items":{"$ref":"#/definitions/WorkflowMetricPair"},"type":"array"},"result":{"description":"执行结果","type":"string"}},"type":"object"},"WorkflowErrorInfo":{"description":"error info struct","properties":{"error_code":{"description":"错误码","type":"string"},"error_message":{"description":"错误信息","type":"string"}},"type":"object"},"WorkflowMetricPair":{"description":"workflow metric pair","properties":{"key":{"description":"度量信息metric的key","type":"string"},"value":{"description":"度量信息metric的值","type":"object"}},"type":"object"},"WorkflowParameter":{"description":"参数。","properties":{"constraint":{"additionalProperties":{"type":"object"},"description":"限制条件","type":"object"},"default":{"description":"默认值","example":"c5cbaab2-c54b-453d-a898-5583eda0a8e5","type":"object"},"delay":{"description":"是否为延迟输入的参数","type":"boolean"},"description":{"description":"描述","example":"该参数为一个算法的ID","type":"string"},"enum":{"description":"枚举项","example":["abc","bcd","cde"],"items":{"oneOf":[{"type":"string"},{"type":"integer"},{"type":"number"}]},"type":"array"},"example":{"description":"样例","example":"c5cbaab2-c54b-453d-a898-5583eda0a8e5","type":"object"},"format":{"description":"数据格式","type":"string"},"name":{"description":"配置参数的名称。填写1-64位,仅包含英文、数字、下划线(_)和中划线(-),并且以英文开头的名称。","example":"training_algo_id","type":"string"},"type":{"description":"参数的类型,枚举值如下:\n- str 字符串\n- int 整形\n- bool 布尔类型\n- float 浮点型","enum":["str:字符串类型","int:整形","bool:布尔类型","float:浮点型"],"example":"str","type":"string"},"used_steps":{"description":"使用这个参数的工作流节点","example":["MyStep"],"items":{"type":"string"},"type":"array"},"value":{"description":"Parameter的值","example":"c5cbaab2-c54b-453d-a898-5583eda0a8e5","type":"object"}},"type":"object"},"WorkflowStepExecutionPolicy":{"description":"workflow step execution 策略","properties":{"execution_policy":{"description":"执行策略,可选值如下:\n- retry:重试\n- stop,:停止\n- continue:继续运行","type":"string"},"use_cache":{"description":"使用的缓存","type":"boolean"}},"type":"object"}},"description":null,"group_id":"ade740e866904a7dbdaa5ec0f538d4d0","host":"modelarts.cn-north-4.myhuaweicloud.com","id":"c743102d5053451e85eb9ceadaf6f6b5","info_version":"v1","method":"post","name":"CreateWorkflowStepExecutionsActions","parameters":{"execution_id":{"description":"工作流执行ID","in":"path","name":"execution_id","required":true,"type":"string"},"projectId":{"description":"用户项目ID。获取方法请参见[获取项目ID和名称](modelarts_03_0147.xml)。","in":"path","name":"project_id","required":true,"type":"string"},"step_execution_id":{"description":"工作流的一次执行中一个节点的执行ID","in":"path","name":"step_execution_id","required":true,"type":"string"},"workflow_id":{"description":"工作流的ID","in":"path","name":"workflow_id","required":true,"type":"string"}},"paths":{"/v2/{project_id}/workflows/{workflow_id}/executions/{execution_id}/step-executions/{step_execution_id}/actions":{"post":{"description":"操作STEP。","operationId":"CreateWorkflowStepExecutionsActions","parameters":[{"$ref":"#/parameters/projectId"},{"$ref":"#/parameters/workflow_id"},{"$ref":"#/parameters/execution_id"},{"$ref":"#/parameters/step_execution_id"},{"description":"step的动作","in":"body","name":"body","required":false,"schema":{"$ref":"#/definitions/StepExecutionAction"}}],"responses":{"201":{"description":"OK","examples":{"application/json":{"created_at":"2022-11-01T21:36:04.310635+08:00","duration":15,"events":["2022-11-01 21:36:05 change status from init to creating","2022-11-01 21:36:09 change status from creating to created","2022-11-01 21:36:09 change status from created to running","2022-11-01 21:36:19 change status from running to completed"],"inputs":[{"data":"$ref/data_requirements/model_input","name":"model_input","type":"obs","value":{"object_type":["DIRECTORY"],"obs_url":"/test-crq/train_output/"}}],"instance_id":"{\"model_id\":\"6fe56a95-e7f1-4388-b207-c80684af0cb8\"}","outputs":[{"config":{"model_id":"6fe56a95-e7f1-4388-b207-c80684af0cb8"},"name":"model_output","type":"model"}],"policy":{},"properties":{"model_name":"lh-xh","model_type":"TensorFlow"},"status":"completed","step_name":"model_step","step_title":"model release","uuid":"2f7ad04a-60cb-4f1c-96fd-dfc9cf96363b"}},"schema":{"$ref":"#/definitions/StepExecution"}}},"schemes":["https"],"summary":"操作StepExecution","tags":["WorkflowExecution"],"x-api-type":"internal-api","x-constraint":"无","x-is-registered":"Y","x-open-region-cloud":"hc,hcs,fcs,fcs-super","x-publish-doc":"Y","x-request-examples-1":{"action_name":"stop"},"x-request-examples-description-1":"停止step","x-request-examples-text-1":{"action_name":"stop"},"x-request-examples-url-1":"POST https://{endpoint}/v2/{project_id}/workflows/{workflow_id}/executions/4dd2a2f5-bde2-45dd-af6b-5e5d570118d1/step_executions/255a1079-b00a-4c3a-8218-3458f7546b8d/actions"}}},"product_short":"ModelArts","region_id":"cn-north-4","schemes":["HTTPS"],"security_definitions":{"ApiTokenAuth":{"in":"header","name":"X-Auth-Token","type":"apiKey"}},"summary":"操作StepExecution","tags":"Workflow工作流管理","uri":null,"version":"2.0"}