{"base_path":"/","components":null,"consumes":"[\"application/json;charset=UTF-8\"]","definitions":{"CreateLoginTokenRequestBody":{"description":"","properties":{"auth":{"$ref":"#/definitions/LoginTokenAuth","description":"认证信息。"}},"required":["auth"]},"CreateLoginTokenResponseBody":{"description":"","properties":{"logintoken":{"$ref":"#/definitions/LoginToken","description":"自定义代理登录票据信息。"}},"required":["logintoken"]},"LoginToken":{"description":"","properties":{"assumed_by":{"$ref":"#/definitions/LoginTokenAssumedBy","description":"被委托方用户信息。\n> - [通过委托获取临时访问密钥和securitytoken](https://apiexplorer.developer.huaweicloud.com/apiexplorer/doc?product=IAM&api=CreateTemporaryAccessKeyByAgency)且请求体中填写session_user.name参数时,会返回该字段。"},"domain_id":{"description":"账号ID。","example":"05fdcf2c188033a70f78c00e6cbd0...","type":"string"},"expires_at":{"description":"logintoken的过期时间,默认10min。","example":"2019-09-02T08:18:38.562000Z","type":"string"},"method":{"description":"认证方法。当认证用户为华为云用户时,该字段内容为“token”,当认证用户为自定义代理用户时,该字段内容为“federation_proxy”。","example":"token","type":"string"},"session_id":{"description":"会话ID。","example":"0eb62fa2e9124375ba0e114e8f149...","type":"string"},"session_name":{"description":"自定义代理用户名。\n> - [通过委托获取临时访问密钥和securitytoken](https://apiexplorer.developer.huaweicloud.com/apiexplorer/doc?product=IAM&api=CreateTemporaryAccessKeyByAgency)且请求体中填写session_user.name参数时,会返回该字段。该字段的值即为session_user.name所填写的值。","example":"SessionUserName","type":"string"},"session_user_id":{"description":"自定义代理用户ID。","example":"0eb62fa2esdfcsf24455e114e8f149...","type":"string"},"user_id":{"description":"用户ID。","type":"string"},"user_name":{"description":"用户名。","type":"string"}},"required":["domain_id","expires_at","method","session_id","user_id","user_name"]},"LoginTokenAssumedBy":{"description":"","properties":{"user":{"$ref":"#/definitions/LoginTokenUser","description":"被委托方用户信息。"}}},"LoginTokenAuth":{"description":"","properties":{"securitytoken":{"$ref":"#/definitions/LoginTokenSecurityToken","description":"认证参数。"}},"required":["securitytoken"]},"LoginTokenDomain":{"description":"","properties":{"id":{"description":"被委托方用户所属账号ID。","example":"05fdcf2c188033a70f78c00e6cbd0...","type":"string"},"name":{"description":"被委托方用户所属账号名称。","example":"domain002","type":"string"}}},"LoginTokenSecurityToken":{"description":"","properties":{"access":{"description":"AK。","example":"LUJHNN4WB569PGAPBDFT","type":"string"},"duration_seconds":{"default":600,"description":"自定义代理登录票据logintoken的有效时间,时间单位为秒。默认10分钟,取值范围10min~12h,且取值不能大于临时安全凭证securitytoken的过期时间。","example":600,"format":"int32","maximum":43200,"minimum":600,"type":"integer"},"id":{"description":"securitytoken,即临时身份的安全token。\n\n支持使用自定义代理用户或普通用户获取的securitytoken换取logintoken,详情请参见:[通过token获取临时访问密钥和securitytoken](https://apiexplorer.developer.huaweicloud.com/apiexplorer/doc?product=IAM&api=CreateTemporaryAccessKeyByToken)。\n\n支持委托的方式,但获取securitytoken时,请求体中必须填写session_user.name参数,详情请参见:[通过委托获取临时访问密钥和securitytoken](https://apiexplorer.developer.huaweicloud.com/apiexplorer/doc?product=IAM&api=CreateTemporaryAccessKeyByAgency)。","example":"gQpjbi1ub3J0a..","type":"string"},"secret":{"description":"SK。","example":"7qtrm2cku0XubixiVkBOcvMfpnu7H2mLNCUsuFR8","type":"string"}},"required":["access","id","secret"]},"LoginTokenUser":{"description":"","properties":{"domain":{"$ref":"#/definitions/LoginTokenDomain","description":"被委托方用户所属账号信息。"},"id":{"description":"被委托方用户ID。","example":"05fdcf44990033a21fbec00e2873a...","type":"string"},"name":{"description":"被委托方用户名。","example":"IAMUserB","type":"string"},"password_expires_at":{"description":"被委托方用户的密码过期时间。","type":"string"}}}},"description":null,"group_id":"ab48a57262c6411fb8fb72acfcee84e1","host":"iam.cn-north-4.myhuaweicloud.com","id":"5fd01b99f9544da088407d8bbdabb40b","info_version":"v3","method":"post","name":"CreateLoginToken","parameters":{},"paths":{"/v3.0/OS-AUTH/securitytoken/logintokens":{"post":{"consumes":[],"deprecated":false,"description":"该接口用于用于获取自定义代理登录票据logintoken。logintoken是系统颁发给自定义代理用户的登录票据,承载用户的身份、session等信息。调用自定义代理URL登录云服务控制台时,可以使用本接口获取的logintoken进行认证。\n\n该接口可以使用全局区域的Endpoint和其他区域的Endpoint调用。IAM的Endpoint请参见:[地区和终端节点](https://developer.huaweicloud.com/endpoint?IAM)。\n\n> - logintoken的有效期为10分钟。","operationId":"CreateLoginToken","parameters":[{"description":"请求体。","in":"body","name":"CreateLoginTokenRequestBody","required":true,"schema":{"$ref":"#/definitions/CreateLoginTokenRequestBody"},"x-order":1}],"produces":[],"responses":{"201":{"description":"创建成功。\n\n示例1:通过token获取临时访问密钥和securitytoken。\n\n示例2:通过委托获取临时访问密钥和securitytoken且请求体中填写session_user.name参数。","examples":{"application/json":{"logintoken":{"domain_id":"05262121fb00d5c30fbec013bc17a4a0","expires_at":"2020-01-20T08:18:36.447000Z","method":"token","session_id":"40b328b6683a41b9bf8e7185e9523425","user_id":"0526213b8a80d38a1f31c013edef9a3e","user_name":"IAMUser"}},"application/json-1":{"logintoken":{"assumed_by":{"user":{"domain":{"id":"0659ef9c9c80d4560f14c009acf9c4a0","name":"IAMDomainB"},"id":"0659ef9d4d00d3b81f26c009fee32b57","name":"IAMUserB","password_expires_at":"2020-02-16T02:44:57.000000Z"}},"domain_id":"05262121fb00d5c30fbec013bc17a4a0","expires_at":"2020-01-23T03:27:26.728000Z","method":"federation_proxy","session_id":"0012c8e6adda4ce787e90585d10e3e63","session_name":"SessionUserName","session_user_id":"SessionUserId","user_id":"07826f367b80d2474ff9c013a48903ee","user_name":"IAMDomainA/IAMAgency"}}},"headers":{"X-Subject-LoginToken":{"description":"签名后的logintoken。","type":"string"}},"schema":{"$ref":"#/definitions/CreateLoginTokenResponseBody"}},"400":{"description":"参数无效。"},"401":{"description":"认证失败。"},"403":{"description":"没有操作权限。"},"405":{"description":"不允许的方法。"},"413":{"description":"请求体过大。"},"500":{"description":"内部服务错误。"},"503":{"description":"服务不可用。"}},"summary":"获取自定义代理登录票据","tags":["自定义代理"],"x-apiexplorer-hide":"N","x-constraint":"","x-is-registered":"Y","x-name":"获取自定义代理登录票据","x-order":106,"x-publishpath":"","x-request-examples-1":{"auth":{"securitytoken":{"access":"LUJHNN4WB569PGAPBDFT","duration_seconds":600,"id":"gQpjbi1ub3J0a...","secret":"7qtrm2cku0XubixiVkBOcvMfpnu7H2mLNCUsuFR8"}}},"x-request-examples-description-1":"","x-request-examples-text-1":"{\n    \"auth\": {\n        \"securitytoken\": {\n            \"access\": \"LUJHNN4WB569PGAPBDFT\",\n            \"secret\": \"7qtrm2cku0XubixiVkBOcvMfpnu7H2mLNCUsuFR8\",\n            \"id\": \"gQpjbi1ub3J0a...\",\n            \"duration_seconds\": 600\n        }\n    }\n}","x-request-examples-url-1":"POST https://iam.myhuaweicloud.com/v3.0/OS-AUTH/securitytoken/logintokens","x-scope":"Commercial","x-support-sdk":"Y","x-version":"v3.0"}}},"product_short":"IAM","region_id":"cn-north-4","schemes":["HTTPS"],"security_definitions":null,"summary":"获取自定义代理登录票据","tags":"自定义代理","uri":null,"version":"2.0"}