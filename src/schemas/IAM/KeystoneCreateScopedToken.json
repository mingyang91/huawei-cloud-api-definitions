{"base_path":"/","components":null,"consumes":"[\"application/json;charset=UTF-8\"]","definitions":{"KeystoneCreateScopedTokenRequestBody":{"description":"","properties":{"auth":{"$ref":"#/definitions/ScopedTokenAuth","description":"认证信息。"}},"required":["auth"]},"KeystoneCreateScopedTokenResponseBody":{"description":"","properties":{"token":{"$ref":"#/definitions/ScopeTokenResult","description":"联邦认证token信息。"}},"required":["token"]},"OsfederationGroups":{"description":"","properties":{"id":{"description":"用户组ID。","example":"b40189e26ea44f959877621b4b298db5","type":"string"},"name":{"description":"用户组名称。","example":"admin","type":"string"}},"required":["id","name"]},"OsfederationIdentityprovider":{"description":"","properties":{"id":{"description":"身份提供商ID。","example":"exampleidentityprovider","type":"string"}},"required":["id"]},"OsfederationProtocol":{"description":"","properties":{"id":{"description":"协议ID。","example":"saml","type":"string"}},"required":["id"]},"ScopeDomainOption":{"description":"","properties":{"id":{"description":"账号ID,id与name二选一即可。","example":"0b95b78b67fa045b38104c12fb...","type":"string"},"name":{"description":"账号名,id与name二选一即可。","example":"IAMDomain","type":"string"}}},"ScopeProjectOption":{"description":"","properties":{"domain":{"$ref":"#/definitions/ScopeDomainOption","description":"项目所属账号,使用name时必填。"},"id":{"description":"项目ID,id与name二选一即可。","example":"0b95b78b67fa045b38104c12fb...","type":"string"},"name":{"description":"项目名,id与name二选一即可。","type":"string"}}},"ScopeTokenResult":{"description":"","properties":{"catalog":{"description":"服务目录信息。","items":{"$ref":"#/definitions/TokenCatalog"},"type":"array"},"domain":{"$ref":"#/definitions/TokenDomainResult","description":"获取token的用户所属的账号信息。如果获取token时请求体中scope参数设置为domain,则返回该字段。"},"expires_at":{"description":"token过期时间。","example":"2017-05-24T06:54:12.508000Z","type":"string"},"issued_at":{"description":"token下发时间。","example":"2015-11-09T00:42:57.527404Z","type":"string"},"methods":{"description":"获取token的方式。","items":{"type":"string"},"type":"array"},"project":{"$ref":"#/definitions/TokenProjectResult","description":"获取token的用户所属账号的项目信息。如果获取token时请求体中scope参数设置为project,则返回该字段。"},"roles":{"description":"token的权限信息。","items":{"$ref":"#/definitions/TokenRole"},"type":"array"},"user":{"$ref":"#/definitions/ScopedTokenUser","description":"获取token的用户信息。"}},"required":["domain","expires_at","issued_at","methods","project","roles","user"]},"ScopedToken":{"description":"","properties":{"id":{"description":"联邦unscoped token的ID。","example":"MIIatAYJKoZIhvcNAQcCoIIapTCCGqECAQExDTALB...","type":"string"}},"required":["id"]},"ScopedTokenAuth":{"description":"","properties":{"identity":{"$ref":"#/definitions/ScopedTokenIdentity","description":"认证参数。"},"scope":{"$ref":"#/definitions/TokenSocpeOption","description":"token的使用范围,取值为project或domain,二选一即可。"}},"required":["identity","scope"]},"ScopedTokenIdentity":{"description":"","properties":{"methods":{"description":"认证方法,该字段内容为“token”。","items":{"type":"string"},"type":"array"},"token":{"$ref":"#/definitions/ScopedToken","description":"联邦unscoped token的信息。"}},"required":["methods","token"]},"ScopedTokenUser":{"description":"","properties":{"OS-FEDERATION":{"$ref":"#/definitions/TokenUserOsfederation","description":"联邦身份认证信息。"},"domain":{"$ref":"#/definitions/TokenDomainResult","description":"用户所属账号信息。"},"id":{"description":"用户ID。","example":"RMQTgtjjSNGDcKy7oUmI3AZg7GgsWG0Z","type":"string"},"name":{"description":"用户名。","type":"string"},"password_expires_at":{"description":"密码过期时间(UTC时间),“”表示密码不过期。","type":"string"}},"required":["OS-FEDERATION","domain","id","name","password_expires_at"]},"TokenCatalog":{"description":"","properties":{"endpoints":{"description":"终端节点。","items":{"$ref":"#/definitions/TokenCatalogEndpoint","default":{"type":"object","value":"{}"}},"type":"array"},"id":{"description":"服务ID。","example":"1331e5cff2a74d76b03da1225910e31d","type":"string"},"name":{"description":"服务名称。","example":"iam","type":"string"},"type":{"description":"该接口所属服务。","example":"identity","type":"string"}},"required":["endpoints","id","name","type"]},"TokenCatalogEndpoint":{"description":"","properties":{"id":{"description":"终端节点ID。","example":"089d4a381d574308a703122d3ae738e9","type":"string"},"interface":{"description":"接口类型,描述接口在该终端节点的可见性。值为“public”,表示该接口为公开接口。","example":"public","type":"string"},"region":{"description":"终端节点所属区域。","example":"*","type":"string"},"region_id":{"description":"终端节点所属区域ID。","example":"*","type":"string"},"url":{"description":"终端节点的URL。","example":"https://iam.myhuaweicloud.com/v3","type":"string"}},"required":["id","interface","region","region_id","url"]},"TokenDomainResult":{"description":"","properties":{"id":{"description":"用户所属账号ID。","example":"e31ac82d778b4d128cb6fed37fd72cdb","type":"string"},"name":{"description":"用户所属账号名。","example":"exampledomain","type":"string"}},"required":["id","name"]},"TokenProjectDomainResult":{"description":"","properties":{"id":{"description":"账号ID。","type":"string"},"name":{"description":"账号名。","type":"string"}},"required":["id","name"]},"TokenProjectResult":{"description":"","properties":{"domain":{"$ref":"#/definitions/TokenProjectDomainResult","description":"项目所属账号信息。"},"id":{"description":"项目ID。","example":"34c77f3eaf84c00aaf54...","type":"string"},"name":{"description":"项目名。","type":"string"}},"required":["domain","id","name"]},"TokenRole":{"description":"","properties":{"id":{"description":"权限ID。默认显示为0,非真实权限ID。","type":"string"},"name":{"description":"权限名称。","example":"te_admin","type":"string"}},"required":["id","name"]},"TokenSocpeOption":{"description":"","properties":{"domain":{"$ref":"#/definitions/ScopeDomainOption","description":"取值为domain时,表示可以跨区域使用,domain支持id和name,二选一即可。"},"project":{"$ref":"#/definitions/ScopeProjectOption","description":"取值为project时,表示仅能访问指定project下的资源,project支持id和name,二选一即可。"}}},"TokenUserOsfederation":{"description":"","properties":{"groups":{"description":"用户组信息列表。","items":{"$ref":"#/definitions/OsfederationGroups"},"type":"array"},"identity_provider":{"$ref":"#/definitions/OsfederationIdentityprovider","description":"身份提供商信息。"},"protocol":{"$ref":"#/definitions/OsfederationProtocol","description":"协议信息。","example":"fdec73ffea524aa1b373e40..."}},"required":["groups","identity_provider","protocol"]}},"description":null,"group_id":"ab48a57262c6411fb8fb72acfcee84e1","host":"iam.cn-north-4.myhuaweicloud.com","id":"4359c1b3b08d433fac0fbc677bdd7244","info_version":"v3","method":"post","name":"KeystoneCreateScopedToken","parameters":{},"paths":{"/v3/auth/tokens":{"post":{"consumes":[],"deprecated":false,"description":"该接口可以用于通过联邦认证方式获取scoped token。\n\n该接口可以使用全局区域的Endpoint和其他区域的Endpoint调用。IAM的Endpoint请参见:[地区和终端节点](https://developer.huaweicloud.com/endpoint?IAM)。","operationId":"KeystoneCreateScopedToken","parameters":[{"description":"请求体。","in":"body","name":"KeystoneCreateScopedTokenRequestBody","required":true,"schema":{"$ref":"#/definitions/KeystoneCreateScopedTokenRequestBody"},"x-order":1}],"produces":[],"responses":{"201":{"description":"创建成功。","examples":{"application/json":{"token":{"catalog":[{"endpoints":[{"id":"d2983f677ce14f1e81cbb6a9345a107a","interface":"public","region":"*","region_id":"*","url":"https://iam.cn-north-1.myhwclouds.com/v3"}],"id":"fd631b3426cb40f0919091d5861d8fea","name":"keystone","type":"identity"}],"domain":{"id":"06aa2260a480cecc0f36c0086bb6cfe0","name":"IAMDomain"},"expires_at":"2020-02-13T14:21:34.042000Z","issued_at":"2020-02-12T14:21:34.042000Z","methods":["token"],"roles":[{"id":"0","name":"te_admin"},{"id":"0","name":"secu_admin"}],"user":{"OS-FEDERATION":{"groups":[{"id":"06aa2260bb00cecc3f3ac0084a74038f","name":"admin"}],"identity_provider":{"id":"ACME"},"protocol":{"id":"saml"}},"domain":{"id":"06aa2260a480cecc0f36c0086bb6cfe0","name":"IAMDomain"},"id":"LdQTDSC7zmJVIic3yaCbLBXDxPAdDxLg","name":"FederationUser","password_expires_at":""}}}},"headers":{"X-Subject-Token":{"description":"签名后的scoped token。","type":"string","x-example":"MIID...."}},"schema":{"$ref":"#/definitions/KeystoneCreateScopedTokenResponseBody"}},"400":{"description":"参数无效。"},"401":{"description":"认证失败。"},"403":{"description":"没有操作权限。"},"404":{"description":"未找到相应的资源。"},"500":{"description":"内部服务错误。"},"503":{"description":"服务不可用。"}},"summary":"获取联邦认证scoped token","tags":["联邦身份认证管理"],"x-apiexplorer-hide":"N","x-constraint":"","x-is-registered":"Y","x-name":"获取联邦认证scoped token","x-order":103,"x-publishpath":"","x-request-examples-1":{"auth":{"identity":{"methods":["token"],"token":{"id":"MIIatAYJKoZIhvcNAQcCoIIapTCCGqECAQExDTALB..."}},"scope":{"domain":{"id":"063bb260a480cecc0f36c0086bb6cfe0"}}}},"x-request-examples-description-1":"","x-request-examples-text-1":"{\n    \"auth\": {\n        \"identity\": {\n            \"methods\": [\n                \"token\"\n            ],\n            \"token\": {\n                \"id\": \"MIIatAYJKoZIhvcNAQcCoIIapTCCGqECAQExDTALB...\"\n            }\n        },\n        \"scope\": {\n            \"domain\": {\n                \"id\": \"063bb260a480cecc0f36c0086bb6cfe0\"\n            }\n        }\n    }\n}","x-request-examples-url-1":"POST https://iam.myhuaweicloud.com/v3/auth/tokens","x-scope":"Commercial","x-support-sdk":"Y","x-version":"v3"}}},"product_short":"IAM","region_id":"cn-north-4","schemes":["HTTPS"],"security_definitions":null,"summary":"获取联邦认证scoped token","tags":"联邦身份认证管理","uri":null,"version":"2.0"}