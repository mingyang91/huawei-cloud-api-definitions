{"base_path":"/","components":null,"consumes":"[\"application/json;charset=UTF-8\"]","definitions":{"ConditionAdditional":{"description":"","items":{"type":"string"},"type":"array"},"CreateTemporaryAccessKeyByTokenRequestBody":{"description":"","properties":{"auth":{"$ref":"#/definitions/TokenAuth","description":"认证信息。"}},"required":["auth"]},"CreateTemporaryAccessKeyByTokenResponseBody":{"description":"","properties":{"credential":{"$ref":"#/definitions/Credential","description":"认证结果信息。"}},"required":["credential"]},"Credential":{"description":"","properties":{"access":{"description":"获取的AK。","example":"WX99FNBSHCNPG9EV3T6S","type":"string"},"expires_at":{"description":"AK/SK和securitytoken的过期时间。","example":"2020-01-08T03:16:01.599000Z","type":"string"},"secret":{"description":"获取的SK。","example":"G8jME3FdItroUAxevyZy5EJJ00lJj6Y52NtVSMzr","type":"string"},"securitytoken":{"description":"securitytoken是将所获的AK、SK等信息进行加密后的字符串。","example":"gQpjbi1ub3J0aC00jN8BogWJ6OgFkxd_e---9bY_7QIw-92jIFQQ-A9RdR...","type":"string"}},"required":["access","expires_at","secret","securitytoken"]},"IdentityToken":{"description":"","properties":{"duration_seconds":{"default":900,"description":"AK/SK和securitytoken的有效期,时间单位为秒。取值范围:15min ~ 24h ,默认为15min。","example":3600,"format":"int32","maximum":86400,"minimum":900,"type":"integer"},"id":{"description":"token的ID。与请求头中的X-Auth-Token含义相同,待废弃。","example":"MIIDkgYJKoZIhvcNAQcCoIIDgzCCA38CAQExDTALBglghkgBZQMEAgEwgXXXXX...","type":"string"}}},"ServicePolicy":{"description":"","properties":{"Statement":{"description":"授权语句,描述自定义策略的具体内容。","items":{"$ref":"#/definitions/ServiceStatement"},"type":"array"},"Version":{"default":"1.1","description":"权限版本号,创建自定义策略时,该字段值填为“1.1”。\n> - 1.0:系统预置的角色。以服务为粒度,提供有限的服务相关角色用于授权。\n> - 1.1:策略。IAM最新提供的一种细粒度授权的能力,可以精确到具体服务的操作、资源以及请求条件等。","example":"1.1","type":"string"}},"required":["Statement","Version"]},"ServiceStatement":{"description":"","properties":{"Action":{"description":"授权项,指对资源的具体操作权限。\n> - 格式为:服务名:资源类型:操作,例:vpc:ports:create。\n> - 服务名为产品名称,例如ecs、evs和vpc等,服务名仅支持小写。 资源类型和操作没有大小写,要求支持通配符号*,无需罗列全部授权项。","items":{"type":"string"},"type":"array"},"Condition":{"additionalProperties":{"additionalProperties":{"$ref":"#/definitions/ConditionAdditional","description":""},"description":"","type":"object"},"type":"object"},"Effect":{"description":"作用。包含两种:允许(Allow)和拒绝(Deny),既有Allow又有Deny的授权语句时,遵循Deny优先的原则。","enum":["Allow","Deny"],"example":"Allow","type":"string"},"Resource":{"description":"资源。规则如下:\n> - 可填 * 的五段式:<service-name>:<region>:<account-id>:<resource-type>:<resource-path>,例:\"obs:*:*:bucket:*\"。\n> - region字段为*或用户可访问的region。service必须存在且resource属于对应service。","items":{"type":"string"},"type":"array"}},"required":["Action","Effect"]},"TokenAuth":{"description":"","properties":{"identity":{"$ref":"#/definitions/TokenAuthIdentity","description":"认证参数。"}},"required":["identity"]},"TokenAuthIdentity":{"description":"","properties":{"methods":{"description":"认证方法,该字段内容为[\"token\"]。","items":{"enum":["token"],"type":"string"},"maxItems":1,"minItems":1,"type":"array"},"policy":{"$ref":"#/definitions/ServicePolicy","description":"自定义策略的具体内容。"},"token":{"$ref":"#/definitions/IdentityToken","description":"IAM用户token或联邦用户的token或委托token,该参数中的“id”与请求头中的X-Auth-Token含义相同,待废弃。"}},"required":["methods"]}},"description":null,"group_id":"ab48a57262c6411fb8fb72acfcee84e1","host":"iam.cn-north-4.myhuaweicloud.com","id":"ab584bceb2f549158a9cc3929512e7a7","info_version":"v3","method":"post","name":"CreateTemporaryAccessKeyByToken","parameters":{},"paths":{"/v3.0/OS-CREDENTIAL/securitytokens":{"post":{"consumes":[],"deprecated":false,"description":"该接口可以用于通过token来获取临时AK/SK和securitytoken。\n\n临时AK/SK和securitytoken是系统颁发给IAM用户的临时访问令牌,有效期为15分钟至24小时,过期后需要重新获取。临时AK/SK和securitytoken遵循权限最小化原则。鉴权时,临时AK/SK和securitytoken必须同时使用,请求头中需要添加“x-security-token”字段,使用方法详情请参考:[API签名参考](https://support.huaweicloud.com/devg-apisign/api-sign-provide.html)。\n\n该接口可以使用全局区域的Endpoint和其他区域的Endpoint调用。IAM的Endpoint请参见:[地区和终端节点](https://developer.huaweicloud.com/endpoint?IAM)。","operationId":"CreateTemporaryAccessKeyByToken","parameters":[{"description":"IAM用户token或联邦用户的token或委托token,该参数与请求体中的“auth.token.id“含义相同,建议使用X-Auth-Token。","in":"header","name":"X-Auth-Token","required":false,"type":"string","x-example":"MIIDkgYJKoZIhvcNAQcCoIIDgzCCXXXXX...","x-order":1},{"description":"请求体。","in":"body","name":"CreateTemporaryAccessKeyByTokenRequestBody","required":true,"schema":{"$ref":"#/definitions/CreateTemporaryAccessKeyByTokenRequestBody"},"x-order":2}],"produces":[],"responses":{"201":{"description":"创建成功。","examples":{"application/json":{"credential":{"access":"NZFAT5VNWEJDGZ4PZ8CG","expires_at":"2020-01-08T03:50:07.574000Z","secret":"riEoWsy3qO0BvgwfkoLVgCUvzgpjBBcvdqM0hbk0","securitytoken":"gQpjbi1ub3J0aC00jD4Ej..."}}},"schema":{"$ref":"#/definitions/CreateTemporaryAccessKeyByTokenResponseBody"}},"400":{"description":"参数无效。"},"401":{"description":"认证失败。"},"403":{"description":"没有操作权限。"},"500":{"description":"内部服务错误。"}},"summary":"通过token获取临时访问密钥","tags":["Credential管理"],"x-apiexplorer-hide":"N","x-constraint":"","x-is-registered":"Y","x-name":"通过token获取临时访问密钥","x-order":5,"x-publishpath":"","x-request-examples-1":{"auth":{"identity":{"methods":["token"],"policy":{"Statement":[{"Action":["obs:object:*"],"Condition":{"StringEquals":{"obs:prefix":["public"]}},"Effect":"Allow","Resource":["obs:*:*:object:*"]}],"Version":"1.1"},"token":{"duration_seconds":900}}}},"x-request-examples-2":{"auth":{"identity":{"methods":["token"],"token":{"duration_seconds":900}}}},"x-request-examples-3":{"auth":{"identity":{"methods":["token"]}}},"x-request-examples-description-1":"填写\"policy\"参数。","x-request-examples-description-2":"填写\"token\"参数。","x-request-examples-description-3":"不填写“token”参数。","x-request-examples-text-1":"{\n    \"auth\": {\n        \"identity\": {\n            \"methods\": [\n                \"token\"\n            ],\n            \"policy\": {\n                \"Version\": \"1.1\",\n                \"Statement\": [\n                    {\n                        \"Effect\": \"Allow\",\n                        \"Action\": [\n                            \"obs:object:*\"\n                        ],\n                        \"Resource\": [\n                            \"obs:*:*:object:*\"\n                        ],\n                        \"Condition\": {\n                            \"StringEquals\": {\n                                \"obs:prefix\": [\n                                    \"public\"\n                                ]\n                            }\n                        }\n                    }\n                ]\n            },\n            \"token\": {\n                \"duration_seconds\": 900\n            }\n        }\n    }\n}","x-request-examples-text-2":"{\n    \"auth\": {\n        \"identity\": {\n            \"methods\": [\n                \"token\"\n            ],\n            \"token\": {\n                \"duration_seconds\": 900\n            }\n        }\n    }\n}","x-request-examples-text-3":"{\n    \"auth\": {\n        \"identity\": {\n            \"methods\": [\n                \"token\"\n            ]\n        }\n    }\n}","x-request-examples-url-1":"POST https://iam.myhuaweicloud.com/v3.0/OS-CREDENTIAL/securitytokens","x-request-examples-url-2":"POST https://iam.myhuaweicloud.com/v3.0/OS-CREDENTIAL/securitytokens","x-request-examples-url-3":"POST https://iam.myhuaweicloud.com/v3.0/OS-CREDENTIAL/securitytokens","x-scope":"Commercial","x-support-sdk":"Y","x-version":"v3.0"}}},"product_short":"IAM","region_id":"cn-north-4","schemes":["HTTPS"],"security_definitions":null,"summary":"通过token获取临时访问密钥","tags":"Credential管理","uri":null,"version":"2.0"}