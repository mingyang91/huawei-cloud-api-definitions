{"base_path":"/","components":null,"consumes":"[\"application/json;charset=UTF-8\"]","definitions":{"KeystoneValidateTokenResponseBody":{"description":"","properties":{"token":{"$ref":"#/definitions/TokenResult","description":"获取到的token信息。"}},"required":["token"]},"TokenCatalog":{"description":"","properties":{"endpoints":{"description":"终端节点。","items":{"$ref":"#/definitions/TokenCatalogEndpoint","default":{"type":"object","value":"{}"}},"type":"array"},"id":{"description":"服务ID。","example":"1331e5cff2a74d76b03da1225910e31d","type":"string"},"name":{"description":"服务名称。","example":"iam","type":"string"},"type":{"description":"该接口所属服务。","example":"identity","type":"string"}},"required":["endpoints","id","name","type"]},"TokenCatalogEndpoint":{"description":"","properties":{"id":{"description":"终端节点ID。","example":"089d4a381d574308a703122d3ae738e9","type":"string"},"interface":{"description":"接口类型,描述接口在该终端节点的可见性。值为“public”,表示该接口为公开接口。","example":"public","type":"string"},"region":{"description":"终端节点所属区域。","example":"*","type":"string"},"region_id":{"description":"终端节点所属区域ID。","example":"*","type":"string"},"url":{"description":"终端节点的URL。","example":"https://iam.myhuaweicloud.com/v3","type":"string"}},"required":["id","interface","region","region_id","url"]},"TokenDomainResult":{"description":"","properties":{"id":{"description":"用户所属账号ID。","example":"e31ac82d778b4d128cb6fed37fd72cdb","type":"string"},"name":{"description":"用户所属账号名。","example":"exampledomain","type":"string"}},"required":["id","name"]},"TokenProjectDomainResult":{"description":"","properties":{"id":{"description":"账号ID。","type":"string"},"name":{"description":"账号名。","type":"string"}},"required":["id","name"]},"TokenProjectResult":{"description":"","properties":{"domain":{"$ref":"#/definitions/TokenProjectDomainResult","description":"项目所属账号信息。"},"id":{"description":"项目ID。","example":"34c77f3eaf84c00aaf54...","type":"string"},"name":{"description":"项目名。","type":"string"}},"required":["domain","id","name"]},"TokenResult":{"description":"","properties":{"catalog":{"description":"服务目录信息。","items":{"$ref":"#/definitions/TokenCatalog","default":{"type":"object","value":"{}"},"description":""},"type":"array"},"domain":{"$ref":"#/definitions/TokenDomainResult","description":"获取token的IAM用户所属的账号信息。如果获取token时请求体中scope参数设置为domain,则返回该字段。  "},"expires_at":{"description":"token过期时间。","example":"2020-01-04T09:08:49.965000Z","type":"string"},"issued_at":{"description":"token下发时间。","example":"2020-01-03T09:08:49.965000Z","type":"string"},"methods":{"description":"获取token的方式。","items":{"default":{"type":"object","value":"{}"},"type":"string"},"type":"array"},"project":{"$ref":"#/definitions/TokenProjectResult","description":"获取token的IAM用户所属账号的项目信息。如果获取token时请求体中scope参数设置为project,则返回该字段。  "},"roles":{"description":"token的权限信息。","items":{"$ref":"#/definitions/TokenRole","default":{"type":"object","value":"{}"},"description":""},"type":"array"},"user":{"$ref":"#/definitions/TokenUserResult","description":"获取token的IAM用户信息。"}},"required":["catalog","expires_at","issued_at","methods","roles","user"]},"TokenRole":{"description":"","properties":{"id":{"description":"权限ID。默认显示为0,非真实权限ID。","type":"string"},"name":{"description":"权限名称。","example":"te_admin","type":"string"}},"required":["id","name"]},"TokenUserDomainResult":{"description":"","properties":{"id":{"description":"IAM用户所属账号ID。","example":"d78cbac186b744899480f25bd022f468","type":"string"},"name":{"description":"IAM用户所属账号名称。","example":"IAMDomain","type":"string"}},"required":["id","name"]},"TokenUserResult":{"description":"","properties":{"domain":{"$ref":"#/definitions/TokenUserDomainResult","description":"IAM用户所属的账号信息。"},"id":{"description":"IAM用户ID。","example":"7116d09f88fa41908676fdd4b039e95b","type":"string"},"name":{"description":"IAM用户名。","example":"IAMUser","type":"string"},"password_expires_at":{"description":"密码过期时间(UTC时间),“”表示密码不过期。","example":"2020-03-10T03:16:46.000000Z","type":"string"}},"required":["domain","id","name","password_expires_at"]}},"description":null,"group_id":"ab48a57262c6411fb8fb72acfcee84e1","host":"iam.cn-north-4.myhuaweicloud.com","id":"a65327cbdbb74b9f8655f2bbbae5fee1","info_version":"v3","method":"get","name":"KeystoneValidateToken","parameters":{},"paths":{"/v3/auth/tokens":{"get":{"deprecated":false,"description":"该接口可以用于[管理员](https://support.huaweicloud.com/usermanual-iam/iam_01_0001.html)校验本账号中IAM用户token的有效性,或IAM用户校验自己token的有效性。管理员仅能校验本账号中IAM用户token的有效性,不能校验其他账号中IAM用户token的有效性。如果被校验的token有效,则返回该token的详细信息。\n\n该接口可以使用全局区域的Endpoint和其他区域的Endpoint调用。IAM的Endpoint请参见:[地区和终端节点](https://developer.huaweicloud.com/endpoint?IAM)。","operationId":"KeystoneValidateToken","parameters":[{"description":"[管理员](https://support.huaweicloud.com/usermanual-iam/iam_01_0001.html)校验本账号中IAM用户的token的有效性:拥有Security Administrator权限的token。\n\nIAM用户校验自己token的有效性:该IAM用户的token(无需特殊权限)。","in":"header","name":"X-Auth-Token","required":true,"type":"string","x-example":"MIIDkgYJKoZIhvcNAQcCoIIDgzCCXXXXX...","x-order":1},{"description":"待校验的token。","in":"header","name":"X-Subject-Token","required":true,"type":"string","x-example":"MIIDkgYJKoZIhvcNAQcCoIIDgzCCXXXXX...","x-order":2},{"description":"如果设置该参数,返回的响应体中将不显示catalog信息。任何非空字符串都将解释为true,并使该字段生效。","in":"query","name":"nocatalog","required":false,"type":"string","x-example":"true","x-order":3}],"produces":["application/json"],"responses":{"200":{"description":"请求成功。","examples":{"application/json":{"token":{"catalog":[{"endpoints":[{"id":"33e1cbdd86d34e89a63cf8ad16a5f49f","interface":"public","region":"*","region_id":"*","url":"https://iam.myhuaweicloud.com/v3.0"}],"id":"100a6a3477f1495286579b819d399e36","name":"iam","type":"iam"},{"endpoints":[{"id":"29319cf2052d4e94bcf438b55d143832","interface":"public","region":"*","region_id":"*","url":"https://bss.myhuaweicloud.com/v1.0"}],"id":"c6db69fabbd549908adcb861c7e47ca4","name":"bssv1","type":"bssv1"}],"domain":{"id":"d78cbac186b744899480f25bd022f468","name":"IAMDomain"},"expires_at":"2020-01-04T09:08:49.965000Z","issued_at":"2020-01-03T09:08:49.965000Z","methods":["password"],"roles":[{"id":"0","name":"te_admin"},{"id":"0","name":"secu_admin"},{"id":"0","name":"te_agency"}],"user":{"domain":{"id":"d78cbac186b744899480f25bd022f468","name":"IAMDomain"},"id":"7116d09f88fa41908676fdd4b039e95b","name":"IAMUser","password_expires_at":""}}}},"headers":{"X-Subject-Token":{"description":"已校验的token。","type":"string","x-example":"MIIDkgYJKoZIhvcNAQcCoIIDgzCCXXXXX..."}},"schema":{"$ref":"#/definitions/KeystoneValidateTokenResponseBody"}},"401":{"description":"认证失败。"},"403":{"description":"没有操作权限。"},"404":{"description":"未找到相应的资源。","examples":{"application/json":{"error":{"code":404,"message":"X-Subject-Token is invalid in the request","title":"Not Found"}}}},"500":{"description":"内部服务错误。"}},"summary":"校验Token的有效性","tags":["Token管理"],"x-apiexplorer-hide":"N","x-constraint":"","x-is-registered":"Y","x-name":"校验Token的有效性","x-order":4,"x-publishpath":"","x-request-examples-1":"GET https://iam.myhuaweicloud.com/v3/auth/tokens","x-request-examples-description-1":"","x-request-examples-text-1":"GET https://iam.myhuaweicloud.com/v3/auth/tokens","x-request-examples-url-1":"","x-scope":"Commercial","x-support-sdk":"Y","x-version":"v3"}}},"product_short":"IAM","region_id":"cn-north-4","schemes":["HTTPS"],"security_definitions":null,"summary":"校验Token的有效性","tags":"Token管理","uri":null,"version":"2.0"}