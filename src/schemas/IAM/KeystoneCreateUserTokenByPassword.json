{"base_path":"/","components":null,"consumes":"[\"application/json;charset=UTF-8\"]","definitions":{"AuthScope":{"description":"","properties":{"domain":{"$ref":"#/definitions/AuthScopeDomain","description":"取值为domain时,表示可以跨区域使用,domain支持id和name,二选一即可。"},"project":{"$ref":"#/definitions/AuthScopeProject","description":"取值为project时,表示仅能访问指定project下的资源,project支持id和name,二选一即可。"}}},"AuthScopeDomain":{"description":"","properties":{"id":{"description":"IAM用户所属账号ID,获取方式请参见:[获取账号、IAM用户、项目、用户组、委托的名称和ID](https://support.huaweicloud.com/api-iam/iam_17_0002.html)。","example":"d78cbac186b744899480f25bd022f468","type":"string"},"name":{"description":"IAM用户所属账号名称,获取方式请参见:[获取账号、IAM用户、项目、用户组、委托的名称和ID](https://support.huaweicloud.com/api-iam/iam_17_0002.html)。","example":"IAMDomain","type":"string"}}},"AuthScopeProject":{"description":"","properties":{"id":{"description":"IAM用户所属账号的项目ID,获取方式请参见:[获取账号、IAM用户、项目、用户组、委托的名称和ID](https://support.huaweicloud.com/api-iam/iam_17_0002.html)。","example":"aa2d97d7e62c4b7da3ffdfc11551f878","type":"string"},"name":{"description":"IAM用户所属账号的项目名称,获取方式请参见:[获取账号、IAM用户、项目、用户组、委托的名称和ID](https://support.huaweicloud.com/api-iam/iam_17_0002.html)。","example":"cn-north-1","type":"string"}}},"KeystoneCreateUserTokenByPasswordRequestBody":{"description":"","properties":{"auth":{"$ref":"#/definitions/PwdAuth","description":"认证信息。"}},"required":["auth"]},"KeystoneCreateUserTokenByPasswordResponseBody":{"description":"","properties":{"token":{"$ref":"#/definitions/TokenResult","description":"获取到的token信息。"}},"required":["token"]},"PwdAuth":{"description":"","properties":{"identity":{"$ref":"#/definitions/PwdIdentity","description":"认证参数。"},"scope":{"$ref":"#/definitions/AuthScope","description":"token的使用范围,取值为project或domain,二选一即可。\n> 如果您将scope设置为domain,该token适用于全局级服务;如果将scope设置为project,该token适用于项目级服务。"}},"required":["identity","scope"]},"PwdIdentity":{"description":"","properties":{"methods":{"description":"认证方法,该字段内容为[\"password\"]。","items":{"enum":["password"],"type":"string"},"maxItems":1,"minItems":1,"type":"array"},"password":{"$ref":"#/definitions/PwdPassword","description":"IAM用户密码认证信息。\n> - user.name和user.domain.name可以在界面控制台“我的凭证”中查看,具体获取方法请参见:[获取账号、IAM用户、项目、用户组、委托的名称和ID](https://support.huaweicloud.com/api-iam/iam_17_0002.html)。\n> - 如果是第三方系统用户,直接使用联邦认证的用户名和密码获取token,系统会提示密码错误。需要在华为云的登录页面,通过“忘记密码” 功能,在华为云中设置登录密码,并在password中输入新设置的密码。\n> - 该接口提供了锁定机制用于防止暴力破解,调用时,请确保用户名密码正确,输错一定次数([管理员](https://support.huaweicloud.com/usermanual-iam/iam_01_0001.html)可设置该规则,方法请参见:[账号锁定策略](https://support.huaweicloud.com/usermanual-iam/iam_01_0704.html))将被锁定。"}},"required":["methods","password"]},"PwdPassword":{"description":"","properties":{"user":{"$ref":"#/definitions/PwdPasswordUser","description":"需要获取token的IAM用户信息。"}},"required":["user"]},"PwdPasswordUser":{"description":"","properties":{"domain":{"$ref":"#/definitions/PwdPasswordUserDomain","description":"IAM用户所属账号信息。"},"name":{"description":"IAM用户名,获取方式请参见:[获取账号、IAM用户、项目、用户组、委托的名称和ID](https://support.huaweicloud.com/api-iam/iam_17_0002.html)。","example":"IAMUser","type":"string"},"password":{"description":"IAM用户的登录密码。","example":"IAMPassword","format":"password","type":"string"}},"required":["domain","name","password"]},"PwdPasswordUserDomain":{"description":"","properties":{"name":{"description":"IAM用户所属账号名,获取方式请参见:[获取账号、IAM用户、项目、用户组、委托的名称和ID](https://support.huaweicloud.com/api-iam/iam_17_0002.html)。","example":"IAMDomain","type":"string"}},"required":["name"]},"TokenCatalog":{"description":"","properties":{"endpoints":{"description":"终端节点。","items":{"$ref":"#/definitions/TokenCatalogEndpoint","default":{"type":"object","value":"{}"}},"type":"array"},"id":{"description":"服务ID。","example":"1331e5cff2a74d76b03da1225910e31d","type":"string"},"name":{"description":"服务名称。","example":"iam","type":"string"},"type":{"description":"该接口所属服务。","example":"identity","type":"string"}},"required":["endpoints","id","name","type"]},"TokenCatalogEndpoint":{"description":"","properties":{"id":{"description":"终端节点ID。","example":"089d4a381d574308a703122d3ae738e9","type":"string"},"interface":{"description":"接口类型,描述接口在该终端节点的可见性。值为“public”,表示该接口为公开接口。","example":"public","type":"string"},"region":{"description":"终端节点所属区域。","example":"*","type":"string"},"region_id":{"description":"终端节点所属区域ID。","example":"*","type":"string"},"url":{"description":"终端节点的URL。","example":"https://iam.myhuaweicloud.com/v3","type":"string"}},"required":["id","interface","region","region_id","url"]},"TokenDomainResult":{"description":"","properties":{"id":{"description":"用户所属账号ID。","example":"e31ac82d778b4d128cb6fed37fd72cdb","type":"string"},"name":{"description":"用户所属账号名。","example":"exampledomain","type":"string"}},"required":["id","name"]},"TokenProjectDomainResult":{"description":"","properties":{"id":{"description":"账号ID。","type":"string"},"name":{"description":"账号名。","type":"string"}},"required":["id","name"]},"TokenProjectResult":{"description":"","properties":{"domain":{"$ref":"#/definitions/TokenProjectDomainResult","description":"项目所属账号信息。"},"id":{"description":"项目ID。","example":"34c77f3eaf84c00aaf54...","type":"string"},"name":{"description":"项目名。","type":"string"}},"required":["domain","id","name"]},"TokenResult":{"description":"","properties":{"catalog":{"description":"服务目录信息。","items":{"$ref":"#/definitions/TokenCatalog","default":{"type":"object","value":"{}"},"description":""},"type":"array"},"domain":{"$ref":"#/definitions/TokenDomainResult","description":"获取token的IAM用户所属的账号信息。如果获取token时请求体中scope参数设置为domain,则返回该字段。  "},"expires_at":{"description":"token过期时间。","example":"2020-01-04T09:08:49.965000Z","type":"string"},"issued_at":{"description":"token下发时间。","example":"2020-01-03T09:08:49.965000Z","type":"string"},"methods":{"description":"获取token的方式。","items":{"default":{"type":"object","value":"{}"},"type":"string"},"type":"array"},"project":{"$ref":"#/definitions/TokenProjectResult","description":"获取token的IAM用户所属账号的项目信息。如果获取token时请求体中scope参数设置为project,则返回该字段。  "},"roles":{"description":"token的权限信息。","items":{"$ref":"#/definitions/TokenRole","default":{"type":"object","value":"{}"},"description":""},"type":"array"},"user":{"$ref":"#/definitions/TokenUserResult","description":"获取token的IAM用户信息。"}},"required":["catalog","expires_at","issued_at","methods","roles","user"]},"TokenRole":{"description":"","properties":{"id":{"description":"权限ID。默认显示为0,非真实权限ID。","type":"string"},"name":{"description":"权限名称。","example":"te_admin","type":"string"}},"required":["id","name"]},"TokenUserDomainResult":{"description":"","properties":{"id":{"description":"IAM用户所属账号ID。","example":"d78cbac186b744899480f25bd022f468","type":"string"},"name":{"description":"IAM用户所属账号名称。","example":"IAMDomain","type":"string"}},"required":["id","name"]},"TokenUserResult":{"description":"","properties":{"domain":{"$ref":"#/definitions/TokenUserDomainResult","description":"IAM用户所属的账号信息。"},"id":{"description":"IAM用户ID。","example":"7116d09f88fa41908676fdd4b039e95b","type":"string"},"name":{"description":"IAM用户名。","example":"IAMUser","type":"string"},"password_expires_at":{"description":"密码过期时间(UTC时间),“”表示密码不过期。","example":"2020-03-10T03:16:46.000000Z","type":"string"}},"required":["domain","id","name","password_expires_at"]}},"description":null,"group_id":"ab48a57262c6411fb8fb72acfcee84e1","host":"iam.cn-north-4.myhuaweicloud.com","id":"74f2521615b044af9ce6376491f023fa","info_version":"v3","method":"post","name":"KeystoneCreateUserTokenByPassword","parameters":{},"paths":{"/v3/auth/tokens":{"post":{"consumes":[],"deprecated":false,"description":"该接口可以用于通过用户名/密码的方式进行认证来获取IAM用户token。\n\ntoken是系统颁发给IAM用户的访问令牌,承载用户的身份、权限等信息。调用IAM以及其他云服务的接口时,可以使用本接口获取的IAM用户token进行鉴权。\n\n该接口可以使用全局区域的Endpoint和其他区域的Endpoint调用。如果使用全局区域的Endpoint调用,该token可以在所有区域使用;如果使用非全局区域的Endpoint调用,则该token仅在该区域生效,不能跨区域使用。IAM的Endpoint请参见:[地区和终端节点](https://developer.huaweicloud.com/endpoint?IAM)。\n> - token的有效期为24小时,建议进行缓存,避免频繁调用。\n> - 通过Postman获取用户token示例请参见:[如何通过Postman获取用户token](https://support.huaweicloud.com/iam_faq/iam_01_034.html)。\n> - 如果需要获取具有Security Administrator权限的token,请参见:[IAM 常见问题](https://support.huaweicloud.com/iam_faq/iam_01_0608.html)。","operationId":"KeystoneCreateUserTokenByPassword","parameters":[{"description":"如果设置该参数,返回的响应体中将不显示catalog信息。任何非空字符串都将解释为true,并使该字段生效。","in":"query","name":"nocatalog","required":false,"type":"string","x-example":"true","x-order":1},{"description":"请求体。","in":"body","name":"KeystoneCreateUserTokenByPasswordRequestBody","required":true,"schema":{"$ref":"#/definitions/KeystoneCreateUserTokenByPasswordRequestBody"},"x-order":2}],"produces":[],"responses":{"201":{"description":"创建成功。\n示例1:获取IAM用户名为“IAMUser”,密码为“IAMPassword”,所属账号名为“IAMDomain”,作用范围为项目“cn-north-1”,且返回的响应体中将不显示catalog信息的token。\n\n示例2:获取IAM用户名为“IAMUser”,密码为“IAMPassword”,所属账号名为“IAMDomain”,作用范围为整个账号的token。","examples":{"application/json":{"token":{"catalog":[],"expires_at":"2020-01-04T09:05:22.701000Z","issued_at":"2020-01-03T09:05:22.701000Z","methods":["password"],"project":{"domain":{"id":"d78cbac186b744899480f25bd022f468","name":"IAMDomain"},"id":"aa2d97d7e62c4b7da3ffdfc11551f878","name":"cn-north-1"},"roles":[{"id":"0","name":"te_admin"},{"id":"0","name":"op_gated_OBS_file_protocol"},{"id":"0","name":"op_gated_Video_Campus"}],"user":{"domain":{"id":"d78cbac186b744899480f25bd022f468","name":"IAMDomain"},"id":"7116d09f88fa41908676fdd4b039e95b","name":"IAMUser","password_expires_at":""}}},"application/json-1":{"token":{"catalog":[{"endpoints":[{"id":"33e1cbdd86d34e89a63cf8ad16a5f49f","interface":"public","region":"*","region_id":"*","url":"https://iam.myhuaweicloud.com/v3.0"}],"id":"100a6a3477f1495286579b819d399e36","name":"iam","type":"iam"},{"endpoints":[{"id":"29319cf2052d4e94bcf438b55d143832","interface":"public","region":"*","region_id":"*","url":"https://bss.myhuaweicloud.com/v1.0"}],"id":"c6db69fabbd549908adcb861c7e47ca4","name":"bssv1","type":"bssv1"}],"domain":{"id":"d78cbac186b744899480f25bd022f468","name":"IAMDomain"},"expires_at":"2020-01-04T09:08:49.965000Z","issued_at":"2020-01-03T09:08:49.965000Z","methods":["password"],"roles":[{"id":"0","name":"te_admin"},{"id":"0","name":"secu_admin"},{"id":"0","name":"te_agency"}],"user":{"domain":{"id":"d78cbac186b744899480f25bd022f468","name":"IAMDomain"},"id":"7116d09f88fa41908676fdd4b039e95b","name":"IAMUser","password_expires_at":""}}}},"headers":{"X-Subject-Token":{"description":"签名后的token。","type":"string","x-example":"MIIDkgYJKoZIhvcNAQcCoIIDgzCCA38CAQExDTALBglghkgBZQMEAgEwgXXXXX..."}},"schema":{"$ref":"#/definitions/KeystoneCreateUserTokenByPasswordResponseBody"}},"400":{"description":"参数无效。","examples":{"application/json":{"error":{"code":400,"message":"The request body is invalid","title":"Bad Request"}}}},"401":{"description":"认证失败。","examples":{"application/json":{"error":{"code":401,"message":"The username or password is wrong.","title":"Unauthorized"}}}},"403":{"description":"没有操作权限。"},"404":{"description":"未找到相应的资源。"},"500":{"description":"内部服务错误。"},"503":{"description":"服务不可用。"}},"summary":"获取IAM用户Token(使用密码)","tags":["Token管理"],"x-apiexplorer-hide":"N","x-constraint":"","x-is-registered":"Y","x-name":"获取IAM用户Token(使用密码)","x-order":1,"x-publishpath":"","x-request-examples-1":{"auth":{"identity":{"methods":["password"],"password":{"user":{"domain":{"name":"IAMDomain"},"name":"IAMUser","password":"IAMPassword"}}},"scope":{"domain":{"name":"IAMDomain"}}}},"x-request-examples-2":{"auth":{"identity":{"methods":["password"],"password":{"user":{"domain":{"name":"IAMDomain"},"name":"IAMUser","password":"IAMPassword"}}},"scope":{"project":{"name":"cn-north-1"}}}},"x-request-examples-description-1":"获取IAM用户名为“IAMUser”,密码为“IAMPassword”,所属账号名为“IAMDomain”,作用范围为整个账号的token。","x-request-examples-description-2":"获取IAM用户名为“IAMUser”,密码为“IAMPassword”,所属账号名为“IAMDomain”,作用范围为项目“cn-north-1”,且返回的响应体中将不显示catalog信息的token。","x-request-examples-text-1":"{\n    \"auth\":{\n        \"identity\":{\n            \"methods\":[\"password\"],\n            \"password\":{\n                \"user\":{\n                    \"name\":\"IAMUser\",\n                    \"password\":\"IAMPassword\",\n                    \"domain\":{\n                        \"name\":\"IAMDomain\"\n                    }\n                }\n            }\n        },\n        \"scope\":{\n            \"domain\":{\n                \"name\":\"IAMDomain\"\n            }\n        }\n    }\n}","x-request-examples-text-2":"{\n    \"auth\": {\n        \"identity\": {\n            \"methods\": [\n                \"password\"\n            ],\n            \"password\": {\n                \"user\": {\n                    \"name\": \"IAMUser\",\n                    \"password\": \"IAMPassword\",\n                    \"domain\": {\n                        \"name\": \"IAMDomain\"\n                    }\n                }\n            }\n        },\n        \"scope\": {\n            \"project\": {\n                \"name\": \"cn-north-1\"\n            }\n        }\n    }\n}","x-request-examples-url-1":"POST https://iam.myhuaweicloud.com/v3/auth/tokens","x-request-examples-url-2":"POST https://iam.myhuaweicloud.com/v3/auth/tokens?nocatalog=true","x-scope":"Commercial","x-support-sdk":"Y","x-version":"v3"}}},"product_short":"IAM","region_id":"cn-north-4","schemes":["HTTPS"],"security_definitions":null,"summary":"获取IAM用户Token(使用密码)","tags":"Token管理","uri":null,"version":"2.0"}