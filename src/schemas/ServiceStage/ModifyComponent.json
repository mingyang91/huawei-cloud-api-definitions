{"base_path":null,"components":{"parameters":{"application_id":{"description":"应用id","in":"path","name":"application_id","required":true,"schema":{"type":"string"}},"auth-token":{"description":"租户身份验证令牌。","in":"header","name":"X-Auth-Token","required":true,"schema":{"type":"string"}},"component_id":{"description":"组件id","in":"path","name":"component_id","required":true,"schema":{"type":"string"}},"project_id":{"description":"租户项目ID。","in":"path","name":"project_id","required":true,"schema":{"type":"string"}}},"responses":{"400":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}},"description":"错误的请求。"},"404":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}},"description":"请求对象不存在。"},"500":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}},"description":"内部错误。"}},"schemas":{"Build":{"properties":{"parameters":{"properties":{"artifact_namespace":{"maxLength":64,"type":"string"},"build_cmd":{"maxLength":512,"type":"string"},"cluster_id":{"type":"string"},"dockerfile_path":{"maxLength":128,"type":"string"},"environment_id":{"description":"构建环境,选择其中的k8s集群进行构建","type":"string"},"node_label_selector":{"additionalProperties":{"type":"string"},"type":"object"}},"required":["cluster_id"],"type":"object"}},"type":"object"},"ComponentAffinity":{"properties":{"az":{"items":{"type":"string"},"type":"array"},"component":{"items":{"$ref":"#/components/schemas/ComponentAffinityAppInnerParameters"},"type":"array"},"node":{"items":{"type":"string"},"type":"array"}},"type":"object"},"ComponentAffinityAppInnerParameters":{"properties":{"displayName":{"type":"string"},"name":{"type":"string"}},"type":"object"},"ComponentCommand":{"properties":{"args":{"items":{"type":"string"},"type":"array"},"command":{"items":{"type":"string"},"type":"array"}},"type":"object"},"ComponentEnvironment":{"properties":{"name":{"type":"string"},"value":{"type":"string"},"value_from":{"properties":{"key":{"description":"configmap或者secret的key","type":"string"},"name":{"description":"configmap或者secret的名字","type":"string"},"optional":{"description":"configmap或者secret或者他们的key是否必须存在","type":"boolean"},"reference_type":{"enum":["configMapKey","secretKey"],"type":"string"}},"required":["reference_type","name"],"type":"object"}},"required":["name"],"type":"object"},"ComponentLifecycle":{"properties":{"command":{"description":"type为command类型时生效。命令列表","items":{"type":"string"},"type":"array"},"host":{"description":"type为http类型时生效。默认为POD的IP, 可以指定自定义的IP","type":"string"},"path":{"description":"type为http类型时生效。请求路径。","type":"string"},"port":{"description":"type为http类型时生效。","type":"integer"},"scheme":{"description":"type为http类型时生效","enum":["HTTP","HTTPS"],"type":"string"},"type":{"enum":["http","command"],"type":"string"}},"required":["type"],"type":"object"},"ComponentLogs":{"properties":{"host_extend_path":{"description":"主机扩展路径","enum":["None","PodUID","PodName","PodUID/ContainerName","PodName/ContainerName"],"type":"string"},"host_path":{"description":"挂载的主机路径","type":"string"},"log_path":{"description":"容器中日志路径","type":"string"},"rotate":{"description":"日志转储周期","type":"string"}},"required":["log_path","rotate","host_path","host_extend_path"],"type":"object"},"ComponentModify":{"example":{"affinity":{"condition":"required","kind":"node","match_expressions":[{"key":"string","operation":"string","value":"string"}],"weight":0},"anti_affinity":{"condition":"required","kind":"node","match_expressions":[{"key":"string","operation":"string","value":"string"}],"weight":0},"build":{"parameters":{"artifact_namespace":"string","build_cmd":"string","cluster_id":"string","dockerfile_path":"string","environment_id":"string","node_label_selector":{"additionalProp1":"string","additionalProp2":"string","additionalProp3":"string"}}},"command":{"args":["string"],"command":["string"]},"custom_metric":{"dimensions":"string","path":"string","port":0},"deploy_strategy":{"gray_release":{"first_batch_replica":0,"first_batch_weight":0,"remaining_batch":0,"type":"weight"},"rolling_release":{"batches":0},"type":"OneBatchRelease"},"description":"string","envs":[{"name":"string","value":"string","value_from":{"key":"string","name":"string","optional":true,"reference_type":"configMapKey"}}],"host_aliases":[{"hostnames":["string"],"ip":"string"}],"jvm_opts":"string","labels":[{"key":"string","value":"string"}],"limit_cpu":0,"limit_memory":0,"liveness_probe":{"command":["string"],"delay":0,"host":"string","path":"string","port":0,"scheme":"HTTP","timeout":0,"type":"http"},"logs":[{"host_extend_path":"None","host_path":"string","log_path":"string","rotate":"string"}],"mesher":{"port":0},"name":"string","post_start":{"command":["string"],"host":"string","path":"string","port":0,"scheme":"HTTP","type":"http"},"pre_stop":{"command":["string"],"host":"string","path":"string","port":0,"scheme":"HTTP","type":"http"},"readiness_probe":{"command":["string"],"delay":0,"host":"string","path":"string","port":0,"scheme":"HTTP","timeout":0,"type":"http"},"refer_resources":[{"id":"string","parameters":{"namespace":"string"},"type":"vpc"}],"replica":0,"request_cpu":0,"request_memory":0,"runtime_stack":{"deploy_mode":"container","name":"string","type":"string","version":"string"},"source":{"auth":"string","kind":"code","repo_auth":"string","repo_namespace":"string","repo_ref":"string","repo_type":"string","repo_url":"string","storage":"obs","url":"string","version":"string","web_url":"string"},"storages":[{"mounts":[{"path":"string","read_only":true,"sub_path":"string"}],"name":"string","parameters":{"default_mode":0,"medium":"string","name":"string","path":"string"},"type":"HostPath"}],"timezone":"string","tomcat_opts":{"context_path":"string","http_port":0,"server_xml":"string"},"version":"string"},"properties":{"affinity":{"$ref":"#/components/schemas/ComponentAffinity"},"anti_affinity":{"$ref":"#/components/schemas/ComponentAffinity"},"build":{"$ref":"#/components/schemas/Build"},"command":{"$ref":"#/components/schemas/ComponentCommand"},"custom_metric":{"properties":{"dimensions":{"description":"监控维度,例如\"cpu_usage,mem_usage\"","type":"string"},"path":{"description":"采集路径,例如/metrics","type":"string"},"port":{"description":"采集端口,例如9090","type":"integer"}},"required":["path","port","dimensions"],"type":"object"},"deploy_strategy":{"$ref":"#/components/schemas/DeployStrategy"},"description":{"maxLength":128,"type":"string"},"envs":{"items":{"$ref":"#/components/schemas/ComponentEnvironment"},"type":"array"},"external_accesses":{"items":{"$ref":"#/components/schemas/ExternalAccesses"},"type":"array"},"jvm_opts":{"description":"jvm参数","type":"string"},"labels":{"items":{"$ref":"#/components/schemas/Label"},"type":"array"},"limit_cpu":{"description":"单位为Core","type":"number"},"limit_memory":{"description":"单位为GiB","type":"number"},"liveness_probe":{"$ref":"#/components/schemas/ComponentProbe"},"logs":{"items":{"$ref":"#/components/schemas/ComponentLogs"},"type":"array"},"mesher":{"$ref":"#/components/schemas/Mesher"},"name":{"maxLength":64,"pattern":"^[a-z0-9_-]+$","type":"string"},"post_start":{"$ref":"#/components/schemas/ComponentLifecycle"},"pre_stop":{"$ref":"#/components/schemas/ComponentLifecycle"},"readiness_probe":{"$ref":"#/components/schemas/ComponentProbe"},"refer_resources":{"items":{"$ref":"#/components/schemas/ReferResourceCreate"},"type":"array"},"replica":{"type":"integer"},"request_cpu":{"description":"单位为Core","type":"number"},"request_memory":{"description":"单位为GiB","type":"number"},"runtime_stack":{"$ref":"#/components/schemas/RuntimeStack"},"source":{"$ref":"#/components/schemas/SourceObject"},"storages":{"items":{"$ref":"#/components/schemas/ComponentStorage"},"type":"array"},"timezone":{"description":"指定组件运行的时区,比如Asia/Shanghai","type":"string"},"tomcat_opts":{"properties":{"server_xml":{"type":"string"}},"required":["server_xml"],"type":"object"},"version":{"maxLength":64,"pattern":"^([0-9]+)(.[0-9]+){2,3}$","type":"string"}},"required":["name","replica","runtime_stack","source","version"],"type":"object"},"ComponentMount":{"properties":{"path":{"description":"挂载路径","type":"string"},"read_only":{"description":"是否只读","type":"boolean"},"sub_path":{"description":"挂载路径的子路径","type":"string"}},"required":["path","sub_path","read_only"],"type":"object"},"ComponentProbe":{"properties":{"command":{"description":"type为command类型时生效。命令列表","items":{"type":"string"},"type":"array"},"delay":{"description":"表示启动后多久开始探测","type":"integer"},"host":{"description":"type为http类型时生效。默认为POD的IP, 可以指定自定义的IP","type":"string"},"path":{"description":"type为http类型时生效。请求路径。","type":"string"},"port":{"description":"type为http和tcp类型时生效。","type":"integer"},"scheme":{"description":"type为http类型时生效","enum":["HTTP","HTTPS"],"type":"string"},"timeout":{"description":"表示探测超时时间","type":"integer"},"type":{"enum":["http","tcp","command"],"type":"string"}},"required":["type","delay","timeout"],"type":"object"},"ComponentStorage":{"properties":{"mounts":{"items":{"$ref":"#/components/schemas/ComponentMount"},"type":"array"},"name":{"description":"存储盘的名字","type":"string"},"parameters":{"properties":{"default_mode":{"description":"挂载的权限,十进制格式,如384","type":"integer"},"medium":{"description":"适用于EmptyDir类型的存储。不传参数为默认的磁盘介质,传参为memory则开启内存存储。","type":"string"},"name":{"description":"配置项、密钥或者PVC的名字, 适用于ConfigMap、Secret和PersistentVolumeClaim的存储类型","type":"string"},"path":{"description":"主机路径, 适用于HostPath的存储类型","type":"string"}},"type":"object"},"type":{"enum":["HostPath","EmptyDir","ConfigMap","Secret","PersistentVolumeClaim"],"type":"string"}},"required":["type","name","parameters","mounts"],"type":"object"},"ComponentUpgradeResponse":{"properties":{"job_id":{"description":"任务id","type":"string"}},"type":"object"},"DeployStrategy":{"properties":{"gray_release":{"properties":{"first_batch_replica":{"type":"integer"},"first_batch_weight":{"description":"only used for weight type","type":"integer"},"remaining_batch":{"type":"integer"},"type":{"enum":["weight","content"],"type":"string"}},"required":["type","first_batch_replica","first_batch_weight","remaining_batch"],"type":"object"},"rolling_release":{"properties":{"batches":{"type":"integer"}},"required":["batches"],"type":"object"},"type":{"enum":["OneBatchRelease","RollingRelease","GrayRelease"],"type":"string"}},"required":["type"],"type":"object"},"ErrorResponse":{"properties":{"error_code":{"description":"错误码。","type":"string"},"error_detail":{"description":"详细定位信息。","type":"string"},"error_message":{"description":"错误详细信息。","example":"error message","type":"string"},"error_msg":{"description":"错误信息。","type":"string"}},"type":"object"},"ExternalAccesses":{"properties":{"address":{"type":"string"},"forward_port":{"type":"integer"},"protocol":{"enum":["http","https"],"type":"string"}},"type":"object"},"Label":{"properties":{"key":{"type":"string"},"value":{"type":"string"}},"required":["key","value"],"type":"object"},"Mesher":{"properties":{"port":{"type":"integer"}},"required":["port"],"type":"object"},"ReferResourceCreate":{"properties":{"id":{"description":"empty id means resource need to be created","maxLength":64,"type":"string"},"parameters":{"properties":{"namespace":{"description":"for cce resource type. default namespace is default.","type":"string"}},"type":"object"},"type":{"$ref":"#/components/schemas/ResourceType"}},"required":["type","id"],"type":"object"},"ResourceType":{"enum":["vpc","eip","elb","cce","ecs","as","cse","dcs","rds"],"type":"string"},"RuntimeStack":{"properties":{"deploy_mode":{"enum":["container","virtualmachine"],"type":"string"},"name":{"type":"string"},"type":{"type":"string"},"version":{"type":"string"}},"required":["name","type","version","deploy_mode"],"type":"object"},"SourceKind":{"enum":["code","package","image"],"type":"string"},"SourceObject":{"properties":{"auth":{"type":"string"},"kind":{"$ref":"#/components/schemas/SourceKind"},"repo_auth":{"type":"string"},"repo_namespace":{"type":"string"},"repo_ref":{"type":"string"},"repo_type":{"type":"string"},"repo_url":{"type":"string"},"storage":{"enum":["obs","swr","devcloud"],"type":"string"},"url":{"type":"string"},"version":{"description":"软件包版本","type":"string"},"web_url":{"type":"string"}},"required":["kind"],"type":"object"}}},"consumes":"","definitions":null,"description":null,"group_id":"66601b9b4dd246ddab6e76d90a0b0ecd","host":"servicestage.cn-north-4.myhuaweicloud.com","id":"46285daf98ec4106856d501e7dee19e3","info_version":"v3","method":"put","name":"ModifyComponent","parameters":null,"paths":{"/v3/{project_id}/cas/applications/{application_id}/components/{component_id}":{"put":{"description":"此API通过组件ID修改组件信息。","operationId":"ModifyComponent","parameters":[{"$ref":"#/components/parameters/auth-token"},{"$ref":"#/components/parameters/project_id"},{"$ref":"#/components/parameters/application_id"},{"$ref":"#/components/parameters/component_id"}],"requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ComponentModify"}}}},"responses":{"200":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ComponentUpgradeResponse"}}},"description":"操作成功。"},"400":{"$ref":"#/components/responses/400"},"404":{"$ref":"#/components/responses/404"},"500":{"$ref":"#/components/responses/500"}},"summary":"根据组件ID修改组件信息","tags":["Component"],"x-is-registered":"Y","x-support-sdk":"Y"}}},"product_short":"ServiceStage","region_id":"cn-north-4","schemes":["HTTPS"],"security_definitions":null,"summary":"根据组件ID修改组件信息","tags":"Component","uri":null,"version":"3.0.1"}