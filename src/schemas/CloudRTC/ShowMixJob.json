{"base_path":"/v2","components":null,"consumes":"","definitions":{"CommonRsp":{"description":"通用返回","properties":{"error_code":{"description":"错误码","maxLength":64,"minLength":1,"type":"string"},"error_msg":{"description":"错误描述","maxLength":256,"minLength":1,"type":"string"}},"required":["error_code","error_msg"]},"MixJob":{"properties":{"app_id":{"description":"应用id","maxLength":32,"minLength":1,"type":"string"},"create_time":{"description":"任务创建的时间,形如“2006-01-02T15:04:05.075Z”,时区为:UTC","maxLength":64,"minLength":1,"type":"string"},"description":{"description":"状态描述,对state字段的一些补充说明,可用于人工查阅。","maxLength":256,"minLength":1,"type":"string"},"job_id":{"description":"任务编号,可以用于修改、查看和停止合流任务","maxLength":256,"minLength":1,"type":"string"},"mix_param":{"$ref":"#/definitions/MixParam","description":"合流参数"},"record_param":{"$ref":"#/definitions/RecordParam","description":"录制参数"},"room_id":{"description":"房间id","maxLength":64,"minLength":1,"type":"string"},"start_time":{"description":"任务开始时间,形如“2006-01-02T15:04:05.075Z”,时区为:UTC","maxLength":64,"minLength":1,"type":"string"},"state":{"description":"任务状态。\n\n- INIT:任务正在初始化\n- RUNNING:任务正在运行\n- STOPPED:任务已停止","enum":["INIT","RUNNING","STOPPED"],"maxLength":32,"minLength":1,"type":"string"},"stop_reason":{"description":"任务结束原因\n- TENANT_STOP\n- EXCEED_MAX_IDLE_TIME\n- INTERNAL_ERROR","enum":["TENANT_STOP","EXCEED_MAX_IDLE_TIME","INTERNAL_ERROR"],"maxLength":32,"minLength":1,"type":"string"},"stop_time":{"description":"任务结束时间,形如“2006-01-02T15:04:05.075Z”,时区为:UTC","maxLength":64,"minLength":1,"type":"string"},"stream_name":{"description":"流名","maxLength":256,"minLength":1,"type":"string"},"update_time":{"description":"任务中的布局更新的时间,形如“2006-01-02T15:04:05.075Z”,时区为:UTC","maxLength":64,"minLength":1,"type":"string"}}},"MixLayoutPane":{"description":"录制视频混流参数。\n\n用法如下:\n\n如果某窗格需要展示某个固定用户的视频:\n\n例如:{ \"id\": 1, \"user_id\": \"user001\", \"video_type\": \"CAMERASTREAM\" }\n\n如果某窗格需要展示某个固定用户的共享屏幕:\n\n例如:{ \"id\": 1, \"user_id\": \"user001\", \"video_type\": \"SCREENSTREAM\" }\n\n如果某窗格需要展示共享桌面,不特定用户:\n\n例如:{ \"id\": 1,  \"video_type\": \"SCREENSTREAM\"}","properties":{"crop_mode":{"default":"KEEP_RATIO_PADDING","description":"裁剪模式,自定义布局场景下填写本字段,支持两种模式:\n  - KEEP_RATIO_PADDING :保持比例留边。\n  - KEEP_RATIO_CROP :保持比例裁剪。","enum":["KEEP_RATIO_PADDING","KEEP_RATIO_CROP"],"type":"string"},"filling_policy":{"default":"SHARED_SCREEN","description":"填充策略,仅限屏幕共享模板(包括screen_share_right、screen_share_left)场景下填写本字段,支持两种模式:\n  - FIXED_USER :固定用户填充。\n  - SHARED_SCREEN :共享屏幕填充。","enum":["FIXED_USER","SHARED_SCREEN"],"type":"string"},"height":{"description":"窗格高,归一化百分比,小数取值范围在float内,自定义布局场景下填写本字段。","format":"float","maximum":1,"minimum":0,"type":"number"},"id":{"description":"窗口id,从1开始编号","maximum":25,"minimum":1,"type":"integer"},"user_id":{"description":"加入房间的用户id","maxLength":64,"minLength":0,"type":"string"},"video_type":{"default":"CAMERASTREAM","description":"标识视频流的类型,可选摄像头流或者屏幕分享流。\n\n- CAMERASTREAM:摄像头视频流\n- SCREENSTREAM:屏幕分享视频流\n\n默认为CAMERASTREAM。","enum":["CAMERASTREAM","SCREENSTREAM"],"maxLength":64,"minLength":0,"type":"string"},"width":{"description":"窗格宽,归一化百分比,小数取值范围在float内,自定义布局场景下填写本字段。","format":"float","maximum":1,"minimum":0,"type":"number"},"x":{"description":"坐标x,归一化百分比,画布上该画面左上角的横坐标的相对值,范围是 [0.0,1.0]。从左到右布局,0.0在最左端,1.0在最右端,小数取值范围在float内,自定义布局场景下填写本字段。","format":"float","maximum":1,"minimum":0,"type":"number"},"y":{"description":"坐标y,归一化百分比,画布上该画面左上角的纵坐标的相对值,范围是 [0.0,1.0]。从上到下布局,0.0在最上端,1.0在最下端,小数取值范围在float内,自定义布局场景下填写本字段。","format":"float","maximum":1,"minimum":0,"type":"number"},"zorder":{"description":"叠放顺序,0为最底层,1层在0层之上,以此类推,最大支持25层,自定义布局场景下填写本字段。","format":"int32","maximum":24,"minimum":0,"type":"integer"}}},"MixParam":{"description":"合流参数\n\n- 纯音频录制\n\nencode_template 填 audio_only,音频合流会动态选择最大三方的声音。\n\nlayout_template、layout_panes 以及其他视频相关参数都不填,填就忽略。\n\n- 音视频录制(包括共享桌面)\n\nencode_template 非 audio_only,layout_template必须非空。\n\n音频合流会动态选择最大三方的声音","properties":{"background_image":{"description":"画布背景图地址,图片先上传obs,格式s3://bucket/object。默认使用等比缩放裁剪,保证铺满。","maxLength":128,"minLength":1,"type":"string"},"default_user_background_image":{"description":"默认用户背景图地址,图片先上传obs,格式s3://bucket/object。默认使用等比缩放裁剪,保证铺满。","maxLength":128,"minLength":1,"type":"string"},"encode_template":{"description":"输出编码模板名称\n- 1920*1080_30_4620:输出流是1080p,帧率30,码率4.62Mbps\n- 1920*1080_30_3150:输出流是1080p,帧率30,码率3.15Mbps\n- 1920*1080_15_3460:输出流是1080p,帧率15,码率3.46Mbps\n- 1920*1080_15_2080:输出流是1080p,帧率15,码率2.08Mbps\n- 1280*720_30_3420:输出流是720p,帧率30,码率3.42Mbps\n- 1280*720_30_1710:输出流是720p,帧率30,码率1.71Mbps\n- 1280*720_15_2260:输出流是720p,帧率15,码率2.26Mbps\n- 1280*720_15_1130:输出流是720p,帧率15,码率1.13Mbps\n- 640*480_30_1500:输出流是480p,帧率30,码率1.50Mbps\n- 640*480_15_500:输出流是480p,帧率15,码率500Kbps\n- 640*480_30_1000 输出流是480p,帧率30,码率1000Kbps\n- 480*360_30_490:输出流是360p,帧率30,码率490Kbps\n- 480*360_15_320:输出流是360p,帧率15,码率320Kbps","enum":["1920*1080_30_4620","1920*1080_30_3150","1920*1080_15_3460","1920*1080_15_2080","1280*720_30_3420","1280*720_30_1710","1280*720_15_2260","1280*720_15_1130","640*480_30_1000","640*480_30_1500","640*480_15_500","480*360_30_490","480*360_15_320"],"maxLength":128,"minLength":1,"type":"string"},"layout_panes":{"description":"需要混流的视频列表。若不需要混流视频,则可不传递该参数。\n\nnine_grids_view模板不需要填写本字段。","items":{"$ref":"#/definitions/MixLayoutPane"},"maxItems":25,"minItems":0,"type":"array"},"layout_template":{"description":"视频布局模板编号,不混视频的时候,不需要带。\n- nine_grids_view:九宫格模板(自适应模板)\n- screen_share_left:主视图在左边的屏幕共享模板(自适应模板)\n- screen_share_right:主视图在右边的屏幕共享模板(自适应模板)\n- custom:自定义布局","maxLength":128,"minLength":0,"type":"string"},"max_idle_time":{"default":30,"description":"最长空闲频道时间。\n\n取值范围:[5,43200],默认值为30。\n\n单位:秒。\n\n如果频道内无连麦方的状态持续超过该时间,录制程序会自动退出。退出后,再次调用start请求,会产生新的录制任务。\n\n连麦方指:joiner或者publisher的用户。","maximum":43200,"minimum":5,"type":"integer"},"room_id":{"description":"房间id","maxLength":64,"minLength":1,"type":"string"},"screen_background_image":{"description":"共享屏幕的背景图地址,图片先上传obs,格式s3://bucket/object。\n\n在一大多小的布局场景下,无论大窗是显示非指定用户(屏幕共享人的桌面)还是指定用户的共享桌面,都通过该字段指定背景图。","maxLength":128,"minLength":1,"type":"string"},"user_background_images":{"description":"指定用户背景图,优先级大于default_user_background_image","items":{"$ref":"#/definitions/MixUserBackgroundImage"},"maxItems":25,"minItems":0,"type":"array"}},"required":["room_id","encode_template"]},"MixUserBackgroundImage":{"description":"指定用户的背景图,优先级大于default_user_background_image","properties":{"image_uri":{"description":"需要设置背景图的地址,图片先上传obs,格式s3://bucket/object","maxLength":128,"minLength":1,"type":"string"},"user_id":{"description":"需要设置背景图的用户ID","maxLength":64,"minLength":1,"type":"string"}},"required":["user_id","image_uri"]},"RecordParam":{"description":"录制参数","properties":{"record_rule_id":{"description":"录制规则id。","maxLength":128,"minLength":1,"type":"string"}},"required":["record_rule_id"]}},"description":null,"group_id":"fa76a612de62472485d55bfe6c61b3b3","host":"rtc-api.myhuaweicloud.com","id":"798c0624b509419e96daffa683181174","info_version":"v2","method":"get","name":"ShowMixJob","parameters":{},"paths":{"/apps/{app_id}/mix-stream-jobs/{job_id}":{"get":{"description":"调用此接口查询合流转码任务状态。","operationId":"ShowMixJob","parameters":[{"default":"application/json;charset=UTF-8","description":"内容类型。","in":"header","maxLength":64,"minLength":1,"name":"Content-Type","required":true,"type":"string"},{"description":"用户Token。使用Token鉴权方式时必选。通过调用IAM服务获取用户Token接口获取(响应消息头中X-Subject-Token的值)。","in":"header","maxLength":256,"minLength":1,"name":"X-Auth-Token","required":false,"type":"string","x-example":"MIIDkgYJKoZIhvcNAQcCoIIDgzCCXXXXX..."},{"description":"使用AK/SK方式认证时必选,携带的鉴权信息。","in":"header","maxLength":256,"minLength":1,"name":"Authorization","required":false,"type":"string","x-example":"SDK-HMAC-SHA256 Access=xxx, SignedHeaders=content-type;host;x-sdk-date, Signature=xxx"},{"description":"使用AK/SK方式认证时必选,请求的发生时间。","in":"header","maxLength":256,"minLength":1,"name":"X-Sdk-Date","required":false,"type":"string","x-example":"20191115T033655Z"},{"description":"使用AK/SK方式认证时必选,携带项目ID信息。","in":"header","maxLength":64,"minLength":1,"name":"X-Project-Id","required":false,"type":"string","x-example":"70b76xxxxxx34253880af501cdxxxxxx"},{"description":"应用id","in":"path","maxLength":32,"minLength":1,"name":"app_id","required":true,"type":"string"},{"description":"任务编号","in":"path","maxLength":64,"minLength":1,"name":"job_id","required":true,"type":"string"}],"produces":["application/json"],"responses":{"200":{"description":"查询合流转码成功,查询结果详情","examples":{"application/json":{"app_id":"123456789abcdefghijklmno","create_time":"2021-04-16T16:22:44Z","job_id":"607824b4fa163e19fe301cc817dda855","mix_param":{"encode_template":"1920x1080_30_4620","layout_template":"nine_grids_view","max_idle_time":0,"room_id":"gigu"},"record_param":{"record_rule_id":"5f5e172b9016ed5b0961a43"},"room_id":"gigu","start_time":"2021-04-16T16:22:44Z","state":"INIT","stop_time":"0001-01-01T00:00:00Z","stream_name":"m_607824b4fa163e19fe301cc817dda855_gigu","update_time":"2021-04-16T16:22:44Z"}},"headers":{"X-request-Id":{"description":"此字段携带请求ID号,以便任务跟踪。","type":"string"}},"schema":{"$ref":"#/definitions/MixJob"}},"404":{"description":"查询合流转码失败,任务编号不存在","examples":{"application/json":{"error_code":"RTC.00001003","error_msg":"InvalidParameterValue"}},"headers":{"X-request-Id":{"description":"此字段携带请求ID号,以便任务跟踪。","type":"string"}},"schema":{"$ref":"#/definitions/CommonRsp"}},"500":{"description":"查询合流转码失败,服务器端错误","examples":{"application/json":{"error_code":"RTC.00002xxx","error_msg":"InternalError"}},"headers":{"X-request-Id":{"description":"此字段携带请求ID号,以便任务跟踪。","type":"string"}},"schema":{"$ref":"#/definitions/CommonRsp"}}},"summary":"查询合流任务","tags":["合流任务管理"],"x-apiexplorer-hide":"N","x-is-registered":"Y","x-request-examples-url-1":"GET https://rtc-api.myhuaweicloud.com/v2/apps/{app_id}/mix-stream-jobs/{job_id}","x-support-sdk":"Y"}}},"product_short":"CloudRTC","region_id":"cn-north-4","schemes":["HTTPS"],"security_definitions":null,"summary":"查询合流任务","tags":"合流任务管理","uri":null,"version":"2.0"}