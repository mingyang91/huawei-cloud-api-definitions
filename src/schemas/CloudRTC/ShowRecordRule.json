{"base_path":"/v2","components":null,"consumes":"","definitions":{"CommonRsp":{"description":"通用返回","properties":{"error_code":{"description":"错误码","maxLength":64,"minLength":1,"type":"string"},"error_msg":{"description":"错误描述","maxLength":256,"minLength":1,"type":"string"}},"required":["error_code","error_msg"]},"HLSRecordConfig":{"properties":{"record_cycle":{"description":"周期录制时长。\n\n取值范围:[60,43200]或者0,如果为0则整个流录制为一个文件。\n\n单位:秒。","maximum":43200,"minimum":0,"type":"integer"},"record_max_duration_to_merge_file":{"default":0,"description":"录制HLS文件拼接时长,如果流中断超过该时间,则生成新文件。\n\n取值范围:[-1,300],缺省为0。\n\n单位:秒。\n\n- 如果为0表示流中断就生成新文件。\n- 如果为-1则表示流中断恢复后追加到原来的文件中(相隔不超过30天)。","maximum":300,"minimum":-1,"type":"integer"},"record_prefix":{"default":"{app_id}/{record_format}/{stream}_{file_start_time}/{stream}_{file_start_time}\n","description":"录制m3u8文件含路径和文件名的前缀\n\n默认{app_id}/{record_format}/{stream}\\_{file_start_time}/{stream}\\_{file_start_time}\n\n可自定义以下特殊变量:\n- {app_id}:应用id\n- {record_format}:录制格式\n- {stream}:流名\n- {file_start_time}:文件生成时间","maxLength":512,"minLength":1,"type":"string"},"record_slice_duration":{"default":10,"description":"录制HLS时ts的切片时长,非必填。\n\n取值范围:[2,60],缺省为10。\n\n单位:秒。","maximum":60,"minimum":2,"type":"integer"}},"required":["record_cycle"]},"MP4RecordConfig":{"properties":{"record_cycle":{"description":"周期录制时长。\n\n取值范围:[60,10800]。\n\n单位:秒。","maximum":10800,"minimum":60,"type":"integer"},"record_max_duration_to_merge_file":{"default":0,"description":"录制MP4拼接时长,如果流中断超过该时间,则生成新文件。\n\n取值范围:[0,300],缺省为0。\n\n单位:秒。\n\n如果为0表示流中断就生成新文件。","maximum":300,"minimum":0,"type":"integer"},"record_prefix":{"default":"{app_id}/{record_format}/{stream}_{file_start_time}/{stream}_{file_start_time}","description":"录制文件含路径和文件名的前缀。\n\n默认{app_id}/{record_format}/{stream}\\_{file_start_time}/{stream}\\_{file_start_time}\n\n可自定义以下特殊变量:\n- {app_id}:应用id\n- {record_format}:录制格式\n- {stream}:流名\n- {file_start_time}:文件生成时间","maxLength":512,"minLength":1,"type":"string"}},"required":["record_cycle"]},"RecordObsFileAddr":{"properties":{"bucket":{"description":"OBS的bucket名称","example":"mybucket","maxLength":256,"minLength":1,"type":"string"},"location":{"description":"OBS Bucket所在RegionID\n- cn-north-4","enum":["cn-north-4"],"type":"string"},"object":{"description":"OBS对象路径,遵守OBS Object定义。如果为空则保存到根目录","example":"Record","maxLength":1024,"minLength":0,"type":"string"},"project_id":{"description":"OBS Bucket所在Region的项目ID","maxLength":128,"minLength":1,"type":"string"}},"required":["location","project_id","bucket"]},"RecordRule":{"description":"创建状态回调请求体","example":{"app_id":"1","obs_addr":{"bucket":"obsName","location":"cn-north-4","object":"/Record","project_id":"ad7456ce8ef89adf567"},"record_formats":["HLS"]},"properties":{"app_id":{"description":"应用id","maxLength":32,"minLength":1,"type":"string"},"create_time":{"description":"创建时间,形如“2006-01-02T15:04:05.075Z”,时区为:UTC","maxLength":64,"minLength":1,"type":"string"},"hls_config":{"$ref":"#/definitions/HLSRecordConfig","description":"hls格式录制规则管理"},"mp4_config":{"$ref":"#/definitions/MP4RecordConfig","description":"mp4格式录制规则管理"},"obs_addr":{"$ref":"#/definitions/RecordObsFileAddr","description":"保存录制文件所在的桶信息"},"record_formats":{"description":"录制格式:HLS格式或者MP4格式","items":{"enum":["HLS","MP4"],"maxLength":16,"minLength":1,"type":"string"},"maxItems":2,"minItems":1,"type":"array"},"rule_id":{"description":"规则id,由服务端返回。创建或修改规则的时候不携带","maxLength":128,"minLength":1,"type":"string"},"update_time":{"description":"更新时间,形如“2006-01-02T15:04:05.075Z”,时区为:UTC","maxLength":64,"minLength":1,"type":"string"}}}},"description":null,"group_id":"fa76a612de62472485d55bfe6c61b3b3","host":"rtc-api.myhuaweicloud.com","id":"cff832d3d0ef48c8ba04a8c77784c319","info_version":"v2","method":"get","name":"ShowRecordRule","parameters":{},"paths":{"/apps/{app_id}/record-rules/{rule_id}":{"get":{"description":"调用此接口查询指定录制规则。","operationId":"ShowRecordRule","parameters":[{"default":"application/json;charset=UTF-8","description":"内容类型。","in":"header","maxLength":64,"minLength":1,"name":"Content-Type","required":true,"type":"string"},{"description":"用户Token。使用Token鉴权方式时必选。通过调用IAM服务获取用户Token接口获取(响应消息头中X-Subject-Token的值)。","in":"header","maxLength":256,"minLength":1,"name":"X-Auth-Token","required":false,"type":"string","x-example":"MIIDkgYJKoZIhvcNAQcCoIIDgzCCXXXXX..."},{"description":"使用AK/SK方式认证时必选,携带的鉴权信息。","in":"header","maxLength":256,"minLength":1,"name":"Authorization","required":false,"type":"string","x-example":"SDK-HMAC-SHA256 Access=xxx, SignedHeaders=content-type;host;x-sdk-date, Signature=xxx"},{"description":"使用AK/SK方式认证时必选,请求的发生时间。","in":"header","maxLength":256,"minLength":1,"name":"X-Sdk-Date","required":false,"type":"string","x-example":"20191115T033655Z"},{"description":"使用AK/SK方式认证时必选,携带项目ID信息。","in":"header","maxLength":64,"minLength":1,"name":"X-Project-Id","required":false,"type":"string","x-example":"70b76xxxxxx34253880af501cdxxxxxx"},{"description":"应用id","in":"path","maxLength":32,"minLength":1,"name":"app_id","required":true,"type":"string"},{"description":"规则id","in":"path","maxLength":128,"minLength":1,"name":"rule_id","required":true,"type":"string"}],"produces":["application/json"],"responses":{"200":{"description":"获取录制规则配置成功","examples":{"application/json":{"app_id":"123456abc","create_time":"2006-01-02T15:04:05.075Z","mp4_config":{"record_cycle":60,"record_max_duration_to_merge_file":0},"obs_addr":{"bucket":"obsName","location":"cn-north-4","object":"Record/","project_id":"ad7456ce8ef89adf567"},"record_formats":["MP4"],"rule_id":"456789abc","update_time":"2006-01-02T15:04:05.075Z"}},"headers":{"X-request-Id":{"description":"此字段携带请求ID号,以便任务跟踪。","type":"string"}},"schema":{"$ref":"#/definitions/RecordRule"}},"400":{"description":"获取配置失败,语义有误,当前请求无法被服务器理解,或参数有误","examples":{"application/json":{"error_code":"RTC.00001003","error_msg":"InvalidParameterValue"}},"headers":{"X-request-Id":{"description":"此字段携带请求ID号,以便任务跟踪。","type":"string"}},"schema":{"$ref":"#/definitions/CommonRsp"}},"404":{"description":"获取配置失败,配置不存在","examples":{"application/json":{"error_code":"RTC.00001003","error_msg":"InvalidParameterValue"}},"headers":{"X-request-Id":{"description":"此字段携带请求ID号,以便任务跟踪。","type":"string"}},"schema":{"$ref":"#/definitions/CommonRsp"}},"500":{"description":"获取配置失败,服务器端错误","examples":{"application/json":{"error_code":"RTC.00002xxx","error_msg":"InternalError"}},"headers":{"X-request-Id":{"description":"此字段携带请求ID号,以便任务跟踪。","type":"string"}},"schema":{"$ref":"#/definitions/CommonRsp"}}},"summary":"查询录制规则","tags":["录制规则管理"],"x-apiexplorer-hide":"N","x-is-registered":"Y","x-request-examples-url-1":"GET https://rtc-api.myhuaweicloud.com/v2/apps/{app_id}/record-rules/{rule_id}","x-support-sdk":"Y"}}},"product_short":"CloudRTC","region_id":"cn-north-4","schemes":["HTTPS"],"security_definitions":null,"summary":"查询录制规则","tags":"录制规则管理","uri":null,"version":"2.0"}